/*! For license information please see main.69a4241f.js.LICENSE.txt */
(function(){var __webpack_modules__={3361:function(t,e,n){"use strict";n.d(e,{Z:function(){return ot}});var r=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(r){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),i=Math.abs,o=String.fromCharCode,a=Object.assign;function s(t){return t.trim()}function l(t,e,n){return t.replace(e,n)}function u(t,e){return t.indexOf(e)}function c(t,e){return 0|t.charCodeAt(e)}function h(t,e,n){return t.slice(e,n)}function p(t){return t.length}function f(t){return t.length}function d(t,e){return e.push(t),t}var y=1,g=1,v=0,m=0,b=0,_="";function w(t,e,n,r,i,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:y,column:g,length:a,return:""}}function x(t,e){return a(w("",null,null,"",null,null,0),t,{length:-t.length},e)}function k(){return b=m>0?c(_,--m):0,g--,10===b&&(g=1,y--),b}function E(){return b=m<v?c(_,m++):0,g++,10===b&&(g=1,y++),b}function T(){return c(_,m)}function A(){return m}function S(t,e){return h(_,t,e)}function M(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function I(t){return y=g=1,v=p(_=t),m=0,[]}function O(t){return _="",t}function C(t){return s(S(m-1,R(91===t?t+2:40===t?t+1:t)))}function L(t){for(;(b=T())&&b<33;)E();return M(t)>2||M(b)>3?"":" "}function P(t,e){for(;--e&&E()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return S(t,A()+(e<6&&32==T()&&32==E()))}function R(t){for(;E();)switch(b){case t:return m;case 34:case 39:34!==t&&39!==t&&R(b);break;case 40:41===t&&R(t);break;case 92:E()}return m}function N(t,e){for(;E()&&t+b!==57&&(t+b!==84||47!==T()););return"/*"+S(e,m-1)+"*"+o(47===t?t:E())}function j(t){for(;!M(T());)E();return S(t,m)}var D="-ms-",z="-moz-",F="-webkit-",B="comm",G="rule",H="decl",U="@import",q="@keyframes";function V(t,e){for(var n="",r=f(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function Z(t,e,n,r){switch(t.type){case U:case H:return t.return=t.return||t.value;case B:return"";case q:return t.return=t.value+"{"+V(t.children,r)+"}";case G:t.value=t.props.join(",")}return p(n=V(t.children,r))?t.return=t.value+"{"+n+"}":""}function W(t){return O(Y("",null,null,null,[""],t=I(t),0,[0],t))}function Y(t,e,n,r,i,a,s,h,f){for(var y=0,g=0,v=s,m=0,b=0,_=0,w=1,x=1,S=1,M=0,I="",O=i,R=a,D=r,z=I;x;)switch(_=M,M=E()){case 40:if(108!=_&&58==c(z,v-1)){-1!=u(z+=l(C(M),"&","&\f"),"&\f")&&(S=-1);break}case 34:case 39:case 91:z+=C(M);break;case 9:case 10:case 13:case 32:z+=L(_);break;case 92:z+=P(A()-1,7);continue;case 47:switch(T()){case 42:case 47:d(X(N(E(),A()),e,n),f);break;default:z+="/"}break;case 123*w:h[y++]=p(z)*S;case 125*w:case 59:case 0:switch(M){case 0:case 125:x=0;case 59+g:b>0&&p(z)-v&&d(b>32?J(z+";",r,n,v-1):J(l(z," ","")+";",r,n,v-2),f);break;case 59:z+=";";default:if(d(D=K(z,e,n,y,g,i,h,I,O=[],R=[],v),a),123===M)if(0===g)Y(z,e,D,D,O,a,v,h,R);else switch(99===m&&110===c(z,3)?100:m){case 100:case 109:case 115:Y(t,D,D,r&&d(K(t,D,D,0,0,i,h,I,i,O=[],v),R),i,R,v,h,r?O:R);break;default:Y(z,D,D,D,[""],R,0,h,R)}}y=g=b=0,w=S=1,I=z="",v=s;break;case 58:v=1+p(z),b=_;default:if(w<1)if(123==M)--w;else if(125==M&&0==w++&&125==k())continue;switch(z+=o(M),M*w){case 38:S=g>0?1:(z+="\f",-1);break;case 44:h[y++]=(p(z)-1)*S,S=1;break;case 64:45===T()&&(z+=C(E())),m=T(),g=v=p(I=z+=j(A())),M++;break;case 45:45===_&&2==p(z)&&(w=0)}}return a}function K(t,e,n,r,o,a,u,c,p,d,y){for(var g=o-1,v=0===o?a:[""],m=f(v),b=0,_=0,x=0;b<r;++b)for(var k=0,E=h(t,g+1,g=i(_=u[b])),T=t;k<m;++k)(T=s(_>0?v[k]+" "+E:l(E,/&\f/g,v[k])))&&(p[x++]=T);return w(t,e,n,0===o?G:c,p,d,y)}function X(t,e,n){return w(t,e,n,B,o(b),h(t,2,-2),0)}function J(t,e,n,r){return w(t,e,n,H,h(t,0,r),h(t,r+1,-1),r)}var $=function(t,e,n){for(var r=0,i=0;r=i,i=T(),38===r&&12===i&&(e[n]=1),!M(i);)E();return S(t,m)},Q=function(t,e){return O(function(t,e){var n=-1,r=44;do{switch(M(r)){case 0:38===r&&12===T()&&(e[n]=1),t[n]+=$(m-1,e,n);break;case 2:t[n]+=C(r);break;case 4:if(44===r){t[++n]=58===T()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=o(r)}}while(r=E());return t}(I(t),e))},tt=new WeakMap,et=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,r=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||tt.get(n))&&!r){tt.set(t,!0);for(var i=[],o=Q(e,i),a=n.props,s=0,l=0;s<o.length;s++)for(var u=0;u<a.length;u++,l++)t.props[l]=i[s]?o[s].replace(/&\f/g,a[u]):a[u]+" "+o[s]}}},nt=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function rt(t,e){switch(function(t,e){return 45^c(t,0)?(((e<<2^c(t,0))<<2^c(t,1))<<2^c(t,2))<<2^c(t,3):0}(t,e)){case 5103:return F+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return F+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return F+t+z+t+D+t+t;case 6828:case 4268:return F+t+D+t+t;case 6165:return F+t+D+"flex-"+t+t;case 5187:return F+t+l(t,/(\w+).+(:[^]+)/,F+"box-$1$2"+D+"flex-$1$2")+t;case 5443:return F+t+D+"flex-item-"+l(t,/flex-|-self/,"")+t;case 4675:return F+t+D+"flex-line-pack"+l(t,/align-content|flex-|-self/,"")+t;case 5548:return F+t+D+l(t,"shrink","negative")+t;case 5292:return F+t+D+l(t,"basis","preferred-size")+t;case 6060:return F+"box-"+l(t,"-grow","")+F+t+D+l(t,"grow","positive")+t;case 4554:return F+l(t,/([^-])(transform)/g,"$1"+F+"$2")+t;case 6187:return l(l(l(t,/(zoom-|grab)/,F+"$1"),/(image-set)/,F+"$1"),t,"")+t;case 5495:case 3959:return l(t,/(image-set\([^]*)/,F+"$1$`$1");case 4968:return l(l(t,/(.+:)(flex-)?(.*)/,F+"box-pack:$3"+D+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+F+t+t;case 4095:case 3583:case 4068:case 2532:return l(t,/(.+)-inline(.+)/,F+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(p(t)-1-e>6)switch(c(t,e+1)){case 109:if(45!==c(t,e+4))break;case 102:return l(t,/(.+:)(.+)-([^]+)/,"$1"+F+"$2-$3$1"+z+(108==c(t,e+3)?"$3":"$2-$3"))+t;case 115:return~u(t,"stretch")?rt(l(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==c(t,e+1))break;case 6444:switch(c(t,p(t)-3-(~u(t,"!important")&&10))){case 107:return l(t,":",":"+F)+t;case 101:return l(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+F+(45===c(t,14)?"inline-":"")+"box$3$1"+F+"$2$3$1"+D+"$2box$3")+t}break;case 5936:switch(c(t,e+11)){case 114:return F+t+D+l(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return F+t+D+l(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return F+t+D+l(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return F+t+D+t+t}return t}var it=[function(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case H:t.return=rt(t.value,t.length);break;case q:return V([x(t,{value:l(t.value,"@","@"+F)})],r);case G:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return V([x(t,{props:[l(e,/:(read-\w+)/,":"+z+"$1")]})],r);case"::placeholder":return V([x(t,{props:[l(e,/:(plac\w+)/,":"+F+"input-$1")]}),x(t,{props:[l(e,/:(plac\w+)/,":"+z+"$1")]}),x(t,{props:[l(e,/:(plac\w+)/,D+"input-$1")]})],r)}return""}))}}],ot=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var i=t.stylisPlugins||it;var o,a,s={},l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)s[e[n]]=!0;l.push(t)}));var u,c,h=[Z,(c=function(t){u.insert(t)},function(t){t.root||(t=t.return)&&c(t)})],p=function(t){var e=f(t);return function(n,r,i,o){for(var a="",s=0;s<e;s++)a+=t[s](n,r,i,o)||"";return a}}([et,nt].concat(i,h));a=function(t,e,n,r){u=n,V(W(t?t+"{"+e.styles+"}":e.styles),p),r&&(d.inserted[e.name]=!0)};var d={key:e,sheet:new r({key:e,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:a};return d.sheet.hydrate(l),d}},9797:function(t,e){"use strict";e.Z=function(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}},9140:function(t,e,n){"use strict";n.d(e,{O:function(){return y}});var r=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},i={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},o=n(9797),a=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(t){return 45===t.charCodeAt(1)},u=function(t){return null!=t&&"boolean"!==typeof t},c=(0,o.Z)((function(t){return l(t)?t:t.replace(a,"-$&").toLowerCase()})),h=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(s,(function(t,e,n){return f={name:e,styles:n,next:f},e}))}return 1===i[t]||l(t)||"number"!==typeof e||0===e?e:e+"px"};function p(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return f={name:n.name,styles:n.styles,next:f},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)f={name:r.name,styles:r.styles,next:f},r=r.next;return n.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=p(t,e,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a)null!=e&&void 0!==e[a]?r+=o+"{"+e[a]+"}":u(a)&&(r+=c(o)+":"+h(o,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=e&&void 0!==e[a[0]]){var s=p(t,e,a);switch(o){case"animation":case"animationName":r+=c(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var l=0;l<a.length;l++)u(a[l])&&(r+=c(o)+":"+h(o,a[l])+";")}return r}(t,e,n);case"function":if(void 0!==t){var i=f,o=n(t);return f=i,p(t,e,o)}}if(null==e)return n;var a=e[n];return void 0!==a?a:n}var f,d=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var y=function(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var i=!0,o="";f=void 0;var a=t[0];null==a||void 0===a.raw?(i=!1,o+=p(n,e,a)):o+=a[0];for(var s=1;s<t.length;s++)o+=p(n,e,t[s]),i&&(o+=a[s]);d.lastIndex=0;for(var l,u="";null!==(l=d.exec(o));)u+="-"+l[1];return{name:r(o)+u,styles:o,next:f}}},2561:function(t,e,n){"use strict";var r;n.d(e,{L:function(){return a}});var i=n(2791),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,a=o||function(t){return t()};o||i.useLayoutEffect},5892:function(module,__unused_webpack___webpack_exports__,__webpack_require__){"use strict";module=__webpack_require__.hmd(module),function(){var p,aa=[];function ba(t){return function(){return aa[t].apply(this,arguments)}}function ca(t,e){return aa[t]=e}function da(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function fa(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:da(t)}}function ha(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}var ia="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},ja="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ka(t,e){if(e){var n=ja;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&ia(n,t,{configurable:!0,writable:!0,value:e})}}function ma(){ma=function(){},ja.Symbol||(ja.Symbol=na)}function oa(t,e){this.a=t,ia(this,"description",{configurable:!0,writable:!0,value:e})}ka("Array.prototype.find",(function(t){return t||function(t,e){t:{var n=this;n instanceof String&&(n=String(n));for(var r=n.length,i=0;i<r;i++){var o=n[i];if(t.call(e,o,i,n)){t=o;break t}}t=void 0}return t}})),oa.prototype.toString=function(){return this.a};var na=function(){var t=0;return function e(n){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new oa("jscomp_symbol_"+(n||"")+"_"+t++,n)}}(),sa;function pa(){ma();var t=ja.Symbol.iterator;t||(t=ja.Symbol.iterator=ja.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[t]&&ia(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return qa(da(this))}}),pa=function(){}}function qa(t){return pa(),(t={next:t})[ja.Symbol.iterator]=function(){return this},t}function ra(t,e){pa(),t instanceof String&&(t+="");var n=0,r={next:function(){if(n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r}if(ka("Array.prototype.keys",(function(t){return t||function(){return ra(this,(function(t){return t}))}})),"function"==typeof Object.setPrototypeOf)sa=Object.setPrototypeOf;else{var ta;t:{var ua={zg:!0},va={};try{va.__proto__=ua,ta=va.zg;break t}catch(a){}ta=!1}sa=ta?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var wa=sa;ka("Object.setPrototypeOf",(function(t){return t||wa})),ka("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var i=ja.setTimeout;n.prototype.c=function(t){i(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.R),reject:t(this.g)}},e.prototype.R=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.u(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.s(t):this.i(t)}},e.prototype.s=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.Xa(e,t):this.i(t)},e.prototype.g=function(t){this.j(2,t)},e.prototype.i=function(t){this.j(1,t)},e.prototype.j=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.m()},e.prototype.m=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)o.b(this.a[t]);this.a=null}};var o=new n;return e.prototype.u=function(t){var e=this.f();t.mf(e.resolve,e.reject)},e.prototype.Xa=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.mf(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.mf=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?o.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=fa(t),o=i.next();!o.done;o=i.next())r(o.value).mf(e,n)}))},e.all=function(t){var n=fa(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).mf(o(a.length-1),e),i=n.next()}while(!i.done)}))},e})),ka("Object.entries",(function(t){return t||function(t){var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push([e,t[e]]);return n}}));var xa="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};ka("Object.assign",(function(t){return t||xa})),ka("Math.log2",(function(t){return t||function(t){return Math.log(t)/Math.LN2}}));var ya=this||self;function za(t,e,n){t=t.split("."),n=n||ya,t[0]in n||"undefined"==typeof n.execScript||n.execScript("var "+t[0]);for(var r;t.length&&(r=t.shift());)t.length||void 0===e?n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}:n[r]=e}function Aa(){}function Ba(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function Ca(t){var e=Ba(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Da(t){return"function"==Ba(t)}function Ea(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Fa="closure_uid_"+(1e9*Math.random()>>>0),Ga=0;function Ha(t,e,n){return t.call.apply(t.bind,arguments)}function Ia(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ja(t,e,n){return(Ja=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ha:Ia).apply(null,arguments)}function Ka(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function t(t,e){za(t,e,void 0)}function u(t,e){function n(){}n.prototype=e.prototype,t.l=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Ko=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function La(t){if(Error.captureStackTrace)Error.captureStackTrace(this,La);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function Ma(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Na(){this.b=this.a=null}u(La,Error),La.prototype.name="CustomError",Ma.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t},Ma.prototype.put=function(t){this.f(t),100>this.b&&(this.b++,t.next=this.a,this.a=t)};var Qa=new Ma((function(){return new Pa}),(function(t){t.reset()}));function Pa(){this.next=this.b=this.a=null}Na.prototype.add=function(t,e){var n=Qa.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Na.prototype.remove=function(){var t=null;return this.a&&(t=this.a,this.a=this.a.next,this.a||(this.b=null),t.next=null),t},Pa.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Pa.prototype.reset=function(){this.next=this.b=this.a=null};var Ra=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Sa(t,e){return-1!=t.indexOf(e)}function Ta(t,e){return t<e?-1:t>e?1:0}function Ua(t,e){for(var n in t)if(e.call(void 0,t[n],n,t))return!0;return!1}function Va(t){for(var e in t)return!1;return!0}function Wa(t){var e,n={};for(e in t)n[e]=t[e];return n}var Xa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),$a;function Ya(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Xa.length;o++)n=Xa[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}t:{var ab=ya.navigator;if(ab){var bb=ab.userAgent;if(bb){$a=bb;break t}}$a=""}function cb(t){return Sa($a,t)}var db=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function eb(t,e){this.b=t===fb&&e||"",this.a=gb}var gb={},fb={},hb=new eb(fb,"");function ib(t,e){this.b=t===jb&&e||"",this.a=kb}ib.prototype.mc=function(){return 1};var kb={},jb={};function lb(){this.b="",this.c=mb,this.a=null}function nb(){var t=ob;return t instanceof lb&&t.constructor===lb&&t.c===mb?t.b:(Ba(t),"type_error:SafeHtml")}lb.prototype.mc=function(){return this.a};var mb={};function pb(t){var e=new lb;return e.b=t,e.a=0,e}pb("<!DOCTYPE html>");var ob=pb("");function qb(t){var e=new ib(jb,hb instanceof eb&&hb.constructor===eb&&hb.a===gb?hb.b:"type_error:Const");e instanceof ib&&e.constructor===ib&&e.a===kb?e=e.b:(Ba(e),e="type_error:TrustedResourceUrl"),t.src=e.toString()}function rb(t){return rb[" "](t),t}function sb(t,e){var n=tb;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}pb("<br>"),rb[" "]=Aa;var ub=cb("Opera"),vb=cb("Trident")||cb("MSIE"),wb=cb("Edge"),xb=cb("Gecko")&&!(Sa($a.toLowerCase(),"webkit")&&!cb("Edge"))&&!(cb("Trident")||cb("MSIE"))&&!cb("Edge"),yb=Sa($a.toLowerCase(),"webkit")&&!cb("Edge"),Ab;function zb(){var t=ya.document;return t?t.documentMode:void 0}t:{var Bb="",Cb=function(){var t=$a;return xb?/rv:([^\);]+)(\)|;)/.exec(t):wb?/Edge\/([\d\.]+)/.exec(t):vb?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):yb?/WebKit\/(\S+)/.exec(t):ub?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Cb&&(Bb=Cb?Cb[1]:""),vb){var Db=zb();if(null!=Db&&Db>parseFloat(Bb)){Ab=String(Db);break t}}Ab=Bb}var tb={},Fb,Ib,Lb;function Eb(t){return sb(t,(function(){for(var e=0,n=Ra(String(Ab)).split("."),r=Ra(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=Ta(e=0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Ta(0==a[2].length,0==s[2].length)||Ta(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}function Gb(t){var e=document;return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function Hb(t){ya.setTimeout((function(){throw t}),0)}function Jb(){var t=ya.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!cb("Presto")&&(t=function(){var t=Gb("IFRAME");t.style.display="none",qb(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(nb()),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=Ja((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!cb("Trident")&&!cb("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Vi;n.Vi=null,t()}},function(t){r.next={Vi:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in Gb("SCRIPT")?function(t){var e=Gb("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){ya.setTimeout(t,0)}}function Kb(t,e){Lb||Mb(),Nb||(Lb(),Nb=!0),Ob.add(t,e)}function Mb(){if(ya.Promise&&ya.Promise.resolve){var t=ya.Promise.resolve(void 0);Lb=function(){t.then(Pb)}}else Lb=function(){var t=Pb;!Da(ya.setImmediate)||ya.Window&&ya.Window.prototype&&!cb("Edge")&&ya.Window.prototype.setImmediate==ya.setImmediate?(Ib||(Ib=Jb()),Ib(t)):ya.setImmediate(t)}}Fb=ya.document&&vb?zb():void 0,!xb&&!vb||vb&&9<=Number(Fb)||xb&&Eb("1.9.1"),vb&&Eb("9");var Nb=!1,Ob=new Na;function Pb(){for(var t;t=Ob.remove();){try{t.a.call(t.b)}catch(e){Hb(e)}Qa.put(t)}Nb=!1}function Qb(t){if(this.a=Rb,this.j=void 0,this.f=this.b=this.c=null,this.g=this.i=!1,t!=Aa)try{var e=this;t.call(void 0,(function(t){Sb(e,Tb,t)}),(function(t){Sb(e,Ub,t)}))}catch(n){Sb(this,Ub,n)}}var Rb=0,Tb=2,Ub=3;function Vb(){this.next=this.c=this.b=this.f=this.a=null,this.g=!1}Vb.prototype.reset=function(){this.c=this.b=this.f=this.a=null,this.g=!1};var Wb=new Ma((function(){return new Vb}),(function(t){t.reset()}));function Xb(t,e,n){var r=Wb.get();return r.f=t,r.b=e,r.c=n,r}function Zb(t){if(t instanceof Qb)return t;var e=new Qb(Aa);return Sb(e,Tb,t),e}function $b(t){return new Qb((function(e,n){n(t)}))}function ac(){var t,e;return new bc(new Qb((function(n,r){t=n,e=r})),t,e)}function ec(t,e){if(t.a==Rb)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.g||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Rb&&1==r?ec(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):fc(n),gc(n,i,Ub,e)))}t.c=null}else Sb(t,Ub,e)}function hc(t,e){t.b||t.a!=Tb&&t.a!=Ub||ic(t),t.f?t.f.next=e:t.b=e,t.f=e}function cc(t,e,n,r){var i=Xb(null,null,null);return i.a=new Qb((function(t,o){i.f=e?function(n){try{var i=e.call(r,n);t(i)}catch(a){o(a)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof dc?o(e):t(i)}catch(a){o(a)}}:o})),i.a.c=t,hc(t,i),i.a}function Sb(t,e,n){if(t.a==Rb){t===n&&(e=Ub,n=new TypeError("Promise cannot resolve to itself")),t.a=1;t:{var r=n,i=t.s,o=t.R;if(r instanceof Qb){hc(r,Xb(i||Aa,o||null,t));var a=!0}else{if(r)try{var s=!!r.$goog_Thenable}catch(u){s=!1}else s=!1;if(s)r.then(i,o,t),a=!0;else{if(Ea(r))try{var l=r.then;if(Da(l)){jc(r,l,i,o,t),a=!0;break t}}catch(u){o.call(t,u),a=!0;break t}a=!1}}}a||(t.j=n,t.a=e,t.c=null,ic(t),e!=Ub||n instanceof dc||kc(t,n))}}function jc(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(s){o(s)}}function ic(t){t.i||(t.i=!0,Kb(t.m,t))}function fc(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function gc(t,e,n,r){if(n==Ub&&e.b&&!e.g)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,lc(e,n,r);else try{e.g?e.f.call(e.c):lc(e,n,r)}catch(i){mc.call(null,i)}Wb.put(e)}function lc(t,e,n){e==Tb?t.f.call(t.c,n):t.b&&t.b.call(t.c,n)}function kc(t,e){t.g=!0,Kb((function(){t.g&&mc.call(null,e)}))}Qb.prototype.then=function(t,e,n){return cc(this,Da(t)?t:null,Da(e)?e:null,n)},Qb.prototype.$goog_Thenable=!0,Qb.prototype.cancel=function(t){if(this.a==Rb){var e=new dc(t);Kb((function(){ec(this,e)}),this)}},Qb.prototype.s=function(t){this.a=Rb,Sb(this,Tb,t)},Qb.prototype.R=function(t){this.a=Rb,Sb(this,Ub,t)},Qb.prototype.m=function(){for(var t;t=fc(this);)gc(this,t,this.a,this.j);this.i=!1};var mc=Hb;function dc(t){La.call(this,t)}function bc(t,e,n){this.Ck=t,this.resolve=e,this.reject=n}u(dc,La),dc.prototype.name="cancel";var x=this;function nc(){return Object.create(y,void 0)}var A=Ja,oc=String,pc=x.Object.freeze||function(t){return t};function qc(t){for(var e,n=Object.keys(t),r=n.length;r--;)Ea(e=t[n[r]])&&qc(e);return pc(t)}function rc(t){var e=Ba(t);if("object"==e||"array"==e){if(Da(t.clone))return t.clone();for(var n in e="array"==e?[]:{},t)t.hasOwnProperty(n)&&(e[n]=rc(t[n]));return e}return t}var B=[].pop(),y=/x/.exec("");function sc(t,e){return oc(t).split(e!==B?e:" ")}var tc="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(t,e,n,r,i){if(!(e=t instanceof e)&&n)throw new D(n,r,uc(i)?i:t);return e}function vc(t,e){if(!0===(C(t,e)&&t.constructor===e))throw new TypeError("Illegal constructor "+wc(e))}function xc(t,e,n,r,i){if(!(e=yc(t)===e)&&n)throw new D(n,r,uc(i)?i:t);return e}function zc(t,e,n,r){return xc(t,"Array",e,n,r)}function uc(t){return t!==B}function Ac(t){return"string"===typeof t}t("H.lang.isArray",zc),t("H.lang.isString",Ac);var Bc=parseInt,Cc=parseFloat,E=isNaN;function Dc(t){return t===+t}function Ec(t){return!E(+t)}function yc(t){var e=Object[tc[0]][tc[6]].call(t).match(/^\[object (\w+)\]$/);return e?e[1]:typeof t}t("H.lang.isNumber",Dc),t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(t){return"number"===typeof t&&0===t%1});var Fc=[];function Gc(t){0>Fc.indexOf(t)&&Fc.push(t)}function wc(t,e,n,r){var i,o="",a=2>arguments.length;return a&&(e={H:x.H},n="",r=Fc.slice()),Hc(e,!0,(function(e,a){try{if(a=Ic(e,i=e[a]),!(Ea(i)&&i.window===i&&i.self===i||Ea(i)&&0<i.nodeType&&Da(i.cloneNode))&&Ea(i)){if(i===t)return o=n+"."+a,!0;if(0>r.indexOf(i)&&(r.push(i),o=wc(t,i,n+"."+a,r)))return!0}}catch(s){}})),a&&(o=o?o.substr(1).replace("."+tc[0]+".","#"):"~"+(Da(t)?Jc(t)+"()":yc(t))),o}function Ic(t,e){var n=[];return Hc(t,!1,(function(t,r){t[r]===e&&n.push(r)})),n.sort(Kc)[0]}function Kc(t,e){return e.length-t.length}Gc(Fc);var Lc=Object[tc[0]][tc[2]];function Hc(t,e,n){var r;if(t){for(i in t)if((!e||Lc.call(t,i))&&n(t,i,!0))return;for(r=tc.length;r--;){var i=tc[r];if((!e||Lc.call(t,i))&&n(t,i,!1))break}}}function Jc(t){return(t=/^\s*function ([^\( ]+)/.exec(t))?t[1]:"anonymous"}function Mc(t,e,n){n[e]="#"+e}var Nc=!!x.__karma__;function Oc(){throw Error("unimplemented method")}function Pc(t,e){"status"in(e=e||{})&&(this.status=+e.status),"statusText"in e&&(this.statusText=e.statusText),this.ok=200<=this.status&&300>this.status,this.f=!1,t?"string"===typeof t?this.c=t:(e=x.ArrayBuffer)&&e.prototype.isPrototypeOf(t)?this.a=t:e&&t.buffer?this.a=t.buffer:x.Blob.prototype.isPrototypeOf(t)&&(this.b=t):this.c=""}function Qc(t){if(t.f)return $b(new TypeError("Already read"));t.f=!0}function Rc(t){var e=new FileReader;return e.readAsText(t),new Qb((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function D(t,e,n){var r=arguments.length;if((e=e!==B?+e:e)!==B){var i=(i=/^.*?\(([^\)]+)/.exec((""+t).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?sc(i[1].replace(/\s+/g,""),","):[];i.forEach(Mc),i=i[e]||"#"+e}var o=t?wc(t):"";return r=2<r?oc(n):"",(i||r)&&(o+=" (Argument "+(i||"")+(r?" "+r:"")+")"),r=Error(o),Object.setPrototypeOf(r,D.prototype),r}function Sc(t,e,n){var r,i,o,a=n&&n.headers||{},s={},l=this;if(!Da(e))throw new D(Sc,1,"function required");Ya(a,Vc.headers,a),Ya(s,Vc,n||{}),s.headers=a,this.c=e,this.a=r=new XMLHttpRequest,e=s.method;try{for(i in r.open(e,t,!0),a)a.hasOwnProperty(i)&&(o=a[i])&&r.setRequestHeader(i,o);r.withCredentials=!!s.withCredentials,function(){var t=A(l.b,l),e=+s.timeout||0;Tc?(Uc(l,"timeout",t),r.timeout=e):e&&(l.f=setTimeout((function(){r.abort(),l.b({type:"timeout"})}),e)),Uc(l,"error",t),Uc(l,"load",t),r.send(s.data)}()}catch(u){this.b({type:"cors"})}}t("H.net.Response",Pc),Pc.prototype.type="default",Pc.prototype.type=Pc.prototype.type,Pc.prototype.status=200,Pc.prototype.status=Pc.prototype.status,Pc.prototype.statusText="OK",Pc.prototype.statusText=Pc.prototype.statusText,Pc.error=function(){return Pc.a||(Pc.a=new Pc(null,{status:0,statusText:""}),Pc.a.type="error"),Pc.a},Pc.error=Pc.error,Pc.prototype.text=function(){var t=Qc(this);if(!t)if(this.c)t=Zb(this.c);else if(this.a){var e,n=(t=new Uint8Array(this.a)).length,r=Array(n);for(e=0;e<n;e++)r[e]=String.fromCharCode(t[e]);t=Zb(r.join(""))}else t=this.b?Rc(this.b):$b("Unsupported response body");return t},Pc.prototype.json=function(){return this.text().then(x.JSON.parse)},Pc.prototype.blob=function(){var t,e=Qc(this);return e||(this.b?t=this.b:this.a&&(t=new Blob([this.a],{type:"application/octet-stream"}))),e||Zb(t)},Pc.prototype.arrayBuffer=function(){return this.a?Qc(this)||Zb(this.a.slice(0)):this.blob().then(Pc.b)},Pc.b=function(t){var e=new FileReader;return e.readAsArrayBuffer(t),new Qb((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))},!Nc&&x.Response&&x.Response.error&&(Pc=x.Response,Gc(Pc.prototype)),u(D,Error),t("H.lang.InvalidArgumentError",D),D.prototype.name="InvalidArgumentError",t("H.net.Xhr",Sc);var Vc={method:"GET",headers:{},data:null},Wc="withCredentials"in new XMLHttpRequest,Tc="timeout"in new XMLHttpRequest,Zc,$c,ad,dd,ed;function Uc(t,e,n){Wc?t.a.addEventListener(e,n):t.a["on"+e]=n}function Xc(t,e,n){Wc?t.a.removeEventListener(e,n):t.a["on"+e]=null}function Yc(t,e){var n=[];return t&&n.push(wc(t)),1<arguments.length&&n.push(""+e),n=Error(n.join(" ")),Object.setPrototypeOf(n,Yc.prototype),n}function bd(){if(this.constructor=this.constructor,!Ac("STATIC_DB"))throw new D(this.constructor,0);if(this.g=cd(),!this.g)throw new Yc(this.constructor,"This browser does not support IndexedDB");this.a=[],this.c=[],this.Sh=A(this.Sh,this)}function kd(t,e,n){if(t.b)t.a?(t.a.push(e),n&&t.c.push(n)):t.f?n&&n(t.f):e(t.b.result);else{t.b=t.g.open("H_STATIC_DB",1),t.b.onupgradeneeded=t.Sh;var r=t.b.onerror=function(){clearTimeout(t.i),t.f=this.error,t.c.forEach((function(e){e(t.f)})),delete t.a,delete t.c};t.i=setTimeout((function(){r.call({error:Error("DbOpenTimeoutError")})}),500),t.b.onsuccess=function(){clearTimeout(t.i),t.a?(t.a.forEach((function(t){t(this.result)}),this),delete t.a,delete t.c):(delete t.b,delete t.f,t.a=[],t.c=[])},t.a.push(e),n&&t.c.push(n)}}function gd(t,e,n){kd(t,(function(t){t=t.transaction(["data"],"readwrite"),e(t.objectStore("data"))}),n)}function id(t,e,n){e&&(t.onsuccess=function(){e(this.result)}),n&&(t.onerror=function(){n(this.error)})}function fd(t){var e=Object.prototype.toString.call(t);return"[object Blob]"===e||"[object ArrayBuffer]"===e||Ac(t)||Ea(t)}function ld(){return dd||(dd=new bd),dd}function cd(){return x.indexedDB||x.webkitIndexedDB||x.mozIndexedDB||x.msIndexedDB}function md(){var t="";if(!uc(ed))if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)ed=!1;else{try{var e=cd();t="H_TEST_DB";var n=e&&e.open(t,1)}catch(r){}ed=!!n&&null===n.onupgradeneeded,n&&e.deleteDatabase&&e.deleteDatabase(t)}return ed}function nd(){0!=od&&(pd[this[Fa]||(this[Fa]=++Ga)]=this),this.wd=this.wd,this.Xa=this.Xa}Sc.prototype.abort=function(){this.a&&(this.a.abort(),this.a&&this.b({type:"abort"}))},Sc.prototype.abort=Sc.prototype.abort,Sc.prototype.b=function(t){var e,n=t.type;t=this.a,this.f&&clearTimeout(this.f),"load"===n?t instanceof XMLHttpRequest&&200!==t.status&&(e="network"):e=4===t.readyState&&0===t.status&&"error"==n?"cors":"error"!=n?n:"network",Xc(this,"timeout",n=this.b),Xc(this,"error",n),Xc(this,"load",n),t=0===t.status||e&&"network"!==e?Pc.error():new Pc(t.responseText||null,t),e=this.c,delete this.b,delete this.c,delete this.a,e(t)},u(Yc,Error),t("H.lang.IllegalOperationError",Yc),Yc.prototype.name="IllegalOperationError",p=bd.prototype,p.put=function(t,e,n,r){if(!Ac(t)&&!Dc(t))throw new D(this.put,0);if(!fd(e))throw new D(this.put,1);gd(this,(function(i){id(i.put(e,t),n,r)}),r)},p.get=function(t,e,n){var r;if(!Ac(t)&&!Dc(t))throw new D(this.get,0);if(!Da(e))throw new D(this.get,1);return gd(this,(function(i){id(r=i.get(t),e,n)}),n),{cancel:function(){r&&(r.onsuccess=jd)}}},p.remove=function(t,e,n){if(!Ac(t)&&!Dc(t))throw new D(this.remove,0);gd(this,(function(r){id(r.delete(t),e,n)}),n)},p.clear=function(t,e){gd(this,(function(n){id(n.clear(),t,e)}),e)},p.Sh=function(){var t=this.b.result;t.objectStoreNames.contains("data")||t.createObjectStore("data")},t("H.util.IndexedDBStorage.getInstance",ld),t("H.util.IndexedDBStorage.isSupported",md);var od=0,pd={};function rd(t){t&&"function"==typeof t.D&&t.D()}function sd(t,e){this.type=t,this.currentTarget=this.target=e,this.c=this.a=!1,this.Kk=!0}function td(t,e,n){td.l.constructor.call(this,t,n),this.data=e}function ud(t,e,n){ud.l.constructor.call(this,t,n),this.message=e}nd.prototype.wd=!1,nd.prototype.D=function(){if(!this.wd&&(this.wd=!0,this.o(),0!=od)){var t=this[Fa]||(this[Fa]=++Ga);if(0!=od&&this.Xa&&0<this.Xa.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete pd[t]}},nd.prototype.ob=function(t,e){this.wd?void 0!==e?t.call(e):t():(this.Xa||(this.Xa=[]),this.Xa.push(void 0!==e?Ja(t,e):t))},nd.prototype.o=function(){if(this.Xa)for(;this.Xa.length;)this.Xa.shift()()},sd.prototype.stopPropagation=function(){this.a=!0},sd.prototype.preventDefault=function(){this.c=!0,this.Kk=!1},t("H.util.Event",sd),sd.prototype.stopPropagation=sd.prototype.stopPropagation,sd.prototype.stopPropagation=sd.prototype.stopPropagation,sd.prototype.CAPTURING_PHASE=1,sd.prototype.CAPTURING_PHASE=sd.prototype.CAPTURING_PHASE,sd.prototype.AT_TARGET=2,sd.prototype.AT_TARGET=sd.prototype.AT_TARGET,sd.prototype.BUBBLING_PHASE=3,sd.prototype.BUBBLING_PHASE=sd.prototype.BUBBLING_PHASE,sd.prototype.eventPhase=0,sd.prototype.eventPhase=sd.prototype.eventPhase,u(td,sd),t("H.util.DataEvent",td),u(ud,sd),t("H.util.ErrorEvent",ud);var vd=Math,wd=vd.min,xd=vd.max,yd=vd.round,zd=vd.floor,Ad=vd.ceil,Bd=vd.abs,Cd=vd.log,Dd=vd.sqrt,Ed=vd.pow,Fd=vd.exp,Gd=vd.sin,Hd=vd.asin,Id=vd.cos,Jd=vd.tan,Kd=vd.atan,Ld=vd.atan2,Md=vd.LN2,Nd=vd.PI,Od=Nd/2,Pd=Nd/4,Qd=2*Nd,Rd=3*Nd,Sd=Nd/180,Td=180/Nd,Ud=1/0,Vd=Ed(-2,53),Wd=Wd||function(t){return Cd(t)/Md};function Xd(t,e){var n;return 0>(n=t%e)===0>e?n:n+e}function Yd(t,e,n){return e-=n=n||0,(t-=n)-zd(t/e)*e+n}function Zd(t,e,n){return t>n?n:t<e?e:t}function $d(t,e,n,r){return r||(r=0),e<n?t>=e-r&&t<=n+r:t>=n-r&&t<=e+r}function ae(t,e,n,r,i,o){return Dd(Ed((t-i)*(r-o)-(e-o)*(n-i),2)/(Ed(n-i,2)+Ed(r-o,2)))}t("H.math.normalize",Yd),t("H.math.clamp",Zd);var be={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function ce(t,e,n,r,i,o){var a=n.length,s=a,l=n[0],u=0,c=0,h=0;r=r/2||0;var p=o||2;o=p*(i?0:1)+1;for(var f=p-2;1!=u&&s>o;){s-=f;var d=n[--s];p=n[--s];var y=n[s?s-f-1:(a+(s-f-1))%a],g=n[s?s-f-2:(a+(s-f-2))%a];p>=t-r&&p<=t+r&&d>=e-r&&d<=e+r||g>=t-r&&g<=t+r&&y>=e-r&&y<=e+r?u=1:u||p!==t?!u&&$d(t,p,g,r)&&((p<t&&g>t||p>t&&g<t)&&(c+=(l=d+(t-p)/(g-p)*(y-d))>e,h+=l<e),u=$d(e,d,y,r)&&ae(t,e,p,d,g,y)<=r?2:0):(g===t&&(d<e&&y>e||d>e&&y<e)||(l<=t&&g>t||l>=t&&g<t)&&(d>=e?++c:++h),u=$d(e,d,y,r)&&ae(t,e,p,d,g,y)<=r?2:0),l=p}return!u&&i&&0!==h&&0!==c%2&&(u=3),u}function de(t,e){return ce(t.x,t.y,e,0,!0)!==be.NONE}function ee(t){for(var e=t.length,n=new Float64Array(2*e),r=e&&uc(t[0].x);e--;){var i=t[e],o=e<<1;n[o]=r?i.x:i[0],n[o+1]=r?i.y:i[1]}return n}function fe(){}function ge(t,e,n){this.type=t,this.data=e,this.c=ac(),this.resolve=A(this.resolve,this),this.reject=A(this.reject,this),this.priority=he,n!==B&&(this.priority=n),this.Zg().add(this)}t("H.math.CoverType",be),t("H.math.isPointInsidePolygon",de),t("H.math.flatten",ee),t("H.util.ICancelable",fe),fe.prototype.cancel=function(){},fe.prototype.cancel=fe.prototype.cancel;var he=1,ie={Eo:0,Ho:he,Co:2};function je(t){var e;for(e in this.a={},ie)this.a[ie[e]]=[];this.We=t,this.We.addEventListener("allocatable",A(this.b,this))}p=ge.prototype,p.then=function(t,e,n){return this.c.Ck.then(t,e,n)},p.resolve=function(t){this.Wd=3,this.c.resolve(t)},p.reject=function(t){this.Wd=5,this.c.reject(t)},p.Wd=0,p.cancel=function(){3>this.Wd&&(this.ke(),this.Zg().remove(this),this.Wd=4)},ge.prototype.cancel=ge.prototype.cancel,t("H.util.JobManager",je);var ke=Object.keys(ie).map((function(t){return ie[t]})).sort().reverse();function le(t,e,n){var r=[],i=arguments.length;return t&&r.push(wc(t)),1<i&&(i=2<i&&zc(n)?" out of ["+n[0]+"..."+n[1]+"]":"",r.push("("+e+i+")")),r=Error(r.join(" ")),Object.setPrototypeOf(r,le.prototype),r}je.prototype.add=function(t){C(t,ge,this.add,0),this.a[t.priority].push(t),this.b()},je.prototype.contains=function(t){return-1<this.a[t.priority].indexOf(t)},je.prototype.remove=function(t){var e=t.priority,n=this.a[e].indexOf(t);return-1<n?(this.a[e].splice(n,1),!0):(t.Ei&&this.We.tf(t.Ei),!1)},je.prototype.b=function(){ke.forEach((function(t){this.a[t]=this.a[t].filter((function(t){var e;if((e=this.We.Eg(t))===y)return!0;var n=A(this.We.tf,this.We,e,t);t.Ei=e,t.then(n,n),t.Wd=t.jj(e)?1:5}),this)}),this)},u(le,Error),t("H.lang.OutOfRangeError",le),le.prototype.name="OutOfRangeError";var me="closure_listenable_"+(1e6*Math.random()|0);function ne(t){return!(!t||!t[me])}var oe=0;function pe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Hf=i,this.key=++oe,this.Zd=this.lf=!1}function qe(t){t.Zd=!0,t.listener=null,t.proxy=null,t.src=null,t.Hf=null}function re(t){this.src=t,this.a={},this.b=0}function te(t,e){var n=e.type;if(!(n in t.a))return!1;var r,i=t.a[n],o=db(i,e);return(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(qe(e),0==t.a[n].length&&(delete t.a[n],t.b--)),r}function ue(t,e){var n=void 0!==e,r=n?e.toString():"";return Ua(t.a,(function(t){for(var e=0;e<t.length;++e)if(!n||t[e].type==r)return!0;return!1}))}function se(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Zd&&o.listener==e&&o.capture==!!n&&o.Hf==r)return i}return-1}re.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=se(t,e,r,i);return-1<a?(e=t[a],n||(e.lf=!1)):((e=new pe(e,this.src,o,!!r,i)).lf=n,t.push(e)),e},re.prototype.remove=function(t,e,n,r){if(!((t=t.toString())in this.a))return!1;var i=this.a[t];return-1<(e=se(i,e,n,r))&&(qe(i[e]),Array.prototype.splice.call(i,e,1),0==i.length&&(delete this.a[t],this.b--),!0)},re.prototype.ma=function(t){t=t&&t.toString();var e,n=0;for(e in this.a)if(!t||e==t){for(var r=this.a[e],i=0;i<r.length;i++)++n,qe(r[i]);delete this.a[e],this.b--}return n};var ve=!vb||9<=Number(Fb),we=vb&&!Eb("9");!yb||Eb("528"),xb&&Eb("1.9b")||vb&&Eb("8")||ub&&Eb("9.5")||yb&&Eb("528"),xb&&!Eb("8")||vb&&Eb("9");var xe=function(){if(!ya.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ya.addEventListener("test",Aa,e),ya.removeEventListener("test",Aa,e)}catch(n){}return t}();function ye(t,e){if(sd.call(this,t?t.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.b=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.currentTarget=e,e=t.relatedTarget){if(xb){t:{try{rb(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:ze[t.pointerType]||"",this.b=t,t.defaultPrevented&&this.preventDefault()}}u(ye,sd);var ze={2:"touch",3:"pen",4:"mouse"};ye.prototype.stopPropagation=function(){ye.l.stopPropagation.call(this),this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0},ye.prototype.preventDefault=function(){ye.l.preventDefault.call(this);var t=this.b;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,we)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Ae="closure_lm_"+(1e6*Math.random()|0),Be={},Ce=0;function De(t,e,n,r,i){if(r&&r.once)return Ee(t,e,n,r,i);if("array"==Ba(e)){for(var o=0;o<e.length;o++)De(t,e[o],n,r,i);return null}return n=Fe(n),ne(t)?t.R.add(String(e),n,!1,Ea(r)?!!r.capture:!!r,i):Ge(t,e,n,!1,r,i)}function Ge(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Ea(i)?!!i.capture:!!i,s=He(t);if(s||(t[Ae]=s=new re(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=Ie(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)xe||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Je(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return Ce++,n}function Ie(){var t=Ke,e=ve?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}function Ee(t,e,n,r,i){if("array"==Ba(e)){for(var o=0;o<e.length;o++)Ee(t,e[o],n,r,i);return null}return n=Fe(n),ne(t)?t.R.add(String(e),n,!0,Ea(r)?!!r.capture:!!r,i):Ge(t,e,n,!0,r,i)}function Le(t,e,n,r,i){if("array"==Ba(e)){for(var o=0;o<e.length;o++)Le(t,e[o],n,r,i);return null}return r=Ea(r)?!!r.capture:!!r,n=Fe(n),ne(t)?t.R.remove(String(e),n,r,i):!!t&&(!!((t=He(t))&&(e=t.a[e.toString()],t=-1,e&&(t=se(e,n,r,i)),n=-1<t?e[t]:null))&&Me(n))}function Me(t){if("number"===typeof t||!t||t.Zd)return!1;var e=t.src;if(ne(e))return te(e.R,t);var n=t.type,r=t.proxy;return e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Je(n),r):e.addListener&&e.removeListener&&e.removeListener(r),Ce--,(n=He(e))?(te(n,t),0==n.b&&(n.src=null,e[Ae]=null)):qe(t),!0}function Je(t){return t in Be?Be[t]:Be[t]="on"+t}function Ne(t,e,n,r){var i=!0;if((t=He(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.Zd&&(o=Oe(o,r),i=i&&!1!==o)}return i}function Oe(t,e){var n=t.listener,r=t.Hf||t.src;return t.lf&&Me(t),n.call(r,e)}function Ke(t,e){if(t.Zd)return!0;if(!ve){if(!e)t:{e=["window","event"];for(var n=ya,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new ye(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.currentTarget;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;!e.a&&0<=i;i--){e.currentTarget=r[i];var o=Ne(r[i],t,!0,e);n=n&&o}for(i=0;!e.a&&i<r.length;i++)e.currentTarget=r[i],o=Ne(r[i],t,!1,e),n=n&&o}return n}return Oe(t,new ye(e,this))}function He(t){return(t=t[Ae])instanceof re?t:null}var Pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fe(t){return Da(t)?t:(t[Pe]||(t[Pe]=function(e){return t.handleEvent(e)}),t[Pe])}function F(){nd.call(this),this.R=new re(this),this.on=this,this.Mg=null}function Qe(t){var e=(t=t||{}).callback;this.b=t.label,Da(e)&&(this.callback=e),this.a=!!t.disabled,Qe.l.constructor.call(this)}u(F,nd),F.prototype[me]=!0,p=F.prototype,p.Hb=function(){return this.Mg},p.ia=function(t){this.Mg=t},p.addEventListener=function(t,e,n,r){De(this,t,e,n,r)},p.removeEventListener=function(t,e,n,r){Le(this,t,e,n,r)},p.dispatchEvent=function(t){var e,n=this.Hb();if(n)for(e=[];n;n=n.Hb())e.push(n);n=this.on;var r=t.type||t;if("string"===typeof t)t=new sd(t,n);else if(t instanceof sd)t.target=t.target||n;else{var i=t;Ya(t=new sd(r,n),i)}if(i=!0,e)for(var o=e.length-1;!t.a&&0<=o;o--){var a=t.currentTarget=e[o];i=a.ed(r,!0,t)&&i}if(t.a||(i=(a=t.currentTarget=n).ed(r,!0,t)&&i,t.a||(i=a.ed(r,!1,t)&&i)),e)for(o=0;!t.a&&o<e.length;o++)i=(a=t.currentTarget=e[o]).ed(r,!1,t)&&i;return i},p.o=function(){F.l.o.call(this),this.R&&this.R.ma(void 0),this.Mg=null},p.ed=function(t,e,n){if(!(t=this.R.a[String(t)]))return!0;t=t.concat();for(var r=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.Zd&&o.capture==e){var a=o.listener,s=o.Hf||o.src;o.lf&&te(this.R,o),r=!1!==a.call(s,n)&&r}}return r&&0!=n.Kk},t("H.util.EventTarget",F),F.prototype.ia=F.prototype.ia,F.prototype.setParentEventTarget=F.prototype.ia,F.prototype.Hb=F.prototype.Hb,F.prototype.getParentEventTarget=F.prototype.Hb,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.D=F.prototype.D,F.prototype.dispose=F.prototype.D,F.prototype.ob=F.prototype.ob,F.prototype.addOnDisposeCallback=F.prototype.ob,F.prototype.pn=F.prototype.ed,F.prototype.ed=function(t,e,n){var r,i,o=!0,a=n[n.currentTarget===n.target?"AT_TARGET":e?"CAPTURING_PHASE":(r=!0,"BUBBLING_PHASE")];return(!r||"pointerenter"!==(i=n.type)&&"pointerleave"!==i)&&(n.eventPhase=a,o=F.prototype.pn.apply(this,arguments),r&&this.Hb&&null===this.Hb()&&delete n.eventPhase),o},F.prototype.Vk=function(t){for(var e,n=this;n&&(e=n.Hb())&&e!==t;)n=e;e||n.ia(t)},F.prototype.setRootParentEventTarget=F.prototype.Vk,u(Qe,F),t("H.util.ContextItem",Qe),Qe.prototype.Ce=function(){return this.b},Qe.prototype.getLabel=Qe.prototype.Ce,Qe.prototype.Dc=function(t){return this.b!==t&&(this.b=t,this.dispatchEvent("update")),this},Qe.prototype.setLabel=Qe.prototype.Dc,Qe.prototype.Zb=function(){return this.a},Qe.prototype.isDisabled=Qe.prototype.Zb,Qe.prototype.ta=function(t){return t!==this.a&&(this.a=t,this.dispatchEvent("update")),this},Qe.prototype.setDisabled=Qe.prototype.ta;var Re=new Qe;function Se(t){if(x.document){var e=document.createElement("canvas");return e.width=e.height=1,e.getContext("2d",{Oo:t})}return null}function Te(){return window.devicePixelRatio||1}Qe.SEPARATOR=Re,t("H.util.getPixelRatio",Te);var Ue=/^rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)$/;function Ve(t){var e=We[t],n=x.RegExp;return e||(x.Uint8ClampedArray||(x.Uint8ClampedArray=function(t){return t instanceof Number?Array(t):t.map((function(t){return Zd(yd(t),0,255)}))}),"none"===t?e=new Uint8ClampedArray([0,0,0,0]):(Xe.fillStyle="black",Xe.fillStyle=t,Ue.test(Xe.fillStyle)?e=new Uint8ClampedArray([n.$1,n.$2,n.$3,255*n.$4]):(Xe.clearRect(0,0,1,1),Xe.fillRect(0,0,1,1),e=Xe.getImageData(0,0,1,1).data)),We[t]=e),e}function Ye(t){return"none"!==t&&0<Ve(t)[3]}var We=nc(),$e=!!x.VBArray;function af(t,e){return t!==B?t:e}function bf(t){return/^<svg/.test(t)?"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t):t}function cf(t){this.ac=0<+t?vd.round(t):0}t("H.util.eval",(function(a){return eval(a)})),t("H.util.provide",(function(t){var e=ya.$jscomp;if(e&&"function"==typeof e.Wl&&e.Wl())throw Error("goog.provide cannot be used within a module.");za(t,void 0)})),cf.prototype.next=function(t){if(9007199254740992===this.ac)throw new le(t,this.ac,[0,9007199254740991]);return this.ac++};var df=new cf,ef=A(df.next,df);function ff(){return!0}function gf(){return!1}function jd(){}var hf=pc([]),jf=pc({});function kf(t){return"CANVAS"===t.tagName?[t]:t.getElementsByTagName("CANVAS")}function lf(t,e,n){var r;if(e=t.ownerDocument===e?t.cloneNode(!0):e.importNode(t,!0),n)for(t=kf(t),r=(n=kf(e)).length;r--;)n[r].getContext("2d").drawImage(t[r],0,0);return e}var Xe=Se(!0),mf=Se(!1);function nf(t){var e=t.complete,n=0<t.naturalWidth;if(e&&!n&&$e)try{mf.drawImage(t,0,0),n=!0}catch(r){}return e&&n}var of=x.BlobBuilder||x.WebKitBlobBuilder||x.MozBlobBuilder;function pf(t,e){if(e=e||"",of){var n=new of;n.append(t),t=n.getBlob(e)}else t=new Blob([t],{type:e});return t}var qf=x.navigator;function rf(){var t=rf.a;return t||(t=this,rf.a=t,Gc(rf.a),F.call(t),sf(this)),t}function sf(t){t.g=10,t.i=6,t.a=nc(),t.b=nc(),t.c=0}function tf(t,e,n,r){if(!uf[t])throw new D(tf,0,"Mime type is not supported");this.f=t,"crossOrigin"in(t=r?Wa(r):{})||(t.crossOrigin="anonymous"),this.a=t,vf.href=e.toString(),ge.call(this,vf.protocol+"//"+vf.hostname,e,n)}$c=/Edge\/\d+/.test(qf.appVersion),ad=/(A|a)ndroid/.test(qf.appVersion),u(rf,F),rf.prototype.o=function(){rf.l.o.call(this),sf(this)},rf.prototype.Eg=function(t){t=t.type;var e=this.a[t]||0;if(this.c<this.g&&e<this.i){var n=++this.f;return this.c++,this.a[t]=e+1,this.b[n+""]=t,n}return y},rf.prototype.tf=function(t){var e=this.b[t];if(!uc(e)||!this.a[e])throw new Yc(this.tf,"Unknown requestId");this.c--,this.a[e]--,this.a[e]||delete this.a[e],delete this.b[t],this.dispatchEvent("allocatable")},rf.prototype.f=-1,u(tf,ge),tf.prototype.jj=function(){return this.b=uf[this.f].call(this),!0},tf.prototype.ke=function(){this.b&&(this.b.abort(),delete this.b)};var uf={"application/json":function(){var t=this,e=wf(this.a),n=e.headers;return e.headers=n=n?Wa(n):{},n.Accept="application/json",new Sc(this.data,(function(e){200<=e.status&&300>e.status?t.resolve(e.json()):t.reject(e)}),e)},"text/plain":function(){var t=this;return new Sc(this.data,(function(e){200<=e.status&&300>e.status?t.resolve(e.text()):t.reject(e)}),wf(this.a))},image:function(){var t=x.document.createElement("img"),e=this,n=this.data;return t.onload=A(this.resolve,this,t),t.onerror=function(){e.reject(Pc.error())},t.crossOrigin=this.a.crossOrigin,t.src=n,{abort:function(){t.onerror=t.onload=null,$e&&nf(t)||t.removeAttribute("src")}}}};!function(){try{var t=new XMLHttpRequest;t.open("get","/",!0)}catch(e){t={}}"response"in t&&(uf.arraybuffer=function(){var t,e=new XMLHttpRequest,n=this,r=this.a,i=r.headers;if(e.open("GET",this.data),xf(e,r),e.responseType="arraybuffer",i)for(t in i)e.setRequestHeader(t,i[t]);return e.onerror=e.ontimeout=function(){n.reject(Pc.error())},e.onload=function(){n.resolve(new Pc(e.response))},e.send(),e})}();var yf=new je(new rf);tf.prototype.Zg=function(){return yf};var vf=x.document.createElement("a");function wf(t){var e=Wa(t);return delete e.crossOrigin,xf(e,t),e}function xf(t,e){t.withCredentials="use-credentials"===e.crossOrigin}function G(t,e){this.x=+t,this.y=+e}function zf(t){if(!t)throw Error("invalid argument");return t instanceof G?t:new G(t.x,t.y)}function Af(t){var e=Bf[t];if(!e)if(t in Cf)e=Bf[t]=t;else{e=Df.length;var n="",r=t.charAt(0).toUpperCase()+t.substr(1),i="",o=!1;Ef&&(o=(i=Ef+r)in Cf);for(;e--&&!o;)o=(i=(n=Df[e])+r)in Cf;if(o&&(Ef=n),!(e=o?i:null))throw Error("Could not find any variant of CSS property ["+t+"]");Bf[t]=e}return e}t("H.math.Point",G),G.prototype.set=G,G.prototype.set=G.prototype.set,G.prototype.clone=function(t){return t?(t.x=this.x,t.y=this.y):t=new G(this.x,this.y),t},G.prototype.clone=G.prototype.clone,G.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},G.prototype.add=G.prototype.add,G.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},G.prototype.sub=G.prototype.sub,G.prototype.scale=function(t,e){return this.x*=t,this.y*=void 0===e?t:e,this},G.prototype.scale=G.prototype.scale,G.prototype.round=function(){return this.x=yd(this.x),this.y=yd(this.y),this},G.prototype.round=G.prototype.round,G.prototype.floor=function(){return this.x=zd(this.x),this.y=zd(this.y),this},G.prototype.floor=G.prototype.floor,G.prototype.ceil=function(){return this.x=Ad(this.x),this.y=Ad(this.y),this},G.prototype.ceil=G.prototype.ceil,G.prototype.ga=function(t){return!(!t||this.x!==t.x||this.y!==t.y)},G.prototype.equals=G.prototype.ga,G.prototype.yj=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=t;if(n||r){var o=((this.x-t.x)*n+(this.y-t.y)*r)/(n*n+r*r);i=0>=o?t:1<=o?e:new G(t.x+o*n,t.y+o*r)}return i},G.prototype.getNearest=G.prototype.yj,G.prototype.Ta=function(t){return Dd(Ed(this.x-t.x,2)+Ed(this.y-t.y,2))},G.prototype.distance=G.prototype.Ta,G.fromIPoint=zf,t("H.dom.cssPrefixer.prefix",Af);var Df=["O","Ms","ms","Moz","Webkit"],Bf={},Ef="",Cf=document.createElement("span").style;function Ff(t,e,n,r){if(!t||!e||!n)throw new D(Ff,B,"Must specify name, version and revision parameter");this.name=t,this.version=e,this.revision=n,r&&Ya(this,r)}t("H.util.BuildInfo",Ff),Ff.prototype.toString=function(){var t,e=[];for(t in this)Ac(this[t])&&e.push(this[t]);return e.join(";")};var Gf={};function Hf(t,e,n,r){if(!t)throw new D(Hf,1,"Must specify a name parameter");return Gf[t]||(Gf[t]=new Ff(t,e,n,r))}function If(){If.l.constructor.call(this),this.a=Jf(this),this.f=nc(),this.c=A(this.c,this),this.a.addEventListener("message",this.c),this.b={}}Ff.get=Hf,u(If,F),If.prototype.o=function(){this.a.terminate()},If.prototype.g=function(t){var e=t.type,n=!!this.f[e],r=t.data,i=Kf++,o=r&&r.vo?r.vo:B,a=!0;return n?(this.b[i]=t,Lf(this,e,i,r&&r.message,o)):(t.reject(new D(this.g,0,"processor_not_found")),a=!1),a},If.prototype.c=function(t){t=t.data;var e=this.b[t.taskId],n=t.taskId,r=t.data,i=this;if(2===t.type)new tf("arraybuffer",r).then((function(t){return t.arrayBuffer()})).then((function(t){i.a.postMessage(["3",n,[t]],[t])}),(function(){i.a.postMessage(["3",n,[null,"ERROR"]])}));else{if(e){switch(t.type){case 1:e.resolve(r);break;case 0:e.reject(r)}delete this.b[n]}this.dispatchEvent(new sd(this.A.IDLE))}};var Kf=0,Qf,Tf;function Mf(t,e,n){var r,i=Kf++;return t.b[i]=r=ac(),Lf(t,e,i,n),r.Ck}function Lf(t,e,n,r,i){r===B||Ca(r)||(r=[r]);try{t.a.postMessage([e,n,r],i)}catch(o){(t=t.b[n]).reject(o.message)}}function Jf(a){var b=x.H.__bootstrap__;if(b=Da(b)?(""+b).replace(/^[^{]+{((.|[\r\n])+?)}\s*$/,"$1"):""+b,x.Worker&&x.URL)try{var c=new x.Worker(x.URL.createObjectURL(pf(b,"application/javascript")))}catch(d){}return c||(a=new Nf(a),function(){eval("var self = arguments[0];"+b)}(a),c=new Of(a)),c}function Of(t){F.call(this),this.a=t}function Nf(a){F.call(this),this.a=a,this.addEventListener=A(this.addEventListener,this),this.removeEventListener=A(this.removeEventListener,this),this.postMessage=A(this.postMessage,this),this.eval=A(eval,this)}function Pf(){var t=Qf;return t||(t=Qf=this,F.call(t),Rf(this)),t}function Rf(t){var e,n=t.b;if(n)for(e=n.length;e--;)n[e].D();t.b=[],Gc(t.b),t.c={},t.f=nc()}function Sf(t,e,n){ge.call(this,t,e,n)}function Uf(t,e,n,r,i,o){var a,s,l,u,c=t.length;if(c)for(a=[];c--;){var h=t[c],p=h.length,f=0;for(l=1;l<p;l++)if(u=Vf(h[l-1],h[l],n,e,r,i)){var d=u[0],y=u[1];f&&f.ga(d)?s.push(y):a.push(s=u),f=y,o&&(l=p,c=0)}}else a=t;return a}function Vf(t,e,n,r,i,o){var a=t.x;t=-t.y;var s=e.x;if(e=-e.y,n=-n,o=-o,a>s){if(s>i||a<r)return;var l=a,u=t;a=s,t=e,s=l,e=u,l=1}else if(a>i||s<r)return;if(t>e){if(e>n||t<o)return;var c=1;t=-t,e=-e,u=o,o=-n,n=-u}else if(t>n||e<o)return;if(a<r){if((t+=(r-a)*(e-t)/(s-a))>n)return;a=r}if(t<o){if((a+=(o-t)*(s-a)/(e-t))>i)return;t=o}return s>i&&(e=t+(i-a)*(e-t)/(s-a),s=i),e>n&&(s=a+(n-t)*(s-a)/(e-t),e=n),c&&(t=-t,e=-e),l?[new G(s,-e),new G(a,-t)]:[new G(a,-t),new G(s,-e)]}function Wf(t,e,n){var r,i;t=Xf(t,!0),e=Xf(e,!1);var o={},a=r=1;switch(~~(n||0)){case 1:a=r=0;break;case 2:r=0,a=1;break;case 3:r=1,a=0}n=r;var s=a;if(e&&t){for(e.oe=new Yf(e.x,e.y,null,Zf(e)),t.oe=new Yf(t.x,t.y,null,Zf(t)),a=e;a.next;a=a.next)if(!a.Va)for(r=t;r.next;r=r.next)if(!r.Va){var l=$f(a.next),u=$f(r.next);if(i=ag(a,l,r,u,o)){i=o.ql;var c=o.rl,h=o.yo,p=o.zo;bg(i=new Yf(h,p,null,null,null,null,!0,0,0,i),a,l),bg(l=new Yf(h,p,null,null,null,null,!0,0,0,c),r,u),i.Mh=l,l.Mh=i}}for(o=de(e,cg(t)),n&&(o=!o),a=e;a;a=a.next)a.Va&&(a.oh=o,o=!o);for(o=de(t,cg(e)),s&&(o=!o),r=t;r.next;r=r.next)r.Va&&(r.oh=o,o=!o);for(dg(e),dg(t);(t=eg(e))!=e;){for(n=null;!t.rg;t=t.Mh){for(o=t.oh;(n=new Yf(t.x,t.y,n)).artificial=t.Va||t.Sj,t.rg=1,t=o?t.next:t.bc;)if(t.Va){t.rg=1;break}if(!t)break}n.Nh=f||null;var f=n}return f}}function Yf(t,e,n,r,i,o,a,s,l,u){this.x=t,this.y=e,this.next=n||null,this.bc=r||null,this.Nh=i||null,this.Mh=o||null,this.Va=!!a,this.oh=!!s,this.rg=l||0,this.alpha=u||0,r&&(r.next=this),n&&(n.bc=this),this.Sj=!1,this.oe=null}function $f(t){for(;t&&t.Va;)t=t.next;return t}function Zf(t){if(t)for(;t.next;)t=t.next;return t}function eg(t){var e=t;if(e)do{e=e.next}while(e!=t&&(!e.Va||e.Va&&e.rg));return e}function dg(t){var e=Zf(t);e.bc.next=t,t.bc=e.bc}function ag(t,e,n,r,i,o){var a,s=e.x-t.x,l=e.y-t.y,u=r.x-n.x,c=r.y-n.y,h=s*c-l*u;return h?(u=((n.x-t.x)*c-(n.y-t.y)*u)/h,h=(l*(n.x-t.x)-s*(n.y-t.y))/h,0>u||1<u||0>h||1<h?0:(0===u?a=t:1===u?a=e:0===h?a=n:1===h&&(a=r),a&&!o?(a.x+=2480549651603763e-20,a.y+=7321997314118067e-20,a.oe&&(a.oe.x=a.x,a.oe.y=a.y),ag(t,e,n,r,i)):(i.yo=t.x+u*s,i.zo=t.y+u*l,i.ql=u,i.rl=h,1))):0}function cg(t){for(var e=[];t;)e.push(t.x,t.y),t=t.next;return e}function bg(t,e,n){for(e=e.next;e!==n&&e.alpha<=t.alpha;)e=e.next;t.next=e,t.bc=e.bc,t.next.bc=t,t.bc.next=t}function Xf(t,e){for(var n,r=null,i=0,o=t.length;i<o;i++)(n=new Yf(t[i].x,t[i].y,r)).Sj=e,(n.next=r)&&(r.bc=n),r=n;return r}function fg(t,e,n){var r=Zd(+t,-90,90);if(e&&E(r))throw new D(e,n,t);return r}function gg(t,e,n){var r=+t;if((-180>r||180<r)&&(r=Xd(r+180,360)-180),e&&E(r))throw new D(e,n,t);return r}function ig(t,e,n){var r;if(t!==B&&E(r=+t)&&e)throw new D(e,n,t);return r}function jg(t,e){return 0>t!==0>e&&180<Bd(e-t)}function kg(){vc(this,kg)}function lg(t,e,n){this.lat=fg(t,lg,0),this.lng=gg(e,lg,1),n!==B&&(this.alt=ig(n,lg,2))}function mg(t,e,n){var r=Ea(t)&&!(E(t.lat=fg(t.lat))||E(t.lng=gg(t.lng))||t.alt!==B&&E(t.alt=ig(t.alt)));if(!r&&e)throw new D(e,n,t);return r}function ng(t){if(!t)throw new D(ng,0,t);return new lg(t.lat,t.lng,t.alt)}function K(t,e,n,r){og(this,fg(t,K,0),gg(e,K,1),fg(n,K,2),gg(r,K,3))}function og(t,e,n,r,i){return t.a=n,t.b=i,e<r&&(n=e,e=r,r=n),t.c=e,t.f=r,t.j=t.g=t.i=null,t}function qg(t,e){return(t=e-t)+(0>t?360:0)}function pg(t,e){return(t+=e/2)-(180<t?360:0)}function rg(t,e,n,r,i,o,a,s,l){n=wd(n,a),t=xd(t,i);var u=pg(e,i=qg(e,r)),c=pg(o,a=qg(o,s))-u;if(180>(c+=0>c-1e-6?360:0)-1e-6){u=e;var h=s}else c=360-c,u=o,h=r;return 360<=(c=c+i/2+a/2)+5e-7?(u=-180,h=180):c-5e-7<i?(u=e,h=r):c-5e-7<a&&(u=o,h=s),l?og(l,t,u,n,h):new K(t,u,n,h)}function sg(t,e,n){return n||(mg(t,sg,0),mg(e,sg,1)),new K(t.lat,t.lng,e.lat,e.lng)}function tg(t,e){var n=1,r=t.length,i=null;if(!Ca(t))throw new D(tg,0,t);if(0<r){var o=t[0];for(i=sg(o,o,e);n<r;n++)o=t[n],i.Sc(o.lat,o.lng,e,i)}return i}function ug(t,e){var n,r=3,i=t.length;if(!(e||t&&null!=t.length))throw new D(ug,0,t);if(0<i)for(n=new K(t[0],t[1],t[0],t[1]);r<i;r+=3)n.Sc(t[r],t[r+1],e,n);return n}function vg(t,e){var n,r=1,i=t.length;if(e&&(!t||null==t.length))throw new D(vg,0,t);if(0<i)for(n=new K(t[0].c,t[0].a,t[0].f,t[0].b);r<i;r++)n.$b(t[r],e,n);return n}function wg(t,e,n,r,i,o){vc(this,wg),this.c=t||10,this.b=null,this.f=r||0,this.g=i||0,this.i=e||1,this.j=n||1,this.s=!!o,this.flush()}function xg(t){var e=t.b;if(t.s&&!e){var n=t.head;(n.entries||n[0]||n[1]||n[2]||n[3])&&(e=yg([e=[n],e,e,e],[n[6],n[7],n[4],n[5]]),t.b=e)}return e}function yg(t,e){var n,r,i,o,a=0;for(n=3;0<=n;n--){var s=n+4,l=0<n%3,u=[],c=e[n],h=t[n];for(r=h.length;r--;){var p=h[r];if(i=p.entries)for(o=i.length;o--;){var f=i[o].a(n);(l?f>c:f<c)&&(c=f)}for(o=4;o--;)(i=p[o])&&(l?i[s]>c:i[s]<c)&&u.push(i)}a+=u.length,e[n]=c,t[n]=u}return a&&(e=yg(t,e)),e}function zg(t,e,n){var r,i;if(t.s&&(r=t.b))for(i=3;0<=i;i--){var o=e.a(i);if(i%3?o>=r[i]:o<=r[i]){if(!n){t.b=null;break}r[i]=o}}}function Bg(t,e){var n,r=t.head;if(e){var i=e;if(i!==r)for(r=i;i=i.parent;)(i.entries||1<i.a)&&(r=i)}else for(;!r.entries&&2>(n=r.a)&&n;)r=i;t.head=r}function Cg(t,e,n,r,i,o,a,s,l){var u,c=e.entries,h=e[7],p=e[4],f=e[5],d=e[6],y=e[8],g=e[9];if(c){var v=c.length;if(i>p||r>h||a<d||o<f)for(;v--;){p=(h=c[v]).a(3),f=h.a(0),d=h.a(1),h.a(2)>=i&&d>=r&&(f<a||s&&f==a)&&(p<o||l&&p==o)&&n.push(h)}else for(;v--;)n.push(c[v])}(o>y||l&&o==y)&&(i<g&&(u=e[1])&&Cg(t,u,n,r,i,o,a,s,l),(a>g||s&&a==g)&&(u=e[3])&&Cg(t,u,n,r,i,o,a,s,l)),r<y&&(i<g&&(u=e[0])&&Cg(t,u,n,r,i,o,a,s,l),(a>g||s&&a==g)&&(u=e[2])&&Cg(t,u,n,r,i,o,a,s,l))}If.prototype.A={IDLE:"idle",Gi:"error"},If.prototype.i=function(t,e){var n=this.j||(this.j=new sd(this.A.Gi));n.data=e,delete this.f[t],this.dispatchEvent(n)},u(Of,F),Of.prototype.postMessage=function(t){x.setTimeout(A(this.b,this,t),0)},Of.prototype.b=function(t){var e=new sd("message");e.data=t,this.a.dispatchEvent(e)},Of.prototype.terminate=function(){this.a.D(),this.D()},u(Nf,F),Nf.prototype.postMessage=function(t){var e=new sd("message");e.data=t,x.setTimeout(A(this.a.c,this.a,e),0)},u(Pf,F),Pf.prototype.o=function(){Pf.l.o.call(this),Rf(this)},Pf.prototype.Eg=function(t){var e;if(t=t.type,!(e=this.f[t]))throw new Yc(this.Eg,'Unknown type "'+t+'"');var n=this.b,r=n[0];return r||(r=n[0]=new If,this.ob(Ka(rd,r)),Va(this.c)||Mf(r,"0",n=x.Object.keys(this.c))),(n=r).f[t]||(n.f[t]=e,Mf(n,"1",[t,Da(e)?e+"":e]).then(jd,A(n.i,n,t))),r},Pf.prototype.tf=function(){},Pf.prototype.a=function(t,e){var n=this.f,r=n[t];if(r){if(e!==r)throw new Yc(this.a,'Type "'+t+'" is already registered')}else n[t]=e},u(Sf,ge),Sf.prototype.Zg=function(){return Tf||(Tf=new je(new Pf)),Tf},Sf.prototype.ke=function(){},Sf.prototype.jj=function(t){return t.g(this)},t("H.math.clipping.clipStrips",Uf),t("H.math.clipping.clipPolygon",Wf),t("H.geo.isDBC",jg),t("H.geo.AbstractGeometry",kg),kg.prototype.getBoundingBox=kg.prototype.J,kg.prototype.equals=kg.prototype.ga,kg.prototype.nb="",kg.prototype.Cb="",kg.prototype.toString=function(){return this.Yc([this.nb.toUpperCase()," "]).join("")},kg.prototype.toString=kg.prototype.toString,kg.prototype.Ec=function(){return{type:this.Cb,coordinates:this.Xc()}},kg.prototype.toGeoJSON=kg.prototype.Ec,kg.prototype.W=function(){return{type:this.nb,coordinates:this.kc(),boundingBox:this.J().W()}},kg.prototype.forWorkerMessage=kg.prototype.W,u(lg,kg),t("H.geo.Point",lg),lg.prototype.ga=function(t){return this===t||!!t&&this.lat===t.lat&&this.lng===t.lng&&(this.alt||0)===(t.alt||0)},lg.prototype.equals=lg.prototype.ga,lg.prototype.Ta=function(t){if(this===t||this.lat===t.lat&&this.lng===t.lng)t=0;else{var e=this.lat*Sd,n=t.lat*Sd;t=12742001.58*Hd(wd(1,Dd(Ed(Gd((e-n)/2),2)+Id(e)*Id(n)*Ed(Gd((this.lng*Sd-t.lng*Sd)/2),2))))}return t},lg.prototype.distance=lg.prototype.Ta,lg.prototype.sg=function(t,e,n){var r;if(n){if(r=e/6371000.79){e=t*Sd,t=Sd*this.lat;var i=Gd(t);n=Gd(r);var o=Id(r);r=Sd*this.lng;var a=Id(t);t=Hd(a*Id(e)*n+i*o),e=(r+(e=Ld(Gd(e)*a*n,o-i*Gd(t)))+Nd)%(2*Nd)-Nd,i=new lg(t*Td,((e*=Td)+540)%360-180)}return i||this}return 0===((t=(t%360+360)%360)+90)%180?(t=this.lng+e/(6371000.79*Qd*Id(this.lat*Sd))*(270===t?-360:360),new lg(this.lat,(t+540)%360-180)):((e/=6371000.79)&&(t*=Sd,i=this.lat*Sd,n=this.lng*Sd,o=(r=i+e*Id(t))-i,a=Cd(Jd(r/2+Pd)/Jd(i/2+Pd)),a=E(o/a)?Id(i):o/a,t=e*Gd(t)/a,Bd(r)>Od&&(r=0<r?Nd-r:-(Nd+r)),r=new lg(r*Td,((n+t+Rd+(Bd(i+o)>Od?Nd:0))%Qd-Nd)*Td)),r||this)},lg.prototype.walk=lg.prototype.sg,lg.prototype.J=function(){return new K(this.lat,this.lng,this.lat,this.lng)},lg.prototype.getBoundingBox=lg.prototype.J,lg.validate=mg,lg.fromIPoint=ng,p=lg.prototype,p.nb="Point",p.Yc=function(t){return t.push("(",this.lng," ",this.lat,")"),t},p.Cb="Point",p.Xc=function(){return[this.lng,this.lat,this.alt||0]},p.kc=function(){return[this.lat,this.lng,this.alt||0]},u(K,kg),t("H.geo.Rect",K),K.prototype.nb="Polygon",K.prototype.Yc=function(t){var e=this.c,n=this.a,r=this.f,i=this.b;return t.push("(","(",n," ",e,",",i," ",e,",",i," ",r,",",n," ",r,",",n," ",e,")",")"),t},K.prototype.ga=function(t){var e=this===t;return!e&&C(t,K)&&(e=this.c===t.c&&this.a===t.a&&this.f===t.f&&this.b===t.b),e},K.prototype.equals=K.prototype.ga,K.prototype.clone=function(){return new K(this.c,this.a,this.f,this.b)},K.prototype.clone=K.prototype.clone,K.prototype.Ib=function(){return this.j||(this.j=new lg(this.c,this.a)),this.j},K.prototype.getTopLeft=K.prototype.Ib,K.prototype.Eb=function(){return this.g||(this.g=new lg(this.f,this.b)),this.g},K.prototype.getBottomRight=K.prototype.Eb,K.prototype.Vm=function(){return this.c},K.prototype.getTop=K.prototype.Vm,K.prototype.Ql=function(){return this.f},K.prototype.getBottom=K.prototype.Ql,K.prototype.sm=function(){return this.a},K.prototype.getLeft=K.prototype.sm,K.prototype.Lm=function(){return this.b},K.prototype.getRight=K.prototype.Lm,K.prototype.Za=function(){return this.i||(this.i=new lg(this.f+(this.c-this.f)/2,pg(this.a,this.ub()))),this.i},K.prototype.getCenter=K.prototype.Za,K.prototype.ub=function(){return qg(this.a,this.b)},K.prototype.getWidth=K.prototype.ub,K.prototype.Jd=function(){return this.c-this.f},K.prototype.getHeight=K.prototype.Jd,K.prototype.vb=function(){return this.a>this.b},K.prototype.isCDB=K.prototype.vb,K.prototype.Kf=function(){return!this.ub()&&!this.Jd()},K.prototype.isEmpty=K.prototype.Kf,K.prototype.J=function(){return new K(this.c,this.a,this.f,this.b)},K.prototype.getBoundingBox=K.prototype.J,K.prototype.pf=function(t,e,n){var r=this.Za();return n||(t=fg(t,this.pf,0),e=gg(e,this.pf,1)),(t=(e=this.Sc(t,e,n)).Za()).lat===r.lat&&t.lng===r.lng&&this.Jd()===e.Jd()&&this.ub()===e.ub()},K.prototype.containsLatLng=K.prototype.pf,K.prototype.bd=function(t,e){return e||mg(t,this.bd,0),this.pf(t.lat,t.lng,e)},K.prototype.containsPoint=K.prototype.bd,K.prototype.Kg=function(t,e){var n=this.Za();if(!e&&!C(t,K))throw new D(this.Kg,0,t);return(t=(e=this.$b(t,e)).Za()).lat===n.lat&&t.lng===n.lng&&this.Jd()===e.Jd()&&this.ub()===e.ub()},K.prototype.containsRect=K.prototype.Kg,K.prototype.Sc=function(t,e,n,r){if(!n){if(E(t=fg(t)))throw new D(this.Sc,0,t);if(E(e=gg(e)))throw new D(this.Sc,1,e)}return rg(this.c,this.a,this.f,this.b,t,e,t,e,r)},K.prototype.mergeLatLng=K.prototype.Sc,K.prototype.lk=function(t,e,n){return e||mg(t,this.lk,0),this.Sc(t.lat,t.lng,e,n)},K.prototype.mergePoint=K.prototype.lk,K.prototype.$b=function(t,e,n){if(!e&&!C(t,K))throw new D(this.$b,0,t);return rg(this.c,this.a,this.f,this.b,t.c,t.a,t.f,t.b,n)},K.prototype.mergeRect=K.prototype.$b,K.prototype.vc=function(t,e,n,r,i,o){return i||(t=fg(t,this.vc,0),e=gg(e,this.vc,1),n=fg(n,this.vc,2),r=gg(r,this.vc,3)),rg(this.c,this.a,this.f,this.b,t,e,n,r,o)},K.prototype.mergeTopLeftBottomRight=K.prototype.vc,K.prototype.jd=function(t,e){var n=this.a<=this.b,r=t.a<=t.b,i=this.a<t.b,o=t.a<this.b;if(!e&&!C(t,K))throw new D(this.jd,0,t);return this.f<=t.c&&t.f<=this.c&&(!n&&(!r||i||o)||!r&&(i||o)||i&&o)},K.prototype.intersects=K.prototype.jd,K.merge=rg,K.fromPoints=sg,K.coverPoints=tg,K.coverLatLngAlts=ug,K.coverRects=vg,K.prototype.Jk=function(t,e){var n=this.a,r=this.c,i=this.b,o=this.f,a=this.Za().lng;mg(t,this.Jk,0);var s=t.lat-o-(r-o)/2,l=t.lng-a;return t=-180>(t=n+(0>(l=180<l||-180>l?-(a+t.lng):l)?2*l:0))?360+t:t,i=180<(i+=0<l?2*l:0)?i-360:i,90<=(r=0<s?r+2*s:r)&&(r=90),-90>=(o=0>s?o+2*s:o)&&(o=-90),e?og(e,r,t,o,i):new K(r,t,o,i)},K.prototype.resizeToCenter=K.prototype.Jk,K.prototype.Cb="Polygon",K.prototype.Xc=function(){return[[this.a,this.c,0],[this.b,this.c,0],[this.b,this.f,0],[this.a,this.f,0],[this.a,this.c,0]]},K.prototype.W=function(){return this.kc()},K.prototype.kc=function(){return[this.c,this.a,this.f,this.b]},wg.prototype.remove=function(t){var e,n,r,i=!1;return t&&(e=t.node)&&e.b===this&&(n=e.entries)&&0<=(r=n.indexOf(t))&&(n.splice(r,1),this.m(e),zg(this,t,!1),i=!0),i},wg.prototype.flush=function(){var t=new Ag(B,NaN,this.f-this.i,this.g-this.j,this.f+this.i,this.g+this.j);t.b=this,this.head=this.a=t,this.b=null},wg.prototype.Va=function(t,e,n,r,i,o){var a=[],s=this.head,l=this.a;return t<=s[5]&&e<=s[6]&&(i?n>=s[7]:n>s[7])&&(o?r>=s[4]:r>s[4])&&Cg(this,s,a,t,e,n,r,o||r>=l[6],i||n>=l[5]),a},wg.prototype.Fc=ba(1);var Dg=0;function Ag(t,e,n,r,i,o){this.c=e,t&&(this.parent=t,this.b=t.b,1&e?(n=t[8],i=t[5]):(n=t[7],i=t[8]),2&e?(r=t[9],o=t[6]):(r=t[4],o=t[9])),this[7]=n,this[5]=i,this[8]=(n+i)/2,this[4]=r,this[6]=o,this[9]=(r+o)/2}function Eg(t,e){return t[e]||(++t.a,t[e]=new Ag(t,e))}function Fg(t,e){(t.entries||(t.entries=[])).push(e),e.node=t}function Gg(t,e,n,r,i){var o=t[5],a=t[6];return t[7]<=e&&t[4]<=n&&(o>r||o===r&&o===t.b.a[5])&&(a>i||a===i&&a===t.b.a[6])}function Hg(t,e,n,r,i,o){Hg.l.constructor.apply(this,arguments)}function Ig(t,e,n,r,i){if(Gg(t.a,e,n,r,i))return Jg(t,t.a,e,n,r,i,t.c);throw Error("Coordinates out of bounds")}function Jg(t,e,n,r,i,o,a){var s=e[8],l=e[9],u=0,c=0;return a&&(i<s||(u=+(n>=s)))&&(o<l||(c=+(r>=l)))?n=Jg(t,Eg(e,u|c<<1),n,r,i,o,a-1):(Fg(e,n=new Kg(n,r,i,o)),zg(t,n,!0),Bg(t,e)),n}function Kg(t,e,n,r){this.id=Dg++,this[0]=e,this[1]=n,this[2]=r,this[3]=t}function Lg(t){this.g=new Hg(+t||10,180,90,0,0,!0),this.f=[],this.i=!1,this.a=this.b=this.c=null}function Mg(t,e,n,r,i,o){return o?(o=new Kg(i,-e,n+360,-r),t.f.push(o),t.i=!0,t.a&&t.a.vc(e,n,r,i,!0,t.a)):(o=Ig(t.g,n,-e,i,-r),t.b&&t.b.vc(e,n,r,i,!0,t.b)),++t.xh,t.c=null,o}function Ng(t,e,n,r,i,o,a){var s,l=(t=t.f).length,u=[];if(l){var c=n+360;for(s=i+360;l--;){var h=t[l];(Og(h,e,n,r,i,o,a)||Og(h,e,c,r,s,o,a))&&u.push(h)}}return u}function Og(t,e,n,r,i,o,a){var s=t[3],l=t[0],u=t[1];return t=t[2],(o?l<=r:l<r)&&(a?s<=i:s<i)&&t>=e&&u>=n}function Pg(t,e){var n,r,i;if(n=e.length){var o=t.length;for(r={};o--;)r[t[o].id]=1;for(;n--;)(i=e[n]).id in r||t.push(i)}}Ag.prototype.a=0,Ag.prototype.removeChild=function(t){var e=t.c;this[e]===t&&(delete this[e],delete t.parent,--this.a)},Ag.prototype.Fc=ba(0),u(Hg,wg),Hg.prototype.m=function(t){for(var e,n,r=this.head;t&&!((e=t.entries)&&e.length||(e&&delete t.entries,t.a||!(n=t.parent)));)n.removeChild(t),r===t&&(r=n),t=n;this.head!==r&&(this.head=r,Bg(this))},Hg.prototype.sc=function(t,e){return Ig(this,t,e,t,e)},Kg.prototype.a=function(t){return this[t]},t("H.geo.QuadTree",Lg),p=Lg.prototype,p.xh=0,p.Mc=function(){return this.xh},p.vb=function(){return this.i},p.J=function(){var t,e;if(!this.c){var n,r,i,o=[];if(!this.b&&(t=xg(this.g))&&(this.b=new K(-t[0],t[3],-t[2],t[1])),(e=this.b)&&o.push(e),!this.a&&(i=(r=this.f).length)){t=90;var a=360,s=-90;for(n=0;i--;){var l=r[i];t=wd(t,l[0]),a=wd(a,l[3]),s=xd(s,l[2]),n=xd(n,l[1])}this.a=new K(-t,a,-s,n-360)}(e=this.a)&&o.push(e),(e=o[0])&&(o[1]&&(e=e.$b(o[1],!0)),this.c=e)}return this.c},p.sc=function(t){var e=t.lng;return Mg(this,t=t.lat,e,t,e,!1)},p.Pj=function(t){var e=t.Ib(),n=t.Eb();return(t=t.vb())?Mg(this,e.lat,n.lng,n.lat,e.lng,t):Mg(this,e.lat,e.lng,n.lat,n.lng,t)},Lg.prototype.insertBoundingBox=Lg.prototype.Pj,Lg.prototype.remove=function(t){var e;if(t.node){var n=this.g.remove(t);this.b=null}else(n=0<=(t=(e=this.f).indexOf(t)))&&(e.splice(t,1),this.i=0<e.length,this.a=null);return n&&(--this.xh,this.c=null),n},Lg.prototype.remove=Lg.prototype.remove,Lg.prototype.Jf=function(t,e,n){var r=this.g,i=t.Ib(),o=t.Eb(),a=-i.lat;i=i.lng;var s=-o.lat;return o=o.lng,!e&&a===s||!n&&i===o?t=[]:t.vb()?(Pg(t=r.Va(-180,a,o,s,n,e),r.Va(i,a,180,s,!1,e)),Pg(t,Ng(this,a,o,s,i+360,e,n))):Pg(t=r.Va(i,a,o,s,n,e),Ng(this,a,i,s,o,e,n)),t},Lg.prototype.intersectBoundingBox=Lg.prototype.Jf;var Qg=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Rg="undefined"!==typeof BigInt?BigInt:Number;function Sg(t){var e=Rg(0),n=Rg(0),r=[];if(t.split("").forEach((function(t){t=Rg(Qg[t.charCodeAt(0)-45]),e|=(t&Rg(31))<<n,(t&Rg(32))===Rg(0)?(r.push(e),e=Rg(0),n=Rg(0)):n+=Rg(5)})),0<n)throw Error("Invalid encoding");return r}function Tg(t){return t&Rg(1)&&(t=~t),+(t>>=Rg(1)).toString()}function Ug(t){var e=void 0===t.precision?5:t.precision,n=void 0===t.df?0:t.df,r=void 0===t.ef?0:t.ef;t=t.Wh;var i=Math.pow(10,e),o=Math.pow(10,r);e=Vg(e,n,r);var a=[],s=Rg(0),l=Rg(0),u=Rg(0);return t.forEach((function(t){var e=Rg(Math.round(t[0]*i));a.push(Wg(e-s)),s=e,e=Rg(Math.round(t[1]*i)),a.push(Wg(e-l)),l=e,n&&(t=Rg(Math.round(t[2]*o)),a.push(Wg(t-u)),u=t)})),(e instanceof Array?e:ha(fa(e))).concat(a instanceof Array?a:ha(fa(a))).join("")}function Vg(t,e,n){if(0>t||15<t)throw Error("precision out of range. Should be between 0 and 15");if(0>n||15<n)throw Error("thirdDimPrecision out of range. Should be between 0 and 15");if(0>e||7<e||4===e||5===e)throw Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");return t|=n<<7|e<<4,Xg(1)+Xg(t)}function Xg(t){var e="";for(t=Rg(t);31<t;){e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[t&Rg(31)|Rg(32)],t>>=Rg(5)}return e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[t]}function Wg(t){var e=0>(t=Rg(t));return t<<=Rg(1),e&&(t=~t),Xg(t)}function Yg(t){return Ug({Wh:t.polyline,precision:t.precision,df:t.thirdDim,ef:t.thirdDimPrecision})}function Zg(t){if(1!==+(t=Sg(t))[0].toString())throw Error("Invalid format version");var e=+t[1].toString();e={precision:15&e,df:e>>4&7,ef:e>>7&15};for(var n=Math.pow(10,e.precision),r=Math.pow(10,e.ef),i=e.df,o=0,a=0,s=0,l=[],u=2;u<t.length;){var c=Tg(t[u])/n;o+=c,a+=Tg(t[u+1])/n,i?(s+=c=Tg(t[u+2])/r,l.push([o,a,s]),u+=3):(l.push([o,a]),u+=2)}if(u!==t.length)throw Error("Invalid encoding. Premature ending reached");return{polyline:(t=Object.assign({},e,{Wh:l})).Wh,precision:t.precision,thirdDim:t.df,thirdDimPrecision:t.ef}}function L(t){L.l.constructor.call(this),t&&$g(t,L,0),this.X=t||[],this.a=ah(this,0,this.X.length)}function ah(t,e,n){t=t.X;var r=0;for(e=xd(e,0),n=wd(n,t.length),n-=2,e+=1;e<n;)r+=jg(t[e],t[e+=3]);return r}function bh(t,e,n,r,i){var o=t.X.length;e=fg(e,i),n=gg(n,i),t.X.push(fg(e,i),gg(n,i),r===B?0:ig(r,i)),o&&(t.a+=jg(t.X[o-2],n)),delete t.b,delete t.c}function $g(t,e,n){for(var r,i=t.length,o=!(i%3);o&&i;)o=!(E(t[--i]=ig((r=t[i])===B?0:r))||E(t[--i]=gg(t[i]))||E(t[--i]=fg(t[i])));if(!o&&e)throw new D(e,n,t)}function ch(t){var e=new L,n=0,r=t.length;if(r%2)throw new D(ch,0,t);for(;n<r;)bh(e,t[n++],t[n++],0,ch);return e}function dh(t,e){return t.b-e.b}function eh(t,e){var n,r=t.X,i=-2,o=[],a=t.c;if(!a){a=t.c=new Lg;var s=0,l=t.X,u=l.length;for(n=0;n<u;n+=3){var c=l[n],h=l[n+1];if(n){if(f<h)var p=f,f=h;else p=h;if(y<c)var d=c;else{d=y;var y=c}(p=Mg(a,d,p,y,f,180<f-p)).b=s++}y=c,f=h}}for(l=(a=a.Jf(e).sort(dh)).length,e=0;e<l;e++){if(u=3*(s=(s=a[e]).b),s>i+1){var g=[r[u],r[u+1]];o.push(g)}i=s,g.push(r[u+3],r[u+4])}if(t.a){for(r=[],i=o.length,e=0;e<i;e++)if(a=(g=o[e]).length){for(l=[],t=0;t<a;t+=2)s=g[t],u=g[t+1],l.push(s,u),n=g[t-1],t&&jg(u,n)&&(r.push(l),n+=0>n?360:-360,(l=[]).push(g[t-2],n,s,u));r.push(l)}o=r}return o}function fh(t){var e=Zg(t);t=e.polyline;var n=e.thirdDim;if(e=2===n||3===n,n=0===n,!t)throw new D(fh,0,"data");if(e||n){n=t.length;for(var r=Array(3*n),i=0,o=0;i<n;i++){var a=t[i];r[o++]=a[0],r[o++]=a[1],r[o++]=e?a[2]:0}}if(!r)throw new D(fh,0,"only ABSENT, ALTITUDE or ELEVATION are supported as type of the 3rd dimension");return new L(r)}function gh(t){vc(this,gh),gh.l.constructor.call(this),this.ja=hh(this,t,this.constructor,0)}function hh(t,e,n,r){var i,o=[];if(!zc(e))throw new D(n,r);for(i=0;i<e.length;i++){if(!t.b(e[i]))throw new D(n,r);o.push(t.c(e[i]))}return o}function ih(t){ih.l.constructor.call(this,t)}function jh(){}t("H.util.flexiblePolyline.encode",Yg),t("H.util.flexiblePolyline.decode",Zg),u(L,kg),t("H.geo.LineString",L),L.prototype.$h=function(t,e,n){bh(this,t,e,n,this.$h)},L.prototype.pushLatLngAlt=L.prototype.$h,L.prototype.bf=function(t,e,n){n&&$g(n,this.bf,2),void 0===e&&(e=this.X.length),e&&(this.a-=ah(this,t-3,t+e+3));var r=n?this.X.splice.apply(this.X,[t,e].concat(n)):this.X.splice(t,e);return n&&(this.a+=ah(this,t-3,t+n.length+3)),e&&!n&&(this.a+=ah(this,t-3,t-3)),delete this.b,delete this.c,r},L.prototype.spliceLatLngAlts=L.prototype.bf,L.prototype.Qj=function(t,e,n,r){this.bf(t,0,[e,n,r])},L.prototype.insertLatLngAlt=L.prototype.Qj,L.prototype.Fk=function(t){this.bf(t,3)},L.prototype.removeLatLngAlt=L.prototype.Fk,L.prototype.nd=function(t){bh(this,t.lat,t.lng,t.alt,this.nd)},L.prototype.pushPoint=L.prototype.nd,L.prototype.sc=function(t,e){this.Qj(3*t,e.lat,e.lng,e.alt)},L.prototype.insertPoint=L.prototype.sc,L.prototype.Ue=function(t){this.Fk(3*t)},L.prototype.removePoint=L.prototype.Ue,L.prototype.te=function(t,e){var n=this.X,r=3*t;t=n[r];var i=n[r+1];return n=n[r+2],e&&(e.lat=t,e.lng=i,e.alt=n),e||new lg(t,i,n)},L.prototype.extractPoint=L.prototype.te,L.prototype.Fl=function(t,e,n){var r=this.X;e=e||0,n=af(n,r.length/3);for(var i=3*e;e<n;)t(r[i++],r[i++],r[i++],e++)},L.prototype.eachLatLngAlt=L.prototype.Fl,L.isDBC=jg,L.prototype.Yg=function(t){var e=this.a;return t&&(e+=jg((t=this.X)[t.length-2],t[1])),e},L.prototype.getDBCs=L.prototype.Yg,L.prototype.Ee=function(){return this.X.length/3},L.prototype.getPointCount=L.prototype.Ee,L.prototype.qm=function(){return this.X},L.prototype.getLatLngAltArray=L.prototype.qm,L.prototype.b=y,L.prototype.J=function(){var t;if(!(t=this.b)){var e,n,r=(t=this.X).length,i=3,o=y;if(3<=r){var a=e=t[0],s=n=t[1];for(o=new K(a,s,e,n);i<r;i+=3){if(a=t[i-3],s=t[i-2],e=t[i],s>(n=t[i+1])&&180<n-s||s<n&&-180>s-n||n<s&&180>Bd(n-s)){var l=s;s=n,n=l}a<e&&(l=a,a=e,e=l),rg(o.c,o.a,o.f,o.b,a,s,e,n,o)}}t=this.b=o}return t},L.prototype.getBoundingBox=L.prototype.J,L.prototype.en=function(){return this.b!==y},L.prototype.hasBoundingBox=L.prototype.en,L.fromLatLngArray=ch,L.prototype.ga=function(t){var e,n=this===t;if(!n&&(n=C(t,L))){var r=this.X;for(t=t.X,n=(e=r.length)===t.length;n&&e--;)n=r[e]==t[e]}return n},L.prototype.equals=L.prototype.ga,p=L.prototype,p.nb="LineString",p.Yc=function(t,e){var n,r=this.X,i=r.length;if(i){for(t.push("("),n=0;n<i;n+=3)n&&t.push(","),t.push(r[n+1]," ",r[n]);e&&(r[0]!==r[i-3]||r[1]!==r[i-2])&&t.push(",",r[1]," ",r[0]),t.push(")")}else t.push("EMPTY");return t},p.Cb="LineString",p.Xc=function(){var t,e=[],n=this.X,r=n.length;for(t=0;t<r;t+=3)e.push([n[t+1],n[t],n[t+2]]);return e},p.kc=function(){var t,e=this.X;if(this.J().vb()){var n=1;for(t=(e=e.slice()).length;n<t;n+=3)0>e[n]&&(e[n]+=360)}return e},p.to=function(t){t=void 0===t?5:t;for(var e=this.X,n=e.length,r=[],i=0;i<n;i+=3)r.push([e[i],e[i+1],e[i+2]]);return Yg({polyline:r,precision:t,thirdDim:2,thirdDimPrecision:t})},L.prototype.toFlexiblePolyline=L.prototype.to,L.fromFlexiblePolyline=fh,u(gh,kg),t("H.geo.MultiGeometry",gh),gh.prototype.splice=function(t,e,n){return t=[t],e!==B&&t.push(e),n&&(e=hh(this,n,this.splice,2),t=t.concat(e)),this.a=y,this.ja.splice.apply(this.ja,t)},gh.prototype.splice=gh.prototype.splice,gh.prototype.cc=function(t){var e=this.ja.length;if(!(0<=t&&t<e))throw new le(this.cc,t,[0,e-1]);return this.a=y,this.ja.splice(t,1)[0]},gh.prototype.removeAt=gh.prototype.cc,gh.prototype.remove=function(t){if(0<=(t=this.ja.indexOf(t))){var e=this.ja.splice(t,1)[0];this.a=y}return e||y},gh.prototype.remove=gh.prototype.remove,gh.prototype.im=function(){return this.ja},gh.prototype.getGeometries=gh.prototype.im,gh.prototype.push=function(t){var e=hh(this,[t],this.push,0)[0];this.a&&(this.a=this.a.$b(t.J())),this.ja.push(e)},gh.prototype.push=gh.prototype.push,gh.prototype.J=function(){var t,e,n;if(!(t=this.a)&&(t=y,this.ja.length))for(t=this.ja[0].J(),n=1;n<this.ja.length;n++)(e=this.ja[n].J())&&(t=t?t.$b(e):e);return this.a=t},gh.prototype.getBoundingBox=gh.prototype.J,gh.prototype.a=y,gh.prototype.c=function(t){return t},gh.prototype.ga=function(t){var e,n=this===t;if(!n&&(n=C(t,this.constructor))){var r=this.ja;for(t=t.ja,n=(e=r.length)===t.length;n&&e--;)n=r[e].ga(t[e])}return n},gh.prototype.equals=gh.prototype.ga,gh.prototype.Yc=function(t){var e,n,r=this.ja,i=r.length,o=!1;if(i){for(t.push("("),e=0;e<i;e++)(n=0<e&&o)&&t.push(","),r[e].Yc(t),"EMPTY"===t[t.length-1]?t.splice(-1-+n,+n+1):o=!0;o?t.push(")"):t.splice(-1,1,"EMPTY")}else t.push("EMPTY");return t},gh.prototype.kc=function(){for(var t=[],e=this.ja,n=e.length;n--;)t[n]=e[n].kc();return t},gh.prototype.W=function(){var t=gh.l.W.call(this);return t.type=this.nb,t},gh.prototype.Xc=function(){for(var t=[],e=this.ja,n=e.length;n--;)t[n]=e[n].Xc();return t},u(ih,gh),t("H.geo.MultiLineString",ih),ih.prototype.b=function(t){return C(t,L)},ih.prototype.nb="Multi"+L.prototype.nb,ih.prototype.Cb="Multi"+L.prototype.Cb,t("H.map.provider.Invalidations",jh),jh.MARK_INITIAL=Vd,jh.prototype.update=function(t,e){e!==kh.NONE&&(this.a=t,e&kh.SPATIAL&&(this.f=t),e&kh.VISUAL&&(this.g=t),e&kh.ADD&&(this.b=t),e&kh.REMOVE&&(this.c=t),e&kh.Z_ORDER&&(this.j=t),e&kh.VOLATILITY&&(this.i=t))},jh.prototype.update=jh.prototype.update,jh.prototype.wm=function(){return this.a},jh.prototype.getMark=jh.prototype.wm,jh.prototype.a=Vd,jh.prototype.jn=function(t){return this.a>t},jh.prototype.isAny=jh.prototype.jn,jh.prototype.g=Vd,jh.prototype.Td=function(t){return this.g>t},jh.prototype.isVisual=jh.prototype.Td,jh.prototype.f=Vd,jh.prototype.rh=function(t){return this.f>t},jh.prototype.isSpatial=jh.prototype.rh,jh.prototype.b=Vd,jh.prototype.Rj=function(t){return this.b>t},jh.prototype.isAdd=jh.prototype.Rj,jh.prototype.c=Vd,jh.prototype.Lf=function(t){return this.c>t},jh.prototype.isRemove=jh.prototype.Lf,jh.prototype.j=Vd,jh.prototype.sh=function(t){return this.j>t},jh.prototype.isZOrder=jh.prototype.sh,jh.prototype.i=Vd,jh.prototype.nn=function(t){return this.i>t},jh.prototype.isVolatility=jh.prototype.nn;var kh={NONE:0,VISUAL:1,SPATIAL:2,ADD:4,REMOVE:8,Z_ORDER:16,VOLATILITY:32};function lh(t){lh.l.constructor.call(this),void 0!==t&&(this.data=t)}function M(t){if(vc(this,M),M.l.constructor.call(this,t?t.data:B),this.Y=mh.next(),t){var e="min";Dc(t[e])&&(this.s=t[e]),Dc(t[e="max"])&&(this.m=t[e]),(e="visibility")in t&&(this.u=!!t[e]),(e="volatility")in t&&(this.S=!!t[e]),(e="zIndex")in t&&(this.j=+t[e]||0),(e="provider")in t&&!C(t[e],N)&&(this.la=t[e],this.pa(kh.ADD))}}jh.Flag=kh,u(lh,F),t("H.map.Feature",lh),lh.prototype.getData=function(){return this.data},lh.prototype.getData=lh.prototype.getData,lh.prototype.o=function(){lh.l.o.call(this),delete this.data},u(M,lh),t("H.map.Object",M);var mh=new cf(1),nh={ANY:31,OVERLAY:1,SPATIAL:2,MARKER:4,DOM_MARKER:8,GROUP:16};function oh(t,e,n){var r,i;if(!n||t[0]|e[0]){var o=t.length,a=e.length,s=wd(o,a),l=1;for(i=+n+1;l<s;l+=i)if(r=t[l]-e[l])return r}return n?0:o-a}function ph(t,e){return t.Wi(e)}function qh(t,e,n){if(null===e||e===B)return null;if(0<=Object.keys(e).length&&"[object Object]"!==Object.prototype.toString.call(e))throw Error(vh(t,n));try{return JSON.stringify(e),e}catch(r){throw Error(vh(t,n))}}function vh(t,e){return"Object Remote-Id: "+t.i+" - "+(e?"The value returned by the callback is not a valid JSON object and cannot be set as Feature properties.":"The given object data is not a valid JSON object and cannot be set as Feature properties.")}function wh(t){var e;if(t){var n=xh;for(e=C(t,wh);n--;){var r=yh[n];if(t.hasOwnProperty(r)){var i=t[r];if(e)this[r]=i;else{if((i=zh[n](i))===Ah)throw new D(wh,0,r+": "+t[r]);i!==this[r]&&i!==B&&(this[r]=i)}}}(n=e?t.b:this.lineWidth&&Ye(this.strokeColor))||(this.b=n),(n=e?t.Jb:Ye(this.fillColor))||(this.Jb=n),(n=e?t.a:"none"!==this.strokeColor&&this.lineWidth)||(this.a=n)}pc(this)}M.Type=nh,M.prototype.$a=function(){return this.Y},M.prototype.getId=M.prototype.$a,M.prototype.ti=function(t){if(!Dc(t)&&!Ac(t))throw new D(this.ti,0,"id must be a number or a string");return this.i=t,this},M.prototype.setRemoteId=M.prototype.ti,M.prototype.Km=function(){return this.i},M.prototype.getRemoteId=M.prototype.Km,M.prototype.s=-1/0,M.prototype.m=1/0,M.prototype.vj=function(t){var e=this.m;if(t)for(t=this;t=t.Ca;)e=wd(e,t.m);return e},M.prototype.getMax=M.prototype.vj,M.prototype.xj=function(t){var e=this.s;if(t)for(t=this;t=t.Ca;)e=xd(e,t.s);return e},M.prototype.getMin=M.prototype.xj,M.prototype.u=!0,M.prototype.mb=function(t){return(t=!!t)!==this.u&&(this.u=t,this.invalidate(kh.VISUAL)),this},M.prototype.setVisibility=M.prototype.mb,M.prototype.qc=function(t){for(var e,n=this;(e=n.u)&&t&&(n=n.Ca););return e},M.prototype.getVisibility=M.prototype.qc,M.prototype.S=!1,M.prototype.Gf=function(t){for(var e,n=this;!(e=n.S)&&t&&(n=n.Ca););return e},M.prototype.getVolatility=M.prototype.Gf,M.prototype.Xk=function(t){var e=this.S;return e!==!!t&&(this.S=!e,this.invalidate(kh.VOLATILITY)),this},M.prototype.setVolatility=M.prototype.Xk,M.prototype.j=B,M.prototype.Ij=function(){return this.j},M.prototype.getZIndex=M.prototype.Ij,M.prototype.ce=function(t){return t!==this.j&&(this.Ve(),this.j=t,this.invalidate(kh.Z_ORDER)),this},M.prototype.setZIndex=M.prototype.ce,M.prototype.K=B,M.prototype.Pc=function(){var t,e,n=this.K;if(!n){var r=+((t=this.j)!==B);(n=this.Ca)?(n=n.Pc().slice())[0]|=r:n=[r],n.push(t||0,0>(e=this.wi)?this.Y:e),this.K=n}return n},M.prototype.getZInfo=M.prototype.Pc,M.prototype.Ve=function(){this.K=B},M.compareZInfo=oh,M.compareZOrder=ph,M.prototype.Wi=function(t){return this.ea-t.ea||oh(this.Pc(),t.Pc(),!1)},M.prototype.compareZOrder=M.prototype.Wi,p=M.prototype,p.previousSibling=y,p.nextSibling=y,p.wi=-1,p.Ca=y,p.Am=function(){return this.Ca},M.prototype.getParentGroup=M.prototype.Am,M.prototype.Xb=function(){for(var t,e=this;t=e.Ca;)e=t;return e},M.prototype.getRootGroup=M.prototype.Xb,M.prototype.contains=function(t){return this===t},M.prototype.contains=M.prototype.contains,M.prototype.ia=function(t){if(this.Ca)throw new Yc(this.ia,"Not allowed for a child of a group");M.l.ia.call(this,t)},M.prototype.setParentEventTarget=M.prototype.ia,M.prototype.draggable=!1,M.prototype.la=y,M.prototype.ka=function(){return this.la},M.prototype.getProvider=M.prototype.ka,M.prototype.be=function(t,e){var n,r=this.la;if(n=r!==t){if(e&&(r&&!C(r,N)||t&&!C(t,N)))throw new Yc(e,"Only LocalObjectProvider allows an object transfers");e=this.type!==nh.GROUP,r&&(this.invalidate(kh.REMOVE),e&&r.Da(this)),(this.la=t)&&(e&&t.ba(this),this.ra=y,this.invalidate(kh.ADD))}return n},M.prototype.ra=y,M.prototype.Gb=function(){return this.ra||(this.ra=new jh)},M.prototype.getInvalidations=M.prototype.Gb,M.prototype.pa=function(t){var e,n=this.ka();return(e=!!n)&&n.invalidateObject(this,t),e},M.prototype.invalidate=M.prototype.pa,M.prototype.o=function(){this.Ca&&this.Ca.Da(this),M.l.o.call(this)},M.prototype.setData=function(t){return this.data=t,this},M.prototype.setData=M.prototype.setData,M.prototype.Ec=function(t){var e;if(t&&!Da(t))throw new D(M.prototype.Ec,0,"opt_callback must be a function");return t=qh(this,t?t(this.data):this.data,!!t),e=this instanceof rh||this instanceof sh||this instanceof th||this instanceof uh?{type:"Feature",properties:t,geometry:this.da().Ec()}:{type:"FeatureCollection",features:hf},this.i&&(e.id=this.i),e},M.prototype.toGeoJSON=M.prototype.Ec,M.prototype.W=function(){return{id:this.Y,properties:{min:this.xj(),max:this.vj(),zIdx:this.j,sIdx:this.wi,parent:this.Ca?this.Ca.$a():0,visible:this.qc(),volatile:this.Gf()},type:"Feature"}},M.prototype.forWorkerMessage=M.prototype.W,t("H.map.SpatialStyle",wh),wh.prototype.Jb=!0,wh.prototype.b=!0,wh.prototype.a=!0;var yh="strokeColor fillColor lineWidth lineCap lineJoin miterLimit lineDash lineDashOffset lineHeadCap lineTailCap".split(" ");wh.prototype.strokeColor="rgba(0,85,170,.6)",wh.prototype.strokeColor=wh.prototype.strokeColor,wh.prototype.fillColor="rgba(0,85,170,.4)",wh.prototype.fillColor=wh.prototype.fillColor,wh.prototype.lineWidth=2,wh.prototype.lineWidth=wh.prototype.lineWidth,wh.prototype.lineCap="round",wh.prototype.lineCap=wh.prototype.lineCap,wh.prototype.lineJoin="miter",wh.prototype.lineJoin=wh.prototype.lineJoin,wh.prototype.miterLimit=1,wh.prototype.miterLimit=wh.prototype.miterLimit,wh.prototype.sn=hf,wh.prototype.lineDash=wh.prototype.sn,wh.prototype.lineDashOffset=0,wh.prototype.lineDashOffset=wh.prototype.lineDashOffset,wh.prototype.tn=B,wh.prototype.lineHeadCap=wh.prototype.tn,wh.prototype.un=B,wh.prototype.lineTailCap=wh.prototype.un;var xh=yh.length;wh.prototype.ga=function(t){var e=this===t;if(!e&&t){for(e=0;e<xh;e++){var n=yh[e];if(this[n]!==t[n])break}e=e===xh}return e},wh.prototype.equals=wh.prototype.ga,wh.prototype.nj=function(t){if(t){var e={};Ya(e,this,t)}else e=this;return new wh(e)},wh.prototype.getCopy=wh.prototype.nj;var Ah=pc({}),zh=[function(t){return t?oc(t):Ah},function(t){return t?oc(t):Ah},function(t){return 0<=t&&100>=t?+t:Ah},function(t){return"butt"===(t=oc(t))||"square"===t||"round"===t||"arrow-head"===t||"arrow-tail"===t?t:Ah},function(t){return"round"===t||"bevel"===t||"miter"===t?t:Ah},function(t){return 0<t&&100>=t?+t:Ah},function(t){return t&&t.every&&t.every(Ec)?t:Ah},function(t){return E(+t)?Ah:+t},function(t){return uc(t)?zh[3](t):B},function(t){return uc(t)?zh[3](t):B}];wh.MAX_LINE_WIDTH=100;var Bh=new wh;wh.DEFAULT_STYLE=Bh;var Ch="fillColor strokeColor lineWidth lineCap lineJoin miterLimit lineDashOffset lineDash lineTailCap lineHeadCap".split(" ");function Dh(t){var e;if(t){var n=C(t,Dh);for(e in t)if(e in this){var r=t[e];r!==this[e]&&("fillColor"===e||0<(r=+r))&&(this[e]=r)}(t=n?t.Jb:!!(Ye(this.fillColor)&&this.width&&this.width))||(this.Jb=t)}pc(this)}function Eh(t,e){var n;Eh.l.constructor.call(this,e),e&&this.xb(e.style),t&&(this.g=!0),e&&(n=e.arrows)&&this.Ok(n)}function Fh(t,e){var n,r=!1,i=!1;if(e.length){for(r=0;r<e.length;r++)if(e[r]!==Gh){i=!0;break}e=t.style,r=i?e.b||e.Jb&&t.g||(n=t.c||!1)&&e.a&&n.Jb:e.Jb}return r&&t.qc(!0)}function Hh(t,e){Hh.l.constructor.call(this,t,e)}function Ih(t,e,n,r){var i,o=[],a=e.length;for(i=0;i<a;i++){var s=e[i];s.length&&o.push(Jh(t,s,n,r))}return o}function Jh(t,e,n,r){var i,o=[],a=e.length,s=0;for(t.ya=0,i=i||0;s<a;)o.push(Kh(t,e[s++],e[s++],i,r));return n&&o.push(Kh(t,e[0],e[1],i,r)),o}function Kh(t,e,n,r,i){var o=t.ya;return o&&180<Bd(o-n)&&(n+=0>o?-360:360),t.ya=n,i.th(e,n+r)}function Lh(t,e,n){for(var r,i,o,a=e,s=t.length+e;a--;){for(i=(e=t[a]).length,r=Array(i);i--;)o=e[i],r[i]=new G(o.x+n,o.y);t[--s]=r}}function Mh(t,e,n){this.paths=this.a=t,e!==B&&(this.interiorsIndex=this.b=e),n!==B&&(this.outlinesIndex=this.c=n)}wh.prototype.W=function(){for(var t,e={},n=Ch.length;n--;)e[t=Ch[n]]=this[t];return e},wh.prototype.forWorkerMessage=wh.prototype.W,t("H.map.ArrowStyle",Dh),Dh.prototype.Jb=!0,Dh.prototype.fillColor="rgba(255,255,255,.75)",Dh.prototype.width=1.2,Dh.prototype.length=1.6,Dh.prototype.frequency=5,Dh.prototype.mj=function(){return new Dh(this)},Dh.prototype.ga=function(t){var e=this===t;return!e&&t&&(e=t.width===this.width&&t.fillColor===this.fillColor&&t.length===this.length&&t.frequency===this.frequency),e},Dh.prototype.equals=Dh.prototype.ga,u(Eh,M),t("H.map.Spatial",Eh),Eh.prototype.type=nh.SPATIAL,Eh.prototype.ea=0,Eh.prototype.style=Bh,Eh.prototype.$=function(){return this.style},Eh.prototype.getStyle=Eh.prototype.$,Eh.prototype.xb=function(t){var e=!0;return t?this.style=C(t,wh)?t:new wh(t):this.style?delete this.style:e=!1,e&&this.invalidate(kh.VISUAL),this},Eh.prototype.setStyle=Eh.prototype.xb,Eh.prototype.Nl=function(){return this.c},Eh.prototype.getArrows=Eh.prototype.Nl,Eh.prototype.Ok=function(t){var e=this.c,n=!1;return!t&&e?(delete this.c,n=!0):!t||e&&e.ga(t)||(this.c=new Dh(t),n=!0),n&&"none"!==this.style.strokeColor&&this.pa(1),this},Eh.prototype.setArrows=Eh.prototype.Ok,Eh.prototype.g=!1,Eh.prototype.kn=function(){return this.g},Eh.prototype.isClosed=Eh.prototype.kn,Eh.prototype.getGeometriesForTile=Eh.prototype.Id,Eh.prototype.$g=function(){return B},Eh.prototype.getLabels=Eh.prototype.$g,u(Hh,Eh),t("H.map.GeoShape",Hh),Hh.prototype.getBoundingBox=Hh.prototype.J,Mh.prototype.b=Ud,Mh.prototype.interiorsIndex=Mh.prototype.b,Mh.prototype.c=Ud,Mh.prototype.outlinesIndex=Mh.prototype.c;var Gh=qc(new Mh([])),Nh=pc([]),Qh;function th(t,e){th.l.constructor.call(this,!1,e),this.aa(t)}function Oh(t,e){if(!C(t,L)||2>t.Ee())throw new D(e,0)}function Ph(t,e,n,r){var i=eh(e,n.Cf());if(i.length&&(i=(t=Ih(t,i,!1,e=n.Ef())).length)){var o=n.He();e=e.w,n.x||Lh(t,i,-e),n.x===(1<<n.z)-1&&Lh(t,i,e),(n=Uf(t,o.left,o.top,o.right,o.bottom,!1)).length&&r.push(new Mh(n))}}function Rh(t,e){if(x.URL)return new x.URL(t,e).toString();if(!t||!Sh(t))return t;if(!e||Sh(e))throw new TypeError("Failed to construct 'URL': Invalid base URL");Qh||Gc(Qh=document.createElement("a"));var n=Qh;return n.href=e,"/"!==t[0]?t=n.href.replace(/\/[^\/]*$/,"/")+t:((e=n.origin)||(e=n.protocol+"//"+n.host),t=e+t),t}function Sh(t){var e=!1;return"string"===typeof t&&(e=!(-1<t.search(/^(http|https|data|blob):/)||"//"===t.substr(0,2))),e}function Th(t,e){if(Th.l.constructor.call(this),e&&Sh(e))throw new D(Th,1,"Base URL must be absolute");this.i=Uh.INIT,this.a=null,this.m=e}u(th,Hh),t("H.map.Polyline",th),th.prototype.J=function(){return this.a.J()},th.prototype.getBoundingBox=th.prototype.J,th.prototype.aa=function(t){var e,n,r=this.aa;if(C(t,ih)){var i=t.ja;if(!(e=i.length))throw new D(r,0);for(n=0;n<e;n++)Oh(i[n],r)}else Oh(t,r);return this.b=!!i,this.a=t,this.pa(kh.SPATIAL),this},th.prototype.setGeometry=th.prototype.aa,th.prototype.da=function(){return this.a},th.prototype.getGeometry=th.prototype.da,th.prototype.clip=function(t){var e=this.a;return eh(this.b?e.ja[0]:e,t)},th.prototype.clip=th.prototype.clip,th.prototype.Id=function(t){var e,n=this.a,r=[];if(this.b)for(e=(n=n.ja).length;e--;)Ph(this,n[e],t,r);else Ph(this,n,t,r);return r.length?r:B},th.prototype.getGeometriesForTile=th.prototype.Id,th.prototype.W=function(){var t=th.l.W.call(this),e=t.properties;return t.geometry=this.da().W(),e.style=this.$().W(),e.height=0,t},th.prototype.forWorkerMessage=th.prototype.W,u(Th,F),t("H.map.render.Style",Th),Th.prototype.load=Th.prototype.load,Th.prototype.getState=function(){return this.i},Th.prototype.getState=Th.prototype.getState,Th.prototype.O=function(t){this.i=t},Th.prototype.setState=Th.prototype.O,Th.prototype.Db=function(){return this.m},Th.prototype.getBaseUrl=Th.prototype.Db,Th.prototype.lc=function(){return rc(this.a)},Th.prototype.getConfig=Th.prototype.lc,Th.prototype.Ul=function(){return this.a},Th.prototype.getConfigReference=Th.prototype.Ul,Th.prototype.sd=function(t){this.a=t},Th.prototype.setConfig=Th.prototype.sd,Th.prototype.Bb=function(t){this.a=null,this.O(Uh.ERROR);var e=Vh;ue(this.R,void 0!==e?String(e):void 0)?this.dispatchEvent(new ud(Vh,t,this)):console.error(t)},Th.prototype.dispatchError=Th.prototype.Bb,Th.prototype.o=function(){Th.l.o.call(this),this.a=null};var Vh="error",Wh={$c:"change",Gi:Vh},Uh={ERROR:-1,INIT:0,LOADING:1,READY:2};function Xh(t,e){var n,r,i,o=arguments.length;for(n=1;n<o;n++)if((r=arguments[n])&&r!==t&&r!==a){var a=r;for(i in r){var s=r[i];t[i]!==s&&(Yh(s)?Yh(t[i])?t[i]=Xh(t[i],s):t[i]=rc(s):void 0!==s&&(t[i]=rc(s)))}}return t}Th.State=Uh,t("H.util.webgl.mergeObjects",Xh);var Zh=nc();function $h(t,e,n){var r=n[t];return e&&r in e&&0>tc.indexOf(r)?(e=e[r],++t<n.length?$h(t,e,n):e):Zh}var ai=$h.bind(null,0),bi={polygons:1,lines:1,"pattern-lines":1,points:1,text:1,raster:1,custom_icons:1,overlays:1},ci={data:1,draw:1,enabled:1,filter:1,properties:1},di=Object.keys(ci);function ei(t,e,n,r,i,o){var a=r[t],s=n[a];if(++t<r.length){var l=e[a]||{};for(n=di.length;n--;){var u=di[n];if("draw"!==u||!o){var c=s[u];c!==B&&(l[u]=rc(c))}}ei(t,l,s,r,i,o)}else i?l=rc(s):(l=s,delete n[a]);e[a]=e[a]?Xh(e[a],l):l}var fi=ei.bind(null,0);function gi(t,e){t in bi&&(e[t]=1)}function hi(t,e,n){var r,i,o;for(r in t)if(ci[r]){if("draw"===r){var a=t[r];for(i in a){var s=a[i];(o=s.style)?(s.style=e+o,gi(o,n)):(delete a[i],a[e+i]=s,gi(i,n))}}}else hi(t[r],e,n)}function ii(t,e){var n,r,i,o,a={};if(e+="_",n=(t=Xh({},t)).styles)for(r in n){var s=n[r];if(delete n[r],n[e+r]=s,i=s.mix)for(Ac(i)&&(i=[i]),o=i.length;o--;)gi(i[o],a),i[o]=e+i[o];(o=s.base)&&(i||(i=s.mix=[]),i.unshift(e+o),delete s.base,gi(o,a)),gi(r,a)}else n=t.styles={};if(s=t.layers)for(r in s)i=s[r],delete s[r],(o=i.data)&&!o.layer&&(o.layer=r),s[e+r]=i,hi(i,e,a);for(r in a)n[e+r]={base:r};return t}function ji(t,e){var n,r=t.sources,i=Object.keys(r)[0],o=Xh(r[i],{uid:e});for(n in r=t.layers,t.sources={},t.sources[e]=o,r)(t=r[n]).data?t.data.source===i&&(t.data.source=e):t.data={source:e}}function ki(t,e){var n,r=t.textures;for(n in t=t.fonts,r){var i=r[n];i.url&&(i.url=Rh(i.url,e))}for(n in t)if(zc(i=t[n]))for(r=0;r<i.length;r++){var o=i[r];o.url=o.url&&Rh(o.url,e)}else(o=i).url=o.url&&Rh(o.url,e)}function li(t,e){return"function(){return feature."+t+(e||"")+";}"}function mi(t){return li("style."+t,void 0)}function ni(t,e,n,r){return t={base:t,blend:e,blend_order:n},r&&(t.clean_depth=!!r),t}function oi(t){var e={};return e["translucent-"+(t?"extruded-":"")+"polygons"]={color:mi("fillColor"),order:1,interactive:!0,extrude:t},e}function pi(t,e,n,r){return t={data:{source:t,layer:e}},n&&(t.draw=n),r&&(t.filter=r),t}function Yh(t){return Ea(t)&&!zc(t)}function qi(t,e){if(qi.l.constructor.call(this,t,e),Ac(t))ri.test(t)&&-1===t.indexOf("import:")?(this.c=t,e||(this.j=Sh(this.c)?B:this.c)):this.f=t;else{if(!Ea(t))throw new D(qi,0,"invalid style configuration");this.sd(rc(t))}}function xi(t){var e,n=t.a;if(Ea(n)){var r;if(r=t.g){for(var i in r=!1,n=n&&n.sources)if(n[i].type===t.g){r=!0;break}r=!(!n||r)}r&&(e="invalid source, the only valid type is "+t.g)}else e="invalid style configuration";return e&&t.Bb(e),!e}function vi(t){t.dispatchEvent(new sd("change",t))}function ti(t){if(t.getState()!==Uh.READY)throw new Yc(t.Ke,"style is not ready yet")}function ui(t,e,n,r){var i,o,a=[],s=zc(e)?e:[e];for(void 0===r&&(r=!0),s=s.sort().reverse();i=s.pop();){e=String(i).split(".");for(var l=t.a,u=e.length;u--&&!ci[e[u]];);if(l&&0>u&&Yh(l=ai(l.layers,e))||(l=Zh),l===Zh)throw new D(n,0,'Unresolvable layer ID "'+i+'"');if(a.push({id:e,bb:l}),r)for(o in l)!ci[o]&&Yh(l[o])&&s.push(i+"."+o)}return a}function wi(t,e){var n,r=0;for(n=e.length;r!==n;){var i=e[r++],o=t;if(!(t=o[i]))break}return r===n?{node:t,parent:o,Yf:i}:void 0}u(qi,Th),t("H.map.render.webgl.Style",qi),qi.prototype.load=function(){var t=this,e=this.Db();this.c?(this.O(Uh.LOADING),new tf("text/plain",this.c).then((function(t){var n={};return si(t,e,!1,(n[e]=!0,n))})).then((function(e){return t.sd(e)}),(function(e){return t.Bb(e.message)})),delete this.c):this.f&&(this.O(Uh.LOADING),si(this.f,e).then((function(e){return t.sd(e)}),(function(e){return t.Bb(e.message)})),delete this.f)},qi.prototype.load=qi.prototype.load,qi.prototype.Tk=function(t,e,n){var r;for(ti(this),t=ui(this,t,this.Tk,n),n=0;n<t.length;n++){var i=t[n].bb.draw;for(r in i){var o=i[r];Yh(o)&&(o.interactive=!!e)}}vi(this)},qi.prototype.setInteractive=qi.prototype.Tk,qi.prototype.setProperty=function(t,e,n){var r,i=t.split("."),o=0,a=i.length;if(ti(this),!uc(e))throw new D(this.setProperty,1,"value");if(r=wi(this.a,i)){if(!(r.parent instanceof Object)||r.parent instanceof Array){if(!n)throw new D(this.setProperty,0,t+" property is not primitive type");i.pop(),i=wi(this.a,i),r.parent=i.parent[i.Yf]={}}r.parent[r.Yf]=e}else{for(r=this.a;o!==a-1;)r[i[o]]={},r=r[i[o++]];r[i[o]]=e}xi(this)&&vi(this)},qi.prototype.setProperty=qi.prototype.setProperty,qi.prototype.fh=function(t){return ti(this),(t=wi(this.a,t.split(".")))?rc(t.node):void 0},qi.prototype.getProperty=qi.prototype.fh,qi.prototype.removeProperty=function(t){ti(this),(t=wi(this.a,t.split(".")))&&t.parent&&t.parent.hasOwnProperty(t.Yf)&&(delete t.parent[t.Yf],xi(this)&&vi(this))},qi.prototype.removeProperty=qi.prototype.removeProperty,qi.prototype.se=function(t,e,n){var r;ti(this);var i=this.a,o=i.layers,a=ui(this,t,this.se,!1);for(t=a.length,r={};t--;)fi(r,o,a[t].id,!!e,!!n);for(n={},t=(a=Object.keys(i)).length;t--;){var s=a[t],l=i[s];n[s]=l===o?r:rc(l)}return e||vi(this),n},qi.prototype.extractConfig=qi.prototype.se,qi.prototype.Ke=function(t){if(ti(this),!Ea(t))throw new D(this.Ke,0,"config");this.sd(Xh(this.a,t))},qi.prototype.mergeConfig=qi.prototype.Ke,qi.prototype.b=ba(2),qi.prototype.toString=function(){return this.getState()===Uh.READY?x.H.gl.yaml.safeDump(this.a,{lineWidth:120}):""},qi.prototype.o=function(){qi.l.o.call(this),delete this.f,delete this.c};var ri=/^(http[s]?)?.*\.ya?ml/i;function si(t,e,n,r){n=void 0!==n&&n,r=void 0===r?{}:r;try{var i=x.H.gl.yaml.safeLoad(t,{json:!0})}catch(o){return Promise.reject(o)}return i&&(Ac(t=i.import)&&(t=[t]),n&&e&&yi(i,e),delete i.import,zc(t)&&t.length)?(n=t.reduce((function(t,n){var i=e?Rh(n,e):n;return r[i]||(r[i]=!0,t.push(new tf("text/plain",i).then((function(t){return si(t,i,!0,r)})))),t}),[]),Promise.all(n).then((function(t){var e={};return t.forEach((function(t){return t&&Xh(e,t)})),Xh(e,i),e}))):Promise.resolve(i)}function yi(t,e){function n(t){t.url&&(t.url=Rh(t.url,e))}var r=t&&t.fonts;if(r)for(var i in r)zc(r[i])?r[i].forEach(n):n(r[i]);if(t=t&&t.textures)for(var o in t)n(t[o])}function O(t,e){var n;if(O.l.constructor.call(this),C(t,L,O,0),e!==B&&zc(e,O,1)){for(n=0;n<e.length;n++)C(e[n],L,O,1,"index "+n);this.a=e}else this.a=[];this.b=t,this.c=[]}function zi(t){var e=O,n=L,r=t.c,i=t.a,o=t.f,a=t.b;return i=[r,i,B,r,a,B,o,a,B,o,i,B],180<=t.ub()&&(i.splice(9,0,o,t=t.Za().lng,B),i.splice(3,0,r,t,B)),new e(new n(i))}qi.normalize=yi,qi.prototype.sd=function(t){qi.l.sd.call(this,t),xi(this)&&(this.O(Uh.READY),vi(this))},qi.prototype.lc=function(){return qi.l.lc.call(this)},qi.prototype.getConfig=qi.prototype.lc,qi.prototype.Db=function(){return this.j||qi.l.Db.call(this)},qi.prototype.getBaseUrl=qi.prototype.Db,t("H.map.Style",qi),qi.State=Uh,u(O,kg),t("H.geo.Polygon",O),O.fromRect=zi;var Ai={NORTH:90,SOUTH:-90};function Bi(t,e){var n,r,i;return(i=t.J())&&((n=t.Yg(!0))&&(r=t.Ee())&&(i=i.$b(tg([t.te(0),t.te(r-1)],!0),!0)),360===i.ub()&&1===n%2&&(i=i.Sc(e,0))),i}function Ci(t,e,n,r){r=void 0===r||r;var i=t.a,o=Di.bind(null,e,n);return ce(e,n,t.b.X,0,!0,3)!==be.NONE&&(!r||!i.some(o))}function Di(t,e,n){return ce(t,e,n.X,0,!0,3)===be.SURFACE}function Ei(t,e){e=e.X,t=t.b.X;var n,r,i=e.length-3,o=t.length-3,a={};for(n=0;n<i;n+=3){var s=e[n],l=e[n+1],u=e[n+3],c=e[n+4];for(r=0;r<o;r+=3){var h=t[r],p=t[r+1],f=t[r+3],d=t[r+4];if(ag(new Yf(l,s),new Yf(c,u),new Yf(p,h),new Yf(d,f),a,!0))return!0}}return!1}function Fi(t,e){var n=e.b,r=e.a,i=r.length,o=n.X,a=o.length,s=t.b.X,l=s.length;if(Ei(t,n))return!0;for(n=0;n<a;n+=3)if(Ci(t,o[n],o[n+1]))return!0;for(n=0;n<l;n+=3)if(Ci(e,s[n],s[n+1]))return!0;for(n=0;n<i;n++)if(Ei(t,r[n]))return!0;return!1}function Gi(t){Gi.l.constructor.call(this,t)}function uh(t,e){var n=e&&(+e.extrusion||+e.extrude)||0,r=e&&+e.elevation||0,i=0;if(uh.l.constructor.call(this,!0,e),0<r&&(i+=r,this.b=r),0<n&&(i+=n,this.f=n),2047<i)throw new le(uh,i,[0,2047]);C(t,L)?this.aa(new O(t)):this.aa(t)}O.Direction=Ai,O.prototype.ld=Ai.NORTH,O.prototype.Uk=function(t){return this.ld!==t&&(this.f=y,this.c.length=0,this.ld=t),this},O.prototype.setPoleCovering=O.prototype.Uk,O.prototype.Dm=function(){return this.ld},O.prototype.getPoleCovering=O.prototype.Dm,O.prototype.dm=function(){return this.b},O.prototype.getExterior=O.prototype.dm,O.prototype.Rk=function(t){if(!C(t,L))throw new D(this.Rk,0,t);this.b=t,this.f=y},O.prototype.setExterior=O.prototype.Rk,O.prototype.nm=function(){return this.a},O.prototype.getInteriors=O.prototype.nm,O.prototype.qg=function(t,e,n){var r,i=arguments.length;for(r=2;r<i;r++)C(arguments[r],L,this.qg,r);var o=this.a.splice.apply(this.a,arguments);for(r=2;r<i;r++)arguments[r]=B;return this.c.splice.apply(this.c,arguments),o},O.prototype.spliceInteriors=O.prototype.qg,O.prototype.$n=function(t){return this.qg(t,1)[0]},O.prototype.removeInteriorAt=O.prototype.$n,O.prototype.Zn=function(t){return 0>(t=this.a.indexOf(t))?B:this.qg(t,1)[0]},O.prototype.removeInterior=O.prototype.Zn,O.prototype.Dk=function(t){if(!C(t,L))throw new D(this.Dk,0,t);this.a.push(t)},O.prototype.pushInterior=O.prototype.Dk,O.prototype.J=function(){var t=this.f;return t||(this.f=t=Bi(this.b,this.ld)),t},O.prototype.getBoundingBox=O.prototype.J,p=O.prototype,p.lj=function(t){var e=this.a.length;if(0>t||t>=e)throw new le(this.lj,t,[0,e-1]);return(e=this.c[t])||(this.c[t]=e=Bi(this.a[t],this.ld)),e},p.nb="Polygon",p.Yc=function(t){var e,n=this.a,r=n.length;if(this.b.Ee()){for(t.push("("),this.b.Yc(t,!0),e=0;e<r;e++)n[e].Ee()&&(t.push(","),n[e].Yc(t,!0));t.push(")")}else t.push("EMPTY");return t},p.Cb="Polygon",p.Xc=function(){var t,e=[],n=this.a,r=this.b.Xc();for(r[0].toString()!==r[r.length-1].toString()&&r.push(r[0]),e.push(r),t=0;t<n.length;t++)(r=n[t].Xc())[0].toString()!==r[r.length-1].toString()&&r.push(r[0]),e.push(r);return e},p.W=function(){var t=O.l.W.call(this);return this.J().vb()&&(t.type="Multi"+t.type),t},p.kc=function(){var t=[],e=this.a,n=e.length;for(t.push(this.b.kc());n--;)t[n+1]=e[n].kc();return this.J().vb()?[t]:t},p.ga=function(t){var e=!1;if(C(t,O)){var n=t.a,r=this.a.length;e=n.length;var i=0;for(e=this.b.ga(t.b)&&r===e;e&&i<r;)e=e&&this.a[i].ga(n[i]),i++}return e},O.prototype.equals=O.prototype.ga,u(Gi,gh),t("H.geo.MultiPolygon",Gi),Gi.prototype.b=function(t){return C(t,O)},Gi.prototype.nb="Multi"+O.prototype.nb,Gi.prototype.Cb="Multi"+O.prototype.Cb,u(uh,Hh),t("H.map.Polygon",uh);var Hi=new O(new L([0,0,0,0,0,0,0,0,0]));function Ii(t,e,n,r){var i,o,a=0,s=!0;if(i=Ji(t,e.b,n,r,e.J())){var l=new Mh(i),u=e.a;if(o=u.length)for(l.b=l.a.length;a<o;a++)(i=Ji(t,u[a],n,r,e.lj(a)))&&(l.a=l.a.concat(i));for(o=l.a.length,a=0;a<o;a++)if(l.a[a]!==Nh){s=!1;break}s&&(l=a%2?Gh:B)}return l}function Ji(t,e,n,r,i){var o,a=n.He(),s=i,l=s.ub(),u=[[]],c=e.X,h=[],p=c.length,f=!1;for(o=0;o<p;o+=3){var d=c[o],y=c[o+1];f||180!=Bd(y)||(h.push(d),h.push(y),h.push(d),h.push(-y),f=!0),h.push(d),h.push(y)}if(c=h,360>l&&-180==s.a&&(s=new K(s.c,180,s.f,s.b)),360>l&&180==s.b&&(s=new K(s.c,s.a,s.f,-180)),s.vb()){for(d=(l=c).length,c=-1,h=0;h<d-2;h+=2)if(jg(l[h+1],l[h+3])){c=h+2;break}-1===c&&jg(l[d-1],l[1])&&(c=d),-1!==c&&(p=l[c-2],h=l[c-1],o=l[c%d],f=l[(c+1)%d],180!==Bd(p)&&180!==Bd(o)&&(y=Bd(o-p),d=Bd(f-h),d+=180<d?-360:0,f=Bd(180-f),f+=180<f?-360:0,d&&f&&(y/=Bd(d)/Bd(f),p=o+(o>p?-y:y),h=0<h?180:-180,l.splice(c,0,p,h,p,-h)))),c=l}if(u[0]=Ki(c.concat(),s.a),360>s.ub()&&s.bd(new lg(s.c,180))&&(c=Ki(c.concat(),s.b),u.push(c)),t=Ih(t,u,!0,s=n.Ef()),360===i.ub()&&1===e.Yg(!0)%2){for(e=t,t=n.He(),e[0][1].x>e[0][e[0].length-1].x&&(e[0]=e[0].reverse()),c=[],l=e[0].length-1,u=0;u<l;u++)h=e[0][u],c[u]=new G(h.x-2*s.w,h.y),c[u+l]=new G(h.x-s.w,h.y),c[u+2*l]=new G(h.x,h.y),c[u+3*l]=new G(h.x+s.w,h.y),c[u+4*l]=new G(h.x+2*s.w,h.y);e[0]=c,(u=s.th(r,0)).y=2*t[r===Ai.NORTH?"top":"bottom"],r=u.clone(),u.x=e[0][e[0].length-1].x+1,r.x=e[0][0].x-1,e[0].push(u,r),t=e}if(Uf(t,r=a.left,e=a.top,u=a.right,a=a.bottom,!0).length){if(!n.Cf().Kg(i)){for(n=t,i=[new G(r,e),new G(u,e),new G(u,a),new G(r,a)],a=[],t=n.length;t--;)if(r=Wf(i,n[t]))for(e=Li(r),a.push(e);r.Nh;)e=Li(r=r.Nh),a.push(e);t=a}}else n=Ni(r,e,t[0]),t[1]&&(n=n!==Ni(r,e,t[1])),t=n?[Nh]:B;return t}function Ni(t,e,n){var r,i,o,a=r=n[0].x,s=i=n[0].y,l=1;for(o=n.length;l<o;l++){var u=n[l].x,c=n[l].y;u>r?r=u:u<a&&(a=u),c>i?i=c:c<s&&(s=c)}return a<=t&&t<=r&&s<=e&&e<=i&&de({x:t,y:e},ee(n.concat(n[0])))}function Li(t){var e=[],n=t;do{var r=yd(100*(n.Rn?n.Rn:n.x))/100,i=yd(100*(n.Sn?n.Sn:n.y))/100;if(!o||.01<Dd(Ed(o.x-r,2)+Ed(o.y-i,2))){var o=new G(r,i);e.push(o)}n=n.next}while(n&&n!==t);return e}function Ki(t,e){var n,r=Number.POSITIVE_INFINITY,i=-1,o=t.length;for(n=0;n<o;n+=2){var a=Bd(t[n+1]-e);(a+=180<a?360-a:a)<r&&(r=a,i=n)}return 0<n?(e=t.splice(i,t.length-i)).concat(t):t}function Oi(t,e,n){Oi.l.constructor.call(this,Hi,n),this.kg(t),this.si(e),n&&"precision"in n&&this.ri(n.precision)}function Pi(t){t.a!==y&&Oi.l.aa.call(t,Qi(t))}function Qi(t){var e=t.N,n=e.lat,r=t.V,i=0,o=new L;if(90===Bd(n))for(n=e.sg(0,r,!0).lat;360>i;i+=120)o.$h(n,i-180,B);else for(t=360/(t=t.B);360>i;i+=t)o.nd(e.sg(i,r,!0));return e=new O(o),0>n&&e.Uk(Ai.SOUTH),e}function Ri(t,e){if(!C(t,Element)){if(Si.innerHTML=t,!(t=Si.firstElementChild))throw new D(Ri,0,"No element data");Si.removeChild(t);var n=!0;Si.innerHTML=""}this.a=0!==kf(t).length,this.f=n?t:lf(t,x.document,this.a),e&&((n="onAttach")in e&&xc(t=e[n],"Function",Ri,1,n)&&(this.Oh=t),(n="onDetach")in e&&xc(t=e[n],"Function",Ri,1,n)&&(this.b=t))}uh.prototype.f=0,uh.prototype.b=0,uh.prototype.a=Hi,uh.MAX_EXTRUDE_HEIGHT=2047,uh.prototype.ii=function(t){var e=+t;if(e!==t)throw new D(this.ii,0,t);if(0>e||2047<this.b+e)throw new le(this.ii,this.b+e,[0,2047]);this.f=e,this.pa(kh.SPATIAL)},uh.prototype.setExtrusion=uh.prototype.ii,uh.prototype.em=function(){return this.f},uh.prototype.getExtrusion=uh.prototype.em,uh.prototype.hi=function(t){var e=+t;if(e!==t)throw new D(this.hi,0,t);if(0>e||2047<this.f+e)throw new le(this.hi,this.f+e,[0,2047]);this.b=e,this.pa(kh.SPATIAL)},uh.prototype.setElevation=uh.prototype.hi,uh.prototype.am=function(){return this.b},uh.prototype.getElevation=uh.prototype.am,uh.prototype.da=function(){return this.a},uh.prototype.getGeometry=uh.prototype.da,uh.prototype.aa=function(t){if(C(t,O))var e=!1;else C(t,Gi,this.aa,0),e=!0;return this.v=e,e=this.a,this.a=t,e!==Hi&&this.pa(kh.SPATIAL),this},uh.prototype.setGeometry=uh.prototype.aa,uh.prototype.J=function(){return this.da().J()},uh.prototype.getBoundingBox=uh.prototype.J,uh.prototype.Id=function(t){var e,n,r,i=this.da();if(this.v){var o=0;for(r=(i=i.ja).length;o<r;o++)(n=Ii(this,i[o],t,i[o].ld))&&(e||(e=[]),e.push(n))}else(n=this.Ya)===B&&(n=this.v?Ai.NORTH:this.da().ld),(n=Ii(this,i,t,n))&&(e=[n]);return e},uh.prototype.getGeometriesForTile=uh.prototype.Id,uh.prototype.oa=y,uh.prototype.W=function(){var t,e=uh.l.W.call(this),n=this.da(),r=this.v?n.ja:[n],i=e.properties,o=e.geometry=n.W();if(i.style=this.$().W(),i.height=this.f+this.b,i.min_height=this.b,this.J().vb()&&(o.type="MultiPolygon",this.v)){var a=[];r.forEach((function(e,n){t=o.coordinates[n],e.J().vb()?a=a.concat(t):a.push(t)})),o.coordinates=a}return e},uh.prototype.forWorkerMessage=uh.prototype.W,u(Oi,uh),t("H.map.Circle",Oi),Oi.prototype.kg=function(t){(t=ng(t)).ga(this.N)||(this.N=t,Pi(this))},Oi.prototype.setCenter=Oi.prototype.kg,Oi.prototype.Za=function(){return this.N},Oi.prototype.getCenter=Oi.prototype.Za,Oi.prototype.si=function(t){if(E(t=Zd(t,0,6371000.79*Nd/2)))throw new D(this.si,0,t);this.V!==t&&(this.V=t,Pi(this))},Oi.prototype.setRadius=Oi.prototype.si,Oi.prototype.Jm=function(){return this.V},Oi.prototype.getRadius=Oi.prototype.Jm,Oi.prototype.B=60,Oi.prototype.ri=function(t){if(!Dc(t))throw new D(this.ri,0,t);this.B!==(t=Zd(yd(t),4,360))&&(this.B=t,Pi(this))},Oi.prototype.setPrecision=Oi.prototype.ri,Oi.prototype.Gm=function(){return this.B},Oi.prototype.getPrecision=Oi.prototype.Gm,Oi.prototype.aa=function(){return this},Oi.prototype.setGeometry=Oi.prototype.aa,Oi.prototype.da=function(){return this.a===Hi&&Oi.l.aa.call(this,Qi(this)),this.a},Oi.prototype.getGeometry=Oi.prototype.da,t("H.map.DomIcon",Ri);var Si=document.createElement("DIV");function Ti(t){Ti.l.constructor.call(this,t)}function Ui(t,e){this.w=+t,this.h=+e}function Vi(t,e){var n,r=t,i=e||[];if(t!==Wi.NONE){if(e=n=i.length,-1===Xi.indexOf(r))throw new D(Vi,0,t);if(!i)throw new D(Vi,1,i);for(;n--;)if(E(i[n]))throw new D(Vi,1,i);if(r===Wi.RECT&&3<e&&(i=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]],r=Wi.POLYGON),r===Wi.CIRCLE&&2<e&&0<(t=i[2])){r=i[0];var o=i[1],a=360/(n=wd(2*Ad(t),40));for(i=[];n--;){var s=a*n*Sd;i.push(r+Gd(s)*t,o+Id(s)*t)}r=Wi.POLYGON}if(r!==Wi.POLYGON||!e||i.length%2)throw new D(Vi,1,i);this.a=i}}Ri.prototype.Oh=null,Ri.prototype.b=null,Ri.prototype.mj=function(t){return lf(this.f,t,this.a)},Ri.prototype.a=!1,u(Ti,gh),t("H.geo.MultiPoint",Ti),Ti.prototype.b=function(t){return mg(t)},Ti.prototype.c=function(t){return C(t,lg)?t:ng(t)},Ti.prototype.nb="Multi"+lg.prototype.nb,Ti.prototype.Cb="Multi"+lg.prototype.Cb,t("H.math.Size",Ui),t("H.map.HitArea",Vi);var Wi={NONE:0,RECT:1,CIRCLE:2,POLYGON:3};Vi.ShapeType=Wi;var Xi=[Wi.RECT,Wi.CIRCLE,Wi.POLYGON];function rh(t,e){var n;vc(this,rh),rh.l.constructor.call(this,e),this.aa(t),e&&"icon"in e&&(n=e.icon),this.Cc(n||Yi(this))}function Yi(t){var e=t.c;return e||(e=t.constructor.prototype.c=t.b(Zi)),e}Vi.prototype.If=function(t,e,n){return this.a?ce(t,e,this.a,n,!0):be.NONE},Vi.prototype.hitTest=Vi.prototype.If,u(rh,M),t("H.map.AbstractMarker",rh),rh.prototype.da=function(){return this.a},rh.prototype.getGeometry=rh.prototype.da,rh.prototype.aa=function(t){var e=this.a;return C(t,lg)||C(t,Ti)?this.a=t:(mg(t,this.aa,0),this.a=ng(t)),e&&this.pa(kh.SPATIAL),this},rh.prototype.setGeometry=rh.prototype.aa,rh.prototype.J=function(){return this.a.J()},rh.prototype.rb=function(){return this.icon},rh.prototype.getIcon=rh.prototype.rb,rh.prototype.Cc=function(t){var e=this.icon,n=!e;if(e!==t){if(!this.Vj(t)){if(n)throw new D(this.constructor,1,t);throw new D(this.Cc,0,t)}this.icon=t,n||this.pa(kh.VISUAL)}return this},rh.prototype.setIcon=rh.prototype.Cc;var Zi={svg:'<svg xmlns="http://www.w3.org/2000/svg" width="38" height="47" viewBox="0 0 38 47"><g fill="none"><path fill="#0F1621" fill-opacity=".4" d="M15 46c0 .317 1.79.574 4 .574s4-.257 4-.574c0-.317-1.79-.574-4-.574s-4 .257-4 .574z"></path><path fill="#01b6b2" d="M33.25 31.652A19.015 19.015 0 0 0 38 19.06C38 8.549 29.478 0 19 0S0 8.55 0 19.059c0 4.823 1.795 9.233 4.75 12.593L18.975 46 33.25 31.652z"></path><path fill="#6A6D74" fill-opacity=".5" d="M26.862 37.5l4.714-4.77c3.822-3.576 5.924-8.411 5.924-13.62C37.5 8.847 29.2.5 19 .5S.5 8.848.5 19.11c0 5.209 2.102 10.044 5.919 13.614l4.719 4.776h15.724zM19 0c10.493 0 19 8.525 19 19.041 0 5.507-2.348 10.454-6.079 13.932L19 46 6.079 32.973C2.348 29.495 0 24.548 0 19.04 0 8.525 8.507 0 19 0z"></path></g></svg>',size:new Ui(38,47),anchor:new G(19,45),hitArea:new Vi(Wi.POLYGON,[19,46,2,27,0,18,5,6,19,0,32,5,38,15,36,27,19,47])};function $i(t,e){$i.l.constructor.call(this,t,e)}function aj(t,e,n){aj.l.constructor.call(this,t),this.oldValue=n,this.newValue=e}function bj(t,e,n,r){bj.l.constructor.call(this,t,e,n),this.modifiers=r}rh.prototype.W=function(){var t=rh.l.W.call(this),e=this.rb(),n=e.sb(),r=e.fd();return t.geometry=this.da().W(),n&&((e=t.properties.icon={id:e.uid}).size={w:n.w,h:n.h},e.offset=[n.w/2-(r?r.x:0),n.h/2-(r?r.y:0)]),t},rh.prototype.forWorkerMessage=rh.prototype.W,u($i,rh),t("H.map.DomMarker",$i),$i.prototype.type=nh.DOM_MARKER,$i.prototype.ea=2,$i.prototype.b=function(t){var e=new Ri(t.svg,t);return t=t.anchor,e.f.style.margin=-t.y+"px 0 0 -"+t.x+"px",e},$i.prototype.Vj=function(t){return C(t,Ri)},u(aj,sd),t("H.util.ChangeEvent",aj),u(bj,aj),t("H.map.ChangeEvent",bj);var cj={SIZE:1,POSITION:2,HEADING:4,TILT:8,INCLINE:16,ZOOM:32,BOUNDS:64};function dj(){this.a=[],dj.l.constructor.call(this)}function ej(t,e,n){if(t=t.a.length,n)var r=t;else if(E(r=0>(r=+e)?xd(0,t+r):wd(t,r)))throw new le(dj,e,[0,t-1]);return r}function gj(t,e){var n=t.a.splice(e,1)[0];return t.dispatchEvent(new fj(t,t.A.ge,e,null,n,null)),n}function fj(t,e,n,r,i,o){fj.l.constructor.call(this,e,t),this.idx=n,this.added=r,this.removed=i,this.moved=o}function hj(){}function ij(t){return wd(1,xd(0,.5-Cd(Jd(Pd+Od*t/180))/Nd/2))}function jj(t){return 0>=t?90:1<=t?-90:Td*(2*Kd(Fd(Nd*(1-2*t)))-Od)}bj.Type=cj,bj.prototype.ml=cj.SIZE,bj.prototype.SIZE=bj.prototype.ml,bj.prototype.Ni=cj.POSITION,bj.prototype.POSITION=bj.prototype.Ni,bj.prototype.Hi=cj.HEADING,bj.prototype.HEADING=bj.prototype.Hi,bj.prototype.Pi=cj.TILT,bj.prototype.TILT=bj.prototype.Pi,bj.prototype.Ii=cj.INCLINE,bj.prototype.INCLINE=bj.prototype.Ii,bj.prototype.Qi=cj.ZOOM,bj.prototype.ZOOM=bj.prototype.Qi,bj.prototype.Fi=cj.BOUNDS,bj.prototype.BOUNDS=bj.prototype.Fi,u(dj,F),t("H.util.OList",dj),dj.prototype.add=function(t,e){e=ej(this,e,E(e)),this.a.splice(e,0,t),this.dispatchEvent(new fj(this,this.A.ee,e,t,null,null))},dj.prototype.add=dj.prototype.add,dj.prototype.cc=function(t){return this.get(t),gj(this,t)},dj.prototype.removeAt=dj.prototype.cc,dj.prototype.remove=function(t){return 0<=(t=this.indexOf(t))&&(gj(this,t),!0)},dj.prototype.remove=dj.prototype.remove,dj.prototype.set=function(t,e){if(0!==this.a.length||0!==t){this.get(t),t=ej(this,t,!1);var n=this.a[t]}return this.a[t]=e,this.dispatchEvent(new fj(this,this.A.he,t,e,n,null)),n},dj.prototype.set=dj.prototype.set,dj.prototype.indexOf=function(t){return this.a.indexOf(t)},dj.prototype.indexOf=dj.prototype.indexOf,dj.prototype.get=function(t){var e=ej(this,t,!1),n=this.a;if(e>=n.length)throw new le(this.get,t,[0,n.length-1]);return n[e]},dj.prototype.get=dj.prototype.get,dj.prototype.tm=function(){return this.a.length},dj.prototype.getLength=dj.prototype.tm,dj.prototype.Ha=function(){return this.a.concat()},dj.prototype.asArray=dj.prototype.Ha,dj.prototype.flush=function(){for(var t=this.a.length;t--;)gj(this,t)},dj.prototype.flush=dj.prototype.flush,dj.prototype.o=function(){this.flush(),dj.l.o.call(this)},dj.prototype.A={ee:"add",ge:"remove",he:"set",Go:"move"},u(fj,sd),dj.Event=fj,hj.prototype.Mf=function(t,e,n){return n?(n.x=e/360+.5,n.y=ij(t)):n=new G(e/360+.5,ij(t)),n},hj.prototype.latLngToPoint=hj.prototype.Mf,hj.prototype.Kc=function(t,e){return this.Mf(t.lat,t.lng,e)},hj.prototype.geoToPoint=hj.prototype.Kc,hj.prototype.La=function(t,e,n){return n?(n.lat=jj(e),n.lng=360*(1===t?1:Xd(t,1))-180):n=new lg(jj(e),360*(1===t?1:Xd(t,1))-180),n},hj.prototype.xyToGeo=hj.prototype.La,hj.prototype.Wf=function(t,e){return this.La(t.x,t.y,e)},hj.prototype.pointToGeo=hj.prototype.Wf;var kj=new hj;function lj(t,e){this.projection=t||kj,this.b=0,this.a=this.exp=Cd(e||256)/Md,mj(this),this.y=this.x=0}t("H.geo.mercator",kj),t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0),t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22),t("H.geo.PixelProjection",lj);var nj=Bd(24)+Bd(-8);function mj(t){t.a>nj&&(t.a=nj),t.w=Ed(2,t.a),t.h=Ed(2,t.a)}function oj(t){t=t||{},oj.l.constructor.call(this),this.min=0,this.max=22,this.zl=this.dark=!!t.dark,t.min&&this.mi(t.min),t.max&&this.ki(t.max),this.pixelProjection=new lj(t.projection,t.minWorldSize),t.provider&&(this.la=t.provider,this.Sa=A(this.Sa,this),this.la.addEventListener(P.prototype.A.xa,this.Sa,!1,this),this.eb=A(this.eb,this),this.la.addEventListener(P.prototype.A.fe,this.eb,!1,this))}function pj(t,e,n){var r=t[e],i="min"===e,o=i?t.mi:t.ki;if(n!==r){if(!(i?n<=t.max:n>=t.min))throw new D(o,0,"Invalid condition min <= max");t[e]=n,t.Sa(),t.eb(),t.dispatchEvent(new aj(i?t.A.Mi:t.A.Li,n,r))}return t}function qj(t){var e;if(qj.l.constructor.call(this),this.dispatchEvent=A(this.dispatchEvent,this),t){var n=t.length;for(e=0;e<n;e++)this.add(t[e])}}function rj(t,e){var n=e.getProvider&&e.getProvider();n&&(sj[n.uid]=n),e.ia(t)}function tj(t){var e=t.getProvider&&t.getProvider();e&&delete sj[e.uid],t.ia(null)}lj.prototype.Xf=kj,lj.prototype.projection=lj.prototype.Xf,lj.prototype.x=0,lj.prototype.x=lj.prototype.x,lj.prototype.y=0,lj.prototype.y=lj.prototype.y,lj.prototype.xo=Ed(2,nj),lj.prototype.w=lj.prototype.xo,lj.prototype.cn=Ed(2,nj),lj.prototype.h=lj.prototype.cn,lj.prototype.Ka=function(t){if(E(t))throw new D(this.Ka,0,t);var e=this.x/this.w,n=this.y/this.h;this.b=t,this.a=this.exp+t,mj(this),this.x=e*this.w,this.y=n*this.h},lj.prototype.rescale=lj.prototype.Ka,lj.prototype.Jj=function(){return this.b||0},lj.prototype.getZoomScale=lj.prototype.Jj,lj.prototype.fb=function(t,e){return(t=this.projection.Mf(t.lat,t.lng,e)).x=t.x*this.w-this.x,t.y=t.y*this.h-this.y,t},lj.prototype.geoToPixel=lj.prototype.fb,lj.prototype.Ne=function(t,e){return this.projection.La((t.x+this.x)/this.w,(t.y+this.y)/this.h,e)},lj.prototype.pixelToGeo=lj.prototype.Ne,lj.prototype.La=function(t,e,n){return this.projection.La((t+this.x)/this.w,(e+this.y)/this.h,n)},lj.prototype.xyToGeo=lj.prototype.La,lj.prototype.th=function(t,e,n){return(t=this.projection.Mf(t,e,n)).x=t.x*this.w-this.x,t.y=t.y*this.h-this.y,t},lj.prototype.latLngToPixel=lj.prototype.th,lj.prototype.Xd=function(t){return new G(t.x*this.w-this.x,t.y*this.h-this.y)},lj.prototype.pointToPixel=lj.prototype.Xd,u(oj,F),t("H.map.layer.Layer",oj),oj.prototype.min=0,oj.prototype.min=oj.prototype.min,oj.prototype.max=22,oj.prototype.max=oj.prototype.max,oj.prototype.A={xa:"update",fe:"configchange",Mi:"minchange",Li:"maxchange"},oj.prototype.ka=function(){return this.la},oj.prototype.getProvider=oj.prototype.ka,oj.prototype.mn=function(t){return this.min<=t&&t<=this.max},oj.prototype.isValid=oj.prototype.mn,oj.prototype.mi=function(t){return pj(this,"min",+t)},oj.prototype.setMin=oj.prototype.mi,oj.prototype.ki=function(t){return pj(this,"max",+t)},oj.prototype.setMax=oj.prototype.ki,oj.prototype.Sa=function(){this.dispatchEvent(this.A.xa)},oj.prototype.eb=function(){this.dispatchEvent(this.A.fe)},oj.prototype.o=function(){oj.l.o.call(this)},oj.prototype.ca=function(){return null},oj.prototype.getCopyrights=oj.prototype.ca,u(qj,dj),t("H.map.DataModel",qj),qj.prototype.add=function(t,e){C(t,oj,this.add,0),rj(this,t),qj.l.add.call(this,t,e)},qj.prototype.add=qj.prototype.add,qj.prototype.set=function(t,e){return C(e,oj,this.set,0),rj(this,e),(t=qj.l.set.call(this,t,e))&&tj(t),t},qj.prototype.set=qj.prototype.set,qj.prototype.cc=function(t){var e;return(e=qj.l.cc.call(this,t))&&tj(e),e},qj.prototype.removeAt=qj.prototype.cc,qj.prototype.remove=function(t){var e;return(e=qj.l.remove.call(this,t))&&tj(t),e},qj.prototype.remove=qj.prototype.remove,qj.prototype.flush=function(){for(var t=this.a.length;t--;)this.cc(t);qj.l.flush.call(this)},qj.prototype.flush=qj.prototype.flush;var sj={};function uj(t,e,n){if(t=sj[t])return C(t[e],Function,uj,1,"invalid method"),t[e].apply(t,n)}function vj(t,e){Da(t)&&(this.j=t),Dc(e)&&(this.b=e)}Gc(sj),qj.invoke=uj,t("H.util.Request",vj),vj.State={PENDING:0,PROCESSING:1,COMPLETE:2,CANCELLED:3,ERROR:4};var wj=[0,1,2,3,4],Cj;function xj(t,e){t.c<t.b&&(uc(e)||(e=2),0===e||1===e||0!==t.a&&1!==t.a||(t.c++,2!==e&&t.i++,t.O(t.c<t.b?1:2)))}function yj(){}function zj(t,e){var n=t.L(),r=n.ownerDocument;zj.l.constructor.call(this),this.a=t,this.P=n=n.appendChild(Aj(r,"DIV","position:absolute;bottom:0;right:0;left:0px;z-index:1;direction:ltr;pointer-events:none;height:40px-webkit-touch-callout: none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select:none;",null,"H_imprint")),this.kf=Aj(r,"DIV","margin: 0 0 16px 16px;display:inline-block;",'<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>',"H_logo"),n.appendChild(this.kf),n=n.appendChild(Aj(r,"DIV","right:0;bottom:0;position:absolute;background-color:rgba(255,255,255,.8);color:#0F1621;padding:2px 16px",null,"H_copyright")),this.i=n.appendChild(Aj(r,"A","color:inherit; margin:0px 8px; text-decoration:none; pointer-events:all;","Terms of use")),this.i.target="_blank",this.g=n.appendChild(Aj(r,"SPAN","margin:0px 8px")),this.c=n.appendChild(Aj(r,"SPAN")),this.m=Wa(Bj),this.ni(e),this.f=A(this.f,this),this.b=A(this.b,this),this.a.addEventListener(this.a.A.Ki,this.f),this.a.a.addEventListener("add",this.b),this.a.a.addEventListener("remove",this.b),this.a.a.addEventListener("set",this.b),this.b()}vj.prototype.a=0,vj.prototype.getState=function(){return this.a},vj.prototype.getState=vj.prototype.getState,vj.prototype.O=function(t){if(0>wj.indexOf(t))throw new D(this.O,0,t);(this.a!==t||1===t&&1<this.b)&&(this.a=t,this.j&&this.j(this))},vj.prototype.b=1,vj.prototype.Wm=function(){return this.b},vj.prototype.getTotal=vj.prototype.Wm,vj.prototype.c=0,vj.prototype.Hm=function(){return this.c},vj.prototype.getProcessed=vj.prototype.Hm,vj.prototype.i=0,vj.prototype.fm=function(){return this.i},vj.prototype.getFailed=vj.prototype.fm,vj.prototype.ke=function(){},vj.prototype.cancel=function(){3!==this.a&&(this.ke(),this.O(3))},vj.prototype.cancel=vj.prototype.cancel,t("H.util.ICapturable",yj),yj.prototype.capture=function(){},yj.prototype.capture=yj.prototype.capture,t("H.util.Disposable",nd),nd.prototype.ob=nd.prototype.ob,nd.prototype.addOnDisposeCallback=nd.prototype.ob,t("H.util.dispose",rd),nd.prototype.D=nd.prototype.D,nd.prototype.dispose=nd.prototype.D,nd.prototype.o=nd.prototype.o,nd.prototype.disposeInternal=nd.prototype.o,u(zj,nd),t("H.map.Imprint",zj);var Bj={font:'11px "Lucida Grande", Arial, Helvetica, sans-serif',href:"https://legal.here.com/{LN}/terms/serviceterms/{CN}",invert:!1,reportHref:"https://wego.here.com/",locale:"en-US",mark:""};function Aj(t,e,n,r,i){return t=t.createElement(e),n&&(t.style.cssText=n),r&&(t.innerHTML=r),i&&(t.className=i),t}zj.prototype.ni=function(t){var e,n=this.kf.firstElementChild.firstElementChild.children;t||(this.m=Wa(Bj));var r=this.m;for(e in r)t&&e in t&&(r[e]=t[e]);t=(this.ph=t=r.invert)?Dj:Ej,n[0].style.fill=t.Yk,n[0].style.fillOpacity=""+t.Zk,n[1].style.fill=t.cl,n[1].style.fillOpacity=""+t.dl,t=r.locale,Fj[t]||(t="en-US",r.locale=t),this.i.innerHTML=Fj[t],t=t.split("-"),this.i.href=r.href.replace("{LN}",t[0]).replace("{CN}",t[1].toLowerCase()),r.mark?(this.c.innerHTML=r.mark,this.c.style.margin="0px 8px"):(this.c.innerHTML="",this.c.style.margin="0px"),this.P.style.font=r.font},zj.prototype.setOptions=zj.prototype.ni,zj.prototype.L=function(){return this.P},zj.prototype.f=function(){this.g.innerHTML=this.j+" "+this.ca()},zj.prototype.b=function(){this.f(),setTimeout(this.f,5e3)};var Ej={cl:"#0F1621",dl:.3,Yk:"#fff",Zk:.6},Dj={cl:"#fff",dl:1,Yk:"#0F1621",Zk:.7},Gj="1987&ndash;"+xd(2015,(new Date).getFullYear())+" HERE";function Hj(t,e,n,r){Ij(A((function(t){t?this.ph?n("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAADNklEQVRYR82XW6hVVRSGv7+rmJfSMKSnSkMEfY7EogcJC7tilGRopBAiSaI+SBARQSCIIqgFISih2YW0oAgLCsKXojA0RB+81VugZEFZv/yHuWTt7d7Hfc4+6+h4OWefNfcc3xlj/v+YS1zjoab5bE8DZgGngB8keSg5GwO0PQ54F3i2BnQIWCLpx14hGwG0fT3wOfBwB5DzwOOSDvQC2RTgM8Ae4D/gaeA3YDdwN5AWvyxp+6gD2r4OmAq8AbwInAMmA/OAT4CbgBWStvYClzUjWkHbrwHLgF8LVHJ8DDxah7P9JHCil7M40oA/A7OBC8ANtSqlrQOVs30/8CWQat8r6cxg1RwRQNvPA88Bk4D7gJzBV4A5teSp5MlS4VuA/ZIeu1Kr+wa0/QTwIRDlRhT5eTswBvi2CKOd42AULilndNAYCcA7gK+BmbVMiyXtsh3Qt4FFBTgW8w6wXtLfV4LrSyS2FwAvAWOBX+JtwF0laUDmS/oun23fDNwJnJb0Ty9g1ZphVdB2qrK2LdFfBbb685/AIxXkUKDqa4cMaDs2kjalRe8Fola57J3qRQSJviGHA3gMuAdYI2lDUfDOArQLWAd8VTuTOW9vjUoFy6TIGYpS9wKfAjuK5wVuSfn91iKcvZJeHy5ci0hsZwzNk5Qh3xIFbLyks7aPAtPLgv+L4VZwDwLvA6uKz6XdfcVAi22PBz4q4+lVSRurXW2vKYKIZfwEHCmmXC35HngAyITYD0ys2t8XWflyBfhmvKm24QCk7aVFCPVc7WMszzKucknI+NoHPCUppt13VICZm2nNwjoksByY0SXL72Vi3FieZ97mgrpyqF432H9xScW2O0H+W6oSE/4D2FYuA9kzlUzVTwO3Ad9IOtx3ydo2aLGZLpABm5KW2Z4AfAbMLfsEcpGkKLqRuMwHu0CukrSpCCrvGlF6hBEVL5MUw24kOhp1B8gc+FTqgxpkFLuzSbjk6jpJOkC2tDPeKCkVbDRkO67fDTTC2VK7vgfyBUlfNEpV2zyAK4HNXRLmZfshScdHC6g9T+WDGU2XpkdZdNXhWs6g7dXAhmsJ7jKR2M77bG4kV7Wt9TZfBLgYEC7PSpcIAAAAAElFTkSuQmCC"):n("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIMSURBVFiFzdZPiE1RGADwXzPTTPIMQoodVpbKgpoUG5qExUi8DSVJQv4slJJsbNjYWFhNETWLUUosRDRLUVLCYhIiojFojHkW997uvefNGIuZc99Xp/fOO6/Or++c75xDi0d7hDlWYQNqeB9hvv+OGq6jUWjPsKZKVBbtuKOMy9p3bKqOlsROCWYc27AWr9PfJnCgKlgbluNqivmGDmzBrxR3sCocnMEw7sqXdEAzboeK9uLTFPVbed8VcesxglFJtqNEHbcxlIL68ChADuCSpEgauBULt11SDI3C5yJJdrLCCNsQumMBl+J5AKinY4slBfNTfsRcxJwYsK0YxD3J0r1RPut6Cv/twgp0xoDBBc3LNhr0RwJktNifAn7gsnLmsuxVinyVTn4i7dcLoH4sU96Tp2Pi2uSVehN75Gdev+QO7pIXztmZnLwTvf+AzU+/v5Rn50+A24gP2IW5M4mbJ7+ejgVjJ/EpHXuCa8p77nGK68FX5eWfsTgfTJoh92qu1vAaa+CtPJuDZuEh3CHZUyHyxSSYrL3DWKE/gStm8aybDDkmKYperJM/BrJMnsJuHMLq2YJNh/wsX7JuPAyQfTFg0yGPFMZreCCv4n2xgTQjxyXP+CxquK8iXBYhMlzOtliQBVg4RVuCG/iSto/YHAuWxWFTHyXDWBkbNFkc1cK4LI5rYVwW57QY7i/pZeJv8QQJRQAAAABJRU5ErkJggg=="):((t=this.kf.cloneNode(!0)).firstChild.setAttribute("style","font:"+e),n(bf(t.innerHTML)))}),t),r)}function Ij(t,e){var n="data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>'),r=Cj;uc(r)?t(r):new tf("image",n).then((function(e){Xe.drawImage(e,0,0);try{Xe.getImageData(0,0,1,1),r=!1}catch(n){r=18===n.code}finally{Cj=r,t(r)}}),e)}zj.prototype.ca=function(){var t,e,n,r=this.a,i=r.kb(),o=r.c.gb().bounds,a=(r=r.a).a.length,s={},l=0,u=[Gj];if(o)for(;l<a;l++)if(e=r.get(l).getCopyrights(o.J(),i))for(t=0;t<e.length;t++)s[n=e[t].label]||(u.push(n),s[n]=1);return u.join(", ")},zj.prototype.getCopyrights=zj.prototype.ca,zj.prototype.$=function(){return this.P.style},zj.prototype.j=String.fromCharCode(169),zj.prototype.o=function(){if(this.a.removeEventListener(this.a.A.Ki,this.f),this.a.a.removeEventListener("add",this.b),this.a.a.removeEventListener("remove",this.b),this.a.a.removeEventListener("set",this.b),this.P.parentNode){var t=this.P;t.parentNode.removeChild(t)}},zj.prototype.disposeInternal=zj.prototype.o,zj.prototype.capture=function(t,e,n,r){var i,o=t.getContext("2d"),a=window.getComputedStyle(this.g.parentElement),s=2*Bc(a.paddingLeft,10),l=(this.g.offsetWidth+2*s)*e,u=this.g.offsetHeight*e,c=0!==this.c.innerHTML.length?this.c.offsetWidth*e:0,h=Cc(a.getPropertyValue("font-size")),p=this.P.ownerDocument,f=+t.width,d=+t.height,y=16*e,g=this.kf.childNodes[0].getBoundingClientRect(),v=g.width*e,m=g.height*e,b=jd;Da(r)&&(b=function(){r("capture_error")}),o.fillStyle=a.backgroundColor,o.fillRect(f-l-c,d-u,l+c,u),l=this.c.innerHTML,l=this.j+" "+(i=this.ca(),(i=Aj(p,"div",null,i)).textContent||i.innerText||"")+(l?" "+l:""),o.font=h*e+"px "+a.getPropertyValue("font-family"),o.fillStyle=a.getPropertyValue("color"),o.textBaseline="bottom",o.textAlign="right",o.fillText(l,f-s*e,d),Hj(this,o.font,(function(e){new tf("image",e).then((function(e){o.drawImage(e,y,d-(m+y),v,m),n(t)}),b)}),b)},zj.prototype.capture=zj.prototype.capture,zj.prototype.ph=!1,zj.prototype.ol=function(t,e){Fj[t]=e},zj.prototype.addL11NString=zj.prototype.ol;var Fj={"de-DE":"Nutzungsbedingungen","en-US":"Terms of use","en-GB":"Terms of use","es-ES":"Condiciones de uso","fi-FI":"Palveluehdot","fr-FR":"Conditions d'utilisation","it-IT":"Condizioni di utilizzo","nl-NL":"Dienstvoorwaarden","pl-PL":"Warunki \u015bwiadczenia us\u0142ugi","pt-BR":"Termos de servi\xe7o","pt-PT":"Termos do servi\xe7o","ru-RU":"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","tr-TR":"Servis Ko\u015fullar\u0131","zh-CN":"\u4f7f\u7528\u6761\u6b3e"};function R(t){var e={};this.f=e.previousSibling=e.nextSibling=e,this.g=new cf,R.l.constructor.call(this,t),t&&"objects"in t&&this.Sb(t.objects)}function Jj(t,e,n){t.be(n.la)}function Kj(t){t.Ve()}function Lj(t,e,n){t.pa(n.c)}function Mj(t){this.push(t)}function Nj(t,e){for(var n,r,i=0,o=e.length,a=[];i<o;i++)r=(n=e[i])instanceof R?{type:"GeometryCollection",geometries:Nj(t,n.Pa())}:n instanceof rh||n instanceof sh||n instanceof th||n instanceof uh?n.da().Ec():{type:"FeatureCollection",features:hf},a.push(r);return a}u(R,M),t("H.map.Group",R),R.prototype.type=nh.GROUP,R.prototype.be=function(t,e){return this.b=!0,t=R.l.be.call(this,t,e),this.b=!1,t&&this.forEach(Jj,!0),t},R.prototype.setProvider=R.prototype.be,R.prototype.contains=function(t){var e=this===t;if(!e&&this.a&&C(t,M))for(;!e&&t;)t===this?e=!0:t=t.Ca;return e},R.prototype.contains=R.prototype.contains,R.prototype.Ve=function(){this.K=B,this.forEach(Kj,!0)},R.prototype.resetZInfo=R.prototype.Ve,R.prototype.b=!1,R.prototype.pa=function(t){var e=R.l.pa.call(this,t);return e&&!this.b&&(this.c=t,this.forEach(Lj,!0),delete this.c),e},R.prototype.invalidate=R.prototype.pa,R.prototype.forEach=function(t,e,n){var r;if(this.a){var i=this.f,o=i.nextSibling;for(r=0;o!==i;){var a=o.nextSibling;t.call(n,o,r++,this),e&&C(o,R)&&o.forEach(t,e,n),o=a}}},R.prototype.forEach=R.prototype.forEach,R.prototype.Pa=function(t){var e=[];return this.forEach(Mj,t,e),e},R.prototype.getObjects=R.prototype.Pa,R.prototype.J=function(){var t=null;return this.a&&this.forEach((function(e){e.J&&(e=e.J())&&(t=t?t.$b(e):e)})),t},R.prototype.getBoundingBox=R.prototype.J,R.prototype.a=0,R.prototype.Sl=function(){return this.a},R.prototype.getChildCount=R.prototype.Sl,R.prototype.ba=function(t){var e=this.f,n=e.previousSibling;if(C(t,M,this.ba,0),t.contains(this))throw new Yc(this.ba,"The new object contains the parent group");var r=t.Gf(!0),i=t.Ca;if(i!==this){if(i){i=t.previousSibling;var o=t.nextSibling;i.nextSibling=o,o.previousSibling=i}t.Ca=this,M.l.ia.call(t,this),n.nextSibling=t,t.previousSibling=n,t.nextSibling=e,e.previousSibling=t,this.a++}return t.wi=this.g.next(),t.Ve(),e=t.be(this.la,this.ba),t.Gf(!0)!==r&&t.pa(kh.VOLATILITY),e||t.pa(kh.Z_ORDER),t},R.prototype.addObject=R.prototype.ba,R.prototype.Sb=function(t){var e;zc(t,this.Sb,0);var n=t.length;for(e=0;e<n;e++)this.ba(t[e])},R.prototype.addObjects=R.prototype.Sb,R.prototype.Da=function(t){if(!t||t.Ca!==this)throw new Yc(this.Da,"object not found");var e=t.previousSibling,n=t.nextSibling;return e.nextSibling=n,n.previousSibling=e,t.Ca=null,M.l.ia.call(t,null),delete t.previousSibling,delete t.nextSibling,C(t.la,N)&&t.be(null,this.Da),this.a--,t},R.prototype.removeObject=R.prototype.Da,R.prototype.od=function(t){var e;zc(t,this.od,0);var n=t.length;for(e=0;e<n;e++)this.Da(t[e])},R.prototype.removeObjects=R.prototype.od,R.prototype.ma=function(){var t=this.Pa();this.od(t)},R.prototype.removeAll=R.prototype.ma,R.prototype.Ec=function(t){for(var e,n,r,i=this.Pa(),o=0,a=i.length,s=[];o<a;o++)(r=i[o])instanceof R?(n=qh(this,e=t?t(r.getData()):r.getData(),!!t),(e={type:"Feature"}).properties=n,r.i&&(e.id=r.i),e.geometry={},e.geometry.type="GeometryCollection",e.geometry.geometries=Nj(this,r.Pa()),s.push(e)):s.push(r.Ec(t));return{type:"FeatureCollection",features:s}},R.prototype.toGeoJSON=R.prototype.Ec,R.prototype.W=function(){var t=R.l.W.call(this);return t.type="Group",t},R.prototype.forWorkerMessage=R.prototype.W;var Oj={PROVIDES_BY_VIEWPORT:1,PROVIDES_RASTERS:2,PROVIDES_SPATIALS:4,PROVIDES_OVERLAYS:8,PROVIDES_MARKERS:16,PROVIDES_DOM_MARKERS:32,PROVIDES_GEOJSON:64,PROVIDES_OMV:128,CROP_LINES_BY_TILE:256,CROP_POLYGONS_BY_TILE:512,HAS_VOLATILE_DATA:1024};function Pj(t,e,n,r,i){switch(e&&(this.g=e),uc(n)&&(this.c=!!n),this.c&&r&&(this.Fg=new Ui(r.w,r.h)),uc(i)&&(this.i={crossOrigin:i}),Qj[yc(t)]){case 2:this.a=t,Rj(this,1);break;case 1:if(nf(t)){this.a=t,Sj(this),Rj(this,1);break}t=t.src;case 0:if(t){t=bf(t),this.b=new tf("image",t,B,this.i),this.b.then(A(this.On,this),A(this.Nn,this));break}default:throw Rj(this,-1),new D(Pj,0,"No image data")}}function Rj(t,e){t.f=e,delete t.b,t.g&&t.g(e,t)}function Sj(t){if(t.c){var e=t.a,n=Tj(t),r=n&&n.w||+e.width,i=n&&n.h||+e.height,o=Te();if(C(e,x.HTMLCanvasElement))n=e;else{(n=e.ownerDocument.createElement("canvas")).width=Ad(r*o),n.height=Ad(i*o);var a=n.getContext("2d");a.scale(o,o),a.drawImage(e,0,0,r,i),$c&&(a.clearRect(0,0,r,i),a.drawImage(e,0,0,r,i))}t.a=n}}t("H.map.provider.Capabilities",Oj),Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS=Oj.PROVIDES_SPATIALS|Oj.PROVIDES_OVERLAYS|Oj.PROVIDES_MARKERS,Pj.prototype.f=0,Pj.prototype.getState=function(){return this.f},Pj.prototype.c=!0,Pj.prototype.getData=function(){return this.a||y};var Qj={String:0,HTMLImageElement:1,HTMLCanvasElement:2};function Tj(t){var e,n=t.Fg;if(!n){var r=t.a;if(0===(n=r.naturalWidth||r.width)&&$e&&1===Qj[yc(r)]){var i=!0;if(e=r.parentNode)var o=r.nextSibling;document.body.appendChild(r)}t.Fg=n=new Ui(r.naturalWidth||r.width,r.naturalHeight||r.height),i&&(e?e.insertBefore(r,o):document.body.removeChild(r))}return n}function Uj(t,e){var n,r="anonymous";if(this.uid=Vj.next(),Uj.l.constructor.call(this),e){var i="size";if(i in e){var o=e[i];if(!o||isNaN(o.w)||isNaN(o.h))throw new D(Uj,1,i);this.g=new Ui(o.w,o.h)}if((i="anchor")in e){if(!(o=e[i])||isNaN(o.x)||isNaN(o.y))throw new D(Uj,1,i);this.f=new G(o.x,o.y)}(i="hitArea")in e&&(C(o=e[i],Vi,Uj,1),this.c=e[i]),(i="asCanvas")in e&&(n=e[i]),(i="crossOrigin")in e&&(r=e[i]),(o=e.stickHeight)===+o&&0<o&&(this.oo=o),o=e[i="stickColor"],i in e&&Ac(o)&&(this.no=o)}t=new Pj(t,A(this.i,this),n,this.g,r),0!==(e=this.j=t.getState())?this.i(e,t):this.b=t}p=Pj.prototype,p.Fg=y,p.sb=function(){return 1===this.f?Tj(this):y},p.On=function(t){this.a=t,Sj(this),Rj(this,1)},p.Nn=function(){Rj(this,-1)},p.cancel=function(){this.b&&this.b.cancel()},u(Uj,F),t("H.map.Icon",Uj);var Vj=new cf;function Wj(t,e,n,r,i,o){Wj.l.constructor.call(this,isNaN(t)?15:t,e,n,r,i,o)}function Xj(t,e,n,r,i){var o=e.entries;if(i)if(e.a)o=Yj(t,e,n,r,i);else if(o){var a=Eg(e,+((o=o[0])[1]>=e[8])|+(o[0]>=e[9])<<1);a.entries=e.entries,delete e.entries,o.node=a,Bg(t,a),o=Yj(t,e,n,r,i)}else Fg(e,o=new Zj(n,r)),Bg(t,e),zg(t,o,!0);else o||Bg(t,e),Fg(e,o=new Zj(n,r)),zg(t,o,!0);return o}function Yj(t,e,n,r,i){return Xj(t,Eg(e,+(n>=e[8])|+(r>=e[9])<<1),n,r,i-1)}function Zj(t,e){this.id=Dg++,this[0]=e,this[1]=t}function ak(){this.a=new Wj(10,180,90,0,0,!0)}function bk(t){this.a=t}function ck(t,e,n){this.c=t,this.a=e,this.g=n,this.f=this.c&Oj.PROVIDES_BY_VIEWPORT?"function(){return sources[$source].isInMinMaxRange(feature, $zoom) && feature.ref.effectiveVisibility;}":B,this.b={}}function dk(t,e,n,r){this.a=t,this.b=e,this.c=n,this.ff=r}function ek(t,e,n,r){return t={type:e,uid:t.b,tiled:n,max_zoom:t.c},r&&Ya(t,r),t}function fk(t,e,n,r,i){this.a=t,this.b=e,this.c=n,this.f=r,this.ff=i}function gk(t){if(t.a&Oj.PROVIDES_DOM_MARKERS&&!(t.a&Oj.PROVIDES_MARKERS))return{};var e=new dk(t.a,t.b,t.c,t.ff),n=new bk(t.a);t=new ck(t.a,t.b,t.f);var r={},i=e.b;if(e=e.a&Oj.PROVIDES_BY_VIEWPORT?ek(e,"ObjectSource",!1,{progressiveUpdate:!0,has_volatile_data:!!(e.a&Oj.HAS_VOLATILE_DATA)}):e.a&Oj.PROVIDES_RASTERS?ek(e,"RemoteRasterTileSource",!0,{url:""}):ek(e,"ObjectTileSource",!0,{tile_size:e.ff}),r[i]=e,e={},n.a&Oj.PROVIDES_RASTERS&&(e={"translucent-raster":ni("raster","inlay",1)}),n.a&Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS){i=!!(n.a&Oj.CROP_LINES_BY_TILE);var o={"translucent-polygons":ni("polygons","inlay",2),"translucent-extruded-polygons":ni("polygons","translucent",3),"translucent-pattern-lines":ni("pattern-lines","translucent",4),"translucent-overlays":ni("overlays","inlay",5),markers:ni("custom_icons","overlay",6,!1)};o["translucent-polygons"].crop_by_tile=!!(n.a&Oj.CROP_POLYGONS_BY_TILE),o["translucent-pattern-lines"].crop_by_tile=i,o.markers.suppress_fade=!0,o.markers.stick=!0,Ya(e,o)}if(t.c&Oj.PROVIDES_RASTERS&&(t.b["tile_layer_"+t.a]=pi(t.a,"_default",{"translucent-raster":{color:[1,1,1,t.g],order:0}})),t.c&Oj.PROVIDES_SPATIALS){n={"translucent-pattern-lines":{color:mi("strokeColor"),width:mi("lineWidth * $meters_per_pixel"),join:mi("lineJoin"),cap:mi("lineCap"),tail_cap:mi("lineTailCap"),head_cap:mi("lineHeadCap"),miter_limit:mi("miterLimit"),order:"function() { return 2 + feature.effectiveZIdx / 2; }",interactive:!0,dash:mi("lineDash"),extrude:!0,dash_phase:mi("lineDashOffset")}},i=t.b,o="polygon_layer_"+t.a;var a=pi(t.a,"polygons",void 0,t.f);a.flat={filter:"function(){return !feature.height && !feature.min_height;}",draw:oi(!1)},a.extruded={filter:"function(){return feature.height || feature.min_height;}",draw:oi(!0)},i[o]=a,t.b["outline_layer_"+t.a]=pi(t.a,"outlines",n,t.f),t.b["polyline_layer_"+t.a]=pi(t.a,"polylines",n,t.f)}return t.c&Oj.PROVIDES_OVERLAYS&&(t.b["overlay_layer_"+t.a]=pi(t.a,"overlays",{"translucent-overlays":{color:[1,1,1,t.g],order:8190,interactive:!0}})),t.c&Oj.PROVIDES_MARKERS&&(t.b["marker_layer_"+t.a]=pi(t.a,"markers",{markers:{sprite:li("icon.id"),offset:li("icon.offset"),collide:!1,priority:8191,elevate_by_altitude:!0,interactive:!0,stick:{color:li("icon.stick_color"),height:li("icon.stick_height")}}},t.f)),{sources:r,styles:e,layers:t.b}}function P(t){var e,n=""+ef();if(P.l.constructor.call(this),t=t||{},this.min=t.min||0,this.max=t.max||22,e=t.uri){if(/_/.test(e))throw new D(P,0,"uri "+e)}else e=n;if(this.uri=e||n,this.uid=n,t.getCopyrights&&xc(t.getCopyrights,"Function",P)&&(this.getCopyrights=t.getCopyrights),this.eb=this.eb.bind(this),this.ra=!0,this.a=t.engineType||hk,this.a===ik.HARP&&!H.map.render.harp)throw new D(P,0,"HARP engine is not supported, module not found")}function jk(t,e){e=Zd(e,0,1),E(e)&&(e=1),t.g!==e&&(t.g=e,t.ra&&kk(t),t.eb(),t.Sa())}function kk(t){if(t.a===ik.WEBGL){var e=new fk(t.getCapabilities(),t.uid,t.max,t.g,t.tileSize);t.b=new qi(gk(e))}else t.a===ik.HARP&&H.map.render.harp&&(t.b=new H.map.render.harp.Style({}));t.ra=!0}function mk(t){var e;for(e in vc(this,mk),mk.l.constructor.call(this,t),this.V=t=[],nh)t[nh[e]]=new jh}function N(t){t=t||{},N.l.constructor.call(this,t),this.f=t=new R({min:t.min,max:t.max}),t.la=this,t.ia(this),t.pa(kh.ADD),this.u=new Lg,this.i=new Lg,this.m=new ak,this.s=new Lg,this.S=new ak,this.ea=new Lg}function nk(t,e,n,r,i,o,a){if(a=a||[],e.Mc())for(t=e!==t.m&&e!==t.s,i=!i,n=(e=e.Jf(n,o,o)).length,o=0;o<n;o++){var s,l=e[o].c;if(s=void 0!==r){for(var u=zd(r),c=l;(s=c.s<=u&&c.m>=u)&&(c=c.Ca););s=!s}s||!i&&!l.qc(!0)||(t||1===l.rb().getState())&&a.push(l)}return a}function ok(t,e,n,r,i){var o=nk(t,t.m,e,n,r,i);return nk(t,t.s,e,n,r,i,o),o}function pk(t,e,n,r,i){var o=nk(t,t.S,e,n,r,i);return nk(t,t.ea,e,n,r,i,o),o}function qk(t,e,n){var r,i=n.da(),o=rk.bind(null,t);t=sk.bind(null,t),C(n,th)?r=C(i,L)?o(i):i.ja.some(o):C(n,uh)?r=C(i,O)?t(i):i.ja.some(t):C(n,sh)&&(r=t(zi(i))),r&&e.push(n)}function rk(t,e){t:{var n=e.X,r=Ei(t,e);if(!r){e=e.X.length;for(var i=0;i<e;i+=3)if(Ci(t,n[i],n[i+1])){t=!0;break t}}t=r}return t}function sk(t,e){return Fi(t,e)}function tk(t,e,n){for(var r=t.length;r--;){var i=t[r],o=i.da();if(C(o,Ti)){for(var a,s=(o=o.ja).length;s--;)if(Ci(e,(a=o[s]).lat,a.lng)){n.push(i);break}}else Ci(e,o.lat,o.lng)&&n.push(i)}}Uj.State={ERROR:-1,LOADING:0,READY:1},Uj.prototype.getState=function(){return this.j},Uj.prototype.getState=Uj.prototype.getState,Uj.prototype.i=function(t,e){if(this.a=e.getData(),1===t){var n=this.g;n||(n=this.g=e.sb()),this.f||(this.f=new G(n.w/2|0,n.h))}this.b&&(this.j=t,delete this.b,this.dispatchEvent("statechange"))},Uj.prototype.a=y,Uj.prototype.Lc=function(){return this.a},Uj.prototype.getBitmap=Uj.prototype.Lc,Uj.prototype.sb=function(){return this.g||y},Uj.prototype.getSize=Uj.prototype.sb,Uj.prototype.f=y,Uj.prototype.fd=function(){return this.f},Uj.prototype.getAnchor=Uj.prototype.fd,Uj.prototype.c=y,Uj.prototype.jm=function(){return this.c},Uj.prototype.getHitArea=Uj.prototype.jm,Uj.prototype.o=function(){Uj.l.o.call(this),this.a?(this.a.removeAttribute("src"),delete this.a):(this.b.cancel(),delete this.b)},u(Wj,wg),Wj.prototype.m=function(t){for(var e,n,r=this.head,i=t;i;){if(t=i.entries)if(e=t.length){if(2>e&&(n=i.parent)&&1===n.a){n.removeChild(i),r===i&&(r=n),n.entries=t,i=t[0].node=n;continue}}else if(delete i.entries,(n=i.parent)&&(n.removeChild(i),r===i&&(r=n),1===n.a)){i=n.a?n[0]||n[1]||n[2]||n[3]:null;continue}break}this.head!==r&&(this.head=r,Bg(this))},Wj.prototype.sc=function(t,e){if(Gg(this.a,t,e,t,e))return Xj(this,this.a,t,e,this.c);throw Error("Coordinates out of bounds")},Zj.prototype.a=function(t){return this[t%2]},p=ak.prototype,p.wh=0,p.Mc=function(){return this.wh},p.Nf=null,p.J=function(){var t,e=this.Nf;return!e&&(t=xg(this.a))&&(this.Nf=e=new K(-t[0],t[3],-t[2],t[1])),e},p.sc=function(t){return++this.wh,this.Nf=null,this.a.sc(t.lng,-t.lat)},p.remove=function(t){return(t=this.a.remove(t))&&(--this.wh,this.Nf=null),t},p.Jf=function(t,e,n){var r=this.a,i=t.Ib(),o=t.Eb(),a=-i.lat;i=i.lng;var s=-o.lat;return o=o.lng,t.vb()?r.Va(-180,a,o,s,n,e).concat(r.Va(i,a,180,s,n,e)):r.Va(i,a,o,s,n,e)},u(P,F),t("H.map.provider.Provider",P),p=P.prototype,p.A={fe:"configchange",xa:"update"},p.Sa=function(t,e){this.dispatchEvent(new td(this.A.xa,e,t))},p.eb=function(){this.dispatchEvent(this.A.fe)},p.o=function(){F.prototype.o.call(this),this.b&&(this.b.removeEventListener("change",this.eb),delete this.b)},p.ca=function(){return null},P.prototype.getCopyrights=P.prototype.ca,P.prototype.getCapabilities=function(){var t=0;return this.Xh()&&(t|=Oj.PROVIDES_BY_VIEWPORT),this.providesRasters()&&(t|=Oj.PROVIDES_RASTERS),this.providesSpatials()&&(t|=Oj.PROVIDES_SPATIALS),this.providesOverlays()&&(t|=Oj.PROVIDES_OVERLAYS),this.providesMarkers()&&(t|=Oj.PROVIDES_MARKERS),this.providesDomMarkers()&&(t|=Oj.PROVIDES_DOM_MARKERS),this.providesGeoJSON()&&(t|=Oj.PROVIDES_GEOJSON),this.providesOMV()&&(t|=Oj.PROVIDES_OMV),t},P.prototype.getCapabilities=P.prototype.getCapabilities,P.prototype.Xh=gf,P.prototype.Re=gf,P.prototype.providesRasters=P.prototype.Re,P.prototype.wc=gf,P.prototype.providesSpatials=P.prototype.wc,P.prototype.Zh=gf,P.prototype.providesOverlays=P.prototype.Zh,P.prototype.Mb=gf,P.prototype.providesMarkers=P.prototype.Mb,P.prototype.Lb=gf,P.prototype.providesDomMarkers=P.prototype.Lb,P.prototype.Yh=gf,P.prototype.providesGeoJSON=P.prototype.Yh,P.prototype.md=gf,P.prototype.providesOMV=P.prototype.md,P.prototype.cm=function(){return this.a},P.prototype.getEngineType=P.prototype.cm,P.prototype.Qe=jd,P.prototype.preprocessData=P.prototype.Qe,P.prototype.g=1,P.prototype.zm=function(){return this.g},P.prototype.getOpacityInternal=P.prototype.zm,P.prototype.lb=function(t,e){var n=this;if(this.a===ik.WEBGL&&!C(t,qi)||this.a===ik.HARP&&!C(t,H.map.render.harp.Style))throw t=Object.entries(ik).find((function(t){return t[1]===n.a})),new D(this.lb,0,"Invalid style for engineType "+t);this.b&&(this.b.removeEventListener("change",this.eb),this.b.removeEventListener(Vh,this.eb)),this.b=t,this.b.addEventListener("change",this.eb),this.b.addEventListener(Vh,this.eb),e||this.eb(),this.ra=!1},P.prototype.setStyleInternal=P.prototype.lb,P.prototype.ab=function(){return this.b||kk(this),this.b},P.prototype.getStyleInternal=P.prototype.ab,P.prototype.Aj=function(){var t=this.getCapabilities(),e=lk.FEATURE;return t&Oj.PROVIDES_BY_VIEWPORT?e=lk.SOURCE:t&Oj.PROVIDES_RASTERS?e=null:t&Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS&&(e=lk.PROVIDER),e},P.prototype.getPickingMode=P.prototype.Aj,P.prototype.gm=function(){return!1},P.prototype.getFeatureProxy=P.prototype.gm,u(mk,P),t("H.map.provider.ObjectProvider",mk),mk.prototype.Xh=ff,mk.prototype.providesByViewport=mk.prototype.Xh,mk.prototype.Gb=function(t){return this.V[t||nh.ANY]},mk.prototype.getInvalidations=mk.prototype.Gb,mk.prototype.Rd=function(t,e){if(e!==kh.NONE){var n=this.V[nh.ANY],r=n.a+1;n.update(r,e),(n=this.V[t.type]).update(r,e),t.Gb().update(r,e),this.Sa(t)}},mk.prototype.invalidateObject=mk.prototype.Rd,mk.prototype.requestOverlays=mk.prototype.pd,mk.prototype.requestSpatials=mk.prototype.cg,mk.prototype.requestSpatialsByTile=mk.prototype.dg,mk.prototype.ua=!1,mk.prototype.requestMarkers=mk.prototype.yc,mk.prototype.requestDomMarkers=mk.prototype.xc,u(N,mk),t("H.map.provider.LocalObjectProvider",N),N.prototype.getCapabilities=function(){return Oj.PROVIDES_BY_VIEWPORT|Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS|Oj.PROVIDES_DOM_MARKERS|Oj.CROP_LINES_BY_TILE},N.prototype.ab=function(){if(!this.B&&(this.B=N.l.ab.call(this),this.B instanceof qi)){var t=new fk(this.getCapabilities()|Oj.HAS_VOLATILE_DATA,this.uid+"_vol",this.max,this.g,this.tileSize);this.B.Ke(gk(t))}return this.B},N.prototype.getStyleInternal=N.prototype.ab,N.prototype.Xb=function(){return this.f},N.prototype.getRootGroup=N.prototype.Xb,N.prototype.Rd=function(t,e){e&kh.SPATIAL&&this.ba(t),N.l.Rd.call(this,t,e)},N.prototype.invalidateObject=N.prototype.Rd,N.prototype.ba=function(t){var e;if(C(t,M,this.ba,0),t.la!==this)throw new Yc(this.ba,"foreign object");this.Da(t);var n=t.type;if(n===nh.MARKER)if((e=t.da())instanceof lg){var r=!0;n=this.m}else n=this.s;else n===nh.DOM_MARKER?(e=t.da())instanceof lg?(r=!0,n=this.S):n=this.ea:n=n===nh.OVERLAY?this.u:this.i;(r=r?n.sc(e):n.Pj(t.J())).c=t,t.ua=r},N.prototype.Da=function(t){var e;if(t)if(t.la!==this){if(C(t,M))throw new Yc(this.Da,"foreign object")}else if(e=t.ua){var n=t.type;n===nh.MARKER?this.m.remove(e)||this.s.remove(e):n===nh.DOM_MARKER?this.S.remove(e)||this.ea.remove(e):n===nh.OVERLAY?this.u.remove(e):this.i.remove(e),delete e.c,delete t.ua}},N.prototype.removeObject=N.prototype.Da,N.prototype.Zh=function(){return 0<this.u.Mc()},N.prototype.providesOverlays=N.prototype.Zh,N.prototype.pd=function(t,e,n){return nk(this,this.u,t,e,n,!1).filter((function(t){return t.Lc()}))},N.prototype.requestOverlays=N.prototype.pd,N.prototype.wc=function(){return 0<this.i.Mc()},N.prototype.providesSpatials=N.prototype.wc,N.prototype.cg=function(t,e,n){return nk(this,this.i,t,e,n,!1)},N.prototype.requestSpatials=N.prototype.cg,N.prototype.dg=function(t,e){return nk(this,this.i,t.Cf(),t.zL,e,!1)},N.prototype.requestSpatialsByTile=N.prototype.dg,N.prototype.Mb=function(){return 0<this.m.Mc()+this.s.Mc()},N.prototype.providesMarkers=N.prototype.Mb,N.prototype.yc=function(t,e,n){return ok(this,t,e,n,!1)},N.prototype.requestMarkers=N.prototype.yc,N.prototype.Lb=function(){return 0<this.S.Mc()+this.ea.Mc()},N.prototype.providesDomMarkers=N.prototype.Lb,N.prototype.xc=function(t,e,n){return pk(this,t,e,n,!1)},N.prototype.requestDomMarkers=N.prototype.xc,N.prototype.Pa=function(t,e,n,r,i){var o=this,a=t.J(),s=[],l=Zb(),u=1;if(a)for(;u&nh.ANY;){if(u&r)switch(u){case nh.MARKER:l=l.then((function(){return ok(o,a,n,e,!0)})).then((function(e){return tk(e,t,s)}));break;case nh.DOM_MARKER:l=l.then((function(){return pk(o,a,n,e,!0)})).then((function(e){return tk(e,t,s)}));break;case nh.SPATIAL:l=l.then((function(){return nk(o,o.i,a,n,e,!0)})).then((function(e){e.forEach(qk.bind(null,t,s))}));break;case nh.OVERLAY:l=l.then((function(){return nk(o,o.u,a,n,e,!0)})).then((function(e){e.forEach(qk.bind(null,t,s))}))}u<<=1}l.then((function(){return i(s)}))},N.prototype.o=function(){N.l.o.call(this),this.f.ma()};var uk={PENDING:0,ACTIVE:1,DONE:2};function vk(t,e){var n;if(e=e||{},!C(t,Element))throw new D(vk,0,t);var r=t.ownerDocument.createElement("div");this.P=t,vk.l.constructor.call(this),this.padding=new wk(0,0,0,0),this.center=new G(0,0),this.margin=0,this.element=r,r.style.zIndex=0,r.style.height=r.style.width="100%",r.style.direction="ltr",r.style.position="relative"===t.style.position?"absolute":"relative",this.resize(),t.appendChild(r),(n=e.padding)!==B&&this.oi(n.top,n.right,n.bottom,n.left),this.ji((n=e.margin)!==B?n:0)}function xk(t){var e=t.padding;t.center.set((t.width+e.left-e.right)/2<<0,(t.height+e.top-e.bottom)/2<<0)}function yk(t,e,n,r,i,o){var a;for(a=[];r<=i;r++)a=a.concat(zk(t,n,r));for(t=a.length,vj.call(this,o,t),this.m=n=[],this.g=A(this.g,this),this.f=A(this.f,this),this.O(1);t--;)o=a[t],n.push(Ak(e,o[0],o[1],o[2],this.g,this.f))}function Bk(t,e){var n=this;if(!Da(e))throw new D(Ck,1,e);if(!Da(t.next||Da(t.cycle)))throw new D(Bk,2,'Argument "mode" must implement H.util.AsyncQueue.Mode');this.b=[],this.c=[],this.g=t,this.i=e,this.j=function(){Dk(n)},this.a=null,this.f=function(){n.a||(n.a=x.setTimeout(n.j,1))}}function Dk(t){var e=t.c,n=0,r=t.g;for(r.a(),t.a=null;n<e.length;){var i=e[n];i.Uj?e.splice(n,1):n++}for(;i=r.next(t.b,t.c);)i.cancelled?i.done(null,"cancelled"):(e.push(i),t.i(i,i.data))}function Fk(){Ek(this,null,null,null)}function Ek(t,e,n,r){return t.data=e,t.cancelled=!1,t.Uj=!1,t.b=n,t.c=r,t.a=null,t}function Gk(){}t("H.map.render.RenderState",uk),u(vk,F),t("H.map.ViewPort",vk),vk.prototype.A={xa:"update",ie:"sync"},vk.prototype.ji=function(t){if(this.margin!==+t){if(E(this.margin=+t))throw new D(this.ji,0,t);xk(this),this.dispatchEvent(this.A.xa)}},vk.prototype.setMargin=vk.prototype.ji,vk.prototype.oi=function(t,e,n,r){var i=this.padding;if(i.top!==t||i.right!==e||i.bottom!==n||i.left!==r){if(E(t+e+n+r))throw new D(this.oi);i.top=t,i.right=e,i.bottom=n,i.left=r,xk(this),this.dispatchEvent(this.A.xa)}},vk.prototype.setPadding=vk.prototype.oi,vk.prototype.resize=function(){var t=this.P.offsetWidth,e=this.P.offsetHeight;this.width===t&&this.height===e||(this.a=new Ui(this.width,this.height),this.width=t,this.height=e,xk(this),this.dispatchEvent(this.A.xa))},vk.prototype.resize=vk.prototype.resize,vk.prototype.Wa=function(t){this.dispatchEvent(new bj(this.A.ie,this.a,t,cj.SIZE))},vk.prototype.synchronize=vk.prototype.Wa,vk.prototype.o=function(){this.P.removeChild(this.element),delete this.P,delete this.element,vk.l.o.call(this)},vk.prototype.gc=Oc,vk.prototype.startInteraction=vk.prototype.gc,vk.prototype.Yb=Oc,vk.prototype.interaction=vk.prototype.Yb,vk.prototype.qb=Oc,vk.prototype.endInteraction=vk.prototype.qb,u(yk,vj),yk.prototype.g=function(){xj(this,2)},yk.prototype.f=function(){xj(this,4)},yk.prototype.ke=function(){for(var t=this.m,e=t.length;e--;)t[e].cancel();delete this.m},t("H.util.AsyncQueue",Bk),Bk.prototype.push=function(t,e){if(!Da(e))throw new D(this.push,1,e);return t=Ek(new Fk,t,this.f,e),this.b.push(t),this.f(),t},Bk.prototype.push=Bk.prototype.push,Bk.Task=Fk,Fk.prototype.done=function(t,e){this.Uj=!0,this.b(),this.c(this,t,e)},Fk.prototype.done=Fk.prototype.done,Fk.prototype.cancel=function(){this.a&&this.a(),this.cancelled=!0},Fk.prototype.cancel=Fk.prototype.cancel,Fk.prototype.fo=function(t){return this.a=t,this},Fk.prototype.setCancelFn=Fk.prototype.fo,Bk.Mode=Gk,Gk.prototype.next=function(){},Gk.prototype.a=function(){};var Hk,Ik=function(){function t(){}for(var e,n,r,i=sc("o ms moz webkit "),o=5;o--&&!e;)e=i[o],e=(n=x[e+(e?"R":"r")+"equestAnimationFrame"])&&!E(n.call(window,t))&&(r=x[e+(e?"C":"c")+"ancelAnimationFrame"]);return Hk=e?function(t){return n.call(x,t)}:function(t){return x.setTimeout(t,25)},e?function(t){return r.call(x,t)}:function(t){return x.clearTimeout(t)}}(),Jk=x.performance&&x.performance.now?function(){return x.performance.now()}:function(){return x.Date.now()};function Kk(t,e){Kk.l.constructor.call(this,new Lk(t),e)}function Lk(t){if(isNaN(t)||0>t)throw new D(Kk,1,'Argument "maxTime" must be a positive number');this.c=t,this.b=Jk()}function Mk(t){if(vc(this,Mk),Mk.l.constructor.call(this,t),t&&"tileSize"in t){var e=Cd(+t.tileSize)/Md;if(isNaN(e)||e%1||0>e||30<e)throw new D(Mk,0,"tileSize: "+t.tileSize);this.tileSize=+t.tileSize}}function Nk(t,e){return Wd(t)-8-yd(Wd(e))}function Ok(){}function Pk(t,e,n){if(this.g=[],e&&this.Yd(e),n&&!Da(n))throw new D(Pk,2,n);this.b=0,this.filter=n,this.a={},this.f=this.c=null,this.li(t)}function Rk(t,e){return e&&(t.c=Sk(t,e,t.c)),e}function Tk(t){for(;t.b>t.i&&t.f;)Uk(t,t.f,!0)}function Sk(t,e,n){return n!==e&&((e.ac||e.Uc)&&Uk(t,e,!1),(e.ac=n)&&(e.Uc=n.Uc,n.Uc=e),e.Uc||(t.c=e),e.ac||(t.f=e),t.b+=e.size),e}function Uk(t,e,n){var r=e.Uc,i=e.ac;(r||i||e==t.c&&e==t.f)&&(r?r.ac=i:t.c=i,i?i.Uc=r:t.f=r,t.b-=e.size,n&&(delete t.a[e.id],Qk(t,e))),e.ac=e.Uc=null}function Qk(t,e){for(var n=t.g.length;n--;)t.g[n].call(t,e.id,e.data,e.size)}function Vk(t,e,n,r){this.key="",this.x=t,this.y=e,this.z=n,this.data=r,this.valid=!0}function Wk(t,e,n,r){return(t-=n)*t+(e-=r)*e}function Xk(t,e,n){return Yk(t,e*e,n||0,0,t.length-1)}function Yk(t,e,n,r,i){var o=0,a=r,s=t[r].x,l=t[r].y,u=t[i].x,c=t[i].y,h=r+1,p=Wk(s,l,u,c);if(p)for(;h<i;){var f=t[h++],d=f.x,y=((d-s)*(u-s)+((f=f.y)-l)*(c-l))/p;(d=0>y?Wk(d,f,s,l):1<y?Wk(d,f,u,c):Wk(d,f,s+y*(u-s),l+y*(c-l)))>o&&(o=d,a=h-1)}else for(;h<i;)(d=Wk(d=(f=t[h++]).x,f=f.y,s,l))>o&&(o=d,a=h-1);return o>=e||0<n&&a-r?(--n,1<a-r?(r=Yk(t,e,n,r,a)).splice(r.length-1,1):r=[t[r]],r=1<i-a?r.concat(Yk(t,e,n,a,i)):r.concat(t.slice(a,i+1))):r=[t[r],t[i]],r}function Zk(t,e,n,r,i,o,a,s){Zk.l.constructor.call(this,e,n,r,null),this.key=t,this.R=s,this.a=i,this.g=o,this.i={},this.zL=a,this.s=Ad(wh.MAX_LINE_WIDTH/2*this.g+1)}function $k(t){return t.R.getInvalidations(nh.SPATIAL)}function al(t){var e,n=$k(t),r=n.a,i=t.c,o=i===r;if(!(o||n.Rj(i)||n.rh(i))){o=t.f;var a=t.i;if(n.Lf(i))for(e=o.length;e--;){var s=o[e];if(s.Gb().Lf(i)){o.splice(e,1);var l=l||bl(t,s.$a())}}if(n.sh(i)){for(e=o.length;e--;)if((s=o[e]).Gb().sh(i)){var u=1;if((s=a[s.$a()])&&s.a){l=1;break}}u&&o.sort(cl)}if(!l&&n.Td(i))for(e=o.length;e--;)if(o[e].Gb().Td(i)){var c=1;break}t.u!==i||c||(t.u=r,t.b!==i||l||(t.b=r)),t.c=r,o=!0}return o}function dl(t,e){this.b=t,this.a=e}function bl(t,e){var n=(t=t.i)[e];if(n)return delete t[e],n.a}function el(t){var e,n=$k(t),r=t.c,i=t.f;if(!al(t)){for(e=i.length;e--;){var o=i[e],a=o.Gb();(a.Lf(r)||a.rh(r))&&bl(t,o.$a())}t.f=t.R.requestSpatialsByTile(t,!1,!1).sort(cl),t.c=n.a}}function cl(t,e){return oh(t.Pc(),e.Pc(),!1)}u(Kk,Bk),t("H.util.SequentialQueue",Kk),Lk.prototype.next=function(t){return t.length&&Jk()-this.b<this.c?t=t.shift():null},Lk.prototype.a=function(){this.b=Jk()},u(Mk,P),t("H.map.provider.TileProvider",Mk),Mk.getZoomLevelOffset=Nk,Mk.prototype.requestTile=Mk.prototype.Qa,Mk.prototype.cancelTile=Mk.prototype.hc,Mk.prototype.cancelTileByKey=Mk.prototype.le,Mk.prototype.createTileInternal=Mk.prototype.Vb,Mk.prototype.hd=function(t,e,n){return this.uri.concat("_",t,"_",e,"_",n)},Mk.prototype.getTileKey=Mk.prototype.hd,Mk.prototype.ff=256,Mk.prototype.tileSize=Mk.prototype.ff,t("H.util.ICache",Ok),Ok.prototype.add=function(){},Ok.prototype.add=Ok.prototype.add,Ok.prototype.get=function(){},Ok.prototype.get=Ok.prototype.get,Ok.prototype.uf=function(){},Ok.prototype.drop=Ok.prototype.uf,Ok.prototype.forEach=function(){},Ok.prototype.forEach=Ok.prototype.forEach,Ok.prototype.ma=function(){},Ok.prototype.removeAll=Ok.prototype.ma,Ok.prototype.Yd=function(){},Ok.prototype.registerOnDrop=Ok.prototype.Yd,Ok.prototype.Og=function(){},Ok.prototype.deRegisterOnDrop=Ok.prototype.Og,t("H.util.Cache",Pk),Pk.prototype.add=function(t,e,n){var r,i;if(!Dc(n=+n)||0>n)throw new D(this.add,2,n);return t=String(t),(i=!this.filter||this.filter(t,e,n))&&((r=this.a[t])?(r.data!==e&&Qk(this,r),this.b+=n-r.size,r.size=n,r.data=e,Rk(this,r)):this.a[t]=Sk(this,{id:t,data:e,size:n,ac:null,Uc:null},this.c),Tk(this)),i},Pk.prototype.add=Pk.prototype.add,Pk.prototype.Yd=function(t){if(!Da(t))throw new D(this.Yd,0,t);this.g.push(t)},Pk.prototype.registerOnDrop=Pk.prototype.Yd,Pk.prototype.Og=function(t){this.g=this.g.filter((function(e){return e!==t}))},Pk.prototype.deRegisterOnDrop=Pk.prototype.Og,Pk.prototype.get=function(t,e){return(t=e?this.a[t]:Rk(this,this.a[t]))&&t.data},Pk.prototype.get=Pk.prototype.get,Pk.prototype.uf=function(t){var e;(e=this.a[t])&&Uk(this,e,!0)},Pk.prototype.drop=Pk.prototype.uf,Pk.prototype.forEach=function(t,e,n){var r;for(r in this.a){var i=this.a[r];(!n||n(r,i.data,i.size))&&t.call(e,r,i.data,i.size)}},Pk.prototype.forEach=Pk.prototype.forEach,Pk.prototype.ma=function(t){var e;for(e in this.a){var n=this.a[e];(!t||t(e,n.data,n.size))&&Uk(this,this.a[e],!0)}},Pk.prototype.removeAll=Pk.prototype.ma,Pk.prototype.li=function(t){if(!(0<+t))throw new D(Pk.prototype.li,0,t);return this.i=+t,Tk(this),this},Pk.prototype.setMaxSize=Pk.prototype.li,Pk.prototype.xm=function(){return this.i},Pk.prototype.getMaxSize=Pk.prototype.xm,Pk.prototype.Yl=function(){return this.b},Pk.prototype.getCurrentSize=Pk.prototype.Yl,t("H.map.provider.Tile",Vk),t("H.math.simplifyDP",Xk),u(Zk,Vk),t("H.map.provider.SpatialTile",Zk),Zk.prototype.c=Vd,Zk.prototype.u=Vd,Zk.prototype.b=Vd,Zk.prototype.Sd=function(){var t=$k(this),e=t.a,n=this.b,r=n===e;return r||(this.R.ua&&!t.Td(n)?r=!0:al(this)&&(r=this.b===e)),r},Zk.prototype.isCanvasValid=Zk.prototype.Sd,Object.defineProperty(Zk.prototype,"valid",{get:function(){return this.Sd()},set:jd,configurable:!0}),Zk.prototype.f=hf,Zk.prototype.Pa=function(){return this.f},Zk.prototype.getObjects=Zk.prototype.Pa,Zk.prototype.Tm=function(){return this.a},Zk.prototype.getTileSize=Zk.prototype.Tm;var fl={};function hl(t,e,n,r,i,o,a,s,l){var u=t.a,c=-a;if(a=o+a,s=s||0,l===B&&(l=u.length),i&&t===Gh)e.fillRect(0,0,o,o);else if(l>s){for(e.beginPath(),o=s;o<l;o++){var h=u[o],p=h.length;if(h===Nh)e.moveTo(c,c),e.lineTo(c,a),e.lineTo(a,a),e.lineTo(a,c);else{var f=h[0];for(e.moveTo(f.x,f.y),s=1;s<p;s++)f=h[s],e.lineTo(f.x,f.y)}n&&e.closePath()}n&&i&&e.fill(t.b!==Ud?"evenodd":"nonzero"),r&&e.stroke()}}function gl(t,e,n){var r;t.strokeStyle=e.strokeColor,t.lineWidth=e.lineWidth*n,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.setLineDash&&(r=e.lineDash)!==hf&&(t.setLineDash(r),t.lineDashOffset=e.lineDashOffset)}function il(t,e){t.fillStyle=e.fillColor}function jl(t,e,n,r,i,o){var a=i*r.width/2,s=(i=i*r.length/2)/2;r=2*i*r.frequency;var l=Dd(Ed(i,2)+Ed(a,2));t=new wk(l,l,t=t.a-l,t),n=n.a;var u,c,h,p,f,d,y,g=Nd/2;for(o=o||0,l=n.length;l-- >o;){var v=0,m=n[l];if(c=u=m.length){var b=m;for(c=b.length,h=0;--c;)h+=b[c].Ta(b[c-1]);c=(b=h)>=r}if(c)for(h=(c=b/((c=wd(zd(b/r),1e3))+1))/2;--u;){for(p=(f=m[u]).Ta(d=m[u-1]);h<=v+p;){var _=f.x+(d.x-f.x)*(y=(h-v)/p);y=f.y+(d.y-f.y)*y,t.qf(_,y)&&(e.save(),e.translate(_,y),e.rotate(-Kd((d.y-f.y)/(f.x-d.x))+(f.x<d.x?g:-g)),e.beginPath(),e.moveTo(-a,-i),e.lineTo(0,i),e.lineTo(a,-i),e.lineTo(0,-s),e.closePath(),e.fill(),e.restore()),h+=c}v+=p}}}Zk.prototype.He=function(){var t=this.a+"_"+this.g,e=fl[t];if(!e){e=-this.s;var n=this.a-e;e=fl[t]=new wk(e,e,n,n)}return e},Zk.prototype.getPxClipRect=Zk.prototype.He,Zk.prototype.Cf=function(){var t=this.Xa;if(!t){var e=this.Ef();t=0;var n=this.a;this.z&&(n-=t+=this.He().top),t=this.Xa=sg(e.Ne(new G(t,t)),e.Ne(new G(n,n)))}return t},Zk.prototype.getGeoClipRect=Zk.prototype.Cf,Zk.prototype.Ef=function(){var t=this.v;if(!t){var e=this.a;(t=this.v=new lj(B,e)).Ka(this.z),t.x=this.x*e,t.y=this.y*e}return t},Zk.prototype.getPxProj=Zk.prototype.Ef,Zk.prototype.Ua=function(){return this.g},Zk.prototype.getPixelRatio=Zk.prototype.Ua,Zk.prototype.Zf=function(){var t=this.data;return t&&(this.data=null,this.b=Vd),t},Zk.prototype.releaseCanvas=Zk.prototype.Zf,Zk.prototype.$f=function(){this.i={},delete this.f,this.c=Vd},Zk.prototype.releaseData=Zk.prototype.$f,Zk.prototype.T=function(t){var e,n,r,i,o=t.getContext("2d"),a=0;if(el(this),this.b<this.c){var s=this.f;if(e=s.length){t.width=t.height=this.a,o.clearRect(0,0,this.a,this.a);var l=this.i;for(n=0;n<e;n++){var u=s[n],c=u.$a();if(i=(r=l[c])?r.b:u.getGeometriesForTile(this)){if(r)u.Gb().Td(this.b)&&(r.a=Fh(u,i)),r=r.a;else{var h;r=Fh(u,i);for(var p=i,f=u.g?2:0,d=p.length;d--;){var y=p[d];if(y!==Gh){var g=y.a;for(h=g.length;h--;)4<(y=g[h]).length&&(g[h]=Xk(y,.6,f))}}this.i[c]=new dl(i,r)}if(r){for(o.save(),p=u.g?this.B:this.S,c=0;c<i.length;c++)p.call(this,u,i[c],u.$(),o);if(i=u.getLabels(this))for(u=o,c=i.length;c--;)for(p=(f=i[c]).size,u.font=p+"px "+f.font,u.fillStyle=f.color,u.textAlign="center",u.translate(f.x,f.y),u.rotate(f.angle),p=f.lineHeight||1.375*p,f=(d=f.lines).length;f--;)u.fillText(d[f],0,f*p);o.restore()}a|=+r}}}this.data=a?t:null,this.u=this.b=this.c}else this.data&&(a=1);return 0<a},Zk.prototype.render=Zk.prototype.T,Zk.prototype.data=null,Zk.prototype.S=function(t,e,n,r){var i;n.b&&(gl(r,n,this.g),hl(e,r,!1,!0,!1,this.a,this.s)),n.a&&(i=t.c)&&i.Jb&&(il(r,i),jl(this,r,e,i,n.lineWidth))},Zk.prototype.B=function(t,e,n,r){var i,o=n.Jb,a=n.b,s=this.a,l=this.s;if(e===Gh)o&&(il(r,n),r.fillRect(0,0,s,s));else{if(a&&gl(r,n,this.g),n.a&&(i=t.c)){var u=n.lineWidth;i.Jb||(i=null)}(t=e.c)===Ud?((a||o)&&(il(r,n),hl(e,r,!0,a,o,s,this.s)),i&&(il(r,i),jl(this,r,e,i,u,0))):(o&&(il(r,n),hl(e,r,!0,!1,o,s,l,0,t)),a&&hl(e,r,!1,a,!1,s,l,t),i&&(il(r,i),jl(this,r,e,i,u,t)))}};var kl=[];function ll(t,e){var n;ll.l.constructor.call(this,e),this.v=t,this.S=t=e.pixelRatio,this.tileSize=n=1<<yd(Wd((e.tileSize||256)*t)),this.K=Nk(n,t),this.zh=A(this.zh,this),this.Ph=A(this.Ph,this),this.Ah=A(this.Ah,this),this.yh=A(this.yh,this),this.s=A(this.s,this),this.v.addEventListener(P.prototype.A.xa,this.s,!1,this),this.f=[],this.i=new Pk(e.tileCacheSize||256,this.zh),this.m=new Pk(e.dataCacheSize||512,this.Ph),this.B=new Kk(20,this.Ah),this.c={},this.u=Jk()}function wk(t,e,n,r){this.left=+t,this.top=+e,this.right=+n,this.bottom=+r}function ml(t,e){return new wk(t.x,t.y,e.x,e.y)}function nl(t,e){if(e=e||{},!t)throw new D(nl,0,t);this.tileSize=t.tileSize,this.a={},oj.call(this,{min:void 0!==e.min?e.min:t.min,max:void 0!==e.max?e.max:t.max,minWorldSize:this.tileSize,projection:e.Xf,dark:e.dark,provider:t})}function ol(t,e,n,r,i){r=zd(r);var o=Ed(2,r),a=e.left,s=e.top,l=e.right;n=l+(n?o+(l===e.left?0:1):1);var u=e.bottom,c=[];if(i)var h=a+(1+l-a)/2+i.x/t.tileSize-.5,p=s+(1+u-s)/2+i.y/t.tileSize-.5;for(;a<n;){for(s=e.top;s<=u;)t=a%o,c.push([t,s,r,i?Bd(h-a)+Bd(p-s):0]),s++;a++}return c}function zk(t,e,n){n=zd(n),t.pixelProjection.Ka(n),e=t.we(e);var r=t.Qd(e,n);return ol(t,r,e.left>e.right,n)}function pl(t,e){return e[3]-t[3]}function ql(t,e){nl.call(this,t,e)}function rl(t,e){(e=e?Wa(e):{}).tileSize=e.tileSize||256,e.pixelRatio=e.pixelRatio||Te(),e.max=24,this.a=new ll(t,e),this.b=new ql(this.a),e.minWorldSize=this.a.tileSize,e.provider=t,rl.l.constructor.call(this,e),this.tileSize=this.b.tileSize,this.c=A(this.c,this),this.a.addEventListener(this.a.A.xa,this.c),t.addEventListener(t.A.xa,this.c)}Zk.prototype.Ba=function(t,e,n){for(var r,i,o,a,s,l,u,c=this.f,h=c.length,p=hf,f=this.g;h--;)if((i=c[h]).qc(!0)&&(o=this.i[i.$a()])&&(a=o.b)){for(l="none"!==(r=i.$()).fillColor&&i.g,u="none"===r.strokeColor?0:r.lineWidth*f,r=a.length;r--;){var d;if(s=a[r],!(d=l&&s===Gh)&&(d=l||u)){var y;d=t;var g=e,v=l,m=u,b=s.b,_=s.c,w=_!==Ud,x=s.a,k=x.length,E=0,T=0,A=!1;for(s=0;s<k;s++){var S=x[s],M=s>=_,I=!M&&s>=b;if(S===Nh&&v)I?E++:T++;else{var O=S.length;for(kl.length=2*O,y=0;y<O;y++){var C=S[y];kl[2*y]=C.x,kl[2*y+1]=C.y}if(y=v&&!M,M=w&&!M?0:m,y||M){if((M=ce(d,g,kl,M,y))===be.EDGE||M===be.VERTEX){A=!0;break}if(M===be.SURFACE)if(I)E++;else if(T++,b===Ud)break}}}d=A||0<T&&!(E%2)}if(d){p===hf&&(p=[]),p.push(i);break}}if(n&&p.length)break}return p},u(ll,Mk),ll.prototype.s=function(t){(t=t.target).type===nh.SPATIAL&&this.Sa(t)},ll.prototype.Qa=function(t,e,n,r){var i,o=this.getTileKey(t,e,n);if(i=this.i.get(o,r)){if(r||i.Sd())return i;r||this.i.uf(o)}if((i=this.m.get(o,r))&&(r||al(i)))return t=this.f.pop()||document.createElement("canvas"),i.T(t)||this.f.push(t),this.i.add(o,i,1),i;r||((i=this.c[o])?i.count++:((i=this.B.push([o,t,e,n],this.yh)).count=1,this.c[o]=i))},ll.prototype.requestTile=ll.prototype.Qa,ll.prototype.Vb=function(){},ll.prototype.createTileInternal=ll.prototype.Vb,ll.prototype.hc=function(t,e,n){this.le(this.getTileKey(t,e,n))},ll.prototype.cancelTile=ll.prototype.hc,ll.prototype.le=function(t){var e;(e=this.c[t])&&(e.count--,e.count||(e.cancel(),delete this.c[t]))},ll.prototype.cancelTileByKey=ll.prototype.le,p=ll.prototype,p.Ah=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];r=(n=this.i.get(n)||new Zk(n,r,i,o,this.tileSize,this.S,o+this.K,this.v)).data||this.f.pop()||document.createElement("canvas"),n.T(r)||this.f.push(r),e.push(n),t.done(n)},p.yh=function(t,e){t=t.data[0],e&&this.i.add(t,e,1),delete this.c[t],this.Sa()},p.zh=function(t,e){e.data&&this.f.push(e.Zf()),this.m.add(t,e,1)},p.Ph=function(t,e){e.$f()},p.o=function(){for(var t in this.c)this.c[t].cancel();this.i.ma(),this.m.ma(),this.f.length=0,ll.l.o.call(this)},t("H.math.Rect",wk),wk.prototype.set=wk,wk.prototype.set=wk.prototype.set,wk.prototype.Ib=function(){return this.b||(this.b=new G(this.left,this.top))},wk.prototype.getTopLeft=wk.prototype.Ib,wk.prototype.Eb=function(){return this.a||(this.a=new G(this.right,this.bottom))},wk.prototype.getBottomRight=wk.prototype.Eb,wk.prototype.qf=function(t,e){return this.left<=t&&this.right>=t&&this.top<=e&&this.bottom>=e},wk.prototype.containsXY=wk.prototype.qf,wk.fromPoints=ml,wk.prototype.clone=function(){return new wk(this.left,this.top,this.right,this.bottom)},wk.prototype.clone=wk.prototype.clone,u(nl,oj),t("H.map.layer.BaseTileLayer",nl),nl.prototype.we=function(t,e){var n=this.pixelProjection;if(!C(t,K))throw new D(this.we,0,t);if(!E(e)){var r=n.Jj();n.Ka(e)}return t=ml(n.fb(t.Ib()),n.fb(t.Eb())),!E(r)&&n.Ka(r),t},nl.prototype.geoRectToRect=nl.prototype.we,nl.prototype.Qd=function(t,e){var n=Ed(2,zd(e)),r=this.tileSize;if(!C(t,wk))throw new D(this.Qd,0,t);if(E(e=+e))throw new D(this.Qd,1,e);(e=zd(t.left/r))===n&&--e;var i=zd(t.right/r);return i===n&&--i,new wk(e,Zd(zd(t.top/r),0,n-1),i,Zd(zd(t.bottom/r),0,n-1))},nl.prototype.getTileBounds=nl.prototype.Qd,nl.prototype.Qa=function(t,e,n,r){return this.la.requestTile(t,e,n,r)},nl.prototype.requestTile=nl.prototype.Qa,nl.prototype.hc=function(t,e,n){this.la.cancelTile(t,e,n)},nl.prototype.cancelTile=nl.prototype.hc,nl.prototype.ca=function(t,e){return this.la.getCopyrights?this.la.getCopyrights(t,e):null},nl.prototype.getCopyrights=nl.prototype.ca,nl.prototype.Ge=function(t,e,n,r,i,o){var a,s,l=[],u=this.la;o=null!=o?o:"__default__";var c=u.requestTile;if(!C(t,wk))throw new D(this.Ge,0,t);if(E(n=+n))throw new D(this.Ge,1,n);if(r||(a={}),t=(e=ol(this,t,e,n,i)).length)for(r||e.sort(pl),n=t;n--;)i=e[n],r||(a[u.hd.apply(u,i)]=!0),i[3]=+r,(s=c.apply(u,i))&&l.push(s);if(!r){var h;for(h in r=a,a=this.a[o]||{})a.hasOwnProperty(h)&&a[h]&&!r[h]&&this.la.cancelTileByKey(h);this.a[o]=r}return{total:t,tiles:l}},nl.prototype.getProviderTiles=nl.prototype.Ge,u(ql,nl),t("H.map.layer.TileLayer",ql),ql.prototype.qd=function(t,e,n,r,i){if(!C(t,K))throw new D(this.qd,0,t);if(E(e=+e))throw new D(this.qd,1,e);e=zd(e),this.pixelProjection.Ka(e),t=this.we(t);var o=this.Qd(t,e);return this.Ge(o,t.left>t.right,e,n,r,i)},ql.prototype.requestTiles=ql.prototype.qd,u(rl,oj),t("H.map.layer.ObjectLayer",rl),rl.prototype.c=function(t){t.currentTarget!==this.a&&t.target.type===nh.SPATIAL||this.Sa()};var sl={markers:hf,total:0};rl.prototype.yc=function(t,e,n){var r,i=this.la;return i.providesMarkers()&&(r=i.requestMarkers(t,e,!0,n)).length?{markers:r,total:r.length}:sl},rl.prototype.requestMarkers=rl.prototype.yc,rl.prototype.xc=function(t,e,n){var r,i=this.la;return i.providesDomMarkers()&&(r=i.requestDomMarkers(t,e,!0,n)).length?{markers:r,total:r.length}:sl},rl.prototype.requestDomMarkers=rl.prototype.xc;var tl={tiles:hf,total:0};rl.prototype.qd=function(t,e,n,r){if(this.la.providesSpatials()){var i=this.b.qd(t,e,n,r);n||(n=this.a,33<(i=Jk())-n.u&&(Dk(n.B),n.u=i),i=this.b.qd(t,e,!0,r))}else i=tl;return i},rl.prototype.requestTiles=rl.prototype.qd,rl.prototype.Qa=function(t,e,n,r){return this.b.Qa(t,e,n,r)},rl.prototype.requestTile=rl.prototype.Qa,rl.prototype.hc=function(t,e,n){this.b.hc(t,e,n)},rl.prototype.cancelTile=rl.prototype.hc;var ul={overlays:hf,total:0};function T(t){vc(this,T),T.l.constructor.call(this,t),this.Rb=new vl,this.Tb=A(this.Tb,this),this.S=wl,this.createTileInternal=this.Vb.bind(this)}rl.prototype.pd=function(t,e,n){var r=this.la,i=ul;return r.providesOverlays&&r.providesOverlays()&&(e=(t=r.requestOverlays(t,e,!0,n)).length)&&(i={overlays:t,total:e}),i},rl.prototype.requestOverlays=rl.prototype.pd,rl.prototype.o=function(){this.a.D(),this.b.D(),this.la.dispose(),rl.l.o.call(this)},u(T,Mk),t("H.map.provider.RemoteTileProvider",T),T.prototype.Gd=function(){return 1},T.prototype.getEntryWeight=T.prototype.Gd;var wl=new Pk(65536),xl={},yl={};function Ak(t,e,n,r,i,o){return r=~~r,t.requestInternal(e,n,r,(function(a,s){t.f().put(t.hd(e,n,r),{raw:s&&s.raw||a,timestamp:x.Date.now()},i,o)}),o,0)}function Al(t){delete xl[t],delete yl[t]}function zl(t){for(var e in xl)t.Tb(e)&&t.cancelTileByKey(e)}T.prototype.Fb=function(){return this.S},T.prototype.getCache=T.prototype.Fb,T.prototype.s=ba(3),T.prototype.Tb=function(t){var e=this.uri;return!t.indexOf(e)&&"_"===t.charAt(e.length)},T.prototype.cacheFilter=T.prototype.Tb,T.prototype.oa=function(t,e){e.valid=!1},T.prototype.reload=function(t){var e=this.getCache();t?e.ma(this.Tb):e.forEach(this.oa,this,this.Tb),zl(this),this.Sa(this,{isReload:!0})},T.prototype.reload=T.prototype.reload,T.prototype.m=function(){return!1},T.prototype.MAX_STORE_TIME=1/0,T.prototype.f=function(){return this.Rb},T.prototype.ea=function(t,e){e(t)},T.prototype.requestInternal=T.prototype.G,T.prototype.Qa=function(t,e,n,r){var i=this,o=this.getCache();if(E(t=+t))throw new D(this.Qa,0,t);if(E(e=+e))throw new D(this.Qa,0,e);if(E(n=+n))throw new D(this.Qa,0,n);n=~~n;var a=this.getTileKey(t,e,n);return(o=o.get(a))&&o.valid||r||xl[a]||(o=B,this.requestTileAsPromise(t,e,n,r).then((function(t){i.Sa(t)}),jd)),o},T.prototype.requestTile=T.prototype.Qa,T.prototype.Ik=function(t,e,n,r){var i,o,a=this,s=this.getCache(),l=this.getTileKey(t,e,n),u=this.f();return yl[l]?yl[l]:(yl[l]=i=new Qb((function(i,c){function h(o){var h,p=0,f=function(r,o){(h=a.createTileInternal(t,e,n,r,o)).key=l,s.add(l,h,a.Gd(r)),i(h),Al(l)};o&&(p=x.Date.now()-o.timestamp),o&&p<a.MAX_STORE_TIME?a.ea(o.raw,f):(0<p&&u.remove(l),(h=s.get(l))&&h.valid||r?i(h||null):xl[l]=a.requestInternal(t,e,n,f,c))}o=u.get(l,h,h)})),xl[l]||(xl[l]=o),i.then((function(){Al(l)}),(function(){Al(l)})),i)},T.prototype.requestTileAsPromise=T.prototype.Ik,T.prototype.Hk=function(t,e){var n=this,r=t.id,i=t.tile.coords;return new Qb((function(t,o){n.Ik(i.x,i.y,i.z,e).then((function(e){for(var n,i=y,o=(e=e.Pa?e.Pa():e.data).length;o--;)if((n=e[o]).$a()===r){i=n;break}t(i)}),o)}))},T.prototype.requestObjectAsPromise=T.prototype.Hk;var Bl={cancel:jd};function vl(){}function Ck(t){var e;(Ck.l.constructor.call(this,t),t&&(this.v={crossOrigin:t.crossOrigin||"anonymous",headers:t.headers||{}},this.u=t.getURL),this.a===ik.HARP&&H.map.render.harp)&&(e=t&&t.style&&t.style instanceof H.map.render.harp.Style?t.style:new H.map.render.harp.Style({styles:[{technique:"raster",attr:{gamma:1,brightness:1}}]}),this.lb(e));if(!Da(this.u))throw new D(Ck,0,"getURL");if(jk(this,t.opacity),this.c=x.URL||x.webkitURL,!(t="anonymous"===(t=this.v.crossOrigin)||"use-credentials"===t)){t=this.u(0,0,0),e=window.location;var n=document.createElement("a");n.href=t,t=n.hostname===e.hostname&&n.port===e.port&&n.protocol===e.protocol}(this.K=t&&!!uf.arraybuffer&&!!this.c)&&this.Fb().Yd(A(this.Y,this))}T.prototype.Vb=function(t,e,n,r){return new Vk(t,e,n,r)},T.prototype.createTileInternal=T.prototype.Vb,T.prototype.le=function(t){var e=xl[t];e&&(e.cancel(),Al(t))},T.prototype.cancelTileByKey=T.prototype.le,T.prototype.hc=function(t,e,n){this.cancelTileByKey(this.getTileKey(t,e,n))},T.prototype.cancelTile=T.prototype.hc,T.prototype.o=function(){T.l.o.call(this),this.getCache().ma(this.Tb),zl(this)},T.NullStorage=vl,vl.prototype.get=function(t,e){return e(),Bl},vl.prototype.get=vl.prototype.get,vl.prototype.put=function(t,e,n){n&&n()},vl.prototype.put=vl.prototype.put,vl.prototype.clear=function(t){t&&t()},vl.prototype.clear=vl.prototype.clear,vl.prototype.remove=function(t,e){e&&e()},vl.prototype.remove=vl.prototype.remove,u(Ck,T),t("H.map.provider.ImageTileProvider",Ck),Ck.prototype.dc=function(t){jk(this,t)},Ck.prototype.setOpacity=Ck.prototype.dc,Ck.prototype.Oc=function(){return this.g},Ck.prototype.getOpacity=Ck.prototype.Oc,Ck.prototype.Re=ff,Ck.prototype.providesRasters=Ck.prototype.Re,Ck.prototype.Gd=function(){return this.tileSize},Ck.prototype.getEntryWeight=Ck.prototype.Gd,Ck.prototype.G=function(t,e,n,r,i,o){var a,s=this,l=this.u(t,e,n);if(t=Bl,l){var u=x.setTimeout((function(){s.K?(a=new tf("arraybuffer",l,o,s.v)).then((function(t){return t.blob()})).then((function(t){var e=new Image;e.onload=A(r,null,e,{raw:t}),e.onerror=A(i,null,"bad url");try{e.src=s.c.createObjectURL(t)}catch(n){}}),i):(a=new tf("image",l,o,s.v)).then(r,i)}),150);t={cancel:function(){a?a.cancel():x.clearTimeout(u)}}}else r(null);return t},Ck.prototype.requestInternal=Ck.prototype.G,Ck.prototype.ea=function(t,e){var n=new Image;n.onload=function(){e(this)},n.src=this.c.createObjectURL(t)},Ck.prototype.Y=function(t,e){(t=e.data)&&t instanceof HTMLImageElement&&this.c.revokeObjectURL(t.src)},Ck.prototype.$=function(){return this.ab()},Ck.prototype.getStyle=Ck.prototype.$,Ck.prototype.xb=function(t){H.map.render.harp&&this.a===ik.HARP&&t instanceof H.map.render.harp.Style&&this.lb(t)},Ck.prototype.setStyle=Ck.prototype.xb,t("H.util.events.listenOnce",Ee),t("H.util.events.dispatchEvent",(function(t,e){return t.dispatchEvent(e)})),t("H.util.events.fireListeners",(function(t,e,n,r){return ne(t)?t.ed(e,n,r):Ne(t,e,n,r)})),t("H.util.events.listen",De),t("H.util.events.unlisten",Le);var Cl=Oe;function Dl(t,e,n,r){var i=new wk(0,0,0,0);if(Dl.l.constructor.call(this),!t)throw new D(Dl,0,t);if(!e)throw new D(Dl,1,e);if(!n)throw new D(Dl,2,n);if("object"!==typeof r)throw new D(Dl,3,r+" is not an object");if("number"!==typeof r.pixelRatio)throw new D(Dl,3,r.pixelRatio+" is not a number");this.na=r.pixelRatio,this.zoom=0,this.cb=Cd(this.na)/Md,this.b=new lj,this.ua={1:i.clone(),2:i.clone(),4:i.clone()},this.m=new G(.5,.5),this.f=t,El(this,this.na),this.gc=A(this.gc,this),this.Yb=A(this.Yb,this),this.qb=A(this.qb,this),t.startInteraction=this.gc,t.interaction=this.Yb,t.endInteraction=this.qb,t.addEventListener(t.A.xa,this.ea,!1,this),this.getCapabilities=this.getCapabilities,this.capture=this.capture,this.zoomAt=this.ud,this.relaunch=this.fa,this.dispose=this.D,this.screenToGeo=this.Ra,this.geoToScreen=this.Aa,this.screenToLookAtData=this.hg,this.v=e,this.fc=A(this.fc,this),this.control=A(this.control,this),this.pb=A(this.pb,this),e.startControl=this.fc,e.control=this.control,e.endControl=this.pb,e.addEventListener(e.A.xa,this.Gg,!1,this),this.c=n,this.Rf=A(this.Rf,this),this.Ie=A(this.Ie,this),this.Je=A(this.Je,this),this.Qf=A(this.Qf,this),n.addEventListener(oj.prototype.A.xa,this.Rf,!1,this),n.addEventListener(n.A.ee,this.Ie,!1,this),n.addEventListener(n.A.ge,this.Je,!1,this),n.addEventListener(n.A.he,this.Qf,!1,this)}function El(t,e){var n=t.f,r=n.width,i=n.height,o=n.padding,a=o.top,s=o.left,l=o.bottom;o=o.right,n=n.margin;var u=-(r+s-o)/2<<0,c=-(i+a-l)/2<<0;r+=u,i+=c,(t=t.ua)[1].set((u-n)*e,(c-n)*e,(r+n)*e,(i+n)*e),t[2].set(u*e,c*e,r*e,i*e),t[4].set((u+s)*e,(c+a)*e,(r-o)*e,(i-l)*e)}function Gl(t,e){t.style.transition="opacity 1.5s",Ee(t,"transitionend",e,!1),t.style.opacity=0}Oe=function(t,e){var n,r,i=!0,o=e[e.currentTarget===e.target?"AT_TARGET":t.capture?"CAPTURING_PHASE":(n=!0,"BUBBLING_PHASE")];return(!n||"pointerenter"!==(r=e.type)&&"pointerleave"!==r)&&(e.eventPhase=o,i=Cl(t,e),n&&t.src&&t.src.Hb&&null===t.src.Hb()&&delete e.eventPhase),i},u(Dl,F),t("H.map.render.RenderEngine",Dl),Dl.prototype.ud=function(){},Dl.prototype.ea=function(){El(this,this.na)},Dl.prototype.o=function(){var t=this.f,e=this.v,n=this.c;t.removeEventListener(t.A.xa,this.ea,!1,this),t.startInteraction===this.gc&&(t.startInteraction=vk.prototype.gc),t.interaction===this.Yb&&(t.interaction=vk.prototype.Yb),t.endInteraction===this.qb&&(t.endInteraction=vk.prototype.qb),e.removeEventListener(e.A.xa,this.Gg,!1,this),e.startControl===this.fc&&(e.startControl=Fl.prototype.fc),e.control===this.control&&(e.control=Fl.prototype.control),e.endControl===this.pb&&(e.endControl=Fl.prototype.pb),n.removeEventListener(oj.prototype.A.xa,this.Rf,!1,this),n.removeEventListener(n.A.ee,this.Ie,!1,this),n.removeEventListener(n.A.ge,this.Je,!1,this),n.removeEventListener(n.A.he,this.Qf,!1,this)},Dl.prototype.fi=function(t){this.wg=t},Dl.prototype.setAnimationCallback=Dl.prototype.fi,Dl.prototype.ai=function(){this.wg=void 0},Dl.prototype.resetAnimationCallback=Dl.prototype.ai,Dl.prototype.control=function(){},Dl.prototype.capture=function(){return $b(Error("not implemented"))};var Hl={ZOOM:1,HEADING:2,TILT:4,INCLINE:8,COORD:16};function Kl(t,e){return e.tilt=Ll(t,e.tilt),e.heading=Ml(t,e.heading),e.incline=t.getCapabilities().lookAt.incline.min,e}function Jl(t,e){var n=t.getCapabilities().lookAt.zoom;return Zd(e,xd(n.min,t.yg),wd(n.max,t.xg))}function Ll(t,e){return Zd(e,(t=t.getCapabilities().lookAt.tilt).min,t.max)}function Ml(t,e){return Zd((e%360+360)%360,(t=t.getCapabilities().lookAt.heading).min,t.max)}function Il(t,e,n){(n=n?e.addEventListener:e.removeEventListener).call(e,e.A.Mi,t.Rh,!1,t),n.call(e,e.A.Li,t.Rh,!1,t)}Dl.InteractionModifiers=Hl,p=Dl.prototype,p.A={Oi:"render"},p.Rf=function(t){this.qk(t),this.fa()},p.Ie=function(t){this.Le(t.idx,t.added)},p.Je=function(t){this.Qh(t.idx,t.removed,t.type===this.c.A.he)},p.Qf=function(t){t.removed&&this.Je(t),this.Ie(t)},p.qk=jd,p.Le=function(t,e){this.mh(t,e),0===t&&this.zb(),C(e,oj)&&Il(this,e,!0),this.$d(),this.fa()},p.zb=function(){var t=this.c.Ha();if(0<t.length){var e=t[0].max;this.yg=t[0].min,this.xg=e}else e=(t=this.getCapabilities().lookAt.zoom).max,this.yg=t.min,this.xg=e;(t=Jl(this,this.zoom))!==this.zoom&&(this.zoom=t,this.b.Ka(t),this.Wa())},p.Wa=function(t){this.S=this.gb(),t&&(this.S.position=t),this.S.zoom=this.zoom-this.cb,this.S.position.alt=0},p.fl=0,p.heading=180,p.gb=function(){return Kl(this,{position:this.b.projection.Wf(this.m),zoom:this.zoom,tilt:this.fl,heading:this.heading})},p.mh=jd,p.Qh=jd,p.ho=function(t,e){this.B={before:t,after:e}},Dl.prototype.setOnRenderCallbacks=Dl.prototype.ho;var Nl={P2D:0,WEBGL:1,HARP:2};Dl.EngineType=Nl;var Ol={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:85},incline:{min:0,max:0},heading:{min:0,max:360}},interaction:{ZOOM:Hl.ZOOM,COORD:Hl.COORD},capture:!0};function Pl(t){var e,n=this,r=x.H.gl;Pl.l.constructor.call(this),this.a=e=r.Scene.create(x.URL.createObjectURL(pf(JSON.stringify(Ql))),{viewport:t.viewport,container:t.Ub,disableRenderLoop:!0,devicePixelRatio:t.devicePixelRatio,logLevel:"error"}),t.Pn&&e.subscribe({load:t.Pn}),e.subscribe({view_complete:function(){n.ci=!0,t.sk()}});var i=e.requestRedraw;e.requestRedraw=function(){i.apply(e),t.sk()},this.di=A(this.di,this),this.bg=A(this.bg,this),this.f=0,this.c={},this.b={}}function Rl(t){var e;for(e in t=t.a.sources){var n=t[e];if(n.hasPendingCommands&&n.hasPendingCommands())return!0}return x.H.gl.Task.hasPendingTasks()}function Sl(t){t.ci=!1,t.a.resetViewComplete()}function Tl(t){return t.a.view}function Ul(t,e){function n(){var n,i,o,a,s,l=e.Ha(),u={},c={},h=++t.f;for(Xh(c,Ql),i=0;i<l.length;i++){var p=l[i];if(n=p.ka()){var f=n.ab();if(f.getState()===Uh.READY){var d=f.lc();if(!Va(d)){for(o in delete d.cameras,delete d.camera,u[i]=d=ii(d,i),!C(p,rl)&&d.sources&&ji(d,n.uid),d.sources){var g=d.sources[o];g.max_zoom=wd(n.max,Ol.lookAt.zoom.max),g.max_display_zoom=p.max,g.min_display_zoom=p.min,(s=n.tileSize)&&(2<=r&&256<s&&n instanceof Ck&&(s/=2),g.tile_size=s)}(a=f.Db())&&ki(d,a),Xh(c,d)}}}}return Xh(c.layers.skybox.draw.skybox.color,c.scene.sky),t.a.config=c,t.a.updateConfig().then((function(){var e,n,r={};if(h!==t.f)return!1;for(n in t.f=0,u){p=l[+n];var i=u[n].sources;for(e in i)(i=t.a.sources[e])&&(r[e]=i,i.initialize&&p.getProvider()&&i.initialize(p.getProvider(),t.di,t.a.getWorkers().length,i.tiled?B:t.a.tile_manager.getWorkerForTile(y,i)))}for(e in t.c)!r[e]&&t.c[e].dispose&&t.c[e].dispose();return t.c=r,!0}))}var r=t.a.pixelRatio();t.a.initialized?n():t.a.load(y,{blocking:!1}).then(n)}function Vl(t,e){var n=t.a.tile_manager;n.removeTiles(t.bg),n.updateTilesForView(),e&&n.removeCachedTiles(t.bg),Sl(t),t.b={}}function Wl(t,e,n,r){t.a.getFeatureAt(e,n,r),t.a.update()}function Xl(t){return t.a.screenshot(void 0).then((function(t){return new Qb((function(e,n){new Pj(URL.createObjectURL(t.blob),(function(t,r){1===t?e(r.getData()):n()}),!1)}))}))}t("H.map.render.webgl.capabilities",Ol),u(Pl,nd),p=Pl.prototype,p.ci=!1,p.T=function(){var t=x.H.gl.Task;return this.a.immediateRedraw(),t.setState({user_moving_view:this.a.view.user_input_active}),t.processAll(),this.ci&&!this.a.dirty&&!this.a.building&&!Rl(this)&&!Object.keys(this.b).length},p.di=function(t,e,n){var r=this,i=this.a.sources[t],o=n&&n.isReload;e?!0!==this.b[t]&&(this.b[t]||(this.b[t]={el:{},Ui:[]}),C(e,Vk)?this.b[t].el[e.x+"/"+e.y+"/"+e.z]=!0:(e=e.boundingBox,this.b[t].Ui.push(new K(e[0],e[1],e[2],e[3])))):this.b[t]=!0,i&&i.has_volatile_data?Vl(this,o):(x.clearTimeout(this.g),this.g=x.setTimeout((function(){return Vl(r,o)}),100))},p.bg=function(t){var e=!1,n=this.b[t.source.name],r=x.H.gl;if(n)if(!0===n)e=!0;else{var i=r.Tile.coord(r.Geo.wrapTile(t.coords));if(!(e=!!n.el[i.key])){var o=r.Geo.getTileBoundingBox(i,t.source.tile_size,wh.MAX_LINE_WIDTH/2);o=sg(o.getTopLeft(),o.getBottomRight()),e=n.Ui.some((function(t){return t.jd(o,!0)||o.bd(t.Za(),!0)}))}}return e},p.lc=function(){return this.a.config},p.Ua=function(){return this.a.pixelRatio()},p.o=function(){var t=this.c;Pl.l.o.call(this),this.a.destroy(),this.b={},t&&Object.keys(t).forEach((function(e){t[e].dispose()})),x.clearTimeout(this.g),delete this.c,delete this.a},Pl.prototype.disposeInternal=Pl.prototype.o;var Ql={scene:{background:{color:"#FFFFFF"},sky:{zenith:"#347BC0",horizon:"#EDF2F9",fog:"#FFFFFF"}},lights:{default_light:{type:"directional",name:"default_light",visible:!0}},camera:{type:"perspective"},styles:{},fonts:{},sources:{skybox:{type:"SkyBox"}},layers:{skybox:{data:{source:"skybox"},draw:{skybox:{color:{}}}}},global:{}},lk={FEATURE:1,SOURCE:2,PROVIDER:3};function Yl(t){return t}function Zl(t){return-t*(t-2)}function $l(t){return 1-Math.sqrt(1-t*t)}function am(t){return Dd(2*t-t*t)}function bm(t){return 1-Math.cos(t*Math.PI/2)}function cm(t){return Math.sin(t*Math.PI/2)}function dm(t,e){this.a={tilt:em(t.tilt,e.tilt),heading:em(t.heading,e.heading),zoom:e.zoom-t.zoom};var n=this.b=ng(t.position),r=e.position;t=r.lat*Sd;var i=n.lat*Sd;r=r.lng*Sd-n.lng*Sd,n=Gd(r)*Id(t),t=Id(i)*Gd(t)-Gd(i)*Id(t)*Id(r),t=Math.atan2(n,t),this.i=(0<=t?t:Qd+t)*Td,this.c=this.b.Ta(e.position),e=this.a.zoom,this.g=0===e?fm:Object.assign({},fm,{zoom:0>e?am:$l,position:0>e?bm:cm}),this.f=Object.assign({},{tilt:0,heading:0,zoom:0})}function em(t,e){return-180<(t=e-t)&&180>=t?t:180<t?t-360:t+360}t("H.map.provider.PickingMode",lk),t("H.util.animation.ease.LINEAR",Yl),t("H.util.animation.ease.EASE_IN_QUAD",(function(t){return t*t})),t("H.util.animation.ease.EASE_OUT_QUAD",Zl),t("H.util.animation.ease.EASE_IN_OUT_QUINT",(function(t){return 1>(t*=2)?Ed(t,5)/2:Ed(t-=2,5)/2+1})),t("H.util.animation.ease.EASE_OUT_CIRC",am);var fm={tilt:Yl,heading:Yl,zoom:Yl,position:Yl};function gm(t,e){if(E(this.x=+t))throw new D(gm,0,t);if(E(this.y=+e))throw new D(gm,1,e)}function hm(t){return Dd(t.a(t))}function im(t){t=t||jf,this.Xa=uc(t.Kn)?t.Kn:3,this.R=uc(t.In)?t.In:300,this.u=uc(t.wo)?t.wo:3,this.v=uc(t.ro)?t.ro:50,this.c=[],this.clear()}function lm(t,e){t.g^=t.g&e}gm.prototype.add=function(t){return new gm(this.x+t.x,this.y+t.y)},gm.prototype.a=function(t){if(!C(t,gm))throw new D(this.a,0,t);return(t=this.b(t)).x+t.y},gm.prototype.b=function(t){if(!C(t,gm))throw new D(this.b,0,t);return new gm(this.x*t.x,this.y*t.y)},gm.prototype.Ka=function(t){return new gm(this.x*t,this.y*t)},t("H.map.render.InteractionUtils",im),im.prototype.ln=function(){return this.b},im.prototype.isGestureDetected=im.prototype.ln,im.prototype.start=function(t,e){var n=Hl.HEADING,r=Hl.TILT;this.m&&this.clear(),this.g=t,this.j=!!e,this.m=!0,this.b=!(t&(n|r))||t===n||t===r},im.prototype.start=im.prototype.start,im.prototype.store=function(t,e,n,r,i){var o=!1;if(this.m){if(o=(t=new jm(t,e,n,r,i)).c,this.s=this.a,this.a=t,this.f){if(this.i=!0,o){e=this.g;var a=this.b;if(!a&&this.i){i=Hl.HEADING;var s=Hl.TILT;n=Hl.COORD,r=Hl.ZOOM;var l=e&(n|s)?this.Ld(!0):km,u=e&r?this.xf(!0):1,c=e&i?Bd(this.Wg(!0)):0,h=Bd(l.x),p=Bd(l.y);l=10<h||10<p,h=10<p&&p>3*h,u=.8>u||1.2<u,c=7<c,e&s&&(c||u||l&&!h?lm(this,s):h&&(lm(this,~s>>>0),a=!0)),!a&&e&i&&e&(n|r)&&(u||l?(lm(this,i),a=!0):c&&(lm(this,s),a=!0)),this.b=a}}}else this.f=t,o||(this.b=!0);this.j&&this.c.push(t)}return o},im.prototype.store=im.prototype.store,im.prototype.clear=function(){this.c.length=0,this.m=this.j=this.i=this.b=!1,this.f=this.s=this.a=void 0},im.prototype.clear=im.prototype.clear,im.prototype.uc=function(t){return 0<(this.g&t)},im.prototype.isModifierEnabled=im.prototype.uc,im.prototype.qa=function(){return this.m},im.prototype.isRunning=im.prototype.qa;var km=pc(new gm(0,0));function jm(t,e,n,r,i){this.a=new G(t,e),n!==B&&(this.b=new G(n,r),this.c=!0),this.timestamp=i!==B?i:Jk()}function nm(t){var e=t.a;return(t=t.b)?new G(e.x-(e.x-t.x)/2,e.y-(e.y-t.y)/2):B}function pm(t,e){var n=t.a;return(t=t.b)&&t.Ta(e)<n.Ta(e)?t:n}function mm(t,e){var n=t.b,r=e.b;return r&&n?(e=nm(e),t=nm(t)):n?t=pm(t,e=e.a):r?e=pm(e,t=t.a):(e=e.a,t=t.a),new gm(e.x-t.x,e.y-t.y)}function om(t){var e=t.b;return e?t.a.Ta(e):0}function qm(){F.call(this),this.reset()}function sm(t){sm.l.constructor.call(this,qm.prototype.A.vg),this.b=t}function tm(t){return x.Object.create(t.f)}function rm(t,e,n,r,i,o){this.a=t,this.b=e,this.c=n,this.f=r,this.g=i,this.i=o}function um(t,e,n,r){um.l.constructor.call(this),this.Ub=t,this.na=r,this.a=t.appendChild(this.createElement(t.ownerDocument)),this.Ze(e,n)}function vm(t,e,n,r,i,o){var a=i||"2d";vm.l.constructor.apply(this,arguments),this.b=this.a.getContext(a,o),this.c="2d"===a,this.g=a,this.yn=o}function wm(t){this.bb=t}function xm(t){var e="dom";xm.l.constructor.call(this,t),C(this.bb,ym)&&(e="2d"===t.Fd()?"2d":"webgl"),this.a=e}function zm(t,e,n,r,i){if(!Da(t.fi)||!Da(t.ai))throw new D(zm,0,t);if(this.b=t,!Da(this.j=e))throw new D(zm,1,e);if(E(this.i=+n))throw new D(zm,2,n);if(!Da(this.g=r)&&null!=r)throw new D(zm,3,r);if(!Da(this.c=i)&&null!=i)throw new D(zm,4,i);this.id=(new cf).next(),this.a=!1}function Am(t,e){Am.l.constructor.call(this,t),this.jc=!(!e||!e.jc),this.f={}}im.prototype.mc=function(){var t;if(this.j){var e=this.c,n=e.length,r=0;for(t=new gm(0,0);--n&&r<this.u;)t=t.add(mm(e[n-1],e[n])),r++}else t=this.Ld();return 0!==(n=hm(e=t))?new gm(e.x/n,e.y/n):e},im.prototype.getDirection=im.prototype.mc,im.prototype.tb=function(t){var e,n;if(t=t||Jk(),this.j){var r=this.c,i=this.c.length,o=this.c[i-1];for(n=e=0;--i&&e<this.u;)n+=hm(mm(r[i],r[i-1])),e++;r=n/e}else o=this.a,r=hm(this.Ld());return r>=this.Xa&&t-o.timestamp<=this.v?r>this.R?this.R:r:0},im.prototype.getSpeed=im.prototype.tb,im.prototype.wf=function(){return this.a?nm(this.a):B},im.prototype.getBifocalCenter=im.prototype.wf,im.prototype.Ld=function(t){return(t=t?this.f:this.s)?mm(t,this.a):new gm(0,0)},im.prototype.getMoveVector=im.prototype.Ld,im.prototype.xf=function(t){var e=1;if(this.i){var n=this.a;(t=om(t=t?this.f:this.s))&&(n=om(n))&&(e=n/t)}return e},im.prototype.getBifocalScaling=im.prototype.xf,im.prototype.Wg=function(t){if(this.i){var e=t?this.f:this.s,n=this.a;t=e.b;var r=n.b,i=0;t&&r&&(e=e.a,n=n.a,i-=Ld(r.y-n.y,r.x-n.x)*Td-Ld(t.y-e.y,t.x-e.x)*Td),t=i}else t=0;return t},im.prototype.getBifocalRotation=im.prototype.Wg,jm.prototype.c=!1,u(qm,F),qm.prototype.start=function(t,e){this.c&&this.reset(),E(t-e)||(this.a=+t,this.b=+e),this.c=!0},qm.prototype.reset=function(){this.c=!1,this.a=this.b=B,this.f=new rm(0,0,0,0,0,0)},qm.prototype.qa=function(){return this.c},qm.prototype.A={vg:"animationupdate"},u(sm,sd),qm.prototype.set=function(t,e,n,r,i,o){var a=this.f;this.c&&(t=new rm(t/1e3,e/1e3,n/1e3,r/1e3,i/1e3,o/1e3),a.ga(t)||(this.f=t,this.dispatchEvent(new sm(tm(this)))))},qm.prototype.tb=function(){return tm(this).tb()},qm.prototype.mc=function(){var t=tm(this),e=this.tb()||1;return new rm(t.a/e,t.b/e,t.c/e,t.f,t.g,t.i)},qm.prototype.o=function(){this.reset(),qm.l.o.call(this)},rm.prototype.tb=function(){return Dd(this.a*this.a+this.b*this.b+this.c*this.c)},rm.prototype.mc=function(){var t=this.tb()||1;return new rm(this.a/t,this.b/t,this.c/t,this.f,this.g,this.i)},rm.prototype.ga=function(t){var e=t===this;return!e&&(e=C(t,rm))&&(e=this.a===t.a&&this.b===t.b&&this.c===t.c&&this.f===t.f&&this.g===t.g&&this.i===t.i),e},u(um,nd),um.prototype.L=function(){return this.a},um.prototype.Ze=function(t,e){this.size?(this.size.w=t,this.size.h=e):this.size=new Ui(t,e),this.Wk(this.a,this.a.style,t,e,this.na)},um.prototype.setSize=um.prototype.Ze,p=um.prototype,p.sb=function(){return this.size},p.Ua=function(){return this.na},p.Wj=!0,p.mb=function(t){t!==this.Wj&&(this.a.style.display=t?"block":"none",this.Wj=t)},p.Bh=1,p.dc=function(t){this.Bh!==t&&(this.$j(t),this.Bh=t)},p.Oc=function(){return this.Bh},p.ce=function(t){this.a.style.zIndex=t},um.prototype.setZIndex=um.prototype.ce,um.prototype.Ij=function(){return+this.a.style.zIndex},um.prototype.Jc=function(){},um.prototype.clear=function(){},um.prototype.o=function(){this.clear(),this.Ub.removeChild(this.a),this.Ze(0,0),delete this.a,delete this.Ub,um.l.o.call(this)},um.prototype.disposeInternal=um.prototype.o,um.prototype.f=0,um.prototype.gg=function(){++this.f},um.prototype.release=function(){--this.f||this.D()},u(vm,um),p=vm.prototype,p.createElement=function(t){var e=(t=t.createElement("canvas")).style;return e.position="absolute",e.top=e.left="0",t},p.Wk=function(t,e,n,r,i){t.width=xd(n,1),t.height=xd(r,1),e.width=yd(n/i)+"px",e.height=yd(r/i)+"px"},p.$j=function(t){this.b.globalAlpha=t},p.Jc=function(t,e,n,r,i){this.c&&this.b.drawImage(t,e,n,r,i)},p.Fd=function(){return this.g},p.clear=function(t){var e,n;this.c&&(t?this.b.clearRect(e=t.left,n=t.top,t.right-e,t.bottom-n):this.a.width=this.size.w)},p.o=function(){var t=this.a;t.width=t.height=0,delete this.b,vm.l.o.call(this)},vm.prototype.disposeInternal=vm.prototype.o,u(wm,nd),wm.prototype.jb=function(){return this.bb},wm.prototype.getLayer=wm.prototype.jb,wm.prototype.Rm=function(){return this.ib},wm.prototype.getSurface=wm.prototype.Rm,wm.prototype.Wc=function(t){var e=this.ib;t!==e&&(this.ib=t,t.gg(),e&&e.release())},wm.prototype.setSurface=wm.prototype.Wc,wm.prototype.o=function(){this.ib.release()},wm.prototype.disposeInternal=wm.prototype.o,wm.prototype.Pd=function(){},wm.prototype.render=wm.prototype.T,u(xm,wm),xm.prototype.T=function(t,e,n,r,i,o,a,s){a=this.bb;var l=this.ib,u=!(C(l,vm)&&"2d"===l.Fd());return r>=a.min&&r<=a.max?(u&&l.mb(!0),a.T(l.L(),{boundingBox:t,zoom:r,screenCenter:e,priorityCenter:o,projection:n,cacheOnly:i,size:l.sb(),pixelRatio:l.Ua(),cameraMatrix:s})):(u&&l.mb(!1),uk.DONE)},xm.prototype.Pd=function(){return this.a},t("H.util.animation.Animation",zm),zm.prototype.start=function(){var t=this;this.f=Jk(),this.a=!0;var e=this.f;this.b.fi((function(){if(t.a){var n=Jk(),r=n-t.f,i=r/t.i,o=!1;1<=i&&(i=1,o=!0),t.j(t.c?t.c(i):i,r,n-e,n),e=n,o&&t.stop()}else t.stop()}))},zm.prototype.start=zm.prototype.start,zm.prototype.stop=function(t){this.a=!1,this.b.ai(),t||this.g&&this.g(this)},zm.prototype.stop=zm.prototype.stop,zm.prototype.qa=function(){return this.a},zm.prototype.isRunning=zm.prototype.qa,u(Am,wm),Am.prototype.Wc=function(t){Am.l.Wc.call(this,t),this.j=t.Ub.ownerDocument},Am.prototype.setSurface=Am.prototype.Wc;var Bm=function(t,e){return C(e=e.da(),gh)?e.ja:(t[0]=e,t)}.bind(null,[]);function Cm(t,e){var n=t[1].Pc(),r=e[1].Pc();return oh(n,r,!0)||t[5]-e[5]||oh(n,r,!1)}function Dm(t,e){Dm.l.constructor.apply(this,arguments),this.c=0,this.a=[],this.b=A(this.b,this)}Am.prototype.T=function(t,e,n,r,i,o,a){var s,l,u,c,h=this.bb;if(this.m=e=this.f,this.f=n={},r>=h.min&&r<=h.max){var p=this.kj(t,r,i,o),f=p.markers;if(t=f.length){for(r=[],i=this.ib,o=0;o<t;o++){h=f[o];var d=Bm(h);for(s=d.length;s--;)(l=a(d[s]))&&((c=e[u=h.$a()+"_"+s])?delete e[u]:c={kk:h},n[u]=c,r.push([c,h,h.rb(),i,l.x,l.y]))}for(r.sort(Cm),t=r.length,o=0;o<t;o++)this.Gk.apply(this,r[o])}}return!p||p.requested&&p.requested===p.total||!p.requested&&f.length===p.total?uk.DONE:uk.PENDING},Am.prototype.render=Am.prototype.T,Am.prototype.Ba=function(){},Am.prototype.getObjectsAt=Am.prototype.Ba,u(Dm,Am),t("H.map.render.dom.MarkerRenderer",Dm),Dm.prototype.kj=function(){return this.bb.xc.apply(this.bb,arguments)},Dm.prototype.T=function(t,e,n,r,i,o,a){this.b(),this.i=0;var s,l=Dm.l.T.apply(this,arguments),u=this.ib,c=this.m;for(s in c)Em(this,u,c[s]);return 0===this.a.length&&l?uk.DONE:uk.PENDING},Dm.prototype.render=Dm.prototype.T,Dm.prototype.Wc=function(t){Dm.l.Wc.call(this,t),this.g=t.Ua()},Dm.prototype.setSurface=Dm.prototype.Wc,Dm.prototype.b=function(){for(var t,e,n,r=this.a.length;r--;)(e=(t=(n=this.a[r]).tg).rb()).Oh(n,e,t);this.a.length=0},Dm.prototype.Gk=function(t,e,n,r,i,o){var a,s=r.Ua(),l=e.Gb();i*=s,o*=s,this.jc||(i=yd(i),o=yd(o)),t.detail&&(l.Td(t.hn)?Em(this,r,t):a=t.detail),a||(t.detail=a=n.mj(this.j),this.c++,Da(n.Oh)&&this.a.push(a)),t.hn=l.a,a.style.zIndex=this.i++,a.tg=e,r.Jc(a,i,o,0,0)};var Fm,Gm="pointer-events",Hm,Im;$e&&($e&&Zc!==y&&(Zc=(Im=/(MSIE\s+|rv:)([^\);]+)(\)|;)/.exec(navigator.userAgent))?+Im[2]:y),Hm=Zc,9===Hm?Gm="display":10===Hm&&(Gm="visibility"));function Em(t,e,n){e.clear(e=n.detail),delete e.tg,t.c--,(n=(t=n.kk).rb()).b&&n.b(e,n,t)}function ym(t,e){var n=e||{},r=n.contextType;if(n=n.contextAttributes,ym.l.constructor.call(this,e),xc(t,"Function",ym,0,"invalid render callback"),r){if(-1===Jm.indexOf(r))throw new D(ym,1,"invalid context type");this.b=r}n&&(this.c=n),this.f=t}Fm=Gm,Dm.prototype.Ba=function(t,e,n){var r,i,o,a,s,l=this.g,u=hf;if(this.c){t/=l,e/=l;var c=(l=this.ib.Ub.getRootNode()).documentElement,h=this.ib.L(),p=h.getBoundingClientRect();for(t+=p.left,e+=p.top;(i=o=l.elementFromPoint(t,e))&&i!==h&&i!==c&&i!==l.host&&o!==f;){for(;(a=i.parentNode)&&(!Da(a.contains)||!a.contains(h));)i=a;if(a===h&&(i!==o||"svg"!==i.nodeName)&&0>u.indexOf(s=i.tg)&&(u===hf&&(u=[]),u.push(s),n))break;r||(r=[]);var f=i.style;r.push({Zi:f.getPropertyValue(Fm),gn:f.getPropertyPriority(Fm),style:f}),f.setProperty(Fm,"visibility"===Fm?"hidden":"none","important"),f=o}if(r)for(e=r.length;e--;)(t=r[e]).style.removeProperty(Fm),Ac(t.Zi)&&t.style.setProperty(Fm,t.Zi,t.gn)}return u},Dm.prototype.getObjectsAt=Dm.prototype.Ba,Dm.prototype.Pd=function(){return"dom"},Dm.prototype.o=function(){this.a.length=0;var t,e=this.ib,n=this.f;for(t in n)Em(this,e,n[t]);this.ib.D(),Dm.l.o.call(this)},Dm.prototype.disposeInternal=Dm.prototype.o,u(ym,oj),t("H.map.layer.CanvasLayer",ym);var Jm=["2d","webgl","webgl2","experimental-webgl"];function Km(t,e){Km.l.constructor.call(this,e),xc(t,"Function",Km,0,"invalid render callback"),this.a=t}function Lm(t,e){if(E(this.b=+t))throw new D(Lm,0,t);this.a=0,e&&this.Sk(e)}function Mm(t,e,n,r){Mm.l.constructor.apply(this,arguments)}function Nm(t,e){this.a=t,this.b=e}function Om(t,e,n){var r=[],i={Ub:t.a,width:e.w,height:e.h,na:t.b};for(t=0;t<n.length;t++){var o=(e=n[t]).Pd(),a={};Ya(a,i);var s=e.ib;switch(o){case"2d":if(C(e.jb(),ym)&&(a.Lg=e.jb().c),o=c&&"2d"===c.Fd()){o=a.Lg;var l=c.yn;o=l===o||(l&&!o?!l.alpha&&!l.willReadFrequently:o&&!l?!o.alpha&&!o.willReadFrequently:!o.alpha===!o.alpha&&!l.willReadFrequently===!o.willReadFrequently)}if(o)var u=!1;else if(s&&!u){var c=s;u=!1}else c=new vm(a.Ub,a.width,a.height,a.na,"2d",a.Lg),u=!0;break;case"dom":c=s||new Mm(a.Ub,a.width,a.height,a.na),u=!s;break;default:c=s||new vm(a.Ub,a.width,a.height,a.na,e.jb().Fd(),a.Lg),u=!s}r[r.length-1]!==c&&(c.ce(r.length),r.push(c)),e.Wc(c)}return r}function Fl(){Fl.l.constructor.call(this),this.b={},this.a={position:new lg(0,0),zoom:0,heading:180,incline:0,tilt:0,bounds:new O(ch([90,-180,90,0,90,180,-90,180,-90,-180]))}}ym.prototype.b="2d",ym.prototype.Fd=function(){return this.b},ym.prototype.T=function(t,e){return this.a&&this.a.canvas===t||(this.a=t.getContext(this.b,this.c)),this.f(this.a,e)},ym.prototype.o=function(){ym.l.o.call(this),delete this.a},u(Km,oj),t("H.map.layer.DomLayer",Km),Km.prototype.T=function(t,e){return this.a(t,e)},t("H.util.kinetics.KineticMove",Lm),Lm.prototype.Sk=function(t){return this.a=t,this},Lm.prototype.setInitialSpeed=Lm.prototype.Sk,Lm.prototype.$l=function(){return Math.abs(this.a/this.b)},Lm.prototype.getDuration=Lm.prototype.$l,Lm.prototype.ze=function(t){return this.a+this.b*t},Lm.prototype.getCurrentSpeed=Lm.prototype.ze,Lm.prototype.Xl=function(t){return this.a*t+this.b*t*t/2},Lm.prototype.getCurrentPath=Lm.prototype.Xl,u(Mm,um),t("H.map.render.dom.Surface",Mm),p=Mm.prototype,p.Fd=function(){return"dom"},p.createElement=function(t){return(t=t.createElement("DIV")).style.position="absolute",t.style.pointerEvents="none",t},p.Wk=function(t,e,n,r){e.width=n+"px",e.height=r+"px"},p.$j=function(t){this.a.style.opacity=t},p.Jc=function(t,e,n){var r=this.na,i=t.style;i[Af("transform")]="matrix(1,0,0,1,"+e/r+","+n/r+")",t.parentNode!==this.a&&(i.position="absolute",this.a.appendChild(t),this.a.style.pointerEvents="auto","auto"===getComputedStyle(t).pointerEvents&&(t.style.pointerEvents="all"),this.a.style.pointerEvents="none")},p.clear=function(t){t?this.a.removeChild(t):this.a.innerHTML=""},u(Fl,F),t("H.map.ViewModel",Fl),Fl.prototype.A={xa:"update",ie:"sync"},Fl.prototype.Qb=function(t,e){if(!t)throw new D(this.Qb,0,t);var n=t[Pm];if(uc(n)&&!mg(n))throw new D(this.Qb,0,Pm);if(uc(n=t[Qm])&&E(+n))throw new D(this.Qb,0,Qm);if(uc(n=t[Rm])&&!C(n,kg))throw new D(this.Qb,0,Rm);return n=Sm(t=x.Object.assign({},t),this.b,this.a),Tm(this,this.b,t),this.dispatchEvent(new Um(this.b,n,e)),this},Fl.prototype.setLookAtData=Fl.prototype.Qb,Fl.prototype.gb=function(){var t={};return t[Pm]=ng(this.a[Pm]),Tm(this,t,this.a,!0),t},Fl.prototype.getLookAtData=Fl.prototype.gb;var Pm="position",Qm="zoom",Rm="bounds",Vm={Ni:Pm,Qi:Qm,Hi:"heading",Pi:"tilt",Ii:"incline",Fi:Rm},Wm=Object.keys(Vm).map((function(t){return Vm[t]}));function Tm(t,e,n,r){t.g={},t.f={},t.c=[];for(var i,o,a,s=t.j,l=t.i,u=Wm.length;u--;)if(a=n[i=Wm[u]],null==(o=e[i])||!r)if(null!=a){uc(s)&&s.call(t,i,o,a);var c,h=i;if((c="position"!==i)||(c=!(!(c=a)||E(c.lat)||E(c.lng))),e[h]=c?a:ng(a),uc(l)){switch(i){case"position":o=a&&o&&(a.lat!==o.lat||a.lng!==o.lng);break;case"bounds":o=a&&o&&!a.ga(o);break;default:o=a!==o}o&&l.call(t,i)}}else delete e[i]}Fl.prototype.j=function(t,e,n){this.g[t]=e,this.f[t]=n},Fl.prototype.i=function(t){this.c.push(Xm[t])};var Xm=Wm.reduce((function(t,e){return t[e]=cj[e.toUpperCase()],t}),{});function Sm(t,e,n){var r=0;return["tilt","incline","heading",Qm].forEach((function(i){if(E(t[i])){var o=E(e[i])?n[i]:e[i];t[i]=o}else r|=Xm[i]})),[Pm,Rm].forEach((function(i){t[i]?r|=Xm[i]:t[i]=e[i]||n[i]})),r}function Ym(t,e){return t|e}function Um(t,e,n){Um.l.constructor.call(this,Fl.prototype.A.xa,t,null,e),this.b=this.animate=!!n}function U(t,e,n,r){if(U.l.constructor.call(this,t,e,n,r),this.ya=new Pk(100),this.N=new G(0,0),this.vf=!!r.enableSubpixelRendering,this.Rb=Zm,this.s=new im,this.g=r=new qm,this.Gc=A(this.Gc,this),r.addEventListener(r.A.vg,this.Gc),r=t.element,this.K=t=r.ownerDocument.createElement("div"),t.style.position="absolute",t.style.width=t.style.height="100%",t.style.zIndex=0,r.insertBefore(t,r.firstChild),this.yd=new Nm(this.K,this.na),this.oa=e.gb().position,!(e=x.H.gl))throw new Yc(U,'"H-webgl" module is missing');for(this.a=new Pl({viewport:this.f,Ub:this.K,devicePixelRatio:this.na,sk:A(this.fa,this)}),e.WorkerBroker.addTarget("model",qj),t=0,r=(e=this.c.Ha()).length,this.j={Ic:[],ha:[]},this.Ya=e;t<r;t++){var i=e[t];this.Le(t,i),Il(this,i,!0)}this.zb(),this.Zc=A(this.Zc,this),this.Dh=A(this.Dh,this),this.Aa=A(this.Aa,this),n.addEventListener(oj.prototype.A.fe,this.Zc),this.Y=$m,this.zoom=Jl(this,this.v.kb()),this.zb(),this.ea()}Fl.prototype.Wa=function(t){var e={},n={};Tm(this,this.a,t),this.b={},e.lookAt=this.f,n.lookAt=this.g,t=(t=this.c).length?t.reduce(Ym):0,this.dispatchEvent(new bj(this.A.ie,e,n,t))},Fl.prototype.synchronize=Fl.prototype.Wa,Fl.prototype.$e=function(t,e){if(E(t=+t))throw new D(this.$e,0,Qm);this.Qb({zoom:t},e)},Fl.prototype.kb=function(){return this.a.zoom},Fl.prototype.fc=Oc,Fl.prototype.startControl=Fl.prototype.fc,Fl.prototype.control=Oc,Fl.prototype.control=Fl.prototype.control,Fl.prototype.pb=Oc,Fl.prototype.endControl=Fl.prototype.pb,u(Um,bj),u(U,Dl),t("H.map.render.webgl.RenderEngine",U),U.prototype.gb=function(){var t=this.oa;return Kl(this,{position:{rn:t.rn,vn:t.vn},zoom:this.zoom,tilt:this.fl,heading:this.heading})},U.prototype.Zc=function(t){((t=(t=t.target.ka())&&t.ab())&&t.getState())===Uh.INIT?t.load():(Sl(this.a),Ul(this.a,this.c),this.fa())},U.prototype.type=Nl.WEBGL;var $m=2;function an(t,e,n){return(e=n-e)<(t=Ed(2,8+t.zoom))/2?e:e-t*n/Bd(n)}function bn(t,e,n){function r(t){return i[t]+em(i[t],e[t])/2}if(!(n&cj.POSITION||n&cj.BOUNDS))return null;var i=Tl(t.a).getLookAtData();n=i.position;var o=e.position,a=e.bounds;return Ci(i.bounds,o.lat,o.lng,!1)||a&&Ci(a,n.lat,n.lng,!1)?null:((n=cn(t,{tilt:r("tilt"),heading:r("heading"),incline:0,bounds:tg([n,o])})).zoom=Jl(t,n.zoom-.5),delete n.bounds,n)}function dn(t,e,n,r){return t=(t=t.getCapabilities().lookAt[r]).max-t.min,Bd("zoom"===r?n[r]-e[r]:em(e[r],n[r]))/t||0}function en(t,e,n){return Zd(3e3*(t=xd(8*dn(t,e,n,"zoom"),dn(t,e,n,"heading"),dn(t,e,n,"tilt")/2)),300,4e3)}function cn(t,e){return jn(e),Tl(t.a).getBestLookAtData(e)}function jn(t){var e=t.bounds;!e||e instanceof O||(t.bounds=zi(e.J()))}function ln(t,e,n){Tl(t.a).setLookAtData(e),Sl(t.a),kn(t),t.fa(),n&&setTimeout(n,0)}function hn(t,e,n,r){var i=Tl(t.a).getLookAtData(),o=new dm(i,e);0!==o.a.tilt+o.a.heading+o.a.zoom+o.c?mn(t,(function(e){for(var n in o.a)if(0!==o.a[n]){var r=o.g[n](e);i[n]+=o.a[n]*(r-o.f[n]),o.f[n]=r}return 0!==o.c&&(i.position=o.b.sg(o.i,o.c*o.g.position(e),!0)),ln(t,i)}),n,(function(){return ln(t,e,r)})):ln(t,e,r)}function nn(t,e){t.ya.ma((function(t,n){return n.Hb()===e}))}function on(t){return!(C(t,Km)||C(t,ym))}function gn(t,e){var n=e.position;return Kl(t,{zoom:Jl(t,e.zoom),position:new lg(n.lat,n.lng),tilt:e.tilt,heading:e.heading,bounds:e.bounds})}function kn(t){var e=Tl(t.a).getLookAtData();t.zoom=e.zoom,t.oa=e.position}function qn(t,e){return new G((t=Tl(t.a).geoToMeters(e)).x/40075016.68557849+.5,1-(t.y/40075016.68557849+.5))}function rn(t,e){return e.sub(qn(t,t.oa)).scale(Ed(2,8+t.zoom))}function sn(t,e,n,r,i,o,a,s){var l,u,c,h=0,p=function(){0===--h&&o(i)};if(s&&s.features)for(h=u=s.features.length,c=0;c<u;c++){var f=s.features[c],d=f.id;if(l=t.a.a.sources[f.source_name]){var y=l.provider,g=y.Aj();if(g===lk.SOURCE){var v=f.source_layer;if("overlays"===v)tn(t,e,n,r,i,l,f.properties.overlays_config);else if(l=l.getMapObjectById(d))if("markers"!==v)i.push(l);else if(un(t,e,n,l))i.push(l);else if(r&&!a){var m=!0;Wl(t.a,{x:e,y:n},{radius:3.5,top_most_only:!1},(function(a){sn(t,e,n,r,i,o,!0,a)}))}h--}else g===lk.FEATURE?(v=f.tile.coords,(m=y.getFeatureProxy(f.properties,v,(function(t){t&&(t.Vk(y),i.push(t)),p()})))||((l=t.ya.get(d))||((l=new lh(f)).ia(y),t.ya.add(d,l,1)),i.push(l),h--)):g===lk.PROVIDER&&(m=!0,y.Hk(f,!1).then((function(t){t&&(!(t instanceof rh)||un(this,e,n,t))&&i.push(t),p()}),(function(){p()}),t))}}g&&(m||0!==h)||o(i)}function tn(t,e,n,r,i,o,a){var s;for(t=t.Ra(e,n),e=a.length;e--&&(!(s=o.getMapObjectById(a[e].id))||0<=i.indexOf(s)||!s.da().bd(t)||(i.push(s),!r)););}function un(t,e,n,r){var i,o=r.rb(),a=o.c,s=!a;if(a)if(e+=(o=o.fd()).x,n+=o.y,C(o=r.da(),Ti))for(i=(r=o.ja).length;i--&&!s;)o=t.Aa(r[i]),s=a.If(e-o.x,n-o.y,0)!==be.NONE;else o=t.Aa(o),s=a.If(e-o.x,n-o.y,0)!==be.NONE;return s}function vn(t,e,n,r,i){for(var o,a=e.length;a--&&!((o=e[a])&&o.Ba&&(t=t.concat(o.Ba(n,r,i)),t.length&&i)););return t}function pn(t){return{w:(t=t.ua[2]).right-t.left,h:t.bottom-t.top}}function wn(t){t.i&&t.i.qa()||(Rl(t.a)||Jk()-t.ue<t.Rb)&&!t.ra?t.Of||(t.Of=Hk(t.Dh)):(t.ra&&(t.$d(),xn(t)),t.Y=$m)}function xn(t,e){t.ad||setTimeout(A(t.dispatchEvent,t,{type:t.A.Oi,target:e||t}),1)}function zn(t,e,n){Tl(t.a).applyPxOffset([e,n]),kn(t),t.N.set(0,0),Sl(t.a),t.fa()}function An(t,e,n,r){Tl(t.a).setLookAtData({zoom:e},Dc(n)&&Dc(n)?[n,r]:B),kn(t),Sl(t.a),t.fa()}function fn(t){yn(t),t.g.qa()&&t.pb(!0),t.s.qa()&&t.qb(!0)}function Bn(t,e){if(e){var n={};n.Pe=e.power,n.re=e.ease,n.duration=e.duration,t.u=n}}function Dn(t,e){var n=rn(t,qn(t,e.position)),r=n.y;n=n.x;var i=e.zoom,o=rn(t,qn(t,t.oa));e=o.y;var a=o.x;o=t.zoom;var s=t.g.tb(),l=t.g.a,u=t.g.b,c=0;if(n=an(t,a,n),e=Dd((n-=a)*n+(r-=e)*r+(o=i-o)*o),0!==s&&0!==e){var h=n/e,p=r/e,f=o/e,d=s*s/(2*e);mn(t,(function(e,n){var r;1!==e?((r=f*(n=(e=s*n-d*n*n/2)-c))&&(r=Jl(t,t.zoom+r),An(t,r,l,u)),zn(t,yd(h*n),yd(p*n)),c=e):(An(t,Jl(t,i),l,u),t.fa())}),2*e/s)}}function Cn(t,e,n){n=n||0;var r=t.g,i=Tl(t.a),o=i.getLookAtData();e.c&&An(t,Jl(t,o.zoom+e.c*n),r.a,r.b),i.setLookAtData({heading:Ml(t,o.heading+e.g*n),tilt:Ll(t,o.tilt+e.f*n)}),kn(t),zn(t,e.a*n,e.b*n)}function mn(t,e,n,r,i){t.i&&t.i.qa()&&t.i.stop(!0),t.i=new zm(t,e,n,r,i),t.i.start()}function yn(t){t.i&&t.i.qa()&&t.i.stop(!0)}U.prototype.getState=function(){return this.Y},U.prototype.getState=U.prototype.getState,U.prototype.ad=!1,U.prototype.Gg=function(t){var e=this,n=t.newValue,r=t.modifiers,i=Tl(this.a);fn(this),this.N.set(0,0);var o=gn(this,n);if(Wm.forEach((function(e){r&t[e.toUpperCase()]||delete o[e]})),t.b){i=Tl(this.a).getLookAtData();var a=cn(this,o);n=bn(this,a,r);var s=function(){return e.ad=!1};if(delete a.bounds,this.ad=!0,n){i=en(this,i,n);var l=en(this,n,a);hn(this,n,i,(function(){return hn(e,a,l,s)}))}else n=en(this,i,a),hn(this,a,n,s)}else jn(o),i.setLookAtData(o);kn(this),Sl(this.a),this.fa()},U.prototype.ig=function(){},U.prototype.setAnimationDuration=U.prototype.ig,U.prototype.Ug=function(){},U.prototype.getAnimationDuration=U.prototype.Ug,U.prototype.jg=function(){},U.prototype.setAnimationEase=U.prototype.jg,U.prototype.Vg=function(){},U.prototype.getAnimationEase=U.prototype.Vg,U.prototype.eg=function(){},U.prototype.resetAnimationDefaults=U.prototype.eg,p=U.prototype,p.qk=function(t){nn(this,t.target.ka()),Sl(this.a),this.fa()},p.Le=function(t,e){U.l.Le.call(this,t,e),on(e)&&(Sl(this.a),(t=(t=e.ka())&&t.ab())&&t.getState()===Uh.INIT&&t.load())},p.Qh=function(t,e,n){var r;if(this.ue=Jk(),nn(this,e.ka()),e.requestDomMarkers||C(e,ym)||C(e,Km)){var i=this.j.ha;for(r=i.length;r--;){var o=i[r];if(o.jb()===e){i.splice(r,1),o.D();break}}}on(e)&&Ul(this.a,this.c),this.Ya=this.c.Ha(),0===t&&(Il(this,e,!1),this.zb()),Om(this.yd,pn(this),this.j.ha.filter(uc)),this.$d(),n||this.fa()},p.Rh=function(){this.zb()},p.zb=function(){U.l.zb.call(this);var t=this.getCapabilities().lookAt.zoom;Tl(this.a).setZoomConstraints(xd(t.min,this.yg),wd(t.max,this.xg))},p.mh=function(t,e){var n;if(e){if(t={jc:this.vf,cb:this.cb},e.T?(C(e,ym)||C(e,Km))&&(n=new xm(e)):e.requestDomMarkers&&(n=new Dm(e,t)),n){this.j.ha.push(n);var r=this.c.Ha();this.j.ha.sort((function(t,e){return r.indexOf(t.bb)-r.indexOf(e.bb)})),Om(this.yd,pn(this),this.j.ha.filter(uc))}on(e)&&Ul(this.a,this.c)}this.Ya=this.c.Ha()},p.Aa=function(t){return Tl(this.a).geoToPixel(t)},U.prototype.geoToScreen=U.prototype.Aa,U.prototype.Ra=function(t,e){return Tl(this.a).xyToGeo(t,e)},U.prototype.screenToGeo=U.prototype.Ra,U.prototype.hg=function(t,e){return t=this.Ra(t,e),(e=this.v.gb()).position=t,e},U.prototype.Ba=function(t,e,n,r){var i=this,o=[];o=vn(o,this.j.ha,t*this.na,e*this.na,n),n&&o.length?r(o):this.a.a.initialized?Wl(this.a,{x:t,y:e},{radius:3.5,top_most_only:n},(function(a){sn(i,t,e,n,o,r,!1,a)})):r(o)},U.prototype.getObjectsAt=U.prototype.Ba,U.prototype.V=y,U.prototype.ea=function(){var t=this.j.ha.length;El(this,this.na),this.N.set(0,0);var e=pn(this),n=e.w,r=e.h;for(this.a.a.handleViewportUpdate();t--;){var i=(e=this.j.ha[t].ib).sb();i.w===n&&i.h===r||e.Ze(n,r)}this.V=new Ui(n,r),Sl(this.a),this.fa()},U.prototype.getCapabilities=function(){return Ol},U.prototype.getCapabilities=U.prototype.getCapabilities,p=U.prototype,p.Of=0,p.$d=function(){this.j.Ic.length=0},p.Dh=function(){this.Of=0,this.B&&this.B.before();var t=Tl(this.a),e=t.getLookAtData(!1),n=t.getLookAtData(!0);t=this.f.center.clone(),n=n.bounds.J();var r=this.zoom,i=this.N,o=this.Ya,a=o.length;for(this.Rb=Zm;a--;){var s=o[a];C(s,oj)&&s.ka()&&s.ka().Qe(n,r)}this.ra=this.a.T(),this.v.Wa(e),o=(e=this.j).ha.length;var l,u=!0;for(l=0;l<o;l++){a=e.ha[l];var c=e.Ic;a&&((s=a.T(n,t,void 0,r,!1,i,this.Aa,this.a.a.getCameraMatrix()))===uk.ACTIVE&&(this.Rb=1/0),s!==uk.DONE||c[l]||(xn(this,a.jb()),c[l]=!0),c[l]||(u=!1))}this.ra=u&&this.ra,this.V&&(this.f.Wa(this.V),this.V=y),this.i&&this.i.qa()&&this.wg(),this.B&&this.B.after(),wn(this)},p.o=function(){var t=this.c.Ha()[0],e=this.f;Ik(this.Of),yn(this),t&&Il(this,t,!1),this.j.ha.filter(uc).forEach((function(t){t.D()})),e.element&&e.element.removeChild(this.K),delete this.K,this.Y=3,this.a.D(),U.l.o.call(this)},p.fa=function(){this.ue=Jk(),this.Y===$m&&(this.ra=!1,this.Y=1,wn(this))},p.ud=function(t,e,n){An(this,t=Jl(this,Jl(this,t)),e,n)},U.prototype.zoomAt=U.prototype.ud,U.prototype.gc=function(t,e){var n=!!(e||t&(Hl.HEADING|Hl.TILT));fn(this),Bn(this,e),this.s.start(t,n),Tl(this.a).setPanning(!0)},U.prototype.startInteraction=U.prototype.gc,U.prototype.Yb=function(t,e,n,r,i){var o=this.s,a=!1;if(o.qa()){var s=Tl(this.a),l=s.getLookAtData(),u=this.f.center;u=[u.x,u.y],e=o.store(t,e,n,r,i),n=o.wf(),t=o.Ld(),i=this.s.xf(),r=this.s.Wg(),o.b&&(o.uc(Hl.TILT)&&(s.setLookAtData({tilt:Ll(this,l.tilt+t.y/this.f.height*-180)},u),a=!0),e&&1!==i&&o.uc(Hl.ZOOM)&&(a=o.wf(),An(this,Jl(this,i=Cd(Ed(2,this.zoom)*i)/Md),a.x,a.y),a=!0),o.uc(Hl.COORD)&&0<hm(t)&&(zn(this,-t.x,-t.y),a=!0),o.uc(Hl.HEADING)&&(e?s.setLookAtData({heading:l.heading+Ml(this,r)},[n.x,n.y]):t.x&&s.setLookAtData({heading:Ml(this,l.heading+t.x/this.f.width*360)},u),a=!0),a&&(Sl(this.a),this.fa()))}},U.prototype.interaction=U.prototype.Yb,U.prototype.qb=function(t){var e=this;if(this.s.qa()&&!t){if(this.u){t=this.s.tb();var n=this.s.mc(),r=this.u.duration,i=(this.u.Pe||1)*t,o=new Lm(-i/(0<r?r:1),i);!E(n.x)&&!E(n.y)&&0<i&&e.s.uc(Hl.COORD)&&mn(this,(function(t){i=o.ze(t*r),E(i)||zn(e,yd(-n.x*i),yd(-n.y*i))}),r,void 0,this.u.re)}delete this.u,this.s.clear()}Tl(this.a).setPanning(!1),this.fa()},U.prototype.endInteraction=U.prototype.qb,U.prototype.fc=function(t,e,n){fn(this),this.g.start(e,n),Bn(this,t),Tl(this.a).setPanning(!0)},U.prototype.startControl=U.prototype.fc,U.prototype.control=function(t,e,n,r,i,o){for(var a,s=0;s<arguments.length;s++)if((a=+arguments[s])!==a)throw new D(this.control,s,a);this.g.qa()&&this.g.set(t,e,n,r,i,o)},U.prototype.control=U.prototype.control,U.prototype.pb=function(t,e){var n,r=this;if(this.g.qa()){yn(this);var i=Jk(),o=i-this.Cd;if(1<=o)Cn(this,tm(this.g),o);if(!this.u||t||e)"function"===typeof e&&(e(t=(t=Tl(this.a)).getLookAtData()),Dn(this,t));else{e=this.g.tb();var a=this.g.mc(),s=this.u.duration,l=(this.u.Pe||1)*e,u=new Lm(-l/(0<s?s:1),l);!E(a.a)&&!E(a.b)&&0<l&&mn(this,(function(t,e,o,c){i&&(o=c-i,i=0),l=u.ze(t*s)*o,E(l)||((n=a.c*l)&&An(r,Jl(r,r.zoom+n),r.g.a,r.g.b),zn(r,yd(a.a*l),yd(a.b*l)))}),s,void 0,this.u.re)}this.g.reset(),Tl(this.a).setPanning(!1),this.fa()}},U.prototype.endControl=U.prototype.pb,U.prototype.Gc=function(t){var e=this,n=t.b;this.N.set(0,0),n.a||n.b||n.c||n.f||n.g||n.i?(this.Cd=Jk(),mn(this,(function(t,r,i,o){e.Cd=o,Cn(e,n,i)}),Ud),this.fa()):yn(this)},U.prototype.Qg=function(){},U.prototype.enter=U.prototype.Qg,U.prototype.Rg=function(t){Gl(this.K,t)},U.prototype.exit=U.prototype.Rg,U.prototype.capture=function(t,e,n,r){var i=this;return Xl(i.a).then((function(o){var a=i.K.ownerDocument.createElement("canvas"),s=i.na,l=a.getContext("2d"),u=i.a.Ua()/s,c=(n-t)*s;return s*=r-e,a.width=c,a.height=s,l.drawImage(o,t*u,e*u,c*u,s*u,0,0,c,s),a}))},U.prototype.Jl=function(t){return Tl(this.a).geoToMeters(t)},U.prototype.geoToMeters=U.prototype.Jl,U.prototype.Jn=function(t){return Tl(this.a).metersToGeo(t)},U.prototype.metersToGeo=U.prototype.Jn;var Zm=5e3;function V(t,e,n){var r={};if(!(t instanceof HTMLElement))throw new D(V,0);if(V.l.constructor.call(this),this.i=En(n,V),this.c=n=new Fl,this.B=!1,n.addEventListener(n.A.ie,this.N,!1,this),!C(t,Element))throw new D(V,0,t);var i=(n=this.P=t.ownerDocument.createElement("div")).style;if(i.position="relative",i.height=n.style.width="100%",i.overflow="hidden",i.webkitTapHighlightColor="transparent","transparent"!==i.webkitTapHighlightColor&&(i.webkitTapHighlightColor="rgba(0,0,0,0)"),t.appendChild(n),this.b=new vk(this.P,this.i),this.b.addEventListener(this.b.A.ie,this.N,!1,this),(t=this.a=new qj(this.i.layers)).addEventListener(t.A.he,this.S,!1,this),t.addEventListener(t.A.ee,this.S,!1,this),t.addEventListener(t.A.ge,this.S,!1,this),!this.j&&Fn(this),this.g=null,this.a.add(e,0),this.f=this.u(null!=this.i.engineType?this.i.engineType:hk,this.i),this.v=A(this.v,this),(e=this.i.imprint)!==B&&"object"!==typeof e)throw new D(V,1,"imprint");Gn&&(e||(e={}),e.mark=e.mark||"GS (2022) 5659"),this.m=null===e?e:new zj(this,e),e=this.i.autoColor,this.K=e===B||!!e,Hn(this),(e=this.i.zoom)&&(r.zoom=e),(e=this.i.bounds)&&(r.bounds=e),(e=this.i.center)&&(r.position=e),this.c.Qb(r)}function En(t,e){if(t){var n=t.pixelRatio;if(n===B)t.pixelRatio=Te();else if(!(0<n))throw new D(e,0,"pixelRatio: "+n)}else(t={}).pixelRatio=Te();return t.renderBaseBackground||(t.renderBaseBackground={lower:3,higher:2}),t}function Hn(t){t.m&&t.K&&t.m.ni({invert:t.g&&t.g.zl})}function In(t,e,n){t.dispatchEvent(n?new bj(t.A.Ji,n.newValue,n.oldValue,n.modifiers):t.A.Ji+e)}function Jn(t){vj.call(this,t)}function Fn(t){t.s=new N({max:24,engineType:t.i.engineType}),t.j=new rl(t.s,t.i),t.a.add(t.j)}u(V,F),t("H.Map",V),V.prototype.draggable=!1,V.prototype.o=function(){this.K=!1,this.m&&this.m.D(),this.f.dispose(),this.c.D(),this.b.D(),this.j.D(),this.s.D(),this.a.D();var t=this.P;t.parentNode.removeChild(t),delete this.P,F.prototype.o.call(this)},V.prototype.L=function(){return this.P},V.prototype.getElement=V.prototype.L,V.prototype.Ua=function(){return this.i.pixelRatio},V.prototype.getPixelRatio=V.prototype.Ua,V.prototype.S=function(t){var e=t.added,n=t.removed;e&&e.ka()&&e.ka().ia(this),n&&n.ka()&&n.ka().ia(null),n===this.j&&(delete this.j,delete this.s),n===this.g&&(this.g=null),0===t.idx&&(this.dispatchEvent(new aj(this.A.gf,this.g=t.type!==this.a.A.ge?e:0<this.a.a.length?this.a.get(0):y,t.type!==this.a.A.ee?n:1<this.a.a.length?this.a.get(1):y)),Hn(this))},V.prototype.N=function(t){t.modifiers&&(this.B||(In(this,"start"),this.B=!0),In(this,"",t),this.ea&&x.clearTimeout(this.ea),this.ea=x.setTimeout(this.v,333))},V.prototype.v=function(){In(this,"end"),this.B=!1},V.prototype.kg=function(t,e){return this.f.getCapabilities().lookAt&&this.c.Qb({position:t},!!e),this},V.prototype.setCenter=V.prototype.kg,V.prototype.Za=function(){var t=this.c.gb();return t?t.position:y},V.prototype.getCenter=V.prototype.Za,V.prototype.$e=function(t,e){return this.c.$e(t,!!e),this},V.prototype.setZoom=V.prototype.$e,V.prototype.kb=function(){return this.c.kb()},V.prototype.getZoom=V.prototype.kb,V.prototype.ud=function(t,e,n){this.f.zoomAt(t,e,n)},V.prototype.zoomAt=V.prototype.ud,V.prototype.an=function(){return this.b},V.prototype.getViewPort=V.prototype.an,V.prototype.$m=function(){return this.c},V.prototype.getViewModel=V.prototype.$m,V.prototype.rm=function(){return this.a},V.prototype.getLayers=V.prototype.rm,V.prototype.mm=function(){return this.m},V.prototype.getImprint=V.prototype.mm,V.prototype.capture=function(t,e,n,r,i,o){function a(t,e){d?t.cancel():(u.save(),e.capture(l,p,(function(e){u.restore(),t.done(e)}),(function(e){t.done(null,e),s(null)})))}function s(e){d||(d=!0,t(e))}var l,u,c=this.f,h=c.getCapabilities(),p=this.i.pixelRatio,f=this.b,d=!1,g=this;if(!Da(t))throw new D(this.capture,0,t);n=n||0,r=r||0,i=i||f.width,o=o||f.height;var v=xd(0,wd(n,i)),m=xd(0,wd(r,o));n=wd(f.width,xd(n,i)),r=wd(f.height,xd(r,o)),h.capture?c.capture(v,m,n,r).then((function(t){var n=g.m,r=e||[];u=(l=t).getContext("2d"),l.style.width=l.width/p+"px",l.style.height=l.height/p+"px";var i=new Kk(10,a);(r=r.concat(n).filter((function(t){return Da(t&&t.capture)}))).length?(t=r.pop(),r.forEach((function(t){i.push(t,jd)})),i.push(t,A(s,g,l)),Dk(i)):s(l)}),(function(){s(y)})):t(null)},V.prototype.capture=V.prototype.capture,V.prototype.bm=function(){return this.f},V.prototype.getEngine=V.prototype.bm,V.prototype.u=function(t,e){if(e=e?En(e,this.u):this.i,Hn(this),t===ik.P2D)return new x.H.map.render.p2d.RenderEngine(this.b,this.c,this.a,e);if(t===ik.WEBGL)return new U(this.b,this.c,this.a,e);if(t===ik.HARP)return new x.H.map.render.harp.RenderEngine(this.b,this.c,this.a,e);throw new D(this.u,0,t)},V.prototype.cf=function(t,e,n,r,i){if(e=uc(e)?C(e,K,this.cf,1,e)&&e:this.c.gb().bounds.J(),!C(i=i||this.g,nl))throw new D(this.cf,4);var o=i.ka(),a=this.Ua(),s=i.tileSize;if(2<=a&&256<s&&o instanceof Ck&&(s/=2),a=this.kb(),s=Math.log2(s)-8,!((n=uc(n)?+n:a)<=(r=uc(r)?+r:a)))throw new D(this.cf,B,"!(min <= max)");a=o.min;var l=o.max,u=this.f.type===ik.WEBGL?zd:yd;if(n=Zd(u(n)-s,a,l),r=Zd(u(r)-s,a,l),!(o&&C(o,T)&&md()&&o.m()))throw new Yc(this.cf,"Storing is not supported");return new yk(i,o,e,n,r,t)},V.prototype.storeContent=V.prototype.cf,u(Jn,vj),Jn.prototype.g=function(){xj(this,2)},Jn.prototype.f=function(){xj(this,4)},V.prototype.yl=function(t){return t=new Jn(t),ld().clear(A(t.g,t),A(t.f,t)),t},V.prototype.clearContent=V.prototype.yl,V.prototype.Cg=function(t,e){var n=this.a,r=n.indexOf(t),i=e!==+e;return e=i?n.a.length-1:e,0>r?n.add(t,e):r-e&&(n.cc(r),n.add(t,i?e-1:e)),this},V.prototype.addLayer=V.prototype.Cg,V.prototype.Te=function(t){var e=this.a.indexOf(t);return t!==this.g&&t!==this.j&&-1!==e&&this.a.cc(e),this},V.prototype.removeLayer=V.prototype.Te,V.prototype.rd=function(t){return this.g!==t&&(this.a.a.length&&this.a.get(0)!==this.j?this.a.set(0,t):this.a.add(t,0),this.g=t),this},V.prototype.setBaseLayer=V.prototype.rd,V.prototype.Pl=function(){return this.g},V.prototype.getBaseLayer=V.prototype.Pl,V.prototype.Aa=function(t){if(!mg(t))throw new D(this.Aa,0,t);return(t=this.f.geoToScreen(t))?zf(t):y},V.prototype.geoToScreen=V.prototype.Aa,V.prototype.Ra=function(t,e){var n;if(n=+E(t)||2*+E(e))throw new D(this.Ra,n-1,arguments[n-1]);return(n=this.f.screenToGeo(t,e))?ng(n):y},V.prototype.screenToGeo=V.prototype.Ra,V.prototype.hg=function(t,e){return this.f.screenToLookAtData(t,e)},V.prototype.screenToLookAtData=V.prototype.hg,V.prototype.ba=function(t){if(!C(t,M))throw new D(this.ba,0,t);return!this.j&&Fn(this),this.s.Xb().ba(t),t},V.prototype.addObject=V.prototype.ba,V.prototype.Da=function(t){if(!C(t,M))throw new D(this.Da,0,t);return!this.j&&Fn(this),this.s.Xb().Da(t),t},V.prototype.removeObject=V.prototype.Da,V.prototype.Pa=function(t){return!this.j&&Fn(this),this.s.Xb().Pa(t)},V.prototype.getObjects=V.prototype.Pa,V.prototype.Sb=function(t){var e;zc(t,this.Sb,0,t),!this.j&&Fn(this);var n=t.length;for(e=0;e<n;e++)this.ba(t[e]);return this},V.prototype.addObjects=V.prototype.Sb,V.prototype.od=function(t){var e;zc(t,this.od,0,t),!this.j&&Fn(this);var n=t.length;for(e=0;e<n;e++)this.Da(t[e]);return this},V.prototype.removeObjects=V.prototype.od,V.prototype.Md=function(t,e,n){var r;if(r=+E(t)||2*+E(e))throw new D(this.Md,r-1,arguments[r-1]);this.f.getObjectsAt(t,e,!0,(function(t){n(t[0])}))},V.prototype.getObjectAt=V.prototype.Md,V.prototype.Ba=function(t,e,n,r){var i;if(i=+E(t)||2*+E(e))throw new D(this.Md,i-1,arguments[i-1]);this.f.getObjectsAt(t,e,!1,n,!!r)},V.prototype.getObjectsAt=V.prototype.Ba,V.prototype.dh=function(t,e,n){var r=n||jf;n=r.visiblesOnly;var i=r.zoom;r=r.types;var o=nh.ANY;C(t,O,this.dh,0,"area"),xc(e,"Function",this.dh,1,"callback"),this.s.Pa(t,!uc(n)||!!n,uc(i)?+i:this.c.kb(),uc(r)?r&o:o,e)},V.prototype.getObjectsWithin=V.prototype.dh;var Kn=Nl.HARP,ik={P2D:Nl.P2D,WEBGL:Nl.WEBGL,HARP:Kn};function Ln(t,e){Ln.l.constructor.call(this,t,e)}function sh(t,e,n){var r="anonymous",i=1;this.c=A(this.c,this),M.call(this,n),this.aa(t),n&&((t="crossOrigin")in n&&(r=n[t]),(t="opacity")in n&&(i=n[t])),this.Qk(e,r),this.dc(i)}function Mn(t,e){Mn.l.constructor.call(this,t,e)}V.EngineType=ik,V.prototype.A={Fo:"mapviewchangestart",Ji:"mapviewchange",Ki:"mapviewchangeend",gf:"baselayerchange"},u(Ln,rh),t("H.map.Marker",Ln),Ln.prototype.type=nh.MARKER,Ln.prototype.ea=1,Ln.prototype.pa=function(t){if(t!==kh.VISUAL||1===this.Bk||1===this.icon.getState())var e=Ln.l.pa.call(this,t);return e||!1},Ln.prototype.invalidate=Ln.prototype.pa,p=Ln.prototype,p.Bk=0,p.Vj=function(t){return C(t,Uj)},p.qh=!1,p.pk=function(){this.pa(kh.VISUAL)},p.Cc=function(t){var e=this.icon;return this.qh&&(e.removeEventListener("statechange",this.pk,!1,this),delete this.qh),e&&(this.Bk=e.getState()),Ln.l.Cc.call(this,t),0===t.getState()&&(this.qh=!0,Ee(t,"statechange",this.pk,!1,this)),this},Ln.prototype.setIcon=Ln.prototype.Cc,Ln.prototype.b=function(t){return new Uj(t.svg,t)},Ln.prototype.W=function(){var t=this.getIcon(),e=t.oo||0,n=Ln.l.forWorkerMessage.call(this),r=n.properties.icon;return r&&0<e&&Ya(r,{stick_color:t.no,stick_height:e}),n},Ln.prototype.forWorkerMessage=Ln.prototype.W,u(sh,M),t("H.map.Overlay",sh),sh.prototype.type=nh.OVERLAY,sh.prototype.J=function(){return this.a},sh.prototype.getBoundingBox=sh.prototype.J,sh.prototype.ae=function(t){return C(t,K,this.ae,0,t),this.aa(t)},sh.prototype.setBoundingBox=sh.prototype.ae,sh.prototype.da=function(){return this.a},sh.prototype.getGeometry=sh.prototype.da,sh.prototype.aa=function(t){var e=this.a,n=!e;return C(t,K,this.aa,0,t),!n&&e.ga(t)||(this.a=t,n||this.pa(kh.SPATIAL)),this},sh.prototype.setGeometry=sh.prototype.aa,sh.prototype.Lc=function(){return this.b.getData()},sh.prototype.getBitmap=sh.prototype.Lc,sh.prototype.Qk=function(t,e){var n=this.b;return n&&1!==n.getState()&&n.cancel(),this.b=new Pj(t,this.c,!0,B,e),this},sh.prototype.setBitmap=sh.prototype.Qk,sh.prototype.c=function(t,e){this.b=e,1===t&&this.pa(kh.VISUAL)},sh.prototype.Oc=function(){return this.f},sh.prototype.getOpacity=sh.prototype.Oc,sh.prototype.dc=function(t){var e=this.f,n=2>e;if(!(0<=t&&1>=t))throw new D(this.dc,0);return t!==e&&(this.f=t,n&&this.pa(kh.VISUAL)),this},sh.prototype.setOpacity=sh.prototype.dc,sh.prototype.W=function(){var t=sh.l.W.call(this);return t.geometry=zi(this.a).W(),t.properties.overlay=!0,t},sh.prototype.forWorkerMessage=sh.prototype.W,u(Mn,nl),t("H.map.layer.MarkerTileLayer",Mn);var Nn={markers:[],total:0,requested:0};function On(t,e,n,r,i){var o,a=zd(n);for(t.pixelProjection.Ka(a),e=t.Qd(t.we(e),a),n=t.Ge(e,e.left>e.right,~~n,r,i),t=n.tiles,n=n.total,r=t.length,i=[],o=0;o<r;o++)for(a=(e=t[o]).data.length;a--;)i.push(e.data[a]);return{markers:i,total:t.length,requested:n}}function Pn(t,e,n){var r,i=6;if(e){for(r=' expected close to: "'+e;i--;)-1!==(e=t.a.next())&&(r+=String.fromCharCode(e));r+='"'}throw new D(Qn,0,"- Malformed WKT: "+(r?n+r:"unexpected end of stream"))}function Rn(t,e){var n=t.next();n!==(e=e?")":"(")&&Pn(t,n,'"'+e+'"')}function Sn(t){return","===Tn(t)&&(t.next(),!0)}function Un(t,e,n,r,i){var o,a,s=2+e+n;for(a=1;a<=s;a++)(n=t.next())?(o=+n)!==o?Pn(t,n,"number"):1===a?r[i+1]=o:2===a?r[i]=o:3===a&&(r[i+2]=o):Pn(t,n);e||(r[i+2]=0)}Mn.prototype.yc=function(t,e,n,r){return this.la.providesDomMarkers()?Nn:On(this,t,e,n,r)},Mn.prototype.requestMarkers=Mn.prototype.yc,Mn.prototype.xc=function(t,e,n,r){return this.la.providesDomMarkers()?On(this,t,e,n,r):Nn},Mn.prototype.requestDomMarkers=Mn.prototype.xc;var Vn=[];function Wn(t,e,n,r){return r||Rn(t,0),Un(t,e,n,Vn,0),r||Rn(t,1),new lg(Vn[0],Vn[1],e?Vn[2]:B)}function Xn(t,e,n){var r=[];Rn(t,0);do{Un(t,e,n,r,r.length)}while(Sn(t));return Rn(t,1),new L(r)}function Yn(t,e,n){Rn(t,0);var r=Xn(t,e,n);if(Sn(t)){var i=[];do{i.push(Xn(t,e,n))}while(Sn(t))}return Rn(t,1),new O(r,i)}var Zn=[],$n=[Yn],ao=[Wn],bo={POINT:ao,LINESTRING:[Xn],POLYGON:$n,MULTIPOINT:[Wn,Ti],MULTILINESTRING:[Xn,ih],MULTIPOLYGON:[Yn,Gi],GEOMETRY:Zn,GEOMETRYCOLLECTION:Zn,CIRCULARSTRING:Zn,COMPOUNDCURVE:Zn,CURVEPOLYGON:Zn,MULTICURVE:Zn,MULTISURFACE:Zn,CURVE:Zn,SURFACE:Zn,POLYHEDRALSURFACE:Zn,TIN:Zn,TRIANGLE:Zn},co={Z:1,M:2,ZM:3};function Qn(t){var e,n=(t=new eo(t)).next();if((e=bo[n.toUpperCase()])||Pn(t,n,"type name"),e!==Zn){n=Tn(t);var r=1&(n=co[n.toUpperCase()]),i=n>>1;if(r|i&&t.next(),"EMPTY"===(n=Tn(t)))if(t.next(),r=e[1])var o=new r([]);else e!==ao&&(o=new L([]),e===$n&&(o=new O(o)));else if("("===n){if(o=e[0],e=e[1]){var a=[];if(Rn(t,0),o===Wn){var s="("!==Tn(t);do{a.push(o(t,r,i,s))}while(Sn(t))}else do{a.push(o(t,r,i))}while(Sn(t));Rn(t,1),r=new e(a)}else r=o(t,r,i);o=r}else Pn(t,n,'"Z", "M", "ZM", "(" or "EMPTY"');t.next()&&Pn(t,n,"end of stream")}return o||y}function eo(t){this.a=t}function Tn(t){var e=t.b;if(e===B){for(e=t.a;e.Kb()===fo;)e.next();if(go[e.Kb()])e=(e=e.next())===ho?"":String.fromCharCode(e);else{e.de();do{e.next()}while(!go[e.Kb()]);e=String.fromCharCode.apply(null,e.Dd())}t.b=e}return e}eo.prototype.next=function(){var t=Tn(this);return""!==t&&delete this.b,t};var fo=32,ho=-1,io={Jo:fo,Do:40,Io:41,Ao:44,Bo:ho},go=Object.keys(io).reduce((function(t,e){return t[io[e]]=!0,t}),nc());function jo(){}function ko(t){this.c=String(t),this.f=0,this.a=[],this.b=!1}function lo(t,e){lo.l.constructor.call(this,Hi,e),this.ae(t)}function mo(){return Hf("H-core","1.38.0","8be3148",{region:"row"})}t("H.util.ICharStream",jo),jo.prototype.next=function(){},jo.prototype.de=function(){},jo.prototype.Dd=function(){},jo.prototype.Kb=function(){},t("H.util.CharStream",ko),ko.prototype.next=function(){var t=this.c.charCodeAt(this.f++);return t=isNaN(t)?-1:t,this.b&&this.a.push(t),t},ko.prototype.de=function(){this.b=!0,this.a=[]},ko.prototype.Dd=function(){var t=this.a.slice();return this.b=!1,this.a=[],t},ko.prototype.Kb=function(){var t=this.c.charCodeAt(this.f);return isNaN(t)?-1:t},t("H.util.wkt.toGeometry",(function(t){return Qn(new ko(t))})),u(lo,uh),t("H.map.Rect",lo),lo.prototype.ae=function(t){if(!C(t,K))throw new D(this.ae,0,t);t.ga(this.oa)||(this.oa=this.B=t,this.a!==y&&lo.l.aa.call(this,zi(t)))},lo.prototype.setBoundingBox=lo.prototype.ae,lo.prototype.J=function(){return this.B},lo.prototype.getBoundingBox=lo.prototype.J,lo.prototype.aa=function(){return this},lo.prototype.setGeometry=lo.prototype.aa,lo.prototype.da=function(){return this.a===Hi&&lo.l.aa.call(this,zi(this.oa)),this.a},lo.prototype.getGeometry=lo.prototype.da,t("H.buildInfo",mo);var Gn="cn"===mo().region,hk=ik[Gn?"HARP":"WEBGL"],no,oo="maps".concat("js-"),po,qo,ro,so,to;if(po=x.document.querySelector('script[src*="'+oo+'"]'),!po)for(qo=x.document.getElementsByTagName("script"),so=new RegExp("^.*"+oo),to=0,ro=qo.length;to<ro;to++)if(so.test(qo[to].src)){po=qo[to];break}function uo(){var t=decodeURIComponent(no);if(t){t="/"===t[t.length-1]?t.substring(0,t.length-1):t;var e=x.document,n="";e?((e=e.createElement("a")).href=t,n=e.href):/[\w]+:\/\//.test(t)&&(n=t),(t=new URL(n)).pathname+="/"===t.pathname[t.pathname.length-1]?"styles":"/styles",t=t.toString()}else t="https://js.api.here.com/v3/3.1.38.0/styles";return t}function vo(t){var e=t.ownerDocument;e=e.documentElement||e.body.parentNode||e.body;try{var n=t.getBoundingClientRect()}catch(r){n={top:0,right:0,bottom:0,left:0,height:0,width:0}}return{x:n.left+("number"===typeof window.pageXOffset?window.pageXOffset:e.scrollLeft),y:n.top+("number"===typeof window.pageYOffset?window.pageYOffset:e.scrollTop)}}no=po?po.src.replace(/\/[^\/]*$/,"/"):"",t("H.getScriptPath",(function(){return no})),t("H.getStylePath",uo);var wo=function(){return this}.apply(null);function xo(t,e,n,r,i,o){if(isNaN(t))throw Error("x needs to be a number");if(isNaN(e))throw Error("y needs to be a number");if(isNaN(n))throw Error("pointer must have an id");this.viewportX=t,this.viewportY=e,this.target=null,this.id=n,this.type=r,this.dragTarget=null,this.button=uc(i)?i:-1,this.buttons=uc(o)?o:0,this.a=this.button}function yo(t,e,n){if(isNaN(e))throw Error("x needs to be a number");if(isNaN(n))throw Error("y needs to be a number");t.viewportX=e,t.viewportY=n}function zo(t,e){t.a=e,t.buttons|=Ao[+e]||0}function Bo(t,e){t.a=e,t.buttons&=~(Ao[+e]||0)}t("H.mapevents.Pointer",xo),xo.prototype.pm=function(){return this.a},xo.prototype.getLastChangedButton=xo.prototype.pm;var Ao=[1,4,2],Co={NONE:-1,LEFT:0,MIDDLE:1,RIGHT:2};function Do(t,e,n,r,i,o,a){Do.l.constructor.call(this,t),this.pointers=e,this.changedPointers=n,this.targetPointers=r,this.currentPointer=i,this.originalEvent=a,this.target=o}function Eo(t){this.a=t instanceof Array?t.slice(0):[]}function Fo(t,e){return-1!==(e=t.indexOf(e))?t.a[e]:null}function Go(t,e){for(var n=t.a.length,r=[];n--;)t.a[n].type!==e&&r.push(t.a[n]);t.a=r}function Ho(t,e){for(var n=t.a.length;n--;)if(t.a[n].dragTarget===e)return!0;return!1}function Io(t,e,n){if(n=n||{},!(t instanceof V))throw Error("events: map instance required");if(!(e instanceof Array))throw Error("events: map array required");nd.call(this),this.Ng=n.Ng||300,this.$i=n.$i||50,this.al=n.al||50,this.bl=n.bl||500,this.vh=n.vh||900,this.uh=n.uh||8,this.map=t,this.s=this.map.b,this.f=this.s.element,this.B=e,this.a=new Eo,this.b=new Eo,this.j={},this.c=null,this.u=!0,this.R={},this.g={},this.m=null,this.pe=A(this.pe,this),this.S={pointerdown:this.Cl,pointermove:this.Dl,pointerup:this.El,pointercancel:this.Bl},Jo(this)}function Jo(t,e){var n,r=t.B.length;for(n=0;n<r;n++){var i=t.B[n],o=i.listener;"function"===typeof o&&(e?(i.target||t.f).removeEventListener(i.Na,o):(i.target||t.f).addEventListener(i.Na,o))}}function Ko(t,e,n){var r;if("function"===typeof t.S[e]){"pointermove"!==e&&(t.u=!0);var i=0;for(r=t.b.length();i<r;i++){var o=t.b.a[i]||null;t.f.contains(n.composedPath()[0])?Lo(t,o,t.gj.bind(t,n,e,o)):t.gj(n,e,o,null)}}t.b.clear()}function Lo(t,e,n){if(t.c===e)n(e.target);else{var r=t.s,i=e.viewportX;if(e=e.viewportY,0>i||0>e||i>=r.width||e>=r.height)n(y);else{var o=t.map;o.Md(i,e,(function(t){n(t||o)}))}}}function No(t,e,n){e===t.c&&(Oo(t,e.dragTarget,"dragend",n,e),t.c=null,Mo(e.id,t.R)),e.dragTarget=null}function Mo(t,e){e[t]&&(e[t].timeout?clearTimeout(e[t].timeout):clearTimeout(e[t]),delete e[t])}function Po(t,e,n){var r=e.target,i=new G(e.viewportX,e.viewportY),o=e.id;Mo(o,t.g);var a=setTimeout((function(){r&&r===e.target&&i.Ta({x:e.viewportX,y:e.viewportY})<t.uh&&(Oo(t,r,"longpress",n,e),delete t.j[e.id])}),t.vh);t.g[o]={timeout:a,Oe:i}}function Oo(t,e,n,r,i){if(e&&"function"===typeof e.dispatchEvent){var o,a=Do,s=t.a.Ha(),l=t.b.Ha(),u=(t=t.a).a.length,c=[];for(o=0;o<u;o++)t.a[o].target===e&&c.push(t.a[o]);a=new a(n,s,l,c,i,e,r),i.button=/^(?:longpress|(?:dbl)?tap|pointer(?:down|up))$/.test(n)?i.a:Co.NONE,e.dispatchEvent(a)}return a}function Qo(t){this.i=A(this.i,this),Io.call(this,t,[{Na:"touchstart",listener:this.i},{Na:"touchmove",listener:this.i},{Na:"touchend",listener:this.i},{Na:"touchcancel",listener:this.i}]),this.K={touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",touchcancel:"pointercancel"},this.v=(t=(t=t.m)?t.L():null)?Array.prototype.slice.call(t.querySelectorAll("a"),0):[]}function Ro(t){var e=So(this);(window.PointerEvent||window.MSPointerEvent)&&e.push({Na:"MSHoldVisual",listener:"prevent"}),Io.call(this,t,e)}function So(t){var e,n,r=!!window.PointerEvent,i=[];return t.i=A(t.i,t),"MSPointerDown MSPointerMove MSPointerUp MSPointerCancel MSPointerOut MSPointerOver".split(" ").forEach((function(o){e=o.toLowerCase().replace(/ms/g,""),n=r?e:o,i.push({Na:n,listener:t.i,target:/^pointer(up|move)$/.test(e)?window:null})})),i}xo.Button=Co,u(Do,sd),t("H.mapevents.Event",Do),p=Eo.prototype,p.clear=function(){this.a.splice(0,this.a.length)},p.length=function(){return this.a.length},p.indexOf=function(t){for(var e=this.a.length;e--;)if(this.a[e].id===t)return e;return-1},p.remove=function(t){return-1!==(t=this.indexOf(t))?this.a.splice(t,1)[0]:null},p.push=function(t){if(t instanceof xo)return this.a.push(t);throw Error("list needs a pointer")},p.Ha=function(){return this.a},p.clone=function(){return new Eo(this.a)},u(Io,nd),p=Io.prototype,p.gj=function(t,e,n,r){Mo(n.id,this.R),this.S[e].call(this,n,r,t)},p.El=function(t,e,n){var r=t.id;t.target=e,No(this,t,n),Oo(this,e,"pointerup",n,t),"mouse"!==t.type&&Oo(this,e,"pointerleave",n,t),e=this.j[t.id];var i={x:t.viewportX,y:t.viewportY},o=n.timeStamp,a=t.target,s=this.m;e&&e.target===a&&e.Oe.Ta(i)<this.al&&o-e.Ai<this.bl?(Oo(this,a,"tap",n,t),s&&s.target===a&&o-s.Ai<this.Ng?s.Oe.Ta({x:t.viewportX,y:t.viewportY})<this.$i&&(Oo(this,a,"dbltap",n,t),this.m=null):this.m={target:a,Oe:new G(t.viewportX,t.viewportY),Ai:n.timeStamp}):this.m=null,this.j={},Mo(r,this.g)},p.pe=function(t,e){var n=this;Oo(this,t.dragTarget,"drag",e,t),Mo(t.id,this.R),this.R[t.id]=setTimeout((function(){n.pe(t,e)}),150)},p.Dl=function(t,e,n){var r=t.dragTarget,i=t.id,o=t.target;t.target=e,o!==e&&(Oo(this,o,"pointerleave",n,t),Oo(this,e,"pointerenter",n,t)),r?this.c?(this.pe(t,n),this.g[i]&&this.g[i].Oe.Ta({x:t.viewportX,y:t.viewportY})>this.uh&&Mo(i,this.g)):this.u?this.u=!1:(this.c=t,Oo(this,r,"dragstart",n,t),this.pe(t,n),delete this.j[i],this.u=!0):(!this.c||this.c&&this.c.dragTarget!==e&&this.c.dragTarget!==this.map)&&Oo(this,e,"pointermove",n,t)},p.Cl=function(t,e,n){var r=!(/^(?:mouse|pen)$/.test(t.type)&&0!==n.button);if(e){t.target=e,this.j[t.id]={Oe:new G(t.viewportX,t.viewportY),target:t.target,Ai:n.timeStamp},"mouse"!==t.type&&Oo(this,e,"pointerenter",n,t);var i=Oo(this,e,"pointerdown",n,t);!this.c&&r&&(e.draggable&&!Ho(this.a,e)?t.dragTarget=e:!this.map.draggable||i.defaultPrevented||Ho(this.a,this.map)||(t.dragTarget=this.map)),Po(this,t,n)}},p.Bl=function(t,e,n){var r=t.id;t.target=null,e?(Oo(this,e,"pointerleave",n,t),Oo(this,e,"pointercancel",n,t)):Oo(this,this.map,"pointercancel",n,t),No(this,t,n),this.j={},Mo(r,this.g)},p.o=function(){Jo(this,!0),this.a.clear(),this.b.clear();var t,e=this.R;for(t in e)Mo(t,e);for(var n in e=this.g)Mo(n,e);delete this.f,delete this.B,delete this.a,delete this.b,delete this.map,this.m=null,delete this.j,this.c=null,nd.prototype.o.call(this)},u(Qo,Io),Qo.prototype.i=function(t){var e,n=t.touches,r=this.a.length();if("touchstart"===t.type&&r>=n.length){for(r=this.a.clone(),e=n.length;e--;)r.remove(n[e].identifier);for(e=r.length();e--;)this.a.remove((r.a[e]||null).id);this.b=r,Ko(this,"pointercancel",t),this.b.clear()}if(this.K[t.type]){n=vo(this.s.element),r=t.type;var i,o=(e=t.changedTouches).length;for(this.b.clear(),i=0;i<o;i++){var a=e[i],s=Fo(this.a,a.identifier),l=a.pageX-n.x,u=a.pageY-n.y;if(s)if("touchmove"===r){a=Math.abs(s.viewportX-l);var c=Math.abs(s.viewportY-u);(1<a||1<c||1===a&&1===c)&&(yo(s,l,u),this.b.push(s))}else"touchend"===r&&(this.a.remove(s.id),this.b.push(s),Bo(s,Co.LEFT));else s=new xo(l,u,a.identifier,"touch",Co.LEFT,1),this.a.push(s),this.b.push(s)}Ko(this,this.K[t.type],t),-1===this.v.indexOf(t.target)&&t.preventDefault()}},Qo.prototype.o=function(){this.v=null,Io.prototype.o.call(this)},u(Ro,Io);var To={2:"touch",3:"pen",4:"mouse"};function Uo(t,e,n,r){Uo.l.constructor.call(this,"contextmenu"),this.items=[],this.viewportX=t,this.viewportY=e,this.target=n,this.originalEvent=r}function Vo(t){this.ih=A(this.ih,this),this.kh=A(this.kh,this),this.jh=A(this.jh,this),this.v=!1,this.i=-1,this.K=0,Vo.l.constructor.call(this,t,[{Na:"contextmenu",listener:this.ih},{target:t,Na:"longpress",listener:this.kh},{target:t,Na:"dbltap",listener:this.jh}])}function Wo(t,e,n,r,i){var o=t.map,a=Date.now()-t.K;i?!t.v&&a>t.vh&&(t.v=!0,i.dispatchEvent(new Uo(e,n,i,r)),Ee(o.L(),Xo,t.fj,!1,t)):o.Md(e,n,t.zn.bind(t,e,n,r))}Ro.prototype.i=function(t){var e=window.PointerEvent?t.type:t.type.toLowerCase().replace(/ms/g,""),n=vo(this.f),r=Fo(this.a,t.pointerId),i=t.pageX-n.x;n=t.pageY-n.y;var o=To[t.pointerType]||t.pointerType;if($c&&"rtl"===x.getComputedStyle(this.s.element).direction&&(i-=(x.devicePixelRatio-1)*this.s.width),!(r||/^pointer(up|out|cancel)$/.test(e)||"touch"===o&&"pointerdown"!==e)){r={x:i,y:n};var a=t.pointerType;"number"===typeof a&&(a=To[a]),r=new xo(r.x,r.y,t.pointerId,a,t.button,t.buttons),this.a.push(r)}r&&(/^pointer(up|cancel)$/.test(e)?("touch"===o&&this.a.remove(r.id),Bo(r,t.button)):"pointerdown"===e&&("touch"===t.pointerType&&(Go(this.a,"mouse"),Go(this.a,"pen")),zo(r,t.button)),this.b.push(r),"pointermove"!==e?(yo(r,i,n),Ko(this,/^pointer(over|out)$/.test(e)?"pointermove":e,t)):r.viewportX===i&&r.viewportY===n||(yo(r,i,n),Ko(this,e,t))),this.b.clear()},u(Uo,sd),t("H.mapevents.ContextMenuEvent",Uo),u(Vo,Io),p=Vo.prototype,p.kh=function(t){var e=t.currentPointer;"touch"===e.type&&1===t.pointers.length&&Wo(this,e.viewportX,e.viewportY,t.originalEvent,t.target)},p.jh=function(t){"touch"===t.currentPointer.type&&(this.K=Date.now())},p.ih=function(t){var e=this;-1===this.i?this.i=setTimeout((function(){var n=vo(e.f),r=t.pageX-n.x;n=t.pageY-n.y,e.i=-1,Wo(e,r,n,t)}),this.Ng):(clearInterval(this.i),this.i=-1),t.preventDefault()},p.zn=function(t,e,n,r){Wo(this,t,e,n,r=r&&Da(r.dispatchEvent)?r:this.map)},p.fj=function(){this.v&&(this.v=!1,this.map.dispatchEvent(new sd("contextmenuclose",this.map)))},p.o=function(){var t=this.map.L();clearInterval(this.i),t&&Le(t,Xo,this.fj,!1,this),Io.prototype.o.call(this)};var Xo=["mousedown","touchstart","pointerdown","wheel"];function Yo(t,e,n,r,i){Yo.l.constructor.call(this,"wheel"),this.delta=t,this.viewportX=e,this.viewportY=n,this.target=r,this.originalEvent=i}function Zo(t){var e="onwheel"in document;this.ea=e,this.K=(e?"d":"wheelD")+"elta",this.i=A(this.i,this),Zo.l.constructor.call(this,t,[{Na:(e?"":"mouse")+"wheel",listener:this.i}]),this.v=this.map.b}function $o(t){this.i=A(this.i,this),Io.call(this,t,[{Na:"mousedown",listener:this.i},{Na:"mousemove",listener:this.i,target:window},{Na:"mouseup",listener:this.i,target:window},{Na:"mouseover",listener:this.i},{Na:"mouseout",listener:this.i},{Na:"dragstart",listener:this.v}])}function ap(t){var e=t.b.element.style;if(-1!==bp.indexOf(t))throw Error("InvalidArgument: map is already in use");this.a=t,bp.push(t),e.msTouchAction=e.touchAction="none",ad||!window.PointerEvent&&!window.MSPointerEvent?(this.c=new Qo(this.a),this.b=new $o(this.a)):this.c=new Ro(this.a),this.g=new Zo(this.a),this.f=new Vo(this.a),this.a.ob(this.D,this),nd.call(this)}u(Yo,sd),t("H.mapevents.WheelEvent",Yo),u(Zo,Io),Zo.prototype.i=function(t){if(!t.ll){var e=vo(this.f),n=t.pageX-e.x;e=t.pageY-e.y;var r,i=this.K,o=t[i+(i+"Y"in t?"Y":"")];if($c&&"rtl"===x.getComputedStyle(this.v.element).direction&&(n-=(x.devicePixelRatio-1)*this.v.width),o){var a=Math.abs,s=a(o);o=(!(r=t[i+"X"])||3<=s/a(r))&&(!(r=t[i+"Z"])||3<=s/a(r))?(+(0<o)-+(0>o))*(this.ea?1:-1):0}(n=new Yo(o,n,e,null,t)).delta&&(t.stopImmediatePropagation(),t.preventDefault(),this.map.Md(n.viewportX,n.viewportY,this.N.bind(this,n)))}},Zo.prototype.N=function(t,e){var n,r,i=t.target=e||this.map;setTimeout((function(){i.dispatchEvent(t),t.c||(n=t.originalEvent,(r=new x.WheelEvent("wheel",n)).ll=!0,n.target.dispatchEvent(r))}),0)},u($o,Io),$o.prototype.i=function(t){var e,n=t.type,r=vo(this.f);r={x:t.pageX-r.x,y:t.pageY-r.y},(e=this.a.a[0]||null)||(e=new xo(r.x,r.y,1,"mouse"),this.a.push(e)),this.b.push(e),yo(e,r.x,r.y),/^mouse(?:move|over|out)$/.test(n)?Ko(this,"pointermove",t):(/^mouse(down|up)$/.test(n)&&(r=t.which-1,"up"===wo.RegExp.$1?Bo(e,r):zo(e,r)),Ko(this,n.replace("mouse","pointer"),t)),this.b.clear()},$o.prototype.v=function(t){t.preventDefault()},u(ap,nd),t("H.mapevents.MapEvents",ap);var bp=[];function cp(t,e){var n;if(e=void 0===e?{}:e,cp.l.constructor.call(this),-1!==dp.indexOf(t))throw new D(cp,0,"events are already used");this.b=n=t.a,this.j=t,dp.push(t),n.draggable=!0,this.i=e.kinetics||{duration:600,ease:Zl},this.m=e.modifierKey||"Alt",this.enable(e.enabled),this.c=n.b,this.f=this.c.element,this.g=0,n.addEventListener("dragstart",this.Fh,!1,this),n.addEventListener("drag",this.dk,!1,this),n.addEventListener("dragend",this.Eh,!0,this),n.addEventListener("wheel",this.tk,!1,this),n.addEventListener("dbltap",this.nk,!1,this),n.addEventListener("pointermove",this.ek,!1,this),De(this.f,"contextmenu",this.ck,!1,this),t.ob(this.D,this)}Gc(bp),ap.prototype.D=function(){delete this.a,this.c.D(),this.g.D(),this.f.D(),this.b&&this.b.D(),bp.splice(bp.indexOf(this.a),1),nd.prototype.D.call(this)},ap.prototype.dispose=ap.prototype.D,ap.prototype.Ol=function(){return this.a},ap.prototype.getAttachedMap=ap.prototype.Ol,u(cp,nd),t("H.mapevents.Behavior",cp);var dp=[];Gc(dp),cp.prototype.a=0;var ep={PANNING:1,PINCH_ZOOM:2,WHEEL_ZOOM:4,DBL_TAP_ZOOM:8,FRACTIONAL_ZOOM:16,TILT:32,HEADING:64};cp.Feature=ep;var fp=ep.PANNING,gp=ep.PINCH_ZOOM,hp=ep.WHEEL_ZOOM,ip=ep.DBL_TAP_ZOOM,jp=ep.FRACTIONAL_ZOOM,kp=ep.TILT,lp=ep.HEADING,mp=fp|gp|hp|ip|jp|kp|lp;function np(t,e){if(t!==+t||t%1||0>t||2147483647<t)throw new D(e,0,"integer in range [0...0x7FFFFFFF] required")}function op(t,e,n){var r,i="touch"===e.currentPointer.type,o=0;if(r=!i){r=t.m;var a,s=e.originalEvent;a=s.getModifierState?s.getModifierState(r):!!s[r.replace(/^Control$/,"ctrl").toLowerCase()+"Key"],r=a}return r?o|=kp|lp:(o|=fp,i&&(2===(e=e.pointers).length&&(o|=gp|lp,n?55>Bd(e[0].viewportY-e[1].viewportY)&&(o|=kp):t.nh&Hl.TILT&&(o|=kp)))),((o&=t.a)&kp?Hl.TILT:0)|(o&lp?Hl.HEADING:0)|(o&gp?Hl.ZOOM:0)|(o&fp?Hl.COORD:0)}function pp(t){var e=t.pointers;return t=e[0],e=e[1],t=[t.viewportX,t.viewportY],e&&t.push(e.viewportX,e.viewportY),t}function qp(t,e,n,r,i){var o=+n-+e;if(t=t.b.c,isNaN(+e))throw Error("start zoom needs to be a number");if(isNaN(+n))throw Error("to zoom needs to be a number");0!==o&&(t.startControl(null,r,i),t.control(0,0,6,0,0,0),t.endControl(!0,(function(t){t.zoom=n})))}function rp(t,e){return Ya.apply(null,arguments),t}function sp(t,e){var n=x.console;n&&n.warn&&(t=wc(t)+" is deprecated and will be removed soon. ",e&&(t+=e),n.warn(t))}cp.DRAGGING=fp,cp.WHEELZOOM=hp,cp.DBLTAPZOOM=ip,cp.FRACTIONALZOOM=jp,cp.prototype.disable=function(t){var e=this.a;t!==B?(np(t,this.disable),e^=e&t):e=0,this.c.endInteraction(!0),this.a=e,this.b.draggable=0<(e&(fp|kp|lp|gp))},cp.prototype.disable=cp.prototype.disable,cp.prototype.enable=function(t){var e=this.a;t!==B?(np(t,this.enable),e|=t&mp):e=mp,this.a=e,this.b.draggable=0<(e&(fp|kp|lp|gp))},cp.prototype.enable=cp.prototype.enable,cp.prototype.isEnabled=function(t){return np(t,this.isEnabled),t===(this.a&t)},cp.prototype.isEnabled=cp.prototype.isEnabled,p=cp.prototype,p.nh=0,p.Fh=function(t){var e=op(this,t,!0);if(this.nh=e){var n=this.c;if(t=pp(t),n.startInteraction(e,this.i),n.interaction.apply(n,t),this.a&hp&&!(this.a&jp)&&(e=t[0],n=t[1],this.g)){t=this.b.kb();var r=(0>this.g?Ad:zd)(t);t!==r&&(this.g=0,qp(this,t,r,e,n))}}},p.dk=function(t){var e=op(this,t,!1);if(e!==this.nh)"pointerout"!==t.originalEvent.type&&"pointerover"!==t.originalEvent.type&&(this.Eh(t),this.Fh(t));else if(e){e=this.c;var n=pp(t);e.interaction.apply(e,n),t.originalEvent.preventDefault()}},p.Eh=function(t){op(this,t,!1)&&this.c.endInteraction(!this.i)},p.tk=function(t){if(!t.defaultPrevented&&this.a&hp){var e=t.delta,n=this.b.kb(),r=this.b,i=r.f.type;r=this.a&jp?n-e:(0>-e?Ad:zd)(n)-e,i!==ik.P2D&&i!==ik.WEBGL&&i!==ik.HARP||(qp(this,n,r,t.viewportX,t.viewportY),this.g=e),t.preventDefault()}},p.ek=function(){},p.nk=function(t){var e=t.currentPointer,n=this.b.kb(),r=t.currentPointer.type,i=this.b.f.type;(i===ik.P2D||i===ik.WEBGL||i===ik.HARP)&&this.a&ip&&(t="mouse"===r?0===t.originalEvent.button?-1:1:0<t.pointers.length?1:-1,qp(this,n,t=this.a&jp?n-t:(0>-t?Ad:zd)(n)-t,e.viewportX,e.viewportY))},p.ck=function(t){return!(this.a&ip)||(t.preventDefault(),!1)},p.D=function(){var t=this.b;t&&(t.draggable=!1,t.removeEventListener("dragstart",this.Fh,!1,this),t.removeEventListener("drag",this.dk,!1,this),t.removeEventListener("dragend",this.Eh,!0,this),t.removeEventListener("wheel",this.tk,!1,this),t.removeEventListener("dbltap",this.nk,!1,this),t.removeEventListener("pointermove",this.ek,!1,this),delete this.b),this.f&&(this.f.style.msTouchAction="",Le(this.f,"contextmenu",this.ck,!1,this),delete this.f),delete this.c,delete this.i,dp.splice(dp.indexOf(this.j),1),delete this.j,nd.prototype.D.call(this)},cp.prototype.dispose=cp.prototype.D,t("H.mapevents.buildInfo",(function(){return Hf("H-mapevents","1.38.0","8be3148",{region:"row"})})),T.prototype.s=ca(3,(function(t){var e=this.getCache(),n=this;if(t!==y){C(t,Pk,T.prototype.s,0);var r=t}else r=wl;r!==e&&e.ma((function(t,e,i){return!!n.Tb(t)&&(r.add(t,e,i),!0)})),this.S=r})),qi.prototype.b=ca(2,(function(t){this.g=t,(t=this.getState())!==Uh.INIT&&t!==Uh.LOADING&&xi(this)}));var tp=globalThis;function up(){}sc("monospace serif"),up.prototype.pop=function(t){return this[t]||(this[t]=[]),this[t].pop()||document.createElement("canvas")},up.prototype.push=function(t,e){this[e]||(this[e]=[]),this[e].push(t)};var vp=new up;function W(t,e,n,r,i,o){if(!t||!e)throw new D(W,B,'Parameters "scheme" and "host" must be specified');this.ui(t),this.Ye(e),this.td(n),this.pi(i),this.Nk(o),this.ng(r)}function wp(t,e){var n,r,i,o=x.document,a="";if(o){if(a=o.createElement("a"),e){var s=(n=o.getElementsByTagName("base")[0])&&n.href,l=o.head,u=n||l.appendChild(o.createElement("base"));u.href=e}a.href=t,a=a.href,e&&(n?n.href=s:l.removeChild(u))}else/[\w]+:\/\//.test(t)&&(a=t);if(t=(s=/(?:(\w+):\/\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\/[^?#]*)?(\?[^#]+)?(#.*)?/.exec(a))[1],l=s[4],e=s[5],u=s[6],o=s[7],n=s[8],!s[2]&&l&&/@/.test(l)&&(l=l.split("@")[1]),s=W,u=u&&0<u.length?u.substr(1):"",a={},o)for(r=/([?&]?([^=&+]+))(=([^&]+))?/g;i=r.exec(o);)a[decodeURIComponent(i[2])]=i[4]?decodeURIComponent(i[4]):void 0;return new s(t,l,u,a,isNaN(+e)?void 0:+e,n&&0<n.length?n.substr(1):"")}function zp(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16)}))}function yp(t){var e,n=[],r=t.a,i={};for(e in r){if(r.hasOwnProperty(e)&&"function"!==typeof r[e]){var o=t.a[e];i.vd=zp(e),C(o,Ap)?o.a.forEach(function(t){return function(e){n.push(t.vd+"="+zp(e))}}(i)):C(o,Bp)?n.push(i.vd+"="+o.b.map((function(t){return zp(t)})).join(o.a)):n.push(void 0===o?i.vd:i.vd+"="+zp(o))}i={vd:i.vd}}return 0<n.length?"?"+n.join("&"):""}function Cp(t){var e=Hf("H-service","1.38.0","8be3148",{region:"row"});return t.a.xnlp="CL_JSMv3."+e.version,t}function xp(t){var e,n=0;for(e in t.a)if(t.a.hasOwnProperty(e)&&"function"!==typeof t.a[e]&&0<++n)break;return!n}function Dp(t,e){if(zc(t))for(var n=0;n<t.length;n++){var r=t[n];if(!Ac(r)&&!Dc(r)){var i="The Array does not contain only strings and numbers";break}}else i="Not an Array";if(i)throw new D(e,0,t);return t}function Ap(t){this.a=Dp(t,Ap)}function Bp(t,e){if(this.b=Dp(t,Bp),!/^[!\$\(\)\*\+,;]$/.test(e))throw new D(Bp,1,'Invalid delimiter "'+e+'"');this.a=e}function Ep(t,e){C(t,Fp,Ep,0);var n={};Object.assign(n,e),n.min=n.min||0,n.max=n.max||20,n.tileSize=n.tileSize||512,n.getURL=function(e,r,i){return t.C().clone().F(t.b.fg+"/"+t.b.Xf+"/"+i+"/"+e+"/"+r+"/"+t.b.format).I(t.f).clone().I({size:n.tileSize})},Ck.call(this,n),this.i=t}function X(t){var e=(t=rp({},this.c,t)).apikey||t.apiKey,n=t.baseUrl;if(n=e?n?0:"baseUrl":"apikey")throw new D(X,0,'"'+n+'" must be specified');this.Pk(t.baseUrl),this.b=e,this.a.I({apikey:e}),this.f=t.headers||{},this.g=Wa(t.servicesConfig||{})}function Hp(t){if(!t||!Da(t.requestData))throw new D(Hp,0,"options.requestData");Hp.l.constructor.call(this,t),this.K=t.requestData,this.B=!!t.providesDomMarkers}function Ip(){this.a={}}t("H.service.util.eval",(function(a){return eval(a)})),t("H.service.Url",W),W.parse=wp,W.prototype.clone=function(){var t,e={};for(t in this.a)e[t]=this.a[t];return new W(this.i,this.g,this.b,e,this.f,this.c)},W.prototype.clone=W.prototype.clone,W.prototype.ui=function(t){if(!t||"string"!==typeof t)throw new D(this.ui,0,'The "scheme" parameter must be a non-empty string.');return this.i=t,this},W.prototype.setScheme=W.prototype.ui,W.prototype.Om=function(){return this.i},W.prototype.getScheme=W.prototype.Om,W.prototype.Ye=function(t){if(!t||"string"!==typeof t||"-"===t.charAt(0)||"."===t.charAt(0)||"."===t.charAt(t.length-1))throw new D(this.Ye,0,'The "host" parameter is not a valid host name.');return this.g=t,this},W.prototype.setHost=W.prototype.Ye,W.prototype.km=function(){return this.g},W.prototype.getHost=W.prototype.km,W.prototype.td=function(t){return this.b=t||void 0,this},W.prototype.setPath=W.prototype.td,W.prototype.Cm=function(){return this.b},W.prototype.getPath=W.prototype.Cm,W.prototype.ng=function(t){if(t){if("object"!=typeof t)throw new D(this.ng,0,'Parameter "params" must be an object.');this.a=t}else this.a={};return this},W.prototype.setQuery=W.prototype.ng,W.prototype.Mj=function(){return!xp(this)},W.prototype.hasQuery=W.prototype.Mj,W.prototype.getQuery=function(){return this.a},W.prototype.getQuery=W.prototype.getQuery,W.prototype.pi=function(t){if(void 0===t)this.f=t;else{var e=Zd(+t<<0,0,65535);if(e!=t)throw new D(this.pi,0,'Parameter "port" must be an integer in range [0...65535]');this.f=e}return this},W.prototype.setPort=W.prototype.pi,W.prototype.Fm=function(){return this.f},W.prototype.getPort=W.prototype.Fm,W.prototype.Nk=function(t){return this.c=t||void 0,this},W.prototype.setAnchor=W.prototype.Nk,W.prototype.fd=function(){return this.c},W.prototype.getAnchor=W.prototype.fd,W.prototype.I=function(t){if("object"!==typeof t)throw new D(this.I,0,'Parameter "other" must be an object.');var e,n=this.a;for(e in t)t.hasOwnProperty(e)&&"function"!==typeof t[e]&&(n[e]=t[e]);return this},W.prototype.mergeQuery=W.prototype.I,W.prototype.za=function(t){if(!t||"string"!==typeof t)throw new D(this.za,0,'Parameter "subDomain" must be a non-empty string');return"."===t.substr(t.length-1)&&(t=t.substr(0,t.length-1)),this.Ye(t+"."+this.g)},W.prototype.addSubDomain=W.prototype.za,W.prototype.F=function(t){if(!t||"string"!==typeof t)throw new D(this.F,0,'Parameter "subPath" must be a non-empty string');return this.td((this.b?this.b+"/":"")+t)},W.prototype.addSubPath=W.prototype.F,W.prototype.toString=function(){return[this.i+"://",this.g,this.f?":"+this.f:"",this.b||!xp(this)||this.c?"/":"",this.b?encodeURI(this.b):"",yp(this),this.c?"#"+encodeURIComponent(this.c):""].join("")},W.prototype.toString=W.prototype.toString,W.MultiValueQueryParameter=Ap,Ap.prototype.Zm=function(){return this.a},Ap.prototype.getValues=Ap.prototype.Zm,W.DelimitedQuerySubValues=Bp,u(Ep,Ck),t("H.service.rasterTile.Provider",Ep),Ep.prototype.ca=function(t,e){var n=this.i;return Gp(n.ca(),n.b.fg+"."+n.$(),e,t)},Ep.prototype.getCopyrights=Ep.prototype.ca,Ep.prototype.m=function(){return md()},Ep.prototype.f=function(){return md()?ld():Ep.l.f.call(this)},t("H.service.Platform",X),X.prototype.c={apikey:null,baseUrl:new W("https","hereapi"+(Gn?".cn":".com"))},X.prototype.Pk=function(t){this.a=Cp(t.clone()),this.b=t=this.b,this.a.I({apikey:t})},X.prototype.setBaseUrl=X.prototype.Pk,X.prototype.Db=function(){return this.a},X.prototype.getBaseUrl=X.prototype.Db,X.prototype.Ma=function(t,e){try{return t.Tj=!0,new t(rp({platformBaseUrl:this.Db(),headers:this.f},this.g[t.CONFIG_KEY]||{},e||{}))}finally{t.Tj=!1}},X.prototype.createService=X.prototype.Ma,X.prototype.sf=function(t,e,n){var r=this;if(!H.map.render.harp)throw Error("HARP engine module not found");if(!Ea(t)&&!Ac(t))throw new D(this.sf,0,"is invalid: must be either a configuration object or a URL");if(!Da(e))throw new D(this.sf,1,"is invalid: must be a Function");if(!Da(n))throw new D(this.sf,2,"is invalid: must be a Function");var i=new H.map.render.harp.Style(t);i.addEventListener("change",(function(){var t=i.getState();if(-1===t)n(Error("H.service.platform#createHybridLayers method failed to load style configuration"));else if(2===t){t={dark:!0};var o=r.gh({resource:"background",queryParams:{style:"satellite.day"}}),a=i.lc(),s={styles:[{technique:"raster",attr:{gamma:1,brightness:1}}]};a.definitions&&(void 0!==a.definitions["Satellite.Texture.Gamma"]&&(s.styles[0].attr.gamma=a.definitions["Satellite.Texture.Gamma"]),void 0!==a.definitions["Satellite.Texture.Brightness"]&&(s.styles[0].attr.brightness=a.definitions["Satellite.Texture.Brightness"])),o=new Ep(o,{engineType:Kn,style:new H.map.render.harp.Style(s)}),e({raster:new ql(o,t),vector:r.De().cd(i,{engineType:Kn},t)})}})),i.load()},X.prototype.createHybridLayers=X.prototype.sf,X.prototype.rf=function(t,e,n,r,i,o){function a(t,e,i){e=uo()+"/"+e,e=u===ik.WEBGL?new qi(e):new H.map.render.harp.Style(e);var a,s={engineType:u};return h&&h.politicalView&&(s.politicalView=h.politicalView),n&&(s.lg=n),r&&(s.lg2=r),o&&(s.pois=o),i&&(a={dark:i}),t.cd(e,s,a)}function s(t,e,n,r,i){return t.ic(e,n,p,r,f,1,i,c)}var l=this,u=hk,c={crossOrigin:"anonymous"};if(Ea(t)){var h=t;"crossOrigin"in h&&(c.crossOrigin=h.crossOrigin),t=h.tileSize,e=h.ppi,n=h.lg,r=h.lg2,i=h.style,o=h.pois,void 0!==h.engineType&&(u=h.engineType,c.engineType=u)}var p=t||512,f={};if(0>[72,250,320,500].indexOf(+e)){if(e!==B)throw new D(this.rf,1,e)}else f.ppi=+e;if(n&&(f.lg=n),r&&(f.lg2=r),i&&(f.style=i),o&&(f.pois=!!o),u===ik.HARP&&!H.map.render.harp)throw new D(this.rf,0,"HARP engine is not supported, module not found");if(t={},Gn)rp(t,{vector:{normal:{map:a(this.De(),"harp/oslo/normal.day.json")}}});else{i=this.bh();var d=this.bh({type:"aerial"}),y=this.Fj(),g=y.Yi(f.lg?{lg:f.lg,i18n:!0,engineType:u}:{engineType:u});if(rp(t,{raster:{normal:{xbase:s(i,"xbasetile","normal.day","png8",!1),xbasenight:s(i,"xbasetile","normal.night","png8",!0),base:s(i,"basetile","normal.day","png8",!1),basenight:s(i,"basetile","normal.night","png8",!0),map:s(i,"maptile","normal.day","png8",!1),mapnight:s(i,"maptile","normal.night","png8",!0),trafficincidents:g,transit:s(i,"maptile","normal.day.transit","png8",!1),labels:s(i,"labeltile","normal.day","png",!1)},satellite:{xbase:s(d,"xbasetile","hybrid.day","jpg",!0),base:s(d,"basetile","hybrid.day","jpg",!0),map:s(d,"maptile","hybrid.day","jpg",!0),labels:s(d,"labeltile","hybrid.day","png",!0)},terrain:{xbase:s(d,"xbasetile","terrain.day","jpg",!1),base:s(d,"basetile","terrain.day","jpg",!1),map:s(d,"maptile","terrain.day","jpg",!1),labels:s(d,"labeltile","terrain.day","png",!1)}}}),u!==ik.P2D&&(rp(t,{vector:{normal:{traffic:y.Xi(void 0,u),trafficincidents:g}}}),i=this.De(),u===ik.WEBGL?(t.vector.normal.map=a(i,"omv/miami/normal.day.yaml"),t.vector.normal.truck=a(i,"omv/miami/truck.day.yaml")):u===ik.HARP&&(t.vector.normal.map=a(i,"harp/oslo/normal.day.json"),t.vector.normal.truck=a(i,"harp/oslo/normal.day.json"))),u===ik.HARP){var v={ppi:72<e?400:100,size:256<p?512:256,features:"pois:"+(!0===o||Ac(o)&&/[^0]/.test(o)?"all":"disabled")};if(n&&(v.lang=n),r&&(v.lang2=r),h&&h.politicalView&&(v.pview=h.politicalView),e={dark:!0},i=function(t,e,n,r){var i=rp({},v);return/^explore\./.test(e)||delete i.features,new ql(r=new Ep(t=l.gh({resource:t,queryParams:rp({style:e},i)}),{engineType:u,style:r}),n)},rp(t.raster.normal,{base:i("background","explore.day"),basenight:i("background","explore.night",e),map:i("base","explore.day"),mapnight:i("base","explore.night",e),labels:i("label","explore.day")}),rp(t.raster.satellite,{xbase:i("background","satellite.day",e),base:i("background","explore.satellite.day",e),map:i("base","explore.satellite.day",e),labels:i("label","explore.satellite.day")}),u===ik.HARP){d=this.De(),rp(t.vector.normal,{mapnight:a(d,"harp/oslo/normal.night.json",!0),lite:a(d,"harp/oslo/lite.day.json"),litenight:a(d,"harp/oslo/lite.night.json",!0),ism:a(d,"harp/oslo/ism.day.json"),ismnight:a(d,"harp/oslo/ism.night.json",!0)}),y={styles:[{technique:"raster",attr:{gamma:["interpolate",["linear"],["zoom"],0,1,13,1.2,17,1.3],brightness:["interpolate",["linear"],["zoom"],0,.7,13,.9,17,1]}}]},g=[];for(var m=0;4>m;m++){var b=new H.map.render.harp.Style(JSON.parse(JSON.stringify(y)));b=i("background","satellite.day",e,b),g.push(b)}t.hybrid={day:{raster:g[0],vector:a(d,"harp/oslo/hybrid.day.json",!0)},night:{raster:g[1],vector:a(d,"harp/oslo/hybrid.night.json",!0)},liteday:{raster:g[2],vector:a(d,"harp/oslo/lite.hybrid.day.json",!0)},litenight:{raster:g[3],vector:a(d,"harp/oslo/lite.hybrid.night.json",!0)}}}}}return t},X.prototype.createDefaultLayers=X.prototype.rf,u(Hp,T),t("H.map.provider.MarkerTileProvider",Hp),Hp.prototype.Gd=function(t){return t?t.length+1:1},Hp.prototype.getEntryWeight=Hp.prototype.Gd,Hp.prototype.G=function(t,e,n,r,i){var o=this;return this.K(t,e,n,(function(i){for(var a,s,l=[],u=i.length;u--;)(s=i[u]).qo=o.getTileKey(t,e,n),s.ia(o),a=s.rb(),(C(s,$i)||1===a.getState())&&l.push(i[u]);r(l)}),i)},Hp.prototype.requestInternal=Hp.prototype.G,Hp.prototype.Rd=function(t,e){e===kh.VISUAL&&(t=this.Fb().get(t.qo))&&(t.valid=!1,this.Sa(t))},Hp.prototype.invalidateObject=Hp.prototype.Rd,Hp.prototype.Lb=function(){return this.B},Hp.prototype.providesDomMarkers=Hp.prototype.Lb,Hp.prototype.Mb=ff,Hp.prototype.providesMarkers=Hp.prototype.Mb,Ip.prototype.rb=function(t,e){var n,r=t+e;return(n=this.a[r])?n:(t=(t=Jp.MARKER.replace("{{icon}}",Kp[t]||Kp.OTHER)).replace("{{color}}",Lp[e]||Lp.BLOCKING),e={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Vi(Wi.POLYGON,Mp.MARKER)},this.a[r]=new Uj(t,e))};var Jp={MARKER:'<svg width="26" height="33" enable-background="new 0 0 26 33" viewBox="0 0 26 33" xmlns="http://www.w3.org/2000/svg"><path d="m26 33h-26v-33h26z" fill="#8c8c8c" opacity="0"/><path d="m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026" fill="#878787" opacity=".6"/><path d="m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z" fill="{{color}}"/>{{icon}}</svg>'},Kp={CONGESTION:'<path style="fill:#FFFFFF;" d="M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z"/>',ROADWORKS:'<path d="m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z" fill="#fff"/>',ACCIDENT:'<path style="fill:#FFFFFF;" d="M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z"/>',OTHER:'<path style="fill:#FFFFFF;" d="M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z"/>'},Lp={BLOCKING:"#323232",VERYHIGH:"#d5232f",HIGH:"#ffa100"},Mp={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function Np(t,e,n){(n=n||{}).criticality||(n.criticality="major,critical"),C(t,Op,Np,0),Hp.call(this,{max:20,min:8,requestData:A(this.N,this),engineType:n.engineType}),this.c=new Ip,this.v=t,this.i=n,this.reload=A(this.reload,this),this.u=setInterval(this.reload,e||18e4)}u(Np,Hp),t("H.service.traffic.incidents.Provider",Np);var Pp={minor:"HIGH","low impact":"HIGH",major:"VERYHIGH",critical:"BLOCKING"};Np.prototype.N=function(t,e,n,r,i){var o=this,a=this.c;return this.v.requestIncidentsByTile(t,e,n,(function(t){var e,n=[];if(t=t.TRAFFIC_ITEMS)for(e=(t=t.TRAFFIC_ITEM).length;e--;){var i=t[e],s=i.TRAFFIC_ITEM_TYPE_DESC;switch(s){case"ACCIDENT":case"CONGESTION":var l=s;break;case"CONSTRUCTION":l="ROADWORKS";break;default:l="OTHER"}l=a.rb(l,Pp[i.CRITICALITY.DESCRIPTION]),(s=new Ln({lat:(s=i.LOCATION.GEOLOC.ORIGIN).LATITUDE,lng:s.LONGITUDE},{provider:o,icon:l})).setData(i),n.push(s)}r(n)}),i,this.i)},Np.prototype.D=function(){Hp.prototype.D.call(this),clearInterval(this.u)},Np.prototype.dispose=Np.prototype.D;var Qp="A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A".split(" ");function Rp(t,e,n,r){Rp.l.constructor.call(this,{min:10,max:21,engineType:r}),C(t,Op,Rp,0),this.u=t,this.c=n||Sp,this.c.responseattributes="sh,fc",this.i=setInterval(A(this.reload,this),e||18e4),this.a===ik.WEBGL?this.lb(new qi(uo()+"/traffic/flow.yaml"),!0):this.lb(new H.map.render.harp.Style({styles:[{when:["==",["geometry-type"],"LineString"],technique:"solid-line",renderOrder:10002,attr:{color:["case",[">=",["get","JF"],10],"black",[">=",["get","JF"],8],"red",[">=",["get","JF"],4],"yellow","green"],lineWidth:3,metricUnit:"Pixel"}}]}))}u(Rp,T),t("H.service.traffic.flow.Provider",Rp),Rp.prototype.Yh=ff,Rp.prototype.providesGeoJSON=Rp.prototype.Yh,Rp.prototype.$=function(){return this.ab()},Rp.prototype.getStyle=Rp.prototype.$,Rp.prototype.xb=function(t){t.b&&t.b("GeoJSONTileSource"),this.lb(t)},Rp.prototype.setStyle=Rp.prototype.xb;var Sp={locationreferences:"tmc,shp"};Rp.prototype.o=function(){Rp.l.o.call(this),clearInterval(this.i)},Rp.prototype.G=function(t,e,n,r,i){return this.u.requestFlowByTile(t,e,n,(function(t){t.type&&-1!==t.type.indexOf("Error")?i(t.Details):r(t)}),i,this.c)},Rp.prototype.requestInternal=Rp.prototype.G,Rp.prototype.Vb=function(t,e,n,r,i){var o,a,s,l,u,c={type:"FeatureCollection",features:[]},h=r.RWS.length;for(o=0;o<h;o++){var p=r.RWS[o],f=p.RW,d=f.length,y=-1!==Qp.indexOf(p.EXTENDED_COUNTRY_CODE+p.EBU_COUNTRY_CODE);for(p=0;p<d;p++){var g=f[p].FIS,v=g.length;for(g=0;g<v;g++){var m=f[p].FIS[g].FI,b=m.length;for(a=0;a<b;a++){var _=m[a],w=[],x=_.CF[0],k=!!x.SSS,E={type:"Feature",properties:x,geometry:{type:"MultiLineString",coordinates:w}};for(E.properties.LHT=y,_.SHP.length&&(E.properties.FC=_.SHP[0].FC),k&&(u=[]),x=0;x<_.SHP.length;x++){var T=_.SHP[x].value,A=T.length;for(s=0;s<A;s++){var S=k?u:void 0,M=new ko(T[s].trim()),I=[],O={};for(M.de();-1!==(l=M.Kb());)l===Tp?(O.lat=+String.fromCharCode.apply(Rp,M.Dd()),M.next(),M.de()):l===Up?(O.lng=+String.fromCharCode.apply(Rp,M.Dd()),I.push([O.lng,O.lat]),S&&S.push(ng(O)),O=[],M.next(),M.de()):M.next();O.lng=+String.fromCharCode.apply(Rp,M.Dd()),I.push([O.lng,O.lat]),S&&S.push(ng(O)),l=I,w.push(l)}}c.features.push(E)}}}}return Rp.l.Vb.call(this,t,e,n,c,i)},Rp.prototype.createTileInternal=Rp.prototype.Vb;var Up=32,Tp=44;function Vp(t,e){if(e=void 0===e?{}:e,!t.Tj)throw new Yc(t);Vp.l.constructor.call(this);var n=Wp(this,e);if(!n.baseUrl&&!n.platformBaseUrl)throw new D(t,0,'either "baseUrl" or "platformBaseUrl" must be specified');this.i=(n.baseUrl?n.baseUrl:n.platformBaseUrl).clone(),(t=n.baseUrl?e:n).host&&this.i.Ye(t.host),t.subDomain&&this.i.za(t.subDomain),t.path&&this.i.td(t.path),Cp(this.i),this.g=n.headers||{}}function Wp(t,e){return t=t.Ia(),e?rp({},t,e):t}function Xp(t,e,n){return function(r){return"function"!==typeof r.json?Promise.reject(n(Yp(e,r))):r.json().then((function(e){return n(t.a(e))}),(function(){return n(Yp(e,r))}))}}function Yp(t,e){return Error((e.statusText?"["+e.statusText+"] ":"")+t+" request failed")}function Zp(t){function e(e){r.contains(i)&&r.removeChild(i),u&&clearTimeout(u),delete Zp.a[o],e&&t.ij&&t.ij.call(l,e)}if(!t.url||!t.Ig)throw Error('Parameter "options" must specify at least a URL and a callback.');if("function"!==typeof t.Ig)throw Error("Parameters options.callback must be a function");var n=t.Mo||document,r=n.getElementsByTagName("head")[0],i=n.createElement("script");n=t.url instanceof W?t.url:wp(t.url,t.Lo);var o=Zp.b++,a=t.wl||"callback",s=t.Ig,l={},u=null;return l.id=o,l.cancel=function(){e("cancelled")},0!==t.timeout&&(u=x.setTimeout((function(){e("timeout")}),t.timeout||3e4)),Zp.a[o]=function(t){e(),s.call(l,t)},i.type="text/javascript",i.src=n.toString()+(n.Mj()?"&":"?")+a+"="+(t.No?"H.service.jsonp.handleResponse("+o+")":encodeURI("H.service.jsonp.handleResponse("+o+")")),r.appendChild(i),l}function Op(t){Op.l.constructor.call(this,Op,t),this.b=Wp(this,t).callbackKey}function $p(t,e,n,r){return Zp({url:e,Ig:n,ij:function(t){r(Error("["+t+"] "+e+" request failed"))},wl:t.b})}function aq(t){aq.l.constructor.call(this,aq,t),this.b=Wp(this,t).reverseSubDomain}function bq(t){bq.l.constructor.call(this,bq,t)}function cq(t,e,n,r,i){return e=t.C().clone().F(e).I(n||{}),t.G(e,r,i)}function dq(){this.a={}}function eq(t,e){for(var n in e)if(e.hasOwnProperty(n)){var r,i=e[n],o=t.a[n]||(t.a[n]=[]),a=i.length;for(r=0;r<a;r++)o.push(new fq(i[r]))}}function Gp(t,e,n,r){var i=(t=t.a[e])?t.length:0,o=[];for(e=0;e<i;e++)t[e].jd(n,r)&&o.push(t[e]);return o}function fq(t){var e,n=t.boxes;if(this.label=t.label,this.min=t.minLevel,this.max=t.maxLevel,this.b=[],n&&(e=n.length)){var r=n[0],i=new K(r[0],r[1],r[2],r[3]);for(this.b.push(i),this.a=new K(r[0],r[1],r[2],r[3]),t=1;t<e;t++)i=new K((r=n[t])[0],r[1],r[2],r[3]),this.b.push(i),this.a.$b(i,!1,this.a)}}function gq(t,e,n){var r=this,i=n||{},o=+i.min,a=+i.max;i.tileSize=i.tileSize||512,i.min=o?Zd(o,1,17):1,i.min+=Nk(i.tileSize,1),i.max=a?Zd(a,1,17):17,gq.l.constructor.call(this,i),C(t,hq,gq,0),C(e,Th,gq,1),this.j=t,e.b&&e.b("OMV"),this.lb(e,!0),this.c=!1,n&&(n.politicalView&&(this.i=n.politicalView),iq(this,n.lg,n.lg2),this.c=!!n.pois),this.N=function(){jq(r),r.reload(!1)},t.addEventListener("versionupdate",this.N),jq(this),gq.prototype.V=function(){var e=/^v2\/vectortiles\/(.+)\/mc$/.exec(t.C().b);return e?e[1]:B+""}()}function jq(t){var e=t.hd("_#-;,:","_#-;,:","_#-;,:");t.Y=new RegExp("^"+e.replace(/[.*+?^${}()|[\]\\\/]/g,"\\$&").replace(/_#-;,:/g,"\\d+")+"$")}function iq(t,e,n){var r=Ac(e),i=Ac(n);r&&(t.K=e),i&&(t.B=n),(r||i)&&(t.v=[],(e=(r=/^([a-zA-Z]{2})(-|$)/).exec(e))&&t.v.push(e[1]),(e=r.exec(n))&&t.v.push(e[1]),t.u=!0)}u(Vp,F),t("H.service.Service",Vp),Vp.prototype.Ia=function(){return{}},Vp.prototype.C=function(){return this.i},Vp.prototype.getUrl=Vp.prototype.C,Vp.prototype.G=function(t,e,n,r){return(r=new tf(void 0===r?"application/json":r,t.toString(),he,{headers:this.g})).then(e,Xp(this,t,n)),r},Vp.prototype.a=function(t){return Error(t.message)},t("H.service.jsonp",Zp),Zp.dn=function(t){return(t=Zp.a[t])?t:function(){}},Zp.handleResponse=Zp.dn,Zp.b=0,Zp.a={},u(Op,Vp),t("H.service.traffic.Service",Op),Op.prototype.Ia=function(){return{subDomain:"traffic.ls",path:"traffic/6.1",callbackKey:"jsoncallback"}},Op.CONFIG_KEY="traffic",Op.prototype.Xi=function(t,e){return new ql(new Rp(this,void 0,t,e),{max:22})},Op.prototype.createFlowLayer=Op.prototype.Xi,Op.prototype.Yi=function(t){return new Mn(new Np(this,void 0,t))},Op.prototype.createIncidentsLayer=Op.prototype.Yi,Op.prototype.bo=function(t,e,n){return $p(this,t=this.C().clone().F("incidents.json").I(t),e,n)},Op.prototype.requestIncidents=Op.prototype.bo,Op.prototype.ao=function(t,e,n,r,i,o){return $p(this,t=this.C().clone().F(["flow/json",n,t,e].join("/")).I(o||{}),r,i)},Op.prototype.requestFlowByTile=Op.prototype.ao,Op.prototype.co=function(t,e,n,r,i,o){return $p(this,t=this.C().clone().F(["incidents/json",n,t,e].join("/")).I(o||{}),r,i)},Op.prototype.requestIncidentsByTile=Op.prototype.co,X.prototype.Fj=function(t){return this.Ma(Op,t)},X.prototype.getTrafficService=X.prototype.Fj,u(aq,Vp),t("H.service.GeocodingService",aq),aq.prototype.Ia=function(){return{subDomain:"geocoder.ls",reverseSubDomain:"reverse",path:"6.2"}},aq.CONFIG_KEY="geocoding",aq.prototype.a=function(t){return Error(t.Details||t.message||t.error)},aq.prototype.Tg=function(t,e,n){return t=this.C().clone().F("geocode.json").I(t),this.G(t,e,n)},aq.prototype.geocode=aq.prototype.Tg,aq.prototype.bi=function(t,e,n){return t=this.C().clone().F("reversegeocode.json").I(t),this.b&&t.za(this.b),this.G(t,e,n)},aq.prototype.reverseGeocode=aq.prototype.bi,aq.prototype.search=function(t,e,n){return t=this.C().clone().F("search.json").I(t),this.G(t,e,n)},aq.prototype.search=aq.prototype.search,X.prototype.tj=function(t){return sp(X.prototype.tj,"Use H.service.Platform#getSearchService instead"),this.Ma(aq,t)},X.prototype.getGeocodingService=X.prototype.tj,u(bq,Vp),t("H.service.PlacesService",bq),bq.prototype.Ia=function(){return{subDomain:"places.ls",path:"places/v1"}},bq.CONFIG_KEY="places",bq.EntryPoint={SEARCH:"discover/search",SUGGEST:"suggest",EXPLORE:"discover/explore",AROUND:"discover/around",HERE:"discover/here",CATEGORIES:"categories/places"},bq.prototype.request=function(t,e,n,r){return cq(this,t,e,n,r)},bq.prototype.request=bq.prototype.request,bq.prototype.search=function(t,e,n){return cq(this,"discover/search",t,e,n)},bq.prototype.search=bq.prototype.search,bq.prototype.po=function(t,e,n){return cq(this,"suggest",t,e,n)},bq.prototype.suggest=bq.prototype.po,bq.prototype.Gl=function(t,e,n){return cq(this,"discover/explore",t,e,n)},bq.prototype.explore=bq.prototype.Gl,bq.prototype.sl=function(t,e,n){return cq(this,"discover/around",t,e,n)},bq.prototype.around=bq.prototype.sl,bq.prototype.fn=function(t,e,n){return cq(this,"discover/here",t,e,n)},bq.prototype.here=bq.prototype.fn,bq.prototype.xl=function(t,e,n){return cq(this,"categories/places",t,e,n)},bq.prototype.categories=bq.prototype.xl,bq.prototype.Hl=function(t,e,n,r){return t=wp(t).I(this.C().getQuery()).I(r||{}),this.G(t,e,n)},bq.prototype.follow=bq.prototype.Hl,X.prototype.Bj=function(t){return sp(X.prototype.Bj,"Use H.service.Platform#getSearchService instead"),this.Ma(bq,t)},X.prototype.getPlacesService=X.prototype.Bj,fq.prototype.jd=function(t,e){if(t>=this.min&&t<=this.max){if(!(t=this.b.length)||!this.a)return!0;if(this.a.jd(e))for(;t--;)if(this.b[t].jd(e))return!0}return!1},u(gq,T),t("H.service.omv.Provider",gq),gq.prototype.md=ff,gq.prototype.providesOMV=gq.prototype.md,gq.prototype.Tb=function(t){return this.Y.test(t)},gq.prototype.cacheFilter=gq.prototype.Tb,gq.prototype.hd=function(t,e,n){return kq(this.j,t,e,n).toString()},gq.prototype.getTileKey=gq.prototype.hd,gq.prototype.Fb=function(){return this.ua},gq.prototype.getCache=gq.prototype.Fb,gq.prototype.Em=function(){return this.i},gq.prototype.getPoliticalView=gq.prototype.Em,gq.prototype.io=function(t){var e=this.i;this.i=t,this.dispatchEvent(new aj("politicalviewchange",this.i,e))},gq.prototype.setPoliticalView=gq.prototype.io,gq.prototype.MAX_STORE_TIME=2592e6,gq.prototype.m=function(){return md()},gq.prototype.f=function(){return md()?ld():gq.l.f.call(this)},gq.prototype.G=function(t,e,n,r,i){return this.j.Qa(t,e,n,r,i)},gq.prototype.requestInternal=gq.prototype.G,gq.prototype.xb=function(t){t.b&&t.b("OMV"),this.lb(t)},gq.prototype.setStyle=gq.prototype.xb,gq.prototype.$=function(){return gq.l.ab.apply(this)},gq.prototype.getStyle=gq.prototype.$,gq.prototype.ab=function(){var t=gq.l.ab.apply(this),e=t.getState()===Uh.READY,n=t.lc();return e?n&&n.global&&(this.u&&(this.K&&(n.global.ux_language=this.K),this.B&&(n.global.ux_language_fallback=this.B)),this.c&&n.global.poi&&n.global.poi.default&&(n.global.poi.default.visible=this.c),this.u||this.c)&&(t=new qi(n,t.Db())):t.load(),t},gq.prototype.getStyleInternal=gq.prototype.ab,gq.prototype.u=!1;var lq=["en"];function hq(t){hq.l.constructor.call(this,hq,t),t=Wp(this,t).mapVersion,this.b=uc(t)?t:mq[this.C().toString()],uc(this.b)||nq(this)}gq.prototype.ah=function(){return this.v||lq},gq.prototype.getLanguages=gq.prototype.ah,gq.prototype.o=function(){gq.l.o.call(this),this.j.removeEventListener("versionupdate",this.N)},gq.prototype.ua=new Pk(256),gq.prototype.ca=function(t,e){return Gp(this.j.ca(),this.V,e,t)},gq.prototype.getCopyrights=gq.prototype.ca,u(hq,Vp),t("H.service.omv.Service",hq),hq.prototype.Ia=function(){return{subDomain:"vector",path:"v2/vectortiles/base/mc"}},hq.CONFIG_KEY="omv";var mq={};function nq(t){t.G(t.C().clone().F("../../info"),(function(e){e=e.mapVersion;var n=t.C().toString();t.b=e,e!==mq[n]&&(mq[n]=e,t.dispatchEvent("versionupdate"))}),(function(){}))}function kq(t,e,n,r){return e=t.C().clone().F(r+"/"+e+"/"+n+"/omv"),uc(t.b)&&e.I({mv:t.b}),e}function oq(t){oq.l.constructor.call(this,oq,t),this.b=t.getToken}function yq(t,e,n,r){return t.C().clone().F(e+"/layers/"+n+"/features").I(r||{})}function wq(t,e,n,r,i){return yq(t,n,r,e=Object.assign({},i,{id:new Ap(e)}))}function tq(t,e,n,r,i){return t.C().clone().F(n+"/layers/"+r+"/features/"+e).I(i||{})}function rq(t,e,n,r,i,o,a){return a=void 0===a?"application/json":a,n={method:n,headers:Object.assign({},o?{"Content-Type":"application/geo+json"}:void 0,"function"===typeof t.b?{Authorization:"Bearer "+t.b()}:void 0,t.g)},o&&(n.data=JSON.stringify(o)),(o=new tf(a,e.toString(),he,n)).then(r,Xp(t,e,i)),o}function pq(t,e,n,r){xc(n,"String",t,e,"must be a string"),xc(r,"String",t,e+1,"must be a string")}function sq(t,e){xc(e,"String",t,0,"must be a string")}function vq(t,e){if(!Array.isArray(e)||0===e.length||e.some((function(t){return"string"!==typeof t})))throw new D(t,0,"must be a non-empty array of strings")}function xq(t,e,n){if(!Ea(n))throw new D(t,e,"must be a GeoJSON object")}function qq(t,e,n,r){if(!Da(n))throw new D(t,e,"must be a function");if(!Da(r))throw new D(t,e+1,"must be a function")}function zq(t,e,n,r){if(zq.l.constructor.call(this,r?{min:r.min,max:r.max,engineType:r.engineType}:void 0),C(t,oq,zq,0),!Ac(e))throw new D(zq,1,'"catalogHrn" must be a string');if(!Ac(n))throw new D(zq,2,'"layerId" must be a string');this.v=t,this.c=e,this.i=n,this.u=Ea(r)&&Ea(r.parameters)?r.parameters:{},this.lb(this.a===ik.WEBGL?new qi({sources:{iml:{type:"MVT"}},layers:{iml:{data:{source:"iml",layer:this.c+":"+this.i},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#0258AE",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.c+":"+this.i,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.c+":"+this.i,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.c+":"+this.i,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.c+":"+this.i,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#0258AE",lineWidth:"2px",renderOrder:203}]}))}function Fp(t){t=void 0===t?{}:t,Fp.l.constructor.call(this,Fp,t),this.b={fg:t.resource||"base",Xf:t.projection||"mc",format:t.format||"png"},this.f=t.queryParams||{}}function Aq(t,e,n,r,i,o,a){var s=this;a=a||{},o=o||{};var l=t.C().clone().F(e+"/"+t.pc()+"/"+n).I(o),u=t.c;this.B=t,this.N=l,Ck.call(this,{tileSize:r,max:512===r?19:20,min:512===r?2:0,getURL:function(t,e,n){var o=s.N.clone();return u&&o.za(u[(n+e+t)%u.length]),o.F(n+"/"+t+"/"+e+"/"+r+"/"+i),o.toString()},crossOrigin:a.crossOrigin,headers:a.headers,uri:l.toString().replace(/_/g,"")+r,engineType:a.engineType}),this.Ya=e,this.ya=n,this.ua=o,this.V=n.split(".")[0],this.i=A(this.i,this),this.getCopyrights=this.ca,t.addEventListener("versionupdate",this.i)}function Bq(t){Bq.l.constructor.call(this,Bq,t),t=Wp(this,t),this.c=t.shards,(this.f=t.ignoreTypes?null:t.type)&&this.C().za(this.f),this.b=t.version,this.m=new dq,this.s={},this.j=0,"newest"===this.b&&Cq(this)}function Dq(t,e){for(var n={},r=t[e+"s"][e],i=r.length;i--;)n[r[i].id]=r[i];t[e+"s"]=n}function Cq(t){var e=t.C().clone().F("info").I({output:"json"});t.c&&e.za(t.c[0]),t.G(e,(function(e){var n;if(Dq(e=e.response,"map"),Dq(e,"scheme"),Dq(e,"tiletype"),Dq(e,"format"),Dq(e,"resolution"),Dq(e,"language"),"newest"===t.b&&"traffic"!==t.f)for(n in e.maps)e.maps[n].hash&&e.maps[n].newest&&(t.b=e.maps[n].hash,t.dispatchEvent("versionupdate"));t.u=e,t.dispatchEvent("infoupdate")}),(function(t){throw t}))}function Eq(t){var e=t.C().clone().F("copyright").F(t.pc()).I({output:"json"});t.c&&e.za(t.c[0]),t.j=1,t.G(e,(function(e){t.j=2,eq(t.m,e),t.dispatchEvent("copyrightupdate")}),(function(e){throw t.j=-1,e}))}function Fq(t){Fq.l.constructor.call(this,Fq,t)}function Gq(t){Gq.l.constructor.call(this,Gq,t),sp(Gq,"Use HERE Routing API v8 instead.")}function Hq(t){Hq.l.constructor.call(this,Hq,t)}function Iq(){}function Jq(){}function Kq(t,e){this.a=t,this.b=e}function Lq(){}function Mq(t,e){this.b=t,this.a=e}function Nq(t,e,n){var r;if(e=e||(t&&t.length?Object.keys(t[0]):B),this.wb=t,e)for(this.Ad=e,this.Jg=t=nc(),r=e.length;r--;)t[e[r]]=!0;n!==B&&(this.Lh=n)}function Oq(t,e){return t.wb?t.wb.push(e):t.wb=[e],t.wb.length-1}function Pq(t){var e=Qq;if(!t||!Ac(af(t.layerId,t.layer))||!Dc(t.level)||uc(t.rowFilter)&&!Da(t.rowFilter)||uc(t.rowFilterContext)&&!Ea(t.rowFilterContext))throw new D(e,1,uc("invalid layer config")?"invalid layer config":t)}function Rq(t,e,n,r){r=r||Sq,this.a={},r.provider=t,this.invalidate=gf,Rq.l.constructor.call(this,e,r),delete this.invalidate,n&&(this.b=n),this.pa(kh.ADD)}Gc(mq),hq.prototype.vm=function(){return this.b},hq.prototype.getMapVersion=hq.prototype.vm,hq.prototype.cd=function(t,e,n){e=e||{};var r={min:0,max:22};return Ea(n)&&rp(r,n),Gn&&(e.min=r.min=4),new ql(new gq(this,t,e),r)},hq.prototype.createLayer=hq.prototype.cd,hq.prototype.Qa=function(t,e,n,r,i){return this.G(kq(this,t,e,n),(function(t){return t.arrayBuffer().then(r,i)}),i,"arraybuffer")},hq.prototype.Fe=function(t,e){if(!Da(t))throw new D(this.Fe,0,'"onResult" must be a function');if(!Da(e))throw new D(this.Fe,1,'"onError" must be a function');return this.G(this.C().clone().td("v2/vectortiles/pviews"),t,e)},hq.prototype.getPoliticalViews=hq.prototype.Fe,X.prototype.De=function(t){return this.Ma(hq,t)},X.prototype.getOMVService=X.prototype.De,hq.prototype.f=function(t){eq(this.c,t),this.dispatchEvent("copyrightupdate")},hq.prototype.ca=function(){return this.c||(this.c=new dq,this.G(this.C().clone().F("../../copyrights"),A(this.f,this),jd)),this.c},hq.prototype.getCopyrights=hq.prototype.ca,u(oq,Vp),t("H.service.iml.Service",oq),oq.prototype.Ia=function(){return{host:"interactive.data.api.platform.here.com",path:"interactive/v1/catalogs"}},oq.prototype.a=function(t){var e=[{keys:["code","title","cause","action"],format:function(){return t.code+": "+t.title+"; cause: "+t.cause+"; action: "+t.action}},{keys:["error","error_description"],format:function(){return t.error+": "+t.error_description}},{keys:["error","errorMessage"],format:function(){return t.error+": "+t.errorMessage}}];return Error(Ea(t)?function(){for(var n=fa(e),r=n.next();!r.done;r=n.next()){var i=(r=r.value).format;if(r.keys.every((function(e){return t[e]})))return i()}return JSON.stringify(t)}():t)},oq.prototype.Od=function(t,e,n,r,i){var o=this.Od;return pq(o,0,t,e),qq(o,2,n,r),rq(this,t=this.C().clone().F(t+"/layers/"+e+"/statistics").I(i||{}),"GET",n,r)},oq.prototype.getStatistics=oq.prototype.Od,oq.prototype.Af=function(t,e,n,r,i,o,a,s,l){var u=l?"":".mvtf";return rq(this,t=this.C().clone().F(r+"/layers/"+i+"/tile/web/"+n+"_"+t+"_"+e+u).I(Object.assign({clip:!0},s)),"GET",l?o:function(t){return t.arrayBuffer().then(o)},a,void 0,l?"application/json":"arraybuffer")},oq.prototype.getFeaturesByTile=oq.prototype.Af,oq.prototype.qj=function(t,e,n,r,i,o){var a=this.qj;return sq(a,t),pq(a,1,e,n),qq(a,3,r,i),rq(this,t=tq(this,t,e,n,o),"GET",r,i)},oq.prototype.getFeatureById=oq.prototype.qj,oq.prototype.Nc=function(t,e,n,r,i,o){var a=this.Nc;return vq(a,t),pq(a,1,e,n),qq(a,3,r,i),rq(this,t=wq(this,t,e,n,o),"GET",r,i)},oq.prototype.getFeaturesById=oq.prototype.Nc,oq.prototype.Hd=function(t,e,n,r,i){var o=this.Hd;if(!Ea(t)||!(t.bbox||t.north&&t.east&&t.south&&t.west))throw new D(o,0,'must be an object with either "bbox" or a full set of "north", "east", "south" and "west"');return pq(o,1,e,n),qq(o,3,r,i),rq(this,t=this.C().clone().F(e+"/layers/"+n+"/bbox").I(t),"GET",r,i)},oq.prototype.getFeaturesByBoundingBox=oq.prototype.Hd,oq.prototype.sj=function(t,e,n,r,i){var o=this.sj;if(!(Ea(t)&&t.radius&&(t.lat&&(t.lng||t.lon)||t.refCatalogHrn&&t.refLayerId&&t.refFeatureId)))throw new D(o,0,'must be an object with "radius" and a combination of either "lat"+"lng" or "refCatalogHrn"+"refLayerId"+"refFeatureId"');return pq(o,1,e,n),qq(o,3,r,i),rq(this,t=this.C().clone().F(e+"/layers/"+n+"/spatial").I(t),"GET",r,i)},oq.prototype.getFeaturesByPointAndRadius=oq.prototype.sj,oq.prototype.rj=function(t,e,n,r,i,o){var a=this.rj;if(!Ea(t)||!t.radius)throw new D(a,0,'must be an object with "radius"');return xq(a,1,e),pq(a,2,n,r),qq(a,4,i,o),rq(this,t=this.C().clone().F(n+"/layers/"+r+"/spatial").I(t),"POST",i,o,e)},oq.prototype.getFeaturesByGeometryAndRadius=oq.prototype.rj,oq.prototype.Lk=function(t,e,n,r,i){var o=this.Lk;return pq(o,0,t,e),qq(o,2,n,r),rq(this,t=this.C().clone().F(t+"/layers/"+e+"/search").I(i||{}),"GET",n,r)},oq.prototype.searchFeatures=oq.prototype.Lk,oq.prototype.Xj=function(t,e,n,r,i){var o=this.Xj;return pq(o,0,t,e),qq(o,2,n,r),rq(this,t=this.C().clone().F(t+"/layers/"+e+"/iterate").I(i||{}),"GET",n,r)},oq.prototype.iterateFeatures=oq.prototype.Xj,oq.prototype.Vc=function(t,e,n,r,i,o){var a=this.Vc;return xq(a,0,t),pq(a,1,e,n),qq(a,3,r,i),rq(this,e=yq(this,e,n,o),"PUT",r,i,t)},oq.prototype.putFeatures=oq.prototype.Vc,oq.prototype.Tc=function(t,e,n,r,i,o){var a=this.Tc;return xq(a,0,t),pq(a,1,e,n),qq(a,3,r,i),rq(this,e=yq(this,e,n,o),"POST",r,i,t)},oq.prototype.postFeatures=oq.prototype.Tc,oq.prototype.dd=function(t,e,n,r,i){var o=this.dd;return vq(o,t),pq(o,1,e,n),qq(o,3,r,i),rq(this,t=wq(this,t,e,n),"DELETE",r,i)},oq.prototype.deleteFeatures=oq.prototype.dd,oq.prototype.Ek=function(t,e,n,r,i,o,a){var s=this.Ek;return sq(s,t),xq(s,1,e),pq(s,2,n,r),qq(s,4,i,o),rq(this,t=tq(this,t,n,r,a),"PUT",i,o,e)},oq.prototype.putFeature=oq.prototype.Ek,oq.prototype.yk=function(t,e,n,r,i,o,a){var s=this.yk;return sq(s,t),xq(s,1,e),pq(s,2,n,r),qq(s,4,i,o),rq(this,t=tq(this,t,n,r,a),"PATCH",i,o,e)},oq.prototype.patchFeature=oq.prototype.yk,oq.prototype.bj=function(t,e,n,r,i){var o=this.bj;return sq(o,t),pq(o,1,e,n),qq(o,3,r,i),rq(this,t=tq(this,t,e,n),"DELETE",r,i,void 0,"text/plain")},oq.prototype.deleteFeature=oq.prototype.bj,oq.CONFIG_KEY="iml",X.prototype.lm=function(t){return this.Ma(oq,t)},X.prototype.getIMLService=X.prototype.lm,u(zq,T),t("H.service.iml.Provider",zq),zq.prototype.G=function(t,e,n,r,i){return this.v.Af(t,e,n,this.c,this.i,r,i,this.u)},zq.prototype.requestInternal=zq.prototype.G,zq.prototype.md=ff,zq.prototype.providesOMV=zq.prototype.md,zq.prototype.$=function(){return this.ab()},zq.prototype.getStyle=zq.prototype.$,zq.prototype.xb=function(t){C(t,qi)&&t.b("MVT"),this.lb(t)},zq.prototype.setStyle=zq.prototype.xb,u(Fp,Vp),t("H.service.rasterTile.Service",Fp),p=Fp.prototype,p.$=function(){return this.f.style||"explore.day"},p.Ia=function(){return{subDomain:"maps",path:"v3"}},p.ca=function(){return this.c||(this.c=new dq,this.G(this.C().clone().F("copyright"),A(this.An,this),jd)),this.c},p.An=function(t){var e=t.copyrights;t=t.resources;var n={},r=this.b.fg+"."+this.$();n[r]=[],t[this.b.fg].styles[this.$()].forEach((function(t){e[t].forEach((function(t){var e=[];t.boundingBoxes.forEach((function(t){e.push([t.north,t.west,t.south,t.east])})),n[r].push({boxes:e,label:t.label,alt:t.alt,minLevel:t.minLevel,maxLevel:t.maxLevel})}))})),eq(this.c,n)},p.Be=function(t,e){return this.G(this.C().clone().F("info"),t,e)},Fp.prototype.getInfo=Fp.prototype.Be,Fp.prototype.Fe=function(t,e){return this.G(this.C().clone().F("politicalViews"),t,e)},Fp.prototype.getPoliticalViews=Fp.prototype.Fe,Fp.prototype.hm=function(t,e){return this.G(this.C().clone().F("features"),t,e)},Fp.prototype.getFeatures=Fp.prototype.hm,Fp.prototype.ah=function(t,e){return this.G(this.C().clone().F("languages"),t,e)},Fp.prototype.getLanguages=Fp.prototype.ah,Fp.CONFIG_KEY="rasterTile",X.prototype.gh=function(t){return this.Ma(Fp,t)},X.prototype.getRasterTileService=X.prototype.gh,u(Aq,Ck),Aq.prototype.MAX_STORE_TIME=2592e6,Aq.prototype.o=function(){Ck.prototype.o.call(this),this.B.removeEventListener("versionupdate",this.i)},Aq.prototype.ca=function(t,e){return Gp(this.B.ca(),this.V,e,t)},Aq.prototype.getCopyrights=Aq.prototype.ca,Aq.prototype.i=function(){var t=this.B;this.N=t.C().clone().F(this.Ya+"/"+t.pc()+"/"+this.ya).I(this.ua),this.reload(!1)},Aq.prototype.m=function(){return md()},Aq.prototype.f=function(){return md()?ld():Aq.l.f.call(this)},u(Bq,Vp),t("H.service.MapTileService",Bq),Bq.prototype.Ia=function(){return{subDomain:"maps.ls",path:"maptile/2.1",type:"base",version:"newest",shards:["1","2","3","4"]}},Bq.CONFIG_KEY="maptile",Bq.prototype.Gj=function(){return this.f},Bq.prototype.getType=Bq.prototype.Gj,Bq.prototype.pc=function(){return this.b},Bq.prototype.getVersion=Bq.prototype.pc,Bq.prototype.ca=function(){return this.j||(this.b&&"newest"!==this.b||"traffic"===this.f)&&Eq(this),this.m},Bq.prototype.getCopyrights=Bq.prototype.ca,Bq.prototype.Be=function(){return this.u},Bq.prototype.getInfo=Bq.prototype.Be,Bq.prototype.qe=function(t,e,n,r,i,o){var a,s=this.C().clone().F(t+"/"+this.pc()+"/"+e+"/"+n+"/"+r).I(i||{}).toString(),l=0,u=s.length;if(0!==u)for(a=0;a<u;a++){l=(l<<5)-l+s.charCodeAt(a),l|=0}return s=l,(l=this.s[s])||(l=new Aq(this,t,e,n,r,i,rp({headers:this.g},o||{})),this.s[s]=l),l},Bq.prototype.createTileProvider=Bq.prototype.qe,Bq.prototype.ic=function(t,e,n,r,i,o,a,s){return new ql(t=this.qe(t,e,n,r,i,s),{opacity:o,dark:!!a})},Bq.prototype.createTileLayer=Bq.prototype.ic,X.prototype.bh=function(t){return this.Ma(Bq,t)},X.prototype.getMapTileService=X.prototype.bh,u(Fq,Vp),t("H.service.publicTransit.Service",Fq),Fq.prototype.Ia=function(){return{subDomain:"transit.router",path:"v8"}},Fq.CONFIG_KEY="publicTransit",Fq.prototype.Mm=function(t,e,n){return t=this.C().clone().F("routes").I(t),this.G(t,e,n)},Fq.prototype.getRoutes=Fq.prototype.Mm,Fq.prototype.Zl=function(t,e,n){return t=this.C().clone().F("departures").I(t),this.G(t,e,n)},Fq.prototype.getDepartures=Fq.prototype.Zl,Fq.prototype.Qm=function(t,e,n){return t=this.C().clone().F("stations").I(t),this.G(t,e,n)},Fq.prototype.getStations=Fq.prototype.Qm,Fq.prototype.a=function(t){return Error(JSON.stringify(t))},X.prototype.Im=function(t){return this.Ma(Fq,t)},X.prototype.getPublicTransitService=X.prototype.Im,u(Gq,Vp),t("H.service.RoutingService",Gq),Gq.prototype.Ia=function(){return{subDomain:"route.ls",path:"routing/7.2"}},Gq.prototype.a=function(t){return Error(t.details)},Gq.CONFIG_KEY="routing",Gq.prototype.zd=function(t,e,n){return t=this.C().clone().F("calculateroute.json").I(t),this.G(t,e,n)},Gq.prototype.calculateRoute=Gq.prototype.zd,Gq.prototype.Hg=function(t,e,n){return t=this.C().clone().za("isoline").F("calculateisoline.json").I(t),this.G(t,e,n)},Gq.prototype.calculateIsoline=Gq.prototype.Hg,u(Hq,Vp),t("H.service.RoutingService8",Hq),Hq.CONFIG_KEY="routing_v8",Hq.prototype.Ia=function(){return{subDomain:"router",path:"v8/routes"}},Hq.prototype.a=function(t){return Error(t.error)},Hq.prototype.zd=function(t,e,n){return t=this.C().clone().I(t),this.G(t,e,n)},Hq.prototype.calculateRoute=Hq.prototype.zd,Hq.prototype.Hg=function(t,e,n){return t=this.C().clone().za("isoline").td("v8/isolines").I(t),this.G(t,e,n)},Hq.prototype.calculateIsoline=Hq.prototype.Hg,X.prototype.Dj=function(t,e){if(7===(e=Gn?8:+e||7))e=Gq;else{if(8!==e)throw new D(this.Dj,1,"allowed values are 7 and 8");e=Hq}return this.Ma(e,t)},X.prototype.getRoutingService=X.prototype.Dj,t("H.service.extension.dataView.ITable",Iq),Iq.prototype.Kd=function(){},Iq.prototype.getMeta=Iq.prototype.Kd,Iq.prototype.Nd=function(){},Iq.prototype.getRowCount=Iq.prototype.Nd,Iq.prototype.oc=function(){},Iq.prototype.getRow=Iq.prototype.oc,Iq.prototype.Oa=function(){},Iq.prototype.getColumnNames=Iq.prototype.Oa,Iq.prototype.xe=function(){},Iq.prototype.getColumn=Iq.prototype.xe,Iq.prototype.sa=function(){},Iq.prototype.getCell=Iq.prototype.sa,Iq.prototype.concat=function(){},Iq.prototype.concat=Iq.prototype.concat,t("H.service.extension.dataView.IRow",Jq),Jq.prototype.Oa=function(){},Jq.prototype.getColumnNames=Jq.prototype.Oa,Jq.prototype.sa=function(){},Jq.prototype.getCell=Jq.prototype.sa,Jq.prototype.gd=function(){},Jq.prototype.getTable=Jq.prototype.gd,t("H.service.extension.dataView.ObjRow",Kq),Kq.prototype.Oa=function(){return this.a.Oa()},Kq.prototype.getColumnNames=Kq.prototype.Oa,Kq.prototype.sa=function(t){return this.a.sa(this.b,t)},Kq.prototype.getCell=Kq.prototype.sa,Kq.prototype.gd=function(){return this.a},Kq.prototype.getTable=Kq.prototype.gd,t("H.service.extension.dataView.IColumn",Lq),Lq.prototype.sa=function(){},Lq.prototype.getCell=Lq.prototype.sa,t("H.service.extension.dataView.ObjColumn",Mq),Mq.prototype.sa=function(t){return this.b.sa(t,this.a)},Mq.prototype.getCell=Mq.prototype.sa,t("H.service.extension.dataView.ObjTable",Nq),p=Nq.prototype,p.Lh=B,p.wb=B,p.Ad=B,p.Jg=B,p.Kd=function(){return this.Lh},Nq.prototype.getMeta=Nq.prototype.Kd,Nq.prototype.Nd=function(){return this.wb?this.wb.length:0},Nq.prototype.getRowCount=Nq.prototype.Nd,Nq.prototype.oc=function(t){var e=this.wb;return e&&e[t]?new Kq(this,t):B},Nq.prototype.getRow=Nq.prototype.oc,Nq.prototype.Oa=function(){return this.Ad||hf},Nq.prototype.getColumnNames=Nq.prototype.Oa,Nq.prototype.xe=function(t){return this.Jg[t]?new Mq(this,t):B},Nq.prototype.getColumn=Nq.prototype.xe,Nq.prototype.sa=function(t,e){var n=this.wb;return(t=n&&this.Jg[e]&&n[t])&&t[e]},Nq.prototype.getCell=Nq.prototype.sa,Nq.prototype.concat=function(){var t,e=arguments.length,n=this.Ad,r=""+this.Ad,i=(this.wb||[]).slice();for(t=0;t<e;t++){var o=arguments[t];if(!(o instanceof Nq))throw new D(this.concat,t);if(o.wb){if(n&&""+o.Ad!==r)throw new D(this.concat,t,"Incompatible columns!");i=i.concat(o.wb)}}return new Nq(i,this.Ad,this.Lh)},Nq.prototype.concat=Nq.prototype.concat,u(Rq,Eh),t("H.service.remote.Spatial",Rq);var Sq={};function Tq(t,e){this.a=t,e&&(this.b=e)}Rq.prototype.$a=function(){return this.b||Eh.prototype.$a.call(this)},Rq.prototype.getId=Rq.prototype.$a,Rq.prototype.gg=jd,Rq.prototype.retain=Rq.prototype.gg,Rq.prototype.release=ff,Rq.prototype.release=Rq.prototype.release;var Uq=new Tq(hf);function Vq(t,e,n){t.a[e.key]=new Tq(n,void 0)}function Wq(t,e,n,r){if(!Da(n))throw new D(t,e,"has invalid type");if(!Da(r))throw new D(t,e+1,"has invalid type")}function Xq(t,e,n){var r=8===t;this.b=e,this.c=n||jd,(this.a=4===t||r)?this.j=r:this.g=1===t,this.f=this.a?"$HProjGeometry":"geometry"}function Yq(t,e,n,r,i){var o=[],a=i.paths,s=a.length,l=0,u=t.b&&t.b(r);for(t=new Rq(e,t.j,B,{style:u||t.i,data:r});l!==s;)o.push($q(a[l++]));return Vq(t,n,[new Mh(o,i.interiorsIndex,i.outlinesIndex)]),t}function Zq(t,e,n,r){r=new lg(r[0],r[1]);var i=t.b&&t.b(n);return t.g?t=new Ln(r,t={icon:i,data:n,provider:e}):t=new $i(r,t={icon:i,data:n,provider:e}),t}function $q(t){for(var e=0,n=t.length,r=[];e<n;)r.push(new G(t[e++],t[e++]));return r}function ar(t,e){var n={};this.c=t,Ya(n,e||n),mk.call(this,n),this.ag={},(t=this.Gb(nh.SPATIAL)).update(t.a+1,kh.ADD)}function br(t){return t.qc(!0)}function cr(t,e,n){var r,i=e.j&&e.j[n];return!i&&(r=e.m)&&(delete e.m,(e.j=t=t.c.parse(t,e,r))&&(i=t[n])),i||hf}Rq.prototype.Id=function(t){return(this.a[t.key]||Uq).a},Rq.prototype.getGeometriesForTile=Rq.prototype.Id,Rq.prototype.$g=function(t){return(this.a[t.key]||Uq).b},Rq.prototype.getLabels=Rq.prototype.$g,Xq.prototype.parse=function(t,e,n){var r,i,o,a,s={},l=[],u=0;for(o=n.length;u<o;u++){var c=n[u],h=c.Rows;if(c=h.length){var p=Object.keys(h[0]).filter((function(t){return"geometry"!==t&&"$HProjGeometry"!==t}));for(p=new Nq(h,p),a=0;a<c;a++){var f=h[a];if(i=f[this.f]){if(delete f[this.f],f=p.oc(a))try{(r=this.a?Yq(this,t,e,f,i):Zq(this,t,f,i.path)).ia(t),l.push(r)}catch(d){this.c(d.message)}}else this.c("Layer must contain geometries")}}}return s[this.a?"spatials":this.g?"markers":"domMarkers"]=l,s},u(ar,mk),t("H.service.remote.ObjectProvider",ar),ar.prototype.D=function(){mk.prototype.D.call(this)},ar.prototype.dispose=ar.prototype.D,ar.prototype.yc=function(){return hf},ar.prototype.requestMarkers=ar.prototype.yc,ar.prototype.xc=function(){return hf},ar.prototype.requestDomMarkers=ar.prototype.xc,ar.prototype.pd=function(){return hf},ar.prototype.requestOverlays=ar.prototype.pd,ar.prototype.Mb=ff,ar.prototype.providesMarkers=ar.prototype.Mb,ar.prototype.Lb=ff,ar.prototype.providesDomMarkers=ar.prototype.Lb,ar.prototype.wc=ff,ar.prototype.providesSpatials=ar.prototype.wc,ar.prototype.cg=function(){return hf},ar.prototype.requestSpatials=ar.prototype.cg,ar.prototype.dg=function(t,e){return t=cr(this,t,dr),e&&(t=t.filter(br)),t},ar.prototype.requestSpatialsByTile=ar.prototype.dg,ar.prototype.ba=function(t){var e=t.$a();if(this.ag[e])throw new Yc(this.ba,"Remote object "+e+" already added");return this.ag[e]=t},ar.prototype.Da=function(t){delete this.ag[t.$a()]};var dr="spatials";function er(t){var e=(t=t||{}).tileCacheSize||1024,n=t.resultType,r=t.styleCallback;if(uc(t.min)||(t.min=12),er.l.constructor.call(this,t),-1===fr.indexOf(n))throw new D(er,2,"invalid resultType");if(this.c=n,r&&!Da(r))throw new D(er,2,"invalid style callback");this.V=r,this.Y=t.pixelRatio||Te(),this.Bb=A(this.Bb,this),this.s(new Pk(e,A(this.Ya,this))),this.createTileInternal=A(4===n||8===n?this.N:this.K,this)}function gr(t){var e=t.ua;return e||(t.v||(t.v=t.u(t.c,t.V,t.Bb)),(e=t.ua=new ar(t.v)).ia(t),e.addEventListener(t.A.xa,A(t.ya,t)),e.ua=!0),e}u(er,T),t("H.service.extension.TileProvider",er),er.prototype.i=!1,er.prototype.getCapabilities=function(){return er.l.getCapabilities.call(this)|Oj.CROP_LINES_BY_TILE|Oj.CROP_POLYGONS_BY_TILE},er.prototype.Qa=function(t,e,n,r){return this.i?er.l.Qa.call(this,t,e,n,r):B},er.prototype.requestTile=er.prototype.Qa,er.prototype.Bb=function(t){this.dispatchEvent(new ud("error",Ac(t)?t:t+"",this))},er.prototype.Mb=function(){return 1===this.c},er.prototype.providesMarkers=er.prototype.Mb,er.prototype.Lb=function(){return 2===this.c},er.prototype.providesDomMarkers=er.prototype.Lb,er.prototype.wc=function(){return 4===this.c||8===this.c},er.prototype.providesSpatials=er.prototype.wc,er.prototype.K=function(t,e,n,r){var i=this.getTileKey(t,e,n);i=this.Fb().get(i);var o=2==this.c,a=[],s=gr(this);for(i?i.valid=!0:(delete(t=i=new Vk(t,e,n,y)).j,t.m=r),e=(r=cr(s,i,o?"domMarkers":"markers")).length;e--;)(t=r[e]).Bi=i,(o||1===t.rb().getState())&&a.push(t);return i.data=a,i},er.prototype.ya=function(t){(t=t.target.Bi)&&(t.valid=!1)},er.prototype.ko=function(t){this.B=!!t},er.prototype.setTileCanvasRendering=er.prototype.ko,er.prototype.B=!0,er.prototype.N=function(t,e,n,r){var i=gr(this),o=this.getTileKey(t,e,n),a=this.tileSize,s=this.Fb().get(o);return s||(delete(t=s=new Zk(o,t,e,n,a,this.Y,n,i)).j,t.m=r),this.B?(r=vp.pop(a),s.T(r)||vp.push(r,a)):el(s),s},er.prototype.Ya=function(t,e){var n;if(4===this.c||8===this.c){for(n=(t=e.Pa()).length;n--;)delete t[n].a[e.key];(t=e.Zf())&&(vp.push(t,this.tileSize),e.$f())}else for(n=(t=e.data).length;n--;)delete t[n].Bi},er.prototype.o=function(){er.l.o.call(this),gr(this).D()};var hr={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};er.ResultType=hr;var fr=[1,2,4,8];function Qq(t,e,n){var r=this,i=e&&e.rowFilter,o=n.resultType;Qq.l.constructor.call(this,n),C(t,ir,Qq,0),Pq(e),i?(n=Wa(e)).rowFilter=i.toString():n=Wa(e),delete n.layer,n.layerId=af(e.layerId,e.layer),(new Pf).a("pde","H.service.extension.worker.processor"),t=t.C().clone().F(jr+"."+kr).I({meta:1}),new Sf("pde",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===o,serverUrl:t.toString(),layerConfigs:[n],horizontalMargin:1}]}).then((function(){r.i=!0,r.Sa()}),this.Bb)}u(Qq,er),t("H.service.extension.platformData.TileProvider",Qq),Qq.prototype.u=function(t,e,n){return(t=new Xq(t,e,n)).i=lr,t};var lr=new wh({strokeColor:"transparent",fillColor:"transparent",lineWidth:0,lineJoin:"round",lineCap:"round"});function mr(t,e,n,r,i,o){Wq(mr,1,e,n),Wq(mr,2,r,i),(this.f=t.length)?(this.R=t,this.s=e,this.i=n,this.b=0,this.c=A(this.c,this),this.m=r,this.j=i,this.a=nc(),Ya(this.a,nr,o||{}),this.g={},x.setTimeout(this.c,0)):e(hf,!0)}Qq.prototype.G=function(t,e,n,r,i){var o,a=this,s=this.getTileKey(t,e,n);s=this.Fb().get(s);var l={cancel:jd},u=!0,c=this.c;if(s&&(4===c||8===c?s.Sd()||(r(vp.pop(this.tileSize),null),u=!1):(r(y),u=!1)),u){var h=tp.setTimeout((function(){(o=new Sf("pde",{message:[a.uid,1,[t,e,n]]})).then(r,i)}),500);l.cancel=function(){o?o.cancel():tp.clearTimeout(h)}}return l},Qq.prototype.requestInternal=Qq.prototype.G,Qq.prototype.o=function(){Qq.l.o.call(this),new Sf("pde",{message:[this.uid,3]})},Qq.ResultType=hr;var nr={duration:100,Ll:"geometry",Kl:"WKT",eo:"searchAttributes",aj:B};function or(t){this.a=t}function ir(t){ir.l.constructor.call(this,ir,t)}mr.prototype.c=function(){for(var t,e=[],n=!1,r=Jk();this.b<this.f;){var i=this.R[this.b];if(n=i.attributes,t=i.layerId||this.a.aj,i.distance&&(n[this.a.eo]={nearest:new lg(i.nearestLat,i.nearestLon),distance:i.distance}),i=i[this.a.Ll]){try{var o=Qn(new ko(i))}catch(a){this.i(new x.Error(a.message)),n=!0;break}n[this.a.Kl]=o}if((i=this.g[t])||(i=this.g[t]=this.m({layerId:t,columnNames:Object.keys(n)})),n=this.j(i,n),e.push(n),this.b++,(n=this.b===this.f)||Jk()-r>=this.a.duration){this.s(e,n);break}}n?this.g={}:this.u=x.setTimeout(this.c,0)},mr.prototype.cancel=function(){x.clearTimeout(this.u),this.b<this.f&&this.i(new x.Error("parsing canceled"))},mr.prototype.cancel=mr.prototype.cancel,or.prototype.cancel=function(){for(var t=this.a,e=t.length;e--;)t[e].cancel();t.length=0},or.prototype.cancel=or.prototype.cancel,u(ir,Vp),t("H.service.extension.platformData.Service",ir),ir.prototype.Ia=function(){return{subDomain:"s.fleet.ls",path:"1"}},ir.CONFIG_KEY="platformData",ir.prototype.request=function(t,e,n,r,i){var o="text/plain";if(!t)throw new D(this.request,0,t);if(!e)throw new D(this.request,1,e);if(!r)throw new D(this.request,3,r);if(!i)throw new D(this.request,4,i);return t=this.C().clone().F(t+"."+e).I(n),e===pr.JSON&&(o="application/json"),this.G(t,r,i,o)},ir.prototype.request=ir.prototype.request;var jr="tiles";ir.EntryPoint={DOC_ATTRIBUTES:"doc/attributes",DOC_LAYER:"doc/layer",DOC_LAYERS:"doc/layers",DOC_MAPS:"doc/maps",DOC_INDEXES:"doc/indexes",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SERVICE_CONFIGURATION:"serviceconfiguration",STATIC:"static",TILE:"tile",TILES:jr,FILE:"file",INDEX:"index"};var kr="json",pr={TXT:"txt",JSON:kr,HTML:"html",BIN:"bin"};function qr(t,e,n,r,i){var o,a=[],s=n.layer_id||n.layer_ids;return t=t.request(e,kr,n,(function(t){o=new mr(t.geometries,r,i,(function(t){return new Nq([],t.columnNames,t)}),(function(t,e){return t.oc(Oq(t,e))}),{aj:s}),a.push(o)}),(function(t){i(new x.Error(t))})),a.push(t),new or(a)}function rr(t,e,n){if(!zc(t))throw new D(n,0,"has invalid type");if(!zc(e))throw new D(n,1,"has invalid type");if(t.length!==e.length||!t.length)throw new D(n,1,"specify one key attribute for each given layer id in the same order")}function sr(t){sr.l.constructor.call(this,sr,t)}function tr(t){var e=ur;if(!t||!Ac(t.layerId)||uc(t.rowFilter)&&!Da(t.rowFilter)||uc(t.rowFilterContext)&&!Ea(t.rowFilterContext))throw new D(e,1,uc("invalid layer config")?"invalid layer config":t)}function vr(t){return Ac(t)&&/^[A-Z][A-Z0-9_]*$/.test(t)}function wr(t){for(var e=t&&t.length,n=2<=e&&"WKT"===t[--e]&&"GEOMETRY_ID"===t[--e];n&&e--;)n=vr(t[e]);return n}function xr(t,e){var n="",r=[];if(e){var i=t.geometries;if(i&&i.length){var o=Object.keys(i[0].attributes);for(n=n+"Meta:\t"+e+"\n"+o.join("\t"),n+="\tWKT\n",t=0;t<i.length;t++){var a=i[t].attributes,s=i[t].geometry;for(e=0;e<o.length;e++)r.push(a[o[e]]);n+=r.join("\t"),n+="\t"+s+"\n",r=[]}}}else{if(s={},r=[],t.geometries)for(i=0;i<t.geometries.length;i++)s[(e=t.geometries[i]).layerId]||(s[e.layerId]=[]),s[e.layerId].push(e);for(o in s)r.push({layerId:o,geometries:s[o]});for(t=0;t<r.length;t++)n+=xr(r[t],r[t].layerId)}return n}function ur(t,e,n){var r,i=this,o=e&&e.rowFilter;ur.l.constructor.call(this,n),C(t,yr,ur,0);var a=n.resultType;if(tr(e),o){var s=Wa(e);s.rowFilter=o.toString()}else s=e;(new Pf).a("cle","H.service.extension.worker.processor");var l=e.layerId;t.request(zr,Ar,{detail_level:"all",layer_id:l},(function(e){var n;for(e=e.layers,n=0;n<e.length;n++)if(e[n].layerId===l){s.level=e[n].level;break}r=t.C().clone().F(Br+"."+Ar).I({meta:1}),new Sf("cle",{message:[i.uid,0,{tileSize:i.tileSize,projected:!0,onlyOutline:4===a,serverUrl:r.toString(),layerConfigs:[s],batchTiles:!1,horizontalMargin:1}]}).then((function(){i.i=!0,i.Sa()}),i.Bb)}),(function(t){i.Bb(t.message)}))}function Cr(){if(Dr)throw new Yc(Cr)}ir.EntryPointType=pr,ir.prototype.ic=function(t,e){var n=e&&e.resultType;return t=new Qq(this,t,e),1==n||2===n?new Mn(t):new ql(t)},ir.prototype.createTileLayer=ir.prototype.ic,ir.prototype.zc=function(t,e,n,r,i,o){function a(t,e){e&&s--,r(t,!s)}var s,l=[];for(rr(t,e,this.zc),Wq(this.zc,3,r,i),C(n,K,this.zc,2),n={bbox:n.c+","+n.a+";"+n.f+","+n.b},o&&Ya(n,o),t=n.layer_id?[n.layer_id]:t,o=0,s=t.length;o<s;o++)n.layer_id=t[o],n.key_attribute=e[o],l.push(qr(this,"search/bbox",n,a,i));return new or(l)},ir.prototype.searchByBoundingBox=ir.prototype.zc,ir.prototype.Ob=function(t,e,n,r,i,o,a){if(rr(t,e,this.Ob),C(n,lg,this.Ob,2,"has invalid type"),!Dc(r))throw new D(this.Ob,3,"has invalid type");return Wq(this.Ob,4,i,o),t={layer_ids:t.join(","),key_attributes:e.join(","),proximity:n.lat+","+n.lng+","+r},a&&Ya(t,a),qr(this,"search/proximity",t,i,o)},ir.prototype.searchByProximity=ir.prototype.Ob,ir.prototype.Nb=function(t,e,n,r,i,o,a){var s="";if(rr(t,e,this.Nb),!Ac(n)&&!C(n,L))throw new D(this.Nb,1,"has invalid type");if(!Dc(r))throw new D(this.Nb,2,"has invalid type");if(Wq(this.Nb,4,i,o),t={layer_ids:t.join(","),key_attributes:e.join(","),radius:r},Ac(n))t.route_id=n;else{for(r=n.X,n=0,e=r.length;n<e;n+=3)s+=r[n]+","+r[n+1],n<e-3&&(s+=";");t.corridor=s}return a&&Ya(t,a),qr(this,"search/corridor",t,i,o)},ir.prototype.searchByCorridor=ir.prototype.Nb,X.prototype.Cj=function(t){return sp(X.prototype.Cj),this.Ma(ir,t)},X.prototype.getPlatformDataService=X.prototype.Cj,u(sr,Vp),t("H.service.extension.geofencing.Service",sr),sr.prototype.Ia=function(){return{subDomain:"fleet.ls",path:"2"}},sr.CONFIG_KEY="geofencing",sr.prototype.request=function(t,e,n,r){if(!t)throw new D(this.request,0,t);if(!Da(n))throw new TypeError("onResult must be a function");if(!Da(r))throw new TypeError("onError must be a function");return t=this.C().clone().F(t+".json").I(e),this.G(t,n,r)},sr.prototype.request=sr.prototype.request,sr.prototype.a=function(t){return Error(t.issues&&t.issues.length?t.issues.map((function(t){return t.message})).join(". "):t.message||t.response_code)},sr.EntryPoint={SEARCH_PROXIMITY:"search/proximity"},X.prototype.uj=function(t){return sp(X.prototype.uj),this.Ma(sr,t)},X.prototype.getGeofencingService=X.prototype.uj,t("H.service.extension.customLocation.Permission",{READ:"read",WRITE:"write",EXPORT:"export"}),t("H.service.extension.customLocation.Storage",{READONLY:"readonly",UPDATABLE:"updatable"}),u(ur,er),t("H.service.extension.customLocation.TileProvider",ur),ur.prototype.u=function(t,e,n){return new Xq(t,e,n)},ur.prototype.G=function(t,e,n,r,i){var o,a=this,s=this.getTileKey(t,e,n);s=this.Fb().get(s);var l={cancel:jd},u=!0,c=this.c;if(s&&(4===c||8===c?s.Sd()||(r(vp.pop(this.tileSize),null),u=!1):(r(y),u=!1)),u){var h=tp.setTimeout((function(){(o=new Sf("cle",{message:[a.uid,1,[t,e,n]]})).then(r,i)}),500);l.cancel=function(){o?o.cancel():tp.clearTimeout(h)}}return l},ur.prototype.requestInternal=ur.prototype.G,ur.prototype.o=function(){ur.l.o.call(this),new Sf("cle",{message:[this.uid,3]})},t("H.service.extension.customLocation.Table",Cr);var Dr=!0;function Er(t,e){var n;Dr=!1;var r=new Cr;Dr=!0,r.c=qc(x.JSON.parse(x.JSON.stringify(t))),t=t.columnNames;var i=nc();for(n=t.length;n--;)i[t[n]]=n;if(r.f=i,r.b=t.length,e){if(e.length%t.length)throw new D(Er,1,"Invalid number of cells")}else e=[];return r.a=e,r}Cr.prototype.Kd=function(){return this.c},Cr.prototype.getMeta=Cr.prototype.Kd,Cr.prototype.Nd=function(){return this.a.length/this.b},Cr.prototype.getRowCount=Cr.prototype.Nd,Cr.prototype.oc=function(t){return t<this.a.length/this.b?new Fr(this,t):B},Cr.prototype.getRow=Cr.prototype.oc,Cr.prototype.Nm=function(){var t,e=this.a.length/this.b,n=new x.Array(e);for(t=0;t<e;t++)n[t]=new Fr(this,t);return n},Cr.prototype.getRows=Cr.prototype.Nm,Cr.prototype.Bg=function(t){var e=this.b,n=this.a,r=n.length/this.b;if(!t||t.length%e)throw new D(this.Bg,0,"Invalid number of cells");return this.a=n.concat(t),r},Cr.prototype.addCells=Cr.prototype.Bg,Cr.prototype.pl=function(){for(var t=this.b,e=this.a,n=this.a.length/this.b;t--;)e.push(y);return this.oc(n)},Cr.prototype.addRow=Cr.prototype.pl,Cr.prototype.Oa=function(){return this.c.columnNames},Cr.prototype.getColumnNames=Cr.prototype.Oa,Cr.prototype.xe=function(t){return this.f[t]===B?B:new Gr(this,t)},Cr.prototype.getColumn=Cr.prototype.xe,Cr.prototype.sa=function(t,e){return this.a[t*this.b+this.f[e]]},Cr.prototype.getCell=Cr.prototype.sa,Cr.prototype.Ac=function(t,e,n){if(e=this.f[e],t>=this.a.length/this.b)throw new D(this.Ac,0,"Row index out of bounds");if(e===B)throw new D(this.Ac,0,"Column unknown");this.a[t*this.b+e]=n},Cr.prototype.setCell=Cr.prototype.Ac,Cr.prototype.concat=function(t){var e,n=arguments.length,r=""+this.Oa(),i=this.a?this.a.slice():[];for(e=0;e<n;e++){var o=arguments[e];if(!(o instanceof Cr))throw new D(this.concat,e);if(""+o.Oa()!==r)throw new D(this.concat,e,"Incompatible columns!");o.a&&(i=i.concat(o.a))}return Er(this.c,i)},Cr.prototype.concat=Cr.prototype.concat;var Hr=/(\n|\t|\r|")/;function Ir(t,e,n,r,i,o,a,s){var l;for(l=0;l<a;l++){l&&e.push("\t");var u=n[r*i+o[l]];if(l!==s){if(u!==y){if(u=String(u),Hr.test(u))throw new D(t.zi,0,'Invalid character (\\n, \\r, \\t, or ") in row '+r+" column "+t.c.columnNames[o[l]]);e.push(u)}}else e.push(u)}}function Gr(t,e){this.b=t,this.a=e}function Fr(t,e){this.a=t,this.Gh=e}function Jr(t){if(t===B)t="\t";else if(!/^[^"\r\n]$/.test(t))throw new D(Jr,0);this.c=String(t).charCodeAt(0),this.Hh=A(this.Hh,this),this.a=Kr}Cr.prototype.zi=function(t,e){var n,r=this.b,i=this.Oa(),o=[],a=[],s=this.a,l=-1;for(n=0;n<r;n++)t&&!t.test(i[n])||("WKT"===i[n]&&(l=o.length),o.push(n));if(!(t=o.length))throw new D(this.zi,1,"No columns filtered");if(Ir(this,a,i,0,r,o,t,l),e){var u=e.length;for(n=0;n<u;n++)a.push("\n"),Ir(this,a,s,i=e[n],r,o,t,l)}else for(u=this.Nd(),i=0;i<u;i++)a.push("\n"),Ir(this,a,s,i,r,o,t,l);return a.join("")},Cr.Column=Gr,Gr.prototype.sa=function(t){return this.b.sa(t,this.a)},Gr.prototype.getCell=Gr.prototype.sa,Gr.prototype.Ac=function(t,e){this.b.Ac(t,this.a,e)},Gr.prototype.setCell=Gr.prototype.Ac,Cr.Row=Fr,Fr.prototype.Oa=function(){return this.a.Oa()},Fr.prototype.getColumnNames=Fr.prototype.Oa,Fr.prototype.sa=function(t){return this.a.sa(this.Gh,t)},Fr.prototype.getCell=Fr.prototype.sa,Fr.prototype.Ac=function(t,e){this.a.Ac(this.Gh,t,e)},Fr.prototype.setCell=Fr.prototype.Ac,Fr.prototype.gd=function(){return this.a},Fr.prototype.getTable=Fr.prototype.gd;var Kr=0;function Lr(t,e,n){var r=t.a;if(r!==e)throw 1===r&&(t.a=Kr),new Yc(n,"Requires state: "+["READY","PARSE","PAUSE"][e]+" but found "+["READY","PARSE","PAUSE"][r])}function Mr(t,e){var n=[];return t.parse(e,(function(t,e,r){return 1>t&&(n[e]=r),0<t})),t.a=Kr,n}function Nr(t,e,n){this.c=new ko(t),this.m=e,this.g=!0,this.nf=this.j=this.b=0,Or(this),this.a=n,this.f=[],this.i=!1}function Or(t){var e=t.c.Kb();t.s=!1,(t.R=34===e)&&t.c.next()}function Pr(t,e){var n=t.c;switch(t.s=!0,e){case t.m:t.b++;break;case 13:n.next(),10!==n.Kb()&&t.a("CR without LF");case 10:t.b=0,t.j++;break;case-1:t.g=!1;break;default:t.a("End of field expected")}return n.next(),-1}function Qr(t,e,n,r){if(r=r||{},!e)throw new D(Qr,1,"has to be a function");if(!n)throw new D(Qr,2,"has to be a function");for(this.m=e,this.u=n,this.a=[],this.g={},this.f=[],this.b={},this.i={},this.j={},this.s={},this.R=r.duration||100,this.c=A(this.c,this),t=t.split("Meta:\t").slice(1),e=0;e<t.length;e++){n=(r=t[e].split("\n"))[0].split("\t")[0],r=r.slice(1).join("\n"),this.b[n]=new Jr,this.g[n]=Mr(this.b[n],r);var i={layerId:n,columnNames:this.g[n]};this.f.push(n),this.s[n]=Er(i),this.i[n]=Jk(),Rr(this,r,n),this.c(n)}}function Rr(t,e,n){var r=[],i=t.g[n].length-1,o=t.s[n];try{t.b[n].parse(e,(function(e,a,s){var l=!1;return 0<e&&(r[a]=s,a===i&&(t.a.push(o.oc(o.Bg(r))),Jk()-t.i[n]>t.R&&(l=!0))),l}),(function(t,e,n){if(0<t&&e===i)return Qn(n)}))}catch(a){t.u(a)}}function yr(t){yr.l.constructor.call(this,yr,t)}function Sr(t,e,n,r){var i,o=e[t=t===Tr?"changes":"file"],a=Ac(o),s=!a&&C(o,Blob);if(!a&&!s)throw new D(r,0,"Invalid "+t+" parameter");if(Ur)i=s?o:pf(o,"text/plain"),(r=new x.FormData).append(t,i,i.name||t+".wkt"),n.method="POST",n.data=r,delete e[t];else if(s)throw new D(r,0,"Sending Blob data is not supported by the browser")}p=Jr.prototype,p.getState=function(){return this.a},p.abort=function(){Lr(this,2,Jr.prototype.abort),this.a=Kr},p.Hh=function(t){throw this.a=Kr,new D(Jr.prototype.parse,0,"Malformed DSV at row "+this.b.j+" column "+this.b.b+": "+t)},p.parse=function(t,e,n){Lr(this,Kr,Jr.prototype.parse),t=t.trim(),this.b=new Nr(t,this.c,this.Hh),this.f=e,this.mk=n||gf,this.a=2,this.Ih()},p.mk=gf,p.Ih=function(){var t=this.b,e=[];Lr(this,2,Jr.prototype.Ih),this.a=1;do{if(!t.g){this.a=Kr;break}if(i>t.b){if(void 0!==n&&n!==i)return void this.b.a("The number of columns must be the same for all rows");var n=i}var r=t.j,i=t.b,o=t.nf,a=this.mk(r,i,t);if(t.nf>o)for(;-1!==t.next(););else{for(;-1!==(o=t.next());)e.push(o);a=String.fromCharCode.apply(y,e),e.length=0}Or(t),this.f(r,i,a)&&(this.a=t.g?2:Kr)}while(1===this.a);2!=this.a&&void 0!==n&&0<i&&n!==i&&this.b.a("The number of columns must be the same for all rows")},p=Nr.prototype,p.nf=0,p.Kb=function(){if(this.s)var t=-1;else{var e=this.c;if(t=e.Kb(),this.R)switch(t){case 34:e.next(),34!==(t=e.Kb())&&(t=Pr(this,t));break;case-1:this.a("Closing quotation mark expected")}else switch(t){case 34:this.a("Unexpected quotation mark");case this.m:case 13:case 10:case-1:t=Pr(this,t)}}return t},p.de=function(){this.i=!0,this.f=[]},p.Dd=function(){var t=this.f.slice();return this.i=!1,this.f=[],t},p.next=function(){var t=this.Kb();return-1!==t&&this.c.next(),this.i&&this.f.push(t),this.nf++,t},Qr.prototype.cancel=function(){for(var t in this.j)x.clearTimeout(this.j[t])},Qr.prototype.cancel=Qr.prototype.cancel,Qr.prototype.c=function(t){var e,n,r=this;this.j[t]=x.setTimeout((function(){if(2===r.b[t].getState())r.i[t]=Jk(),r.m(r.a,!1),r.a=[],r.b[t].Ih(),r.c(t);else{for(e=!0,n=0;n<r.f.length;n++)if(r.b[r.f[n]].getState()!==Kr){e=!1;break}e&&(0<r.a.length&&r.m(r.a,!0),r.a=[])}}),0)},u(yr,Vp),t("H.service.extension.customLocation.Service",yr),yr.prototype.Ia=function(){return{subDomain:"fleet.ls",path:"2"}},yr.CONFIG_KEY="customLocation",yr.prototype.ic=function(t,e){var n=e&&e.resultType;return t=new ur(this,t,e),1===n||2===n?new Mn(t):new ql(t)},yr.prototype.createTileLayer=yr.prototype.ic;var Ur=x.FormData&&!!x.FormData.prototype.append;function Vr(t,e,n,r,i,o){var a="text/plain",s=e===Wr.LAYERS_UPLOAD||e===Wr.LAYERS_MODIFY||e===Wr.LAYERS_IMPORT,l=r,u={data:B,method:"GET",headers:t.g};if(!e)throw new D(t.request,0,e);if(!n)throw new D(t.request,1,n);Wq(t.request,3,i,o),s&&(C(r,Object,t.request,2,"Invalid request parameters"),Sr(e,l=Wa(r),u,t.request));var c=t.C().clone().F(e+"."+n).I(l);return n===Xr.JSON&&(a="application/json"),(t=new tf(a,c.toString(),he,u)).then((function(t){var e=t.issues;e&&t.error_id&&t.response_code?o(Error(e[0].message)):i(t)}),(function(t){"error"===t.type||404===t.status?o(Error(t.statusText||"Unable to load data")):t.json().then((function(t){o(Error("["+t.issues[0].message+"] "+c+" request failed"))}),(function(){o(Error("["+t.statusText+"] "+c+" request failed"))}))})),t}yr.prototype.request=function(t,e,n,r,i){return Vr(this,t,e,n,r,i)},yr.prototype.request=yr.prototype.request;var zr="layers/list",Tr="layers/modify",Br="tiled/tile",Wr={LAYERS_DELETE:"layers/delete",LAYERS_GRANT:"layers/access/grant",LAYERS_LIST:zr,LAYERS_MODIFY:Tr,LAYERS_UPLOAD:"layers/upload",LAYERS_IMPORT:"layers/import",SEARCH_ALL:"search/all",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SEARCH_TILE:Br};yr.EntryPoint=Wr;var Ar="json",Xr={TXT:"txt",JSON:Ar};function Yr(t,e,n,r,i){var o,a=[];return t=t.request(e,Ar,n,(function(t){t.geometries.length?(t=xr(t,n.layer_id),o=new Qr(t,r,i),a.push(o)):r(hf,!0)}),i),a.push(t),new or(a)}yr.EntryPointType=Xr,yr.prototype.jb=function(t,e,n){var r=this;return this.request("search/all","txt",{filter:'WKT==""',layer_id:t},(function(i){var o=String(i).replace(/[\r\n]+$/g,"").split("\t");r.request(zr,Ar,{layer_id:t,detail_level:"all"},(function(t){(t=t.layers[0]).columnNames=o,e(Er(t))}),n)}),n)},yr.prototype.getLayer=yr.prototype.jb,yr.prototype.Kj=function(t,e,n,r){var i=e&&e.length,o=-1,a=this;return function s(){return++o<i?a.request("layers/access/grant",Ar,{layer_id:t,granted_app_id:e[o].grantedAppId,permissions:e[o].permissions.join(",")},s,r):a.jb(t,n,r)}()},yr.prototype.grantAccess=yr.prototype.Kj,yr.prototype.cj=function(t,e,n){return this.request("layers/delete",Ar,{layer_ids:t},e,n)},yr.prototype.deleteLayer=yr.prototype.cj,yr.prototype.cd=function(t,e,n){function r(){setTimeout((function(){l.jb(a,(function(t){setTimeout(i.bind(null,t),c)}),(function(){64e3>u?(u+=c,r()):n(x.Error("Timeout"))}))}),c),c*=2}function i(r){var i=JSON.stringify(r.Oa()),o=t.grants;if(i!==JSON.stringify(s)){var u="Results into different column names on the backend: "+i;setTimeout((function(){l.cj(a,(function(){n(x.Error(u))}),(function(t){n(x.Error(u+". "+t.message))}))}),c)}else o&&o.length?l.Kj(a,o,e,n):e(r)}var o,a,s,l=this,u=0,c=1e3,h=!t||!vr(a=t.layerId)&&(o="layerId")||!wr(s=t.columnNames)&&(o="columnNames")?0:Da(e)?Da(n)?-1:2:1;if(0<=h)throw new D(l.cd,h,o||arguments[h]);return l.jb(a,(function(){n(x.Error("Layer exists already"))}),(function(){var e={layer_id:a,file:s.join("\t")},i=t.level,o=t.storage;i!==B&&(e.level=i),o!==B&&(e.storage=o),l.request("layers/upload",Ar,e,r,n)}))},yr.prototype.createLayer=yr.prototype.cd,yr.prototype.Ob=function(t,e,n,r,i,o){if(!zc(t))throw new D(this.Ob,0,"has invalid type");if(C(e,lg,this.Ob,1,"has invalid type"),!Dc(n))throw new D(this.Ob,2,"has invalid type");return Wq(this.Ob,3,r,i),t={layer_ids:t.join(","),proximity:e.lat+","+e.lng+","+n},o&&Ya(t,o),Yr(this,"search/proximity",t,r,i)},yr.prototype.searchByProximity=yr.prototype.Ob,yr.prototype.Nb=function(t,e,n,r,i,o){var a="";if(!zc(t))throw new D(this.Nb,0,"has invalid type");if(!Ac(e)&&!C(e,L))throw new D(this.Nb,1,"has invalid type");if(!Dc(n))throw new D(this.Nb,2,"has invalid type");if(Wq(this.Nb,3,r,i),t={layer_ids:t.join(","),radius:n},Ac(e))t.route_id=e;else{var s=e.X;for(e=0,n=s.length;e<n;e+=3)a+=s[e]+","+s[e+1],e<n-3&&(a+=",");t.corridor=a}return o&&Ya(t,o),Yr(this,"search/corridor",t,r,i)},yr.prototype.searchByCorridor=yr.prototype.Nb,yr.prototype.zc=function(t,e,n,r,i){function o(t,e){e&&a--,n(t,!a)}var a,s=[];if(!zc(t))throw new D(this.zc,0,"has invalid type");for(C(e,K,this.zc,1,"has invalid type"),Wq(this.zc,2,n,r),e={bbox:e.c+","+e.a+";"+e.f+","+e.b},i&&Ya(e,i),t=e.layer_id?[e.layer_id]:t,i=0,a=t.length;i<a;i++)e.layer_id=t[i],s.push(Yr(this,"search/bbox",e,o,r));return new or(s)},yr.prototype.searchByBoundingBox=yr.prototype.zc,yr.prototype.ei=function(t,e,n,r){var i,o=[];if(!Ac(t))throw new D(this.ei,0,"has invalid type");Wq(this.ei,1,e,n);var a={layer_id:t};return r&&Ya(a,r),r=this.request("search/all",Ar,a,(function(r){r.geometries.length?(r=xr(r,t),i=new Qr(r,e,n),o.push(i)):e(hf,!0)}),n),o.push(r),new or(o)},yr.prototype.searchAll=yr.prototype.ei;var Zr={delete:/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};function $r(t,e,n,r,i,o){function a(){d++,r(this,d===p)}function s(t){d++,i(t,this,d===p)}var l,u="append"!==e,c={},h=nc(),p=0,f=[],d=0;if(!zc(n))throw new D(o,0,n);for(Wq(o,1,r,i),l=n.length;l--;){var g=n[l];if(C(g,Fr)){var v=g.gd().Kd().layerId,m=g.sa("GEOMETRY_ID");if(u){if(m===y||""===String(m))var b='GEOMETRY_ID must not be null or ""';c[m=v+"_"+m]&&(b="same GEOMETRY_ID for multiple rows"),c[m]=g}else m!==y&&""!==String(m)&&(b='GEOMETRY_ID must be null or ""')}else b="Invalid type";if(b)throw new D(o,0,"- Invalid row at index "+l+", "+b);(m=h[v])||(m=h[v]=[],p++),m.push(g)}for(v in h){for(n=[],l=(m=h[v]).length;l--;)n.push(m[l].Gh);f.push(t.request(Tr,Ar,{layer_id:v,action:e,changes:m[0].gd().zi(Zr[e]||null,n)},A(a,m),A(s,m)))}return new or(f)}function as(t){bq.l.constructor.call(this,as,t)}function bs(t){bs.l.constructor.call(this,bs,t)}function cs(t){if(this.c=!!t.toBypassToken,!this.c&&!t.token)throw new D(cs,0,'"token" must be specified');cs.l.constructor.call(this,cs,t),this.j=t.token,this.f={},this.b={}}function hs(t,e,n,r,i,o,a){return i={method:i,headers:Object.assign(t.c?{}:{authorization:"Bearer "+t.j},{"Content-Type":"application/geo+json"},t.g)},o&&(i.data=JSON.stringify(o)),(o=new tf("application/json",(e=es(t.C().clone().F(e+"/features").I(a||{}))).toString(),he,i)).then(n,Xp(t,e,r)),o}function gs(t,e){t.b[e]=is,t.Ff(e,(function(n){t.b[e]=js,t.f[e]=n.copyright,t.dispatchEvent("copyrightupdate")}),(function(n){throw t.b[e]=ks,n}))}function fs(t,e){return t.c?e:es(e).I({access_token:t.j})}function es(t){var e=Object.assign({},t.getQuery());return delete e.apikey,t.ng(e)}yr.prototype.Ti=function(t,e,n){return $r(this,"append",t,e,n,this.Ti)},yr.prototype.appendRows=yr.prototype.Ti,yr.prototype.jl=function(t,e,n){return $r(this,"update",t,e,n,this.jl)},yr.prototype.updateRows=yr.prototype.jl,yr.prototype.dj=function(t,e,n){return $r(this,"delete",t,e,n,this.dj)},yr.prototype.deleteRows=yr.prototype.dj,X.prototype.oj=function(t){return sp(X.prototype.oj),this.Ma(yr,t)},X.prototype.getCustomLocationService=X.prototype.oj,u(as,Vp),t("H.service.extension.customRoute.Service",as),as.prototype.Ia=function(){return{subDomain:"s.fleet.ls",path:"2"}},as.CONFIG_KEY="customRoute",as.prototype.a=function(t){return Error(t.issues&&t.issues.length?t.issues.map((function(t){return t.message})).join(". "):t)},as.prototype.zd=function(t,e,n){return Wq(this.zd,1,e,n),t=this.C().clone().F("calculateroute.json").I(t),this.G(t,e,n)},as.prototype.calculateRoute=as.prototype.zd,X.prototype.pj=function(t){return sp(X.prototype.pj),this.Ma(as,t)},X.prototype.getCustomRoutingService=X.prototype.pj,u(bs,Vp),t("H.service.SearchService",bs),bs.CONFIG_KEY="search",bs.prototype.Ia=function(){return{subDomain:"search",path:"v1"}},bs.prototype.a=function(t){return t=[t.title,t.action,t.cause].filter((function(t){return t})),Error(t.join(". "))},bs.prototype.Tg=function(t,e,n){return t=this.C().clone().za("geocode").F("geocode").I(t),this.G(t,e,n)},bs.prototype.geocode=bs.prototype.Tg,bs.prototype.bi=function(t,e,n){return t=this.C().clone().za("revgeocode").F("revgeocode").I(t),this.G(t,e,n)},bs.prototype.reverseGeocode=bs.prototype.bi,bs.prototype.tl=function(t,e,n){return t=this.C().clone().za("autosuggest").F("autosuggest").I(t),this.G(t,e,n)},bs.prototype.autosuggest=bs.prototype.tl,bs.prototype.Al=function(t,e,n){return t=this.C().clone().za("discover").F("discover").I(t),this.G(t,e,n)},bs.prototype.discover=bs.prototype.Al,bs.prototype.wn=function(t,e,n){return t=this.C().clone().za("lookup").F("lookup").I(t),this.G(t,e,n)},bs.prototype.lookup=bs.prototype.wn,bs.prototype.vl=function(t,e,n){return t=this.C().clone().za("browse").F("browse").I(t),this.G(t,e,n)},bs.prototype.browse=bs.prototype.vl,X.prototype.Pm=function(t){return this.Ma(bs,t)},X.prototype.getSearchService=X.prototype.Pm,u(cs,Vp),t("H.service.xyz.Service",cs),cs.prototype.Ia=function(){return{host:"xyz.api.here.com",path:"hub/spaces"}},cs.prototype.a=function(t){return Error(t.errorMessage||t.message)},cs.prototype.eh=function(t,e,n){return xc(t,"String",this.eh,0,'"projectId" must be a string'),ds(this.eh,1,e,n),t=es(this.C().clone().td("project-api/projects/"+t)),this.G(t,e,n)},cs.prototype.getProject=cs.prototype.eh,cs.prototype.Ej=function(t,e,n){return ds(this.Ej,0,t,e),n=fs(this,this.C().clone().I(n||{})),this.G(n,t,e)},cs.prototype.getSpaces=cs.prototype.Ej,cs.prototype.Ff=function(t,e,n){return xc(t,"String",this.Ff,0,'"spaceId" must be a string'),ds(this.Ff,1,e,n),t=fs(this,this.C().clone().F(t)),this.G(t,e,n)},cs.prototype.getSpace=cs.prototype.Ff,cs.prototype.Od=function(t,e,n){return xc(t,"String",this.Od,0,'"spaceId" must be a string'),ds(this.Od,1,e,n),t=fs(this,this.C().clone().F(t+"/statistics")),this.G(t,e,n)},cs.prototype.getStatistics=cs.prototype.Od,cs.prototype.Af=function(t,e,n,r,i,o,a){return t=fs(this,this.C().clone().F(r+"/tile/web/"+n+"_"+t+"_"+e+".mvtf").I(Object.assign({clip:!0},a))),this.G(t,(function(t){return t.arrayBuffer().then(i)}),o,"arraybuffer")},cs.prototype.search=function(t,e,n,r){return xc(t,"String",this.search,0,'"spaceId" must be a string'),ds(this.search,1,e,n),t=fs(this,this.C().clone().F(t+"/search").I(r||{})),this.G(t,e,n)},cs.prototype.search=cs.prototype.search,cs.prototype.Nc=function(t,e,n,r){if(xc(t,"String",this.Nc,0,'"spaceId" must be a string'),!Ea(e))throw new D(this.Nc,1,'"params" must be an object');return ds(this.Nc,2,n,r),t=fs(this,this.C().clone().F(t+"/features").I(e)),this.G(t,n,r)},cs.prototype.getFeaturesById=cs.prototype.Nc,cs.prototype.Hd=function(t,e,n,r){if(xc(t,"String",this.Hd,0,'"spaceId" must be a string'),!Ea(e))throw new D(this.Nc,1,'"params" must be an object');return ds(this.Hd,2,n,r),t=fs(this,this.C().clone().F(t+"/bbox").I(e)),this.G(t,n,r)},cs.prototype.getFeaturesByBoundingBox=cs.prototype.Hd,cs.prototype.ca=function(t){var e=this.f[t];return e||(this.b[t]||gs(this,t),null)},cs.prototype.Vc=function(t,e,n,r,i){if(xc(t,"String",this.Vc,0,'"spaceId" must be a string'),!Ea(e))throw new D(this.Vc,1,'"geojsonObject" must be an object');if(ds(this.Vc,2,n,r),i&&!Ea(i))throw new D(this.Vc,4,'"opt_params" must be an object');return hs(this,t,n,r,"PUT",e,i)},cs.prototype.putFeatures=cs.prototype.Vc,cs.prototype.Tc=function(t,e,n,r,i){if(xc(t,"String",this.Tc,0,'"spaceId" must be a string'),!Ea(e))throw new D(this.Tc,1,'"featureCollection" must be an object');if(ds(this.Tc,2,n,r),i&&!Ea(i))throw new D(this.Tc,4,'"opt_params" must be an object');return hs(this,t,n,r,"POST",e,i)},cs.prototype.postFeatures=cs.prototype.Tc,cs.prototype.dd=function(t,e,n,r){if(xc(t,"String",this.dd,0,'"spaceId" must be a string'),!Ea(e))throw new D(this.dd,1,'"params" must be an object');return ds(this.dd,2,n,r),hs(this,t,n,r,"DELETE",B,e)},cs.prototype.deleteFeatures=cs.prototype.dd,cs.CONFIG_KEY="xyz";var is=1,js=2,ks=-1;function ds(t,e,n,r){if(!Da(n))throw new D(t,e,'"onResult" must be a function');if(!Da(r))throw new D(t,e+1,'"onError" must be a function')}function ls(t,e,n){var r;if(ls.l.constructor.call(this,n?{min:n.min,max:n.max,engineType:n.engineType}:void 0),C(t,cs,ls,0),!Ac(e))throw new D(ls,1,'"spaceId" must be a string');if(this.u=t,this.c=e,this.i={},n&&(["limit","simplificationLevel","tags"].forEach((function(t){t in n&&(this.i[t]=n[t])}),this),t=n.parameters))for(r in t)this.i[r]=t[r];this.lb(this.a===ik.WEBGL?new qi({sources:{xyz:{type:"MVT"}},layers:{xyz:{data:{source:"xyz",layer:this.c},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#000000",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.c,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.c,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.c,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.c,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#000000",lineWidth:"2px",renderOrder:203}]}))}function ms(t,e,n,r,i){1&i&&ns(t,t,e,n,r,0),2&i&&ns(t,t,e,n,r,1),4&i&&ns(t,t,e,n,r,2),8&i&&ns(t,t,e,n,r,3)}function ns(t,e,n,r,i,o){for(var a,s,l,u,c=(n+1)*(n+1),h=4*r,p=n+1,f=[{r:0,Il:0,ul:0,zg:0,next:null}],d=1,y=["r","g","b","a"][o],g=2*n+1;d<g;d++)f[d]={r:0,Il:0,ul:0,zg:0,next:null},f[d-1].next=f[d];f[2*n].next=f[0];var v=4*(r-1);for(a=0;a<i;a++){var m=a*h,b=t[m+o],_=b*p*(n+2)/2;for(g=b*p,d=0;d<=n;d++)f[d][y]=b;var w=0;for(d=1;d<=n;d++){var x=d<r?m+4*d:m+v;_+=(x=t[x+o])*(p-d),w+=x,f[n+d][y]=x}x=f[0],l=f[p],d=m,u=4*p;var k=m+v;for(b=0;b<r;b++){e[d+o]=_/c,_-=g;var E=b+p<r?d+u:k;if(_+=w+=E=t[E+o],g-=x[y],g+=l[y],w-=l[y],x[y]=E,x=x.next,l=l.next,d+=4,!_)for(;(s=4*(b+p))<h&&0===t[m+o+s];)b++,d+=4}}for(m=(i-1)*h,b=0;b<r;b++){for(_=(a=e[(t=4*b)+o])*p*(n+2)/2,g=a*p,d=0;d<=n;d++)f[d][y]=a;for(w=0,d=1;d<=n;d++)_+=(x=e[(x=d<i?t+d*h:t+m)+o])*(n-d+1),w+=x,f[n+d][y]=x;for(x=f[0],l=f[p],d=t,k=p*h,v=t+m,a=0;a<i;a++)if(e[d+o]=_/c,_-=g,_+=w+=E=e[(E=a+p<i?d+k:v)+o],g-=x[y],g+=l[y],w-=l[y],x[y]=E,x=x.next,l=l.next,d+=h,!_)for(;(s=a+p)<i&&0===e[s*h+o+t];)a++,d+=h}}function os(t,e,n){this.f=e=t>>e,this.j=Math.log(e)*Math.LOG2E,this.i=t=document.createElement("CANVAS"),this.a=t.getContext("2d"),this.b=t.width=t.height=3*e;var r=document.createElement("canvas");t=n.a;var i,o=n.b;for(a in e=[],r.width=256,r.height=1,r=r.getContext("2d"),o)o.hasOwnProperty(a)&&e.push({stop:parseFloat(a),value:o[a]});o=e.length,e.sort(this.m),0<e[0].stop&&e.unshift({stop:0,value:e[0].value}),1>e[o-1].stop&&e.push({stop:1,value:e[o-1].value}),o=e.length;var a=r.createLinearGradient(0,0,256,0);for(i=0;i<o;i++){if(!t&&l){var s=l.stop+(e[i].stop-l.stop)/2;a.addColorStop(s,l.value),a.addColorStop(s,e[i].value)}a.addColorStop(e[i].stop,e[i].value);var l=e[i]}r.fillStyle=a,r.fillRect(0,0,256,1),this.c=r.getImageData(0,0,256,1).data,this.g=n.a}function ps(t,e){this.a=t,this.size=e}function qs(t,e){var n,r=0;if(!Ea(t)||Va(t))throw new D(qs,0,t);for(n in t){var i=+n;if(r++,!(Dc(i)&&0<=i&&1>=i&&Ac(t[n])))throw new D(qs,0,t)}if(2>r)throw new D(qs,0,"Specify at least 2 stops");this.b=t,this.a=!!e}X.prototype.Hj=function(t){return sp(X.prototype.Hj,"Use HERE IML service instead."),this.Ma(cs,t)},X.prototype.getXYZService=X.prototype.Hj,u(ls,T),t("H.service.xyz.Provider",ls),ls.prototype.G=function(t,e,n,r,i){return this.u.Af(t,e,n,this.c,r,i,this.i)},ls.prototype.requestInternal=ls.prototype.G,ls.prototype.ca=function(){return this.u.ca(this.c)},ls.prototype.getCopyrights=ls.prototype.ca,ls.prototype.md=ff,ls.prototype.providesOMV=ls.prototype.md,ls.prototype.$=function(){return this.ab()},ls.prototype.getStyle=ls.prototype.$,ls.prototype.xb=function(t){C(t,qi)&&t.b("MVT"),this.lb(t)},ls.prototype.setStyle=ls.prototype.xb,t("H.service.buildInfo",(function(){return Hf("H-service","1.38.0","8be3148",{region:"row"})})),os.prototype.m=function(t,e){return t.stop-e.stop},t("H.data.heatmap.Colors",qs);var rs=new qs({0:"#008",.2:"#0b0",.5:"#ff0",.7:"#f00"},!0);function ss(t,e,n){this.a=t=Zd(t,0,30),this.u=e,this.i=n,this.m=[],this.b=[];do{this.b[t]=[],this.m[t]=new ts}while(t--);e===us?(this.s=vs,this.j=ws):(this.s=xs,this.j=ys),this.c=1/0,this.f=-1/0}qs.DEFAULT=rs;var zs=Math.log(.5);function ws(t){return this.g?Math.round((t-this.c)/this.g*255):127}function ys(t){return void 0===this.R?127:Math.round(255*Math.pow(t,this.R))}function As(t,e,n,r,i){var o,a,s=1<<e;return r=Yd(r,s),!(s=0<=n&&n<s&&(o=t.b[e])&&(a=o[n])&&(s=a[r])||null)&&i&&0<=e&&(s=As(t,e-1,n>>1,r>>1,i)),s}function Bs(t,e,n,r,i,o){for(var a,s=[];n<=r;n++)for(a=i;a<=o;a++)s.push(As(t,e,n,a,!1));return s}function Cs(t,e){var n,r=0,i=0,o=As(t,0,0,0,!1);return e.f||(e.z===t.a?e.c=e.a:(Ds(t,e,(function(e){var a=Es(t,e),s=4-a.length;if(e.z!==t.a){for(n=0;n<a.length;n++)r+=a[n].a,i++;r+=s*o.a,i+=s}})),e.c=r/i),e.f=!0),e.c}function Ds(t,e,n){e=[e];for(var r,i;0<e.length;)r=Es(t,i=e.shift()),n(i),e.push.apply(e,r)}function Es(t,e){var n,r,i,o=[];for(r=0;1>=r;r++)for(i=0;1>=i;i++)(n=As(t,e.z+1,2*e.x+r,2*e.y+i,!1))&&o.push(n);return o}function xs(t,e,n){this.x=t,this.y=e,this.z=n,this.a=this.b=this.g=0,this.f=!1,this.c=0}function vs(t,e,n){this.x=t,this.y=e,this.z=n,this.a=this.b=this.g=0,this.f=!1,this.c=0}function ts(){this.f=this.c=1/0,this.a=this.b=-1/0}function Fs(t){var e=t||{},n=+e.sampleDepth,r=e.pointSize;t=+e.coarseness;var i=e.colors,o={min:e.min,max:e.max,engineType:e.engineType},a=e.tileSize,s=+e.dataMax;if(e.tileSize&&(o.tileSize=a),T.call(this,o),jk(this,e.opacity),this.i="value"===e.type?us:Gs,this.sampleDepth_=Dc(n)?Zd(Math.round(n),1,8):4,this.K=this.i===Gs?Dc(r)?Zd(Math.round(7-r),0,6):2:1,this.B=!!e.assumeValues,e=this.max,this.N=Dc(s)?Zd(Math.round(s),this.min,e+this.sampleDepth_):e,t=Dc(t)?Zd(Math.round(t),0,3):1,i&&!C(i,qs))throw new D(Fs,0,"colors");this.c=new ss(e+this.sampleDepth_+this.K,this.i,this.N),this.V=new os(this.tileSize,t,i||rs),this.v=A(this.v,this),this.u=A(this.u,this),this.Y=new Kk(20,this.v)}function Hs(t,e,n,r){var i=document.createElement("canvas"),o=t.tileSize,a=i.getContext("2d");i.width=i.height=o;var s,l,u=t.V,c=t.c,h=t.B,p=t.i,f=t.K,d=u.f,y=u.a,g=p===Gs?void 0===f?2:f:1;f=g,t=Math.min(t.sampleDepth_+g,u.j),g=u.b;var v=c.a;if(h&&p===us){for(l=-1;1>=l;l++)for(h=-1;1>=h;h++){var m=(m=As(c,r,n+l,e+h,!0))?c.j(Cs(c,m)):128;y.fillStyle="rgba("+m+",128,0,1)",y.fillRect((h+1)*d,(l+1)*d,d,d)}h=d-Math.floor(d/10),l=3,ms((m=y.getImageData(0,0,g,g)).data,h,g,g,l),y.putImageData(m,0,0)}else y.fillStyle=h?"#080":"#000",y.fillRect(0,0,g,g);for(;f<=t&&r+f<=v;f++){l=d-(h=d>>f);var b=p===Gs?127+Math.floor(128/(1<<t-f)):255;m=2+(1<<f);var _=1<<f,w=e<<f,x=n<<f;for(w=(_=Bs(c,r+f,x-1,x+_,w-1,w+_)).length;w--;){x=w%m;var k=w/m<<0;(s=_[w])&&(s=c.j(s.a),y.fillStyle="rgba("+s+","+b+",0,1)",y.fillRect(x*h+l,k*h+l,h,h))}m=y,b=h,_=l,w=d+2*h,h=d+2*h,x=x=3,ms((k=y.getImageData(_,l,w,h)).data,b,w,h,x),m.putImageData(k,_,l)}for(e=y.getImageData(0,0,g,g),n=u.c,r=u.g,t=0,g=(c=e.data).length;t<g;t+=4)p=c[t],f=c[t+1],4===n.length&&(p=0),c[t]=n[4*p],c[t+1]=n[4*p+1],c[t+2]=n[4*p+2],c[t+3]=n[4*p+3]*(r?f/255:10>f?0:1);return y.putImageData(e,0,0),d=(u=new ps(u.i,d)).size,a.drawImage(u.a,d,d,d,d,0,0,o,o),i}ss.prototype.yb=function(t){var e,n,r=t.value;void 0===r&&(r=1),r>this.f&&(this.f=r,this.g=this.f-this.c),r<this.c&&(this.c=r,this.g=this.f-this.c);var i=kj.Kc(t).scale(1073741823).floor();r=this.a;var o=i.x>>30-r;for(i=i.y>>30-r,n=this.s;-1<r;){this.b[r][i]||(this.b[r][i]=[]),(e=this.b[r][i][o])||(e=this.b[r][i][o]=new n(o,i,r)),e.yb(t,r);var a=this.m[r];a.f>e.b&&(a.f=e.b),a.a<e.b&&(a.a=e.b),a.c>e.a&&(a.c=e.a),a.b<e.a&&(a.b=e.a),r--,o>>=1,i>>=1}},ss.prototype.clear=function(){ss.call(this,this.a,this.u,this.i)},xs.prototype.yb=function(t,e){this.g++,this.b+=t.value||1,this.a=this.b/Math.pow(2,2*(30-e))},vs.prototype.yb=function(t){t=t.value,this.b+=void 0!==t?t:1,this.a=this.b/++this.g,this.f=!1},u(Fs,T),t("H.data.heatmap.Provider",Fs),Fs.prototype.dc=function(t){jk(this,t)},Fs.prototype.setOpacity=Fs.prototype.dc,Fs.prototype.Oc=function(){return this.g},Fs.prototype.getOpacity=Fs.prototype.Oc,Fs.prototype.Re=ff,Fs.prototype.providesRasters=Fs.prototype.Re,Fs.prototype.G=function(t,e,n,r,i){var o,a,s=this.B;if(As(this.c,0,0,0,!1)){if(!s){var l=Bs(this.c,n,e-1,e+1,t-1,t+1);for(o=l.length;o--&&!s;)if(null!==l[o]){s=!0;break}}s&&(a=this.Y.push([t,e,n,r,i],this.u))}return s||r(null),a||Bl},Fs.prototype.requestInternal=Fs.prototype.G,Fs.prototype.v=function(t,e){t.done(Hs(this,e[0],e[1],e[2]))},Fs.prototype.u=function(t,e,n){var r=t.data;t=r[3],r=r[4],n?r():t(e)},Fs.prototype.Si=function(t,e){var n;if(!zc(t))throw new D(this.Si,0,t);if(n=t.length){for(;n--;)this.c.yb(t[n]);var r;n=(t=this.c).m;var i=t.a,o=0;if(t.u===Gs){var a=n[t.a].a;for(r=t.a;0<=r&&n[r].a===a;r--)o=r;for(a=n[0].a,r=0;r<=o&&a===n[r].a;r++)i=r;o>t.i&&(o=t.i),a=Math.round(i+(o-i)/2),t.R=zs/Math.log(n[a].b)}this.reload(!!e)}},Fs.prototype.addData=Fs.prototype.Si,Fs.prototype.clear=function(){this.c.clear(),this.reload(!0)},Fs.prototype.clear=Fs.prototype.clear;var Gs=0,us=1;function Is(){}function Js(t){for(var e,n=(t=t.attributes).length;n--;)switch(e=t[n],e.name){case"x":this.x=parseFloat(e.value);break;case"y":this.y=parseFloat(e.value);break;case"xunits":this.Qc="fraction"===Is.prototype.Ja(e);break;case"yunits":this.tc="fraction"===Is.prototype.Ja(e)}}function Ks(t){var e=t.childNodes,n=new Is;for(t=e.length;t--;){var r=e[t];if("href"===r.nodeName)this.href=n.Ja(r)}}function Ls(t){var e;if(t){var n=(t=t.childNodes).length;for(e=new Is;n--;){var r=t[n];switch(r.nodeName){case"scale":this.scale=e.Bf(r);break;case"Icon":this.icon=r=new Ks(r);break;case"hotSpot":this.a=r=new Js(r)}}}}function Ms(){this.a={4:function(t){return["#",t.charAt(1),t.charAt(1),t.charAt(2),t.charAt(2),t.charAt(3),t.charAt(3),"ff"].join("")},5:function(t){return["#",t.charAt(1),t.charAt(1),t.charAt(2),t.charAt(2),t.charAt(3),t.charAt(3),t.charAt(4),t.charAt(4)].join("")},7:function(t){return t+"ff"},9:function(t){return t}},this.b={4:function(t){return[Ns(t.charAt(1)),Ns(t.charAt(2)),Ns(t.charAt(3)),255]},5:function(t){return[Ns(t.charAt(1)),Ns(t.charAt(2)),Ns(t.charAt(3)),Ns(t.charAt(4))]},7:function(t){return[(t=parseInt(t.substring(1),16))>>16&255,t>>8&255,255&t,255]},9:function(t){return[(t=parseInt(t.substring(1),16))>>24&255,t>>16&255,t>>8&255,255&t]}}}function Ns(t){return((t=parseInt(t,16))<<4)+t}function Os(t){return 16>t?"0"+Math.round(t).toString(16):Math.round(t).toString(16)}function Ps(t,e,n){return/^(#|rgb).*/.test(e)?(n||(n="","#"===e.charAt(0)?n=t.a[e.length]?e:"":"rgb"===e.substr(0,3)&&(n=2<(n=(e=e.match(/\d+(\.\d+)?/g)).length)&&5>n?["#",Os(+e[0]),Os(+e[1]),Os(+e[2]),3<n?Os(255*+e[3]):"ff"].join(""):""),e=n),(t=t.b[e.length](e))[3]=Math.round(t[3]/255*100)/100,t):[0,0,0,255]}function Qs(t){for(var e,n=(t=t.childNodes).length,r=new Is,i=new Ms;n--;)switch(e=t[n],e.nodeName){case"color":this.a=r.zf(e);break;case"colorMode":this.b=r.Ja(e)}"random"===this.b&&(this.a="#"+i.hl(this.a,!1))}function Rs(t){var e=t.childNodes,n=e.length,r=new Is;for(this.a=this.fill=!0,this.b=new Qs(t);n--;)switch(t=e[n],t.nodeName){case"fill":this.fill=r.Ed(t);break;case"outline":this.a=r.Ed(t)}}function Ss(t){var e=t.childNodes,n=e.length,r=new Is;for(this.a=new Qs(t);n--;)"width"===(t=e[n]).nodeName&&(this.width=r.Bf(t))}function Ts(t){for(var e,n=(t=t.childNodes).length,r=new Is;n--;)switch(e=t[n],e.nodeName){case"bgColor":this.bgColor=r.zf(e);break;case"textColor":this.textColor=r.zf(e);break;case"text":this.text=r.Ja(e);break;case"displayMode":this.displayMode=r.Ja(e)}}function Us(t){var e=t.childNodes,n=e.length;for(this.id=t.getAttribute("id");n--;)switch(t=e[n],t.nodeName){case"IconStyle":this.Oj=t=new Ls(t);break;case"LineStyle":this.Ud=t=new Ss(t);break;case"PolyStyle":this.Ak=t=new Rs(t);break;case"BalloonStyle":this.jf=t=new Ts(t)}}function Vs(t,e){var n=(t=t.childNodes).length,r=new Is;for(this.b=e;n--;)switch(e=t[n],e.nodeName){case"key":this.key=r.Ja(e);break;case"styleUrl":this.a=r.Ja(e)}}function Ws(t,e){var n=t.childNodes,r=n.length;for(this.b=e,this.id=t.getAttribute("id"),this.a=[];r--;)"Pair"===(t=n[r]).nodeName&&(t=new Vs(t,this.b),this.a.push(t))}function Xs(){this.a={}}function Ys(t){for(var e,n=(t=t.childNodes).length,r=null,i=new Is;n--;)"coordinates"===(e=t[n]).nodeName&&(r=i.Ja(e));this.a=null,r&&(this.a=i.Th(r)||null)}function Zs(t,e){var n=t&&t.childNodes||[],r=new Is;if(!t||!e)throw Error("Node or stylesContainer is not defined");for(this.visibility=!0,this.g=t,t=n.length;t--;){var i=n[t];switch(i.nodeName){case"name":this.name=r.Ja(i);break;case"description":this.b=r.Ja(i);break;case"visibility":this.visibility=r.Ed(i);break;case"open":this.open=r.Ed(i);break;case"styleUrl":(this.c=r.Ja(i))&&(i=this.c.substr(1),this.f=e.hh(i,!1));break;case"Style":this.a=i=new Us(i)}}}function $s(t){for(var e,n=(t=t.childNodes).length,r=new Is;n--;)if("coordinates"===(e=t[n]).nodeName){var i=[],o=new Is;try{i=o.xk(r.Ja(e))}catch(a){i=[]}this.a=2>i.length?[]:i}}function at(t){for(var e=new L,n=t.a?t.a.length:0;n--;)e.nd(t.a[n]);return e}function bt(){}function ct(t){var e=t.childNodes,n=e.length;for(this.a=new L,this.c=[];n--;){var r=e[n],i=r.nodeName;if("outerBoundaryIs"===i||"innerBoundaryIs"===i){var o=r.childNodes;for(r=o.length;r--;){var a=o[r];if("LinearRing"===a.nodeName){var s=new $s(a);if("outerBoundaryIs"===i){this.a=at(s);var l=void 0,u=t,c=s.a;s=new Is;var h=u.querySelector("altitudeMode");if(h&&h.parentNode===u&&!/^\s*clampTo/.test(s.Ja(h))&&c){h=c.length;for(var p=0;p<h&&0!==l;p++){var f=c[p].alt;f?l?f!==l&&(l=0):l=f:l=0}(c=u.querySelector("*|altitudeOffset"))&&c.parentNode===a&&"http://www.google.com/kml/ext/2.2"===c.namespaceURI&&(a=s.Bf(c))&&(l+=a),l&&(l=wd(2047,l),(a=u.querySelector("extrude"))&&a.parentNode===u&&s.Ed(a)?this.b=l:this.f=l)}}else this.c.push(at(s))}}}}}function dt(t,e){var n=document.createElement("CANVAS");n.width=1,n.height=1,this.i=t,this.b={},this.c={},this.f=new Uj(n),this.g=e||""}function et(t,e,n){for(var r,i,o=(e=e.childNodes).length,a={};o--;){var s=e[o];switch(s.nodeName){case"Point":s=new Ys(s),i=ft(t,"Marker"),(s=s.a)&&(r=new Ln(s,i),i.Uh&&Ee(i.Uh,"statechange",A(t.j,t,i.Uh,r,i),!1));break;case"LineString":case"LinearRing":s=new $s(s),i=ft(t,"Polyline"),r=new th(at(s),i);break;case"Polygon":s=new ct(s),(i=ft(t,"Polygon")).elevation=s.f,i.extrusion=s.b,r=new uh(new O(s.a,s.c),i);break;case"MultiGeometry":r=et(t,s,new R)}r&&(t.a.name&&(a.name=t.a.name),t.a.b&&(a.description=t.a.b),i&&i.jf&&(a.balloonStyle=i.jf),a.kmlNode=t.a.g,r.setData(a),n&&n.ba(r))}return n||r}function ft(t,e){var n=t.a,r={visibility:n.visibility},i=new Ms,o=1,a={x:0,y:0,Qc:!1,tc:!1},s=gt(t,n.f);switch(n.a&&(s=gt(t,n.a,s)),e){case"Marker":if(s&&s.Oj){if((i=s.Oj).scale&&(o=i.scale),i.a){var l=i.a;a={x:l.x,y:l.y,Qc:l.Qc,tc:l.tc}}i.icon&&i.icon.href?(e=i.icon.href,ht.test(e)||(e=t.g+e),i=o+"_"+a.x+a.y+a.Qc+a.tc+"_"+e,(l=t.b[i]||t.c[i])||(l=new Uj(e),t.c[i]=l),0===l.getState()?(r.icon=t.f,r.Uh=l,r.href=e,r.anchor=a,r.scale=o):1===l.getState()&&(r.icon=l)):1!==o&&(l||(a={x:14,y:4,Qc:!1,tc:!1}),o={size:new Ui((t={w:28*o,h:36*o}).w,t.h),anchor:new G(a.Qc?t.w*a.x:a.x*o,a.tc?t.h*(1-a.y):t.h-a.y*o),hitArea:new Vi(Wi.POLYGON,[0*o,16*o,0*o,7*o,8*o,0*o,18*o,0*o,26*o,7*o,26*o,16*o,18*o,34*o,8*o,34*o])},r.icon=new Uj('<svg xmlns="http://www.w3.org/2000/svg" width="28px" height="36px"><path d="M 19 31 C 19 32.7 16.3 34 13 34 C 9.7 34 7 32.7 7 31 C 7 29.3 9.7 28 13 28 C 16.3 28 19 29.3 19 31 Z" fill="#000" fill-opacity=".2"/><path d="M 13 0 C 9.5 0 6.3 1.3 3.8 3.8 C 1.4 7.8 0 9.4 0 12.8 C 0 16.3 1.4 19.5 3.8 21.9 L 13 31 L 22.2 21.9 C 24.6 19.5 25.9 16.3 25.9 12.8 C 25.9 9.4 24.6 6.1 22.1 3.8 C 19.7 1.3 16.5 0 13 0 Z" fill="#fff"/><path d="M 13 2.2 C 6 2.2 2.3 7.2 2.1 12.8 C 2.1 16.1 3.1 18.4 5.2 20.5 L 13 28.2 L 20.8 20.5 C 22.9 18.4 23.8 16.2 23.8 12.8 C 23.6 7.07 20 2.2 13 2.2 Z" fill="#18d"/></svg>',o))}break;case"Polyline":r.style={},s&&s.Ud&&(o=s.Ud,r.style.strokeColor="rgba("+Ps(i,o.a.a,!0)+")",0<=o.width&&(r.style.lineWidth=o.width));break;case"Polygon":r.style={},s&&(s.Ud&&(o=s.Ud,r.style.strokeColor="rgba("+Ps(i,o.a.a,!0)+")",0<=o.width&&(r.style.lineWidth=o.width)),s.Ak&&(o=s.Ak,r.style.fillColor=o.fill?"rgba("+Ps(i,o.b.a,!0)+")":"rgba(0,0,0,0)",o.a||(r.style.lineWidth=0)))}return r.jf=s.jf,r}function gt(t,e,n){for(var r in n=n||{},e)e.hasOwnProperty(r)&&(n[r]="object"===typeof e[r]?gt(t,e[r],n[r]):e[r]);return n}t("H.data.utils.Dom",Is),Is.prototype.Ed=function(t){return!!t&&/^\s*(1|true)\s*$/i.test(this.Ja(t))},Is.prototype.getBoolean=Is.prototype.Ed,Is.prototype.Ja=function(t){var e;try{if(t.nodeType===Node.ATTRIBUTE_NODE)return t.value;var n="",r=0,i=t.childNodes;for(e=i.length;r<e;r++)i[r].nodeType!==Node.COMMENT_NODE&&(n+=i[r].nodeValue.replace(/^\s+|\s+$/g,""))}catch(o){}return n||""},Is.prototype.getString=Is.prototype.Ja,Is.prototype.Bf=function(t){return parseFloat(this.Ja(t))||0},Is.prototype.getFloat=Is.prototype.Bf,Is.prototype.xk=function(t){var e,n=t.split(/\s+/),r=n.length,i=!(n&&1==r),o=i?1:3,a=[];for(i||(r=(n=t.split(",")).length),e=0;e<r;e+=o){if(!(t=this.Th(i?n[e]:e+3>n.length?null:n.slice(e,e+3))))return[];a.push(t)}return a},Is.prototype.parseCoords=Is.prototype.xk,Is.prototype.Th=function(t){if(!t)return null;var e=t instanceof Array&&0<t.length&&4>t.length?t:t.split(",");t=parseFloat(e[0]);var n=parseFloat(e[1]);return e=parseFloat(e[2]),isNaN(n)||isNaN(t)?null:new lg(n,t,isNaN(e)?void 0:e)},Is.prototype.parseCoord=Is.prototype.Th,Is.prototype.zf=function(t){return t=this.Ja(t),/^[0-9a-fA-F]{8}$/.test(t)?"#"+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)+t.substr(0,2):"#000000ff"},Is.prototype.getColor=Is.prototype.zf,t("H.data.kml.HotSpot",Js),t("H.data.kml.Icon",Ks),t("H.data.kml.IconStyle",Ls),t("H.data.utils.ColorHelper",Ms),Ms.prototype.hl=function(t,e){var n="";if(!/^(#|rgb).*/.test(t)){var r;for(n="",r=0;6>r;r++)n+="ABCDEF0123456789".charAt(Math.floor(16*Math.random()));return n+"ff"}for(t=Ps(this,t,e),e=0;4>e;e++)n+=Os(r=3>e?Math.floor(Math.random()*(t[e]+1)):255*t[e]);return n},Ms.prototype.toRandomRGBA=Ms.prototype.hl,t("H.data.kml.ColorStyle",Qs),t("H.data.kml.PolyStyle",Rs),t("H.data.kml.LineStyle",Ss),t("H.data.kml.BalloonStyle",Ts),t("H.data.kml.Style",Us),t("H.data.kml.Pair",Vs),Vs.prototype.$=function(){if(this.a){var t="highlight"===this.key;t=this.b.hh(this.a.substr(1),t)}return t},Vs.prototype.getStyle=Vs.prototype.$,t("H.data.kml.StyleMap",Ws),Ws.prototype.$=function(t){var e=null;t=t?"highlight":"normal";for(var n=this.a.length;n--;)this.a[n].key===t&&(e=this.a[n].$());return e},Ws.prototype.getStyle=Ws.prototype.$,t("H.data.kml.StyleContainer",Xs),Xs.prototype.Dg=function(t){t&&t.id&&(this.a["style_"+t.id]=t)},Xs.prototype.addStyle=Xs.prototype.Dg,Xs.prototype.hh=function(t,e){return(t=this.a["style_"+t])instanceof Ws&&(t=t.$(e)),t},Xs.prototype.getStyleById=Xs.prototype.hh,t("H.data.kml.Point",Ys),t("H.data.kml.Feature",Zs),t("H.data.kml.Line",$s),bt.prototype.f=0,bt.prototype.b=0,u(ct,bt),t("H.data.kml.Polygon",ct),dt.prototype.create=function(t){return this.a=new Zs(t,this.i),et(this,t)},dt.prototype.j=function(t,e,n){var r=n.anchor,i=n.scale;n=i+"_"+r.x+r.y+r.Qc+r.tc+"_"+n.href;var o={};if(1===t.getState()){var a=this.b[n];if(!a){var s=r.x,l=r.y;(a=t.sb())&&(a={w:a.w*i,h:a.h*i},o.size=a),s=r.Qc&&a?a.w*s:s*i,l=r.tc&&a?a.h*(1-l):!r.tc&&a?a.h-l*i:l*i,o.anchor={x:s,y:l},a=new Uj(t.Lc(),o),this.b[n]=a}e.Cc(a)}delete this.c[n]};var ht=/^[^:\/]+:/;function it(t){vc(this,it),this.url=t,this.b=[],this.a=y,this.c=A(this.c,this),F.call(this)}u(it,F),t("H.data.AbstractReader",it);var jt={ERROR:-1,LOADING:0,VISIT:1,READY:2};function kt(t,e,n,r){kt.l.constructor.call(this,e,t),this.state=n,this.message=r}function lt(t){var e=t?t.lastIndexOf("/"):-1;this.g=[],it.call(this,t),0<=e&&(this.i=t.substr(0,e)+"/")}function nt(t,e,n){n?n.ba(e):(t.a&&t.a.Xb().ba(e),t.b.push(e),t.O(jt.VISIT,e))}function mt(t,e){for(var n,r=t.length,i=[];r--;)(n=t[r]).nodeName===e&&i.push(n);return i}function ot(t,e){this.b=t,this.a=e}function pt(t){return new lg(t[1],t[0])}function rt(t){for(var e,n=qt(t[0]),r=[],i=1,o=t.length;i<o;i++)e=qt(t[i]),r.push(e);return new O(n,r)}function qt(t){for(var e=0,n=t.length,r=new L;e<n;e++)r.nd(pt(t[e]));return r}function st(t,e){e=e||{},this.i=e.style||this.Bd,(this.g=!!e.disableLegacyMode)||window.console.warn("H.data.geojson.Reader: Legacy parser is enabled in GeoJSON Reader. Features like Multi-Geometries, Polygon interiors and GeoJSON feature properties might not work as expected. To maximise compatibility with the remote services it is recommended to set the `disableLegacyMode` flag to true."),it.call(this,t)}function ut(t){var e={};if(t.geometry){var n=t.geometry;e.type=n.type,e.properties=t.properties,n.coordinates&&(e.coordinates=n.coordinates),n.geometries&&(e.geometries=n.geometries),t.id&&(e.id=t.id)}return e}function tt(t,e){t.a&&t.a.Xb().ba(e),t.b.push(e),t.O(jt.VISIT,e)}function vt(t,e){this.a=t,this.b=e}function wt(t,e,n){this.g=this.b=n,this.Vh=[],this.a=0,this.f=sg(t,e,!0)}function xt(t){var e;nd.call(this),this.a=[],t?Ya(e={},yt,t):e=yt,this.g=e,nd.call(this)}it.State=jt,it.prototype.f=jt.READY,it.prototype.A={nl:"statechange"},it.prototype.jb=function(){this.a||(this.a=new N,this.a.Xb().Sb(this.b));return new rl(this.a)},it.prototype.getLayer=it.prototype.jb,it.prototype.Bm=function(){return this.b.concat([])},it.prototype.getParsedObjects=it.prototype.Bm,it.prototype.C=function(){return this.url},it.prototype.getUrl=it.prototype.C,it.prototype.lo=function(t){if(this.f===jt.LOADING||this.f===jt.VISIT)throw Error("InvalidState: state "+this.f);return this.b=[],this.a=y,this.url=t,this},it.prototype.setUrl=it.prototype.lo,it.prototype.getState=function(){return this.f},it.prototype.getState=it.prototype.getState,it.prototype.O=function(t,e,n){this.f=t,this.dispatchEvent(new kt(e||this,this.A.nl,t,n||""))},it.prototype.parse=function(){var t=this;uc(this.url)?(this.O(jt.LOADING),new tf("text/plain",this.url).then((function(e){try{t.c(e)}catch(n){t.O(jt.ERROR,y,n.message)}}),(function(){t.O(jt.ERROR,y,"Error loading file")}))):t.O(jt.ERROR,y,"File url was not set")},it.prototype.parse=it.prototype.parse,u(kt,sd),it.Event=kt,u(lt,it),t("H.data.kml.Reader",lt),lt.prototype.c=function(t){var e,n=null;if(Ac(t)&&""!=t.trim()){try{var r=(new DOMParser).parseFromString(t,"text/xml")}catch(s){return void this.O(jt.ERROR,y,"Error parsing KML document")}if(r.getElementsByTagName("parsererror").length)this.O(jt.ERROR,y,"Error parsing KML document");else if((t=r.childNodes&&"kml"===r.childNodes[0].nodeName?r.childNodes[0]:void 0)&&(e=mt(t.childNodes,"Document")[0]),e=e||t){r=new Xs;for(var i=mt(e.childNodes,"Style"),o=mt(e.childNodes,"StyleMap"),a=i.length;a--;)t=new Us(i[a]),r.Dg(t);for(a=o.length;a--;)t=new Ws(o[a],r),r.Dg(t);for(this.j=new dt(r,this.i),e=(t=e.childNodes).length;e--;)r=n,"Placemark"===(i=t[e]).nodeName?(i=this.j.create(i))&&nt(this,i,r):"Folder"===i.nodeName&&(nt(this,(i={group:new R,node:i}).group,r),this.g.push(i)),!e&&(r=this.g.shift())&&(t=r.node.childNodes,n=r.group,e=t.length);this.O(jt.READY)}else this.O(jt.ERROR,y,"Invalid KML document")}else this.O(jt.ERROR,y,"Unable to create objects from the empty data")},ot.prototype.create=function(t,e){var n=t.coordinates;switch(t.type){case"Point":var r=new Ln(pt(n));break;case"LineString":r=new th(qt(n));break;case"Polygon":r=new uh(rt(n));break;case"MultiPoint":var i=0,o=n.length;if(r=[],this.a){for(;i<o;i++)r.push(pt(n[i]));n=new Ln(new Ti(r))}else{for(;i<o;i++)r.push(new Ln(pt(n[i])));(n=new R).Sb(r)}r=n,o="multiPoint";break;case"MultiLineString":if(i=0,o=n.length,r=[],this.a){for(;i<o;i++)r.push(qt(n[i]));n=new th(new ih(r))}else{for(;i<o;i++)r.push(new th(qt(n[i])));(n=new R).Sb(r)}r=n,o="multiLineString";break;case"MultiPolygon":if(r=[],i=0,o=n.length,this.a){for(;i<o;i++)r.push(rt(n[i]));n=new uh(new Gi(r))}else{for(;i<o;i++)r.push(new uh(rt(n[i])));(n=new R).Sb(r)}r=n,o="multiPolygon";break;case"GeometryCollection":n=r=new R,o=0;for(var a=(i=t.geometries).length;o<a;o++)this.create(i[o],n);o="geometryCollection"}return r&&(n=r,i=t.properties,t=t.id,a={},i&&(this.a?a=i:a.properties=i),o&&!this.a&&(a[o]=!0),t&&n.ti(t),n.setData(a),this.b(r)),e&&r&&e.ba(r),r},ot.prototype.create=ot.prototype.create,u(st,it),t("H.data.geojson.Reader",st),st.prototype.c=function(t){var e,n;try{var r="string"===typeof t?JSON.parse(t):t;if("object"===typeof r){var i=new ot(this.i,this.g);switch(r.type){case"FeatureCollection":if(e=r.features){var o=new R;for(tt(this,o),n=0;n<e.length;n++){var a=ut(e[n]);(a=i.create(a))&&o.ba(a)}}break;case"Feature":a=ut(r),(a=i.create(a))&&tt(this,a);break;default:(a=i.create(r))&&tt(this,a)}this.O(jt.READY)}else this.O(jt.ERROR,y,"Invalid syntax")}catch(s){this.O(jt.ERROR,y,"Parse error. "+s.message)}},st.prototype.Vn=function(t){this.O(jt.LOADING),this.c(t)},st.prototype.parseData=st.prototype.Vn,st.prototype.Bd=function(){},t("H.data.buildInfo",(function(){return Hf("H-data","1.38.0","8be3148",{region:"row"})})),wg.prototype.Fc=ca(1,(function(t,e){this.a.Fc(t,Dc(e)?e:this.c)})),Ag.prototype.Fc=ca(0,(function(t,e){var n,r=0;if(!t(this)&&e--)for(;3>=r;r++)(n=this[r])&&n.Fc(t,e)})),t("H.clustering.grid.NoisePoint",vt),vt.prototype.wa=function(){return ng(this.a)},vt.prototype.getPosition=vt.prototype.wa,vt.prototype.rc=function(){return this.a.wt},vt.prototype.getWeight=vt.prototype.rc,vt.prototype.kd=gf,vt.prototype.isCluster=vt.prototype.kd,vt.prototype.nc=function(){return this.b},vt.prototype.getMinZoom=vt.prototype.nc,vt.prototype.getData=function(){return this.a.data},vt.prototype.getData=vt.prototype.getData,t("H.clustering.grid.Cluster",wt),wt.prototype.je=function(t){this.c||(this.c=ng(t)),this.a+=t.wt||1,this.Vh.push(t)},wt.prototype.wa=function(){return this.c},wt.prototype.getPosition=wt.prototype.wa,wt.prototype.rc=function(){return this.a},wt.prototype.getWeight=wt.prototype.rc,wt.prototype.kd=ff,wt.prototype.isCluster=wt.prototype.kd,wt.prototype.nc=function(){return this.b},wt.prototype.getMinZoom=wt.prototype.nc,wt.prototype.Df=function(){return this.g},wt.prototype.getMaxZoom=wt.prototype.Df,wt.prototype.J=function(){return this.f},wt.prototype.getBoundingBox=wt.prototype.J,wt.prototype.Sg=function(t){this.ve(t)},wt.prototype.forEachEntry=wt.prototype.Sg,wt.prototype.ve=function(t){var e=this;if(!Da(t))throw new D(this.ve,0,t);this.Vh.forEach((function(n){t(new vt(n,e.b+1))}))},wt.prototype.forEachDataPoint=wt.prototype.ve,u(xt,nd);var zt={clusters:[],noisePoints:[]},yt={projection:kj,min:0,max:22,eps:32,minWeight:2};function At(t){xt.call(this,t)}function Bt(t){this.a=t;var e=(t=document.createElement("canvas")).getContext("2d"),n=this.a,r=14*n;t.width=r,t.height=r,e.scale(n,n),e.beginPath(),e.strokeStyle="#FFFFFF",e.fillStyle="#1080DD",e.arc(7,7,6,0,2*Math.PI,!1),e.fill(),e.lineWidth=1,e.stroke(),this.f=new Uj(t,{size:{w:14,h:14},anchor:{x:7,y:7}}),this.b={},this.c={}}function Ct(t,e,n){var r,i=document.createElement("canvas"),o=i.getContext("2d"),a=t.a,s=e*a;return i.width=s,i.height=s,o.scale(a,a),a=e+":"+n,(r=t.b[a])?o.putImageData(r,0,0):(e/=2,o.beginPath(),o.strokeStyle="rgba("+n+",0.2)",o.fillStyle="rgba("+n+",1)",o.arc(e,e,e/5*3,0,2*Math.PI,!1),o.fill(),o.lineWidth=e/5*4,o.stroke(),t.b[a]=o.getImageData(0,0,s,s)),i}function Dt(t){if(xt.call(this,t),(t=this.g).projection!==kj)throw new D(Dt,0,"Other projection than mercator not supported yet");this.m=t.projection,this.f=t.eps,this.B=t.minWeight,this.s=new lj(this.m),(new Pf).a("cluster","H.clustering.dynamicgrid.worker"),this.i=A(this.i,this),this.j=A(this.j,this)}p=xt.prototype,p.Bc=function(t){this.a=t,this.b=!0},p.yb=function(t){this.a.push(t),this.b=!0},p.hf=function(t){this.a=this.a.concat(t),this.b=!0},p.Se=function(t){this.a=this.a.filter((function(e){return e!==t})),this.b=!0},p.o=function(){xt.l.o.call(this),delete this.a},xt.prototype.disposeInternal=xt.prototype.o,xt.prototype.R=jd,u(At,xt),At.prototype.xi=function(t){var e,n=this.g,r=n.min,i=n.max,o=[],a=[];if(this.b){for(e=this.a;r<=i;r++){for(var s,l,u,c,h,p,f,d,y=void 0,g=r,v=e,m=o,b=a,_=n.eps,w=n.projection,x=n.minWeight,k=v.length,E=Math.pow(2,g+8),T=[];d=v[--k];)if(!d.Di){for(f=E,p=(u=w.Kc(d).scale(E).floor()).x,h=u.y,l=T.length;l--;)c=(s=T[l]).wa(),s.Ci||(s.Ci=w.Kc(c).scale(E).floor()),(c=(c=s.Ci).Ta(u))<f&&(f=c,y=s);y&&y.J().bd(d)||(y=new wt(w.Wf({x:(p-_)/E,y:(h-_)/E}),w.Wf({x:(p+_)/E,y:(h+_)/E}),g),T.push(y)),y.je(d),y=null}for(k=T.length;k--;)if((l=(s=T[k]).rc())<x)for(l=(s=s.Vh).length;d=s[--l];)b.push(new vt(d,g)),d.Di=!0;else m.push(s)}for(r=0,i=e.length;r<i;r++)delete e[r].Di;this.b=!1,t({clusters:o,noisePoints:a})}},t("H.clustering.theme.Circular",Bt),Bt.prototype.Tl=function(t){var e=t.rc(),n=this.c[e];if(!n){if(10>e){n=Ct(this,28,"118,209,0");var r={x:11,y:18}}else 25>e?(n=Ct(this,38,"255,105,0"),r={x:13,y:23}):50>e?(n=Ct(this,38,"240,60,0"),r={x:13,y:23}):100>e?(n=Ct(this,38,"181,0,21"),r={x:13,y:23}):1e3>e?(n=Ct(this,48,"181,0,21"),r={x:15,y:28}):(n=Ct(this,66,"181,0,21"),r={x:20,y:38});var i=n.getContext("2d");i.fillStyle="#FFFFFF",i.font="bold 11px Arial",i.fillText(String(e),r.x,r.y),n=new Uj(n,{size:{w:r=n.width/this.a,h:r},anchor:{x:r/2,y:r/2}}),this.c[e]=n}return(e=new Ln(t.wa(),{icon:n,min:t.nc(),max:t.Df()})).setData(t),e},Bt.prototype.getClusterPresentation=Bt.prototype.Tl,Bt.prototype.ym=function(t){var e=new Ln(t.wa(),{icon:this.f,min:t.nc()});return e.setData(t),e},Bt.prototype.getNoisePresentation=Bt.prototype.ym,u(Dt,xt),Dt.prototype.R=function(t,e){this.u=t,this.v=zd(e)},Dt.prototype.xi=function(t,e){var n=this.c,r=this.u,i=this.v||0,o=!n||!(n.zoom===i&&n.b.ga(r));if(r&&(this.b||o)){if(n&&3>n.Wd&&n.cancel(),this.b=!1,(n=this.f)>=128*Ed(2,i))var a=Et;else{(o=this.s).Ka(i);var s=o.fb(r.Ib());a=o.fb(r.Eb()),s.y-=n,a.y+=n,s=o.Ne(s);var l=o.Ne(a);a=new K(s.lat,s.lng,l.lat,l.lng),n=o.La(n,0).lng+180,a=a.vc(s.lat,s.lng-n,l.lat,s.lng).vc(s.lat,l.lng,l.lat,l.lng+n)}for(n=a,a=[],o=(s=this.a).length;o--;)n.bd(s[o])&&a.push(s[o]);0<a.length?(this.c=new Ft(r,i,a,this.f,this.B,this.m!==kj,t,e),this.c.then(this.i,this.j)):t(zt)}},Dt.prototype.i=function(t){Ca(t)||(t=new x.Uint32Array(t)),this.c.g(Gt(this,t))},Dt.prototype.j=function(t){Ac(t)&&this.c.f(t)};var Et=new K(90,-180,-90,180);function Gt(t,e){for(var n=0,r=e[n++],i=Array(r),o=0,a=[],s=e.length,l=t.c.a,u=t.c.zoom;r--;)i[o++]=new vt(l[e[n++]],u);for(;n<s;){r=e[n++],o=l[e[n]];var c=t.s,h=t.f;c.Ka(t.c.zoom);var p=c.fb(o);for(o=c.La(p.x-h,p.y-h),c=c.La(p.x+h,p.y+h),o=new wt((o=new K(o.lat,o.lng,c.lat,c.lng)).Ib(),o.Eb(),u);r--;)o.je(l[e[n++]]);a.push(o)}return{clusters:a,noisePoints:i}}function Ft(t,e,n,r,i,o,a,s){this.b=t,this.zoom=e,this.a=n,this.g=a,this.f=s,a=3*(t=n.length),s=new(x.Float64Array||Array)(a);for(var l;t--;)l=n[t],s[--a]=l.lat,s[--a]=l.lng,s[--a]=l.wt;ge.call(this,"cluster",{message:[s,r,i,e,o]},void 0)}function Ht(t,e,n){this.b=t,this.a=e,this.f=n}function It(t,e,n,r){this.b=t,this.a=e,this.j=n,this.R=r,this.f=Ja(this.f,this),this.c=Ja(this.c,this)}function Jt(t,e,n,r,i,o){this.g=e,t&&(this.parent=t,1&e?(n=t[8],i=t[5]):(n=t[7],i=t[8]),2&e?(r=t[9],o=t[6]):(r=t[4],o=t[9])),this[7]=n,this[5]=i,this[8]=(n+i)/2,this[4]=r,this[6]=o,this[9]=(r+o)/2}function Kt(t,e){return t[e]||(++t.Vd,t[e]=new Jt(t,e))}function Lt(t,e,n,r){var i,o;if(!e(t,r)&&n--)for(++r,i=0;4>i;i++)(o=t[i])&&Lt(o,e,n,r)}function Mt(t){this.b=t||10,Nt(this)}function Nt(t){t.head=t.a=new Jt(null,NaN,0,0,4294967296,4294967296)}function Ot(t,e){var n,r;for(n=0;4>n;n++)(r=e[n])&&(Ot(t,r),delete e[n]);delete e.parent,delete e.entries}function Pt(t,e){var n,r=t.head;if(e){var i=e;if(i!==r)for(r=i;i=i.parent;)(i.entries||1<i.Vd)&&(r=i)}else for(;!r.entries&&2>(n=r.Vd)&&n;)r=i;t.head=r}function Qt(t,e,n,r,i,o,a){var s=e.entries;return o?e.Vd?s=Qt(t,Kt(e,+(n>=e[8])|+(r>=e[9])<<1),n,r,i,o-1,a):s?((s=Kt(e,+((s=s[0])[1]>=e[8])|+(s[0]>=e[9])<<1)).entries=e.entries,s.me=e.me,s.ne=e.ne,s.Ab=e.Ab,s.a=e.a,s.f=e.f,s.b=e.b,s.c=e.c,delete e.entries,Pt(t,s),s=Qt(t,Kt(e,+(n>=e[8])|+(r>=e[9])<<1),n,r,i,o-1,a)):(o=s=new Rt(n,r,i,a),(e.entries||(e.entries=[])).push(o),Pt(t,e)):(s||Pt(t,e),t=s=new Rt(n,r,i,a),(e.entries||(e.entries=[])).push(t)),e.me+=n*i,e.ne+=r*i,e.Ab+=i,e.a===B?(e.a=e.b=n,e.f=e.c=r):(n<e.a?e.a=n:n>e.b&&(e.b=n),r<e.f?e.f=r:r>e.c&&(e.c=r)),s}function Rt(t,e,n,r){this[0]=e,this[1]=t,this.a=n,this.data=r}function St(t){xt.call(this,t),t=this.g,this.j=t.projection,this.s=t.min,this.f=t.max,this.m=t.minWeight,this.c=7-yd(Cd(xd(1,t.eps))/Md),this.i=new Mt(xd(this.s,this.f+this.c))}function Tt(t,e,n,r,i,o,a){var s,l=e.Ab;if(a&&(a.node.Ab!==l?(o.clusters.push(new It(t,a.node,a.depth,n-1)),a=null):i++),a||(l>=t.m?(a={node:e,depth:n},i=n):Ut(t,e,i+1,o)),e.Vd&&r--)for(n++,l=0;4>l;l++)(s=e[l])&&(Tt(t,s,n,r,i,o,a),a=null);a&&o.clusters.push(new It(t,a.node,a.depth,t.f+t.c))}function Ut(t,e,n,r){var i;if(e=e.entries){var o=e.length;for(r=r.noisePoints,i=0;i<o;i++)r.push(new Ht(t,e[i],n))}else for(i=0;4>i;i++)(o=t[i])&&Ut(t,o,n,r)}function Vt(t,e){var n={},r=(e=e||{}).min||0;switch(r={min:r,max:xd(r,e.max||22)},Vt.l.constructor.call(this,r),this.ya=e.pixelRatio||Te(),Ya(n,yt,r,e.clusteringOptions||{}),n.minWeight=xd(yt.minWeight,n.minWeight),n.strategy){case Wt.DYNAMICGRID:if(n.projection!==kj)throw new D(Vt,1,"Unsupported projection");this.c=new Dt(n);break;case Wt.GRID:this.c=new At(n);break;default:this.c=new St(n)}this.c.Bc(t),this.v=e.theme||new Bt(this.ya),this.N=A(this.N,this),this.oa=A(this.oa,this),Xt(this)}Dt.prototype.o=function(){Dt.l.o.call(this)},Dt.prototype.disposeInternal=Dt.prototype.o,u(Ft,Sf),t("H.clustering.fastgrid.NoisePoint",Ht),Ht.prototype.wa=function(){return this.c||(this.c=this.b.La(this.a[1],this.a[0],1)),this.c},Ht.prototype.getPosition=Ht.prototype.wa,Ht.prototype.rc=function(){return this.a.a},Ht.prototype.getWeight=Ht.prototype.rc,Ht.prototype.kd=gf,Ht.prototype.isCluster=Ht.prototype.kd,Ht.prototype.nc=function(){return this.f-this.b.c},Ht.prototype.getMinZoom=Ht.prototype.nc,Ht.prototype.getData=function(){return this.a.data},Ht.prototype.getData=Ht.prototype.getData,t("H.clustering.fastgrid.Cluster",It),It.prototype.wa=function(){return this.m||(this.m=this.b.La(this.a.me,this.a.ne,this.a.Ab)),this.m},It.prototype.getPosition=It.prototype.wa,It.prototype.rc=function(){return this.a.Ab},It.prototype.getWeight=It.prototype.rc,It.prototype.kd=ff,It.prototype.isCluster=It.prototype.kd,It.prototype.nc=function(){return this.j?this.j-this.b.c:-1/0},It.prototype.getMinZoom=It.prototype.nc,It.prototype.Df=function(){return this.R-this.b.c},It.prototype.getMaxZoom=It.prototype.Df,It.prototype.J=function(){return this.i||(this.i=sg(this.b.La(this.a.a,this.a.f,1),this.b.La(this.a.b,this.a.c,1),!0)),this.i},It.prototype.getBoundingBox=It.prototype.J,It.prototype.Sg=function(t){this.g=t,this.a.Fc(this.f,Ud)},It.prototype.forEachEntry=It.prototype.Sg,It.prototype.f=function(t,e){var n,r,i=!1;if(t.Ab>=this.b.m&&t!==this.a&&t.Ab!==this.a.Ab&&(this.g(new It(this.b,t,0,e)),i=!0),!i&&(n=t.entries))for(t=n.length,r=0;r<t;r++)this.g(new Ht(this.b,n[r],e));return i},It.prototype.ve=function(t){this.s=t,this.a.Fc(this.c,Ud)},It.prototype.forEachDataPoint=It.prototype.ve,It.prototype.c=function(t,e){var n;if(t=t.entries){var r=t.length;for(n=0;n<r;n++)this.s(new Ht(this.b,t[n],e))}return!1},p=Jt.prototype,p.Vd=0,p.removeChild=function(t){var e=t.g;this[e]===t&&(delete this[e],delete t.parent,--this.Vd)},p.Fc=function(t,e){for(var n=0,r=this;r=r.parent;)++n;Lt(this,t,e,n)},p.me=0,p.ne=0,p.Ab=0,Mt.prototype.sc=function(t,e,n,r){var i=this.a;if(!(t>=i[7]&&e>=i[4]&&t<=i[5]&&e<=i[6]))throw Error("Coordinates out of bounds");return Qt(this,this.a,t,e,n,this.b,r)},Mt.prototype.Fc=function(t,e){Lt(this.a,t,e===+e?e:this.b,0)},u(St,xt),p=St.prototype,p.Bc=function(t){var e,n=0,r=t.length,i=new G(0,0),o=this.j,a=this.i;for(St.l.Bc.call(this,t),Ot(a,a.a),Nt(a);n<r;n++)o.Kc(e=t[n],i).scale(4294967296).floor(),a.sc(i.x,i.y,e.wt,e.data);this.b=!0},p.yb=function(t){St.l.yb.call(this,t),this.Bc(this.a)},p.hf=function(t){for(var e=t.length,n=St.l.yb;e--;)n.call(this,t[e]);this.Bc(this.a)},p.Se=function(t){St.l.Se.call(this,t),this.Bc(this.a)},p.La=function(t,e,n,r){return this.j.La(t/n/4294967296,e/n/4294967296,r)},p.xi=function(t){if(this.b){var e={clusters:[],noisePoints:[]};Tt(this,this.i.a,0,this.f+this.c,-1/0,e,null),this.b=!1,t(e)}},p.o=function(){St.l.o.call(this),this.i=null},St.prototype.disposeInternal=St.prototype.o,t("H.clustering.DataPoint",(function(t,e,n,r){this.lat=t,this.lng=e,this.wt=n===+n?n:1,this.data=r})),u(Vt,N),t("H.clustering.Provider",Vt),Vt.prototype.o=function(){Vt.l.o.call(this),this.f.ma(),this.c.D(),delete this.c,delete this.K,delete this.v,x.clearTimeout(this.Y)};var Wt={FASTGRID:0,GRID:1,DYNAMICGRID:2};function Xt(t,e,n){t.Y&&x.clearTimeout(t.Y),e&&t.c.R(e,n),t.Y=x.setTimeout(t.N,150)}function Yt(t){var e=t.K.clusters,n=t.K.noisePoints,r=e.length,i=n.length,o=0<r+i;for(t.f.ma();i--;){var a=n[i];t.f.ba(t.v.getNoisePresentation(a))}for(;r--;)n=e[r],t.f.ba(t.v.getClusterPresentation(n));o&&t.Sa()}function Zt(t,e){t:{for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}Vt.Strategy=Wt,Vt.prototype.N=function(){this.dispatchEvent("start"),this.c.xi(this.oa,jd)},Vt.prototype.oa=function(t){this.dispatchEvent("end"),this.K=t,Yt(this)},Vt.prototype.Bc=function(t){this.c.Bc(t),Xt(this)},Vt.prototype.setDataPoints=Vt.prototype.Bc,Vt.prototype.yb=function(t){this.c.yb(t),Xt(this)},Vt.prototype.addDataPoint=Vt.prototype.yb,Vt.prototype.hf=function(t){this.c.hf(t),Xt(this)},Vt.prototype.addDataPoints=Vt.prototype.hf,Vt.prototype.Se=function(t){this.c.Se(t),Xt(this)},Vt.prototype.removeDataPoint=Vt.prototype.Se,Vt.prototype.Sm=function(){return this.v},Vt.prototype.getTheme=Vt.prototype.Sm,Vt.prototype.jo=function(t){this.v=t,this.K&&(this.f.ma(),Yt(this))},Vt.prototype.setTheme=Vt.prototype.jo,Vt.prototype.Lb=function(){return!0},Vt.prototype.providesDomMarkers=Vt.prototype.Lb,Vt.prototype.Mb=function(){return!0},Vt.prototype.providesMarkers=Vt.prototype.Mb,Vt.prototype.wc=function(){return!0},Vt.prototype.providesSpatials=Vt.prototype.wc,Vt.prototype.Qe=function(t,e){Xt(this,t,e)},Vt.prototype.preprocessData=Vt.prototype.Qe,t("H.clustering.buildInfo",(function(){return Hf("H-clustering","1.38.0","8be3148",{region:"row"})}));var $t={};function au(t){var e=t.ownerDocument,n=e.documentElement;e=e.defaultView;var r=t.getBoundingClientRect();return t=r.left,r=r.top,isNaN(e.pageXOffset)?(t+=n.scrollLeft,r+=n.scrollTop):(t+=e.pageXOffset,r+=e.pageYOffset),new G(t,r)}function bu(t,e,n){e=Dc(e)?e+"px":e,n=Dc(n)?n+"px":n,t.style[Af("transform")]="translate("+e+","+n+")"}var cu,du=navigator.userAgent,eu=-1<du.indexOf("Android")&&-1<du.indexOf("Mozilla/5.0")&&-1<du.indexOf("AppleWebKit"),fu=/AppleWebKit\/([\d.]+)/,gu=null===fu.exec(du)?null:parseFloat(fu.exec(du)[1]);cu=eu&&null!==gu&&537>gu;var hu=globalThis,iu=document.createElement("T");function ju(){this.a=this.ej()}ju.prototype.ej=function(){var t=navigator,e=[];return t&&(t.msPointerEnabled?e.push(ku):t.pointerEnabled&&e.push(lu)),1>e.length&&("TouchEvent"in hu&&e.push(mu),e.push(nu)),e},ju.prototype.detectEventSets=ju.prototype.ej,ju.prototype.addEventListener=function(t,e,n,r){for(var i,o=this.a,a=o.length,s=!1;a--;)(i=o[a][e])&&(s=!0,t.addEventListener(i,n,r||!1));s||t.addEventListener(e,n,r||!1)},ju.prototype.removeEventListener=function(t,e,n,r){for(var i,o=this.a,a=o.length,s=!1;a--;)(i=o[a][e])&&(s=!0,t.removeEventListener(i,n,r||!1));s||t.removeEventListener(e,n,r||!1)};var lu={start:"pointerdown",end:"pointerup",move:"pointermove",cancel:"pointercancel",over:"pointerover",out:"pointerout",hover:"pointerhover"},ku={start:"MSPointerDown",end:"MSPointerUp",move:"MSPointerMove",cancel:"MSPointerCancel",over:"MSPointerOver",out:"MSPointerOut",hover:"MSPointerHover"},mu={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},nu={start:"mousedown",end:"mouseup",move:"mousemove",over:"mouseover",out:"mouseout",hover:"mousehover"};function ou(t,e,n,r){return t=t.createElement(e),n&&(t.className=n),r&&(t.innerHTML=r),t}function pu(t,e){for(var n=1,r=arguments.length;n<r;n++)t.appendChild(arguments[n])}var qu=new ju;function ru(t,e,n){qu.addEventListener(t,e,n,void 0)}function su(t,e,n){qu.removeEventListener(t,e,n,void 0)}function Y(t,e){F.call(this),this.ya=t||"div",this.c=e?e.split(" "):[],this.S=!1,this.c.push("H_el")}function tu(t){(t=t.L())&&t.parentNode&&t.parentNode.removeChild(t)}function uu(t){t=t||{},Y.call(this,"div","H_btn"),this.Dc(t.label||" "),this.ec(t.tooltip||""),this.setData(t.data),this.ta(!!t.disabled),this.O(vu.UP,!0),t.onStateChange&&this.addEventListener("statechange",t.onStateChange),this.b=A(this.b,this),this.a=A(this.a,this)}u(Y,F),t("H.ui.base.Element",Y),Y.prototype.T=function(t){if(!t)throw Error("Wrong document object");return this.P=ou(t,this.ya,this.c.join(" ")),this.renderInternal(this.P,t),this.ta(this.Zb(),!0),this.ec(this.ra),this.mb(this.ea),this.P},Y.prototype.Y=function(){},Y.prototype.K=function(){},Y.prototype.U=function(){},Y.prototype.renderInternal=Y.prototype.U,Y.prototype.Zb=function(){return this.S},Y.prototype.isDisabled=Y.prototype.Zb,Y.prototype.ta=function(t,e){return((t=!!t)!==this.S||e)&&((this.S=t)?this.Ga("H_disabled"):this.hb("H_disabled")),this},Y.prototype.setDisabled=Y.prototype.ta,Y.prototype.v=null,Y.prototype.getData=function(){return this.v},Y.prototype.getData=Y.prototype.getData,Y.prototype.setData=function(t){this.v=t},Y.prototype.setData=Y.prototype.setData,Y.prototype.ec=function(t){var e=this.L();this.ra=t,e&&(t?e.setAttribute("title",t):e.removeAttribute("title"))},Y.prototype.setTooltip=Y.prototype.ec,Y.prototype.P=null,Y.prototype.L=function(){return this.P},Y.prototype.getElement=Y.prototype.L,Y.prototype.ea=!0,Y.prototype.mb=function(t){var e=this.L();this.ea=t,e&&(e.style.display=t?"":"none")},Y.prototype.setVisibility=Y.prototype.mb,Y.prototype.qc=function(){return this.ea},Y.prototype.getVisibility=Y.prototype.qc,Y.prototype.Ga=function(t){var e=this.L();return 0>this.c.indexOf(t)&&this.c.push(t),e&&(e.className=this.c.join(" ")),this},Y.prototype.addClass=Y.prototype.Ga,Y.prototype.hb=function(t){t=this.c.indexOf(t);var e=this.L();return-1<t&&this.c.splice(t,1),e&&(e.className=this.c.join(" ")),this},Y.prototype.removeClass=Y.prototype.hb,Y.prototype.o=function(){Y.l.o.call(this),tu(this),this.v=this.P=null,delete this.ra},u(uu,Y),t("H.ui.base.Button",uu),uu.prototype.ta=function(t,e){return t&&this.hb("H_active"),uu.l.ta.call(this,t,e)},uu.prototype.setDisabled=uu.prototype.ta,uu.prototype.U=function(t){ru(t,"start",this.b),ru(t,"end",this.a),ru(t,"out",this.a),this.Dc(this.Ce(),!0)},uu.prototype.renderInternal=uu.prototype.U,uu.prototype.getState=function(){return this.g},uu.prototype.getState=uu.prototype.getState,uu.prototype.O=function(t,e){return t!==this.g&&(this.g=t,t===vu.DOWN?this.Ga("H_active"):this.hb("H_active"),e||this.dispatchEvent("statechange")),this},uu.prototype.setState=uu.prototype.O,uu.prototype.Ce=function(){return this.f},uu.prototype.getLabel=uu.prototype.Ce,uu.prototype.Dc=function(t,e){return(e||t!==this.f)&&(this.f=t,(e=this.L())&&(e.innerHTML=t)),this},uu.prototype.setLabel=uu.prototype.Dc,uu.prototype.b=function(t){this.Zb()||this.O(vu.DOWN),t.preventDefault()},uu.prototype.a=function(t){this.Zb()||this.O(vu.UP),t.preventDefault()},uu.prototype.o=function(){var t=this.L();t&&(su(t,"start",this.b),su(t,"end",this.a),su(t,"out",this.a)),Y.prototype.o.call(this)};var vu={UP:"up",DOWN:"down"};uu.State=vu;var wu={in:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g><path d="m5 10.6h5.6v-5.6h2.8v5.6h5.6v2.8h-5.6v5.6h-2.8v-5.6h-5.6v-2.8z"></path></g></svg>',out:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path d="m5 10.6h14v2.8h-14z"/></svg>'};function xu(t){var e;t=t||{},this.b=!!t.vertical,this.oa=t.length||"16em",this.a=Dc(e=t.min)?e:0,this.i=xd(this.a,Dc(e=t.max)?e:100),this.V=E(e=t.step)?1:e,this.j=yu(this,Dc(e=t.value)?e:(this.a+this.i)/2),this.Tf=A(this.Tf,this),this.Pf=A(this.Pf,this),this.Vf=A(this.Vf,this),this.Uf=A(this.Uf,this),this.m=t.pointerArea,Y.call(this,"div","H_slider"+(this.b?"":" H_l_horizontal"))}function zu(t){if(!t.s){ru(t.L(),"start",t.Tf);var e=t.m;ru(e,"move",t.Pf),ru(e,"end",t.Vf),ru(e,"out",t.Uf),t.s=!0}}function Au(t){if(t.s){su(t.L(),"start",t.Tf);var e=t.m;su(e,"move",t.Pf),su(e,"end",t.Vf),su(e,"out",t.Uf),t.s=!1}}function yu(t,e){var n=t.V;return e=Zd(e,t.a,t.i),n?t.a+yd((e-t.a)/n)*n:e}function Bu(t,e){var n=t.B,r=t.b;t.u||(t.u=n["offset"+(r?"Height":"Width")]),0>(e-=au(n)[r?"y":"x"])&&(e=0),e=(t.i-t.a)*e/t.u,e=yu(t,r?t.i-e:t.a+e),t.j!==e&&(t.pg(e,!0),t.dispatchEvent(new aj(t.A.$c,e,t.j)))}function Cu(t,e){return(e.touches?e.targetTouches[0]:e)["page"+(t.b?"Y":"X")]}function Du(t){var e=!1,n=t.type;return-1!==n.indexOf("pointer")||-1!==n.indexOf("touch")?e=!0:C(t,MouseEvent)&&(e=1===t.which||1===t.buttons),e}function Eu(t){var e=t.touches;return e&&1===e.length||C(t,MouseEvent)}u(xu,Y),t("H.ui.base.Slider",xu),xu.prototype.pg=function(t,e){var n=this.b,r=n?"top":"left";return this.f&&!e||(t=Zd(t,this.a,this.i),this.g&&(n=(n?-1:1)*(e=100*(t-this.a)/(this.i-this.a)),this.g.style[r]=n+"%",this.ua.style[r]=100+n+"%"),this.j=yu(this,t)),this.j},xu.prototype.setValue=xu.prototype.pg,xu.prototype.Ym=function(){return this.j},xu.prototype.getValue=xu.prototype.Ym,p=xu.prototype,p.Tf=function(t){var e=this.b;if(Du(t)&&Eu(t)){var n=Cu(this,t),r=t.target;r===this.g||r.parentElement===this.g?(this.N=n-au(this.g)[e?"y":"x"]-this.g.offsetWidth/2,this.L().className="H_slider H_slider_active"+(this.b?"":" H_l_horizontal"),this.f=!0):Bu(this,n),t.preventDefault()}},p.Vf=function(){this.f&&(this.L().className="H_slider "+(this.b?"":" H_l_horizontal"),this.f=!1)},p.Uf=function(t){this.f&&t.target===this.m&&(this.f=!1)},p.Pf=function(t){this.f&&Eu(t)&&(Du(t)?(Bu(this,Cu(this,t)-this.N),t.preventDefault()):this.f=!1)},p.A={$c:"change"},p.U=function(t,e){var n=ou(e,"div","H_slider_cont"),r=ou(e,"div","H_slider_knob_cont"),i=ou(e,"div","H_slider_knob"),o=ou(e,"div","H_slider_knob_halo"),a=ou(e,"div","H_slider_track");e=ou(e,"div","H_slider_track H_slider_track_active"),t.appendChild(n),n.appendChild(a),a.appendChild(e),n.appendChild(r),r.appendChild(i),r.appendChild(o),this.B=a,this.ua=e,this.g=r,this.m||(this.m=t.ownerDocument.body),n.style[this.b?"height":"width"]=this.oa,this.pg(this.j),zu(this)},xu.prototype.renderInternal=xu.prototype.U,xu.prototype.o=function(){Au(this)},xu.prototype.ta=function(t,e){return t?Au(this):this.B&&zu(this),Y.prototype.ta.call(this,t,e)},xu.prototype.setDisabled=xu.prototype.ta;var Fu={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",LEFT_TOP:"left-top",LEFT_MIDDLE:"left-middle",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_MIDDLE:"right-middle",RIGHT_BOTTOM:"right-bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"};function Gu(t,e,n){Y.call(this,t,e),this.a=n?n.concat():[]}function Hu(){Gu.call(this,"div","H_ctl"),this.map=null,this.Hc="top-left"}function Iu(t){var e=(t=t||{}).slider;Hu.call(this),this.m=A(this.m,this),this.g=A(this.g,this),this.b=A(this.b,this),e&&(this.u=A(this.u,this),this.B=e,this.Ya=t.sliderSnaps,this.Ga("H_zoom_slider")),this.i=new uu({label:wu.in,onStateChange:this.m}),this.s=new uu({label:wu.out,onStateChange:this.m}),this.Ga("H_zoom"),this.Ga("H_grp"),this.V=!1!==t.fractionalZoom,this.setZoomSpeed(t.zoomSpeed||4),this.Pb(t.alignment||"right-middle")}function Ju(t){t.removeChild(t.f),t.f=null,t.j&&(t.j.removeEventListener("minchange",t.b),t.j.removeEventListener("maxchange",t.b),t.j=null)}function Ku(t,e){var n={},r={};n["top-left"]=ou(e,"div",[Lu,Mu].join(" ")),n["top-center"]=ou(e,"div",[Lu,Nu,Ou,Mu].join(" ")),n["top-right"]=ou(e,"div",[Lu,Mu].join(" ")),n["left-top"]=ou(e,"div",[Lu,Pu].join(" ")),n["left-middle"]=ou(e,"div",[Lu,Qu,Ru,Pu].join(" ")),n["left-bottom"]=ou(e,"div",[Lu,Pu].join(" ")),n["right-top"]=ou(e,"div",[Lu,Pu].join(" ")),n["right-middle"]=ou(e,"div",[Lu,Su,Ru,Pu].join(" ")),n["right-bottom"]=ou(e,"div",[Lu,Pu].join(" ")),n["bottom-left"]=ou(e,"div",[Lu,Mu].join(" ")),n["bottom-center"]=ou(e,"div",[Lu,Tu,Ou,Mu].join(" ")),n["bottom-right"]=ou(e,"div",[Lu,Mu].join(" ")),r["top-left"]=ou(e,"div",[Nu,Qu].join(" ")),r["top-right"]=ou(e,"div",[Nu,Su].join(" ")),r["bottom-left"]=ou(e,"div",[Tu,Qu].join(" ")),r["bottom-right"]=ou(e,"div",[Tu,Su].join(" ")),pu(r["top-left"],n["top-left"],n["left-top"]),pu(r["top-right"],n["top-right"],n["right-top"]),pu(r["bottom-left"],n["left-bottom"],n["bottom-left"]),pu(r["bottom-right"],n["right-bottom"],n["bottom-right"]),pu(t,r["top-left"],r["top-right"],r["bottom-left"],r["bottom-right"],n["top-center"],n["left-middle"],n["right-middle"],n["bottom-center"]),this.a=n}t("H.ui.LayoutAlignment",Fu),u(Gu,Y),t("H.ui.base.Container",Gu),Gu.prototype.ta=function(t,e){var n=this.a?this.a.length:0;for(Y.prototype.ta.call(this,t,e);n--;)this.a[n].ta(t,e);return this},Gu.prototype.setDisabled=Gu.prototype.ta,Gu.prototype.Fa=function(t){var e=this.L();return this.a.push(t),e&&(t.T(e.ownerDocument),e.appendChild(t.L())),this},Gu.prototype.addChild=Gu.prototype.Fa,Gu.prototype.Xg=function(){return this.a.concat()},Gu.prototype.getChildren=Gu.prototype.Xg,Gu.prototype.removeChild=function(t){var e=this.a.indexOf(t),n=this.L();0<=e&&(this.a.splice(e,1),n&&n.removeChild(t.L()))},Gu.prototype.removeChild=Gu.prototype.removeChild,Gu.prototype.ma=function(){var t=this.L();t&&this.a.forEach((function(e){t.removeChild(e.L())})),this.a=[]},Gu.prototype.U=function(t,e){for(var n=0,r=this.a.length;n<r;n++)t.appendChild(this.a[n].T(e))},Gu.prototype.renderInternal=Gu.prototype.U,Gu.prototype.o=function(){this.ma(),this.a.forEach(this.oa,this),Y.prototype.o.call(this)},Gu.prototype.oa=function(t){t.D()},u(Hu,Gu),t("H.ui.Control",Hu),Hu.prototype.Ea=function(t){this.map=t},Hu.prototype.T=function(t){return Gu.prototype.T.call(this,t)},Hu.prototype.U=function(t,e){Gu.prototype.renderInternal.call(this,t,e),this.Pb(this.Hc)},Hu.prototype.renderInternal=Hu.prototype.U,Hu.prototype.Me=function(){},Hu.prototype.onUnitSystemChange=Hu.prototype.Me,Hu.prototype.Wb=function(){return this.map},Hu.prototype.getMap=Hu.prototype.Wb,Hu.prototype.va=function(){return this.ua},Hu.prototype.getLocalization=Hu.prototype.va,Hu.prototype.Ml=function(){return this.Hc},Hu.prototype.getAlignment=Hu.prototype.Ml,Hu.prototype.Pb=function(t){return"string"===typeof t&&Fu[t.replace("-","_").toUpperCase()]===t&&(this.Hc=t,this.dispatchEvent("alignmentchange")),this},Hu.prototype.setAlignment=Hu.prototype.Pb,u(Iu,Hu),t("H.ui.ZoomControl",Iu),Iu.prototype.bn=function(){return this.N},Iu.prototype.getZoomSpeed=Iu.prototype.bn,Iu.prototype.mo=function(t){this.N=t},Iu.prototype.setZoomSpeed=Iu.prototype.mo,Iu.prototype.Ea=function(t){this.map!==t&&(this.map&&this.map.removeEventListener("mapviewchange",this.g),Ju(this)),Hu.prototype.Ea.apply(this,arguments),this.map&&(this.b(),t.addEventListener("mapviewchange",this.g),t.addEventListener("baselayerchange",this.b))},Iu.prototype.setMap=Iu.prototype.Ea,Iu.prototype.o=function(){Hu.prototype.o.apply(this,arguments),this.map.removeEventListener("baselayerchange",this.b),Ju(this)},Iu.prototype.U=function(t,e){Hu.prototype.renderInternal.call(this,t,e),this.i.ec(this.va().translate("zoom.in")),this.s.ec(this.va().translate("zoom.out"))},Iu.prototype.renderInternal=Iu.prototype.U,Iu.prototype.Pb=function(t){var e=this.Hc;return Hu.prototype.Pb.call(this,t),e!==t&&this.b(),this},Iu.prototype.setAlignment=Iu.prototype.Pb,Iu.prototype.g=function(){var t=this.map,e=t.kb(),n=t.Ua()-1;t=t.g||t.f.getCapabilities().lookAt.zoom,this.B&&this.f.pg(e),this.Zb()||(this.i.ta(e+n>=t.max),this.s.ta(e<=t.min))},Iu.prototype.ta=function(t,e){return Iu.l.ta.call(this,t,e),this.g(),this},Iu.prototype.setDisabled=Iu.prototype.ta,Iu.prototype.m=function(t){var e,n=(t=t.target)===this.i?1:-1,r=0<n?Math.ceil:Math.floor,i=this.map,o=this;i&&("down"===t.getState()?(i.c.startControl(),i.c.control(0,0,n*this.N,0,0,0)):i.c.endControl(!0,(function(t){e=o.V?t.zoom:r(t.zoom),t.zoom=e})))},Iu.prototype.u=function(t){this.map&&this.map.$e(t.newValue)},Iu.prototype.b=function(){var t=this.Hc,e=this.Wb();if(/^top/g.test(t)||/^bottom/g.test(t)){var n=this.s;t=this.i;var r=!1}else n=this.i,t=this.s,r=!0;if(this.removeChild(n),this.removeChild(t),this.Fa(n),this.B&&e){Ju(this),e=r;var i=(r=(n=this.map)&&n.g)||n.f.getCapabilities().lookAt.zoom;(this.j=r)&&(r.addEventListener("minchange",this.b),r.addEventListener("maxchange",this.b)),this.f=new xu({step:this.Ya?1:0,vertical:e,min:i.min,max:i.max,value:n.kb(),pointerArea:n.L()}),this.f.addEventListener(this.f.A.$c,this.u),this.Fa(this.f)}this.Fa(t)};var Nu="H_l_top",Tu="H_l_bottom",Qu="H_l_left",Su="H_l_right",Ou="H_l_center",Ru="H_l_middle",Mu="H_l_horizontal",Pu="H_l_vertical",Lu="H_l_anchor";function Uu(t,e){e?(e=t.offsetWidth,t.style.marginLeft=-Math.round(.5*e)+"px"):(e=t.offsetHeight,t.style.marginTop=-Math.round(.5*e)+"px")}Ku.prototype.update=function(){var t=this.a;Uu(t["top-center"],!0),Uu(t["bottom-center"],!0),Uu(t["left-middle"],!1),Uu(t["right-middle"],!1)},Ku.prototype.put=function(t,e){t=t?t.L():null;var n=e?this.a[e]:null;t&&n&&(t.parentElement&&t.parentElement.removeChild(t),n.insertBefore(t,/(bottom|right)$/.test(e)||/(center|middle)/.test(e)&&n.childNodes.length%2?n.firstChild:null)),this.update()};var Vu={IMPERIAL:"imperial",METRIC:"metric"};t("H.ui.UnitSystem",Vu);var Wu={btn:'<svg class="H_icon" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><g transform="translate(3 2)"><path d="m18 13v7h-18v-7h2v5h2v-2h2v2h2v-3h2v3h2v-2h2v2h2v-5z"></path><path d="m2.3.3c.7 0 1.3.1 1.8.4s.9.6 1.1 1 .4.9.4 1.4c0 .5-.1 1-.3 1.4s-.57 1-1 1.6-1.3 1.3-2.3 2.2h3.9l-.2 1.7h-6.16v-1.6c1.1-1.1 2-2 2.5-2.6s.9-1 1-1.4.3-.8.3-1.2c0-.4-.1-.7-.3-.9s-.5-.3-.9-.3c-.3 0-.6 0-.9.2s-.5.4-.8.7l-1.3-1c.4-.5.9-.9 1.4-1.2s1.2-.4 1.8-.4zm14.4 9.7h-2.3l-.2-3.8c 0-.9-.1-1.7-.1-2.4 0-.5 0-1 0-1.5l-1.5 6.7h-2.2l-1.6-6.7c.1.8.1 1.6.1 2.3 0 .5 0 1.1 0 1.7l-.2 3.8h-2.2l.7-9.7h2.9l1.5 6.6 1.4-6.6h2.9z"></path></g></g></svg>',point:'<svg height="22" viewBox="0 0 12 12" width="22" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m6 12c3.3 0 6-2.7 6-6s-2.7-6-6-6-6 2.7-6 6 2.7 6 6 6z" fill="#fff"></path><path d="m6 10c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4z" fill="#2ed5c9" stroke="#272c36" stroke-width="2"></path></g></svg>'};function Xu(t){uu.call(this,t),this.j=function(t){t.preventDefault()},this.i=A((function(t){this.Zb()||this.toggleState(),t.preventDefault()}),this)}function Yu(t,e,n){$i.call(this,t,{icon:Zu,visibility:n}),$u(this,e)}function $u(t,e){t.qn=e,t.P&&(t.P.textContent=e)}u(Xu,uu),t("H.ui.base.PushButton",Xu),Xu.prototype.U=function(t){ru(t,"start",this.i),ru(t,"end",this.j),this.Dc(this.Ce(),!0)},Xu.prototype.renderInternal=Xu.prototype.U,Xu.prototype.uo=function(){var t=vu.DOWN;return this.O(this.getState()===t?vu.UP:t),this},Xu.prototype.toggleState=Xu.prototype.uo,Xu.prototype.o=function(){var t=this.L();t&&su(t,"start",this.i),uu.prototype.o.call(this)},u(Yu,$i);var Zu=new Ri(ou(hu.document,"span","H_dm_label"),{onAttach:function(t,e,n){n.P=t,$u(n,n.qn)},onDetach:function(t,e,n){delete n.P}});function av(t,e){F.call(this),this.b=t,this.f=new Yu(this.so,""),e.push(this.f),this.a=new R({objects:e,data:this}),this.mg=this.mg.bind(this)}function bv(t,e){e&&(t.nextSibling=e,e.previousSibling=t)}function cv(t,e,n,r){var i=new L,o=[];bv(t,this),bv(this,e),i.nd(t.wa()),i.nd(e.wa()),this.c=new th(i,{style:n.Ud}),this.i=new th(i,{style:{strokeColor:"transparent",lineWidth:Math.min(100,this.c.$().lineWidth+2*(r||5))}}),n.c&&(this.g=new th(i,{style:n.c}),o.push(this.g)),o.push(this.c,this.i),av.call(this,n,o),this.m=this.j=-1,(t=this.a).addEventListener("pointermove",this.v,!0,this),t.addEventListener("pointerleave",this.u,!0,this)}function dv(t,e,n){var r=t.c.da();r.bf(3*+n,3,[e.lat,e.lng,0]),t.g&&t.g.aa(r),t.i.aa(r),t.c.aa(r)}function ev(t,e,n){n=e.b(n||0),this.c=new Ln(t,{icon:n,zIndex:0}),this.c.draggable=!0,av.call(this,e,[this.c]),(t=this.a).addEventListener("dragstart",this.Gn,!0,this),t.addEventListener("drag",this.Hn,!0,this),t.addEventListener("dragend",this.Fn,!0,this)}function fv(t){var e=0;t.nextSibling&&t.previousSibling&&(t.nextSibling.Rc||t.previousSibling.Rc?t.nextSibling.Rc&&!t.previousSibling.Rc&&(e=2):e=1),e=t.b.b(e),t.c.Cc(e)}function gv(t,e){this.c=e,this.b=t,this.a={Rc:!0},hv(this,this.a),this.Sf=A(this.Sf,this)}function iv(t,e){for(var n=(t=t.a).nextSibling;n!==t;){var r=n,i=n.previousSibling!==t&&e;(r.s=i)?r.mg():(r.Kh&&x.clearTimeout(r.Kh),r.Kh=x.setTimeout(r.mg,100)),n=n.nextSibling}}function jv(t,e){var n=e||t.a.nextSibling,r=0,i=0;if(e&&!kv(t,e))throw new D(t.Ue,0,e);for(n instanceof ev?r=n.Ae():n instanceof cv&&(r=n.previousSibling.Ae()),e=n;e&&e!==t.a;e=e.nextSibling,i++)e.gi(r),1===i%2&&(r+=e.Ae())}function kv(t,e){for(var n=t.a.nextSibling,r=!1;n!==t.a;){if(n===e){r=!0;break}n=n.nextSibling}return r}function lv(t,e,n){e=new cv(e,n,t.c),t.b.ba(e.a)}function hv(t,e){t.a.nextSibling=e,e.previousSibling=t.a}function mv(t){var e,n=(t=t||{}).lineStyle;Hu.call(this),this.m=new Xu({label:Wu.btn,onStateChange:A(this.Dn,this)}),this.Fa(this.m),(e=t.distanceFormatter)&&(this.hj=e),n&&(this.Zj=n,this.uk=B),this.Pb(t.alignment||"right-bottom"),this.g={},this.g[0]=t.startIcon,this.g[2]=t.endIcon,this.g[1]=t.stopoverIcon,this.g[3]=t.splitIcon}function nv(t){var e,n=t.map,r={};t.f||(t.j=new N,t.s=new rl(t.j,{pixelRatio:t.map.Ua()}),t.u=e=t.j.Xb(),t.u.Xk(!0),e.addEventListener("dragstart",t.Bn,!0,t),e.addEventListener("dragend",t.af,!0,t),e.addEventListener("pointerenter",t.af,!0,t),e.addEventListener("pointerleave",t.Cn,!0,t),e.addEventListener("tap",t.Qn,!0,t),t.i=ov(t),r.a=A(t.hj,t),r.b=A(t.fk,t),r.g=A(t.zj,t),r.map=t.map,r.f=t.i,r.Ud=t.Zj,r.c=t.uk,t.b=new gv(t.u,r),t.f=!0),t.i&&t.u.ba(t.i),n.addEventListener("tap",t.rk,!0,t),n.a.add(t.s)}function pv(t){var e=t.map;t.f&&(e.removeEventListener("tap",t.rk,!0,t),e.Te(t.s),t.b.ma())}function ov(t){function e(){var t=r.sb();return t={anchor:r.fd().clone().scale(o).floor(),size:new Ui(zd(t.w*o),zd(t.h*o)),hitArea:i},new Uj(r.Lc(),t)}var n,r=t.fk(3),i=new Vi(Wi.NONE,[]),o=r===t.B?.5:1;if(1===r.getState())var a=e();else a=new Uj("<svg/>",{hitArea:i}),r.addEventListener("statechange",(function(){1===r.getState()&&n.Cc(e())}));return n=new Ln(t.map.Za(),{visibility:!1,icon:a})}function qv(){this.b=rv.CLOSED,Gu.call(this,"div","H_overlay")}u(av,F),p=av.prototype,p.Rc=!1,p.so={lat:0,lng:0},p.Dc=function(t,e){$u(this.f,t),this.f.aa(e)},p.Kh=0,p.mg=function(){this.f.mb(this.s)},u(cv,av),cv.prototype.Ae=function(){var t=this.c.da();return t.te(0).Ta(t.te(1))},cv.prototype.v=function(t){var e=t.currentPointer;t=this.previousSibling.wa();var n=this.nextSibling.wa(),r=this.b.f,i=e.viewportX;e=e.viewportY,this.j===i&&this.m===e||(this.j=i,this.m=e,r.aa(this.b.g(t,n,{x:i,y:e})),r.mb(!0))},cv.prototype.u=function(){this.b.f.mb()},cv.prototype.gi=function(){this.Dc(this.b.a(this.Ae()),this.c.J().Za())},u(ev,av),p=ev.prototype,p.jk=0,p.A={$c:"change"},p.Ae=function(){return this.jk},p.wa=function(){return this.c.da()},p.Hn=function(t){var e=t.currentPointer;t=e.viewportX,e=e.viewportY,this.i===t&&this.j===e||(this.i=t,this.j=e,this.c.aa(this.b.map.Ra(t-this.g.x,e-this.g.y)),this.dispatchEvent(new sd(this.A.$c,this)))},p.Gn=function(t){var e=t.currentPointer,n=e.viewportX;e=e.viewportY;var r=this.b.map.Aa(this.wa());this.c.ce(1),this.g={x:n-r.x,y:e-r.y},t.stopPropagation()},p.Fn=function(){this.c.ce(0)},p.gi=function(t){this.jk=t,this.Dc(this.b.a(t),this.wa())},t("H.ui.distanceMeasurement.Model",gv),p=gv.prototype,p.Kf=function(){return this.a.nextSibling===this.a},p.je=function(t){var e=this.a.previousSibling,n=this.Kf();return t=new ev(t,this.c,n?0:2),this.b.ba(t.a),bv(t,this.a),t.addEventListener(t.A.$c,this.Sf),n?hv(this,t):(lv(this,e,t),fv(e),jv(this,e)),t},p.insertBefore=function(t,e){var n,r=1;if(e){if(!kv(this,e))throw new D(this.insertBefore,1,e);(n=e.previousSibling.Rc)&&(r=0),(t=new ev(t,this.c,r)).addEventListener(t.A.$c,this.Sf),this.b.ba(t.a),n?(lv(this,t,n=this.a.nextSibling),hv(this,t),e=t,fv(n)):(e=(n=e.previousSibling).previousSibling,r=n.nextSibling,this.b.Da(n.a),lv(this,e,t),lv(this,t,r)),jv(this,e)}else t=this.je(t);return t},p.ma=function(){hv(this,this.a),this.b.ma()},p.Ue=function(t){var e=this.a,n=t.previousSibling,r=t.nextSibling;if(!kv(this,t))throw new D(this.Ue,0,t);if(this.b.Da(t.a),n===e){var i=r;i!==e?(hv(this,t=i.nextSibling),t.gi(0),fv(t),jv(this,t)):hv(this,this.a)}else r===e?(bv(t=(i=n).previousSibling,e),fv(t)):n&&r&&(lv(this,n.previousSibling,r.nextSibling),this.b.od([r.a,n.a]),jv(this,n.previousSibling));i&&i!==e&&this.b.Da(i.a)},p.Sf=function(t){var e=(t=t.target).previousSibling,n=t.nextSibling,r=t.wa();if(!n.Rc){dv(n,r,!1);var i=t}e.Rc||(dv(e,r,!0),i=e.previousSibling),jv(this,i)},u(mv,Hu),t("H.ui.DistanceMeasurement",mv),p=mv.prototype,p.Jh=Vu.METRIC,p.Zj={strokeColor:"rgb(39,44,54)",lineWidth:5},p.uk={strokeColor:"white",lineWidth:7},p.hj=function(t){var e="m",n=0;return"metric"===this.Jh?1e3<=t&&(t/=1e3,e="km",n=1):(e="ft",5280<=(t/=.3048)&&(t/=5280,e="mi",n=1)),t.toFixed(n)+" "+this.va().translate("scale."+e)},p.zj=function(t,e,n){var r=this.map.Aa(t);return e=this.map.Aa(e),n=new G(n.x,n.y).yj(r,e),this.map.Ra(n.x,n.y)||ng(t)},p.U=function(t,e){var n=22*(this.map.f.type===ik.P2D?this.map.Ua():1),r=n/2;Hu.prototype.renderInternal.call(this,t,e),this.Jh=Vu.METRIC,this.B=new Uj(Wu.point,{anchor:{x:r,y:r},size:{w:n,h:n},hitArea:new Vi(Wi.CIRCLE,[r,r,r])}),this.m.ec(this.va().translate("distance.measurement"))},mv.prototype.renderInternal=mv.prototype.U,p=mv.prototype,p.fk=function(t){return this.g[t]||this.B},p.af=function(){iv(this.b,!0)},p.Bn=function(){iv(this.b)},p.Cn=function(t){"touch"!==t.currentPointer.type&&iv(this.b)},p.Qn=function(t){var e,n=t.currentPointer,r=t.target.Ca;r&&(r=r.getData())instanceof av&&(e=r),r=e,t=(t=t.originalEvent).metaKey||t.altKey,r&&(t&&r instanceof ev?this.b.Ue(r):r instanceof cv&&(t=r.previousSibling.wa(),e=r.nextSibling.wa(),n={x:n.viewportX,y:n.viewportY},this.b.insertBefore(this.zj(t,e,n),r.nextSibling),this.i.mb()),this.af())},p.rk=function(t){var e=t.currentPointer;(t=t.target)!==this.map&&t.getProvider&&t.getProvider()===this.j||(this.b.je(this.map.Ra(e.viewportX,e.viewportY)),this.i.mb(),this.af())},p.Dn=function(t){"down"===t.target.getState()?nv(this):pv(this)},p.Me=function(t){this.Jh=t,this.f&&(jv(this.b),this.af())},mv.prototype.onUnitSystemChange=mv.prototype.Me,mv.prototype.o=function(){pv(this),this.f&&(this.j.D(),this.s.D()),mv.l.o.call(this)},mv.prototype.Ea=function(t){t?this.m.getState()===vu.DOWN&&(this.map=t,nv(this)):(pv(this),this.f=!1),Hu.prototype.Ea.apply(this,arguments)},mv.prototype.setMap=mv.prototype.Ea,u(qv,Gu),t("H.ui.base.OverlayPanel",qv),qv.prototype.O=function(t,e){return(t!==this.b||e)&&(this.b=t,t===rv.OPEN?this.Ga("H_open"):this.hb("H_open")),this},qv.prototype.setState=qv.prototype.O,qv.prototype.getState=function(){return this.b},qv.prototype.getState=qv.prototype.getState,qv.prototype.zk=function(t){var e=t.Hc;t=t.L();var n=this.L(),r=n.style;if(this.hb("H_top"),this.hb("H_middle"),this.hb("H_bottom"),this.hb("H_left"),this.hb("H_center"),this.hb("H_right"),r.bottom=r.top=r.left=r.right=r.margin="",/top/g.test(e)){this.Ga("H_top"),r.top="0",r.margin="0 12px";var i=-1}else/bottom/g.test(e)?(this.Ga("H_bottom"),r.bottom="0",r.margin="0 12px",i=1):(this.Ga("H_middle"),r.top="50%",r.margin="0 12px",r.marginTop=-Math.round(.5*n.offsetHeight)+"px",i=0);/left/g.test(e)?(this.Ga("H_left"),r.left=t.offsetWidth+"px",r.marginLeft="12px"):/right/g.test(e)?(this.Ga("H_right"),r.right=t.offsetWidth+"px",r.marginRight="12px"):(this.Ga("H_center"),r.left="50%",0>i?(r.top=t.offsetHeight+"px",r.marginTop="12px"):0<i&&(r.bottom=t.offsetHeight+"px",r.marginBottom="12px"),r.marginLeft=-Math.round(.5*n.offsetWidth)+"px",t.appendChild(n))},qv.prototype.pointToControl=qv.prototype.zk;var rv={OPEN:"open",CLOSED:"closed"};function sv(t){t=t||{},Gu.call(this,"div","H_rdo"),this.g=new Y("div","H_rdo_title"),this.b=new Gu("div","H_rdo_buttons"),this.Fa(this.g),this.Fa(this.b),this.i=A((function(t){t.target.getState()===vu.DOWN?(this.Mk(t.target,!0),this.dispatchEvent(tv)):t.target.O(vu.DOWN,!0)}),this),this.addEventListener("statechange",this.i),this.vi(t.title||""),t.onActiveButtonChange&&this.addEventListener(tv,t.onActiveButtonChange),t.buttonsOptions&&t.buttonsOptions.forEach((function(t){this.Ag(new Xu(t))}),this)}qv.State=rv,u(sv,Gu),t("H.ui.base.RadioGroup",sv);var tv="activebuttonchange";function uv(t){t=t||{},Hu.call(this),this.g=new qv,this.b=this.b.bind(this),this.m=this.m.bind(this),this.s=this.s.bind(this),this.Pb(t.alignment||"bottom-right"),vv(this,t.baseLayers,t.layers)}function vv(t,e,n){var r=t.Wb();t.f&&t.f.forEach((function(t){var e=t.layer;t=e&&Zt(n,(function(t){return t.layer===e})),e&&!t&&r.Te(e)})),t.j=zc(e)?e:[],t.f=zc(n)?n:[],t.i&&(t.i.ma(),t.u.ma(),wv(t))}function wv(t){var e=t.va();t.j.forEach((function(t,n){this.i.Ag(new Xu({label:xv(e,t.label),data:n,disabled:!t.layer}))}),t),t.f.forEach((function(t,n){this.u.Fa(new Xu({label:xv(e,t.label),onStateChange:this.V.bind(this,t.layer),data:n,disabled:!t.layer}))}),t),t.N.mb(!(!t.f.length||!t.j.length)),x.setTimeout(function(){this.map&&(this.b(),this.B.ta(!(this.j&&this.j.length||this.f&&this.f.length)))}.bind(t))}function Av(t,e){var n,r,i={},o=e.ka(),a=window.H.service&&window.H.service.omv.Provider;if(a&&e.ka()instanceof a&&o.$().se){var s=o.$(),l=function(){var t=Bv.ground.filter((function(t){return!!s.fh("layers."+t)})),a=Bv.water.filter((function(t){return!!s.fh("layers."+t)}));t.concat(a).length&&(Xh(i,s.se(t)),Xh(i,s.se(a,!1,!0)),delete i.global,n=new qi(i,s.Db()),(r=o.j.cd(n)).ug=e,this.map.Cg(r)),s.removeEventListener(Wh.CHANGE,l)}.bind(t);s.getState()!==Uh.READY?s.addEventListener(Wh.CHANGE,l):l()}}function yv(t){return Zt(t.map.a.Ha(),(function(t){return!!t.ug}))}function zv(t){t=t.map.a.Ha();var e=window.H.service&&window.H.service.traffic.flow.Provider;return!!e&&t.some((function(t){return t.ka()instanceof e}))}sv.prototype.U=function(t,e){Gu.prototype.renderInternal.call(this,t,e),this.vi(this.f,!0)},sv.prototype.renderInternal=sv.prototype.U,sv.prototype.ma=function(){this.b.ma()},sv.prototype.vi=function(t,e){return(t!==this.f||e)&&(this.f=t,this.g.L()&&(this.g.L().innerHTML=this.f)),this},sv.prototype.setTitle=sv.prototype.vi,sv.prototype.Um=function(){return this.f},sv.prototype.getTitle=sv.prototype.Um,sv.prototype.Ag=function(t){if(!(t instanceof Xu))throw Error("PushButton expected");return t.ia(this),this.b.Fa(t),this},sv.prototype.addButton=sv.prototype.Ag,sv.prototype.Xn=function(t){return this.b.removeChild(t),t.ia(null),this},sv.prototype.removeButton=sv.prototype.Xn,sv.prototype.yf=function(){return this.b.Xg()},sv.prototype.getButtons=sv.prototype.yf,sv.prototype.Mk=function(t,e){for(var n=this.yf(),r=n.length;r--;)n[r].O(n[r]===t?vu.DOWN:vu.UP,e)},sv.prototype.setActiveButton=sv.prototype.Mk,sv.prototype.o=function(){this.removeEventListener("statechange",this.i),this.ma(),Gu.prototype.o.call(this)},u(uv,Hu),t("H.ui.MapSettingsControl",uv),uv.prototype.Y=function(){var t=this.Wb();t&&(t.addEventListener("tap",this.m),(t=t.a).addEventListener("add",this.b),t.addEventListener("remove",this.b),t.addEventListener("set",this.b))},uv.prototype.K=function(){var t=this.Wb();t&&(t.removeEventListener("tap",this.m),(t=t.a).removeEventListener("add",this.b),t.removeEventListener("remove",this.b),t.removeEventListener("set",this.b))},uv.prototype.U=function(t,e){var n=this.va().translate("layers.choose");Hu.prototype.renderInternal.call(this,t,e),this.Y(),this.B=new Xu({tooltip:n,label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M6.7,14.6 L4.5,16 L12,20.6 L19.5,16 L17.3,14.6 L19.1,13.5 L23,16 L12,23 L1,16 L4.9,13.5 L6.7,14.6 Z M12,2 L23,9 L12,16 L1,9 L12,2 Z"></path></svg>',onStateChange:A((function(t){t.target.getState()===vu.DOWN?(this.g.O(rv.OPEN),this.g.zk(this)):this.g.O(rv.CLOSED)}),this)}),this.i=new sv({title:n,onActiveButtonChange:function(){t:{for(var t=this.i.yf(),e=t.length;e--;)if(t[e].getState()===vu.DOWN){t=t[e];break t}t=null}t=t.getData(),this.map.rd(this.j[t].layer),this.s()}.bind(this)}),this.u=new Gu("div","H_grp"),this.N=new Y("div","H_separator"),this.Fa(this.B),this.Fa(this.g),this.g.Fa(this.i),this.g.Fa(this.N),this.g.Fa(this.u),wv(this)},uv.prototype.renderInternal=uv.prototype.U,uv.prototype.b=function(){var t=this.map.g,e=this.map.a;this.j.forEach((function(e,n){this.i.yf()[n].O(vu[e.layer===t?"DOWN":"UP"],!0)}),this),this.f.forEach((function(t,n){n=this.u.Xg()[n],t.layer?n.O(vu[-1!==e.indexOf(t.layer)?"DOWN":"UP"],!0):n.ta(!0)}),this)},uv.prototype.V=function(t,e){e.target.getState()===vu.DOWN?this.map.Cg(t):this.map.Te(t),this.s()},uv.prototype.s=function(){var t;(t=yv(this))&&(t.ug.ka().$().Ke(t.ka().$().lc()),this.map.Te(t),t.D(),delete t.ug);zv(this)&&Av(this,this.map.g)};var Bv={water:["water.water-labels"],ground:"road_labels continent_label island_label roads.shields roads.directions truck-restriction.signs places landuse.label".split(" ")};function xv(t,e){return/^layers?/.test(e)&&t.lh(e)?t.translate(e):e}uv.prototype.m=function(){this.B.O(vu.UP)},uv.prototype.o=function(){uv.l.o.call(this),this.K()};var Cv=[];t("H.ui.i18n.defaultLocales",Cv);var Dv={},Ev=[];function Fv(t,e){Dv[t]=e,-1===Cv.indexOf(t)&&Cv.push(t),Ev.length?Gv(t,e):Ev=Object.keys(e)}function Gv(t,e){for(var n,r=Ev,i=r.length;i--;)if(!e[n=r[i]])throw Error("'"+n+"' key missing in translation map for "+t)}function Hv(t){t=t||{},Hu.call(this),this.f=new Xu({label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><g transform="translate(1 3)"><path fill-rule="nonzero" d="M5,0 L5,2 L2,2 L2,16 L5,16 L5,18 L2,18 C0.9,18 0,17 0,15.75 L0,2.25 C0,1 0.9,0 2,0 L5,0 Z M17,0 L20,0 C21.1,0 22,1 22,2.25 L22,15.75 C22,17 21.1,18 20,18 L17,18 L17,16 L20,16 L20,2 L17,2 L17,0 Z"></path><rect width="10" height="2" x="6" y="8"></rect><rect width="2" height="10" x="10" y="4"></rect></g></svg>',onStateChange:A(this.En,this)}),this.Fa(this.f),this.Pb(t.alignment||"right-bottom")}function Iv(t,e){if(!Ac(t))throw new TypeError("string locale code required");if(Ea(e))Gv(t,e);else{if(-1===Cv.indexOf(t))throw Error("Default locale '"+t+"' does nto exist.");e=Dv[t]}this.a=e||{},this.b=t}function Jv(t){t=t||{},Hu.call(this),this.Ga("H_scalebar"),this.Pb(t.alignment||"right-bottom"),this.s=150,this.update=A(this.update,this),this.i=this.g=this.b=this.f=null}function Kv(t){C(t,Qe,Kv,1),Y.call(this,"div","H_context_menu_item"),this.b=t,this.f=A(this.f,this),this.a=A(this.a,this),this.b.addEventListener("update",this.a)}function Lv(t){C(t,Array,Lv,1),Gu.call(this,"div","H_context_menu"),this.f=t,this.b=null}function Mv(t,e){e=e||{};var n=this;Y.call(this,"div","H_ib H_ib_top"),this.B=A((function(t){n.Zb()||(n.close(),t.preventDefault())}),this),this.update=A(this.update,this),this.i=A(this.i,this),this.setPosition(t),this.Xe(e.content),e.onStateChange&&this.addEventListener("statechange",e.onStateChange),this.O(Nv.OPEN)}u(Hv,Hu),t("H.ui.ZoomRectangle",Hv),p=Hv.prototype,p.En=function(t){var e=this.map,n=e.b.element;t.target.getState()===vu.DOWN?(e.addEventListener("dragstart",this.hk,!0,this),e.addEventListener("drag",this.ik,!0,this),e.addEventListener("dragend",this.gk,!0,this),(t=n.ownerDocument.createElement("div")).className="H_zoom_lasso",n.appendChild(t),this.b=t):(e.removeEventListener("dragstart",this.hk,!0,this),e.removeEventListener("drag",this.ik,!0,this),e.removeEventListener("dragend",this.gk,!0,this),n.removeChild(this.b))},p.hk=function(t){var e=this.b.style,n=t.currentPointer,r=n.viewportX;n=n.viewportY,t.target===this.map&&(t.stopPropagation(),e.width="0px",e.height="0px",e.top=n+"px",e.left=r+"px",e.display="block",this.i=n,this.g=r)},p.ik=function(t){var e=t.currentPointer,n=e.viewportX,r=e.viewportY;e=this.g;var i=this.i,o=this.b.style;t.target===this.map&&(t.stopPropagation(),t=n-e,n=r-i,o.left=e+(0>t?t:0)+"px",o.top=i+(0>n?n:0)+"px",o.width=Math.abs(t)+"px",o.height=Math.abs(n)+"px")},p.gk=function(t){var e=this.map,n=t.currentPointer;t.target===this.map&&(t.stopPropagation(),this.b.style.display="none",e.c.Qb({bounds:tg([e.Ra(this.g,this.i),e.Ra(n.viewportX,n.viewportY)])},!0))},p.U=function(t,e){Hu.prototype.renderInternal.call(this,t,e),this.f.ec(this.va().translate("zoom.rectangle"))},Hv.prototype.renderInternal=Hv.prototype.U,Fv("nl-NL",{"layers.normal":"Kaartweergave","layers.satellite":"Satelliet","layers.terrain":"Terrein","layer.transit":"Openbaar vervoer","layer.traffic":"Verkeerssituatie","layer.incidents":"Toon verkeersincidenten","layers.choose":"Weergave kiezen",minimap:"Minimap","scale.switchToImperial":"Overgaan naar mijlen","scale.switchToMetric":"Wijzigen naar km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Uitzoomen","zoom.in":"Inzoomen","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Openbaar vervoer","traffic.MISCELLANEOUS":"Diversen","traffic.ACCIDENT":"Ongeval","traffic.OTHER_NEWS":"Meer informatie","traffic.PLANNED_EVENT":"Geplande afzetting","traffic.ROAD_HAZARD":"Gevaar op de weg","traffic.ROAD_CLOSURE":"Rijbaan afgesloten","traffic.WEATHER":"Weer","traffic.CONGESTION":"Verkeersopstopping","traffic.CONSTRUCTION":"Wegwerkzaamheden","traffic.DISABLED_VEHICLE":"Voertuig met pech","traffic.from":"Begintijd:","traffic.until":"Geschatte eindtijd:","distance.measurement":"Measure distance"}),Fv("pt-PT",{"layers.normal":"Vista do mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transportes p\xfablicos","layer.traffic":"Condi\xe7\xf5es de tr\xe2nsito","layer.incidents":"Mostrar incidentes de tr\xe2nsito","layers.choose":"Escolher vista",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Diminuir","zoom.in":"Aumentar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transportes p\xfablicos","traffic.MISCELLANEOUS":"Diversos","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\xedcias","traffic.PLANNED_EVENT":"Evento planeado","traffic.ROAD_HAZARD":"Perigo na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Meteorologia","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\xe7\xe3o","traffic.DISABLED_VEHICLE":"Ve\xedculo avariado","traffic.from":"Hora de in\xedcio:","traffic.until":"Hora de fim prevista:","distance.measurement":"Measure distance"}),Fv("ru-RU",{"layers.normal":"\u0420\u0435\u0436\u0438\u043c \u043a\u0430\u0440\u0442\u044b","layers.satellite":"\u0421\u043f\u0443\u0442\u043d\u0438\u043a\u043e\u0432\u0430\u044f","layers.terrain":"\u041c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u044c","layer.transit":"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442","layer.traffic":"\u0414\u043e\u0440\u043e\u0436\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f","layer.incidents":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u043e\u0440\u043e\u0436\u043d\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f","layers.choose":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0438\u0434",minimap:"Minimap","scale.switchToImperial":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u0438\u043b\u0438","scale.switchToMetric":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0438\u043b\u043e\u043c\u0435\u0442\u0440\u044b","scale.km":"\u043a\u043c","scale.m":"\u043c","scale.mi":"\u043c\u0438\u043b\u044c","scale.ft":"\u0444\u0443\u0442","zoom.out":"\u041e\u0442\u0434\u0430\u043b\u0438\u0442\u044c","zoom.in":"\u041f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u044c","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442","traffic.MISCELLANEOUS":"\u041f\u0440\u043e\u0447\u0435\u0435 \u0414\u0422\u041f","traffic.ACCIDENT":"\u0414\u0422\u041f","traffic.OTHER_NEWS":"\u0414\u0440\u0443\u0433\u0438\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438","traffic.PLANNED_EVENT":"\u041f\u043b\u0430\u043d\u043e\u0432\u043e\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435","traffic.ROAD_HAZARD":"\u0414\u043e\u0440\u043e\u0436\u043d\u0430\u044f \u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","traffic.ROAD_CLOSURE":"\u0414\u043e\u0440\u043e\u0433\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u0430","traffic.WEATHER":"\u041f\u043e\u0433\u043e\u0434\u0430","traffic.CONGESTION":"\u041f\u0440\u043e\u0431\u043a\u0430","traffic.CONSTRUCTION":"\u0420\u0435\u043c\u043e\u043d\u0442","traffic.DISABLED_VEHICLE":"\u041d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c","traffic.from":"\u0412\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430:","traffic.until":"\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f:","distance.measurement":"\u0418\u0437\u043c\u0435\u0440\u0438\u0442\u044c \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435"}),Fv("fi-FI",{"layers.normal":"Karttan\xe4kym\xe4","layers.satellite":"Satelliitti","layers.terrain":"Maasto","layer.transit":"Julkinen liikenne","layer.traffic":"Liikenneolosuhteet","layer.incidents":"N\xe4yt\xe4 liikennetapahtumat","layers.choose":"Valitse n\xe4kym\xe4",minimap:"Minimap","scale.switchToImperial":"Vaihda maileihin","scale.switchToMetric":"Vaihda kilometreihin","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Loitonna","zoom.in":"L\xe4henn\xe4","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Julkinen liikenne","traffic.MISCELLANEOUS":"Erittelem\xe4t\xf6n syy","traffic.ACCIDENT":"Onnettomuus","traffic.OTHER_NEWS":"Muu tapahtuma","traffic.PLANNED_EVENT":"Suunniteltu tapahtuma","traffic.ROAD_HAZARD":"Vaara tiell\xe4","traffic.ROAD_CLOSURE":"Tie suljettu","traffic.WEATHER":"S\xe4\xe4","traffic.CONGESTION":"Ruuhka","traffic.CONSTRUCTION":"Rakennusty\xf6","traffic.DISABLED_VEHICLE":"Pys\xe4htynyt ajoneuvo","traffic.from":"Alkamisaika:","traffic.until":"Arvioitu p\xe4\xe4ttymisaika:","distance.measurement":"Measure distance"}),Fv("pt-BR",{"layers.normal":"Exibi\xe7\xe3o do mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\xfablico","layer.traffic":"Condi\xe7\xf5es do tr\xe2nsito","layer.incidents":"Mostrar incidentes no tr\xe2nsito","layers.choose":"Escolher exibi\xe7\xe3o",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"milhas","scale.ft":"p\xe9s","zoom.out":"Menos zoom","zoom.in":"Mais zoom","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\xfablico","traffic.MISCELLANEOUS":"Miscel\xe2nea","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\xedcias","traffic.PLANNED_EVENT":"Evento planejado","traffic.ROAD_HAZARD":"Risco na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Clima","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\xe7\xe3o","traffic.DISABLED_VEHICLE":"Ve\xedculo incapacitado","traffic.from":"Hora de in\xedcio:","traffic.until":"Tempo final estimado:","distance.measurement":"Measure distance"}),Fv("zh-CN",{"layers.normal":"\u5730\u56fe\u89c6\u56fe","layers.satellite":"\u536b\u661f","layers.terrain":"\u5730\u5f62","layer.transit":"\u516c\u5171\u4ea4\u901a","layer.traffic":"\u4ea4\u901a\u60c5\u51b5","layer.incidents":"\u663e\u793a\u4ea4\u901a\u4e8b\u4ef6","layers.choose":"\u9009\u62e9\u89c6\u56fe",minimap:"Minimap","scale.switchToImperial":"\u5207\u6362\u4e3a\u300c\u82f1\u91cc\u300d","scale.switchToMetric":"\u5207\u6362\u4e3a\u300c\u516c\u91cc\u300d","scale.km":"\u516c\u91cc","scale.m":"\u7c73","scale.mi":"\u82f1\u91cc","scale.ft":"\u82f1\u5c3a","zoom.out":"\u7f29\u5c0f","zoom.in":"\u653e\u5927","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\u516c\u5171\u4ea4\u901a","traffic.MISCELLANEOUS":"\u7efc\u5408\u4e8b\u4ef6","traffic.ACCIDENT":"\u4ea4\u901a\u610f\u5916","traffic.OTHER_NEWS":"\u5176\u4ed6\u65b0\u95fb","traffic.PLANNED_EVENT":"\u9884\u5b9a\u4e8b\u4ef6","traffic.ROAD_HAZARD":"\u9053\u8def\u5371\u9669","traffic.ROAD_CLOSURE":"\u9053\u8def\u5df2\u5173\u95ed","traffic.WEATHER":"\u5929\u6c14","traffic.CONGESTION":"\u5835\u585e","traffic.CONSTRUCTION":"\u65bd\u5de5","traffic.DISABLED_VEHICLE":"\u8f66\u8f86\u629b\u951a","traffic.from":"\u5f00\u59cb\u65f6\u95f4\uff1a","traffic.until":"\u9884\u8ba1\u7ed3\u675f\u65f6\u95f4\uff1a","distance.measurement":"Measure distance"}),Fv("es-ES",{"layers.normal":"Mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\xfablico","layer.traffic":"Estado del tr\xe1fico","layer.incidents":"Mostrar incidentes de tr\xe1fico","layers.choose":"Elija una vista",minimap:"Minimap","scale.switchToImperial":"Cambiar a millas","scale.switchToMetric":"Cambiar a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Alejar","zoom.in":"Acercar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\xfablico","traffic.MISCELLANEOUS":"Varios","traffic.ACCIDENT":"Accidente","traffic.OTHER_NEWS":"M\xe1s noticias","traffic.PLANNED_EVENT":"Acto programado","traffic.ROAD_HAZARD":"Riesgo en carretera","traffic.ROAD_CLOSURE":"Carretera cerrada","traffic.WEATHER":"Tiempo","traffic.CONGESTION":"Atasco","traffic.CONSTRUCTION":"Construcci\xf3n","traffic.DISABLED_VEHICLE":"Veh\xedculo averiado","traffic.from":"Inicio:","traffic.until":"Finalizaci\xf3n estimada:","distance.measurement":"Measure distance"}),Fv("fr-FR",{"layers.normal":"Carte","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Transports publics","layer.traffic":"Conditions de circulation","layer.incidents":"Afficher les incidents de circulation","layers.choose":"Choisir la vue",minimap:"Minimap","scale.switchToImperial":"Passer en miles","scale.switchToMetric":"Passer en km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom arri\xe8re","zoom.in":"Zoom avant","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transports publics","traffic.MISCELLANEOUS":"Divers","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Autre","traffic.PLANNED_EVENT":"\xc9v\xe9nement pr\xe9vu","traffic.ROAD_HAZARD":"Danger routier","traffic.ROAD_CLOSURE":"Chauss\xe9e ferm\xe9e","traffic.WEATHER":"M\xe9t\xe9o","traffic.CONGESTION":"Embouteillage","traffic.CONSTRUCTION":"Travaux","traffic.DISABLED_VEHICLE":"V\xe9hicule en panne","traffic.from":"Date ou heure de d\xe9but:","traffic.until":"Date et heure de fin estim\xe9es:","distance.measurement":"Measure distance"}),Fv("pl-PL",{"layers.normal":"Widok mapy","layers.satellite":"Satelita","layers.terrain":"Teren","layer.transit":"Transport publiczny","layer.traffic":"Warunki drogowe","layer.incidents":"Poka\u017c zdarzenia drogowe","layers.choose":"Wybierz widok",minimap:"Minimap","scale.switchToImperial":"Zmie\u0144 na mile","scale.switchToMetric":"Zmie\u0144 na km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Oddal","zoom.in":"Przybli\u017c","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transport publiczny","traffic.MISCELLANEOUS":"Inne zdarzenie","traffic.ACCIDENT":"Wypadek","traffic.OTHER_NEWS":"Inne wiadomo\u015bci","traffic.PLANNED_EVENT":"Zdarzenie planowane","traffic.ROAD_HAZARD":"Niebezpiecze\u0144stwo na drodze","traffic.ROAD_CLOSURE":"Jezdnia zamkni\u0119ta","traffic.WEATHER":"Pogoda","traffic.CONGESTION":"Korek","traffic.CONSTRUCTION":"Budowa","traffic.DISABLED_VEHICLE":"Uszkodzony pojazd","traffic.from":"Data rozpocz\u0119cia:","traffic.until":"Przybli\u017cona data zako\u0144czenia:","distance.measurement":"Measure distance"}),Fv("de-DE",{"layers.normal":"Kartenansicht","layers.satellite":"Satellit","layers.terrain":"Gel\xe4nde","layer.transit":"\xd6ffentliche Verkehrsmittel","layer.traffic":"Verkehrslage","layer.incidents":"Verkehrsst\xf6rungen anzeigen","layers.choose":"Ansicht ausw\xe4hlen",minimap:"Minimap","scale.switchToImperial":"Umrechnung in Meilen","scale.switchToMetric":"Umrechnung in Kilometer","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Verkleinern","zoom.in":"Vergr\xf6\xdfern","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\xd6ffentliche Verkehrsmittel","traffic.MISCELLANEOUS":"Diverse","traffic.ACCIDENT":"Unfall","traffic.OTHER_NEWS":"Anderes Ereignis","traffic.PLANNED_EVENT":"Geplantes Ereignis","traffic.ROAD_HAZARD":"Verkehrshindernis","traffic.ROAD_CLOSURE":"Fahrbahn gesperrt","traffic.WEATHER":"Wetter","traffic.CONGESTION":"Verkehrsstau","traffic.CONSTRUCTION":"Baustelle","traffic.DISABLED_VEHICLE":"Liegengebliebenes Fahrzeug","traffic.from":"Beginn:","traffic.until":"Voraussichtliches Ende:","distance.measurement":"Measure distance"}),Fv("tr-TR",{"layers.normal":"Harita g\xf6r\xfcn\xfcm\xfc","layers.satellite":"Uydu","layers.terrain":"Arazi","layer.transit":"Toplu ula\u015f\u0131m","layer.traffic":"Trafik durumlar\u0131","layer.incidents":"Trafik olaylar\u0131n\u0131 g\xf6ster","layers.choose":"G\xf6r\xfcn\xfcm se\xe7",minimap:"Minimap","scale.switchToImperial":"Mile d\xf6n\xfc\u015ft\xfcr","scale.switchToMetric":"Kilometreye d\xf6n\xfc\u015ft\xfcr","scale.km":"km","scale.m":"m","scale.mi":"mil","scale.ft":"ft","zoom.out":"Uzakla\u015ft\u0131r","zoom.in":"Yak\u0131nla\u015ft\u0131r","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Toplu ula\u015f\u0131m","traffic.MISCELLANEOUS":"\xc7e\u015fitli","traffic.ACCIDENT":"Kaza","traffic.OTHER_NEWS":"Di\u011fer haberler","traffic.PLANNED_EVENT":"Planl\u0131 etkinlik","traffic.ROAD_HAZARD":"Yol tehlikesi","traffic.ROAD_CLOSURE":"Yol kapal\u0131","traffic.WEATHER":"Hava durumu","traffic.CONGESTION":"Yo\u011funluk","traffic.CONSTRUCTION":"Yol \xe7al\u0131\u015fmas\u0131","traffic.DISABLED_VEHICLE":"Ara\xe7 ar\u0131zas\u0131","traffic.from":"Ba\u015flang\u0131\xe7 zaman\u0131:","traffic.until":"Tahmini biti\u015f zaman\u0131:","distance.measurement":"Measure distance"}),Fv("it-IT",{"layers.normal":"Vista mappa","layers.satellite":"Satellite","layers.terrain":"Terreno","layer.transit":"Mezzi pubblici","layer.traffic":"Condizioni del traffico","layer.incidents":"Mostra incidenti stradali","layers.choose":"Scegli vista",minimap:"Minimap","scale.switchToImperial":"Passa a miglia","scale.switchToMetric":"Passa a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom indietro","zoom.in":"Zoom avanti","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Mezzi pubblici","traffic.MISCELLANEOUS":"Varie","traffic.ACCIDENT":"Incidente","traffic.OTHER_NEWS":"Altre notizie","traffic.PLANNED_EVENT":"Evento pianificato","traffic.ROAD_HAZARD":"Strada dissestata","traffic.ROAD_CLOSURE":"Strada chiusa","traffic.WEATHER":"Maltempo","traffic.CONGESTION":"Ingorgo","traffic.CONSTRUCTION":"Lavori in corso","traffic.DISABLED_VEHICLE":"Veicolo in panne","traffic.from":"Ora di inizio:","traffic.until":"Ora di fine stimata:","distance.measurement":"Measure distance"}),Fv("en-US",{"layers.normal":"Map view","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Public transport","layer.traffic":"Traffic conditions","layer.incidents":"Show traffic incidents","layers.choose":"Choose view",minimap:"Minimap","scale.switchToImperial":"Change to miles","scale.switchToMetric":"Change to km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom out","zoom.in":"Zoom in","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Public transport","traffic.MISCELLANEOUS":"Miscellaneous","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Other news","traffic.PLANNED_EVENT":"Planned event","traffic.ROAD_HAZARD":"Road hazard","traffic.ROAD_CLOSURE":"Roadway closed","traffic.WEATHER":"Weather","traffic.CONGESTION":"Congestion","traffic.CONSTRUCTION":"Construction","traffic.DISABLED_VEHICLE":"Disabled vehicle","traffic.from":"Start time:","traffic.until":"Estimated end time:","distance.measurement":"Measure distance"}),t("H.ui.i18n.Localization",Iv),Iv.prototype.um=function(){return this.b},Iv.prototype.getLocale=Iv.prototype.um,Iv.prototype.om=function(){return Object.keys(this.a)},Iv.prototype.getKeys=Iv.prototype.om,Iv.prototype.lh=function(t){return!(!this.a||!this.a[t])},Iv.prototype.hasKey=Iv.prototype.lh,Iv.prototype.translate=function(t){var e=this.a[t];if(!Ac(e))throw Error("Translation missing for key '"+t+"'.");return e},Iv.prototype.translate=Iv.prototype.translate,u(Jv,Hu),t("H.ui.ScaleBar",Jv),Jv.prototype.U=function(t,e){Hu.prototype.renderInternal.call(this,t,e),t.innerHTML='<svg height="12" version="1.1" xmlns="http://www.w3.org/2000/svg"><polyline style="fill:none; stroke:white; stroke-width:4" points="2,2 2,10 98,10 98,2"/><polyline style="fill:none; stroke:black; stroke-width:2" points="2,2 2,10 98,10 98,2"/></svg><div style="padding: 0 0 0 10px"></div>',t.style.direction="ltr",this.f=t.firstChild,e=this.f.childNodes,this.b=e[0],this.g=e[1],this.i=t.lastChild,this.j=Vu.METRIC,this.m=A((function(t){this.Zb()||(this.dispatchEvent("toggleunitsystem"),t.preventDefault())}),this),this.u=A((function(t){t.preventDefault()}),this),ru(t,"start",this.u),ru(t,"end",this.m),this.ec(this.va().translate("scale.switchToImperial")),this.update()},Jv.prototype.renderInternal=Jv.prototype.U,Jv.prototype.Ea=function(t){this.map&&this.map.removeEventListener("mapviewchange",this.update),t&&t.addEventListener("mapviewchange",this.update),Hu.prototype.Ea.apply(this,arguments)},Jv.prototype.setMap=Jv.prototype.Ea,Jv.prototype.capture=function(t,e,n){var r=this.L(),i=r.ownerDocument,o=i.createElement("canvas"),a=o.getContext("2d"),s=i.createElementNS("http://www.w3.org/2000/svg","svg"),l=i.createElementNS("http://www.w3.org/2000/svg","foreignObject"),u=lf(r,i,!1);i=parseFloat(r.offsetWidth)+1;var c=parseFloat(r.offsetHeight),h=i*t;t*=c,o.width=h,o.height=t,s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("width",h),s.setAttribute("height",t),s.setAttribute("viewBox","0 0 "+i+" "+c),l.setAttribute("width","100%"),l.setAttribute("height","100%"),s.appendChild(l),u.setAttribute("width","100%"),u.setAttribute("height","100%"),u.setAttribute("xmlns","http://www.w3.org/1999/xhtml");var p=window.getComputedStyle(r);"box-shadow display align-items font font-family font-size height text-shadow direction".split(" ").forEach((function(t){u.style.setProperty(t,p.getPropertyValue(t))})),l.appendChild(u),new tf("image",r=bf(s.outerHTML)).then((function(t){a.drawImage(t,0,0),e(o)}),n)},Jv.prototype.capture=Jv.prototype.capture,Jv.prototype.Me=function(t){this.j=t,this.ec("imperial"===t?this.va().translate("scale.switchToMetric"):this.va().translate("scale.switchToImperial")),this.update()},Jv.prototype.onUnitSystemChange=Jv.prototype.Me,Jv.prototype.update=function(){var t;if(this.L()){this.f=this.f,this.b=this.b;var e=this.s,n=0,r=this.map;if(r){var i=Math.round(.5*r.b.width),o=Math.round(.5*r.b.height);(t=r.Ra(i,o))&&(r=r.Ra(i+1,o))&&(n=100*t.Ta(r))}n&&(this.j===Vu.IMPERIAL?1609.344>n?(r=n/.3048006,t=this.va().translate("scale.ft")):(r=n/1609.344,t=this.va().translate("scale.mi")):1e3>n?(r=n,t=this.va().translate("scale.m")):(r=n/1e3,t=this.va().translate("scale.km")),(r=(n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)))/r*100)<e/5?(n*=5,r*=5):r<e/2?(n*=2,r*=2):r>e&&(n/=2,r/=2),r=Math.round(r),this.f.setAttribute("width",r),this.i.textContent=n+" "+t,this.b.points.getItem(2).x=this.g.points.getItem(2).x=this.b.points.getItem(3).x=this.g.points.getItem(3).x=r-2)}},u(Kv,Y),t("H.ui.context.Item",Kv),Kv.prototype.f=function(t){var e=this.b,n=e.callback;n&&!e.isDisabled()&&(this.dispatchEvent("click"),n(t))},Kv.prototype.U=function(){var t=this,e=this.L();De(e,"click",this.f),e.addEventListener("keyup",(function(e){13==e.keyCode&&t.f(e)})),this.a()},Kv.prototype.renderInternal=Kv.prototype.U,Kv.prototype.a=function(){var t=this.L(),e=this.b;e.callback?(this.Ga("clickable"),t.setAttribute("tabindex","0")):(this.hb("clickable"),t.removeAttribute("tabindex")),e.isDisabled()?this.Ga("disabled"):this.hb("disabled"),e=e.getLabel(),iu.textContent=e,t.innerHTML=iu.innerHTML.split("\n").join("<br/>")},Kv.prototype.o=function(){Y.prototype.o.call(this),this.b.removeEventListener("update",this.a)},u(Lv,Gu),t("H.ui.context.Menu",Lv),Lv.prototype.U=function(){Gu.prototype.U.apply(this,arguments),this.f.forEach((function(t){t===Re?t=new Y("div","H_context_menu_item_separator"):(t=new Kv(t)).addEventListener("click",this.g.bind(this)),this.Fa(t)}),this),De(this.L(),["mousedown","touchstart","pointerdown","wheel"],(function(t){t.stopPropagation()}))},Lv.prototype.renderInternal=Lv.prototype.U,Lv.prototype.setPosition=function(t,e){if(this.b){var n=this.L(),r=n.offsetWidth,i=n.offsetHeight,o=this.b,a=o.b.width;t+r>a&&t>a/2&&(t-=r),e+i>(o=o.b.height)&&e>o/2&&(e-=i),bu(n,t,e)}},Lv.prototype.setPosition=Lv.prototype.setPosition,Lv.prototype.g=function(){this.b&&this.b.dispatchEvent(new sd("contextmenuclose",this.b))},Lv.prototype.Ea=function(t){this.b=t},Lv.prototype.setMap=Lv.prototype.Ea,u(Mv,Y),t("H.ui.InfoBubble",Mv),Mv.prototype.a=null,Mv.prototype.wa=function(){return this.u},Mv.prototype.setPosition=function(t){this.u=ng(t),this.update()},Mv.prototype.setPosition=Mv.prototype.setPosition,Mv.prototype.Ea=function(t){this.a=t},Mv.prototype.U=function(t,e){this.m=ou(e,"div","H_ib_body"),this.tailEl_=ou(e,"div","H_ib_tail"),this.f=ou(e,"div","H_ib_close H_btn",'<svg version="1.1" class="H_icon" viewBox="0 0 12 12"><path d="m8.12 6 3.66-3.66c.29-.29.29-.76 0-1.05l-1.06-1.06c-.29-.29-.76-.29-1.05 0l-3.66 3.66-3.66-3.66c-.29-.29-.76-.29-1.05 0l-1.06 1.06c-.29.29-.3.76 0 1.05l3.66 3.66-3.66 3.66c-.29.29-.29.76 0 1.05l1.06 1.06c.29.29.76.29 1.05 0l3.66-3.66 3.66 3.66c.29.29.76.29 1.05 0l1.06-1.06c.29-.29.3-.76 0-1.05z"></path></svg>'),this.b=ou(e,"div","H_ib_content","&nbsp;"),this.m.appendChild(this.f),this.m.appendChild(this.b),ru(this.f,"start",this.B),this.a.c.addEventListener("sync",this.update),this.a.b.addEventListener("sync",this.update),t.appendChild(this.m),t.appendChild(this.tailEl_),this.Xe(this.g)},Mv.prototype.renderInternal=Mv.prototype.U,Mv.prototype.i=function(){this.s||(this.s=setTimeout(this.update,0))},Mv.prototype.update=function(){var t,e=this.L(),n=this.a,r="none";if(this.s=0,n&&e&&this.getState()===Nv.OPEN){if(t=n.Aa(this.u)){var i=t.x;t=t.y,(i>=-(n=n.b.width)||i<=2*n||t>=-n||t<=2*n)&&(r="",cu?(e.style.left=i-n+"px",e.style.top=t+"px"):bu(e,i,t))}e.style.display=r,""===r&&(e.style.visibility="visible")}};var Nv={OPEN:"open",CLOSED:"closed"};function Ov(t){this.c=t,this.a=this.b=null,this.i=0,this.g=22,this.f=A(this.f,this),(t=this.c.Wb()).addEventListener("mapviewchange",this.s,!1,this),(t=t.a).addEventListener("add",this.j,!1,this),t.addEventListener("remove",this.m,!1,this)}function Pv(t,e){t.b&&e&&t.b===e.ka()||(t.b&&t.b.removeEventListener("tap",t.f),e?(t.b=e.ka(),t.b.addEventListener("tap",t.f),t.i=t.b.min,t.g=t.b.max):(t.b=null,t.i=0,t.g=22))}function Qv(t){return window.H.service&&t.ka()instanceof window.H.service.traffic.incidents.Provider}function Rv(t,e){var n=t.L(),r=this;F.call(this),this.c=t,this.i=n.ownerDocument,this.f={},this.b=[],new Ov(this),this.P=ou(this.i,"div","H_ui"),this.setDirection(),this.S=A((function(t){this.s.put(t.target,t.target.Hc)}),this),this.addEventListener("alignmentchange",this.S),this.K=A((function(){this.il()}),this),this.addEventListener("toggleunitsystem",this.K),this.P.addEventListener("contextmenu",this.v,!1),this.P.addEventListener("MSHoldVisual",this.v,!1),this.c.addEventListener("contextmenu",this.B,!1,this),this.c.addEventListener("contextmenuclose",this.u,!1,this),this.c.ob(this.D.bind(this)),this.a=null,this.m=-1,this.s=new Ku(this.P,this.i),this.g=Vu.METRIC,Sv(this,"en-US"),e&&Tv(this,e),n.appendChild(this.P),x.setTimeout((function(){r.s.update()}),1)}function Sv(t,e){if(Ac(e))var n=e;else{if(!(e instanceof Iv))throw Error("The locale parameter must be a string or a H.ui.i18n.Localization object.");n=e.b;var r=e}if(!n)throw Error("No locale was defined.");if(r)t.j=r;else{if(!(0<=Cv.indexOf(n)))throw Error("Locale ["+n+"] is not supported.");t.j=new Iv(n)}}function Tv(t,e){var n,r;e.unitSystem&&t.og(e.unitSystem),(r=e.locale)&&Sv(t,r),(n=e.zoom)&&t.xd("zoom",new Iu(Ea(n)?n:null)),(n=e.zoomrectangle)&&t.xd("zoomrectangle",new Hv(Ea(n)?n:null)),(n=e.mapsettings)&&t.xd("mapsettings",new uv(Ea(n)?n:null)),(n=e.scalebar)&&t.xd("scalebar",new Jv(Ea(n)?n:null)),(n=e.distancemeasurement)&&t.xd("distancemeasurement",new mv(Ea(n)?n:null))}function Vv(t,e,n,r){for(var i=t,o=0;i&&o<e.length;o++)i=i[e[o]];i&&i!==t&&r.push({label:n,layer:i})}function Uv(t,e,n){var r=[],i=[],o=e.raster;if(t===ik.P2D&&o){if(Vv(e,["raster","normal","map"],"layers.normal",r),Vv(e,["raster","satellite","map"],"layers.satellite",r),Vv(e,["raster","terrain","map"],"layers.terrain",r),n)for(var a in o)if(o[a]&&o[a].map===n){var s=a;break}Vv(e,["raster","normal","trafficincidents"],"layer.incidents",i),Vv(e,["raster",s,"transit"],"layer.transit",i)}else Vv(e,["vector","normal","map"],"layers.normal",r),Vv(e,["raster","satellite","map"],"layers.satellite",r),Vv(e,["vector","normal","traffic"],"layer.traffic",i),Vv(e,["vector","normal","trafficincidents"],"layer.incidents",i);return{alignment:"bottom-right",baseLayers:r,layers:i}}function Wv(t,e){if(e=e||{},!(t&&t instanceof ql))throw Error("Base layer is mandatory for overview UI element");Hu.call(this),this.f=new Xu({label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="H_icon"><g fill-rule="evenodd" transform="translate(2 2)"><rect width="9" height="9" x="10" y="10"/><rect class="H_icon_stroke" width="18" height="18" x="1" y="1" fill="none" stroke="#000" stroke-width="2" rx="2"/></g></svg>',onStateChange:A(this.g,this)}),this.Fa(this.f),this.b=new Xv(t,e.zoomDelta,e.scaleX,e.scaleY),this.Pb(e.alignment||"right-bottom"),this.Fa(this.b)}function Xv(t,e,n,r){this.j=t,"number"===typeof e&&(this.kl=e),"number"===typeof n&&(this.vk=n),"number"===typeof r&&(this.wk=r),Gu.call(this,"div","H_overview")}function Zv(t){!t.wd&&Yv(t),t.hb("H_overview_active"),t.b.removeEventListener("mapviewchange",t.yi,!1,t)}function Yv(t,e){var n=t.b.b.element,r=t.L().style,i=n.offsetWidth/t.vk/10;n=n.offsetHeight/t.wk/10;var o=t.g.style;e?(r.width=i+"em",r.height=n+"em",o.width=i+"em",o.height=n+"em"):r.width=r.height="0em",t.f.b.resize()}function $v(t,e){if(!t)throw new D($v,0,t);$v.l.constructor.call(this,t),this.b={},this.c=!(!e||!e.jc),this.f=aw++}Mv.State=Nv,Mv.prototype.j=Nv.OPEN,Mv.prototype.getState=function(){return this.j},Mv.prototype.getState=Mv.prototype.getState,Mv.prototype.O=function(t){t!==this.j&&(this.j=t,this.dispatchEvent("statechange")),(t=this.L())&&(this.j===Nv.OPEN?(t.style.display="block",t.style.visibility="hidden",this.i()):t.style.display="none")},Mv.prototype.setState=Mv.prototype.O,Mv.prototype.close=function(){this.O(Nv.CLOSED)},Mv.prototype.close=Mv.prototype.close,Mv.prototype.open=function(){this.O(Nv.OPEN)},Mv.prototype.open=Mv.prototype.open,Mv.prototype.Vl=function(){return this.b||null},Mv.prototype.getContentElement=Mv.prototype.Vl,Mv.prototype.Xe=function(t){if(t){if("string"!==typeof t&&("number"!==typeof t.nodeType||"string"!==typeof t.nodeName))throw Error("InfoBubble content must be a string or HTML node.");this.g=t}else this.g="";this.L()&&(this.g?(this.b.innerHTML="","string"===typeof this.g?this.b.innerHTML=t:"number"===typeof t.nodeType&&"string"===typeof t.nodeName&&this.b.appendChild(t)):this.b.innerHTML="&nbsp;",this.i())},Mv.prototype.setContent=Mv.prototype.Xe,Mv.prototype.o=function(){this.close(),this.Xe(""),this.f&&su(this.f,"end",this.B),this.a&&(this.a.c.removeEventListener("sync",this.update),this.a.b.removeEventListener("sync",this.update)),Y.prototype.o.call(this)},Ov.prototype.s=function(t){var e=t.newValue.zoom;this.a&&t.modifiers&t.ZOOM&&(e<this.i||e>this.g)&&this.a.close()},Ov.prototype.j=function(t){Qv(t=t.added)&&Pv(this,t)},Ov.prototype.m=function(t){Qv(t.removed)&&(this.a&&this.a.close(),Pv(this,null))},Ov.prototype.f=function(t){var e;if(t.target&&(e=t.target.getData())&&0===t.currentPointer.button){var n=t.target.da();this.a||(this.a=new Mv(n),this.a.Ga("H_tib"),this.c.Ri(this.a)),this.a.setPosition(n),n=e.TRAFFIC_ITEM_TYPE_DESC.replace(" ","_"),n=this.c.va().lh("traffic."+n)?this.c.va().translate("traffic."+n):e.TRAFFIC_ITEM_DESCRIPTION[e.TRAFFIC_ITEM_DESCRIPTION.length-1].value,this.a.Xe('<div class="H_tib_content"><div class="H_rdo_title" dir="auto">{{title}}</div><div class="H_tib_desc" dir="auto"><span>{{desc}}</span><div class="H_tib_time"><span class="H_tib_left">{{traffic.from}}</span><span class="H_tib_right">{{from}}</span><br/><span class="H_tib_left">{{traffic.until}}</span><span class="H_tib_right">{{until}}</span></div></div>'.replace("{{title}}",n).replace("{{desc}}",e.TRAFFIC_ITEM_DESCRIPTION[0].value).replace("{{traffic.from}}",this.c.va().translate("traffic.from")).replace("{{traffic.until}}",this.c.va().translate("traffic.until")).replace("{{from}}",e.START_TIME).replace("{{until}}",e.END_TIME)),this.a.open()}t.stopPropagation()},u(Rv,F),t("H.ui.UI",Rv),Rv.prototype.v=function(t){for(var e=t.target;e&&!/\bH_ib_content\b/.test(e.className);)e=e.parentNode;e||t.preventDefault()},Rv.prototype.L=function(){return this.P},Rv.prototype.getElement=Rv.prototype.L,Rv.prototype.Wb=function(){return this.c},Rv.prototype.getMap=Rv.prototype.Wb,Rv.prototype.Xm=function(){return this.g},Rv.prototype.getUnitSystem=Rv.prototype.Xm,Rv.prototype.og=function(t){var e,n=this.f;if(t!==this.g)for(e in this.g=t,n)n[e]instanceof Hu&&n[e].onUnitSystemChange(this.g)},Rv.prototype.setUnitSystem=Rv.prototype.og,Rv.prototype.setDirection=function(t){this.P.setAttribute("dir",t||getComputedStyle(this.Wb().L()).direction)},Rv.prototype.setDirection=Rv.prototype.setDirection,Rv.prototype.va=function(){return this.j},Rv.prototype.il=function(){this.g===Vu.METRIC?this.og(Vu.IMPERIAL):this.og(Vu.METRIC)},Rv.prototype.toggleUnitSystem=Rv.prototype.il,Rv.prototype.Ri=function(t){var e=this.b.length,n=this.P;if(0>this.b.indexOf(t)){t.ia(this),t.Ea(this.c);var r=t.T(this.i);e=0<e?this.b[e-1].L().nextSibling:this.P.firstChild,n.insertBefore(r,e),this.b.push(t)}},Rv.prototype.addBubble=Rv.prototype.Ri,Rv.prototype.B=function(t){var e=t.items;this.a&&this.u(),clearTimeout(this.m),this.m=x.setTimeout(function(){e.length&&(this.a=new Lv(e),this.P.insertBefore(this.a.T(this.i),this.P.firstChild),this.a.ia(this),this.a.Ea(this.c),this.a.setPosition(t.viewportX,t.viewportY))}.bind(this),0)},Rv.prototype.u=function(){this.a&&(this.a.D(),this.a=null)},Rv.prototype.Wn=function(t){var e=this.b.indexOf(t);-1<e&&(t.ia(null),t.Ea(null),this.b.splice(e,1),this.P.removeChild(t.L()))},Rv.prototype.removeBubble=Rv.prototype.Wn,Rv.prototype.Rl=function(){return this.b},Rv.prototype.getBubbles=Rv.prototype.Rl,Rv.prototype.xd=function(t,e){if(this.ye(t))throw Error("A control with name ["+t+"] is already registered.");e.ia(this),e.Ea(this.c),e.ua=this.j,e.T(this.i),e.onUnitSystemChange(this.g),this.f[t]=e},Rv.prototype.addControl=Rv.prototype.xd,Rv.prototype.Yn=function(t){var e=this.ye(t);if(!e)throw Error("Control ["+t+"] not found in this UI's controls.");return e.K(),e.ia(null),e.Ea(null),tu(e),delete this.f[t],e},Rv.prototype.removeControl=Rv.prototype.Yn,Rv.prototype.ye=function(t){return this.f[t]},Rv.prototype.getControl=Rv.prototype.ye,Rv.prototype.o=function(){for(var t in this.f)$t.hasOwnProperty.call(this.f,t)&&this.f[t].D();this.b.forEach((function(t){t.D()})),(t=this.P.parentNode)&&t.removeChild(this.P),F.prototype.o.call(this),delete this.P},Rv.prototype.capture=function(t,e,n,r){var i=this.ye("scalebar"),o=t.getContext("2d"),a=t.width,s=t.height,l=this.c.m,u=5+(l?l.L().childNodes[1].offsetHeight:0);i&&i.qc()?i.capture(e,(function(r){o.drawImage(r,a-r.width-5*e,s-r.height-u*e),n(t)}),r):n(t)},Rv.prototype.capture=Rv.prototype.capture,Rv.createDefault=function(t,e,n){var r=t.f.type;if(n=new Rv(t,{unitSystem:Vu.METRIC,zoom:{alignment:"right-bottom"},mapsettings:Uv(r,e,t.g),scalebar:{alignment:"bottom-right"},locale:n||"en-US"}),r===ik.P2D){var i=n.ye("mapsettings"),o=function(){if(i.Wb()){var n=Uv(r,e,t.g);vv(i,n.baseLayers,n.layers)}};t.addEventListener(t.A.gf,o),n.ob((function(){t.removeEventListener(t.A.gf,o)})),i.ob((function(){t.removeEventListener(t.A.gf,o)}))}return n},u(Wv,Hu),t("H.ui.Overview",Wv),Wv.prototype.rd=function(t){return this.b.rd(t),this},Wv.prototype.setBaseLayer=Wv.prototype.rd,Wv.prototype.g=function(t){t.target.getState()===vu.DOWN?(Yv(t=this.b,!0),t.yi(),t.Ga("H_overview_active"),t.b.addEventListener("mapviewchange",t.yi,!1,t)):Zv(this.b)},Wv.prototype.U=function(t,e){Hu.prototype.renderInternal.call(this,t,e),this.f.L().style.float=this.Hc.match("right")?"right":"left",this.b.Ea(this.map),this.f.ec(this.va().translate("minimap"))},Wv.prototype.renderInternal=Wv.prototype.U,Wv.prototype.o=function(){this.b.D(),Y.prototype.o.call(this)},u(Xv,Hu),Xv.prototype.rd=function(t){this.f.rd(t)},Xv.prototype.U=function(t,e){pu(t,e=ou(e,"div","H_overview_map")),this.g=e},Xv.prototype.renderInternal=Xv.prototype.U,Xv.prototype.renderInternal=Xv.prototype.U,p=Xv.prototype,p.kl=3,p.vk=5,p.wk=5,p.Ea=function(t){this.b=t,this.f=new V(this.g,this.j,{pixelRatio:this.b.Ua(),engineType:this.b.f.type}),this.f.m.L().style.display="none",this.m=this.f.c,this.i=this.b.c},p.yi=function(t){t&&t.modifiers&t.SIZE&&Yv(this,!0),(t=this.i.gb()).zoom-=this.kl,this.m.Qb(t)},p.o=function(){Xv.l.o.call(this),Zv(this),this.f.D(),this.f=this.m=this.i=this.b=this.j=this.g=null},t("H.ui.buildInfo",(function(){return Hf("H-ui","1.38.0","8be3148",{region:"row"})})),u($v,wm);var aw=0;function bw(t,e){e=e||{},C(t,rl,bw,0),bw.l.constructor.call(this,t),this.jc=!!e.jc,this.c=e.cb||0,this.a=[],this.b={}}$v.prototype.T=function(t,e,n,r,i,o){var a=yd(r),s=this.bb,l=a+(n.exp-s.pixelProjection.exp),u=s.min,c=s.max;r=s.tileSize;var h=s.ka().g,p=this.ib,f=p.Oc(),d=p.sb().w,y=n.w,g=n.x,v=n.y,m={};if(a<u||a>c)return uk.DONE;for(t=(i=s.requestTiles(t,l,i,o,this.f)).total,o=(i=i.tiles).length,this.g=n,this.j=e,this.a=l,f!==h&&p.dc(h),n=r=r*y/(Ed(2,l)*r),this.c||(r%1&&(g/=y=n/(r=zd(r)),v/=y,y=Ed(2,l)*r),g=zd(g),v=zd(v)),this.i=n,l=-r,a=d+r,s=0;s<o;s++){if((u=(d=i[s]).data)&&u.tagName){for(n=e.x-(g-d.x*r),h=e.y-(v-d.y*r),p.Jc(u,n,h,r,r),f=n;(f-=y)>l;)p.Jc(u,f,h,r,r);for(f=n;(f+=y)<a;)p.Jc(u,f,h,r,r)}m[this.a+"_"+d.x+"_"+d.y]=d}return this.b=m,o===t?uk.DONE:uk.PENDING},$v.prototype.Ba=function(t,e,n){var r,i=this.i,o=i/this.bb.tileSize,a=this.g,s=this.j;if(uc(this.a)&&a){t=a.x+(t-s.x),e=a.y+(e-s.y);var l=zd(a.w/i),u=a=zd(t/i);s=zd(e/i),Bd(u)>=l&&(u%=l),0>u&&(u=l+u),(l=this.b[this.a+"_"+u+"_"+s])&&l.Ba&&(r=l.Ba((t-i*a)/o,(e-i*s)/o,n))}return r||hf},$v.prototype.Pd=function(){return"2d"},u(bw,wm),bw.prototype.T=function(t,e,n,r,i,o){var a,s,l=this.bb;r-=this.c,this.a.length=0;var u=this.b;if(this.b=a={},r>=l.min&&r<=l.max){var c=l.pd(t,r,i,o),h=c.overlays;if(t=h.length)for(h.sort(ph),r=this.ib,i=this.jc,o=0;o<t;o++){var p=(l=h[o]).J(),f=n.fb(p.Ib()),d=n.fb(p.Eb());p=n.w,f.x>=d.x&&(f.x-=p),p=-((f.x+d.x)/p>>1)*p,f.x+=p,f.add(e),d.x+=p,d.add(e),i||(f.round(),d.round()),(p=u[s=l.$a()])?delete u[s]:p={Tn:l},a[s]=p;var y=f.x;f=f.y;var g=d.x,v=g-y,m=(d=d.y)-f;r.dc(l.Oc()),r.Jc(l.Lc(),y,f,v,m),p.Pg?p.Pg.set(y,f,g,d):p.Pg=new wk(y,f,g,d),this.a.push(p)}}return!c||c.requested&&c.requested===c.total||!c.requested&&h.length===c.total?uk.DONE:uk.PENDING},bw.prototype.Ba=function(t,e,n){for(var r,i,o=this.a,a=o.length;a--;)if((r=o[a]).Pg.qf(t,e))if(r=r.Tn,i)i.push(r);else if(i=[r],n)break;return i||hf},bw.prototype.Pd=function(){return"2d"},bw.prototype.o=function(){delete this.a,bw.l.o.call(this)},bw.prototype.disposeInternal=bw.prototype.o;var cw={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:0},incline:{min:0,max:0},heading:{min:180,max:180}},interaction:{ZOOM:Hl.ZOOM,COORD:Hl.COORD},capture:!0};function dw(t,e){this.a=[],dw.l.constructor.apply(this,arguments)}function Z(t,e,n,r){Z.l.constructor.call(this,t,e,n,r),this.K=new G(0,0),(n=r.renderBaseBackground)&&(this.Mn=n.lower,this.Ln=n.higher),this.xn=!!r.enableSubpixelRendering,this.Zc=ew,this.vf=0,this.Cd=this.ue=!1,this.g=new im,this.a=r=new qm,this.ad=A(this.ad,this),r.addEventListener(r.A.vg,this.ad),this.Aa=A(this.Aa,this),r=t.element,this.oa=t=r.ownerDocument.createElement("div"),t.style.position="absolute",t.style.width=t.style.height="100%",t.style.zIndex=0,r.insertBefore(t,r.firstChild),this.Lj=new Nm(this.oa,this.na),this.s=[],fw(this),this.Ch=A(Z.prototype.Ch,this),this.V=gw,this.eg(),this.zoom=hw(this,this.v.kb()+this.cb),this.zb(),iw(this,e.gb().position,this.zoom),this.Wa(),this.ea()}t("H.map.render.p2d.capabilities",cw),u(dw,Am),p=dw.prototype,p.kj=function(){return this.bb.yc.apply(this.bb,arguments)},p.T=function(t,e,n,r,i,o,a){return this.a=[],dw.l.T.apply(this,arguments)},p.bk=1,p.Gk=function(t,e,n,r,i,o){var a=this.bk=r.Ua();i*=a,o*=a;var s=n.sb();e=s.w*a,s=s.h*a;var l=n.fd();this.jc?(i-=l.x*a,o-=l.y*a):(i=yd(i-l.x*a),o=yd(o-l.y*a)),r.Jc(n.Lc(),i,o,e,s),t.detail?t.detail.set(i,o,i+e,o+s):t.detail=new wk(i,o,i+e,o+s),this.a.push(t)},p.Ba=function(t,e,n){for(var r,i,o,a=this.a,s=a.length,l=hf,u=this.bk;s--&&!((i=(r=a[s]).detail).qf(t,e)&&(r=r.kk,(!(o=r.rb().c)||o.If((t-i.left)/u,(e-i.top)/u,0))&&0>l.indexOf(r)&&(l===hf&&(l=[]),l.push(r),n))););return l},p.Pd=function(){return"2d"},p.o=function(){this.a=[],dw.l.o.call(this)},dw.prototype.disposeInternal=dw.prototype.o,u(Z,Dl),t("H.map.render.p2d.RenderEngine",Z),Z.prototype.type=Nl.P2D;var gw=2;function jw(t,e,n){return Bd(e=n-e)<t.b.w/2?e:e-t.b.w*n/Bd(n)}function fw(t){var e=t.c.Ha(),n=0,r=e.length;for([t.N={},t.u={},t.ra={},t.Y={}].forEach((function(t){t.Ic=[],t.ha=[]})),t.Rb=t.c.Ha();n<r;n++)t.Le(n,e[n]);t.zb()}function sw(t){var e=[];return(e=(e=(e=(e=e.concat(t.u.ha)).concat(t.N.ha)).concat(t.ra.ha)).concat(t.Y.ha)).filter(uc)}function mw(t,e){var n=Jl(t,Jl(t,e.zoom)+t.cb);return(t=Kl(t,e)).zoom=n,t}function iw(t,e,n){var r=t.b;r.Ka(n),t.m=r.projection.Kc(e),r.x=r.w*t.m.x,r.y=r.h*t.m.y}function rw(t){return{w:(t=t.ua[2]).right-t.left,h:t.bottom-t.top}}function tw(t){t.i&&t.i.qa()||Jk()-t.Yj<t.Zc&&!t.yd?t.Un=Hk(t.Ch):(t.yd&&(t.$d(),uw(t)),t.V=gw)}function uw(t,e){t.dispatchEvent({type:t.A.Oi,target:e||t})}function yw(t,e,n){ow(t,e*t.na,n*t.na),t.K.set(0,0),t.Wa(),t.fa()}function ow(t,e,n){var r=t.b;t=t.m,r.x=Xd(r.x+e,r.w),r.y=xd(0,wd(r.w,r.y+n)),t.x=r.x/r.w,t.y=r.y/r.h}function pw(t,e,n,r){var i=t.na,o=t.f.center;n===+n&&r===+r?(n=(n-o.x)*i,r=(r-o.y)*i,t.K.set(n,r),ow(t,n,r),t.b.Ka(e),ow(t,-n,-r)):(t.K.set(0,0),t.b.Ka(e)),t.zoom=e,t.Wa(),t.fa()}function kw(t,e,n,r){var i=t.getCapabilities().lookAt.zoom.max,o=e.Za(),a=r||o;if(e.Kf()||n&&r)n=n===B?i:n;else{var s=new lj(t.b.projection);s.Ka(i);var l=s.fb(e.Ib()).round(),u=s.fb(e.Eb()).round();i=s.w,e.vb()&&(l.x-=i),r?(o=s.fb(a),e=2*xd(o.x-l.x,u.x-o.x),l=2*xd(o.y-l.y,u.y-o.y)):(e=u.x-l.x,l=u.y-l.y,a=o),n===B&&(n=(o=t.ua[4]).right-o.left,o=o.bottom-o.top,n=Jl(t,n=-8+wd(Cd(n/e*i)/Md,Cd(o/l*i)/Md)-t.cb))}return{zoom:zd(n),position:a}}function lw(t){qw(t,!0),t.a.qa()&&t.pb(!0),t.g.qa()&&t.qb(!0),qw(t,!0)}function zw(t,e){if(e){var n={};n.Pe=e.power,n.re=e.ease,n.duration=e.duration,t.j=n}}function hw(t,e){return Jl(t,Jl(t,e-t.cb)+t.cb)}function Bw(t,e){var n=t.m,r=t.b.projection.Kc(e.position),i=t.b.Xd(r),o=i.y;i=i.x;var a=e.zoom;e=(n=t.b.Xd(n)).y;var s=n.x;n=t.zoom;var l=t.a.tb(),u=t.a.a,c=t.a.b,h=0;if(i=jw(t,s,i),e=Dd((i-=s)*i+(o-=e)*o+(n=a-n)*n),0!==l&&0!==e){var p=i/e,f=o/e,d=n/e,y=l*l/(2*e);nw(t,(function(e,n){var i;1!==e?((i=d*(n=(e=l*n-y*n*n/2)-h))&&(i=hw(t,t.zoom+i),pw(t,hw(t,i),u,c)),yw(t,yd(p*n),yd(f*n)),h=e):(t.m=r,pw(t,hw(t,a),u,c),t.Wa(),t.fa())}),2*e/l)}}function Aw(t,e,n){n=n||0,e.c&&pw(t,hw(t,t.zoom+e.c*n),t.a.atX,t.a.atY),yw(t,e.a*n,e.b*n)}function nw(t,e,n,r,i){t.i&&t.i.qa()&&t.i.stop(!0),t.i=new zm(t,e,n,r,i),t.i.start()}function qw(t,e){t.i&&t.i.qa()&&t.i.stop(e)}Z.prototype.getState=function(){return this.V},Z.prototype.getState=Z.prototype.getState,Z.prototype.Gg=function(t){var e=this,n=t.b,r=t.newValue,i=t.modifiers;t=r.position;var o,a=r.bounds,s=this.zoom,l=this.m,u=0;if(i&cj.POSITION&&(o=e.b.fb(t)),i&cj.BOUNDS)r=kw(this,a.J(),i&cj.ZOOM?r.zoom:B,i&cj.POSITION?t:B),this.v.Qb(r,n);else{i&cj.POSITION||(o=e.b.fb(r.position));var c=o.x,h=o.y;lw(this),this.K.set(0,0);var p=(r=mw(this,r)).zoom,f=r.position;if(n){var d=p-s,y={x:l.x,y:l.y};n=this.b.Xd(y).x;var g=this.b.projection.Kc(t);g.x===this.m.x&&g.y===this.m.y&&p===this.zoom||(c=jw(this,n,c),nw(this,(function(t){var n=t-u;if(p!==s){o=e.b.Xd(g);var r=e.b.Xd(y);c=jw(e,r.x,o.x),h=o.y-r.y}u=t,ow(e,c*n,h*n),pw(e,s+=d*n),e.Wa(),e.fa()}),this.ya,(function(){iw(e,f,p),pw(e,p),e.Wa(f),e.fa()}),this.Ya))}else qw(this),iw(this,f,p),pw(this,p),this.Wa(f);this.fa()}},Z.prototype.ya=300,Z.prototype.ig=function(t){var e=Dc(t);if(!e||e&&0>t)throw new D(this.ig,1,"positive number required");this.ya=t},Z.prototype.setAnimationDuration=Z.prototype.ig,Z.prototype.Ug=function(){return this.ya},Z.prototype.getAnimationDuration=Z.prototype.Ug,Z.prototype.Ya=Zl,Z.prototype.jg=function(t){if(!Da(t))throw new D(this.jg,1,"function required");this.Ya=t},Z.prototype.setAnimationEase=Z.prototype.jg,Z.prototype.Vg=function(){return this.Ya},Z.prototype.getAnimationEase=Z.prototype.Vg,Z.prototype.eg=function(){this.Ya=Zl,this.ya=300},Z.prototype.resetAnimationDefaults=Z.prototype.eg,Z.prototype.Qh=function(t,e,n){var r;this.Yj=Jk(),(r=this.N.ha.splice(t,1)[0])&&r.D&&r.D(),(r=this.u.ha.splice(t,1)[0])&&r.D&&r.D(),(r=this.ra.ha.splice(t,1)[0])&&r.D&&r.D(),(r=this.Y.ha.splice(t,1)[0])&&r.D&&r.D(),this.Rb=this.c.Ha(),0===t&&(Il(this,e,!1),this.zb()),this.s=Om(this.Lj,rw(this),sw(this)),this.$d(),n||this.fa()},Z.prototype.Rh=function(){this.zb(),this.fa()},Z.prototype.mh=function(t,e,n){var r,i,o,a;if(e){var s={jc:this.xn,cb:this.cb};e.T?C(e,ym)?i=new xm(e):C(e,Km)&&(a=new xm(e)):(e.requestOverlays&&(r=new bw(e,s)),e.requestTiles&&(i=new $v(e,s)),e.requestMarkers&&(o=new dw(e,s)),e.requestDomMarkers&&(a=new Dm(e,s)))}n=n||0,this.N.ha.splice(t,n,r),this.u.ha.splice(t,n,i),this.ra.ha.splice(t,n,o),this.Y.ha.splice(t,n,a),this.Rb=this.c.Ha(),this.s=Om(this.Lj,rw(this),sw(this))},Z.prototype.Ra=function(t,e){var n=this.f.center,r=this.na;return this.b.La((t-n.x)*r,(e-n.y)*r)},Z.prototype.screenToGeo=Z.prototype.Ra,Z.prototype.hg=function(t,e){return t=this.Ra(t,e),(e=this.v.gb()).position=t,e},Z.prototype.Aa=function(t){var e=this.na,n=this.f.center,r=n.x*e;n=n.y*e,t=this.b.fb(t);var i=this.b.w;return new G(yd((t.x-yd(t.x/i)*i+r)/e),yd((t.y+n)/e))},Z.prototype.geoToScreen=Z.prototype.Aa,Z.prototype.J=function(t,e){var n=this.ua[t||4];t=this.b;var r=n.left-e,i=t.La(r,n.top-e),o=n.right+e;return e=t.La(o,n.bottom+e),o-r>=t.w&&(i.lng=-(e.lng=180)),sg(i,e)},Z.prototype.Ba=function(t,e,n,r){var i,o=[],a=this.na;for(t*=a,e*=a,i=(a=[this.N,this.u,this.ra,this.Y]).length;i--&&(!n||!o.length);){for(var s=o,l=a[i].ha,u=t,c=e,h=n,p=l.length;p--&&!((o=l[p])&&o.Ba&&(s=s.concat(o.Ba(u,c,h)),s.length&&h)););o=s}r(o)},Z.prototype.getObjectsAt=Z.prototype.Ba,Z.prototype.Gc=y,Z.prototype.ea=function(){var t,e=this.s.length;Z.l.ea.call(this);var n=rw(this);this.K.set(0,0);var r=n.w;for(t=n.h;e--;){var i=(n=this.s[e]).sb();i.w===r&&i.h===t||n.Ze(r,t)}this.Gc=new Ui(r,t),this.fa()},Z.prototype.getCapabilities=function(){return cw},Z.prototype.getCapabilities=Z.prototype.getCapabilities,p=Z.prototype,p.$d=function(){this.N.Ic.length=0,this.u.Ic.length=0,this.ra.Ic.length=0,this.Y.Ic.length=0},p.Ch=function(){var t;this.B&&this.B.before();var e=this.u.ha,n=this.f.center.clone().scale(this.na).round(),r=this.J(1,0),i=this.J(1,vw),o=this.zoom,a=o-this.cb,s=this.b,l=this.Mn,u=this.Ln,c=e[0];e=this.K;var h=this.s.length,p=this.Rb;for(t=p.length;h--;){var f=this.s[h];C(f,vm)&&f.clear()}if(c){if(l)for(;l;)h=o-l,c.T(r,n,s,h,!0,e),--l;if(u&&this.Cd)for(f=1;f<=u&&(h=o+f,s.Ka(h),l=this.J(2,0),s.Ka(o),!c.T(l,n,s,h,!0,e));f++);}for(this.Zc=ew;t--;)C(s=p[t],oj)&&s.ka()&&s.ka().Qe(i,a);r=this.ak(r,n,o,!1,e,ww,this.u,this.N),n=this.ak(i,n,a,!1,e,xw,this.ra,this.Y),this.yd=r&&n,this.i&&this.i.qa()&&this.wg(),this.S||(this.S=this.v.gb()),this.S.bounds=this.J(4,0),this.v.Wa(this.S),this.S=null,this.Gc&&(this.f.Wa(this.Gc),this.Gc=y),o<this.vf?this.Cd=!0:this.ue&&(this.Cd=!1),this.vf=o,this.ue=r,this.B&&this.B.after(),tw(this)},p.ak=function(t,e,n,r,i,o,a){var s,l=Array.prototype.slice.call(arguments,6),u=l.length,c=l[0].ha.length,h=u*c,p=!!h;for(s=0;s<h;s++){if(o===ww)var f=s%u,d=Math.floor(s/u);else f=Math.floor(s/c),d=s%c;var y=l[f].ha[d];f=l[f].Ic,y&&((y=y.T(t,e,this.b,n,r,i,this.Aa))===uk.ACTIVE&&(this.Zc=1/0),y!==uk.DONE||f[d]||(uw(this,this.Rb[d]),f[d]=!0),f[d]||(p=!1))}return p},p.o=function(){var t=this.c.Ha()[0],e=this.f;Ik(this.Un),qw(this,!0),t&&Il(this,t,!1),sw(this).forEach((function(t){t.D()})),e.element&&e.element.removeChild(this.oa),this.oa=null,this.V=3,Z.l.o.call(this)},p.fa=function(){this.Yj=Jk(),this.V===gw&&(this.yd=!1,this.V=1,tw(this))},p.ud=function(t,e,n){pw(this,t=Jl(this,Jl(this,t)+this.cb),e,n)},Z.prototype.zoomAt=Z.prototype.ud,Z.prototype.gc=function(t,e){lw(this),zw(this,e),this.g.start(t,!!e)},Z.prototype.startInteraction=Z.prototype.gc,Z.prototype.Yb=function(t,e,n,r,i){var o=!1;this.g.qa()&&(e=this.g.store(t,e,n,r,i),this.g.uc(Hl.COORD)&&(0<hm(t=this.g.Ld())&&(yw(this,-t.x,-t.y),o=!0)),e&&this.g.uc(Hl.ZOOM)&&(t=this.g.wf(),e=this.g.xf(),(e=Cd(Ed(2,this.zoom)*e)/Md)!==this.zoom&&(pw(this,e=hw(this,e),t.x,t.y),o=!0)),o&&this.fa())},Z.prototype.interaction=Z.prototype.Yb,Z.prototype.qb=function(t){var e=this;if(this.g.qa()&&!t){if(this.j){t=this.g.tb();var n=this.g.mc(),r=this.j.duration,i=(this.j.Pe||1)*t,o=new Lm(-i/(0<r?r:1),i);!E(n.x)&&!E(n.y)&&0<i&&e.g.uc(Hl.COORD)&&nw(this,(function(t){i=o.ze(t*r),E(i)||yw(e,yd(-n.x*i),yd(-n.y*i))}),r,void 0,this.j.re)}this.j=null,this.g.clear()}},Z.prototype.endInteraction=Z.prototype.qb,Z.prototype.fc=function(t,e,n){lw(this),this.a.start(e,n),zw(this,t)},Z.prototype.startControl=Z.prototype.fc,Z.prototype.control=function(t,e,n){if(E(+n))throw new D(this.control,2,n);if(E(t))throw new D(this.control,0,t);if(E(e))throw new D(this.control,1,e);this.a.qa()&&this.a.set(t,e,n,0,0,0)},Z.prototype.control=Z.prototype.control,Z.prototype.pb=function(t,e){var n,r=this;if(this.a.qa()){qw(this,!0);var i=Jk(),o=i-this.Nj;if(1<=o)Aw(this,tm(this.a),o);if(!this.j||t||e)"function"===typeof e&&((t=this.gb()).zoom=this.zoom-this.cb,e(t),t.zoom+=this.cb,Bw(this,t));else{e=this.a.tb();var a=this.a.mc(),s=this.j.duration,l=(this.j.Pe||1)*e,u=new Lm(-l/(0<s?s:1),l);!E(a.a)&&!E(a.b)&&0<l&&nw(this,(function(t,e,o,c){i&&(o=c-i,i=0),l=u.ze(t*s)*o,E(l)||((n=a.c*l)&&pw(r,hw(r,r.zoom+n),r.a.a,r.a.b),yw(r,yd(a.a*l),yd(a.b*l)))}),s,void 0,this.j.re)}this.a.reset()}},Z.prototype.endControl=Z.prototype.pb,Z.prototype.ad=function(t){var e=this,n=t.b;this.K.set(0,0),n.a||n.b||n.c?(this.Nj=Jk(),nw(this,(function(t,r,i,o){e.Nj=o,Aw(e,n,i)}),Number.POSITIVE_INFINITY),this.fa()):qw(this,!0)},Z.prototype.Qg=function(){},Z.prototype.enter=Z.prototype.Qg,Z.prototype.Rg=function(t){Gl(this.oa,t)},Z.prototype.exit=Z.prototype.Rg,Z.prototype.capture=function(t,e,n,r){var i=this.oa.ownerDocument.createElement("canvas"),o=i.getContext("2d"),a=this.na;for(i.width=(n-t)*a,i.height=(r-e)*a,n=0;n<this.s.length;n++)C(r=this.s[n],vm)&&o.drawImage(r.L(),-t*a,-e*a);return Zb(i)};var xw=0,ww=1,ew=1e3,vw=256;function Cw(t){var e;if(t)for(Dw={},e=t.length;e--;)Dw[t[e]]=!0;this.$k={}}var Ew,Dw={};Cw.prototype.parse=function(t,e,n){var r,i,o,a,s;Ew=!1;try{n=JSON.parse(n)}catch(c){Ew=!0}if(n&&(r=n.metadata)){var l={spatials:[]};for(i in r)if((n=!Dw[i]&&(o=Fw[i]))&&((a=r[i])||(Ew=!0,a=void 0),n=a),n)for(n=a.length;n--;){var u;(u=a[n])||(Ew=!0,u=void 0),(s=u)&&o(e,t,this,i,s,l)}}else Ew=!0;return Ew?void 0:l},Cw.prototype.parse=Cw.prototype.parse;var Fw={"street labels":function(t,e,n,r,i,o){var a;if((a=i.vertices)||(Ew=!0,a=void 0),a){var s,l,u=a.length;if((l=0<u)||(Ew=!0,l=void 0),l)for(s=Array(u/2);u;){var c=a[--u];l=a[--u],s[u/2]=new G(l,c)}s=s?{a:[s]}:B,u=+i["font size"]/t.Ua(),(a=n.$k[u])||(Gw.lineWidth=u,a=n.$k[u]=n.Bd.nj(Gw)),Hw(t,e,s,!1,a,i,r,o)}delete i.vertices},"city center labels":function(t,e,n,r,i,o){Hw(t,e,Iw(i,new Mh([])),!0,n.Bd,i,r,o)},labels:function(t,e,n,r,i,o){var a;if((a=i["bounding boxes"])||(Ew=!0,a=void 0),a){for(var s,l=a.length,u=new Mh([]);l--;){var c;(c=a[l])||(Ew=!0,c=void 0),(s=c)&&Iw(s,u)}Hw(t,e,u,!0,n.Bd,i,r,o)}delete i["bounding boxes"]},buildings:function(t,e,n,r,i,o){var a,s,l,u,c=i.id,h=e.ag[c],p=[],f=[];((a=i)||(Ew=!0,a=void 0),a&&((s=a.vertices)||(Ew=!0,s=void 0),s))&&((u=a.polygons)||(Ew=!0,u=void 0),(l=u)&&p.push.apply(p,Jw(s,l)),(a=a.outlines)||(Ew=!0,a=void 0),(l=a)&&f.push.apply(f,Jw(s,l)));l=p.length,p.push.apply(p,f),f=new Mh(p,Ud,l),(p=p.length)||(Ew=!0,p=void 0),p&&(h?(Vq(h,t,[f]),o.spatials.push(h)):(h=Hw(t,e,f,!0,n.Bd,i,r,o,c),e.ba(h)))}};Fw["transit stops"]=Fw.POIs=Fw.labels;var Kw=["box 2","box 1","annotation box","icon box"];function Iw(t,e){for(var n,r,i=Kw.length;i--;)if(r=t[n=Kw[i]]){var o=r[0],a=r[1],s=r[2];r=r[3],e.a.push([new G(o,a),new G(o+s,a),new G(o+s,a+r),new G(o,a+r)]),delete t[n]}return e}function Jw(t,e){var n,r,i,o=e.length;if(0<o)for(r=Array(o);o--;)if((n=e[o])||(Ew=!0,n=void 0),n){var a=n.length;if(0<a)for(r[o]=i=Array(a);a--;){var s=2*n[a];i[a]=new G(t[s],t[s+1])}}return r||[]}var Lw={};function Hw(t,e,n,r,i,o,a,s,l){return Lw.style=i,r=new Rq(e,r,l,Lw),n&&Vq(r,t,[n]),Mw(o),o.category=a,r.setData(o),s.spatials.push(r),r.ia(e),r}Cw.prototype.Bd=new wh({strokeColor:"transparent",fillColor:"transparent",lineWidth:0});var Gw={};function Mw(t){var e,n=!1;switch(typeof t){case"object":if(t instanceof Array)for(e=t.length;e--;)Mw(t[e])?n=!0:delete t[e];else if(t)for(e in t)Mw(t[e])?n=!0:delete t[e];break;case"number":n=!0;break;default:n=!!t}return n}function Nw(t,e,n){e=e||{};var r=(n=n||{}).tileType||"maptile",i=n.scheme||"normal.day";if(T.call(this,{min:0,max:20}),!0===e.pois&&(e.pois="!F"),this.K=e,!(t&&t instanceof Ow))throw Error("InvalidArgument: service required");this.u=t,this.i=A(this.i,this),this.u.addEventListener("versionupdate",this.i),this.B=t.C().clone().F(r+"/"+t.pc()+"/"+i).I(Pw).I(e),this.Y=t.f||null,this.N=n.pixelRatio||n.pixelratio||Te(),this.tileSize=n.tileSize||256,this.tileType=r,this.scheme=i,this.c=new ar(new Cw(n.categoryFilter)),this.c.ia(this),this.v=A(this.v,this),this.c.addEventListener("update",this.v),T.call(this,{min:0,max:20}),this.s(new Pk(n.tileCacheSize||256,A(this.V,this)))}u(Nw,T),t("H.service.metaInfo.TileProvider",Nw),Nw.prototype.V=function(t,e){for(var n,r=(t=e.Pa()).length;r--;)delete(n=t[r]).a[e.key],n.release();e.data&&(vp.push(e.Zf(),this.tileSize),e.$f())},Nw.prototype.v=function(){this.dispatchEvent("update")},Nw.prototype.G=function(t,e,n,r,i){var o,a=this.B.clone(),s=this.Y,l=this.tileSize,u=this.getTileKey(t,e,n);if((u=this.Fb().get(u))&&!u.Sd()){r(vp.pop(this.tileSize),null);var c={cancel:function(){}}}else{s&&a.za(s[(n+e+t)%s.length]),a.F(n+"/"+t+"/"+e+"/"+l+"/png8");var h=tp.setTimeout((function(){(o=new tf("text/plain",a.toString())).then((function(t){r(null,t)}),i)}),500)}return c||{cancel:function(){o?o.cancel():tp.clearTimeout(h)}}},Nw.prototype.requestInternal=Nw.prototype.G,Nw.prototype.Vb=function(t,e,n,r,i){var o=this.c,a=r||vp.pop(this.tileSize);if(r)(t=this.Fb().get(this.getTileKey(t,e,n))).T(r);else if(delete(r=t=new Zk(this.hd(t,e,n),t,e,n,this.tileSize,this.N,n,o)).j,r.m=i,t.T(a))for(a=(i=t.Pa()).length;a--;)i[a].gg();else vp.push(a,this.tileSize);return t},Nw.prototype.createTileInternal=Nw.prototype.Vb,Nw.prototype.D=function(){this.c.D(),this.u.removeEventListener("versionupdate",this.i),T.prototype.D.call(this)},Nw.prototype.dispose=Nw.prototype.D,Nw.prototype.i=function(){var t=this.u;this.B=t.C().clone().F(this.tileType+"/"+t.pc()+"/"+this.scheme).I(Pw).I(this.K),this.reload(!1)};var Pw={metadata:"metaonly",mgen:"2"};function Ow(t){Ow.l.constructor.call(this,Ow,t),t=Wp(this,t),this.f=t.shards,(this.b=t.ignoreTypes?null:t.type)&&this.C().za(this.b),this.c=t.version,this.j=new dq,"newest"===this.c&&Qw(this)}function Rw(t,e){for(var n={},r=t[e+"s"][e],i=r.length;i--;)n[r[i].id]=r[i];t[e+"s"]=n}function Qw(t){var e=t.C().clone().F("info").I({output:"json"});t.f&&e.za(t.f[0]),t.G(e,(function(e){var n;if(Rw(e=e.response,"map"),Rw(e,"scheme"),Rw(e,"tiletype"),Rw(e,"format"),Rw(e,"resolution"),Rw(e,"language"),"newest"===t.c&&"traffic"!==t.b)for(n in e.maps)e.maps[n].hash&&e.maps[n].newest&&(t.c=e.maps[n].hash,t.dispatchEvent("versionupdate"));t.m=e,t.dispatchEvent("infoupdate")}),(function(t){throw t}))}u(Ow,Vp),t("H.service.metaInfo.Service",Ow),Ow.prototype.Ia=function(){return{type:"base",version:"newest",subDomain:"maps.ls",path:"maptile/2.1",shards:["1","2","3","4"]}},Ow.CONFIG_KEY="metaInfo",Ow.prototype.Gj=function(){return this.b},Ow.prototype.pc=function(){return this.c},Ow.prototype.getVersion=Ow.prototype.pc,Ow.prototype.ca=function(){return this.j},Ow.prototype.getCopyrights=Ow.prototype.ca,Ow.prototype.Be=function(){return this.m},Ow.prototype.getInfo=Ow.prototype.Be,Ow.prototype.qe=function(t,e,n,r,i,o){return new Nw(this,r,{tileSize:t,pixelRatio:e,categoryFilter:n,tileType:i,scheme:o})},Ow.prototype.createTileProvider=Ow.prototype.qe,Ow.prototype.ic=function(t,e,n,r,i,o){return new ql(this.qe(t,e,n,r,i,o))},Ow.prototype.createTileLayer=Ow.prototype.ic,X.prototype.wj=function(t){return this.Ma(Ow,t)},X.prototype.getMetaInfoService=X.prototype.wj,function(){var t=X.prototype.createDefaultLayers;X.prototype.createDefaultLayers=function(e,n,r,i,o,a){var s=t.call(this,e,n,r,i,o,a),l={},u=this.wj();"object"===typeof e&&(e=(a=e).tileSize,n=a.ppi,r=a.lg,i=a.lg2,o=a.style,a=a.pois),e=e||256;var c=320===n?2:1;if(0>[72,250,320,500].indexOf(+n)){if(n!==B)throw new D(this.rf,1,n)}else l.ppi=+n;return r&&(l.lg=r),i&&(l.lg2=i),o&&(l.style=o),a&&(l.pois=a),s.raster.normal.metaInfo=u.ic(e,c,["buildings"],l),s}}(),H.__bootstrap__='var l,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}var ea;\nif("function"==typeof Object.setPrototypeOf)ea=Object.setPrototypeOf;else{var fa;a:{var ha={lb:!0},ja={};try{ja.__proto__=ha;fa=ja.lb;break a}catch(a){}fa=!1}ea=fa?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ka=ea;ca("Object.setPrototypeOf",function(a){return a||ka});var p=this||self;\nfunction la(a,b,c){a=a.split(".");c=c||p;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}function ma(){}\nfunction na(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";\nelse if("function"==b&&"undefined"==typeof a.call)return"object";return b}function r(a){return"function"==na(a)}function oa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var pa="closure_uid_"+(1E9*Math.random()>>>0),ra=0;function sa(a,b,c){return a.call.apply(a.bind,arguments)}\nfunction ta(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function ua(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ua=sa:ua=ta;return ua.apply(null,arguments)}\nfunction va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function t(a,b){la(a,b,void 0)}function wa(a,b){function c(){}c.prototype=b.prototype;a.U=b.prototype;a.prototype=new c;a.prototype.constructor=a};function v(){}t("H.util.ICache",v);v.prototype.add=function(){};v.prototype.add=v.prototype.add;v.prototype.get=function(){};v.prototype.get=v.prototype.get;v.prototype.sa=function(){};v.prototype.drop=v.prototype.sa;v.prototype.forEach=function(){};v.prototype.forEach=v.prototype.forEach;v.prototype.S=function(){};v.prototype.removeAll=v.prototype.S;v.prototype.aa=function(){};v.prototype.registerOnDrop=v.prototype.aa;v.prototype.qa=function(){};v.prototype.deRegisterOnDrop=v.prototype.qa;function xa(){var a=ya,b;for(b in a)return!1;return!0}function za(a){var b={},c;for(c in a)b[c]=a[c];return b}var Aa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ba(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Aa.length;f++)c=Aa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Ca=this;function Da(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Da);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}wa(Da,Error);Da.prototype.name="CustomError";var Ea=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var Fa=ua,Ga=String,Ha=Ca.Object.freeze||function(a){return a},x=[].pop(),Ia=/x/.exec("");function Ja(a){return Ga(a).split(","!==x?",":" ")}var Ma="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Na(a,b,c,d){if(!(b=a instanceof b)&&c)throw new y(c,d,void 0!==x?void 0:a);return b}function Oa(a,b,c,d){var e;if(!(e="Array"===Pa(a))&&b)throw new y(b,c,d!==x?d:a);return e}\nt("H.lang.isArray",function(a,b,c,d){return Oa(a,b,c,d)});function Qa(a){return"string"===typeof a}t("H.lang.isString",Qa);var Ra=isNaN;function Sa(a){return a===+a}t("H.lang.isNumber",Sa);t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(a){return"number"===typeof a&&0===a%1});function Pa(a){var b=Object[Ma[0]][Ma[6]].call(a).match(/^\\[object (\\w+)\\]$/);return b?b[1]:typeof a}var Ta=[];0>Ta.indexOf(Ta)&&Ta.push(Ta);\nfunction Ua(a,b,c,d){var e="",f=2>arguments.length,g;f&&(b={H:Ca.H},c="",d=Ta.slice());Va(b,!0,function(h,k){try{if(g=h[k],k=Wa(h,g),!(oa(g)&&g.window===g&&g.self===g||oa(g)&&0<g.nodeType&&r(g.cloneNode))&&oa(g)){if(g===a)return e=c+"."+k,!0;if(0>d.indexOf(g)&&(d.push(g),e=Ua(a,g,c+"."+k,d)))return!0}}catch(m){}});f&&(e=e?e.substr(1).replace("."+Ma[0]+".","#"):"~"+(r(a)?Xa(a)+"()":Pa(a)));return e}\nfunction Wa(a,b){var c=[];Va(a,!1,function(d,e){d[e]===b&&c.push(e)});return c.sort(Ya)[0]}function Ya(a,b){return b.length-a.length}var Za=Object[Ma[0]][Ma[2]];function Va(a,b,c){var d;if(a){for(e in a)if((!b||Za.call(a,e))&&c(a,e,!0))return;for(d=Ma.length;d--;){var e=Ma[d];if((!b||Za.call(a,e))&&c(a,e,!1))break}}}function Xa(a){return(a=/^\\s*function ([^\\( ]+)/.exec(a))?a[1]:"anonymous"}function $a(a,b,c){c[b]="#"+b};function A(a,b,c){this.g=[];b&&this.aa(b);if(c&&!r(c))throw new y(A,2,c);this.b=0;this.filter=c;this.a={};this.f=this.c=null;this.Ha(a)}t("H.util.Cache",A);A.prototype.add=function(a,b,c){var d,e;c=+c;if(!Sa(c)||0>c)throw new y(this.add,2,c);a=String(a);if(e=this.filter?this.filter(a,b,c):!0)(d=this.a[a])?(d.data!==b&&ab(this,d),this.b+=c-d.size,d.size=c,d.data=b,eb(this,d)):this.a[a]=fb(this,{id:a,data:b,size:c,m:null,C:null},this.c),gb(this);return e};A.prototype.add=A.prototype.add;\nA.prototype.aa=function(a){if(!r(a))throw new y(this.aa,0,a);this.g.push(a)};A.prototype.registerOnDrop=A.prototype.aa;A.prototype.qa=function(a){this.g=this.g.filter(function(b){return b!==a})};A.prototype.deRegisterOnDrop=A.prototype.qa;A.prototype.get=function(a,b){return(a=b?this.a[a]:eb(this,this.a[a]))&&a.data};A.prototype.get=A.prototype.get;A.prototype.sa=function(a){var b;(b=this.a[a])&&hb(this,b,!0)};A.prototype.drop=A.prototype.sa;\nA.prototype.forEach=function(a,b,c){var d;for(d in this.a){var e=this.a[d];(c?c(d,e.data,e.size):1)&&a.call(b,d,e.data,e.size)}};A.prototype.forEach=A.prototype.forEach;A.prototype.S=function(a){var b;for(b in this.a){var c=this.a[b];(a?a(b,c.data,c.size):1)&&hb(this,this.a[b],!0)}};A.prototype.removeAll=A.prototype.S;A.prototype.Ha=function(a){if(!(0<+a))throw new y(A.prototype.Ha,0,a);this.i=+a;gb(this);return this};A.prototype.setMaxSize=A.prototype.Ha;A.prototype.Bb=function(){return this.i};\nA.prototype.getMaxSize=A.prototype.Bb;A.prototype.xb=function(){return this.b};A.prototype.getCurrentSize=A.prototype.xb;function eb(a,b){b&&(a.c=fb(a,b,a.c));return b}function gb(a){for(;a.b>a.i&&a.f;)hb(a,a.f,!0)}function fb(a,b,c){if(c!==b){(b.m||b.C)&&hb(a,b,!1);if(b.m=c)b.C=c.C,c.C=b;b.C||(a.c=b);b.m||(a.f=b);a.b+=b.size}return b}function hb(a,b,c){var d=b.C,e=b.m;if(d||e||b==a.c&&b==a.f)d?d.m=e:a.c=e,e?e.C=d:a.f=d,a.b-=b.size,c&&(delete a.a[b.id],ab(a,b));b.m=b.C=null}\nfunction ab(a,b){for(var c=a.g.length;c--;)a.g[c].call(a,b.id,b.data,b.size)};function B(){}t("H.service.extension.dataView.ITable",B);B.prototype.xa=function(){};B.prototype.getMeta=B.prototype.xa;B.prototype.ya=function(){};B.prototype.getRowCount=B.prototype.ya;B.prototype.ga=function(){};B.prototype.getRow=B.prototype.ga;B.prototype.A=function(){};B.prototype.getColumnNames=B.prototype.A;B.prototype.wa=function(){};B.prototype.getColumn=B.prototype.wa;B.prototype.l=function(){};B.prototype.getCell=B.prototype.l;B.prototype.concat=function(){};B.prototype.concat=B.prototype.concat;function ib(){}t("H.service.extension.dataView.IRow",ib);ib.prototype.A=function(){};ib.prototype.getColumnNames=ib.prototype.A;ib.prototype.l=function(){};ib.prototype.getCell=ib.prototype.l;ib.prototype.za=function(){};ib.prototype.getTable=ib.prototype.za;function jb(a,b){this.a=a;this.b=b}t("H.service.extension.dataView.ObjRow",jb);jb.prototype.A=function(){return this.a.A()};jb.prototype.getColumnNames=jb.prototype.A;jb.prototype.l=function(a){return this.a.l(this.b,a)};jb.prototype.getCell=jb.prototype.l;jb.prototype.za=function(){return this.a};jb.prototype.getTable=jb.prototype.za;function kb(){}t("H.service.extension.dataView.IColumn",kb);kb.prototype.l=function(){};kb.prototype.getCell=kb.prototype.l;function lb(a,b){this.b=a;this.a=b}t("H.service.extension.dataView.ObjColumn",lb);lb.prototype.l=function(a){return this.b.l(a,this.a)};lb.prototype.getCell=lb.prototype.l;function y(a,b,c){var d=arguments.length;b=b!==x?+b:b;if(b!==x){var e=(e=/^.*?\\(([^\\)]+)/.exec((""+a).replace(/(\\/\\*([\\s\\S]*?)\\*\\/)|(\\/\\/(.*)$)/gm,"")))?Ja(e[1].replace(/\\s+/g,"")):[];e.forEach($a);e=e[b]||"#"+b}var f=a?Ua(a):"";d=2<d?Ga(c):"";if(e||d)f+=" (Argument "+(e||"")+(d?" "+d:"")+")";d=Error(f);Object.setPrototypeOf(d,y.prototype);return d}wa(y,Error);t("H.lang.InvalidArgumentError",y);y.prototype.name="InvalidArgumentError";function C(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):x);this.D=a;if(b)for(this.M=b,this.pa=a=Object.create(Ia,void 0),d=b.length;d--;)a[b[d]]=!0;c!==x&&(this.Ca=c)}t("H.service.extension.dataView.ObjTable",C);l=C.prototype;l.Ca=x;l.D=x;l.M=x;l.pa=x;l.xa=function(){return this.Ca};C.prototype.getMeta=C.prototype.xa;C.prototype.ya=function(){return this.D?this.D.length:0};C.prototype.getRowCount=C.prototype.ya;C.prototype.ga=function(a){var b=this.D;return b&&b[a]?new jb(this,a):x};\nC.prototype.getRow=C.prototype.ga;C.prototype.A=function(){return this.M||mb};C.prototype.getColumnNames=C.prototype.A;C.prototype.wa=function(a){return this.pa[a]?new lb(this,a):x};C.prototype.getColumn=C.prototype.wa;C.prototype.l=function(a,b){var c=this.D;return(a=c&&this.pa[b]&&c[a])&&a[b]};C.prototype.getCell=C.prototype.l;\nC.prototype.concat=function(){var a=arguments.length,b,c=this.M,d=""+this.M,e=(this.D||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof C))throw new y(this.concat,b);if(f.D){if(c&&""+f.M!==d)throw new y(this.concat,b,"Incompatible columns!");e=e.concat(f.D)}}return new C(e,this.M,this.Ca)};C.prototype.concat=C.prototype.concat;var D=Math,nb=D.min,ob=D.max,pb=D.round,qb=D.floor,rb=D.ceil,sb=D.abs,tb=D.log,ub=D.sqrt,vb=D.pow,wb=D.exp,xb=D.sin,yb=D.asin,zb=D.cos,Ab=D.tan,Bb=D.atan,Cb=D.atan2,Db=D.LN2,E=D.PI,Eb=E/2,Fb=E/4,Gb=2*E,Hb=3*E,Ib=E/180,Kb=180/E,Lb=1/0;vb(-2,53);function Mb(a,b){var c;return 0>(c=a%b)===0>b?c:c+b}t("H.math.normalize",function(a,b,c){b-=c=c||0;a-=c;return a-qb(a/b)*b+c});function Nb(a,b,c){return a>c?c:a<b?b:a}t("H.math.clamp",Nb);function Ob(a,b,c){return b<c?a>=b&&a<=c:a>=c&&a<=b}\nfunction Pb(a,b,c,d,e,f){return ub(vb((a-e)*(d-f)-(b-f)*(c-e),2)/(vb(c-e,2)+vb(d-f,2)))}var Qb={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};t("H.math.CoverType",Qb);\nfunction Rb(a,b,c){for(var d=c.length,e=d,f,g,h,k,m=c[0],n=0,q=0,u=0;1!=n&&1<e;){g=c[--e];f=c[--e];k=c[e?e-1:(d+(e-1))%d];h=c[e?e-2:(d+(e-2))%d];if(f>=a&&f<=a&&g>=b&&g<=b||h>=a&&h<=a&&k>=b&&k<=b)n=1;else if(!n&&f===a)h===a&&(g<b&&k>b||g>b&&k<b)||(m<=a&&h>a||m>=a&&h<a)&&(g>=b?++q:++u),n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0;else if(!n&&Ob(a,f,h)){if(f<a&&h>a||f>a&&h<a)m=g+(a-f)/(h-f)*(k-g),q+=m>b,u+=m<b;n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0}m=f}!n&&0!==u&&0!==q%2&&(n=3);return n}\nfunction Sb(a,b){return Rb(a.x,a.y,b)!==Qb.NONE}t("H.math.isPointInsidePolygon",Sb);function Tb(a){for(var b=a.length,c=new Float64Array(2*b),d=b&&a[0].x!==x;b--;){var e=a[b],f=b<<1;c[f]=d?e.x:e[0];c[f+1]=d?e.y:e[1]}return c}t("H.math.flatten",Tb);function F(a,b){this.x=+a;this.y=+b}t("H.math.Point",F);F.prototype.set=F;F.prototype.set=F.prototype.set;F.prototype.clone=function(a){a?(a.x=this.x,a.y=this.y):a=new F(this.x,this.y);return a};F.prototype.clone=F.prototype.clone;F.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};F.prototype.add=F.prototype.add;F.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;return this};F.prototype.sub=F.prototype.sub;F.prototype.scale=function(a,b){this.x*=a;this.y*=void 0===b?a:b;return this};\nF.prototype.scale=F.prototype.scale;F.prototype.round=function(){this.x=pb(this.x);this.y=pb(this.y);return this};F.prototype.round=F.prototype.round;F.prototype.floor=function(){this.x=qb(this.x);this.y=qb(this.y);return this};F.prototype.floor=F.prototype.floor;F.prototype.ceil=function(){this.x=rb(this.x);this.y=rb(this.y);return this};F.prototype.ceil=F.prototype.ceil;F.prototype.F=function(a){return!(!a||this.x!==a.x||this.y!==a.y)};F.prototype.equals=F.prototype.F;\nF.prototype.Cb=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=a;if(c||d){var f=((this.x-a.x)*c+(this.y-a.y)*d)/(c*c+d*d);0>=f?e=a:1<=f?e=b:e=new F(a.x+f*c,a.y+f*d)}return e};F.prototype.getNearest=F.prototype.Cb;F.prototype.ra=function(a){return ub(vb(this.x-a.x,2)+vb(this.y-a.y,2))};F.prototype.distance=F.prototype.ra;F.fromIPoint=function(a){if(!a)throw Error("invalid argument");return a instanceof F?a:new F(a.x,a.y)};function Ub(a,b,c,d,e,f){var g,h,k=a.length,m,n;if(k)for(g=[];k--;){var q=a[k];var u=q.length;var I=0;for(m=1;m<u;m++)if(n=Vb(q[m-1],q[m],c,b,d,e)){var L=n[0];var w=n[1];I&&I.F(L)?h.push(w):g.push(h=n);I=w;f&&(m=u,k=0)}}else g=a;return g}t("H.math.clipping.clipStrips",Ub);\nfunction Vb(a,b,c,d,e,f){var g=a.x;a=-a.y;var h=b.x;b=-b.y;c=-c;f=-f;if(g>h){if(h>e||g<d)return;var k=g;var m=a;g=h;a=b;h=k;b=m;k=1}else if(g>e||h<d)return;if(a>b){if(b>c||a<f)return;var n=1;a=-a;b=-b;m=f;f=-c;c=-m}else if(a>c||b<f)return;if(g<d){if((a+=(d-g)*(b-a)/(h-g))>c)return;g=d}if(a<f){if((g+=(f-a)*(h-g)/(b-a))>e)return;a=f}h>e&&(b=a+(e-g)*(b-a)/(h-g),h=e);b>c&&(h=g+(c-a)*(h-g)/(b-a),b=c);n&&(a=-a,b=-b);return k?[new F(h,-b),new F(g,-a)]:[new F(g,-a),new F(h,-b)]}\nfunction Wb(a,b,c){a=Xb(a,!0);b=Xb(b,!1);var d,e;var f={};var g=d=1;switch(~~(c||0)){case 1:g=d=0;break;case 2:d=0;g=1;break;case 3:d=1,g=0}c=d;var h=g;if(b&&a){b.W=new Yb(b.x,b.y,null,Zb(b));a.W=new Yb(a.x,a.y,null,Zb(a));for(g=b;g.next;g=g.next)if(!g.u)for(d=a;d.next;d=d.next)if(!d.u){var k=$b(g.next);var m=$b(d.next);if(e=ac(g,k,d,m,f)){e=f.mb;var n=f.nb;var q=f.ec;var u=f.fc;e=new Yb(q,u,null,null,null,null,!0,0,0,e);bc(e,g,k);k=new Yb(q,u,null,null,null,null,!0,0,0,n);bc(k,d,m);e.Da=k;k.Da=e}}f=\nSb(b,cc(a));c&&(f=!f);for(g=b;g;g=g.next)g.u&&(g.Aa=f,f=!f);f=Sb(a,cc(b));h&&(f=!f);for(d=a;d.next;d=d.next)d.u&&(d.Aa=f,f=!f);dc(b);for(dc(a);(a=ec(b))!=b;){for(c=null;!a.na;a=a.Da){for(f=a.Aa;;){c=new Yb(a.x,a.y,c);c.artificial=a.u||a.Wa;a.na=1;a=f?a.next:a.o;if(!a)break;if(a.u){a.na=1;break}}if(!a)break}c.Za=I||null;var I=c}return I}}t("H.math.clipping.clipPolygon",Wb);\nfunction Yb(a,b,c,d,e,f,g,h,k,m){this.x=a;this.y=b;this.next=c||null;this.o=d||null;this.Za=e||null;this.Da=f||null;this.u=!!g;this.Aa=!!h;this.na=k||0;this.alpha=m||0;d&&(d.next=this);c&&(c.o=this);this.Wa=!1;this.W=null}function $b(a){for(;a&&a.u;)a=a.next;return a}function Zb(a){if(a)for(;a.next;)a=a.next;return a}function ec(a){var b=a;if(b){do b=b.next;while(b!=a&&(!b.u||b.u&&b.na))}return b}function dc(a){var b=Zb(a);b.o.next=a;a.o=b.o}\nfunction ac(a,b,c,d,e){var f,g=b.x-a.x,h=b.y-a.y;var k=d.x-c.x;var m=d.y-c.y;var n=g*m-h*k;if(!n)return 0;k=((c.x-a.x)*m-(c.y-a.y)*k)/n;n=(h*(c.x-a.x)-g*(c.y-a.y))/n;if(0>k||1<k||0>n||1<n)return 0;0===k?f=a:1===k?f=b:0===n?f=c:1===n&&(f=d);if(f)return f.x+=2.480549651603763E-5,f.y+=7.321997314118067E-5,f.W&&(f.W.x=f.x,f.W.y=f.y),ac(a,b,c,d,e);e.ec=a.x+k*g;e.fc=a.y+k*h;e.mb=k;e.nb=n;return 1}function cc(a){for(var b=[];a;)b.push(a.x,a.y),a=a.next;return b}\nfunction bc(a,b,c){for(b=b.next;b!==c&&b.alpha<=a.alpha;)b=b.next;a.next=b;a.o=b.o;a.next.o=a;a.o.next=a}function Xb(a,b){for(var c,d=null,e=0,f=a.length;e<f;e++){c=new Yb(a[e].x,a[e].y,d);c.Wa=b;if(c.next=d)d.o=c;d=c}return d};function fc(a,b){var c=[];a&&c.push(Ua(a));1<arguments.length&&c.push(""+b);c=Error(c.join(" "));Object.setPrototypeOf(c,fc.prototype);return c}wa(fc,Error);t("H.lang.IllegalOperationError",fc);fc.prototype.name="IllegalOperationError";function gc(){this.constructor=this.constructor;if(!Qa("STATIC_DB"))throw new y(this.constructor,0);this.i=hc();if(!this.i)throw new fc(this.constructor,"This browser does not support IndexedDB");this.a=[];this.c=[];this.g=Fa(this.g,this)}var ic,jc;gc.prototype.get=function(a,b,c){var d;if(!Qa(a)&&!Sa(a))throw new y(this.get,0);if(!r(b))throw new y(this.get,1);kc(this,function(e){d=e.get(a);lc(d,b,c)},c);return{cancel:function(){d&&(d.onsuccess=mc)}}};\ngc.prototype.g=function(){var a=this.b.result;a.objectStoreNames.contains("data")||a.createObjectStore("data")};\nfunction nc(a,b,c){if(a.b)a.a?(a.a.push(b),c&&a.c.push(c)):a.f?c&&c(a.f):b(a.b.result);else{a.b=a.i.open("H_STATIC_DB",1);a.b.onupgradeneeded=a.g;var d=a.b.onerror=function(){clearTimeout(a.j);a.f=this.error;a.c.forEach(function(e){e(a.f)});delete a.a;delete a.c};a.j=setTimeout(function(){d.call({error:Error("DbOpenTimeoutError")})},500);a.b.onsuccess=function(){clearTimeout(a.j);a.a?(a.a.forEach(function(e){e(this.result)},this),delete a.a,delete a.c):(delete a.b,delete a.f,a.a=[],a.c=[])};\na.a.push(b);c&&a.c.push(c)}}function kc(a,b,c){nc(a,function(d){d=d.transaction(["data"],"readwrite");b(d.objectStore("data"))},c)}function lc(a,b,c){b&&(a.onsuccess=function(){b(this.result)});c&&(a.onerror=function(){c(this.error)})}t("H.util.IndexedDBStorage.getInstance",function(){ic||(ic=new gc);return ic});function hc(){return Ca.indexedDB||Ca.webkitIndexedDB||Ca.mozIndexedDB||Ca.msIndexedDB}\nt("H.util.IndexedDBStorage.isSupported",function(){var a="";if(jc===x)if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)jc=!1;else{try{var b=hc();a="H_TEST_DB";var c=b&&b.open(a,1)}catch(d){}jc=!!c&&null===c.onupgradeneeded;c&&b.deleteDatabase&&b.deleteDatabase(a)}return jc});function J(){0!=oc&&(pc[this[pa]||(this[pa]=++ra)]=this);this.c=this.c;this.a=this.a}var oc=0,pc={};J.prototype.c=!1;J.prototype.s=function(){if(!this.c&&(this.c=!0,this.v(),0!=oc)){var a=this[pa]||(this[pa]=++ra);if(0!=oc&&this.a&&0<this.a.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass\' method.");delete pc[a]}};\nJ.prototype.L=function(a,b){this.c?void 0!==b?a.call(b):a():(this.a||(this.a=[]),this.a.push(void 0!==b?ua(a,b):a))};J.prototype.v=function(){if(this.a)for(;this.a.length;)this.a.shift()()};function K(a,b){this.type=a;this.currentTarget=this.target=b;this.a=!1;this.ab=!0}K.prototype.stopPropagation=function(){this.a=!0};K.prototype.c=function(){this.ab=!1};t("H.util.Event",K);K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.CAPTURING_PHASE=1;K.prototype.CAPTURING_PHASE=K.prototype.CAPTURING_PHASE;K.prototype.AT_TARGET=2;K.prototype.AT_TARGET=K.prototype.AT_TARGET;K.prototype.BUBBLING_PHASE=3;K.prototype.BUBBLING_PHASE=K.prototype.BUBBLING_PHASE;K.prototype.eventPhase=0;K.prototype.eventPhase=K.prototype.eventPhase;function qc(a,b,c){qc.U.constructor.call(this,a,c);this.data=b}wa(qc,K);t("H.util.DataEvent",qc);function rc(a,b,c){rc.U.constructor.call(this,a,c);this.message=b}wa(rc,K);t("H.util.ErrorEvent",rc);function sc(){}t("H.util.ICancelable",sc);sc.prototype.cancel=function(){};sc.prototype.cancel=sc.prototype.cancel;function tc(a,b){this.c=a;this.f=b;this.b=0;this.a=null}tc.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next;a.next=null}else a=this.c();return a};function uc(a,b){a.f(b);100>a.b&&(a.b++,b.next=a.a,a.a=b)};function vc(){this.b=this.a=null}var xc=new tc(function(){return new wc},function(a){a.reset()});vc.prototype.add=function(a,b){var c=xc.get();c.set(a,b);this.b?this.b.next=c:this.a=c;this.b=c};function yc(){var a=zc,b=null;a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null);return b}function wc(){this.next=this.b=this.a=null}wc.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};wc.prototype.reset=function(){this.next=this.b=this.a=null};var Ac=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(a)[1]};function Bc(a,b){return a<b?-1:a>b?1:0};var Cc;a:{var Dc=p.navigator;if(Dc){var Ec=Dc.userAgent;if(Ec){Cc=Ec;break a}}Cc=""}function M(a){return-1!=Cc.indexOf(a)};function Hc(a,b){this.b=a===Ic&&b||"";this.a=Jc}var Jc={},Ic={},Kc=new Hc(Ic,"");function Lc(a,b){this.b=a===Mc&&b||"";this.a=Nc}var Nc={},Mc={};function Oc(){this.a="";this.b=Pc}function Qc(){var a=Rc;if(a instanceof Oc&&a.constructor===Oc&&a.b===Pc)return a.a;na(a);return"type_error:SafeHtml"}var Pc={};function Sc(a){var b=new Oc;b.a=a;return b}Sc("<!DOCTYPE html>");var Rc=Sc("");Sc("<br>");function Tc(a){var b=new Lc(Mc,Kc instanceof Hc&&Kc.constructor===Hc&&Kc.a===Jc?Kc.b:"type_error:Const");b instanceof Lc&&b.constructor===Lc&&b.a===Nc?b=b.b:(na(b),b="type_error:TrustedResourceUrl");a.src=b.toString()};function Uc(a){Uc[" "](a);return a}Uc[" "]=ma;var Vc=M("Opera"),Wc=M("Trident")||M("MSIE"),Xc=M("Edge"),Yc=M("Gecko")&&!(-1!=Cc.toLowerCase().indexOf("webkit")&&!M("Edge"))&&!(M("Trident")||M("MSIE"))&&!M("Edge"),Zc=-1!=Cc.toLowerCase().indexOf("webkit")&&!M("Edge");function $c(){var a=p.document;return a?a.documentMode:void 0}var ad;\na:{var bd="",cd=function(){var a=Cc;if(Yc)return/rv:([^\\);]+)(\\)|;)/.exec(a);if(Xc)return/Edge\\/([\\d\\.]+)/.exec(a);if(Wc)return/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(a);if(Zc)return/WebKit\\/(\\S+)/.exec(a);if(Vc)return/(?:Version)[ \\/]?(\\S+)/.exec(a)}();cd&&(bd=cd?cd[1]:"");if(Wc){var dd=$c();if(null!=dd&&dd>parseFloat(bd)){ad=String(dd);break a}}ad=bd}var ed={},fd;fd=p.document&&Wc?$c():void 0;function gd(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function hd(a){p.setTimeout(function(){throw a;},0)}var id;\nfunction jd(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!M("Presto")&&(a=function(){var e=gd("IFRAME");e.style.display="none";Tc(e);document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(Qc());e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=ua(function(k){if(("*"==h||k.origin==h)&&k.data==g)this.port1.onmessage()},\nthis);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!M("Trident")&&!M("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Pa;c.Pa=null;e()}};return function(e){d.next={Pa:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in gd("SCRIPT")?function(e){var f=gd("SCRIPT");f.onreadystatechange=function(){f.onreadystatechange=null;\nf.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){p.setTimeout(e,0)}};function kd(a,b){ld||md();nd||(ld(),nd=!0);zc.add(a,b)}var ld;function md(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);ld=function(){a.then(od)}}else ld=function(){var b=od;!r(p.setImmediate)||p.Window&&p.Window.prototype&&!M("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(id||(id=jd()),id(b)):p.setImmediate(b)}}var nd=!1,zc=new vc;function od(){for(var a;a=yc();){try{a.a.call(a.b)}catch(b){hd(b)}uc(xc,a)}nd=!1};function pd(a){this.a=qd;this.j=void 0;this.f=this.b=this.c=null;this.g=this.i=!1;if(a!=ma)try{var b=this;a.call(void 0,function(c){rd(b,sd,c)},function(c){rd(b,td,c)})}catch(c){rd(this,td,c)}}var qd=0,sd=2,td=3;function ud(){this.next=this.c=this.b=this.f=this.a=null;this.g=!1}ud.prototype.reset=function(){this.c=this.b=this.f=this.a=null;this.g=!1};var vd=new tc(function(){return new ud},function(a){a.reset()});function wd(a,b,c){var d=vd.get();d.f=a;d.b=b;d.c=c;return d}\nfunction xd(a,b,c){yd(a,b,c,null)||kd(va(b,a))}function zd(a){return new pd(function(b,c){var d=a.length,e=[];if(d)for(var f=function(m,n){d--;e[m]=n;0==d&&b(e)},g=function(m){c(m)},h=0,k;h<a.length;h++)k=a[h],xd(k,va(f,h),g);else b(e)})}function Ad(){var a,b,c=new pd(function(d,e){a=d;b=e});return new Bd(c,a,b)}pd.prototype.then=function(a,b,c){return Cd(this,r(a)?a:null,r(b)?b:null,c)};pd.prototype.$goog_Thenable=!0;\npd.prototype.cancel=function(a){if(this.a==qd){var b=new Dd(a);kd(function(){Ed(this,b)},this)}};function Ed(a,b){if(a.a==qd)if(a.c){var c=a.c;if(c.b){for(var d=0,e=null,f=null,g=c.b;g&&(g.g||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.a==qd&&1==d?Ed(c,b):(f?(d=f,d.next==c.f&&(c.f=d),d.next=d.next.next):Fd(c),Gd(c,e,td,b)))}a.c=null}else rd(a,td,b)}function Hd(a,b){a.b||a.a!=sd&&a.a!=td||Id(a);a.f?a.f.next=b:a.b=b;a.f=b}\nfunction Cd(a,b,c,d){var e=wd(null,null,null);e.a=new pd(function(f,g){e.f=b?function(h){try{var k=b.call(d,h);f(k)}catch(m){g(m)}}:f;e.b=c?function(h){try{var k=c.call(d,h);void 0===k&&h instanceof Dd?g(h):f(k)}catch(m){g(m)}}:g});e.a.c=a;Hd(a,e);return e.a}pd.prototype.Ea=function(a){this.a=qd;rd(this,sd,a)};pd.prototype.Ga=function(a){this.a=qd;rd(this,td,a)};\nfunction rd(a,b,c){a.a==qd&&(a===c&&(b=td,c=new TypeError("Promise cannot resolve to itself")),a.a=1,yd(c,a.Ea,a.Ga,a)||(a.j=c,a.a=b,a.c=null,Id(a),b!=td||c instanceof Dd||Jd(a,c)))}function yd(a,b,c,d){if(a instanceof pd)return Hd(a,wd(b||ma,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;if(oa(a))try{var f=a.then;if(r(f))return Kd(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}\nfunction Kd(a,b,c,d,e){function f(k){h||(h=!0,d.call(e,k))}function g(k){h||(h=!0,c.call(e,k))}var h=!1;try{b.call(a,g,f)}catch(k){f(k)}}function Id(a){a.i||(a.i=!0,kd(a.P,a))}function Fd(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.f=null);return b}pd.prototype.P=function(){for(var a;a=Fd(this);)Gd(this,a,this.a,this.j);this.i=!1};\nfunction Gd(a,b,c,d){if(c==td&&b.b&&!b.g)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,Ld(b,c,d);else try{b.g?b.f.call(b.c):Ld(b,c,d)}catch(e){Md.call(null,e)}uc(vd,b)}function Ld(a,b,c){b==sd?a.f.call(a.c,c):a.b&&a.b.call(a.c,c)}function Jd(a,b){a.g=!0;kd(function(){a.g&&Md.call(null,b)})}var Md=hd;function Dd(a){Da.call(this,a)}wa(Dd,Da);Dd.prototype.name="cancel";function Bd(a,b,c){this.a=a;this.b=b;this.reject=c};function Nd(a,b,c){this.type=a;this.data=b;this.a=Ad();this.Xa=Fa(this.Xa,this);this.reject=Fa(this.reject,this);this.priority=Od;c!==x&&(this.priority=c);this.b().add(this)}var Od=1,Pd={hc:0,ic:Od,gc:2};l=Nd.prototype;l.then=function(a,b,c){return this.a.a.then(a,b,c)};l.Xa=function(a){this.Z=3;this.a.b(a)};l.reject=function(a){this.Z=5;this.a.reject(a)};l.Z=0;\nl.cancel=function(){if(3>this.Z){this.c();var a=this.b(),b=this.priority,c=a.a[b].indexOf(this);-1<c?a.a[b].splice(c,1):this.Ma&&a.ca.qb(this.Ma);this.Z=4}};Nd.prototype.cancel=Nd.prototype.cancel;function Qd(a){var b;this.a={};for(b in Pd)this.a[Pd[b]]=[];this.ca=a;this.ca.addEventListener("allocatable",Fa(this.b,this))}t("H.util.JobManager",Qd);var Rd=Object.keys(Pd).map(function(a){return Pd[a]}).sort().reverse();Qd.prototype.add=function(a){Na(a,Nd,this.add,0);this.a[a.priority].push(a);this.b()};Qd.prototype.contains=function(a){return-1<this.a[a.priority].indexOf(a)};\nQd.prototype.b=function(){Rd.forEach(function(a){this.a[a]=this.a[a].filter(function(b){var c;if((c=this.ca.jc(b))!==Ia){var d=Fa(this.ca.qb,this.ca,c,b);b.Ma=c;b.then(d,d);b.Z=b.kc(c)?1:5}else return!0},this)},this)};function Sd(a,b,c){var d=[],e=arguments.length;a&&d.push(Ua(a));1<e&&(e=2<e&&Oa(c,void 0,void 0,void 0)?" out of ["+c[0]+"..."+c[1]+"]":"",d.push("("+b+e+")"));d=Error(d.join(" "));Object.setPrototypeOf(d,Sd.prototype);return d}wa(Sd,Error);t("H.lang.OutOfRangeError",Sd);Sd.prototype.name="OutOfRangeError";var Td="closure_listenable_"+(1E6*Math.random()|0),Ud=0;function Vd(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.ha=e;this.key=++Ud;this.T=this.da=!1}function Wd(a){a.T=!0;a.listener=null;a.proxy=null;a.src=null;a.ha=null};function Xd(a){this.src=a;this.a={};this.b=0}Xd.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var g=Yd(a,b,d,e);-1<g?(b=a[g],c||(b.da=!1)):(b=new Vd(b,this.src,f,!!d,e),b.da=c,a.push(b));return b};function Zd(a,b){var c=b.type;if(c in a.a){var d=a.a[c],e=Ea(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(Wd(b),0==a.a[c].length&&(delete a.a[c],a.b--))}}\nXd.prototype.S=function(a){a=a&&a.toString();var b=0,c;for(c in this.a)if(!a||c==a){for(var d=this.a[c],e=0;e<d.length;e++)++b,Wd(d[e]);delete this.a[c];this.b--}return b};function Yd(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.T&&f.listener==b&&f.capture==!!c&&f.ha==d)return e}return-1};var $d;($d=!Wc)||($d=9<=Number(fd));var ae=$d,be;\nif(be=Wc){var ce;if(Object.prototype.hasOwnProperty.call(ed,"9"))ce=ed["9"];else{for(var de=0,ee=Ac(String(ad)).split("."),fe=Ac("9").split("."),ge=Math.max(ee.length,fe.length),he=0;0==de&&he<ge;he++){var ie=ee[he]||"",je=fe[he]||"";do{var ke=/(\\d*)(\\D*)(.*)/.exec(ie)||["","","",""],le=/(\\d*)(\\D*)(.*)/.exec(je)||["","","",""];if(0==ke[0].length&&0==le[0].length)break;de=Bc(0==ke[1].length?0:parseInt(ke[1],10),0==le[1].length?0:parseInt(le[1],10))||Bc(0==ke[2].length,0==le[2].length)||Bc(ke[2],le[2]);\nie=ke[3];je=le[3]}while(0==de)}ce=ed["9"]=0<=de}be=!ce}var me=be,ne=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{p.addEventListener("test",ma,b),p.removeEventListener("test",ma,b)}catch(c){}return a}();function oe(a,b){K.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.b=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(Yc){a:{try{Uc(b.nodeName);var e=!0;break a}catch(f){}e=\n!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=\na.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:pe[a.pointerType]||"";this.b=a;a.defaultPrevented&&this.c()}}wa(oe,K);var pe={2:"touch",3:"pen",4:"mouse"};oe.prototype.stopPropagation=function(){oe.U.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};\noe.prototype.c=function(){oe.U.c.call(this);var a=this.b;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,me)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var qe="closure_lm_"+(1E6*Math.random()|0),re={},se=0;function te(a,b,c,d,e){if(d&&d.once)ue(a,b,c,d,e);else if("array"==na(b))for(var f=0;f<b.length;f++)te(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!1,oa(d)?!!d.capture:!!d,e):we(a,b,c,!1,d,e)}\nfunction we(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=oa(e)?!!e.capture:!!e,h=xe(a);h||(a[qe]=h=new Xd(a));c=h.add(b,c,d,g,f);if(!c.proxy){d=ye();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)ne||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(ze(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");se++}}\nfunction ye(){var a=Ae,b=ae?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function ue(a,b,c,d,e){if("array"==na(b))for(var f=0;f<b.length;f++)ue(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!0,oa(d)?!!d.capture:!!d,e):we(a,b,c,!0,d,e)}\nfunction Be(a,b,c,d,e){if("array"==na(b))for(var f=0;f<b.length;f++)Be(a,b[f],c,d,e);else(d=oa(d)?!!d.capture:!!d,c=ve(c),a&&a[Td])?(a=a.b,b=String(b).toString(),b in a.a&&(f=a.a[b],c=Yd(f,c,d,e),-1<c&&(Wd(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.a[b],a.b--)))):a&&(a=xe(a))&&(b=a.a[b.toString()],a=-1,b&&(a=Yd(b,c,d,e)),(c=-1<a?b[a]:null)&&Ce(c))}\nfunction Ce(a){if("number"!==typeof a&&a&&!a.T){var b=a.src;if(b&&b[Td])Zd(b.b,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(ze(c),d):b.addListener&&b.removeListener&&b.removeListener(d);se--;(c=xe(b))?(Zd(c,a),0==c.b&&(c.src=null,b[qe]=null)):Wd(a)}}}function ze(a){return a in re?re[a]:re[a]="on"+a}\nfunction De(a,b,c,d){var e=!0;if(a=xe(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.T&&(f=Ee(f,d),e=e&&!1!==f)}return e}function Ee(a,b){var c=a.listener,d=a.ha||a.src;a.da&&Ce(a);return c.call(d,b)}\nfunction Ae(a,b){if(a.T)return!0;if(!ae){if(!b)a:{b=["window","event"];for(var c=p,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new oe(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.a&&0<=e;e--){b.currentTarget=d[e];var f=De(d[e],a,!0,b);c=c&&f}for(e=0;!b.a&&e<d.length;e++)b.currentTarget=\nd[e],f=De(d[e],a,!1,b),c=c&&f}return c}return Ee(a,new oe(b,this))}function xe(a){a=a[qe];return a instanceof Xd?a:null}var Fe="__closure_events_fn_"+(1E9*Math.random()>>>0);function ve(a){if(r(a))return a;a[Fe]||(a[Fe]=function(b){return a.handleEvent(b)});return a[Fe]};function N(){J.call(this);this.b=new Xd(this);this.j=this;this.i=null}wa(N,J);N.prototype[Td]=!0;l=N.prototype;l.B=function(){return this.i};l.la=function(a){this.i=a};l.addEventListener=function(a,b,c,d){te(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){Be(this,a,b,c,d)};\nl.dispatchEvent=function(a){var b,c=this.B();if(c)for(b=[];c;c=c.B())b.push(c);c=this.j;var d=a.type||a;if("string"===typeof a)a=new K(a,c);else if(a instanceof K)a.target=a.target||c;else{var e=a;a=new K(d,c);Ba(a,e)}e=!0;if(b)for(var f=b.length-1;!a.a&&0<=f;f--){var g=a.currentTarget=b[f];e=g.N(d,!0,a)&&e}a.a||(g=a.currentTarget=c,e=g.N(d,!0,a)&&e,a.a||(e=g.N(d,!1,a)&&e));if(b)for(f=0;!a.a&&f<b.length;f++)g=a.currentTarget=b[f],e=g.N(d,!1,a)&&e;return e};\nl.v=function(){N.U.v.call(this);this.b&&this.b.S(void 0);this.i=null};l.N=function(a,b,c){a=this.b.a[String(a)];if(!a)return!0;a=a.concat();for(var d=!0,e=0;e<a.length;++e){var f=a[e];if(f&&!f.T&&f.capture==b){var g=f.listener,h=f.ha||f.src;f.da&&Zd(this.b,f);d=!1!==g.call(h,c)&&d}}return d&&0!=c.ab};t("H.util.EventTarget",N);N.prototype.la=N.prototype.la;N.prototype.setParentEventTarget=N.prototype.la;N.prototype.B=N.prototype.B;N.prototype.getParentEventTarget=N.prototype.B;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.dispatchEvent=N.prototype.dispatchEvent;\nN.prototype.dispatchEvent=N.prototype.dispatchEvent;N.prototype.s=N.prototype.s;N.prototype.dispose=N.prototype.s;N.prototype.L=N.prototype.L;N.prototype.addOnDisposeCallback=N.prototype.L;N.prototype.P=N.prototype.N;\nN.prototype.N=function(a,b,c){var d,e,f=!0;var g=c[c.currentTarget===c.target?"AT_TARGET":b?"CAPTURING_PHASE":(d=!0,"BUBBLING_PHASE")];if(!d||"pointerenter"!==(e=c.type)&&"pointerleave"!==e)c.eventPhase=g,f=N.prototype.P.apply(this,arguments),d&&this.B&&null===this.B()&&delete c.eventPhase;return f};N.prototype.Yb=function(a){for(var b,c=this;c&&(b=c.B())&&b!==a;)c=b;b||c.la(a)};N.prototype.setRootParentEventTarget=N.prototype.Yb;function Q(a){a=a||{};var b=a.callback;this.g=a.label;r(b)&&(this.callback=b);this.f=!!a.disabled;Q.U.constructor.call(this)}wa(Q,N);t("H.util.ContextItem",Q);Q.prototype.zb=function(){return this.g};Q.prototype.getLabel=Q.prototype.zb;Q.prototype.Xb=function(a){this.g!==a&&(this.g=a,this.dispatchEvent("update"));return this};Q.prototype.setLabel=Q.prototype.Xb;Q.prototype.Ob=function(){return this.f};Q.prototype.isDisabled=Q.prototype.Ob;\nQ.prototype.Wb=function(a){a!==this.f&&(this.f=a,this.dispatchEvent("update"));return this};Q.prototype.setDisabled=Q.prototype.Wb;var Ge=new Q;Q.SEPARATOR=Ge;function Ie(a){if(Ca.document){var b=document.createElement("canvas");b.width=b.height=1;b.getContext("2d",{lc:a})}}t("H.util.getPixelRatio",function(){return window.devicePixelRatio||1});Object.create(Ia,void 0);t("H.util.eval",function(a){return eval(a)});t("H.util.provide",function(a){var b=p.$jscomp;if(b&&("function"!=typeof b.wb?0:b.wb()))throw Error("goog.provide cannot be used within a module.");la(a,void 0)});function Je(){this.m=0}\nJe.prototype.next=function(a){if(9007199254740992===this.m)throw new Sd(a,this.m,[0,9007199254740991]);return this.m++};var Ke=new Je;Fa(Ke.next,Ke);function mc(){}var mb=Ha([]);Ha({});Ie(!0);Ie(!1);function Le(a,b,c){var d=Nb(+a,-90,90);if(b&&Ra(d))throw new y(b,c,a);return d}function Me(a,b,c){var d=+a;if(-180>d||180<d)d=Mb(d+180,360)-180;if(b&&Ra(d))throw new y(b,c,a);return d}function Ne(a,b,c){var d;if(a!==x&&Ra(d=+a)&&b)throw new y(b,c,a);return d}t("H.geo.isDBC",function(a,b){return 0>a!==0>b&&180<sb(b-a)});function R(){var a=R;if(!0===(Na(this,a)&&this.constructor===a))throw new TypeError("Illegal constructor "+Ua(a));}t("H.geo.AbstractGeometry",R);R.prototype.getBoundingBox=R.prototype.X;R.prototype.equals=R.prototype.F;R.prototype.oa="";R.prototype.va="";R.prototype.toString=function(){return this.eb([this.oa.toUpperCase()," "]).join("")};R.prototype.toString=R.prototype.toString;R.prototype.$b=function(){return{type:this.va,coordinates:this.cb()}};R.prototype.toGeoJSON=R.prototype.$b;\nR.prototype.ta=function(){return{type:this.oa,coordinates:this.ua(),boundingBox:this.X().ta()}};R.prototype.forWorkerMessage=R.prototype.ta;function S(a,b,c){this.lat=Le(a,S,0);this.lng=Me(b,S,1);c!==x&&(this.alt=Ne(c,S,2))}wa(S,R);t("H.geo.Point",S);S.prototype.F=function(a){return this===a||!!a&&this.lat===a.lat&&this.lng===a.lng&&(this.alt||0)===(a.alt||0)};S.prototype.equals=S.prototype.F;S.prototype.ra=function(a){if(this===a||this.lat===a.lat&&this.lng===a.lng)a=0;else{var b=this.lat*Ib;var c=a.lat*Ib;a=1.274200158E7*yb(nb(1,ub(vb(xb((b-c)/2),2)+zb(b)*zb(c)*vb(xb((this.lng*Ib-a.lng*Ib)/2),2))))}return a};\nS.prototype.distance=S.prototype.ra;\nS.prototype.dc=function(a,b,c){var d;if(c){if(d=b/6371000.79){b=a*Ib;a=Ib*this.lat;var e=xb(a);c=xb(d);var f=zb(d);d=Ib*this.lng;var g=zb(a);a=yb(g*zb(b)*c+e*f);b=Cb(xb(b)*g*c,f-e*xb(a));b=(d+b+E)%(2*E)-E;b*=Kb;e=new S(a*Kb,(b+540)%360-180)}return e||this}a=(a%360+360)%360;if(0===(a+90)%180)return a=this.lng+b/(6371000.79*Gb*zb(this.lat*Ib))*(270===a?-360:360),new S(this.lat,(a+540)%360-180);if(b/=6371000.79)a*=Ib,e=this.lat*Ib,c=this.lng*Ib,d=e+b*zb(a),f=d-e,g=tb(Ab(d/2+Fb)/Ab(e/2+Fb)),g=Ra(f/g)?\nzb(e):f/g,a=b*xb(a)/g,sb(d)>Eb&&(d=0<d?E-d:-(E+d)),d=new S(d*Kb,((c+a+Hb+(sb(e+f)>Eb?E:0))%Gb-E)*Kb);return d||this};S.prototype.walk=S.prototype.dc;S.prototype.X=function(){return new V(this.lat,this.lng,this.lat,this.lng)};S.prototype.getBoundingBox=S.prototype.X;function Oe(a,b,c){var d=oa(a)&&!(Ra(a.lat=Le(a.lat))||Ra(a.lng=Me(a.lng))||a.alt!==x&&Ra(a.alt=Ne(a.alt)));if(!d&&b)throw new y(b,c,a);return d}S.validate=Oe;function Pe(a){if(!a)throw new y(Pe,0,a);return new S(a.lat,a.lng,a.alt)}\nS.fromIPoint=Pe;l=S.prototype;l.oa="Point";l.eb=function(a){a.push("(",this.lng," ",this.lat,")");return a};l.va="Point";l.cb=function(){return[this.lng,this.lat,this.alt||0]};l.ua=function(){return[this.lat,this.lng,this.alt||0]};function Qe(){}function Re(a){return nb(1,ob(0,.5-tb(Ab(Fb+Eb*a/180))/E/2))}Qe.prototype.ia=function(a,b,c){c?(c.x=b/360+.5,c.y=Re(a)):c=new F(b/360+.5,Re(a));return c};Qe.prototype.latLngToPoint=Qe.prototype.ia;Qe.prototype.tb=function(a,b){return this.ia(a.lat,a.lng,b)};Qe.prototype.geoToPoint=Qe.prototype.tb;function Se(a){return 0>=a?90:1<=a?-90:Kb*(2*Bb(wb(E*(1-2*a)))-Eb)}Qe.prototype.V=function(a,b,c){c?(c.lat=Se(b),c.lng=360*(1===a?1:Mb(a,1))-180):c=new S(Se(b),360*(1===a?1:Mb(a,1))-180);return c};\nQe.prototype.xyToGeo=Qe.prototype.V;Qe.prototype.Tb=function(a,b){return this.V(a.x,a.y,b)};Qe.prototype.pointToGeo=Qe.prototype.Tb;var Te=new Qe;t("H.geo.mercator",Te);t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0);t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22);function W(a,b){this.projection=a||Te;this.b=0;this.a=this.exp=tb(b||256)/Db;Ue(this);this.y=this.x=0}t("H.geo.PixelProjection",W);var Ve=sb(24)+sb(-8);W.prototype.Vb=Te;W.prototype.projection=W.prototype.Vb;W.prototype.x=0;W.prototype.x=W.prototype.x;W.prototype.y=0;W.prototype.y=W.prototype.y;W.prototype.cc=vb(2,Ve);W.prototype.w=W.prototype.cc;W.prototype.Jb=vb(2,Ve);W.prototype.h=W.prototype.Jb;\nW.prototype.ba=function(a){if(Ra(a))throw new y(this.ba,0,a);var b=this.x/this.w;var c=this.y/this.h;this.b=a;this.a=this.exp+a;Ue(this);this.x=b*this.w;this.y=c*this.h};W.prototype.rescale=W.prototype.ba;function Ue(a){a.a>Ve&&(a.a=Ve);a.w=vb(2,a.a);a.h=vb(2,a.a)}W.prototype.Ta=function(){return this.b||0};W.prototype.getZoomScale=W.prototype.Ta;W.prototype.sb=function(a,b){a=this.projection.ia(a.lat,a.lng,b);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};W.prototype.geoToPixel=W.prototype.sb;\nW.prototype.Fa=function(a,b){return this.projection.V((a.x+this.x)/this.w,(a.y+this.y)/this.h,b)};W.prototype.pixelToGeo=W.prototype.Fa;W.prototype.V=function(a,b,c){return this.projection.V((a+this.x)/this.w,(b+this.y)/this.h,c)};W.prototype.xyToGeo=W.prototype.V;W.prototype.Ba=function(a,b,c){a=this.projection.ia(a,b,c);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};W.prototype.latLngToPixel=W.prototype.Ba;W.prototype.Ub=function(a){return new F(a.x*this.w-this.x,a.y*this.h-this.y)};\nW.prototype.pointToPixel=W.prototype.Ub;t("H.util.Disposable",J);J.prototype.L=J.prototype.L;J.prototype.addOnDisposeCallback=J.prototype.L;t("H.util.dispose",function(a){a&&"function"==typeof a.s&&a.s()});J.prototype.s=J.prototype.s;J.prototype.dispose=J.prototype.s;J.prototype.v=J.prototype.v;J.prototype.disposeInternal=J.prototype.v;function We(a,b,c,d){if(!a||!b||!c)throw new y(We,x,"Must specify name, version and revision parameter");this.name=a;this.version=b;this.revision=c;d&&Ba(this,d)}t("H.util.BuildInfo",We);We.prototype.toString=function(){var a,b=[];for(a in this)Qa(this[a])&&b.push(this[a]);return b.join(";")};var Xe={};function Ye(a,b,c,d){if(!a)throw new y(Ye,1,"Must specify a name parameter");return Xe[a]||(Xe[a]=new We(a,b,c,d))}We.get=Ye;function Y(a,b,c,d,e,f){if(a&&b)this.Ka(a),this.ka(b),this.Ia(c),this.Ja(e),this.bb(f),this.ma(d);else throw new y(Y,x,\'Parameters "scheme" and "host" must be specified\');}t("H.service.Url",Y);\nfunction Ze(a,b){var c=Ca.document,d;var e="";if(c){e=c.createElement("a");if(b){var f=(d=c.getElementsByTagName("base")[0])&&d.href;var g=c.head;var h=d||g.appendChild(c.createElement("base"));h.href=b}e.href=a;e=e.href;b&&(d?d.href=f:g.removeChild(h))}else/[\\w]+:\\/\\//.test(a)&&(e=a);f=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(e);a=f[1];g=f[4];b=f[5];h=f[6];c=f[7];d=f[8];!f[2]&&g&&/@/.test(g)&&(g=g.split("@")[1]);f=Y;h=h&&0<h.length?h.substr(1):\n"";e={};var k,m;if(c)for(k=/([?&]?([^=&+]+))(=([^&]+))?/g;m=k.exec(c);)e[decodeURIComponent(m[2])]=m[4]?decodeURIComponent(m[4]):void 0;return new f(a,g,h,e,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):"")}Y.parse=Ze;Y.prototype.clone=function(){var a={},b;for(b in this.a)a[b]=this.a[b];return new Y(this.i,this.g,this.b,a,this.f,this.c)};Y.prototype.clone=Y.prototype.clone;\nY.prototype.Ka=function(a){if(!a||"string"!==typeof a)throw new y(this.Ka,0,\'The "scheme" parameter must be a non-empty string.\');this.i=a;return this};Y.prototype.setScheme=Y.prototype.Ka;Y.prototype.Gb=function(){return this.i};Y.prototype.getScheme=Y.prototype.Gb;Y.prototype.ka=function(a){if(!a||"string"!==typeof a||"-"===a.charAt(0)||"."===a.charAt(0)||"."===a.charAt(a.length-1))throw new y(this.ka,0,\'The "host" parameter is not a valid host name.\');this.g=a;return this};\nY.prototype.setHost=Y.prototype.ka;Y.prototype.yb=function(){return this.g};Y.prototype.getHost=Y.prototype.yb;Y.prototype.Ia=function(a){this.b=a||void 0;return this};Y.prototype.setPath=Y.prototype.Ia;Y.prototype.Db=function(){return this.b};Y.prototype.getPath=Y.prototype.Db;Y.prototype.ma=function(a){if(a)if("object"==typeof a)this.a=a;else throw new y(this.ma,0,\'Parameter "params" must be an object.\');else this.a={};return this};Y.prototype.setQuery=Y.prototype.ma;Y.prototype.Kb=function(){return!$e(this)};\nY.prototype.hasQuery=Y.prototype.Kb;Y.prototype.getQuery=function(){return this.a};Y.prototype.getQuery=Y.prototype.getQuery;Y.prototype.Ja=function(a){if(void 0===a)this.f=a;else{var b=Nb(+a<<0,0,65535);if(b!=a)throw new y(this.Ja,0,\'Parameter "port" must be an integer in range [0...65535]\');this.f=b}return this};Y.prototype.setPort=Y.prototype.Ja;Y.prototype.Eb=function(){return this.f};Y.prototype.getPort=Y.prototype.Eb;Y.prototype.bb=function(a){this.c=a||void 0;return this};\nY.prototype.setAnchor=Y.prototype.bb;Y.prototype.ub=function(){return this.c};Y.prototype.getAnchor=Y.prototype.ub;Y.prototype.R=function(a){if("object"!==typeof a)throw new y(this.R,0,\'Parameter "other" must be an object.\');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&"function"!==typeof a[c]&&(b[c]=a[c]);return this};Y.prototype.mergeQuery=Y.prototype.R;\nY.prototype.Na=function(a){if(!a||"string"!==typeof a)throw new y(this.Na,0,\'Parameter "subDomain" must be a non-empty string\');"."===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.ka(a+"."+this.g)};Y.prototype.addSubDomain=Y.prototype.Na;Y.prototype.Oa=function(a){if(!a||"string"!==typeof a)throw new y(this.Oa,0,\'Parameter "subPath" must be a non-empty string\');return this.Ia((this.b?this.b+"/":"")+a)};Y.prototype.addSubPath=Y.prototype.Oa;\nY.prototype.toString=function(){return[this.i+"://",this.g,this.f?":"+this.f:"",this.b||!$e(this)||this.c?"/":"",this.b?encodeURI(this.b):"",af(this),this.c?"#"+encodeURIComponent(this.c):""].join("")};Y.prototype.toString=Y.prototype.toString;function bf(a){return encodeURIComponent(a).replace(/[!\'()*]/g,function(b){return"%"+b.charCodeAt(0).toString(16)})}\nfunction af(a){var b=[],c=a.a,d={},e;for(e in c){if(c.hasOwnProperty(e)&&"function"!==typeof c[e]){var f=a.a[e];d.K=bf(e);Na(f,cf)?f.a.forEach(function(g){return function(h){b.push(g.K+"="+bf(h))}}(d)):Na(f,df)?b.push(d.K+"="+f.b.map(function(g){return bf(g)}).join(f.a)):b.push(void 0===f?d.K:d.K+"="+bf(f))}d={K:d.K}}return 0<b.length?"?"+b.join("&"):""}function $e(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&"function"!==typeof a.a[b]&&(c++,0<c))break;return!c}\nfunction ef(a,b){if(Oa(a,void 0,void 0,void 0))for(var c=0;c<a.length;c++){var d=a[c];if(!Qa(d)&&!Sa(d)){var e="The Array does not contain only strings and numbers";break}}else e="Not an Array";if(e)throw new y(b,0,a);return a}function cf(a){this.a=ef(a,cf)}Y.MultiValueQueryParameter=cf;cf.prototype.Ib=function(){return this.a};cf.prototype.getValues=cf.prototype.Ib;function df(a,b){this.b=ef(a,df);if(!/^[!\\$\\(\\)\\*\\+,;]$/.test(b))throw new y(df,1,\'Invalid delimiter "\'+b+\'"\');this.a=b}\nY.DelimitedQuerySubValues=df;var ff={};function gf(a){try{importScripts.apply(self,arguments)}catch(b){this.postError("invalid_script")}}function hf(a){delete ff[a];this.postMessage(a)}function jf(a,b,c){if(r(b))var d=b;else try{d=self.eval("("+b+")"),r(d)||(d=null)}catch(e){}d?(ff[a]=d,c||this.postMessage(a)):this.postError("invalid_processor")}function kf(a){this.b=a&&a[0];this.a=a&&a[1];this.c=a&&a[2]||[]}kf.prototype.postError=function(a){this.postMessage(a,x,0)};\nkf.prototype.postMessage=function(a,b,c){self.postMessage({processor:this.b,taskId:this.a,type:c===x?1:c,data:a},b||x)};function lf(a,b,c){if(!Qa(a))throw new y(lf,0,"InvalidArgument");if(!r(b))throw new y(lf,1,"InvalidArgument");var d=mf++;nf[d]={mimeType:c||of,ob:b};(new kf(["3",d,[]])).postMessage(a,[],2)}var nf={},mf=0;\nfunction pf(a,b){var c=a;if(nf[this.a]){var d=nf[this.a];var e=d.ob;delete nf[this.a];if(b)e(null,b);else{if(d.mimeType===qf){a=new Uint8Array(a);b=a.byteLength;d="";c=0;for(var f,g,h,k;c<b;)f=a[c++],192>f||(g=a[c++],224>f?f=(f&31)<<6|g&63:(h=a[c++],240>f?f=(f&15)<<12|(g&63)<<6|h&63:(k=a[c++],f=(f&7)<<18|(g&63)<<12|(h&63)<<6|k&63))),65536>f?d+=String.fromCharCode(f):(f-=65536,d+=String.fromCharCode((f>>10)+55296,(f&1023)+56320));c=d}e(c)}}}var of=0,qf=1;function V(a,b,c,d){rf(this,Le(a,V,0),Me(b,V,1),Le(c,V,2),Me(d,V,3))}wa(V,R);t("H.geo.Rect",V);V.prototype.oa="Polygon";V.prototype.eb=function(a){var b=this.f,c=this.a,d=this.c,e=this.b;a.push("(","(",c," ",b,",",e," ",b,",",e," ",d,",",c," ",d,",",c," ",b,")",")");return a};V.prototype.F=function(a){var b=this===a;!b&&Na(a,V)&&(b=this.f===a.f&&this.a===a.a&&this.c===a.c&&this.b===a.b);return b};V.prototype.equals=V.prototype.F;\nV.prototype.clone=function(){return new V(this.f,this.a,this.c,this.b)};V.prototype.clone=V.prototype.clone;function rf(a,b,c,d,e){a.a=c;a.b=e;b<d&&(c=b,b=d,d=c);a.f=b;a.c=d;a.j=a.g=a.i=null;return a}V.prototype.Sa=function(){this.j||(this.j=new S(this.f,this.a));return this.j};V.prototype.getTopLeft=V.prototype.Sa;V.prototype.Ra=function(){this.g||(this.g=new S(this.c,this.b));return this.g};V.prototype.getBottomRight=V.prototype.Ra;V.prototype.Hb=function(){return this.f};V.prototype.getTop=V.prototype.Hb;\nV.prototype.vb=function(){return this.c};V.prototype.getBottom=V.prototype.vb;V.prototype.Ab=function(){return this.a};V.prototype.getLeft=V.prototype.Ab;V.prototype.Fb=function(){return this.b};V.prototype.getRight=V.prototype.Fb;V.prototype.G=function(){this.i||(this.i=new S(this.c+(this.f-this.c)/2,sf(this.a,this.I())));return this.i};V.prototype.getCenter=V.prototype.G;V.prototype.I=function(){return tf(this.a,this.b)};V.prototype.getWidth=V.prototype.I;\nV.prototype.O=function(){return this.f-this.c};V.prototype.getHeight=V.prototype.O;V.prototype.Nb=function(){return this.a>this.b};V.prototype.isCDB=V.prototype.Nb;V.prototype.Pb=function(){return!this.I()&&!this.O()};V.prototype.isEmpty=V.prototype.Pb;V.prototype.X=function(){return new V(this.f,this.a,this.c,this.b)};V.prototype.getBoundingBox=V.prototype.X;\nV.prototype.ea=function(a,b,c){var d=this.G();c||(a=Le(a,this.ea,0),b=Me(b,this.ea,1));b=this.J(a,b,c);a=b.G();return a.lat===d.lat&&a.lng===d.lng&&this.O()===b.O()&&this.I()===b.I()};V.prototype.containsLatLng=V.prototype.ea;V.prototype.fa=function(a,b){b||Oe(a,this.fa,0);return this.ea(a.lat,a.lng,b)};V.prototype.containsPoint=V.prototype.fa;\nV.prototype.Qa=function(a,b){var c=this.G();if(!b&&!Na(a,V))throw new y(this.Qa,0,a);b=this.ja(a,b);a=b.G();return a.lat===c.lat&&a.lng===c.lng&&this.O()===b.O()&&this.I()===b.I()};V.prototype.containsRect=V.prototype.Qa;V.prototype.J=function(a,b,c,d){if(!c){if(Ra(a=Le(a)))throw new y(this.J,0,a);if(Ra(b=Me(b)))throw new y(this.J,1,b);}return uf(this.f,this.a,this.c,this.b,a,b,a,b,d)};V.prototype.mergeLatLng=V.prototype.J;\nV.prototype.Ya=function(a,b,c){b||Oe(a,this.Ya,0);return this.J(a.lat,a.lng,b,c)};V.prototype.mergePoint=V.prototype.Ya;V.prototype.ja=function(a,b,c){if(!b&&!Na(a,V))throw new y(this.ja,0,a);return uf(this.f,this.a,this.c,this.b,a.f,a.a,a.c,a.b,c)};V.prototype.mergeRect=V.prototype.ja;V.prototype.$=function(a,b,c,d,e,f){e||(a=Le(a,this.$,0),b=Me(b,this.$,1),c=Le(c,this.$,2),d=Me(d,this.$,3));return uf(this.f,this.a,this.c,this.b,a,b,c,d,f)};V.prototype.mergeTopLeftBottomRight=V.prototype.$;\nV.prototype.Va=function(a,b){var c=this.a<=this.b,d=a.a<=a.b,e=this.a<a.b,f=a.a<this.b;if(!b&&!Na(a,V))throw new y(this.Va,0,a);return this.c<=a.f&&a.c<=this.f&&(!c&&(!d||e||f)||!d&&(e||f)||e&&f)};V.prototype.intersects=V.prototype.Va;function tf(a,b){a=b-a;return a+(0>a?360:0)}function sf(a,b){a+=b/2;return a-(180<a?360:0)}\nfunction uf(a,b,c,d,e,f,g,h,k){c=nb(c,g);a=ob(a,e);e=tf(b,d);var m=sf(b,e);g=tf(f,h);var n=sf(f,g)-m;n+=0>n-1E-6?360:0;if(180>n-1E-6){m=b;var q=h}else n=360-n,m=f,q=d;n=n+e/2+g/2;360<=n+5E-7?(m=-180,q=180):n-5E-7<e?(m=b,q=d):n-5E-7<g&&(m=f,q=h);return k?rf(k,a,m,c,q):new V(a,m,c,q)}V.merge=uf;function vf(a,b,c){c||(Oe(a,vf,0),Oe(b,vf,1));return new V(a.lat,a.lng,b.lat,b.lng)}V.fromPoints=vf;\nfunction wf(a,b){var c=1,d=a.length,e=null;var f=na(a);if("array"!=f&&("object"!=f||"number"!=typeof a.length))throw new y(wf,0,a);if(0<d)for(f=a[0],e=vf(f,f,b);c<d;c++)f=a[c],e.J(f.lat,f.lng,b,e);return e}V.coverPoints=wf;function xf(a,b){var c=3,d=a.length,e;if(!(b||a&&null!=a.length))throw new y(xf,0,a);if(0<d)for(e=new V(a[0],a[1],a[0],a[1]);c<d;c+=3)e.J(a[c],a[c+1],b,e);return e}V.coverLatLngAlts=xf;\nfunction yf(a,b){var c=1,d=a.length,e;if(b&&(!a||null==a.length))throw new y(yf,0,a);if(0<d)for(e=new V(a[0].f,a[0].a,a[0].c,a[0].b);c<d;c++)e.ja(a[c],b,e);return e}V.coverRects=yf;\nV.prototype.$a=function(a,b){var c=this.a,d=this.f,e=this.b,f=this.c,g=this.G().lng;Oe(a,this.$a,0);var h=a.lat-f-(d-f)/2;var k=a.lng-g;k=180<k||-180>k?-(g+a.lng):k;a=c+(0>k?2*k:0);a=-180>a?360+a:a;e+=0<k?2*k:0;e=180<e?e-360:e;d=0<h?d+2*h:d;90<=d&&(d=90);f=0>h?f+2*h:f;-90>=f&&(f=-90);return b?rf(b,d,a,f,e):new V(d,a,f,e)};V.prototype.resizeToCenter=V.prototype.$a;V.prototype.va="Polygon";\nV.prototype.cb=function(){return[[this.a,this.f,0],[this.b,this.f,0],[this.b,this.c,0],[this.a,this.c,0],[this.a,this.f,0]]};V.prototype.ta=function(){return this.ua()};V.prototype.ua=function(){return[this.f,this.a,this.c,this.b]};function zf(a,b,c,d){this.key="";this.x=a;this.y=b;this.b=c;this.Y=d;this.a=Ad()}zf.prototype.then=function(a,b,c){return this.a.a.then(a,b,c)};zf.prototype.reject=function(a){this.a.reject(a)};zf.prototype.cancel=function(){this.a.a.cancel()};zf.prototype.cancel=zf.prototype.cancel;function Af(a,b,c,d){var e=!!c,f,g=0,h=0,k=0,m=0,n=0,q,u=-1;var I=Ca.Float32Array;var L,w=[];if(b){b=Ja(b);a=Ja(a);e&&(f=Ja(c));c=b.length;d=d?1E-7:1E-5;for(L=new I(3*c);g<c;){I=b[g];var G=+I;var X=+a[g];e&&(q=+f[g]);Bf.test(I)?0<=u&&(0<g-u&&w.push(u,g+1),u=-1):0>u&&(u=g);g++;m=L[h++]=m+X*d;k=L[h++]=k+G*d;e&&(n=L[h]=n+q);h++}0<=u&&1<c-u&&w.push(u,c)}else L=new I(0);return{path:L,outlineIndices:w}}var Bf=/^-?0\\d/;\nfunction Cf(a,b){for(var c=0,d=a.length/3,e=new Ca.Array(d),f=0;c<d;)e[c++]=b.Ba(a[f],a[++f]),f+=2;return e};function Df(a,b){b=180/(1<<b);var c=a.lat+90;a=(a.lng+180)%360;var d=0;180==c&&d--;d+=Math.floor(c/b);return[d,Math.floor(a/b)]}var Ef=1/Math.pow(10,10);function Ff(a,b){var c=[],d=a.Sa();a=a.Ra();var e;180==a.lng&&(a.lng-=Ef);d=Df(d,b);a=Df(a,b);for(e=d[0];e>=a[0];e--)for(b=d[1];b<=a[1];b++)c.push(e,b);return c};function Gf(a,b){var c=a.tileSize||256;this.b={};this.j=Ze(a.serverUrl);this.g=b;this.fb=a.layerConfigs||[];this.i=a.projected;this.P=c;this.Ea=!1!==a.batchTiles;this.bc=a.horizontalMargin||0;this.gb=a.onlyOutline;this.ib=new W(x,c);this.f=new W(x,c);this.f.ba(22-Math.log(c)/Math.LN2+8)}wa(Gf,J);\nGf.prototype.kb=function(a,b,c){var d=this.P,e=this.bc,f={x:a*d-e,y:b*d};d={x:(a+1)*d-1+e,y:(b+1)*d-1};e=this.ib;e.ba(c);f=e.Fa(f);d=e.Fa(d);return Hf(this,new V(f.lat,f.lng,d.lat,d.lng),this.fb,{x:a,y:b,z:c})};Gf.prototype.jb=function(a,b,c,d,e){return Hf(this,new V(a,b,c,d),e)};\nfunction Hf(a,b,c,d){var e=If(c),f=e.length,g={},h,k=a.b,m=[],n=[];for(c=0;c<f;c++){var q=e[c];var u=q.layerId;var I=q.level;g[u]=q.columns;q=Ff(b,I);var L=q.length-1;for(h=0;h<L;h+=2){var w=[u,q[h+1],q[h],I].join("_");var G=k[w]||a.g.get(w);G||(G=new zf(q[h+1],q[h],I,u),G.key=w,k[w]=G,n.push(G));m.push(G)}}n.length&&(a.Ea?Jf(a,n):Kf(a,n));return zd(m.map(function(X){return X.then(Fa(this.Ga,this,X.Y,Lf(e))).then(Fa(this.hb,this,X,d||Mf)).then(Fa(this.ac,this,g[X.Y]))},a))}var Mf={x:0,y:0,z:0};\nGf.prototype.Ga=function(a,b,c){var d=c.Rows,e=d.length,f,g;if(e&&(f=b[a])){b=new C(c.Rows);var h=[];for(g=0;g<e;g++){var k=d[g];f(b.ga(g),a)&&h.push(k)}a={Rows:h};if(c=c.Meta)a.Meta=c}else a=c;return a};function Kf(a,b){function c(k,m,n){n?(delete a.b[k.key],k.reject(n)):Nf(a,k,m)}var d,e=b.length,f=a.j;for(d=0;d<e;d++){var g=b[d];var h=f.clone().R({tilex:g.x}).R({tiley:g.y}).R({level:g.b}).R({layer:g.Y});new lf(h.toString(),Fa(c,null,g),qf)}}\nfunction Jf(a,b){var c=b.length,d;for(d=0;d<c;d+=15){var e=b.slice(d,d+15);Of(a,e)}}function Of(a,b){var c=a.j.clone(),d=[],e=[],f=[],g=c.getQuery();b.length&&(b.forEach(function(h){d.push(h.x,h.y);e.push(h.b);f.push(h.Y)}),g.tilexy=d.join(","),g.layers=f.join(","),g.levels=e.join(","),c.ma(g),new lf(c.toString(),function(h,k){k?b.forEach(function(m){delete a.b[m.key];m.reject("error")}):Nf(a,b,h)},qf))}\nfunction Nf(a,b,c){var d=b.length,e;if(Oa(b,void 0,void 0,void 0)){var f=c.indexOf("[")+1;for(e=0;e<d;e++){var g=c.indexOf("]},{",f+3)+2;g<f&&(g=c.lastIndexOf("]}"));var h=c.substr(f,g-f);f=g+1;Pf(a,b[e],h)}}else Pf(a,b,c)}function Pf(a,b,c){try{var d=c.length;var e=b.key;delete a.b[e];a.g.add(e,b,2*d);var f=JSON.parse(c);b.a.b(f)}catch(g){b.reject(g.message)}}\nfunction Lf(a){var b={},c,d=a.length;for(c=0;c<d;c++){var e=a[c];if(e.rowFilter){var f=e.layerId;f=f!==x?f:e.layer;b[f]=Fa(e.rowFilter,e.rowFilterContext)}}return b}function Qf(a,b,c,d,e){return e?[new F(a,b),new F(c,b),new F(c,d),new F(a,d),new F(a,b)]:[a,b,c,b,c,d,a,d]}\nGf.prototype.hb=function(a,b,c){var d=this.f.Ta()-b.z,e=this.P<<d,f=50<<d,g=b.x*e;b=b.y*e;var h=g+e;e=b+e;var k=g-f,m=b-f,n=h+f;f=e+f;var q,u,I=c.Rows,L=I.length,w,G=/^ADAS/.test(a.Y),X=this.f,qa=this.gb,O,bb=[],Ka=[],La=[],cb=[];for(a=0;a<L;a++){var z=w=I[a];var T=(O=G)?"HPY":"LAT";var U=O?"HPX":"LON";var da=O?"HPZ":"ZLEVEL";if(z[T]){var P=Af(z[T],z[U],z[da],O);z.geometry=P;delete z[T];delete z[U];delete z[da];if(z.INNER_LAT)for(T=z.INNER_LAT.split(";"),P=z.INNER_LON.split(";"),delete z.INNER_LAT,\ndelete z.INNER_LON,z.interiors=da=[],U=T.length,z=0;z<U;z++)da.push(Af(T[z],P[z],"",O))}if(this.i){U=w;z=X;P=U.$$projected$$;T=0;if(!P){var Z=U.geometry;O=Cf(Z.path,z);w=[O];U.$$projected$$=P={Sb:w};U=(da=U.interiors)?da.length:0;w.length+=U;T|=+Rf(w,O,Z.outlineIndices);if(U)for(P.Lb=1,q=0;q<U;q++)Z=da[q],O=Cf(Z.path,z),w[1+q]=O,T|=+Rf(w,O,Z.outlineIndices);T&&(P.Qb=1+U)}z=P;O=z.Sb;w=z.Lb;var Fc=z.Qb;P=[];T=U=Lb;var db=da=x;z=O[0];if(1===z.length){var Gc=Gc||(Gc=Qf(g,b,h,e,!1));w=z[0];Rb(w.x,w.y,\nGc)&&P.push(Sf(z,g,b,d))}else{var He=O.length;for(Z=qa?Fc:0;Z<He&&(qa||!Z||P.length);Z++)if(z=O[Z],Z>=Fc){Z===Fc&&(T=P.length);var ia=Ub([z],k,m,n,f,!1);Tf(ia,g,b,d,P)}else{var Jb=Jb||(Jb=Qf(k,m,n,f,!0));if(Z>=w)if(Z===w&&(U=P.length),db)for(q=db.length;q--;){if(ia=Uf(db[q],z),u=ia.length){for(da=da||[];u--;)da.push(q);Tf(ia,g,b,d,P)}}else ia=Uf(Jb,z),Tf(ia,g,b,d,P);else if(ia=Uf(Jb,z),Tf(ia,g,b,d,P),1<ia.length&&w<He)for(db=[],q=ia.length;q--;)db[q]=ia[q]}}P.length&&(bb[a]=P,Ka[a]=U,La[a]=da,cb[a]=\nT)}}return{Zb:c,pb:bb,Mb:Ka,rb:La,Rb:cb}};function Rf(a,b,c){for(var d=c.length,e=0,f,g,h=b.length;e<d;)f=c[e++],g=c[e++],a.push(g-f===h?b:b.slice(f,g));return 0<c.length}function Uf(a,b){var c,d=[];if(c=Wb(a,b)){do{a=[];b=c;do a.push(b);while(b=b.next);d.push(a)}while(c=c.Za)}else Sb(b[0],Tb(a))?d.push(b):Sb(a[0],Tb(b))&&d.push(a);return d}function Tf(a,b,c,d,e){for(var f=0,g=a.length;f<g;f++)e.push(Sf(a[f],b,c,d))}\nfunction Sf(a,b,c,d){var e,f=a.length,g=new Int32Array(2*f),h=0;for(e=0;e<f;e++){var k=a[e];g[h++]=k.x-b>>d;g[h++]=k.y-c>>d}return g}\nGf.prototype.ac=function(a,b){var c=b.Zb,d=b.pb,e=b.Mb,f=b.Rb;b=b.rb;for(var g=[],h,k={Rows:g},m,n=a?a.length:0,q=0,u,I=c.Rows,L=I.length,w;q<L;q+=1)if(d[q]||!this.i){h={};u=I[q];if(n)for(m=0;m<n;m++)u.hasOwnProperty(a[m])&&(h[a[m]]=u[a[m]]);else for(w in u)"$$projected$$"!==w&&(h[w]=u[w]);u.geometry&&(h.geometry=u.geometry);m=void 0;var G,X=h,qa=d[q],O=e[q],bb=b[q],Ka=f[q],La=g;if(qa){var cb=qa.length;if(bb)for(G=O;G--;){if(G){var z={};for(m in X)z[m]=X[m]}else z=X;u=[qa[G]];var T=nb(cb,Ka)-O;for(h=\n0;h<T;h++)bb[h]===G&&u.push(qa[O+h]);T=u.length;if(!G)for(h=Ka;h<cb;h++)u.push(qa[h]);z.$HProjGeometry={paths:u,interiorsIndex:1,outlinesIndex:T};La.push(z)}else X.$HProjGeometry={paths:qa,interiorsIndex:O,outlinesIndex:Ka},La.push(X)}else La.push(X)}c.Meta&&(k.Meta=c.Meta);return k};Gf.prototype.v=function(){var a,b=this.b;for(a in b)b.hasOwnProperty(a)&&(b[a].reject("disposed"),delete b[a])};Gf.prototype.disposeInternal=Gf.prototype.v;\nfunction If(a){for(var b=[],c,d=a.length,e=0;e<d;e++){c=za(a[e]);if(c.rowFilter&&(c.rowFilter=eval("("+c.rowFilter+")"),!r(c.rowFilter)))throw Error("Invalid row filter for layer "+c.layerId);b.push(c)}return b};t("H.service.extension.worker.processor",function(a,b,c){function d(h){e.postMessage(h)}var e=this,f=ya[a];var g=function(h){e.postError(h.toString())};if(0===b)f||(ya[a]=new Gf(c,Vf)),this.postMessage(void 0);else if(f)switch(b){case 1:try{f.kb.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 2:try{f.jb.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 3:f.s();delete ya[a];xa()&&Vf.S();break;default:e.postError("Unsupported command")}});\nvar Vf=new A(26214400),ya=Object.create(Ia,void 0);function Wf(a,b,c){var d=a[b];a=a[b+1];this.Ua=[];this.La=0;this.b=b;this.a=[a-c,d-c,a+c,d+c]}Wf.prototype.fa=function(a,b){var c=a[b];a=a[b+1];b=this.a;return b[1]<=c&&c<=b[3]&&b[0]<=a&&a<=b[2]};Wf.prototype.G=function(){return this.b};var Xf=new F(0,0);function Yf(a,b,c,d,e){d[e]=b;d[e+1]=a}var Zf=new W;function $f(a,b,c,d,e){Zf.Ba(a,b,Xf);d[e]=Xf.x;d[e+1]=Xf.y}\nt("H.clustering.dynamicgrid.worker",function(a,b,c,d,e){var f=e?Yf:$f,g=0;e=!!self.ArrayBuffer;var h=a.byteLength?new Float64Array(a):a,k=h.length/3;a=[];var m=[],n=[],q=e?new Float64Array(2*k):[];k=0;var u=0;for(Zf.ba(d);g<h.length;){var I=h[g++];var L=h[g++];var w=h[g++];f(w,L,d,q,u);for(w=a.length;w--;)if(L=a[w],L.fa(q,u)){var G=L;break}G||(G=new Wf(q,u,b),a.push(G));w=u/2;G.La+=I||1;G.Ua.push(w);G=null;u+=2}for(w=a.length;w--;)L=a[w],b=L.La>=c,f=L.Ua,d=f.length,b?(m.push(d),m=m.concat(f)):\n(k+=d,n=n.concat(f));c=[k].concat(n,m);c=e?(new Uint32Array(c)).buffer:c;this.postMessage(c,[c])});self.addEventListener("message",function(a){a=new kf(a.data);var b=ff[a.b];if(b)try{b.apply(a,a.c)}catch(c){a.postError(c.message)}else a.postError("processor_not_found")});(function(){var a=new kf;var b=function(c,d){jf.apply(a,[c,d,!0])};b("0",gf);b("1",jf);b("2",hf);b("3",pf)})();\n',function t(){var e,n,r;"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||!(module.exports||"undefined"!=typeof window)||(e=t.toString(),n="",r="undefined"!=typeof document&&document.currentScript instanceof HTMLScriptElement?document.currentScript.src:""),function(){function t(t){return i.call(t).slice(8,-1)}var i={}.toString,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(t,e){return t(e={exports:{}},e.exports),e.exports}function s(t){return t&&t.Math==Math&&t}function l(t){try{return!!t()}catch(t){return!0}}function u(t){return"object"==typeof t?null!==t:"function"==typeof t}function c(t){return x?w.createElement(t):{}}function h(t){if(!u(t))throw TypeError(String(t)+" is not an object");return t}function p(t,e){if(!u(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!u(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!u(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!u(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function f(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function d(t,e){try{A(b,t,e)}catch(o){b[t]=e}return e}function y(t){return"Symbol(".concat(void 0===t?"":t,")_",(++M+I).toString(36))}function g(t){return C[t]||(C[t]=O&&L[t]||(O?L:y)("Symbol."+t))}function v(e){var n,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(n=Object(e),P))?r:R?t(n):"Object"==(i=t(n))&&"function"==typeof n.callee?"Arguments":i}var m="object",b=s(typeof globalThis==m&&globalThis)||s(typeof window==m&&window)||s(typeof self==m&&self)||s(typeof o==m&&o)||Function("return this")(),_=!l((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),w=b.document,x=u(w)&&u(w.createElement),k=!_&&!l((function(){return 7!=Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a})),E=Object.defineProperty,T={f:_?E:function(t,e,n){if(h(t),e=p(e,!0),h(n),k)try{return E(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},A=_?function(t,e,n){return T.f(t,e,f(1,n))}:function(t,e,n){return t[e]=n,t},S=a((function(t){var e="__core-js_shared__",n=b[e]||d(e,{});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.1.0",mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})})),M=0,I=Math.random(),O=!l((function(){return!String(Symbol())})),C=S("wks"),L=b.Symbol,P=g("toStringTag"),R="Arguments"==t(function(){return arguments}()),N={};function j(t,e){return Y.call(t,e)}function D(t){return $[t]||($[t]=y(t))}N[g("toStringTag")]="z";var z,F,B,G,U,q,V,Z,W="[object z]"!==String(N)?function(){return"[object "+v(this)+"]"}:N.toString,Y={}.hasOwnProperty,K=S("native-function-to-string",Function.toString),X=b.WeakMap,J="function"==typeof X&&/native code/.test(K.call(X)),$=S("keys"),Q={},tt=b.WeakMap;V=J?(z=new tt,F=z.get,B=z.has,G=z.set,U=function(t,e){return G.call(z,t,e),e},q=function(t){return F.call(z,t)||{}},function(t){return B.call(z,t)}):(Z=D("state"),Q[Z]=!0,U=function(t,e){return A(t,Z,e),e},q=function(t){return j(t,Z)?t[Z]:{}},function(t){return j(t,Z)});var et={set:U,get:q,has:V,enforce:function(t){return V(t)?q(t):U(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=q(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},nt=a((function(t){var e=et.get,n=et.enforce,r=String(K).split("toString");S("inspectSource",(function(t){return K.call(t)})),(t.exports=function(t,e,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,l=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||j(i,"name")||A(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==b?(a?!l&&t[e]&&(s=!0):delete t[e],s?t[e]=i:A(t,e,i)):s?t[e]=i:d(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||K.call(this)}))})),rt=Object.prototype;function it(t){return isNaN(t=+t)?0:(0<t?yt:dt)(t)}function ot(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function at(t){return _t(ot(t))}function st(t){return 0<t?kt(it(t),9007199254740991):0}function lt(t,e){var n,r=at(t),i=0,o=[];for(n in r)!j(Q,n)&&j(r,n)&&o.push(n);for(;e.length>i;)j(r,n=e[i++])&&(~At(o,n)||o.push(n));return o}function ut(t,e){var n=Nt[Rt(t)];return n==Dt||n!=jt&&("function"==typeof e?l(e):!!e)}function ct(t,e){var n,r,i,o,a=t.target,s=t.global,l=t.stat,u=s?b:l?b[a]||d(a,{}):(b[a]||{}).prototype;if(u)for(n in e){if(i=e[n],r=t.noTargetGet?(o=Ft(u,n))&&o.value:u[n],!zt(s?n:a+(l?".":"#")+n,t.forced)&&void 0!==r){if(typeof i==typeof r)continue;!function(t,e){for(var n=Lt(e),r=T.f,i=xt.f,o=0;o<n.length;o++){var a=n[o];j(t,a)||r(t,a,i(e,a))}}(i,r)}(t.sham||r&&r.sham)&&A(i,"sham",!0),nt(u,n,i,t)}}W!==rt.toString&&nt(rt,"toString",W,{unsafe:!0});var ht,pt,ft,dt=Math.ceil,yt=Math.floor,gt={}.propertyIsEnumerable,vt=Object.getOwnPropertyDescriptor,mt={f:vt&&!gt.call({1:2},1)?function(t){var e=vt(this,t);return!!e&&e.enumerable}:gt},bt="".split,_t=l((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==t(e)?bt.call(e,""):Object(e)}:Object,wt=Object.getOwnPropertyDescriptor,xt={f:_?wt:function(t,e){if(t=at(t),e=p(e,!0),k)try{return wt(t,e)}catch(t){}if(j(t,e))return f(!mt.f.call(t,e),t[e])}},kt=Math.min,Et=Math.max,Tt=Math.min,At=(!1,function(t,e,n){for(var r,i,o=at(t),a=st(o.length),s=(r=a,(i=it(n))<0?Et(i+r,0):Tt(i,r));s<a;s++)if(s in o&&o[s]===e)return s||0;return-1}),St=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Mt=St.concat("length","prototype"),It={f:Object.getOwnPropertyNames||function(t){return lt(t,Mt)}},Ot={f:Object.getOwnPropertySymbols},Ct=b.Reflect,Lt=Ct&&Ct.ownKeys||function(t){var e=It.f(h(t)),n=Ot.f;return n?e.concat(n(t)):e},Pt=/#|\.prototype\./,Rt=ut.normalize=function(t){return String(t).replace(Pt,".").toLowerCase()},Nt=ut.data={},jt=ut.NATIVE="N",Dt=ut.POLYFILL="P",zt=ut,Ft=xt.f,Bt=!l((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Gt=D("IE_PROTO"),Ht=Object.prototype,Ut=Bt?Object.getPrototypeOf:function(t){return j(t=Object(ot(t)),Gt)?t[Gt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ht:null},qt=g("iterator"),Vt=!1;function Zt(){}[].keys&&("next"in(ft=[].keys())?(pt=Ut(Ut(ft)))!==Object.prototype&&(ht=pt):Vt=!0),null==ht&&(ht={}),j(ht,qt)||A(ht,qt,(function(){return this}));var Wt={IteratorPrototype:ht,BUGGY_SAFARI_ITERATORS:Vt},Yt=Object.keys||function(t){return lt(t,St)},Kt=_?Object.defineProperties:function(t,e){h(t);for(var n,r=Yt(e),i=r.length,o=0;o<i;)T.f(t,n=r[o++],e[n]);return t},Xt=b.document,Jt=Xt&&Xt.documentElement,$t=D("IE_PROTO"),Qt="prototype",te=function(){var t,e=c("iframe"),n=St.length;for(e.style.display="none",Jt.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),te=t.F;n--;)delete te[Qt][St[n]];return te()},ee=Object.create||function(t,e){var n;return null!==t?(Zt[Qt]=h(t),n=new Zt,Zt[Qt]=null,n[$t]=t):n=te(),void 0===e?n:Kt(n,e)};function ne(t,e,n){t&&!j(t=n?t:t.prototype,se)&&ae(t,se,{configurable:!0,value:e})}function re(){return this}function ie(){return this}function oe(t,e,n,r,i,o,a){var s,l,u;function c(t){if(t===i&&b)return b;if(!fe&&t in v)return v[t];switch(t){case"keys":case de:case ye:return function(){return new n(this,t)}}return function(){return new n(this)}}l=r,u=e+" Iterator",(s=n).prototype=ee(ue,{next:f(1,l)}),ne(s,u,!1),le[u]=re;var h,p,d,y=e+" Iterator",g=!1,v=t.prototype,m=v[he]||v["@@iterator"]||i&&v[i],b=!fe&&m||c(i),_="Array"==e&&v.entries||m;if(_&&(h=Ut(_.call(new t)),pe!==Object.prototype&&h.next&&(Ut(h)!==pe&&(ce?ce(h,pe):"function"!=typeof h[he]&&A(h,he,ie)),ne(h,y,!0))),i==de&&m&&m.name!==de&&(g=!0,b=function(){return m.call(this)}),v[he]!==b&&A(v,he,b),le[e]=b,i)if(p={values:c(de),keys:o?b:c("keys"),entries:c(ye)},a)for(d in p)!fe&&!g&&d in v||nt(v,d,p[d]);else ct({target:e,proto:!0,forced:fe||g},p);return p}Q[$t]=!0;var ae=T.f,se=g("toStringTag"),le={},ue=Wt.IteratorPrototype,ce=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(n){}return function(n,r){return function(t,e){if(h(t),!u(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(n,r),e?t.call(n,r):n.__proto__=r,n}}():void 0),he=g("iterator"),pe=Wt.IteratorPrototype,fe=Wt.BUGGY_SAFARI_ITERATORS,de="values",ye="entries",ge="String Iterator",ve=et.set,me=et.getterFor(ge);oe(String,"String",(function(t){ve(this,{type:ge,string:String(t),index:0})}),(function(){var t,e,n,r,i,o,a,s=me(this),l=s.string,u=s.index;return u>=l.length?{value:void 0,done:!0}:(e=u,i=String(ot(l)),o=it(e),a=i.length,t=o<0||a<=o?"":(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?i.charAt(o):i.slice(o,o+2),s.index+=t.length,{value:t,done:!1})}));var be={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},_e=g("unscopables"),we=Array.prototype;function xe(t){we[_e][t]=!0}null==we[_e]&&A(we,_e,ee(null));var ke="Array Iterator",Ee=et.set,Te=et.getterFor(ke),Ae=oe(Array,"Array",(function(t,e){Ee(this,{type:ke,target:at(t),index:0,kind:e})}),(function(){var t=Te(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");le.Arguments=le.Array,xe("keys"),xe("values"),xe("entries");var Se=g("iterator"),Me=g("toStringTag"),Ie=Ae.values;for(var Oe in be){var Ce=b[Oe],Le=Ce&&Ce.prototype;if(Le){if(Le[Se]!==Ie)try{A(Le,Se,Ie)}catch(o){Le[Se]=Ie}if(Le[Me]||A(Le,Me,Oe),be[Oe])for(var Pe in Ae)if(Le[Pe]!==Ae[Pe])try{A(Le,Pe,Ae[Pe])}catch(o){Le[Pe]=Ae[Pe]}}}function Re(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function Ne(t,e,n){if(Re(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}var je=g("iterator"),De=Array.prototype,ze=g("iterator"),Fe=a((function(t){var e={};(t.exports=function(t,n,r,i,o){var a,s,l,u,c,p,f=Ne(n,r,i?2:1);if(o)a=t;else{if("function"!=typeof(s=function(t){if(null!=t)return t[ze]||t["@@iterator"]||le[v(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(p=s)&&(le.Array===p||De[je]===p)){for(l=0,u=st(t.length);l<u;l++)if((i?f(h(c=t[l])[0],c[1]):f(t[l]))===e)return e;return}a=s.call(t)}for(;!(c=a.next()).done;)if(function(t,e,n,r){try{return r?e(h(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&h(i.call(t)),e}}(a,f,c.value,i)===e)return e}).BREAK=e})),Be=g("iterator"),Ge=!1;try{var He=0;({next:function(){return{done:!!He++}},return:function(){Ge=!0}})[Be]=function(){return this}}catch(o){}function Ue(t,e){var n,r=h(t).constructor;return void 0===r||null==(n=h(r)[Je])?e:Re(n)}function qe(t){var e;an.hasOwnProperty(t)&&(e=an[t],delete an[t],e())}function Ve(t){return function(){qe(t)}}function Ze(t){qe(t.data)}function We(t){b.postMessage(t+"",$e.protocol+"//"+$e.host)}var Ye,Ke,Xe,Je=g("species"),$e=b.location,Qe=b.setImmediate,tn=b.clearImmediate,en=b.process,nn=b.MessageChannel,rn=b.Dispatch,on=0,an={},sn="onreadystatechange";Qe&&tn||(Qe=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return an[++on]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Ye(on),on},tn=function(t){delete an[t]},"process"==t(en)?Ye=function(t){en.nextTick(Ve(t))}:rn&&rn.now?Ye=function(t){rn.now(Ve(t))}:nn?(Xe=(Ke=new nn).port2,Ke.port1.onmessage=Ze,Ye=Ne(Xe.postMessage,Xe,1)):!b.addEventListener||"function"!=typeof postMessage||b.importScripts||l(We)?Ye=sn in c("script")?function(t){Jt.appendChild(c("script"))[sn]=function(){Jt.removeChild(this),qe(t)}}:function(t){setTimeout(Ve(t),0)}:(Ye=We,b.addEventListener("message",Ze,!1)));var ln,un,cn,hn,pn,fn,dn,yn={set:Qe,clear:tn},gn=b.navigator,vn=gn&&gn.userAgent||"",mn=xt.f,bn=yn.set,_n=b.MutationObserver||b.WebKitMutationObserver,wn=b.process,xn=b.Promise,kn="process"==t(wn),En=mn(b,"queueMicrotask"),Tn=En&&En.value;function An(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Re(e),this.reject=Re(n)}function Sn(t,e){if(h(t),u(e)&&e.constructor===t)return e;var n=qn.f(t);return(0,n.resolve)(e),n.promise}function Mn(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}function In(t){return"function"==typeof t?t:void 0}function On(t,e){return arguments.length<2?In(Vn[t])||In(b[t]):Vn[t]&&Vn[t][e]||b[t]&&b[t][e]}function Cn(t){var e;return!(!u(t)||"function"!=typeof(e=t.then))&&e}function Ln(t,e,n){var r;e.notified||(e.notified=!0,r=e.reactions,Un((function(){for(var i=e.value,o=1==e.state,a=0;r.length>a;)!function(n){var r,a,s,l=o?n.ok:n.fail,u=n.resolve,c=n.reject,h=n.domain;try{l?(o||(2===e.rejection&&yr(t,e),e.rejection=1),!0===l?r=i:(h&&h.enter(),r=l(i),h&&(h.exit(),s=!0)),r===n.promise?c(tr("Promise-chain cycle")):(a=Cn(r))?a.call(r,u,c):u(r)):c(i)}catch(n){h&&!s&&h.exit(),c(n)}}(r[a++]);e.reactions=[],e.notified=!1,n&&!e.rejection&&fr(t,e)})))}function Pn(t,e,n){var r,i;ur?((r=er.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),b.dispatchEvent(r)):r={promise:e,reason:n},(i=b["on"+t])?i(r):t===cr&&function(t,e){var n=b.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function Rn(t,e,n,r){return function(i){t(e,n,i,r)}}function Nn(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Ln(t,e,!0))}Tn||(ln=function(){var t,e;for(kn&&(t=wn.domain)&&t.exit();un;){e=un.fn,un=un.next;try{e()}catch(t){throw un?hn():cn=void 0,t}}cn=void 0,t&&t.enter()},hn=kn?function(){wn.nextTick(ln)}:_n&&!/(iphone|ipod|ipad).*applewebkit/i.test(vn)?(pn=!0,fn=document.createTextNode(""),new _n(ln).observe(fn,{characterData:!0}),function(){fn.data=pn=!pn}):xn&&xn.resolve?(dn=xn.resolve(void 0),function(){dn.then(ln)}):function(){bn.call(b,ln)});var jn,Dn,zn,Fn,Bn,Gn,Hn,Un=Tn||function(t){var e={fn:t,next:void 0};cn&&(cn.next=e),un||(un=e,hn()),cn=e},qn={f:function(t){return new An(t)}},Vn=b,Zn=g("species"),Wn="Promise",Yn=yn.set,Kn=g("species"),Xn=et.get,Jn=et.set,$n=et.getterFor(Wn),Qn=b[Wn],tr=b.TypeError,er=b.document,nr=b.process,rr=b.fetch,ir=nr&&nr.versions,or=ir&&ir.v8||"",ar=qn.f,sr=ar,lr="process"==t(nr),ur=!!(er&&er.createEvent&&b.dispatchEvent),cr="unhandledrejection",hr=zt(Wn,(function(){function t(){}var e=Qn.resolve(1),n=(e.constructor={})[Kn]=function(e){e(t,t)};return!((lr||"function"==typeof PromiseRejectionEvent)&&e.then(t)instanceof n&&0!==or.indexOf("6.6")&&-1===vn.indexOf("Chrome/66"))})),pr=hr||!function(t,e){if(!Ge)return!1;var n=!1;try{var r={};r[Be]=function(){return{next:function(){return{done:n=!0}}}},function(t){Qn.all(t).catch((function(){}))}(r)}catch(t){}return n}(),fr=function(t,e){Yn.call(b,(function(){var n,r=e.value;if(dr(e)&&(n=Mn((function(){lr?nr.emit("unhandledRejection",r,t):Pn(cr,t,r)})),e.rejection=lr||dr(e)?2:1,n.error))throw n.value}))},dr=function(t){return 1!==t.rejection&&!t.parent},yr=function(t,e){Yn.call(b,(function(){lr?nr.emit("rejectionHandled",t):Pn("rejectionhandled",t,e.value)}))},gr=function t(e,n,r,i){if(!n.done){n.done=!0,i&&(n=i);try{if(e===r)throw tr("Promise can't be resolved itself");var o=Cn(r);o?Un((function(){var i={done:!1};try{o.call(r,Rn(t,e,i,n),Rn(Nn,e,i,n))}catch(r){Nn(e,i,r,n)}})):(n.value=r,n.state=1,Ln(e,n,!1))}catch(r){Nn(e,{done:!1},r,n)}}};function vr(t){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _r(t,e,n){return e&&br(t.prototype,e),n&&br(t,n),t}function wr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Er(t,e)}function kr(t){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Er(t,e){return(Er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(o){return!1}}function Ar(t,e,n){return(Ar=Tr()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Er(i,n.prototype),i}).apply(null,arguments)}function Sr(t){var e="function"==typeof Map?new Map:void 0;return(Sr=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Ar(t,arguments,kr(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Er(r,t)})(t)}function Mr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ir(t){var e=Tr();return function(){var n,r,i=kr(t);return!(r=e?(n=kr(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments))||"object"!=typeof r&&"function"!=typeof r?Mr(this):r}}function Or(t,e,n){return(Or="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kr(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Cr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||Pr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lr(t){return function(t){if(Array.isArray(t))return Rr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Pr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pr(t,e){if(t){if("string"==typeof t)return Rr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rr(t,e):void 0}}function Rr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nr(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Pr(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}hr&&(Qn=function(t){!function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect Promise invocation")}(this,Qn),Re(t),jn.call(this);var e=Xn(this);try{t(Rn(gr,this,e),Rn(Nn,this,e))}catch(t){Nn(this,e,t)}},(jn=function(){Jn(this,{type:Wn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,n){for(var r in e)nt(t,r,e[r],void 0);return t}(Qn.prototype,{then:function(t,e){var n=$n(this),r=ar(Ue(this,Qn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=lr?nr.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Ln(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Dn=function(){var t=new jn,e=Xn(t);this.promise=t,this.resolve=Rn(gr,t,e),this.reject=Rn(Nn,t,e)},qn.f=ar=function(t){return t===Qn||t===zn?new Dn:sr(t)},"function"==typeof rr&&ct({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Sn(Qn,rr.apply(b,arguments))}})),ct({global:!0,wrap:!0,forced:hr},{Promise:Qn}),ne(Qn,Wn,!1),Fn=On(Wn),Bn=T.f,_&&Fn&&!Fn[Zn]&&Bn(Fn,Zn,{configurable:!0,get:function(){return this}}),zn=Vn[Wn],ct({target:Wn,stat:!0,forced:hr},{reject:function(t){var e=ar(this);return e.reject.call(void 0,t),e.promise}}),ct({target:Wn,stat:!0,forced:hr},{resolve:function(t){return Sn(this,t)}}),ct({target:Wn,stat:!0,forced:pr},{all:function(t){var e=this,n=ar(e),r=n.resolve,i=n.reject,o=Mn((function(){var n=Re(e.resolve),o=[],a=0,s=1;Fe(t,(function(t){var l=a++,u=!1;o.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,o[l]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=ar(e),r=n.reject,i=Mn((function(){var i=Re(e.resolve);Fe(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),ct({target:"Promise",proto:!0,real:!0},{finally:function(t){var e=Ue(this,On("Promise")),n="function"==typeof t;return this.then(n?function(n){return Sn(e,t()).then((function(){return n}))}:t,n?function(n){return Sn(e,t()).then((function(){throw n}))}:t)}}),Vn.Promise,"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}),"function"!=typeof Object.values&&(Object.values=function(t){return Object.keys(t).map((function(e){return t[e]}))}),Math.hypot=Math.hypot||function(){for(var t=0,e=arguments.length,n=0;n<e;n++){if(arguments[n]===1/0||arguments[n]===-1/0)return 1/0;t+=arguments[n]*arguments[n]}return Math.sqrt(t)},Math.log2=Math.log2||function(t){return Math.log(t)*Math.LOG2E},"undefined"!=typeof window?("performance"in window==0&&(window.performance={}),Gn=window.performance):"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&("performance"in self==0&&(self.performance={}),Gn=self.performance),Gn&&"function"!=typeof Gn.now&&(Hn=+new Date,Gn.now=function(){return new Date-Hn});var jr=Dr;function Dr(t,e){this.x=t,this.y=e}Dr.prototype={clone:function(){return new Dr(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Dr.convert=function(t){return t instanceof Dr||!Array.isArray(t)?t:new Dr(t[0],t[1])};var zr=Fr;function Fr(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(Br,this,e)}function Br(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}Fr.types=["Unknown","Point","LineString","Polygon"],Fr.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n,r=t.readVarint()+t.pos,i=1,o=0,a=0,s=0,l=[];t.pos<r;)if(o||(i=7&(n=t.readVarint()),o=n>>3),o--,1===i||2===i)a+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&l.push(e),e=[]),e.push(new jr(a,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}return e&&l.push(e),l},Fr.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=1/0,l=-1/0,u=1/0,c=-1/0;t.pos<n;)if(i||(r=7&(e=t.readVarint()),i=e>>3),i--,1===r||2===r)(o+=t.readSVarint())<s&&(s=o),l<o&&(l=o),(a+=t.readSVarint())<u&&(u=a),c<a&&(c=a);else if(7!==r)throw new Error("unknown command "+r);return[s,u,l,c]},Fr.prototype.toGeoJSON=function(t,e,n){var r,i=this.extent*Math.pow(2,n),o=this.extent*t,a=this.extent*e,s=this.loadGeometry(),l=Fr.types[this.type];function u(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+a)/i;t[e]=[360*(n.x+o)/i-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:for(var c=[],h=0;h<s.length;h++)c[h]=s[h][0];u(s=c);break;case 2:for(h=0;h<s.length;h++)u(s[h]);break;case 3:for(s=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=function(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],r+=((n=t[a]).x-e.x)*(e.y+n.y);return r}(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(s),h=0;h<s.length;h++)for(r=0;r<s[h].length;r++)u(s[h][r])}1===s.length?s=s[0]:l="Multi"+l;var p={type:"Feature",geometry:{type:l,coordinates:s},properties:this.properties};return"id"in this&&(p.id=this.id),p};var Gr=Hr;function Hr(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Ur,this,e),this.length=this._features.length}function Ur(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1==r?t.readString():2==r?t.readFloat():3==r?t.readDouble():4==r?t.readVarint64():5==r?t.readVarint():6==r?t.readSVarint():7==r?t.readBoolean():null}return e}(n))}function qr(t,e,n){var r;3!==t||(r=new Gr(n,n.readVarint()+n.pos)).length&&(e[r.name]=r)}Hr.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new zr(this._pbf,e,this.extent,this._keys,this._values)};var Vr,Zr=function(t,e){this.layers=t.readFields(qr,{},e)},Wr=zr,Yr="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Kr={};(function(){var t,e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r="undefined"!=typeof window&&window===this||void 0===Yr||null==Yr?this:Yr;if("function"==typeof Object.setPrototypeOf)t=Object.setPrototypeOf;else{t:{var i={};try{i.__proto__={ea:!0},e=i.ea;break t}catch(t){}e=!1}t=e?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var o=t;!function(t,e){if(e){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&n(i,t,{configurable:!0,writable:!0,value:e})}}("Object.setPrototypeOf",(function(t){return t||o}));var a=this||self;function s(t){var e=vr(t);if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function l(t){return"function"==s(t)}function u(t){var e=vr(t);return"object"==e&&null!=t||"function"==e}function c(t,e){t=t.split(".");var n,r=a;t[0]in r||void 0===r.execScript||r.execScript("var "+t[0]);for(;t.length&&(n=t.shift());)t.length||void 0===e?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=e}function h(t,e){function n(){}n.prototype=e.prototype,t.ua=e.prototype,t.prototype=new n,t.prototype.constructor=t}var p=Math,f=p.min,d=p.max,y=p.round,g=p.floor,v=p.ceil,m=p.abs,b=p.log,_=p.sqrt,w=p.pow,x=p.sin,k=p.asin,E=p.cos,T=p.tan,A=p.atan2,S=p.PI,M=S/2,I=S/4,O=2*S,C=3*S,L=S/180,P=180/S;function R(t,e,n){return n<t?n:t<e?e:t}function N(t,e,n){return e<n?e<=t&&t<=n:n<=t&&t<=e}function j(t,e,n,r,i,o){return _(w((t-i)*(r-o)-(e-o)*(n-i),2)/(w(n-i,2)+w(r-o,2)))}c("H.math.normalize",(function(t,e,n){return e-=n=n||0,(t-=n)-g(t/e)*e+n})),c("H.math.clamp",R);var D={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function z(t,e){var n=t.x;t=t.y;for(var r,i,o,a,s=e.length,l=s,u=e[0],c=0,h=0,p=0;1!=c&&1<l;)i=e[--l],r=e[--l],a=e[l?l-1:(s+(l-1))%s],o=e[l?l-2:(s+(l-2))%s],n<=r&&r<=n&&t<=i&&i<=t||n<=o&&o<=n&&t<=a&&a<=t?c=1:c||r!==n?!c&&N(n,r,o)&&((r<n&&n<o||n<r&&o<n)&&(h+=t<(u=i+(n-r)/(o-r)*(a-i)),p+=u<t),c=N(t,i,a)&&j(n,t,r,i,o,a)<=0?2:0):(o===n&&(i<t&&t<a||t<i&&a<t)||(u<=n&&n<o||n<=u&&o<n)&&(t<=i?++h:++p),c=N(t,i,a)&&j(n,t,r,i,o,a)<=0?2:0),u=r;return c||0===p||0==h%2||(c=3),c!==D.NONE}function F(t,e){this.x=+t,this.y=+e}function B(t,e,n,r,i,o,a,s,l,u){return t={x:t,y:e,next:n||null,s:r||null,ta:i||null,X:o||null,o:!!a,T:s||0,O:l||0,alpha:u||0},r&&(t.s.next=t),n&&(t.next.s=t),t}function G(t){for(;t&&t.o;)t=t.next;return t}function H(t){if(t)for(;t.next;)t=t.next;return t}function U(t){var e=H(t);(e.s.next=t).s=e.s}function q(t){for(var e=[];t;)e.push(t.x,t.y),t=t.next;return e}function V(t,e,n){for(e=e.next;e!==n&&e.alpha<=t.alpha;)e=e.next;t.next=e,t.s=e.s,(t.next.s=t).s.next=t}function Z(t,e){for(var n,r=null,i=0,o=t.length;i<o;i++)(n=B(t[i].x,t[i].y,r)).qa=e,(n.next=r)&&(r.s=n),r=n;return r}function W(t,e,n,r){return(t-=n)*t+(e-=r)*e}c("H.math.CoverType",D),c("H.math.isPointInsidePolygon",z),c("H.math.flatten",(function(t){for(var e=t.length,n=new Float64Array(2*e),r=e&&t[0].x!==X;e--;){var i=t[e],o=e<<1;n[o]=r?i.x:i[0],n[1+o]=r?i.y:i[1]}return n})),c("H.math.Point",F),(F.prototype.set=F).prototype.clone=function(t){return t?(t.x=this.x,t.y=this.y):t=new F(this.x,this.y),t},F.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},F.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},F.prototype.scale=function(t,e){return this.x*=t,this.y*=void 0===e?t:e,this},F.prototype.round=function(){return this.x=y(this.x),this.y=y(this.y),this},F.prototype.floor=function(){return this.x=g(this.x),this.y=g(this.y),this},F.prototype.ceil=function(){return this.x=v(this.x),this.y=v(this.y),this},F.prototype.equals=F.prototype.w=function(t){return!(!t||this.x!==t.x||this.y!==t.y)},F.prototype.getNearest=F.prototype.la=function(t,e){var n,r=e.x-t.x,i=e.y-t.y,o=t;return(r||i)&&(o=(n=((this.x-t.x)*r+(this.y-t.y)*i)/(r*r+i*i))<=0?t:1<=n?e:new F(t.x+n*r,t.y+n*i)),o},F.prototype.distance=F.prototype.R=function(t){return _(w(this.x-t.x,2)+w(this.y-t.y,2))},F.fromIPoint=function(t){if(!t)throw Error("invalid argument");return t instanceof F?t:new F(t.x,t.y)},c("H.math.clipping.clipStrips",(function(t,e,n,r,i,o){var a,s,l,u=t.length;if(u)for(a=[];u--;)for(var c,h,p=t[u],f=p.length,d=0,y=1;y<f;y++)(l=function(t,e,n,r,i,o){var a=t.x;t=-t.y;var s=e.x;if(e=-e.y,n=-n,o=-o,s<a){if(i<s||a<r)return;var l=a,u=t;a=s,t=e,s=l,e=u,l=1}else if(i<a||s<r)return;if(e<t){if(n<e||t<o)return;var c=1;t=-t,e=-e,u=o,o=-n,n=-u}else if(n<t||e<o)return;if(a<r){if((t+=(r-a)*(e-t)/(s-a))>n)return;a=r}if(t<o){if((a+=(o-t)*(s-a)/(e-t))>i)return;t=o}return i<s&&(e=t+(i-a)*(e-t)/(s-a),s=i),n<e&&(s=a+(n-t)*(s-a)/(e-t),e=n),c&&(t=-t,e=-e),l?[new F(s,-e),new F(a,-t)]:[new F(a,-t),new F(s,-e)]}(p[y-1],p[y],n,e,r,i))&&(c=l[0],h=l[1],d&&d.w(c)?s.push(h):a.push(s=l),d=h,o&&(y=f,u=0));else a=t;return a})),c("H.math.clipping.clipPolygon",(function(t,e,n){var r;t=Z(t,!0),e=Z(e,!1);var i={},o=r=1;switch(~~(n||0)){case 1:o=r=0;break;case 2:r=0,o=1;break;case 3:r=1,o=0}n=r;var a,s,l,u,c,h,p=o;if(e&&t){for(e.M=B(e.x,e.y,null,H(e)),t.M=B(t.x,t.y,null,H(t)),o=e;o.next;o=o.next)if(!o.o)for(r=t;r.next;r=r.next)r.o||(h=function t(e,n,r,i,o){var a,s=n.x-e.x,l=n.y-e.y,u=i.x-r.x,c=i.y-r.y,h=s*c-l*u;return h?(u=((r.x-e.x)*c-(r.y-e.y)*u)/h,h=(l*(r.x-e.x)-s*(r.y-e.y))/h,u<0||1<u||h<0||1<h?0:(0===u?a=e:1===u?a=n:0===h?a=r:1===h&&(a=i),a?(a.x+=2480549651603763e-20,a.y+=7321997314118067e-20,a.M&&(a.M.x=a.x,a.M.y=a.y),t(e,n,r,i,o)):(o.xa=e.x+u*s,o.ya=e.y+u*l,o.fa=u,o.ga=h,1))):0}(o,a=G(o.next),r,s=G(r.next),i))&&(h=i.fa,l=i.ga,V(h=B(u=i.xa,c=i.ya,null,null,null,null,!0,0,0,h),o,a),V(a=B(u,c,null,null,null,null,!0,0,0,l),r,s),(h.X=a).X=h);for(i=z(e,q(t)),n&&(i=!i),o=e;o;o=o.next)o.o&&(i=!(o.T=i));for(i=z(t,q(e)),p&&(i=!i),r=t;r.next;r=r.next)r.o&&(i=!(r.T=i));for(U(e),U(t);(t=function(t){var e=t;if(e)for(;(e=e.next)!=t&&(!e.o||e.o&&e.O););return e}(e))!=e;){for(n=null;!t.O;t=t.X){for(i=t.T;(n=B(t.x,t.y,n)).artificial=t.o||t.qa,t.O=1,t=i?t.next:t.s;)if(t.o){t.O=1;break}if(!t)break}n.ta=f;var f=n}return f}})),c("H.math.simplifyDP",(function(t,e,n){return function t(e,n,r,i,o){var a=0,s=i,l=e[i].x,u=e[i].y,c=e[o].x,h=e[o].y,p=i+1,f=W(l,u,c,h);if(f)for(;p<o;){var d=e[p++],y=d.x,g=((y-l)*(c-l)+((d=d.y)-u)*(h-u))/f;a<(y=g<0?W(y,d,l,u):1<g?W(y,d,c,h):W(y,d,l+g*(c-l),u+g*(h-u)))&&(a=y,s=p-1)}else for(;p<o;)a<(y=W(y=(d=e[p++]).x,d=d.y,l,u))&&(a=y,s=p-1);return i=n<=a||0<r&&s-i?(--r,1<s-i?(i=t(e,n,r,i,s)).splice(i.length-1,1):i=[e[i]],1<o-s?i.concat(t(e,n,r,s,o)):i.concat(e.slice(s,o+1))):[e[i],e[o]]}(t,e*e,n||0,0,t.length-1)}));var Y=this,K=String,X=[].pop(),J=/x/.exec(""),$="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(t,e){if(1==(t instanceof e&&t.constructor===e))throw new TypeError("Illegal constructor "+it(e))}c("H.lang.isArray",(function(t,e,n,r){var i;if(!(i="Array"===nt(t))&&e)throw new ut(e,n,r!==X?r:t);return i})),c("H.lang.isString",(function(t){return"string"==typeof t}));var tt=isNaN;function et(t){return t===+t}function nt(t){var e=Object[$[0]][$[6]].call(t).match(/^\[object (\w+)\]$/);return e?e[1]:vr(t)}c("H.lang.isNumber",et),c("H.lang.isInteger",Number.isInteger?Number.isInteger:function(t){return"number"==typeof t&&0==t%1});var rt=[];function it(t,e,n,r){var i,o,a="",s=arguments.length<2;return s&&(e={H:Y.H},n="",r=rt.slice()),st(e,!0,(function(e,o){try{if(i=e[o],s=i,st(e,!(c=[]),(function(t,e){t[e]===s&&c.push(e)})),o=c.sort(ot)[0],!(u(i)&&i.window===i&&i.self===i||u(i)&&0<i.nodeType&&l(i.cloneNode))&&u(i)){if(i===t)return a=n+"."+o,1;if(r.indexOf(i)<0&&(r.push(i),a=it(t,i,n+"."+o,r)))return 1}}catch(e){}var s,c})),s&&(a=a?a.substr(1).replace("."+$[0]+".","#"):"~"+(l(t)?((o=/^\s*function ([^\( ]+)/.exec(o=t))?o[1]:"anonymous")+"()":nt(t))),a}function ot(t,e){return e.length-t.length}rt.indexOf(rt)<0&&rt.push(rt);var at=Object[$[0]][$[2]];function st(t,e,n){var r;if(t){for(i in t)if((!e||at.call(t,i))&&n(t,i,!0))return;for(r=$.length;r--;){var i=$[r];if((!e||at.call(t,i))&&n(t,i,!1))break}}}function lt(t,e,n){n[e]="#"+e}function ut(t,e,n){var r,i,o=arguments.length;return(e=e!==X?+e:e)!==X&&((i=r=(i=/^.*?\(([^\)]+)/.exec((""+t).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?K(i[1].replace(/\s+/g,"")).split(","!==X?",":" "):[]).forEach(lt),i=i[e]||"#"+e),r=t?it(t):"",o=2<o?K(n):"",(i||o)&&(r+=" (Argument "+(i||"")+(o?" "+o:"")+")"),o=Error(r),Object.setPrototypeOf(o,ut.prototype),o}function ct(t,e,n){var r=R(+t,-90,90);if(e&&tt(r))throw new ut(e,n,t);return r}function ht(t,e,n){var r,i=+t;if((i<-180||180<i)&&(i=(0==(r=(i+180)%360)<0?r:360+r)-180),e&&tt(i))throw new ut(e,n,t);return i}function pt(t,e,n){var r;if(t!==X&&tt(r=+t)&&e)throw new ut(e,n,t);return r}function ft(){Q(this,ft)}function dt(t,e,n){this.lat=ct(t,dt,0),this.lng=ht(e,dt,1),n!==X&&(this.alt=pt(n,dt,2))}function yt(t,e,n){var r=u(t)&&!(tt(t.lat=ct(t.lat))||tt(t.lng=ht(t.lng))||t.alt!==X&&tt(t.alt=pt(t.alt)));if(!r&&e)throw new ut(e,n,t);return r}function gt(t,e,n,r){vt(this,ct(t,gt,0),ht(e,gt,1),ct(n,gt,2),ht(r,gt,3))}function vt(t,e,n,r,i){return t.f=n,t.g=i,e<r&&(n=e,e=r,r=n),t.i=e,t.h=r,t.m=t.b=t.c=null,t}function mt(t,e){return(t=e-t)+(t<0?360:0)}function bt(t,e){return(t+=e/2)-(180<t?360:0)}function _t(t,e,n,r,i,o,a,s,l){n=f(n,a),t=d(t,i);var u=bt(e,i=mt(e,r)),c=bt(o,a=mt(o,s))-u,h=(c+=c-1e-6<0?360:0)-1e-6<180?(u=e,s):(c=360-c,u=o,r);return 360<=(c=c+i/2+a/2)+5e-7?(u=-180,h=180):c-5e-7<i?(u=e,h=r):c-5e-7<a&&(u=o,h=s),l?vt(l,t,u,n,h):new gt(t,u,n,h)}function wt(t,e,n){return n||(yt(t,wt,0),yt(e,wt,1)),new gt(t.lat,t.lng,e.lat,e.lng)}function xt(t,e,n,r,i,o){Q(this,xt),this.sa=t||10,this.c=this.b=null,this.j=r||0,this.l=i||0,this.m=e||1,this.u=n||1,this.I=!!o,this.flush()}function kt(t,e,n){var r,i;if(t.I&&(r=t.c))for(i=3;0<=i;i--){var o=e[i];if(i%3?o>=r[i]:o<=r[i]){if(!n){t.c=null;break}r[i]=o}}}function Et(t,e){var n,r=t.a;if(e){var i=e;if(i!==r)for(r=i;i=i.c;)(i.entries||1<i.a)&&(r=i)}else for(;!r.entries&&(n=r.a)<2&&n;)r=i;t.a=r}h(ut,Error),c("H.lang.InvalidArgumentError",ut),ut.prototype.name="InvalidArgumentError",c("H.geo.isDBC",(function(t,e){return 0!=(t<0^e<0)&&180<m(e-t)})),c("H.geo.AbstractGeometry",ft),ft.prototype.getBoundingBox=ft.prototype.D,ft.prototype.equals=ft.prototype.w,ft.prototype.a="",ft.prototype.l="",ft.prototype.toString=function(){return this.I([this.a.toUpperCase()," "]).join("")},ft.prototype.toGeoJSON=ft.prototype.va=function(){return{type:this.l,coordinates:this.u()}},ft.prototype.forWorkerMessage=ft.prototype.U=function(){return{type:this.a,coordinates:this.j(),boundingBox:this.D().U()}},h(dt,ft),c("H.geo.Point",dt),dt.prototype.equals=dt.prototype.w=function(t){return this===t||!!t&&this.lat===t.lat&&this.lng===t.lng&&(this.alt||0)===(t.alt||0)},dt.prototype.distance=dt.prototype.R=function(t){var e,n;return this===t||this.lat===t.lat&&this.lng===t.lng?0:(e=this.lat*L,n=t.lat*L,12742001.58*k(f(1,_(w(x((e-n)/2),2)+E(e)*E(n)*w(x((this.lng*L-t.lng*L)/2),2)))))},dt.prototype.walk=dt.prototype.wa=function(t,e,n){var r,i,o,a,s,l,u;return n?((e/=6371000.79)&&(t*=L,s=L*this.lat,r=x(s),i=x(e),o=E(e),a=L*this.lng,l=E(s),s=k(l*E(t)*i+r*o),l=(t=(a+(t=A(x(t)*l*i,o-r*x(s)))+S)%(2*S)-S)*P),e?new dt(s*P,(l+540)%360-180):this):0==(90+(t=(t%360+360)%360))%180?(s=this.lng+e/(6371000.79*O*E(this.lat*L))*(270===t?-360:360),new dt(this.lat,(s+540)%360-180)):((e/=6371000.79)&&(t*=L,a=this.lat*L,r=this.lng*L,o=(i=a+e*E(t))-a,s=b(T(i/2+I)/T(a/2+I)),s=tt(o/s)?E(a):o/s,u=e*x(t)/s,m(i)>M&&(i=0<i?S-i:-(S+i))),e?new dt(i*P,((r+u+C+(m(a+o)>M?S:0))%O-S)*P):this)},dt.prototype.getBoundingBox=dt.prototype.D=function(){return new gt(this.lat,this.lng,this.lat,this.lng)},dt.validate=yt,dt.fromIPoint=function t(e){if(!e)throw new ut(t,0,e);return new dt(e.lat,e.lng,e.alt)},dt.prototype.a="Point",dt.prototype.I=function(t){return t.push("(",this.lng," ",this.lat,")"),t},dt.prototype.l="Point",dt.prototype.u=function(){return[this.lng,this.lat,this.alt||0]},dt.prototype.j=function(){return[this.lat,this.lng,this.alt||0]},h(gt,ft),c("H.geo.Rect",gt),gt.prototype.a="Polygon",gt.prototype.I=function(t){var e=this.i,n=this.f,r=this.h,i=this.g;return t.push("(","(",n," ",e,",",i," ",e,",",i," ",r,",",n," ",r,",",n," ",e,")",")"),t},gt.prototype.equals=gt.prototype.w=function(t){return this===t||!!t&&this.i===t.i&&this.f===t.f&&this.h===t.h&&this.g===t.g},gt.prototype.clone=function(){return new gt(this.i,this.f,this.h,this.g)},gt.prototype.getTopLeft=gt.prototype.W=function(){return this.m||(this.m=new dt(this.i,this.f)),this.m},gt.prototype.getBottomRight=gt.prototype.V=function(){return this.b||(this.b=new dt(this.h,this.g)),this.b},gt.prototype.getTop=gt.prototype.na=function(){return this.i},gt.prototype.getBottom=gt.prototype.ha=function(){return this.h},gt.prototype.getLeft=gt.prototype.ja=function(){return this.f},gt.prototype.getRight=gt.prototype.ma=function(){return this.g},gt.prototype.getCenter=gt.prototype.F=function(){return this.c||(this.c=new dt(this.h+(this.i-this.h)/2,bt(this.f,this.A()))),this.c},gt.prototype.getWidth=gt.prototype.A=function(){return mt(this.f,this.g)},gt.prototype.getHeight=gt.prototype.G=function(){return this.i-this.h},gt.prototype.isCDB=gt.prototype.N=function(){return this.f>this.g},gt.prototype.isEmpty=gt.prototype.ra=function(){return!this.A()&&!this.G()},gt.prototype.getBoundingBox=gt.prototype.D=function(){return new gt(this.i,this.f,this.h,this.g)},gt.prototype.containsLatLng=gt.prototype.L=function(t,e,n){var r=this.F();return n||(t=ct(t,this.L,0),e=ht(e,this.L,1)),(t=(e=this.B(t,e,n)).F()).lat===r.lat&&t.lng===r.lng&&this.G()===e.G()&&this.A()===e.A()},gt.prototype.containsPoint=gt.prototype.$=function(t,e){return e||yt(t,this.$,0),this.L(t.lat,t.lng,e)},gt.prototype.containsRect=gt.prototype.aa=function(t,e){var n=this.F();if(!(e||t instanceof gt))throw new ut(this.aa,0,t);return(t=(e=this.J(t,e)).F()).lat===n.lat&&t.lng===n.lng&&this.G()===e.G()&&this.A()===e.A()},gt.prototype.mergeLatLng=gt.prototype.B=function(t,e,n,r){if(!n){if(tt(t=ct(t)))throw new ut(this.B,0,t);if(tt(e=ht(e)))throw new ut(this.B,1,e)}return _t(this.i,this.f,this.h,this.g,t,e,t,e,r)},gt.prototype.mergePoint=gt.prototype.ca=function(t,e,n){return e||yt(t,this.ca,0),this.B(t.lat,t.lng,e,n)},gt.prototype.mergeRect=gt.prototype.J=function(t,e,n){if(!(e||t instanceof gt))throw new ut(this.J,0,t);return _t(this.i,this.f,this.h,this.g,t.i,t.f,t.h,t.g,n)},gt.prototype.mergeTopLeftBottomRight=gt.prototype.C=function(t,e,n,r,i,o){return i||(t=ct(t,this.C,0),e=ht(e,this.C,1),n=ct(n,this.C,2),r=ht(r,this.C,3)),_t(this.i,this.f,this.h,this.g,t,e,n,r,o)},gt.prototype.intersects=gt.prototype.ba=function(t,e){var n=this.f<=this.g,r=t.f<=t.g,i=this.f<t.g,o=t.f<this.g;if(!(e||t instanceof gt))throw new ut(this.ba,0,t);return this.h<=t.i&&t.h<=this.i&&(!n&&(!r||i||o)||!r&&(i||o)||i&&o)},gt.merge=_t,gt.fromPoints=wt,gt.coverPoints=function t(e,n){var r=1,i=e.length,o=null,a=s(e);if("array"!=a&&("object"!=a||"number"!=typeof e.length))throw new ut(t,0,e);if(0<i)for(o=wt(a=e[0],a,n);r<i;r++)a=e[r],o.B(a.lat,a.lng,n,o);return o},gt.coverLatLngAlts=function t(e,n){var r,i=3,o=e.length;if(!(n||e&&null!=e.length))throw new ut(t,0,e);if(0<o)for(r=new gt(e[0],e[1],e[0],e[1]);i<o;i+=3)r.B(e[i],e[i+1],n,r);return r},gt.coverRects=function t(e,n){var r,i=1,o=e.length;if(n&&(!e||null==e.length))throw new ut(t,0,e);if(0<o)for(r=new gt(e[0].i,e[0].f,e[0].h,e[0].g);i<o;i++)r.J(e[i],n,r);return r},gt.prototype.resizeToCenter=gt.prototype.da=function(t,e){var n=this.f,r=this.i,i=this.g,o=this.h,a=this.F().lng;yt(t,this.da,0);var s=t.lat-o-(r-o)/2,l=t.lng-a;return t=(t=n+((l=180<l||l<-180?-(a+t.lng):l)<0?2*l:0))<-180?360+t:t,i=180<(i+=0<l?2*l:0)?i-360:i,90<=(r=0<s?r+2*s:r)&&(r=90),(o=s<0?o+2*s:o)<=-90&&(o=-90),e?vt(e,r,t,o,i):new gt(r,t,o,i)},gt.prototype.l="Polygon",gt.prototype.u=function(){return[[this.f,this.i,0],[this.g,this.i,0],[this.g,this.h,0],[this.f,this.h,0],[this.f,this.i,0]]},gt.prototype.U=function(){return this.j()},gt.prototype.j=function(){return[this.i,this.f,this.h,this.g]},xt.prototype.remove=function(t){var e,n,r,i,o,a,s=!1;if(t&&(e=t.a)&&e.b===this&&(n=e.entries)&&0<=(r=n.indexOf(t))){for(n.splice(r,1),n=this.a;e;)(i=e.entries)&&i.length||(i&&delete e.entries,e.a||!(o=e.c))?e=J:((r=o)[a=(s=e).j]===s&&(delete r[a],delete s.c,--r.a),n===e&&(n=o),e=o);this.a!==n&&(this.a=n,Et(this)),kt(this,t,!1),s=!0}return s},xt.prototype.flush=function(){var t=new At(null,NaN,this.j-this.m,this.l-this.u,this.j+this.m,this.l+this.u);(t.b=this).a=this.b=t,this.c=null},xt.prototype.o=function(t,e,n,r,i,o){var a=[],s=this.a,l=this.b;return t<=s[5]&&e<=s[6]&&(i?n>=s[7]:n>s[7])&&(o?r>=s[4]:r>s[4])&&function t(e,n,r,i,o,a,s,l,u){var c,h=n.entries,p=n[7],f=n[4],d=n[5],y=n[6],g=n[8],v=n[9];if(h){var m=h.length;if(f<o||p<i||s<y||a<d)for(;m--;)f=(p=h[m])[3],d=p[0],y=p[1],o<=p[2]&&i<=y&&(d<s||l&&d==s)&&(f<a||u&&f==a)&&r.push(p);else for(;m--;)r.push(h[m])}(g<a||u&&a==g)&&(o<v&&(c=n[1])&&t(e,c,r,i,o,a,s,l,u),(v<s||l&&s==v)&&(c=n[3])&&t(e,c,r,i,o,a,s,l,u)),i<g&&(o<v&&(c=n[0])&&t(e,c,r,i,o,a,s,l,u),(v<s||l&&s==v)&&(c=n[2])&&t(e,c,r,i,o,a,s,l,u))}(this,s,a,t,e,n,r,o||r>=l[6],i||n>=l[5]),a};var Tt=0;function At(t,e,n,r,i,o){this.j=e,t&&(this.c=t,this.b=t.b,i=1&e?(n=t[8],t[5]):(n=t[7],t[8]),o=2&e?(r=t[9],t[6]):(r=t[4],t[9])),this[7]=n,this[5]=i,this[8]=(n+i)/2,this[4]=r,this[6]=o,this[9]=(r+o)/2}function St(t,e,n,r,i,o){St.ua.constructor.apply(this,arguments)}function Mt(t,e,n,r,i,o,a){var s,l,u=e[8],c=e[9];return a&&(i<u||(s=u<=n))&&(o<c||(l=c<=r))?n=(u=Mt)(t,e=e[s|=l<<1]||(++e.a,e[s]=new At(e,s)),n,r,i,o,a-1):(r=n=new It(n,r,i,o),(e.entries||(e.entries=[])).push(r),r.a=e,kt(t,n,!0),Et(t,e)),n}function It(t,e,n,r){this.id=Tt++,this[0]=e,this[1]=n,this[2]=r,this[3]=t}function Ot(t){this.l=new St(+t||10,180,90,0,0,!0),this.j=[],this.m=!1,this.a=this.b=this.c=null}function Ct(t,e,n,r,i,o){if(o)o=new It(i,-e,n+360,-r),t.j.push(o),t.m=!0,t.a&&t.a.C(e,n,r,i,!0,t.a);else{var a=-e,s=-r,l=(o=t.l).b,u=l[5],c=l[6];if(!(l[7]<=n&&l[4]<=a&&(i<u||u===i&&u===l.b.b[5])&&(s<c||c===s&&c===l.b.b[6])))throw Error("Coordinates out of bounds");o=Mt(o,o.b,n,a,i,s,o.sa),t.b&&t.b.C(e,n,r,i,!0,t.b)}return t.c=null,o}function Lt(t,e,n,r,i,o,a){var s=(t=t.j).length,l=[];if(s)for(var u=n+360,c=i+360;s--;){var h=t[s];(Pt(h,e,n,r,i,o,a)||Pt(h,e,u,r,c,o,a))&&l.push(h)}return l}function Pt(t,e,n,r,i,o,a){var s=t[3],l=t[0],u=t[1];return t=t[2],(o?l<=r:l<r)&&(a?s<=i:s<i)&&e<=t&&n<=u}function Rt(t,e){var n,r;if(n=e.length){for(var i=t.length,o={};i--;)o[t[i].id]=1;for(;n--;)(r=e[n]).id in o||t.push(r)}}function Nt(){}function jt(t,e,n){if(this.l=[],e&&this.K(e),n&&!l(n))throw new ut(jt,2,n);this.b=0,this.m=n,this.a={},this.j=this.c=null,this.Z(t)}function Dt(t,e){return e&&(t.c=Ft(t,e,t.c)),e}function zt(t){for(;t.b>t.u&&t.j;)Bt(t,t.j,!0)}function Ft(t,e,n){return n!==e&&((e.H||e.v)&&Bt(t,e,!1),(e.H=n)&&(e.v=n.v,n.v=e),e.v||(t.c=e),e.H||(t.j=e),t.b+=e.size),e}function Bt(t,e,n){var r=e.v,i=e.H;(r||i||e==t.c&&e==t.j)&&(r?r.H=i:t.c=i,i?i.v=r:t.j=r,t.b-=e.size,n&&(delete t.a[e.id],Gt(t,e))),e.H=e.v=null}function Gt(t,e){for(var n=t.l.length;n--;)t.l[n].call(t,e.id,e.data,e.size)}At.prototype.a=0,h(St,xt),c("H.geo.QuadTree",Ot),Ot.prototype.N=function(){return this.m},Ot.prototype.D=function(){var t;if(!this.c){var e,n,r=[];if((a=!this.b)&&(s=(o=this.l).c,o.I&&!s&&((a=o.a).entries||a[0]||a[1]||a[2]||a[3])&&(s=function t(e,n){for(var r,i,o=0,a=3;0<=a;a--){for(var s=a+4,l=0<a%3,u=[],c=n[a],h=e[a],p=h.length;p--;){var f=h[p];if(r=f.entries)for(i=r.length;i--;){var d=r[i][a];(l?c<d:d<c)&&(c=d)}for(i=4;i--;)(r=f[i])&&(l?r[s]>c:r[s]<c)&&u.push(r)}o+=u.length,n[a]=c,e[a]=u}return o&&(n=t(e,n)),n}([s=[a],s,s,s],[a[6],a[7],a[4],a[5]]),o.c=s),a=o=s),a&&(this.b=new gt(-o[0],o[3],-o[2],o[1])),(t=this.b)&&r.push(t),!this.a&&(n=(e=this.j).length)){for(a=360,s=-(o=90),l=0;n--;)var i=e[n],o=f(o,i[0]),a=f(a,i[3]),s=d(s,i[2]),l=d(l,i[1]);this.a=new gt(-o,a,-s,l-360)}(t=this.a)&&r.push(t),(t=r[0])&&(r[1]&&(t=t.J(r[1],!0)),this.c=t)}return this.c},Ot.prototype.insertBoundingBox=Ot.prototype.oa=function(t){var e=t.W(),n=t.V();return(t=t.N())?Ct(this,e.lat,n.lng,n.lat,e.lng,t):Ct(this,e.lat,e.lng,n.lat,n.lng,t)},Ot.prototype.remove=function(t){var e,n;return t.a?(n=this.l.remove(t),this.b=null):(n=0<=(t=(e=this.j).indexOf(t)))&&(e.splice(t,1),this.m=0<e.length,this.a=null),n&&(this.c=null),n},Ot.prototype.intersectBoundingBox=Ot.prototype.pa=function(t,e,n){var r=this.l,i=t.W(),o=t.V(),a=-i.lat,s=(i=i.lng,-o.lat);return o=o.lng,!e&&a==s||!n&&i===o?t=[]:t.N()?(Rt(t=r.o(-180,a,o,s,n,e),r.o(i,a,180,s,!1,e)),Rt(t,Lt(this,a,o,s,i+360,e,n))):Rt(t=r.o(i,a,o,s,n,e),Lt(this,a,i,s,o,e,n)),t},c("H.util.ICache",Nt),Nt.prototype.add=function(){},Nt.prototype.get=function(){},Nt.prototype.drop=Nt.prototype.S=function(){},Nt.prototype.forEach=function(){},Nt.prototype.removeAll=Nt.prototype.Y=function(){},Nt.prototype.registerOnDrop=Nt.prototype.K=function(){},Nt.prototype.deRegisterOnDrop=Nt.prototype.P=function(){},c("H.util.Cache",jt),jt.prototype.add=function(t,e,n){var r,i;if(!et(n=+n)||n<0)throw new ut(this.add,2,n);return t=String(t),(i=!this.m||this.m(t,e,n))&&((r=this.a[t])?(r.data!==e&&Gt(this,r),this.b+=n-r.size,r.size=n,r.data=e,Dt(this,r)):this.a[t]=Ft(this,{id:t,data:e,size:n,H:null,v:null},this.c),zt(this)),i},jt.prototype.registerOnDrop=jt.prototype.K=function(t){if(!l(t))throw new ut(this.K,0,t);this.l.push(t)},jt.prototype.deRegisterOnDrop=jt.prototype.P=function(t){this.l=this.l.filter((function(e){return e!==t}))},jt.prototype.get=function(t,e){return(t=e?this.a[t]:Dt(this,this.a[t]))&&t.data},jt.prototype.drop=jt.prototype.S=function(t){var e;(e=this.a[t])&&Bt(this,e,!0)},jt.prototype.forEach=function(t,e,n){var r;for(r in this.a){var i=this.a[r];n&&!n(r,i.data,i.size)||t.call(e,r,i.data,i.size)}},jt.prototype.removeAll=jt.prototype.Y=function(t){var e;for(e in this.a){var n=this.a[e];t&&!t(e,n.data,n.size)||Bt(this,this.a[e],!0)}},jt.prototype.setMaxSize=jt.prototype.Z=function(t){if(!(0<+t))throw new ut(jt.prototype.Z,0,t);return this.u=+t,zt(this),this},jt.prototype.getMaxSize=jt.prototype.ka=function(){return this.u},jt.prototype.getCurrentSize=jt.prototype.ia=function(){return this.b}}).call(Kr);var Xr,Jr=Vr={};function $r(t){return Ar(Kr.H.math.Point,Lr(t))}Vr.clipPolygon=function(t,e){var n,r,i,o=[],a=Kr.H.math.clipping.clipPolygon(t.map($r),e.map($r));if(a)do{for(n=[],r=a;n.push([(i=r).x,i.y]),r=r.next;);o.push(n)}while(a=a.nextPoly);else Vr.isPointInsidePolygon(e[0],t)?o.push(e):Vr.isPointInsidePolygon(t[0],e)&&o.push(t);return o},Vr.isPointInsidePolygon=function(t,e){return Kr.H.math.isPointInsidePolygon({x:t[0],y:t[1]},Kr.H.math.flatten(e))},Vr.clamp=function(t,e,n){return(t-=0)>n?n:t<e?e:t},Vr.splitLegs=function(t,e){var n=[];t.push(t[0]);for(var r=0;r<t.length-1;r++){var i,o=t[r],a=t[r+1];n.push(o),Math.abs(a[0]-o[0])>=e&&(i=[(o[0]+a[0])/2,(o[1]+a[1])/2],n.push(i))}return n.length!==t.length-1?Vr.splitLegs(n,e):n},Vr.getBBox=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;return t.forEach((function(t){t[0]<e&&(e=t[0]),t[1]<n&&(n=t[1]),t[0]>r&&(r=t[0]),t[1]>i&&(i=t[1])})),[e,n,r,i]},Vr.getBBoxCenter=function(t){var e=Cr(t,4),n=e[0],r=e[1];return[n+(e[2]-n)/2,r+(e[3]-r)/2]},Vr.getLineLength=function(t,e,n,r){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))},Vr.modulo=function(t,e){var n;return(n=t%e)<0==e<0?n:n+e};var Qr=Xr={};Xr.default_source_max_zoom=18,Xr.default_view_max_zoom=20,Xr.tile_size=256,Xr.half_circumference_meters=20037508.342789244,Xr.circumference_meters=2*Xr.half_circumference_meters,Xr.min_zoom_meters_per_pixel=Xr.circumference_meters/Xr.tile_size;var ti=[];Xr.metersPerPixel=function(t){return ti[t]=ti[t]||Xr.min_zoom_meters_per_pixel/Math.pow(2,t),ti[t]};var ei=[];Xr.metersPerTile=function(t){return ei[t]=ei[t]||Xr.circumference_meters/Math.pow(2,t),ei[t]},Xr.tile_scale=4096,Xr.units_per_pixel=Xr.tile_scale/Xr.tile_size,Xr.height_scale=16;var ni=[];Xr.unitsPerMeter=function(t){return ni[t]=ni[t]||Xr.tile_scale/(Xr.tile_size*Xr.metersPerPixel(t)),ni[t]},Xr.metersForTile=function(t){return{x:t.x*Xr.circumference_meters/Math.pow(2,t.z)-Xr.half_circumference_meters,y:-(t.y*Xr.circumference_meters/Math.pow(2,t.z)-Xr.half_circumference_meters)}},Xr.tileForMeters=function(t,e){var n=Cr(t,2),r=n[0],i=n[1];return{x:Math.floor((r+Xr.half_circumference_meters)/(Xr.circumference_meters/Math.pow(2,e))),y:Math.floor((-i+Xr.half_circumference_meters)/(Xr.circumference_meters/Math.pow(2,e))),z:e}},Xr.metersToExactTileCoords=function(t,e){var n=Cr(t,2),r=n[0],i=n[1];return{x:Math.pow(2,e-1)*(1+r/Xr.half_circumference_meters),y:Math.pow(2,e-1)*(1-i/Xr.half_circumference_meters),z:e}},Xr.wrapTile=function(t){var e=t.x,n=t.y,r=t.z,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{x:!0,y:!1},o=(1<<r)-1;return i.x&&(e&=o),i.y&&(n&=o),{x:e,y:n,z:r}},Xr.wrapMeters=function(t){var e=t.x,n=t.y;return{x:Jr.modulo(e+Xr.half_circumference_meters,Xr.circumference_meters)-Xr.half_circumference_meters,y:n}},Xr.metersToLatLng=function(t){var e=Cr(t,2),n=e[0],r=e[1];return n/=Xr.half_circumference_meters,r/=Xr.half_circumference_meters,r=(2*Math.atan(Math.exp(r*Math.PI))-Math.PI/2)/Math.PI,[n*=180,r*=180]},Xr.latLngToMeters=function(t){var e=Cr(t,2),n=e[0],r=e[1];return r=Math.log(Math.tan(r*Math.PI/360+Math.PI/4))/Math.PI,r*=Xr.half_circumference_meters,r=Math.min(Math.max(r,-Xr.half_circumference_meters),Xr.half_circumference_meters),[n*=Xr.half_circumference_meters/180,r]},Xr.tileSpaceToMeters=function(t,e,n){var r=Cr(t,2),i=r[0],o=r[1],a=Xr.unitsPerMeter(e);return[i/a+n.x,o/a+n.y]},Xr.tileSpaceToLatlng=function(t,e,n){var r=Xr.unitsPerMeter(e);return Xr.transformGeometry(t,(function(t){t[0]=t[0]/r+n.x,t[1]=t[1]/r+n.y;var e=Cr(Xr.metersToLatLng(t),2),i=e[0],o=e[1];t[0]=i,t[1]=o})),t},Xr.copyGeometry=function(t){if(null!=t){var e={type:t.type};return"Point"===t.type?e.coordinates=[t.coordinates[0],t.coordinates[1]]:"LineString"===t.type||"MultiPoint"===t.type?e.coordinates=t.coordinates.map((function(t){return[t[0],t[1]]})):"Polygon"===t.type||"MultiLineString"===t.type?e.coordinates=t.coordinates.map((function(t){return t.map((function(t){return[t[0],t[1]]}))})):"MultiPolygon"===t.type&&(e.coordinates=t.coordinates.map((function(t){return t.map((function(t){return t.map((function(t){return[t[0],t[1]]}))}))}))),e}},Xr.transformGeometry=function(t,e){null!=t&&("Point"===t.type?e(t.coordinates):"LineString"===t.type||"MultiPoint"===t.type?t.coordinates.forEach(e):"Polygon"===t.type||"MultiLineString"===t.type?t.coordinates.forEach((function(t){return t.forEach(e)})):"MultiPolygon"===t.type&&t.coordinates.forEach((function(t){t.forEach((function(t){return t.forEach(e)}))})))},Xr.boxIntersect=function(t,e){return!(e.sw.x>t.ne.x||e.ne.x<t.sw.x||e.sw.y>t.ne.y||e.ne.y<t.sw.y)},Xr.findBoundingBox=function(t){for(var e=1/0,n=-1/0,r=1/0,i=-1/0,o=t[0].length,a=0;a<o;a++){var s=t[0][a];s[0]<e&&(e=s[0]),s[1]<r&&(r=s[1]),s[0]>n&&(n=s[0]),s[1]>i&&(i=s[1])}return[e,r,n,i]},Xr.geometryType=function(t){return"Polygon"===t||"MultiPolygon"===t?"polygon":"LineString"===t||"MultiLineString"===t?"line":"Point"===t||"MultiPoint"===t?"point":void 0},Xr.centroid=function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(t&&0!==t.length){var n,r=0,i=0,o=0,a=t[0],s=a.length;e&&(n=a[0],a=a.map((function(t){return[t[0]-n[0],t[1]-n[1]]})));for(var l=0,u=s-1;l<s;u=l,l++){var c=a[l],h=a[u],p=c[1]*h[0]-h[1]*c[0];r+=(c[0]+h[0])*p,i+=(c[1]+h[1])*p,o+=3*p}var f=[r/o,i/o];return e&&(f[0]+=n[0],f[1]+=n[1]),f}},Xr.multiCentroid=function(t){for(var e=t.length,n=[0,0],r=0;r<t.length;r++){var i=Xr.centroid(t[r]);n[0]+=i[0],n[1]+=i[1]}return n[0]/=e,n[1]/=e,n},Xr.signedPolygonRingAreaSum=function(t){for(var e=0,n=t.length,r=0;r<n-1;r++){var i=t[r],o=t[r+1];e+=i[0]*o[1]-o[0]*i[1]}return e+(t[n-1][0]*t[0][1]-t[0][0]*t[n-1][1])},Xr.polygonRingArea=function(t){return Math.abs(Xr.signedPolygonRingAreaSum(t))/2},Xr.polygonArea=function(t){if(t)return Xr.polygonRingArea(t[0])},Xr.multiPolygonArea=function(t){for(var e=0,n=0;n<t.length;n++)e+=Xr.polygonArea(t[n]);return e},Xr.ringWinding=function(t){var e=Xr.signedPolygonRingAreaSum(t);return 0<e?"CW":e<0?"CCW":void 0},Xr.getTileBoundingBox=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=Xr.wrapTile(t,{x:!0}),i=Xr.metersForTile(r),o=Xr.metersPerPixel(r.z),a=Xr.metersToLatLng([i.x-n*o,i.y+n*o]),s=Xr.metersToLatLng([i.x+(e+n)*o,i.y-(e+n)*o]),l=Xr.isLastTile(r);return new Kr.H.geo.Rect(0===t.y?90:Jr.clamp(a[1],-90,90),Jr.clamp(a[0],-180,180),l.row?-90:Jr.clamp(s[1],-90,90),l.column?180:Jr.clamp(s[0],-180,180))},Xr.isLastTile=function(t){var e=t.x,n=t.y,r=t.z;return{row:n===Math.pow(2,r)-1,column:e===Math.pow(2,r)-1}};var ri,ii,oi=function(){xr(e,Sr(Error));var t=Ir(e);function e(n){var r;return mr(this,e),(r=t.call(this)).name="MethodNotImplemented",r.message="Method "+n+" must be implemented in subclass",r}return e}(),ai=!1,si=!1;try{window.document!==HTMLDocument&&(si=!0)}catch(o){void 0!==self&&(ai=!0,self.window={document:{}},self.document=self.window.document)}var li={get is_fake_worker(){return self.is_fake_worker},get is_worker(){return void 0!==ii?ii:ai||self.is_fake_worker},set is_worker(t){ii=t},get is_main(){return void 0!==ri?ri:si&&!self.is_fake_worker},set is_main(t){ri=t},is_native_worker:ai},ui={},ci=0,hi={},pi={},fi={};function di(t,e,n){var r=2<arguments.length&&void 0!==n?n:pi,i=[];if("string"==typeof t&&(t=(i=t.split(".")).pop()),li.is_main&&e&&1===i.length&&"self"===i[0])r=e;else for(var o=0;o<i.length;o++){if(!r[i[o]])return[];r=r[i[o]]}return[t,r]}ui.addTarget=function(t,e){li.is_fake_worker?fi[t]=e:pi[t]=e},ui.removeTarget=function(t){delete pi[t],delete fi[t]};var yi=" No object with that name is registered on main thread.",gi=" Object has no method with that name.",vi="_worker_broker_error_not_set_";function mi(t){Array.isArray(t)&&t.filter((function(t){return t.parent&&t.property})).forEach((function(t){return delete t.parent[t.property]}))}ui.withTransferables=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!(this instanceof ui.withTransferables))return Ar(ui.withTransferables,e);this.value=e,this.transferables=function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];if(!e)return i;if(Array.isArray(e))e.forEach((function(n,r){return t(n,e,r,i)}));else if("object"===vr(e))if(e instanceof ArrayBuffer)i.push({object:e,parent:n,property:r});else if(e.buffer instanceof ArrayBuffer)i.push({object:e.buffer,parent:n,property:r});else for(var o in e)t(e[o],e,o,i);return i}(this.value)},li.is_main&&(ui.postMessage=function(t,e){for(var n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(Array.isArray(t))return Promise.all(t.map((function(t){return ui.postMessage.apply(ui,[t,e].concat(Lr(r)))})));var o,a={};"object"===vr(e)&&(e=(a=e).method);var s="main_send";"string"==typeof t?(e=t,r=Array.prototype.slice.call(arguments,1),o=!0,s="worker_send"):t.init&&(o=!0);var l,u=[];if(r&&1===r.length&&r[0]instanceof ui.withTransferables&&(u=r[0].transferables,r=r[0].value),l={type:s,message_id:++ci,method:e,message:r},o)return function(t,e){var n=t.type,r=Cr(di(t.method,e,"main_send"===n?fi:pi),2),i=r[0],o=r[1],a="Worker broker could not dispatch message type ".concat(t.method," on target ").concat(t.target,".");if(!o)throw Error(a+yi);var s="function"==typeof o[i]&&o[i];if(!s)throw Error(a+gi);return new Promise((function(e,n){var r;try{r=s.apply(o,t.message)}catch(r){return void n(r)}r instanceof Promise?r.then((function(t){t instanceof ui.withTransferables&&(t=t.value[0]),e(t)}),(function(t){n(t instanceof Error?"".concat(t.message,": ").concat(t.stack):t)})):(r instanceof ui.withTransferables&&(r=r.value[0]),e(r))}))}(l,t&&t.init?t:void 0);var c=new Promise((function(t,n){hi[ci]={method:e,message:r,resolve:t,reject:n}}));return a.stringify&&(l=JSON.stringify(l)),t.postMessage(l,u.map((function(t){return t.object}))),mi(u),c},ui.addWorker=function(t){if(!(t instanceof Worker))throw Error("Worker broker could not add non-Worker object",t);t.addEventListener("message",(function(e){var n="string"==typeof e.data?JSON.parse(e.data):e.data,r=n.message_id;if("worker_reply"===n.type)hi[r]&&(n.error?hi[r].reject(n.error):hi[r].resolve(n.message),delete hi[r]);else if("worker_send"===n.type&&null!=r){var i=Cr(di(n.method),2),o=i[0],a=i[1],s="Worker broker could not dispatch message type ".concat(n.method," on target ").concat(n.target,".");if(!a)throw Error(s+yi);var l="function"==typeof a[o]&&a[o];if(!l)throw Error(s+gi);var u,c=vi;try{u=l.apply(a,n.message)}catch(e){c=e}var h,p=[];u&&"function"==typeof u.then?u.then((function(e){e instanceof ui.withTransferables&&(p=e.transferables,e=e.value[0]),h={type:"main_reply",message_id:r,message:e},t.postMessage(h,p.map((function(t){return t.object}))),mi(p)}),(function(e){t.postMessage({type:"main_reply",message_id:r,error:e instanceof Error?"".concat(e.message,": ").concat(e.stack):e})})):(u instanceof ui.withTransferables&&(p=u.transferables,u=u.value[0]),h={type:"main_reply",message_id:r,message:u,error:c instanceof Error?"".concat(c.message,": ").concat(c.stack):c},t.postMessage(h,p.map((function(t){return t.object}))),mi(p))}}))},ui.getMessages=function(){return hi},ui.getMessageId=function(){return ci}),li.is_worker&&(ui.postMessage=function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i={};"object"===vr(t)&&(t=(i=t).method);var o,a=new Promise((function(e,r){hi[ci]={method:t,message:n,resolve:e,reject:r}})),s=[];return n&&1===n.length&&n[0]instanceof ui.withTransferables&&(s=n[0].transferables,n=n[0].value),o={type:"worker_send",message_id:ci,method:t,message:n},i.stringify&&(o=JSON.stringify(o)),self.postMessage(o,s.map((function(t){return t.object}))),mi(s),ci++,a},self.addEventListener("message",(function(t){var e="string"==typeof t.data?JSON.parse(t.data):t.data,n=e.message_id;if("main_reply"===e.type)hi[n]&&(e.hasOwnProperty("error")&&e.error!==vi?hi[n].reject(e.error):hi[n].resolve(e.message),delete hi[n]);else if("main_send"===e.type&&null!=n){var r=Cr(di(e.method),2),i=r[0],o=r[1],a="Worker broker could not dispatch message type ".concat(e.method," on target ").concat(e.target,".");if(!o)throw Error(a+yi);var s,l,u="function"==typeof o[i]&&o[i];if(!u)throw Error(a+gi);try{s=u.apply(o,e.message)}catch(t){l=t}var c,h=[];s instanceof Promise?s.then((function(t){t instanceof ui.withTransferables&&(h=t.transferables,t=t.value[0]),c={type:"worker_reply",message_id:n,message:t},self.postMessage(c,h.map((function(t){return t.object}))),mi(h)}),(function(t){self.postMessage({type:"worker_reply",message_id:n,error:t instanceof Error?"".concat(t.message,": ").concat(t.stack):t})})):(s instanceof ui.withTransferables&&(h=s.transferables,s=s.value[0]),c={type:"worker_reply",message_id:n,message:s,error:l instanceof Error?"".concat(l.message,": ").concat(l.stack):l},self.postMessage(c,h.map((function(t){return t.object}))),mi(h))}})));var bi,_i={silent:-1,error:0,warn:1,info:2,debug:3,trace:4},wi={},xi={};function ki(t){var e,n="object"===vr(t)?t.level:t;if(_i[n]<=_i[ki.level]){for(var r=arguments.length,i=new Array(1<r?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(li.is_native_worker)ui.postMessage.apply(ui,[{method:"_logProxy",stringify:!0},t].concat(i));else{if("object"===vr(t)&&!0===t.once){if(xi[JSON.stringify(i)])return;xi[JSON.stringify(i)]=!0}var a=(wi[e=n]=wi[e]||(console[e]?console[e]:console.log).bind(console),wi[e]);1<i.length?a.apply(void 0,["Tangram [".concat(n,"]: ").concat(i[0])].concat(Lr(i.slice(1)))):a("Tangram [".concat(n,"]: ").concat(i[0]))}}}function Ei(t,e,n){var r,i;return n=n||0,function(){var o=this,a=arguments;function s(){i=0,t.apply(o,a)}clearTimeout(r),i&&n&&Date.now()-i>=n?s():(i=i||Date.now(),r=setTimeout((function(){s()}),e))}}ki.level="info",ki.workers=null,ki.setLevel=function(t){ki.level=t,li.is_main&&Array.isArray(ki.workers)&&ui.postMessage(ki.workers,"_logSetLevelProxy",t)},li.is_main&&(ki.setWorkers=function(t){ki.workers=t},ki.reset=function(){xi={}}),ui.addTarget("_logProxy",ki),ui.addTarget("_logSetLevelProxy",ki.setLevel);var Ti=bi={};ui.addTarget("Utils",bi),bi.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},bi.isMicrosoft=function(){return/(Trident\/7.0|Edge[ /](\d+[\.\d]+))/i.test(navigator.userAgent)},bi._requests={},bi._proxy_requests={},bi.io=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6e4,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"text",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"GET",i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,a=6<arguments.length&&void 0!==arguments[6]&&arguments[6];if(li.is_worker&&bi.isMicrosoft())return ki("debug","Proxying request for URL to worker",t),o&&(bi._proxy_requests[o]=!0),ui.postMessage("Utils.io",t,e,n,r,i,o,!0);var s=new XMLHttpRequest,l=(l=new Promise((function(i,o){s.open(r,t,!0),s.timeout=e,s.responseType=n,s.onload=function(){200===s.status?-1<["text","json"].indexOf(s.responseType)?i(s.responseText):i(s.response):o(Error("Request error with a status of "+s.statusText))},s.onerror=function(t){o(Error("There was a network error"+t.toString()))},s.ontimeout=function(t){o(Error("timeout "+t.toString()))},s.send()}))).then((function(t){return o&&delete bi._requests[o],a?ui.withTransferables(t):t}));return o&&(bi._requests[o]=s),l},bi.cancelRequest=function(t){if(li.is_worker&&bi._proxy_requests[t])return ui.postMessage("Utils.cancelRequest",t);bi._requests[t]?(ki("trace","Cancelling network request key '".concat(t,"'")),bi._requests[t].abort(),delete bi._requests[t]):ki("trace","Could not find network request key '".concat(t,"'"))},bi.requestAnimationFramePolyfill=function(){"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)})},bi.serializeWithFunctions=function(t){return"function"==typeof t?t.toString():JSON.stringify(t,(function(t,e){return"function"==typeof e?e.toString():e}))},bi.stringsToFunctions=function(t,e){if("string"==typeof t)t=bi.stringToFunction(t,e);else if(null!=t&&"object"===vr(t))for(var n in t)t[n]=bi.stringsToFunctions(t[n],e);return t},bi._use_count=0,bi._function_cache={};var Ai,Si,Mi=Ei((function(){ki("trace","Cleared cached ".concat(Object.keys(bi._function_cache).length," functions (reused ").concat(bi._use_count," times)")),bi._use_count=0,bi._function_cache={}}),1e4),Ii=/^\s*function[^(]*\(([^)]*)\)\s*?\{([\s\S]*)\}$/m;function Oi(t){if("string"!=typeof t||-1!==t.search(/^(data|blob):/))return"";var e=t.indexOf("?");-1<e&&(t=t.substr(0,e));var n=t.indexOf("#");return-1<n&&(t=t.substr(0,n)),t.substr(0,t.lastIndexOf("/")+1)||""}function Ci(t){return"string"==typeof t&&!(-1<t.search(/^(http|https|data|blob):/)||"//"===t.substr(0,2))}function Li(t){return void 0===Ai&&"function"!=typeof(Ai=window.URL&&window.URL.createObjectURL||window.webkitURL&&window.webkitURL.createObjectURL)&&(Ai=null,ki("warn","window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs")),Ai?Ai(t):t}bi.stringToFunction=function(t,e){var n=t;e&&(n+=e.toString());var r=bi._function_cache[n];if(Mi(),r)return bi._use_count++,r;var i="string"==typeof t&&t.match(Ii);if(i&&2<i.length)try{var o=i[2],a=0<(a=0<i[1].length&&i[1].split(",").map((function(t){return t.trim()})).filter((function(t){return t}))).length?a:["context"],s=new Function(a.toString(),"function"==typeof e?e(o):o);return bi._function_cache[n]=s}catch(e){return t}return t},bi.device_pixel_ratio=1,bi.isPowerOf2=function(t){return 0==(t&t-1)},bi.interpolate=function(t,e,n){if(!Array.isArray(e)||!Array.isArray(e[0]))return e;if(e.length<1)return e;var r,i,o,a,s;if(t<=e[0][0])a=e[0][1],"function"==typeof n&&(a=n(a));else if(t>=e[e.length-1][0])a=e[e.length-1][1],"function"==typeof n&&(a=n(a));else for(var l=0;l<e.length-1;l++)if(t>=e[l][0]&&t<e[l+1][0]){if(r=e[l][0],i=e[l+1][0],Array.isArray(e[l][1])){a=[];for(var u=0;u<e[l][1].length;u++)"function"==typeof n?(s=n(e[l][1][u]),o=n(e[l+1][1][u])-s,a[u]=o*(t-r)/(i-r)+s):(o=e[l+1][1][u]-e[l][1][u],a[u]=o*(t-r)/(i-r)+e[l][1][u])}else a="function"==typeof n?(s=n(e[l][1]),(o=n(e[l+1][1])-s)*(t-r)/(i-r)+s):(o=e[l+1][1]-e[l][1])*(t-r)/(i-r)+e[l][1];break}return a},bi.toCSSColor=function(t){return 1===t[3]?"rgb(".concat(t.slice(0,3).map((function(t){return Math.round(255*t)})).join(", "),")"):"rgba(".concat(t.map((function(t,e){return e<3&&Math.round(255*t)||t})).join(", "),")")},bi.pointInTile=function(t){return 0<=t[0]&&t[1]>-Qr.tile_scale&&t[0]<Qr.tile_scale&&t[1]<=0},bi.zoomToTileLevel=function(t){return Math.floor(t)};var Pi=function(){function t(e,n){var r=this;if(mr(this,t),this.config=e,this.sources=n,this.id=e.id,this.name=e.name,this.pad_scale=e.pad_scale||1e-4,this.default_winding=null,this.rasters=[],Array.isArray(e.rasters)&&e.rasters.forEach((function(t){-1===r.rasters.indexOf(t)&&r.rasters.push(t)})),this.preprocess=e.preprocess,"function"==typeof this.preprocess&&this.preprocess.bind(this),this.transform=e.transform,"function"==typeof this.transform)this.transform=this.transform.bind(this);else if("object"===vr(this.transform))for(var i in this.transform)"function"==typeof this.transform[i]&&(this.transform[i]=this.transform[i].bind(this));this.extra_data=e.extra_data,this.scripts=e.scripts,this.max_zoom=null!=e.max_zoom?e.max_zoom:Qr.default_source_max_zoom,this.setTileSize(e.tile_size),this.max_coord_zoom=this.max_zoom+this.zoom_bias,this.min_display_zoom=null!=e.min_display_zoom?e.min_display_zoom:0,this.max_display_zoom=null!=e.max_display_zoom?e.max_display_zoom:null,this._has_volatile_data=!!e.has_volatile_data}return _r(t,[{key:"hasLabeledData",value:function(){return!0}},{key:"_transformTile",value:function(t){if(t.source_data.layers){var e={coords:t.coords},n=[];if("function"==typeof this.transform)n.push(this.transform);else if("object"===vr(this.transform))for(var r=Object.keys(this.transform).sort(),i=0;i<r.length;i++)n.push(this.transform[r[i]]);for(var o=1===Object.keys(t.source_data.layers).length&&t.source_data.layers._default,a=0;a<n.length;a++)o?t.source_data.layers._default=n[a](t.source_data.layers._default,this.extra_data,e):t.source_data.layers=n[a](t.source_data.layers,this.extra_data,e)}}},{key:"_postProcessTile",value:function(t){var e=this;for(var n in this._transformTile(t),t.source_data.layers){var r=t.source_data.layers[n];r&&r.features&&r.features.forEach((function(t){Qr.transformGeometry(t.geometry,(function(t){t[1]=-t[1],e.pad_scale&&(t[0]=Math.round(t[0]*(1+e.pad_scale)-Qr.tile_scale*e.pad_scale/2),t[1]=Math.round(t[1]*(1+e.pad_scale)-Qr.tile_scale*e.pad_scale/2))})),e.updateDefaultWinding(t.geometry)}))}t.default_winding=this.default_winding||"CCW"}},{key:"load",value:function(t){return t.source_data={},t.source_data.layers={},t.pad_scale=this.pad_scale,t.rasters=Lr(this.rasters),this._load(t)}},{key:"_load",value:function(){throw new oi("_load")}},{key:"setTileSize",value:function(t){this.tile_size=t||256,("number"!=typeof this.tile_size||this.tile_size<256||!Ti.isPowerOf2(this.tile_size))&&(ki({level:"warn",once:!0},"Data source '".concat(this.name,"': 'tile_size' parameter must be a number that is a power of 2 greater than or equal to 256, but was '").concat(t,"'")),this.tile_size=256),this.zoom_bias=Math.log2(this.tile_size)-8}},{key:"updateDefaultWinding",value:function(t){return null==this.default_winding&&("Polygon"===t.type?this.default_winding=Qr.ringWinding(t.coordinates[0]):"MultiPolygon"===t.type&&(this.default_winding=Qr.ringWinding(t.coordinates[0][0]))),this.default_winding}},{key:"includesTile",value:function(t,e){if(t.z<this.min_display_zoom||null!=this.max_display_zoom&&e>this.max_display_zoom)return!1;for(var n=0;n<this.rasters.length;n++){var r=this.rasters[n];if(this.sources[r]&&this.sources[r]!==this&&!this.sources[r].includesTile(t,t.z))return!1}return!0}},{key:"has_volatile_data",get:function(){return this._has_volatile_data},set:function(t){var e=0<arguments.length&&void 0!==t&&t;this._has_volatile_data=e}}],[{key:"create",value:function(e,n){for(var r in n)if(n[r].config.name===e.name&&t.sameConfig(n[r],{config:e}))return n[r];if(t.types[e.type])return new t.types[e.type](e,n)}},{key:"sameConfig",value:function(t,e){if(!t||!e)return!1;var n=Object.assign({},t.config,{id:null,tiled:null,url:null}),r=Object.assign({},e.config,{id:null,tiled:null,url:null});return JSON.stringify(n)===JSON.stringify(r)}},{key:"coordsToMeters",value:function(t){var e=Cr(Qr.latLngToMeters(t),2),n=e[0],r=e[1];t[0]=n,t[1]=r}},{key:"projectData",value:function(e){for(var n in e.layers)for(var r=e.layers[n].features.length,i=0;i<r;i++){var o=e.layers[n].features[i];Qr.transformGeometry(o.geometry,t.coordsToMeters)}}},{key:"metersToTileUnits",value:function(t,e,n){n[0]=Math.round((n[0]-e.x)*t),n[1]=-1*Math.round((n[1]-e.y)*t)}},{key:"scaleData",value:function(e,n){var r=n.coords.z,i=n.min,o=(n.max,t.metersToTileUnits.bind(this,Qr.unitsPerMeter(r),i));for(var a in e.layers)for(var s=e.layers[a].features.length,l=0;l<s;l++){var u=e.layers[a].features[l];Qr.transformGeometry(u.geometry,o)}}},{key:"register",value:function(e,n){e&&n&&(t.types[n]=e)}}]),t}();Pi.types={};var Ri=0,Ni=function(){xr(e,Pi);var t=Ir(e);function e(n,r){var i;mr(this,e),(i=t.call(this,n,r)).response_type="";var o=Cr(function(t,e){if(!e||0===Object.keys(e).length)return[t,[]];var n=t.indexOf("?"),r=t.indexOf("#"),i="";-1<r&&(i=t.slice(r),t=t.slice(0,r)),-1===n&&(n=t.length,t+="?"),n++;var o="",a=[];for(var s in e)""===function(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}(s,t)?o+="".concat(s,"=").concat(e[s],"&"):a.push([s,e[s]]);return[t=t.slice(0,n)+o+t.slice(n)+i,a]}(n.url,n.url_params),2),a=o[0],s=o[1];if(i.url=a,s.forEach((function(t){var e=Cr(t,2),r=e[0],o=e[1];ki({level:"warn",once:!0},"Data source '".concat(i.name,"': parameter '").concat(r,"' already present in URL '").concat(n.url,"', ")+"skipping value '".concat(r,"=").concat(o,"' specified in 'url_params'"))})),"string"!=typeof i.url)throw Error("Network data source must provide a string `url` property");return i}return _r(e,[{key:"_load",value:function(t){var e=this,n=this.formatUrl(this.url,t),r=t.source_data;return r.url=n,new Promise((function(i,o){r.error=null;var a=Ri+++"-"+n,s=Ti.io(n,6e4,e.response_type,"GET",{},a);r.request_id=a,s.then((function(n){"function"==typeof e.preprocess&&(n=e.preprocess(n)),(n=n instanceof Promise?n:Promise.resolve(n)).then((function(n){e.parseSourceData(t,r,n),e._postProcessTile(t),i(t)}))}),(function(n){r.error=n.stack,e._postProcessTile(t),i(t)}))}))}},{key:"formatUrl",value:function(){throw new oi("formatUrl")}},{key:"parseSourceData",value:function(){throw new oi("parseSourceData")}}]),e}(),ji=function(){xr(e,Ni);var t=Ir(e);function e(n,r){var i;return mr(this,e),(i=t.call(this,n,r)).tiled=!0,i.parseBounds(n),i.builds_geometry_tiles=!1,i.tms=!0===n.tms,-1<i.url.search("{s}")&&(Array.isArray(n.url_subdomains)&&0<n.url_subdomains.length?(i.url_subdomains=n.url_subdomains,i.next_url_subdomain=0):ki({level:"warn",once:!0},"Data source '".concat(i.name,"': source URL includes '{s}' subdomain marker ('").concat(i.url,"'), but no subdomains ")+"were specified in 'url_subdomains' parameter")),i}return _r(e,[{key:"parseBounds",value:function(t){var e,n,r,i,o;Array.isArray(t.bounds)&&4===t.bounds.length&&(this.bounds=t.bounds,n=(e=Cr(this.bounds,4))[0],r=e[1],i=e[2],o=e[3],this.bounds_meters={min:Qr.latLngToMeters([n,o]),max:Qr.latLngToMeters([i,r])},this.bounds_tiles={min:{},max:{}})}},{key:"checkBounds",value:function(t){if(this.bounds){t=Qr.wrapTile(t,{x:!0});var e=(e=this.bounds_tiles.min[t.z])||(this.bounds_tiles.min[t.z]=Qr.tileForMeters(this.bounds_meters.min,t.z)),n=(n=this.bounds_tiles.max[t.z])||(this.bounds_tiles.max[t.z]=Qr.tileForMeters(this.bounds_meters.max,t.z));if(t.x<e.x||t.x>n.x||t.y<e.y||t.y>n.y)return!1}return!0}},{key:"includesTile",value:function(t,n){return!!Or(kr(e.prototype),"includesTile",this).call(this,t,n)&&!!this.checkBounds(t)}},{key:"formatUrl",value:function(t,e){var n=Qr.wrapTile(e.coords,{x:!0});this.tms&&(n.y=Math.pow(2,n.z)-1-n.y);var r=t.replace("{x}",n.x).replace("{y}",n.y).replace("{z}",n.z);return null!=this.url_subdomains&&(r=r.replace("{s}",this.url_subdomains[this.next_url_subdomain]),this.next_url_subdomain=(this.next_url_subdomain+1)%this.url_subdomains.length),r}},{key:"urlHasTilePattern",value:function(t){return t&&-1<t.search("{x}")&&-1<t.search("{y}")&&-1<t.search("{z}")}}]),e}(),Di=function(){xr(e,Pi);var t=Ir(e);function e(n,r){var i;return mr(this,e),(i=t.call(this,n,r)).target_name="MapsJsSource"+n.uid,i.tiled=!!n.tiled,ui.addTarget(i.target_name,Mr(i)),li.is_worker&&ui.postMessage(i.target_name+".onWorkerInitialized"),li.is_main&&(i._workers_left=0),i}return _r(e,[{key:"initialize",value:function(t,e,n,r){this._main_initialized||(this.provider=t,this.worker=r,this._workers_left+=n,this._on_update=e,this._main_initialized=!0,this._onProviderUpdate=this._onProviderUpdate.bind(this),t.addEventListener("update",this._onProviderUpdate),this._isReady()&&this.onReady())}},{key:"onWorkerInitialized",value:function(){--this._workers_left,this._isReady()&&this.onReady()}},{key:"onReady",value:function(){}},{key:"_isReady",value:function(){return this._main_initialized&&!this._workers_left}},{key:"_onProviderUpdate",value:function(t){this._isReady()&&this.onProviderUpdate(t)}},{key:"onProviderUpdate",value:function(t){this.dispatchUpdate(void 0,t.data)}},{key:"dispatchUpdate",value:function(t,e){this._on_update(this.name,t,e)}},{key:"dispose",value:function(){ui.removeTarget(this.target_name),this.provider.removeEventListener("update",this._onProviderUpdate)}}]),e}(),zi=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=s;0<c;o=256*o+t[e+h],h+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+t[e+h],h+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},Fi=function(t,e,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+h?p/l:p*Math.pow(2,1-h))*l&&(a++,l/=2),c<=a+h?(s=0,a=c):1<=a+h?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));8<=i;t[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;t[n+f]=255&a,f+=d,a/=256,u-=8);t[n+f-d]|=128*y},Bi=Gi;function Gi(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Gi.Varint=0,Gi.Fixed64=1,Gi.Bytes=2,Gi.Fixed32=5;var Hi=4294967296,Ui=1/Hi;function qi(t){return t.type===Gi.Bytes?t.readVarint()+t.pos:t.pos+1}function Vi(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Zi(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;t<=i;i--)n.buf[i+r]=n.buf[i]}function Wi(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function Yi(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function Ki(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Xi(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function Ji(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function $i(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Qi(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function to(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function eo(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function no(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function ro(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function io(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Gi.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=no(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=io(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=no(this.buf,this.pos)+no(this.buf,this.pos+4)*Hi;return this.pos+=8,t},readSFixed64:function(){var t=no(this.buf,this.pos)+io(this.buf,this.pos+4)*Hi;return this.pos+=8,t},readFloat:function(){var t=zi(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=zi(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e=this.buf,n=e[this.pos++],r=127&n;return n<128?r:(r|=(127&(n=e[this.pos++]))<<7,n<128?r:(r|=(127&(n=e[this.pos++]))<<14,n<128?r:(r|=(127&(n=e[this.pos++]))<<21,n<128?r:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return Vi(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return Vi(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return Vi(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return Vi(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return Vi(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return Vi(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(n=e[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){for(var r,i,o,a="",s=e;s<n;){var l=t[s],u=null,c=239<l?4:223<l?3:191<l?2:1;if(n<s+c)break;1===c?l<128&&(u=l):2===c?128==(192&(r=t[s+1]))&&(u=(31&l)<<6|63&r)<=127&&(u=null):3===c?(r=t[s+1],i=t[s+2],128==(192&r)&&128==(192&i)&&((u=(15&l)<<12|(63&r)<<6|63&i)<=2047||55296<=u&&u<=57343)&&(u=null)):4===c&&(r=t[s+1],i=t[s+2],o=t[s+3],128==(192&r)&&128==(192&i)&&128==(192&o)&&((u=(15&l)<<18|(63&r)<<12|(63&i)<<6|63&o)<=65535||1114112<=u)&&(u=null)),null===u?(u=65533,c=1):65535<u&&(u-=65536,a+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),a+=String.fromCharCode(u),s+=c}return a}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=qi(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=qi(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=qi(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=qi(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=qi(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=qi(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=qi(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=qi(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=qi(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Gi.Varint)for(;127<this.buf[this.pos++];);else if(e===Gi.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Gi.Fixed32)this.pos+=4;else{if(e!==Gi.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e,n=this.length||16;n<this.pos+t;)n*=2;n!==this.length&&((e=new Uint8Array(n)).set(this.buf),this.buf=e,this.length=n)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),ro(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),ro(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),ro(this.buf,-1&t,this.pos),ro(this.buf,Math.floor(t*Ui),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),ro(this.buf,-1&t,this.pos),ro(this.buf,Math.floor(t*Ui),this.pos+4),this.pos+=8},writeVarint:function(t){268435455<(t=+t||0)||t<0?function(t,e){var n,r;if(0<=t?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:r=r+1|(n=0)),0x10000000000000000<=t||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e){e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos]=127&t}(n,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if(55295<(r=e.charCodeAt(o))&&r<57344){if(!i){56319<r||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;128<=n&&Zi(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Fi(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Fi(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;128<=r&&Zi(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,Gi.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,Wi,e)},writePackedSVarint:function(t,e){this.writeMessage(t,Yi,e)},writePackedBoolean:function(t,e){this.writeMessage(t,Ji,e)},writePackedFloat:function(t,e){this.writeMessage(t,Ki,e)},writePackedDouble:function(t,e){this.writeMessage(t,Xi,e)},writePackedFixed32:function(t,e){this.writeMessage(t,$i,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,Qi,e)},writePackedFixed64:function(t,e){this.writeMessage(t,to,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,eo,e)},writeBytesField:function(t,e){this.writeTag(t,Gi.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Gi.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Gi.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Gi.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Gi.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Gi.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Gi.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Gi.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Gi.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Gi.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}},Wr.prototype.loadGeometry=function(t){var e=this._pbf;e.pos=this._geometry;for(var n,r,i=e.readVarint()+e.pos,o=1,a=0,s=0,l=0,u=[];e.pos<i;)if(a<=0&&(o=7&(r=e.readVarint()),a=r>>3),a--,1===o||2===o)s+=e.readSVarint(),l+=e.readSVarint(),1===o&&(n&&u.push(n),n=[]),n.push([s*t,l*t]);else{if(7!==o)throw new Error("unknown command "+o);n&&n.push(n[0].slice())}return n&&u.push(n),u};var oo={UNKNOWN:0,POINT:1,LINESTRING:2,POLYGON:3};function ao(t){var e=[],n=t&&t.features;if(n)for(var r=0,i=n.length;r<i;r++){var o=n[r],a=o.type,s=void 0;switch(a){case oo.POINT:s={type:"MultiPoint",coordinates:o.geometry.map((function(t){return t.slice()}))};break;case oo.LINESTRING:case oo.POLYGON:if(s={type:"MultiLineString",coordinates:o.geometry.map((function(t){return t.map((function(t){return t.slice()}))}))},a===oo.POLYGON&&null==(s=so(s)))continue;break;default:continue}e.push({id:o.id,type:"Feature",geometry:s,properties:o.tags})}return{type:"FeatureCollection",features:e}}function so(t){for(var e,n=[],r=[],i=0,o=t.coordinates.length;i<o;i++){var a=t.coordinates[i],s=Qr.ringWinding(a);null!=s&&(s===(e=e||s)&&r.length&&(n.push(r),r=[]),r.push(a))}return 0<r.length&&n.push(r),1===n.length?(t.type="Polygon",t.coordinates=n[0]):1<n.length?(t.type="MultiPolygon",t.coordinates=n):t=null,t}var lo={type:"FeatureCollection",features:[]},uo=function(){xr(e,Di);var t=Ir(e);function e(n,r){return mr(this,e),n.tiled=!0,t.call(this,n,r)}return _r(e,[{key:"fetchTile",value:function(t,e,n){return this.provider?this.provider.requestTileAsPromise(t,e,n).then((function(t){return t.data})):Promise.resolve()}},{key:"_load",value:function(t){var e=this,n=Qr.wrapTile(t.coords,{x:!0,y:!0}),r=n.x,i=n.y,o=n.z;return ui.postMessage(this.target_name+".fetchTile",r,i,o).then((function(n){var r;return n instanceof ArrayBuffer?(r=new Bi(new Uint8Array(n)),t.source_data.layers=function(t){var e={};for(var n in t.layers){for(var r=t.layers[n],i=[],o=Qr.tile_scale/r.extent,a=0,s=r.length;a<s;a++){var l=r.feature(a),u=Wr.types[l.type],c=l.loadGeometry(o),h=null;switch(u){case"Point":h=function(t){var e=t.coordinates.length;if(1<e){t.type="MultiPoint";for(var n=[],r=0;r<e;r++)n.push(t.coordinates[r][0]);t.coordinates=n}else t.type="Point",t.coordinates=t.coordinates[0][0];return t}({coordinates:c});break;case"LineString":h=1===c.length?{type:u,coordinates:c[0]}:{type:"MultiLineString",coordinates:c};break;case"Polygon":h=so({coordinates:c})}h&&h.coordinates&&i.push({type:"Feature",geometry:h,properties:l.properties})}e[n]={type:"FeatureCollection",features:i}}return e}(new Zr(r))):n?t.source_data.error=n:t.source_data.layers={_default:lo},e._postProcessTile(t),t}))}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),e}();function co(t){return Math.max(t,0)}function ho(t){return isNaN(t)?0:t}function po(t){return Array.isArray(t)?t.map(parseFloat).map(ho):ho(parseFloat(t))}function fo(t){return Array.isArray(t)?t.map(po).map(co):co(po(t))}Pi.register(uo,"MVT"),Pi.register(uo,"OMV");var yo=a((function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:255<t?255:t}function i(t){return t<0?0:1<t?1:t}function o(t){return"%"===t[t.length-1]?r(parseFloat(t)/100*255):r(parseInt(t))}function a(t){return"%"===t[t.length-1]?i(parseFloat(t)/100):i(parseFloat(t))}function s(t,e,n){return n<0?n+=1:1<n&&--n,6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in n)return n[i].slice();if("#"===i[0])return 4===i.length?0<=(e=parseInt(i.substr(1),16))&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&0<=(e=parseInt(i.substr(1),16))&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=i.indexOf("("),u=i.indexOf(")");if(-1!==l&&u+1===i.length){var c=i.substr(0,l),h=i.substr(l+1,u-(l+1)).split(","),p=1;switch(c){case"rgba":if(4!==h.length)return null;p=a(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),p];case"hsla":if(4!==h.length)return null;p=a(h.pop());case"hsl":if(3!==h.length)return null;var f=(parseFloat(h[0])%360+360)%360/360,d=a(h[1]),y=a(h[2]),g=y<=.5?y*(d+1):y+d-y*d,v=2*y-g;return[r(255*s(v,g,f+1/3)),r(255*s(v,g,f)),r(255*s(v,g,f-1/3)),p];default:return null}}return null}}catch(t){}})),go=(yo.parseCSSColor,{});Object.assign(go,{clampPositive:co,noNaN:ho,parseNumber:po,parsePositiveNumber:fo}),go.wrapFunction=function(t){return"\n        var feature = context.feature.properties;\n        var global = context.global;\n        var $zoom = context.zoom;\n        var $layer = context.layer;\n        var $source = context.source;\n        var sources = context.sources;\n        var $geometry = context.geometry;\n        var $meters_per_pixel = context.meters_per_pixel;\n\n        var val = (function(){ ".concat(t," }());\n\n        if (typeof val === 'number' && isNaN(val)) {\n            val = null; // convert NaNs to nulls\n        }\n\n        return val;\n    ")},go.zeroPair=Object.freeze([0,0]),go.defaults={color:[1,1,1,1],width:1,size:1,extrude:!1,height:20,min_height:0,order:0,z:0,outline:{color:[0,0,0,0],width:0},material:{ambient:1,diffuse:1}},go.macros={"Style.color.pseudoRandomColor":function(){return[parseInt(feature.id,16)/100%1*.7,parseInt(feature.id,16)/1e4%1*.7,parseInt(feature.id,16)/1e6%1*.7,1]},"Style.color.randomColor":function(){return[.7*Math.random(),.7*Math.random(),.7*Math.random(),1]}},go.getFeatureParseContext=function(t,e,n,r){return{feature:t,tile:e,global:n,sources:r,zoom:e.style_zoom,geometry:Qr.geometryType(t.geometry.type),meters_per_pixel:e.meters_per_pixel,meters_per_pixel_sq:e.meters_per_pixel_sq,units_per_meter_overzoom:e.units_per_meter_overzoom}};var vo={STATIC:0,DYNAMIC:1,ZOOM:2};function mo(t){return"string"==typeof t&&"%"===t[t.length-1]}function bo(t){return"auto"===t}function _o(t){return mo(t)||bo(t)}go.CACHE_TYPE=vo,go.createPropertyCache=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null!=t){if(t.value)return{value:t.value,zoom:t.zoom?{}:null,type:t.type};var n={value:t,type:vo.STATIC};return Array.isArray(n.value)&&Array.isArray(n.value[0])?(n.zoom={},n.type=vo.ZOOM):"function"==typeof n.value&&(n.type=vo.DYNAMIC),"function"==typeof e&&(n.zoom?n.value=n.value.map((function(t,n){return[t[0],e(t[1],n)]})):"function"!=typeof n.value&&(n.value=e(n.value,0))),n}},go.createColorPropertyCache=function(t){return go.createPropertyCache(t,(function(t){return"Style.color.pseudoRandomColor"===t?Ti.stringToFunction(go.wrapFunction(go.macros["Style.color.pseudoRandomColor"])):"Style.color.randomColor"===t?go.macros["Style.color.randomColor"]:t}))};var wo="'size' can specify either width or height as derived from aspect ratio, but not both";go.createPointSizePropertyCache=function(t){var e=null,n=null;if(mo(t))e=[!0];else if(Array.isArray(t))if(Array.isArray(t[0])){if(t.some((function(t){return Array.isArray(t[1])?t[1].some(_o):mo(t[1])}))&&(e=t.map((function(t){return Array.isArray(t[1])?t[1].map(mo):mo(t[1])})),(n=t.map((function(t){return Array.isArray(t[1])&&t[1].map(bo)}))).some((function(t){return Array.isArray(t)&&t.every((function(t){return t}))}))))throw wo}else if(t.some(_o)&&(e=[t.map(mo)],(n=[t.map(bo)])[0].every((function(t){return t}))))throw wo;return e?((t={value:t}).has_pct=e,t.has_ratio=n,t.sprites={}):t=go.createPropertyCache(t,fo),t},go.evalCachedPointSizeProperty=function(t,e,n){return t.has_pct||t.has_ratio?e?(t.sprites[e.sprite]||(t.sprites[e.sprite]=go.createPropertyCache(t.value,(function(n,r){return Array.isArray(n)?(n=n.map((function(e,n){return t.has_ratio[r][n]?e:fo(e)})).map((function(n,i){return t.has_pct[r][i]?e.css_size[i]*n/100:n})),t.has_ratio[r][0]?n[0]=n[1]*e.aspect:t.has_ratio[r][1]&&(n[1]=n[0]/e.aspect)):(n=fo(n),n=t.has_pct[r]?e.css_size.map((function(t){return t*n/100})):[n,n]),n}))),go.evalCachedProperty(t.sprites[e.sprite],n)):void 0:go.evalCachedProperty(t,n)},go.evalCachedProperty=function(t,e){if(null!=t)return t.dynamic?t.dynamic(e):t.static?t.static:t.zoom&&t.zoom[e.zoom]?t.zoom[e.zoom]:"function"!=typeof t.value?Array.isArray(t.value)&&Array.isArray(t.value[0])?(t.zoom=t.zoom||{},t.zoom[e.zoom]=Ti.interpolate(e.zoom,t.value),t.zoom[e.zoom]):(t.static=t.value,t.static):(t.dynamic=t.value,t.dynamic(e))},go.convertUnits=function(t,e){if(null!=t.val)return"px"===t.units?t.val*Qr.metersPerPixel(e.zoom):t.val;if("string"==typeof t)"px"===t.trim().slice(-2)?(t=po(t),t*=Qr.metersPerPixel(e.zoom)):t=po(t);else if(Array.isArray(t))return Array.isArray(t[0])?t.map((function(t){return[t[0],go.convertUnits(t[1],e)]})):t.map((function(t){return go.convertUnits(t,e)}));return t},go.parseUnits=function(t){var e={val:po(t)};return 0!==e.val&&"string"==typeof t&&"px"===t.trim().slice(-2)&&(e.units="px"),e},go.evalCachedDistanceProperty=function(t,e){return t.dynamic?t.dynamic(e):t.zoom&&t.zoom[e.zoom]?t.zoom[e.zoom]:"function"!=typeof t.value?t.zoom?(t.zoom[e.zoom]=Ti.interpolate(e.zoom,t.value,(function(t){return go.convertUnits(t,e)})),t.zoom[e.zoom]):go.convertUnits(t.value,e):(t.dynamic=t.value,t.dynamic(e))},go.string_colors={},go.colorForString=function(t){if(go.string_colors[t])return go.string_colors[t];var e=null;return"none"!==t&&((e=yo.parseCSSColor(t))&&4===e.length?(e[0]/=255,e[1]/=255,e[2]/=255):e=go.defaults.color),go.string_colors[t]=e},go.evalCachedColorProperty=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t.dynamic){var n=t.dynamic(e);return"string"==typeof n&&(n=go.colorForString(n)),n&&null==n[3]&&(n[3]=1),n}if(t.static)return t.static;if(t.zoom&&t.zoom[e.zoom])return t.zoom[e.zoom];if("function"==typeof t.value){t.dynamic=t.value;var r=t.dynamic(e);return"string"==typeof r&&(r=go.colorForString(r)),r&&null==r[3]&&(r[3]=1),r}if("string"==typeof t.value)return t.static=go.colorForString(t.value),t.static;if(t.zoom){if(!t.zoom_preprocessed){for(var i=0;i<t.value.length;i++){var o=t.value[i];o&&"string"==typeof o[1]&&(o[1]=go.colorForString(o[1]))}t.zoom_preprocessed=!0}return t.zoom[e.zoom]=Ti.interpolate(e.zoom,t.value),t.zoom[e.zoom][3]=t.zoom[e.zoom][3]||1,t.zoom[e.zoom]}return t.static=t.value.map((function(t){return t})),t.static&&null==t.static[3]&&(t.static[3]=1),t.static},go.parseColor=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof t&&(t=t(e)),"string"==typeof t)t=go.colorForString(t);else if(Array.isArray(t)&&Array.isArray(t[0])){for(var n=0;n<t.length;n++){var r=t[n];"string"==typeof r[1]&&(r[1]=go.colorForString(r[1]))}e.zoom&&(t=Ti.interpolate(e.zoom,t))}return Array.isArray(t)?null==(t=t.map((function(t){return t})))[3]&&(t[3]=1):t=[0,0,0,1],t},go.calculateOrder=function(t,e){return"function"==typeof t?t=t(e):"string"==typeof t&&(t=e.feature.properties[t]?e.feature.properties[t]:fo(t)),t},go.evalProperty=function(t,e){return"function"==typeof t?t(e):t};var xo=function(){function t(e,n){mr(this,t),this.key=e,this.repeat_dist=n,this.repeat_dist_sq=this.repeat_dist*this.repeat_dist,this.positions=[]}return _r(t,[{key:"check",value:function(t){for(var e=t.position,n=0;n<this.positions.length;n++){var r=this.positions[n],i=e[0]-r[0],o=e[1]-r[1],a=i*i+o*o;if(a<this.repeat_dist_sq)return{dist_sq:a,repeat_dist_sq:this.repeat_dist_sq}}}},{key:"add",value:function(t){t&&t.position&&this.positions.push(t.position)}}],[{key:"clear",value:function(t){this.groups[t]={}}},{key:"check",value:function(t,e,n){if(e.repeat_distance&&e.repeat_group&&this.groups[n][e.repeat_group])return this.groups[n][e.repeat_group].check(t)}},{key:"add",value:function(e,n,r){n.repeat_distance&&n.repeat_group&&(null==this.groups[r][n.repeat_group]&&(this.groups[r][n.repeat_group]=new t(n.repeat_group,n.repeat_distance*n.repeat_scale)),this.groups[r][n.repeat_group].add(e))}}]),t}();xo.groups={};var ko=function(){function t(e,n,r){mr(this,t);var i=this.boxCells=[],o=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(n/r);for(var a=0;a<this.xCellCount*this.yCellCount;a++)i.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=n,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}return _r(t,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"insertCircle",value:function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)}},{key:"insertCircleList",value:function(t,e){for(var n=0;n<e.length-2;n+=3)this.insertCircle("".concat(t,"/").concat(n),e[n],e[n+1],e[n+2])}},{key:"_insertBoxCell",value:function(t,e,n,r,i,o){this.boxCells[i].push(o)}},{key:"_insertCircleCell",value:function(t,e,n,r,i,o){this.circleCells[i].push(o)}},{key:"_query",value:function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],h=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:u-h,y1:c-h,x2:u+h,y2:c+h})}return o?a.filter(o):a}var p={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,n,r,this._queryCell,a,p,o),i?0<a.length:a}},{key:"_queryCircle",value:function(t,e,n,r,i){var o=t-n,a=t+n,s=e-n,l=e+n;if(a<0||o>this.width||l<0||s>this.height)return!r&&[];var u=[],c={hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,l,this._queryCellCircle,u,c,i),r?0<u.length:u}},{key:"query",value:function(t,e,n,r,i){return this._query(t,e,n,r,!1,i)}},{key:"hitTest",value:function(t,e,n,r,i){return this._query(t,e,n,r,!0,i)}},{key:"hitTestCircle",value:function(t,e,n,r){return this._queryCircle(t,e,n,!0,r)}},{key:"hitTestCircleList",value:function(t,e){for(var n=0;n<t.length-2;n+=3)if(this.hitTestCircle(t[n],t[n+1],t[n+2],e))return!0;return!1}},{key:"_queryCell",value:function(t,e,n,r,i,o,a,s){var l=a.seenUids,u=this.boxCells[i];if(null!==u){var c,h=this.bboxes,p=Nr(u);try{for(p.s();!(c=p.n()).done;){var f=c.value;if(!l.box[f]){l.box[f]=!0;var d=4*f;if(t<=h[2+d]&&e<=h[3+d]&&n>=h[0+d]&&r>=h[1+d]&&(!s||s(this.boxKeys[f]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[f],x1:h[d],y1:h[1+d],x2:h[2+d],y2:h[3+d]})}}}}catch(t){p.e(t)}finally{p.f()}}var y=this.circleCells[i];if(null!==y){var g,v=this.circles,m=Nr(y);try{for(m.s();!(g=m.n()).done;){var b=g.value;if(!l.circle[b]){l.circle[b]=!0;var _=3*b;if(this._circleAndRectCollide(v[_],v[1+_],v[2+_],t,e,n,r)&&(!s||s(this.circleKeys[b]))){if(a.hitTest)return o.push(!0),!0;var w=v[_],x=v[1+_],k=v[2+_];o.push({key:this.circleKeys[b],x1:w-k,y1:x-k,x2:w+k,y2:x+k})}}}}catch(t){m.e(t)}finally{m.f()}}}},{key:"_queryCellCircle",value:function(t,e,n,r,i,o,a,s){var l=a.circle,u=a.seenUids,c=this.boxCells[i];if(null!==c){var h,p=this.bboxes,f=Nr(c);try{for(f.s();!(h=f.n()).done;){var d=h.value;if(!u.box[d]){u.box[d]=!0;var y=4*d;if(this._circleAndRectCollide(l.x,l.y,l.radius,p[0+y],p[1+y],p[2+y],p[3+y])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}}catch(t){f.e(t)}finally{f.f()}}var g=this.circleCells[i];if(null!==g){var v,m=this.circles,b=Nr(g);try{for(b.s();!(v=b.n()).done;){var _=v.value;if(!u.circle[_]){u.circle[_]=!0;var w=3*_;if(this._circlesCollide(m[w],m[1+w],m[2+w],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[_])))return o.push(!0),!0}}}catch(t){b.e(t)}finally{b.f()}}}},{key:"_forEachCell",value:function(t,e,n,r,i,o,a,s){for(var l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r),p=l;p<=c;p++)for(var f=u;f<=h;f++){var d=this.xCellCount*f+p;if(i.call(this,t,e,n,r,d,o,a,s))return}}},{key:"_convertToXCellCoord",value:function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}},{key:"_convertToYCellCoord",value:function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}},{key:"_circlesCollide",value:function(t,e,n,r,i,o){var a=r-t,s=i-e,l=n+o;return a*a+s*s<l*l}},{key:"_circleAndRectCollide",value:function(t,e,n,r,i,o,a){var s=(o-r)/2,l=Math.abs(t-(r+s));if(s+n<l)return!1;var u=(a-i)/2,c=Math.abs(e-(i+u));if(u+n<c)return!1;if(l<=s||c<=u)return!0;var h=l-s,p=c-u;return h*h+p*p<=n*n}}]),t}(),Eo=function(t,e,n,r){var i;if(r&&(i=function(t){return t!==r.id}),!e){if("point"===t.type&&!t.angle){var o=t.getAABB(),a=o.left,s=o.top,l=o.right,u=o.bottom;if(n.hitTest(a,-s,l,-u,i)){if(Array.isArray(t.layout.anchor))for(var c=1;c<t.layout.anchor.length;c++){t.setAnchor(t.layout.anchor[c]);var h=t.getAABB(),p=h.left,f=h.top,d=h.right,y=h.bottom;if(!n.hitTest(p,-f,d,-y,i))return!1}return!0}return!1}var g=t.getBoundingCircles();return n.hitTestCircleList(g,i)}if(e){if("point"===t.type&&!t.isFlat()){var v=t.getScreenSpaceBoundingBox(),m=v.left,b=v.top,_=v.right,w=v.bottom;return n.hitTest(m,b,_,w,i)}var x=t.getBoundingCircles();return n.hitTestCircleList(x,i)}return!1},To={tiles:{},startTile:function(t,e){var n=1<arguments.length&&void 0!==e?e:{},r=n.apply_repeat_groups,i=void 0===r||r,o=n.return_hidden,a=void 0!==o&&o,s=n.grid_index,l=void 0===s?null:s,u=this.tiles[t]={grid_index:l||new ko(Qr.tile_scale,Qr.tile_scale,240),objects:{},labels:{},styles:{},repeat:i,return_hidden:a};null==u.complete&&(u.complete=new Promise((function(t,e){u.resolve=t,u.reject=e})))},resetTile:function(t){delete this.tiles[t]},abortTile:function(t){this.tiles[t]&&this.tiles[t].resolve&&this.tiles[t].resolve([]),this.resetTile(t)},addStyle:function(t,e){this.tiles[e].styles[t]=!0},collide:function(t,e,n){var r=this.tiles[n];if(!r)return Promise.resolve([]);for(var i=r.objects,o=0;o<t.length;o++){var a=t[o],s=a.label.layout.priority;i[s]=i[s]||{},i[s][e]=i[s][e]||[],i[s][e].push(a)}return delete r.styles[e],0===Object.keys(r.styles).length&&this.endTile(n),r.complete.then((function(){return r.resolve=null,r.labels[e]||[]}))},endTile:function(t){var e=this.tiles[t],n=e.labels;e.repeat&&xo.clear(t);for(var r=Object.keys(e.objects).sort((function(t,e){return t-e})),i=0;i<r.length;i++){var o=e.objects[r[i]];if(o)for(var a in o){var s=o[a];n[a]=n[a]||[];for(var l=0;l<s.length;l++){var u=s[l];this.canBePlaced(u,t,u.linked,e)?u.linked?this.canBePlaced(u.linked,t,u,e)?(u.show=!0,(u.label.breach||u.linked.label.breach)&&(u.label.breach=!0,u.linked.label.breach=!0),n[a].push(u),this.place(u,t,e),this.place(u.linked,t,e)):e.return_hidden&&(u.show=!1,n[a].push(u)):(u.show=!0,n[a].push(u),this.place(u,t,e)):e.return_hidden&&(u.show=!1,n[a].push(u))}}}delete this.tiles[t],e.resolve()},canBePlaced:function(t,e,n,r){var i=2<arguments.length&&void 0!==n?n:null,o=(3<arguments.length&&void 0!==r?r:{}).repeat,a=void 0===o||o,s=t.label,l=t.label.layout;if(null!==s.placed)return s.placed;var u=this.tiles[e].grid_index;if(l.collide&&Eo(s,"main"===e,u,i&&i.label))l.collide&&(s.placed=!1);else{if(!a||!xo.check(s,l,e))return!0;s.placed=!1}return s.placed},place:function(t,e,n){var r=t.label,i=n.repeat,o=void 0===i||i;null===r.placed&&(o&&xo.add(r,r.layout,e),function(t,e,n){var r,i,o,a,s,l,u,c,h,p,f,d,y=t.id;t.placed=!0,e||("point"!==t.type||t.angle?(r=t.getBoundingCircles(),n.insertCircleList(y,r)):(o=(i=t.getAABB()).left,a=i.top,s=i.right,l=i.bottom,n.insert(y,o,-a,s,-l))),e&&("point"!==t.type||t.isFlat()?(u=t.getBoundingCircles(),n.insertCircleList(y,u)):(h=(c=t.getScreenSpaceBoundingBox()).left,p=c.top,f=c.right,d=c.bottom,n.insert(y,h,p,f,d)))}(r,"main"===e,this.tiles[e].grid_index))}},Ao={id:0,queue:[],max_time:20,start_time:null,state:{},ignore_user_moving_view:!1,_ignoreViewMoveWithDebounce:Ei((function(){Ao.ignore_user_moving_view=!0}),0,500),add:function(t){t.id=Ao.id++,t.max_time=t.max_time||Ao.max_time,t.pause_factor=t.pause_factor||1;var e=new Promise((function(e,n){t.resolve=e,t.reject=n}));return t.promise=e,t.total_elapsed=0,t.stats={calls:0},this.queue.push(t),this.start_time=this.start_time||performance.now(),this.elapsed=performance.now()-this.start_time,this.elapsed<Ao.max_time&&this.process(t),t.promise},remove:function(t){var e=this.queue.indexOf(t);-1<e&&this.queue.splice(e,1)},process:function(t){if(!this.state.user_moving_view||!1!==t.user_moving_view||this.ignore_user_moving_view)return t.pause?(t.pause--,!0):(t.stats.calls++,t.start_time=performance.now(),t.run(t));Ao._ignoreViewMoveWithDebounce()},processAll:function(){this.start_time=this.start_time||performance.now(),this.ignore_user_moving_view&&!this.hasPendingTasks()&&(this.ignore_user_moving_view=!1);for(var t=0;t<this.queue.length;t++){var e=this.queue[t];if(!0!==this.process(e)&&(e.pause||(e.pause=e.elapsed>e.max_time?e.pause_factor:0),e.total_elapsed+=e.elapsed),this.elapsed=performance.now()-this.start_time,this.elapsed>=Ao.max_time){this.start_time=null;break}}},finish:function(t,e){return t.elapsed=performance.now()-t.start_time,t.total_elapsed+=t.elapsed,this.remove(t),t.resolve(e),t.promise},cancel:function(t){var e;t.cancel instanceof Function&&(e=t.cancel(t)),t.resolve(e||{})},shouldContinue:function(t){return t.elapsed=performance.now()-t.start_time,this.elapsed=performance.now()-this.start_time,t.elapsed<t.max_time&&this.elapsed<Ao.max_time},removeForTile:function(t){for(var e=this.queue.length-1;0<=e;e--)this.queue[e].tile_id===t&&(this.cancel(this.queue[e]),this.queue.splice(e,1))},setState:function(t){this.state=t},hasPendingTasks:function(){return!!this.queue.length}};function So(t){return{coords:t.coords,uid:t.uid,filtering:t.filtering,sprites:t.sprites,url:t.url,element:t.element,data:t.data,width:t.width,height:t.height,density:t.density,repeat:t.repeat,TEXTURE_WRAP_S:t.TEXTURE_WRAP_S,TEXTURE_WRAP_T:t.TEXTURE_WRAP_T,UNPACK_FLIP_Y_WEBGL:t.UNPACK_FLIP_Y_WEBGL,UNPACK_PREMULTIPLY_ALPHA_WEBGL:t.UNPACK_PREMULTIPLY_ALPHA_WEBGL}}var Mo=function(){function t(e,n,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};mr(this,t),i=So(i),this.gl=e,this.texture=e.createTexture(),this.texture&&(this.valid=!0),this.manager=r,this.bind(),this.name=n,this.retain_count=0,this.config_type=null,this.loading=null,this.loaded=!1,this.filtering=i.filtering,this.density=i.density||1,this.sprites=i.sprites,this.texcoords={},this.sizes={},this.css_sizes={},this.aspects={},this._byte_length=0,this.setData(1,1,new Uint8Array([0,0,0,0]),{filtering:"nearest"}),this.loaded=!1,this.manager.textures[this.name]&&(this.retain_count=this.manager.textures[this.name].retain_count,this.manager.textures[this.name].retain_count=0,this.manager.textures[this.name].destroy()),(this.manager.textures[this.name]=this).manager.texture_configs[this.name]=JSON.stringify(Object.assign({name:n},i)),this.load(i),ki("trace","creating Texture ".concat(this.name))}return _r(t,[{key:"destroy",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).force;0<this.retain_count&&!e?ki("error","Texture '".concat(this.name,"': destroying texture with retain count of '").concat(this.retain_count,"'")):this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,delete this.manager.textures[this.name],delete this.manager.texture_configs[this.name],this.valid=!1,this._byte_length=0,ki("trace","destroying Texture ".concat(this.name)))}},{key:"retain",value:function(){this.retain_count++}},{key:"release",value:function(){this.retain_count<=0&&ki("error","Texture '".concat(this.name,"': releasing texture with retain count of '").concat(this.retain_count,"'")),this.retain_count--,this.retain_count<=0&&this.destroy()}},{key:"bind",value:function(t){var e=0<arguments.length&&void 0!==t?t:0;this.valid&&(this.manager.activeUnit!==e&&(this.gl.activeTexture(this.gl.TEXTURE0+e),this.manager.activeUnit=e,this.manager.boundTexture=null),this.manager.boundTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.manager.boundTexture=this.texture))}},{key:"load",value:function(t){var e=this;return t?(this.loading=null,"string"==typeof t.url?(this.config_type="url",this.setUrl(t.url,t)):t.element?(this.config_type="element",this.setElement(t.element,t)):t.data&&t.width&&t.height&&(this.config_type="data",this.setData(t.width,t.height,t.data,t)),this.loading=this.loading&&this.loading.then((function(){return e.calculateSprites(),e}))||Promise.resolve(this),this.loading):this.loading||Promise.resolve(this)}},{key:"setUrl",value:function(t,e){var n=this,r=1<arguments.length&&void 0!==e?e:{};if(this.valid)return this.url=t,this.loading=new Promise((function(t,e){var i=new Image;i.onload=function(){try{n.setElement(i,r)}catch(e){n.loaded=!1,ki("warn","Texture '".concat(n.name,"': failed to load url: '").concat(n.url,"'"),e,r),n.manager.trigger("warning",{message:"Failed to load texture from ".concat(n.url),error:e,texture:r})}n.loaded=!0,t(n)},i.onerror=function(e){n.loaded=!1,ki("warn","Texture '".concat(n.name,"': failed to load url: '").concat(n.url,"'"),e,r),n.manager.trigger("warning",{message:"Failed to load texture from ".concat(n.url),error:e,texture:r}),t(n)},Ti.isSafari()&&"data:"===n.url.slice(0,5)||(i.crossOrigin="anonymous"),i.src=n.url})),this.loading}},{key:"setData",value:function(t,e,n,r){var i=3<arguments.length&&void 0!==r?r:{};return this.width=t,this.height=e,Array.isArray(n)&&(n=new Uint8Array(n)),this.update(n,i),this.setFiltering(i),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function(t,e){var n,r=t;return"string"==typeof t&&(t=document.querySelector(t)),t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof HTMLVideoElement?(this.update(t,e),this.setFiltering(e)):(this.loaded=!1,n="the 'element' parameter (`element: ".concat(JSON.stringify(r),"`) must be a CSS "),n+="selector string, or a <canvas>, <image> or <video> object",ki("warn","Texture '".concat(this.name,"': ").concat(n),e),this.manager.trigger("warning",{message:"Failed to load texture because ".concat(n),texture:e})),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:{};this.valid&&(this.bind(),t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof HTMLImageElement&&t.complete?(this.width=t.width,this.height=t.height,this._byte_length=this.width*this.height*4,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1!==n.UNPACK_FLIP_Y_WEBGL),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t)):(this._byte_length=t?t.byteLength:0,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t)),this.manager.trigger("update",this))}},{key:"getByteLength",value:function(){return this._byte_length}},{key:"setFiltering",value:function(t){var e,n=0<arguments.length&&void 0!==t?t:{};this.valid&&(n.filtering=n.filtering||"linear",e=this.gl,this.bind(),Ti.isPowerOf2(this.width)&&Ti.isPowerOf2(this.height)?(this.power_of_2=!0,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n.TEXTURE_WRAP_S||n.repeat&&e.REPEAT||e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,n.TEXTURE_WRAP_T||n.repeat&&e.REPEAT||e.CLAMP_TO_EDGE),"mipmap"===n.filtering?(this.filtering="mipmap",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.generateMipmap(e.TEXTURE_2D)):"linear"===n.filtering?(this.filtering="linear",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)):"nearest"===n.filtering&&(this.filtering="nearest",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST))):(this.power_of_2=!1,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),"nearest"===n.filtering?(this.filtering="nearest",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)):(this.filtering="linear",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR))),this.manager.trigger("update",this))}},{key:"calculateSprites",value:function(){if(this.sprites)for(var t in this.sprites){var e=this.sprites[t];this.texcoords[t]=this.manager.getTexcoordsForSprite([e[0],e[1]],[e[2],e[3]],[this.width,this.height]),this.sizes[t]=[e[2],e[3]],this.css_sizes[t]=[e[2]/this.density,e[3]/this.density],this.aspects[t]=e[2]/e[3]}}}]),t}();function Io(t){var e=[];return Object.assign(t,{subscribe:function(t){-1===e.indexOf(t)&&e.push(t)},unsubscribe:function(t){var n=e.indexOf(t);-1<n&&e.splice(n,1)},unsubscribeAll:function(){e=[]},trigger:function(t){for(var n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.forEach((function(e){if("function"==typeof e[t])try{e[t].apply(e,r)}catch(e){ki("warn","Caught exception in listener for event '".concat(t,"':"),e)}}))},hasSubscribersFor:function(t){var n=!1;return e.forEach((function(e){"function"==typeof e[t]&&(n=!0)})),n}})}var Oo=function(){function t(e){mr(this,t),this.default=t.DEFAULT_TEXTURE_NAME,this.textures={},this.texture_configs={},this.boundTexture=null,this.activeUnit=null,this.scene_id=e,ui.addTarget("Texture"+this.scene_id,this),Io(this)}return _r(t,[{key:"create",value:function(e,n,r){for(var i=t.matchers_,o=0;o<i.length;o++){var a=i[o][0],s=i[o][1];if(s&&s(r))return new a(e,n,this,r)}return new Mo(e,n,this,r)}},{key:"retain",value:function(t){this.textures[t]&&this.textures[t].retain()}},{key:"release",value:function(t){this.textures[t]&&this.textures[t].release()}},{key:"getRetainCount",value:function(t){if(this.textures[t])return this.textures[t].retain_count}},{key:"getByteLength",value:function(t){if(this.textures[t])return this.textures[t].getByteLength()}},{key:"destroy",value:function(t){var e=this;Object.keys(this.textures).forEach((function(n){var r=e.textures[n];n!==e.default&&r.gl===t&&r.destroy({force:!0})}))}},{key:"getSpriteInfo",value:function(t,e){var n=this.textures[t];return n&&{size:n.sizes[e],css_size:n.css_sizes[e],aspect:n.aspects[e],texcoords:n.texcoords[e]}}},{key:"getTexcoordsForSprite",value:function(t,e,n){var r=n[1]-t[1]-e[1];return[t[0]/n[0],r/n[1],(e[0]+t[0])/n[0],(e[1]+r)/n[1]]}},{key:"createFromObject",value:function(t,e){var n=[];if(e)for(var r in e){var i,o=e[r];this.changed(r,o)&&(i=this.create(t,r,o),n.push(i.loading))}return Promise.all(n)}},{key:"createDefault",value:function(t){return this.create(t,this.default)}},{key:"changed",value:function(t,e){var n=this.textures[t];if(n){if("element"===n.config_type||null!=e.element)return!0;if(e=So(e),this.texture_configs[t]===JSON.stringify(Object.assign({name:t},e)))return!1}return!0}},{key:"getInfo",value:function(t){var e=this;if(t=t||Object.keys(this.textures),Array.isArray(t))return Promise.all(t.map((function(t){return e.getInfo(t)})));var n=this.textures[t];return n?(n.loading||Promise.resolve(n)).then((function(){return{name:n.name,width:n.width,height:n.height,density:n.density,sprites:n.sprites,texcoords:n.texcoords,sizes:n.sizes,css_sizes:n.css_sizes,aspects:n.aspects,filtering:n.filtering,power_of_2:n.power_of_2,valid:n.valid}})):Promise.resolve(null)}},{key:"syncTexturesToWorker",value:function(t){var e=this;return li.is_main?Promise.all(t.map((function(t){var n=e.textures[t];return n&&n.loading||Promise.resolve()}))).then((function(){return e.textures})):ui.postMessage("Texture"+this.scene_id+".getInfo",t).then((function(t){return t.forEach((function(t){e.textures[t.name]=t})),e.textures}))}},{key:"getMaxTextureSize",value:function(t){return t.getParameter(t.MAX_TEXTURE_SIZE)}}],[{key:"register",value:function(e,n){var r=t.matchers_;if(!(e instanceof Function&&n instanceof Function))throw"Invalid texture constructor or matcher";this.deRegister(e),r.push([e,n])}},{key:"deRegister",value:function(e){for(var n=t.matchers_,r=0;r<n.length;r++)n[r][0]===e&&n.splice(r,1)}}]),t}();Oo.DEFAULT_TEXTURE_NAME="__default",Oo.matchers_=[];var Co={};function Lo(t){return Co[t]||(Co[t]=new Oo(t)),Co[t]}var Po=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ro=function(t,e,n){var r=new Float64Array(3);return r[0]=t,r[1]=e,r[2]=n,r},No=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t},jo=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],y=e[13],g=e[14],v=e[15],m=n*s-r*a,b=n*l-i*a,_=n*u-o*a,w=r*l-i*s,x=r*u-o*s,k=i*u-o*l,E=c*y-h*d,T=c*g-p*d,A=c*v-f*d,S=h*g-p*y,M=h*v-f*y,I=p*v-f*g,O=m*I-b*M+_*S+w*A-x*T+k*E;return O?(O=1/O,t[0]=(s*I-l*M+u*S)*O,t[1]=(l*A-a*I-u*T)*O,t[2]=(a*M-s*A+u*E)*O,t[3]=(i*M-r*I-o*S)*O,t[4]=(n*I-i*A+o*T)*O,t[5]=(r*A-n*M-o*E)*O,t[6]=(y*k-g*x+v*w)*O,t[7]=(g*_-d*k-v*b)*O,t[8]=(d*x-y*_+v*m)*O,t):null},Do=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=c*a-s*u,p=-c*o+s*l,f=u*o-a*l,d=n*h+r*p+i*f;return d?(d=1/d,t[0]=h*d,t[1]=(-c*r+i*u)*d,t[2]=(s*r-i*a)*d,t[3]=p*d,t[4]=(c*n-i*l)*d,t[5]=(-s*n+i*o)*d,t[6]=f*d,t[7]=(-u*n+r*l)*d,t[8]=(a*n-r*o)*d,t):null},zo=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],y=e[12],g=e[13],v=e[14],m=e[15],b=n[0],_=n[1],w=n[2],x=n[3];return t[0]=b*r+_*s+w*h+x*y,t[1]=b*i+_*l+w*p+x*g,t[2]=b*o+_*u+w*f+x*v,t[3]=b*a+_*c+w*d+x*m,b=n[4],_=n[5],w=n[6],x=n[7],t[4]=b*r+_*s+w*h+x*y,t[5]=b*i+_*l+w*p+x*g,t[6]=b*o+_*u+w*f+x*v,t[7]=b*a+_*c+w*d+x*m,b=n[8],_=n[9],w=n[10],x=n[11],t[8]=b*r+_*s+w*h+x*y,t[9]=b*i+_*l+w*p+x*g,t[10]=b*o+_*u+w*f+x*v,t[11]=b*a+_*c+w*d+x*m,b=n[12],_=n[13],w=n[14],x=n[15],t[12]=b*r+_*s+w*h+x*y,t[13]=b*i+_*l+w*p+x*g,t[14]=b*o+_*u+w*f+x*v,t[15]=b*a+_*c+w*d+x*m,t},Fo=function(t,e,n){var r,i,o,a,s,l,u,c,h,p,f,d,y=n[0],g=n[1],v=n[2];return e===t?(t[12]=e[0]*y+e[4]*g+e[8]*v+e[12],t[13]=e[1]*y+e[5]*g+e[9]*v+e[13],t[14]=e[2]*y+e[6]*g+e[10]*v+e[14],t[15]=e[3]*y+e[7]*g+e[11]*v+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=p,t[10]=f,t[11]=d,t[12]=r*y+s*g+h*v+e[12],t[13]=i*y+l*g+p*v+e[13],t[14]=o*y+u*g+f*v+e[14],t[15]=a*y+c*g+d*v+e[15]),t},Bo=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},Go=function(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},Ho=function(t,e,n,r){var i,o,a,s,l,u,c,h,p,f,d=e[0],y=e[1],g=e[2],v=r[0],m=r[1],b=r[2],_=n[0],w=n[1],x=n[2];return Math.abs(d-_)<1e-6&&Math.abs(y-w)<1e-6&&Math.abs(g-x)<1e-6?Po(t):(c=d-_,h=y-w,p=g-x,i=m*(p*=f=1/Math.sqrt(c*c+h*h+p*p))-b*(h*=f),o=b*(c*=f)-v*p,a=v*h-m*c,(f=Math.sqrt(i*i+o*o+a*a))?(i*=f=1/f,o*=f,a*=f):a=o=i=0,s=h*a-p*o,l=p*i-c*a,u=c*o-h*i,(f=Math.sqrt(s*s+l*l+u*u))?(s*=f=1/f,l*=f,u*=f):u=l=s=0,t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=o,t[5]=l,t[6]=h,t[7]=0,t[8]=a,t[9]=u,t[10]=p,t[11]=0,t[12]=-(i*d+o*y+a*g),t[13]=-(s*d+l*y+u*g),t[14]=-(c*d+h*y+p*g),t[15]=1,t)},Uo=Po,qo=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},Vo=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],y=e[13],g=e[14],v=e[15],m=n*s-r*a,b=n*l-i*a,_=n*u-o*a,w=r*l-i*s,x=r*u-o*s,k=i*u-o*l,E=c*y-h*d,T=c*g-p*d,A=c*v-f*d,S=h*g-p*y,M=h*v-f*y,I=p*v-f*g,O=m*I-b*M+_*S+w*A-x*T+k*E;return O?(O=1/O,t[0]=(s*I-l*M+u*S)*O,t[1]=(i*M-r*I-o*S)*O,t[2]=(y*k-g*x+v*w)*O,t[3]=(p*x-h*k-f*w)*O,t[4]=(l*A-a*I-u*T)*O,t[5]=(n*I-i*A+o*T)*O,t[6]=(g*_-d*k-v*b)*O,t[7]=(c*k-p*_+f*b)*O,t[8]=(a*M-s*A+u*E)*O,t[9]=(r*A-n*M-o*E)*O,t[10]=(d*x-y*_+v*m)*O,t[11]=(h*_-c*x-f*m)*O,t[12]=(s*T-a*S-l*E)*O,t[13]=(n*S-r*T+i*E)*O,t[14]=(y*b-d*w-g*m)*O,t[15]=(c*w-h*b+p*m)*O,t):null},Zo=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t},Wo=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return 0<a&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t},Yo=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},Ko=function(){function t(e,n){mr(this,t),this._gl=e,this._requests={},this._pixels=null,this._has_dirty_buffer=!1,this._fbo=this._gl.createFramebuffer(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._fbo_size={width:256,height:256};var r=Lo(n).create(this._gl,"selection_fbo",{filtering:"nearest"});r.setData(this._fbo_size.width,this._fbo_size.height,null,{filtering:"nearest"}),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,r.texture,0);var i=this._gl.createRenderbuffer();this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,i),this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this._fbo_size.width,this._fbo_size.height),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,i),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}return _r(t,[{key:"destroy",value:function(){this._gl&&this._fbo&&(this._gl.deleteFramebuffer(this._fbo),this._fbo=null,this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null))}},{key:"bind",value:function(){var e;this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._gl.viewport(0,0,this._fbo_size.width,this._fbo_size.height),(e=this._gl).clearColor.apply(e,Lr(t.defaultColor))}},{key:"getFeatureAt",value:function(e,n,r){var i=n.radius,o=n.top_most_only,a=void 0===o||o;!e||e.x<0||e.y<0||1<e.x||1<e.y?r({features:null}):(this.selection_request_id=this.selection_request_id+1||0,this._requests[this.selection_request_id]={id:this.selection_request_id,point:e,radius:i,top_most_only:a,ttl:a?1:t.MAX_PICKING_TRIES,callback:r})}},{key:"hasPendingRequests",value:function(){return 0<Object.keys(this._requests).length}},{key:"clearPendingRequests",value:function(){for(var t in this._requests)this._requests[t].callback(new Error("cleared")),delete this._requests[t];this._pending_deep_request=null}},{key:"read",value:function(t){if(this.hasPendingRequests()){var e=this._gl;for(var n in e.bindFramebuffer(e.FRAMEBUFFER,this._fbo),this._pending_deep_request&&this.processRequest(this._pending_deep_request,t),this._requests)if(this.processRequest(this._requests[n],t))break;e.bindFramebuffer(e.FRAMEBUFFER,null)}}},{key:"processRequest",value:function(e,n){var r,i,o,a=this._gl,s=255,l=e.point,u=e.radius,c=(o=u?(i=Math.min(this._fbo_size.width,this._fbo_size.height),{x:Math.min(Math.ceil(2*u.x*this._fbo_size.width),i),y:Math.min(Math.ceil(2*u.y*this._fbo_size.height),i)}):(u={x:0,y:0},{x:1,y:1})).x*o.y*4;if(null==this._pixels||this._pixels.byteLength<c)this._pixels=new Uint8Array(c);else if(this._pixels.fill instanceof Function)this._pixels.fill(0,0,c);else for(var h=0;h<c;h++)this._pixels[h]=0;a.readPixels(Math.round((l.x-u.x)*this._fbo_size.width),Math.round((1-l.y-u.y)*this._fbo_size.height),o.x,o.y,a.RGBA,a.UNSIGNED_BYTE,this._pixels),e.ttl--;var p=Math.floor(o.x/2),f=Math.floor(o.y/2),d=4*(f*o.x+p),y=this._pixels.slice(d,d+4),g=y[0]+(y[1]<<8)+(y[2]<<16);if(0<g)r=g+(y[3]<<24)>>>0,s=y[3];else if(4<c)for(var v=1/0,m=(d=0,0);m<o.y;m++)for(var b,_=0;_<o.x;_++,d+=4)0<(g=(y=this._pixels.slice(d,d+4))[0]+(y[1]<<8)+(y[2]<<16))&&(b=Math.pow(_-p,2)+Math.pow(m-f,2))<v&&(r=g+(y[3]<<24)>>>0,s=y[3],v=b);if(255!==s){var w=this._getFeatureByKey(r,n);if(e.features||(e.features=[]),!w)return void this._finishRead(e);if(e.features.every((function(t){return t.id!==w.id}))&&e.features.push(w),e.ttl)return this._pending_deep_request=e,t._discardColor(y),this._has_dirty_buffer=!0;this._finishRead(e)}else this._finishRead(e)}},{key:"_finishRead",value:function(e){var n=e.features||t.EMPTY_ARRAY;e.top_most_only||(this._pending_deep_request=null,t._resetDiscardedColors()),delete this._requests[e.id],e.callback({features:n})}},{key:"_getFeatureByKey",value:function(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r];if(i.selection_data&&(n=i.selection_data[t])){n.tile={coords:i.coords};break}}return n}},{key:"setupDiscards",value:function(e){for(var n=t.MAX_PICKING_TRIES;n--;)e.uniform("4fv","u_selection_discard".concat(n),t._discarded_colors[n]||t.defaultColor)}},{key:"has_dirty_buffer",get:function(){return this._has_dirty_buffer},set:function(){this._has_dirty_buffer=!!this._pending_deep_request}}],[{key:"makeEntry",value:function(){this.map_entry++;var t=255&this.map_entry,e=this.map_entry>>8&255,n=this.map_entry>>16&255,r=this.map_prefix;return{key:t+(e<<8)+(n<<16)+(r<<24)>>>0,color:[t/255,e/255,n/255,r/255]}}},{key:"reset",value:function(){this.map_entry=0}},{key:"setPrefix",value:function(t){this.map_prefix=t}},{key:"_discardColor",value:function(t){this._discarded_colors.push([t[0]/255,t[1]/255,t[2]/255,t[3]/255])}},{key:"_resetDiscardedColors",value:function(){this._discarded_colors.length=0}}]),t}();Ko._discarded_colors=[],Ko.map_entry=0,Ko.map_prefix=0,Ko.defaultColor=[0,0,0,1],Ko.MAX_PICKING_TRIES=10,Ko.EMPTY_ARRAY=Object.freeze([]);var Xo={parseUniforms:function(t){var e=[];for(var n in t){var r,i=n,o=t[n];if("number"==typeof o)e.push({type:"float",method:"1f",name:n,value:o,key:i,uniforms:t});else if(Array.isArray(o)){if("number"==typeof o[0])2<=o.length&&o.length<=4?e.push({type:"vec"+o.length,method:o.length+"fv",name:n,value:o,key:i,uniforms:t}):4<o.length&&e.push({type:"float[]",method:"1fv",name:n+"[0]",value:o,key:i,uniforms:t});else if("string"==typeof o[0])for(r=0;r<o.length;r++)e.push({type:"sampler2D",method:"1i",name:n+"["+r+"]",value:o[r],key:r,uniforms:o});else if(Array.isArray(o[0])&&"number"==typeof o[0][0]&&2<=o[0].length&&o[0].length<=4)for(r=0;r<o.length;r++)e.push({type:"vec"+o[0].length,method:o[r].length+"fv",name:n+"["+r+"]",value:o[r],key:r,uniforms:o})}else"boolean"==typeof o?e.push({type:"bool",method:"1i",name:n,value:o,key:i,uniforms:t}):"string"==typeof o&&e.push({type:"sampler2D",method:"1i",name:n,value:o,key:i,uniforms:t})}return e},defineVariable:function(t,e){var n,r;if("number"==typeof e)n="float";else if(Array.isArray(e))"number"==typeof e[0]?2<=e.length&&e.length<=4?n="vec"+e.length:(n="float",r=e.length):"string"==typeof e[0]&&(n="sampler2D",r=e.length);else if("boolean"==typeof e)n="bool";else{if("string"!=typeof e)return;n="sampler2D"}var i="";return i+="".concat(n," ").concat(t),r&&(i+="[".concat(r,"]")),i+";\n"},defineUniform:function(t,e){var n=Xo.defineVariable(t,e);if(n)return"uniform "+n},isUniformDefined:function(t,e){var n=new RegExp("uniform[^;]+(?:{[\\s\\S]*})?[^;]*\\b"+t+"\\b","g");return!!e.match(n)},isSymbolReferenced:function(t,e){var n=new RegExp("\\b"+t+"\\b","g");return 0<=e.search(n)},expandVec3:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(t)){if(2!==t.length)return t;e=[].concat(Lr(t),[n]).map(parseFloat)}else e=[t,t,t].map(parseFloat);if(e&&e.every((function(t){return"number"==typeof t&&!isNaN(t)})))return e},expandVec4:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(t)){if(3!==t.length)return t;e=[].concat(Lr(t),[n]).map(parseFloat)}else e=[t,t,t,n].map(parseFloat);if(e&&e.every((function(t){return"number"==typeof t&&!isNaN(t)})))return e}},Jo=[];function $o(t,e){var n=Jo.filter((function(e){return e[0]===t}))[0];return(n=n&&n[1])||(Jo.push([t,{}]),n=Jo[Jo.length-1][1]),n[e]||(n[e]=t.getExtension(e)),n[e]}function Qo(t){var e,n,r=0;if(0===t.length)return r;for(e=0,n=t.length;e<n;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return r}var ta=a((function(t){var e="(.|[\\r\\n]|\\n)*?\\*\\/\\n?\\n?",n=/(^|[^\S\n])(?:\/\/)([\s\S]+?)$/gm,r=/(^|[^\S\n])(?:\/\/[^!])([\s\S]+?)$/gm,i=t.exports=function(t,e){return t?i.block(i.line(t,e),e):""};i.block=function(t,n){n=n||{};var r=new RegExp("\\/\\*"+e,"gm");return n.safe&&(r=new RegExp("\\/\\*(?!\\*?\\!)"+e,"gm")),t?t.replace(r,""):""},i.line=function(t,e){var i=n;return(e=e||{}).safe&&(i=r),t?t.replace(i,""):""}})),ea=/^\s*#pragma.*$/gm,na=/\\\s*\n/gm,ra=function(){function t(e,n,r,i,o){if(mr(this,t),o=o||{},this.textureManager=Lo(i),this.gl=e,this.program=null,this.compiled=!1,this.compiling=!1,this.error=null,!t.polyfills[i]){t.polyfills[i]={};try{this.gl.uniformMatrix3fv(null,!1,new Float64Array(9))}catch(e){t.polyfills[i].uniformMatrix3fv=this.gl.uniformMatrix3fv,this.gl.uniformMatrix3fv=function(e,n,r){t.polyfills[i].uniformMatrix3fv.call(this,e,n,new Float32Array(r))}}try{this.gl.uniformMatrix4fv(null,!1,new Float64Array(16))}catch(e){t.polyfills[i].uniformMatrix4fv=this.gl.uniformMatrix4fv,this.gl.uniformMatrix4fv=function(e,n,r){t.polyfills[i].uniformMatrix4fv.call(this,e,n,new Float32Array(r))}}}this.defines=Object.assign({},o.defines||{}),this.blocks=Object.assign({},o.blocks||{}),this.block_scopes=Object.assign({},o.block_scopes||{}),this.extensions=o.extensions||[],this.dependent_uniforms=o.uniforms,this.uniforms={},this.attribs={},this.vertex_source=n,this.fragment_source=r,this.id=t.id++,this.name=o.name}return _r(t,[{key:"destroy",value:function(){this.gl.useProgram(null),this.gl.deleteProgram(this.program),this.program=null,this.uniforms={},this.attribs={},this.compiled=!1}},{key:"use",value:function(){this.compiled&&(t.current!==this&&this.gl.useProgram(this.program),t.current=this)}},{key:"compile",value:function(){var e=this;if(this.compiling)throw new Error("ShaderProgram.compile(): skipping for ".concat(this.id," (").concat(this.name,") because already compiling"));this.compiling=!0,this.compiled=!1,this.error=null,this.computed_vertex_source=this.vertex_source,this.computed_fragment_source=this.fragment_source;var n,r=this.checkExtensions(),i=this.buildDefineList(),o=this.buildShaderBlockList();for(var a in o){var s,l,u,c=o[a];!c||Array.isArray(c)&&0===c.length||(n=new RegExp("^\\s*#pragma\\s+tangram:\\s+"+a+"\\s*$","m"),s=this.computed_vertex_source.match(n),l=this.computed_fragment_source.match(n),null==s&&null==l||(u="",c.forEach((function(t){var e="".concat(t.scope,", ").concat(t.key,", ").concat(t.num);u+="\n// tangram-block-start: ".concat(e,"\n"),u+=t.source,u+="\n// tangram-block-end: ".concat(e,"\n")})),null!=s&&(this.computed_vertex_source=this.computed_vertex_source.replace(n,u)),null!=l&&(this.computed_fragment_source=this.computed_fragment_source.replace(n,u)),i["TANGRAM_BLOCK_"+a.replace(/[\s-]+/g,"_").toUpperCase()]=!0))}this.computed_vertex_source=this.computed_vertex_source.replace(ea,""),this.computed_fragment_source=this.computed_fragment_source.replace(ea,""),this.ensureUniforms(this.dependent_uniforms);var h=this.gl.getShaderPrecisionFormat(this.gl.FRAGMENT_SHADER,this.gl.HIGH_FLOAT),p=h&&0<h.precision?"precision highp float;\n":"precision mediump float;\n";i.TANGRAM_VERTEX_SHADER=!0,i.TANGRAM_FRAGMENT_SHADER=!1,this.computed_vertex_source=p+t.buildDefineString(i)+this.computed_vertex_source,i.TANGRAM_VERTEX_SHADER=!1,i.TANGRAM_FRAGMENT_SHADER=!0,this.computed_fragment_source=t.buildExtensionString(r)+p+t.buildDefineString(i)+this.computed_fragment_source,this.computed_vertex_source=this.computed_vertex_source.replace(na,""),this.computed_fragment_source=this.computed_fragment_source.replace(na,"");try{this.program=t.updateProgram(this.gl,this.program,this.computed_vertex_source,this.computed_fragment_source),this.compiled=!0,this.compiling=!1}catch(r){throw this.program=null,this.compiled=!1,this.compiling=!1,"vertex"!==(this.error=r).type&&"fragment"!==r.type||(this.shader_errors=r.errors,this.shader_errors.forEach((function(t){t.type=r.type,t.block=e.block(r.type,t.line)}))),r}this.computed_vertex_source=null,this.computed_fragment_source=null,this.use(),this.refreshUniforms(),this.refreshAttributes()}},{key:"buildDefineList",value:function(){var e,n={};for(e in t.defines)n[e]=t.defines[e];for(e in this.defines)n[e]=this.defines[e];return n}},{key:"buildShaderBlockList",value:function(){var e,n,r={};for(e in t.blocks)r[e]=[],Array.isArray(t.blocks[e])?(n=r[e]).push.apply(n,Lr(t.blocks[e].map((function(t,n){return{key:e,source:t,num:n,scope:"ShaderProgram"}})))):r[e]=[{key:e,source:t.blocks[e],num:0,scope:"ShaderProgram"}];for(e in this.blocks)if(r[e]=r[e]||[],Array.isArray(this.blocks[e]))for(var i=this.block_scopes&&this.block_scopes[e]||[],o=null,a=0,s=0;s<this.blocks[e].length;s++)i[s]!==o&&(o=i[s],a=0),r[e].push({key:e,source:this.blocks[e][s],num:a,scope:o||this.name}),a++;else r[e].push({key:e,source:this.blocks[e],num:0,scope:this.name});return r}},{key:"ensureUniforms",value:function(t){if(t){var e,n=ta(this.computed_vertex_source),r=ta(this.computed_fragment_source),i=[],o=[];for(var a in t){var s=Xo.isUniformDefined(a,n),l=Xo.isUniformDefined(a,r);if(!s||!l){if(!(e=Xo.defineUniform(a,t[a])))continue;s||(ki("trace","Program ".concat(this.name,": ").concat(a," not defined in vertex shader, injecting: '").concat(e,"'")),i.push(e)),l||(ki("trace","Program ".concat(this.name,": ").concat(a," not defined in fragment shader, injecting: '").concat(e,"'")),o.push(e))}}0<i.length&&(this.computed_vertex_source=i.join("\n")+this.computed_vertex_source),0<o.length&&(this.computed_fragment_source=o.join("\n")+this.computed_fragment_source)}}},{key:"setUniforms",value:function(t,e){var n=!(1<arguments.length&&void 0!==e)||e;if(this.compiled){n&&(this.texture_unit=0);for(var r=Xo.parseUniforms(t),i=0;i<r.length;i++){var o=r[i];"sampler2D"===o.type?this.setTextureUniform(o.name,o.value):this.uniform(o.method,o.name,o.value)}}}},{key:"saveUniforms",value:function(t){var e=t||this.uniforms;for(var n in e){var r=this.uniforms[n];r&&(r.saved_value=r.value)}this.saved_texture_unit=this.texture_unit||0}},{key:"restoreUniforms",value:function(t){var e=t||this.uniforms;for(var n in e){var r=this.uniforms[n];r&&r.saved_value&&(r.value=r.saved_value,this.updateUniform(r))}this.texture_unit=this.saved_texture_unit||0}},{key:"setTextureUniform",value:function(t,e){var n=this.textureManager.textures[e];null!=n?(n.bind(this.texture_unit),this.uniform("1i",t,this.texture_unit),this.texture_unit++):ki("warn","Cannot find texture '".concat(e,"'"))}},{key:"uniform",value:function(t,e,n){var r;this.compiled&&(this.uniforms[e]=this.uniforms[e]||{},(r=this.uniforms[e]).name=e,void 0===r.location&&(r.location=this.gl.getUniformLocation(this.program,e)),r.method=t,r.value=n,this.updateUniform(r))}},{key:"updateUniform",value:function(t){this.compiled&&t&&null!=t.location&&(this.use(),this.commitUniform(t))}},{key:"commitUniform",value:function(t){var e=t.location,n=t.value;switch(t.method){case"1i":this.gl.uniform1i(e,n);break;case"1f":this.gl.uniform1f(e,n);break;case"2f":this.gl.uniform2f(e,n[0],n[1]);break;case"3f":this.gl.uniform3f(e,n[0],n[1],n[2]);break;case"4f":this.gl.uniform4f(e,n[0],n[1],n[2],n[3]);break;case"1iv":this.gl.uniform1iv(e,n);break;case"3iv":this.gl.uniform3iv(e,n);break;case"1fv":this.gl.uniform1fv(e,n);break;case"2fv":this.gl.uniform2fv(e,n);break;case"3fv":this.gl.uniform3fv(e,n);break;case"4fv":this.gl.uniform4fv(e,n);break;case"Matrix3fv":this.gl.uniformMatrix3fv(e,!1,n);break;case"Matrix4fv":this.gl.uniformMatrix4fv(e,!1,n)}}},{key:"refreshUniforms",value:function(){if(this.compiled)for(var t in this.uniforms){var e=this.uniforms[t];e.location=this.gl.getUniformLocation(this.program,t),this.updateUniform(e)}}},{key:"refreshAttributes",value:function(){this.attribs={}}},{key:"attribute",value:function(t){if(this.compiled){var e=this.attribs[t]=this.attribs[t]||{};return null!=e.location||(e.name=t,e.location=this.gl.getAttribLocation(this.program,t)),e}}},{key:"source",value:function(t){return"vertex"===t?this.computed_vertex_source:"fragment"===t?this.computed_fragment_source:void 0}},{key:"lines",value:function(t){var e=this.source(t);return e?e.split("\n"):[]}},{key:"line",value:function(t,e){var n=this.lines(t);if(n)return n[e]}},{key:"block",value:function(t,e){for(var n,r=this.lines(t),i=0;i<e&&i<r.length;i++){var o=r[i],a=o.match(/\/\/ tangram-block-start: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/);a&&1<a.length?n={scope:a[1],name:a[2],num:a[3]}:(a=o.match(/\/\/ tangram-block-end: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/))&&1<a.length&&(n=null),n&&(n.line=null==n.line?-1:n.line+1,n.source=o)}return n}},{key:"checkExtensions",value:function(){var t=this,e=[];return this.extensions.forEach((function(n){var r=$o(t.gl,n),i="TANGRAM_EXTENSION_".concat(n);t.defines[i]=null!=r,r?e.push(n):ki("debug","Could not enable extension '".concat(n,"'"))})),e}}]),t}();ra.polyfills={},ra.id=0,ra.current=null,ra.defines={},ra.blocks={},ra.reset=function(){ra.programs_by_source={},ra.shaders_by_source={}},ra.reset(),ra.buildDefineString=function(t){var e="";for(var n in t)null!=t[n]&&!1!==t[n]&&("boolean"==typeof t[n]&&!0===t[n]?e+="#define "+n+"\n":"number"==typeof t[n]&&Math.floor(t[n])===t[n]?e+="#define "+n+" "+t[n].toFixed(1)+"\n":e+="#define "+n+" "+t[n]+"\n");return e},ra.buildExtensionString=function(t){var e="";return(t=t||[]).forEach((function(t){e+="#ifdef GL_".concat(t,"\n#extension GL_").concat(t," : enable\n#endif\n")})),e},ra.addBlock=function(t){var e;ra.blocks[t]=ra.blocks[t]||[];for(var n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=ra.blocks[t]).push.apply(e,r)},ra.removeBlock=function(t){ra.blocks[t]=[]},ra.replaceBlock=function(t){ra.removeBlock(t);for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];ra.addBlock.apply(ra,[t].concat(n))},ra.updateProgram=function(t,e,n,r){var i=Qo(t._tangram_id+"::"+n+"::"+r);if(ra.programs_by_source[i])return ki("trace","Reusing identical source GL program object"),ra.programs_by_source[i];var o=ra.createShader(t,n,t.VERTEX_SHADER),a=ra.createShader(t,r,t.FRAGMENT_SHADER);if(t.useProgram(null),null!=e)for(var s=t.getAttachedShaders(e),l=0;l<s.length;l++)t.detachShader(e,s[l]);else e=t.createProgram();if(null==o||null==a)return e;if(t.attachShader(e,o),t.attachShader(e,a),t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS))return ra.programs_by_source[i]=e;var u=new Error("WebGL program error:\n            VALIDATE_STATUS: ".concat(t.getProgramParameter(e,t.VALIDATE_STATUS),"\n            ERROR: ").concat(t.getError(),"\n            --- Vertex Shader ---\n            ").concat(n,"\n            --- Fragment Shader ---\n            ").concat(r));throw Object.assign(new Error(u),{type:"program"})};var ia,oa={disabled:!(ra.createShader=function(t,e,n){var r=Qo(t._tangram_id+"::"+e);if(ra.shaders_by_source[r])return ki("trace","Reusing identical source GL shader object"),ra.shaders_by_source[r];var i=t.createShader(n);if(t.shaderSource(i,e),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))return ra.shaders_by_source[r]=i;var o=n===t.VERTEX_SHADER?"vertex":"fragment",a=t.getShaderInfoLog(i),s=function(t){t=String(t);for(var e,n=[];e=t.match(/ERROR\:([^\n]+)/);){t=t.slice(e.index+1);var r=(a=e[1].trim()).split(":"),i=r.slice(2).join(":").trim(),o=parseInt(r[0],10),a=parseInt(r[1],10);n.push({message:i,file:o,line:a})}return n}(a);throw Object.assign(new Error(a),{type:o,errors:s})}),bound_vao:[],init:function(t){var e;!0!==this.disabled&&(e=$o(t,"OES_vertex_array_object")),null!=e?ki("info","Vertex Array Object extension available"):!0!==this.disabled?ki("warn","Vertex Array Object extension NOT available"):ki("warn","Vertex Array Object extension force disabled")},create:function(t,e,n){var r={};r.setup=e,r.teardown=n;var i=$o(t,"OES_vertex_array_object");return null!=i&&(r._vao=i.createVertexArrayOES(),i.bindVertexArrayOES(r._vao)),r.setup(!0),r},getCurrentBinding:function(t){var e=this.bound_vao.filter((function(e){return e[0]===t}))[0];return e&&e[1]},setCurrentBinding:function(t,e){var n=this.bound_vao,r=n.filter((function(e){return e[0]===t}))[0];null==r?n.push([t,e]):r[1]=e},bind:function(t,e){var n,r=$o(t,"OES_vertex_array_object");null!=e?null!=r&&null!=e._vao?(r.bindVertexArrayOES(e._vao),this.setCurrentBinding(t,e)):e.setup(!1):(n=this.getCurrentBinding(t),null!=r?r.bindVertexArrayOES(null):null!=n&&"function"==typeof n.teardown&&n.teardown(),this.setCurrentBinding(t,null))},destroy:function(t,e){var n=$o(t,"OES_vertex_array_object");null!=n&&null!=e&&null!=e._vao&&(n.deleteVertexArrayOES(e._vao),e._vao=null)}},aa=function(){function t(e,n,r,i,o,a){mr(this,t),a=a||{},this.textureManager=Lo(o),this.gl=e,this.vertex_data=n,this.element_data=r,this.vertex_layout=i,this.vertex_buffer=this.gl.createBuffer(),this.buffer_size=this.vertex_data.byteLength,this.draw_mode=a.draw_mode||this.gl.TRIANGLES,this.data_usage=a.data_usage||this.gl.STATIC_DRAW,this.vertices_per_geometry=3,this.uniforms=a.uniforms,this.textures=a.textures,this.retain=a.retain||!1,this.created_at=+new Date,this.fade_in_time=a.fade_in_time||0,this.vertex_count=this.vertex_data.byteLength/this.vertex_layout.stride,this.element_count=0,this.vaos={},this.toggle_element_array=!1,this.element_data?(this.toggle_element_array=!0,this.element_count=this.element_data.length,this.geometry_count=this.element_count/this.vertices_per_geometry,this.element_type=this.element_data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT,this.element_buffer=this.gl.createBuffer(),this.buffer_size+=this.element_data.byteLength,this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.element_buffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.element_data,this.data_usage)):this.geometry_count=this.vertex_count/this.vertices_per_geometry,this.upload(),this.retain||(delete this.vertex_data,delete this.element_data),this.valid=!0}return _r(t,[{key:"render",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};if(!this.valid)return!1;var n=e.program||ra.current;n.use(),this.uniforms&&(n.saveUniforms(this.uniforms),n.setUniforms(this.uniforms,!1));var r=(new Date-this.created_at)/1e3;return n.uniform("1f","u_visible_time",r),this.bind(n),this.toggle_element_array?this.gl.drawElements(this.draw_mode,this.element_count,this.element_type,0):this.gl.drawArrays(this.draw_mode,0,this.vertex_count),oa.bind(this.gl,null),this.uniforms&&n.restoreUniforms(this.uniforms),r<this.fade_in_time}},{key:"bind",value:function(t){var e=this,n=this.vaos[t.id];n?oa.bind(this.gl,n):this.vaos[t.id]=oa.create(this.gl,(function(n){e.gl.bindBuffer(e.gl.ARRAY_BUFFER,e.vertex_buffer),e.toggle_element_array&&e.gl.bindBuffer(e.gl.ELEMENT_ARRAY_BUFFER,e.element_buffer),e.vertex_layout.enable(e.gl,t,n)}))}},{key:"upload",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertex_data,this.data_usage)}},{key:"destroy",value:function(){var t=this;if(!this.valid)return!1;for(var e in this.valid=!1,this.vaos)oa.destroy(this.gl,this.vaos[e]);return this.gl.deleteBuffer(this.vertex_buffer),this.vertex_buffer=null,this.element_buffer&&(this.gl.deleteBuffer(this.element_buffer),this.element_buffer=null),delete this.vertex_data,delete this.element_data,this.textures&&this.textures.forEach((function(e){return t.textureManager.release(e)})),!0}}]),t}(),sa=["emission","ambient","diffuse","specular"],la=function(){function t(e){var n=this;mr(this,t),e=e||{},sa.forEach((function(t){var r=e[t];null!=r&&(r.texture?n[t]={texture:r.texture,mapping:r.mapping||"spheremap",scale:Xo.expandVec3(null!=r.scale?r.scale:1),amount:Xo.expandVec4(null!=r.amount?r.amount:1)}:"number"==typeof r||Array.isArray(r)?n[t]={amount:Xo.expandVec4(r)}:n[t]="string"==typeof r?{amount:go.parseColor(r)}:r)})),this.specular&&(this.specular.shininess=e.shininess?parseFloat(e.shininess):.2),null!=e.normal&&(this.normal={texture:e.normal.texture,mapping:e.normal.mapping||"triplanar",scale:Xo.expandVec3(null!=e.normal.scale?e.normal.scale:1),amount:null!=e.normal.amount?e.normal.amount:1})}return _r(t,[{key:"inject",value:function(e){var n=this;sa.forEach((function(t){var r="TANGRAM_MATERIAL_".concat(t.toUpperCase()),i=r+"_TEXTURE";e.defines[r]=null!=n[t],n[t]&&n[t].texture&&(e.defines[i]=!0,e.defines[i+"_"+n[t].mapping.toUpperCase()]=!0,e.defines["TANGRAM_MATERIAL_TEXTURE_".concat(n[t].mapping.toUpperCase())]=!0,e.texcoords=e.texcoords||"uv"===n[t].mapping)})),this.normal&&this.normal.texture&&(e.defines.TANGRAM_MATERIAL_NORMAL_TEXTURE=!0,e.defines["TANGRAM_MATERIAL_NORMAL_TEXTURE_"+this.normal.mapping.toUpperCase()]=!0,e.defines["TANGRAM_MATERIAL_TEXTURE_".concat(this.normal.mapping.toUpperCase())]=!0,e.texcoords=e.texcoords||"uv"===this.normal.mapping),e.replaceShaderBlock(t.block,"/*Defines globals:materiallight_accumulator_**/struct Material{\n#ifdef TANGRAM_MATERIAL_EMISSION\nvec4 emission;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nvec3 emissionScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT\nvec4 ambient;\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nvec3 ambientScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nvec4 diffuse;\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nvec3 diffuseScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 specular;float shininess;\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nvec3 specularScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvec3 normalScale;float normalAmount;\n#endif\n};uniform Material u_material;Material material;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nuniform sampler2D u_material_emission_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nuniform sampler2D u_material_ambient_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nuniform sampler2D u_material_diffuse_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nuniform sampler2D u_material_specular_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nuniform sampler2D u_material_normal_texture;\n#endif\nvec4 light_accumulator_ambient=vec4(vec3(0.0),1.);vec4 light_accumulator_diffuse=vec4(vec3(0.0),1.);\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 light_accumulator_specular=vec4(vec3(0.0),1.);\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_SPHEREMAP\nvec4 getSphereMap(in sampler2D _tex,in vec3 _eyeToPoint,in vec3 _normal,in vec2 _skew){vec3 eye=normalize(_eyeToPoint);eye.xy-=_skew;eye=normalize(eye);vec3 r=reflect(eye,_normal);r.z+=1.0;float m=2.*length(r);vec2 uv=r.xy/m+.5;return texture2D(_tex,uv);}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_TRIPLANAR\nvec3 getTriPlanarBlend(in vec3 _normal){vec3 blending=abs(_normal);blending=normalize(max(blending,0.00001));float b=(blending.x+blending.y+blending.z);return blending/b;}vec4 getTriPlanar(in sampler2D _tex,in vec3 _pos,in vec3 _normal,in vec3 _scale){vec3 blending=getTriPlanarBlend(_normal);vec4 xaxis=texture2D(_tex,fract(_pos.yz*_scale.x));vec4 yaxis=texture2D(_tex,fract(_pos.xz*_scale.y));vec4 zaxis=texture2D(_tex,fract(_pos.xy*_scale.z));return xaxis*blending.x+yaxis*blending.y+zaxis*blending.z;}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_PLANAR\nvec4 getPlanar(in sampler2D _tex,in vec3 _pos,in vec2 _scale){return texture2D(_tex,fract(_pos.xy*_scale.x));}\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvoid calculateNormal(inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_UV\n_normal+=texture2D(u_material_normal_texture,fract(v_texcoord*material.normalScale.xy)).rgb*2.0-1.0;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_PLANAR\nvec3 normalTex=getPlanar(u_material_normal_texture,v_world_position.xyz,material.normalScale.xy).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_TRIPLANAR\nvec3 normalTex=getTriPlanar(u_material_normal_texture,v_world_position.xyz,_normal,material.normalScale).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n_normal=normalize(_normal);}\n#endif\nvoid calculateMaterial(in vec3 _eyeToPoint,inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_UV\nmaterial.emission*=texture2D(u_material_emission_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_PLANAR\nmaterial.emission*=getPlanar(u_material_emission_texture,v_world_position.xyz,material.emissionScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_TRIPLANAR\nmaterial.emission*=getTriPlanar(u_material_emission_texture,v_world_position.xyz,_normal,material.emissionScale);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_SPHEREMAP\nmaterial.emission*=getSphereMap(u_material_emission_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_UV\nmaterial.ambient*=texture2D(u_material_ambient_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_PLANAR\nmaterial.ambient*=getPlanar(u_material_ambient_texture,v_world_position.xyz,material.ambientScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_TRIPLANAR\nmaterial.ambient*=getTriPlanar(u_material_ambient_texture,v_world_position.xyz,_normal,material.ambientScale);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_SPHEREMAP\nmaterial.ambient*=getSphereMap(u_material_ambient_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_UV\nmaterial.diffuse*=texture2D(u_material_diffuse_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_PLANAR\nmaterial.diffuse*=getPlanar(u_material_diffuse_texture,v_world_position.xyz,material.diffuseScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_TRIPLANAR\nmaterial.diffuse*=getTriPlanar(u_material_diffuse_texture,v_world_position.xyz,_normal,material.diffuseScale);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_SPHEREMAP\nmaterial.diffuse*=getSphereMap(u_material_diffuse_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_UV\nmaterial.specular*=texture2D(u_material_specular_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_PLANAR\nmaterial.specular*=getPlanar(u_material_specular_texture,v_world_position.xyz,material.specularScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_TRIPLANAR\nmaterial.specular*=getTriPlanar(u_material_specular_texture,v_world_position.xyz,_normal,material.specularScale);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_SPHEREMAP\nmaterial.specular*=getSphereMap(u_material_specular_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n}","Material"),e.addShaderBlock("setup","\nmaterial = u_material;\n","Material")}},{key:"setupProgram",value:function(t){var e=this;sa.forEach((function(n){e[n]&&(e[n].texture?(t.setTextureUniform("u_material_".concat(n,"_texture"),e[n].texture),t.uniform("3fv","u_material.".concat(n,"Scale"),e[n].scale),t.uniform("4fv","u_material.".concat(n),e[n].amount)):e[n].amount&&t.uniform("4fv","u_material.".concat(n),e[n].amount))})),this.specular&&t.uniform("1f","u_material.shininess",this.specular.shininess),this.normal&&this.normal.texture&&(t.setTextureUniform("u_material_normal_texture",this.normal.texture),t.uniform("3fv","u_material.normalScale",this.normal.scale),t.uniform("1f","u_material.normalAmount",this.normal.amount))}}],[{key:"isValid",value:function(t){return null!=t&&(null!=t.emission||null!=t.ambient||null!=t.diffuse||null!=t.specular)}}]),t}();la.block="material";var ua=ia={};ia.copy=function(t){for(var e=[],n=t.length,r=0;r<n;r++)e[r]=t[r];return e},ia.neg=function(t){for(var e=[],n=t.length,r=0;r<n;r++)e[r]=-t[r];return e},ia.add=function(t,e){for(var n=[],r=Math.min(t.length,e.length),i=0;i<r;i++)n[i]=t[i]+e[i];return n},ia.sub=function(t,e){for(var n=[],r=Math.min(t.length,e.length),i=0;i<r;i++)n[i]=t[i]-e[i];return n},ia.signed_area=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])},ia.mult=function(t,e){var n,r=[],i=t.length;if("number"==typeof e)for(n=0;n<i;n++)r[n]=t[n]*e;else for(i=Math.min(t.length,e.length),n=0;n<i;n++)r[n]=t[n]*e[n];return r},ia.multMatrix=function(t,e){return[t[0][0]*e[0]+t[0][1]*e[1],t[1][0]*e[0]+t[1][1]*e[1]]},ia.div=function(t,e){var n=[];if("number"==typeof e)for(i=0;i<t.length;i++)n[i]=t[i]/e;else for(var r=Math.min(t.length,e.length),i=0;i<r;i++)n[i]=t[i]/e[i];return n},ia.perp=function(t,e){return[e[1]-t[1],t[0]-e[0]]},ia.rot=function(t,e){var n=Math.cos(e),r=Math.sin(e);return[t[0]*n-t[1]*r,t[0]*r+t[1]*n]},ia.angle=function(t){var e=Cr(t,2),n=e[0],r=e[1];return Math.atan2(r,n)},ia.angleBetween=function(t,e){var n=ia.dot(ia.normalize(ia.copy(t)),ia.normalize(ia.copy(e)));return 1<n&&(n=1),Math.acos(n)},ia.signedAngleBetween=function(t,e){return Math.atan2(t[0]*e[1]-t[1]*e[0],t[0]*e[0]+t[1]*e[1])},ia.isEqual=function(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0},ia.lengthSq=function(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:3<=t.length?t[0]*t[0]+t[1]*t[1]+t[2]*t[2]:0},ia.length=function(t){return Math.sqrt(ia.lengthSq(t))},ia.normalize=function(t){var e;if(2===t.length){if(1===(e=t[0]*t[0]+t[1]*t[1]))return t;0!==(e=Math.sqrt(e))?(t[0]/=e,t[1]/=e):(t[0]=0,t[1]=0)}else if(3<=t.length){if(1===(e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2]))return t;0!==(e=Math.sqrt(e))?(t[0]/=e,t[1]/=e,t[2]/=e):(t[0]=0,t[1]=0,t[2]=0)}return t},ia.cross=function(t,e){return 2===t.length?t[0]*e[1]-t[1]*e[0]:3===t.length?[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]:void 0},ia.dot=function(t,e){for(var n=0,r=Math.min(t.length,e.length),i=0;i<r;i++)n+=t[i]*e[i];return n};var ca=function(){function t(e,n){mr(this,t),this.name=n.name,this.view=e,null==n.ambient||"number"==typeof n.ambient?this.ambient=Xo.expandVec3(n.ambient||0):this.ambient=go.parseColor(n.ambient).slice(0,3),null==n.diffuse||"number"==typeof n.diffuse?this.diffuse=Xo.expandVec3(null!=n.diffuse?n.diffuse:1):this.diffuse=go.parseColor(n.diffuse).slice(0,3),null==n.specular||"number"==typeof n.specular?this.specular=Xo.expandVec3(n.specular||0):this.specular=go.parseColor(n.specular).slice(0,3)}return _r(t,[{key:"inject",value:function(){var e="\n            uniform ".concat(this.struct_name," u_").concat(this.name,";\n            ").concat(this.struct_name," ").concat(this.name,";\n            "),n="\n            ".concat(this.name," = u_").concat(this.name,";\n\n        ");ra.addBlock(t.block,e),ra.addBlock("setup",n)}},{key:"update",value:function(){}},{key:"setupProgram",value:function(t){t.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient),t.uniform("3fv","u_".concat(this.name,".diffuse"),this.diffuse),t.uniform("3fv","u_".concat(this.name,".specular"),this.specular)}}],[{key:"create",value:function(e,n){if(t.types[n.type])return new t.types[n.type](e,n)}},{key:"setMode",value:function(e,n){!0===e&&(e="fragment"),e=t.enabled&&(null!=e?e:"fragment"),n.defines.TANGRAM_LIGHTING_FRAGMENT="fragment"===e,n.defines.TANGRAM_LIGHTING_VERTEX="vertex"===e}},{key:"inject",value:function(e){if(ra.removeBlock(t.block),t.enabled){var n="";if(e&&0<Object.keys(e).length){var r={};for(var i in e)r[e[i].type]=!0;for(var o in r)t.types[o].inject();for(var a in e)e[a].inject(),n+="calculateLight(".concat(a,", _eyeToPoint, _normal);\n")}var s="\n            vec4 calculateLighting(in vec3 _eyeToPoint, in vec3 _normal, in vec4 _color) {\n\n                // Do initial material calculations over normal, emission, ambient, diffuse and specular values\n                calculateMaterial(_eyeToPoint,_normal);\n\n                // Un roll the loop of individual ligths to calculate\n                ".concat(n,"\n\n                //  Final light intensity calculation\n                vec4 color = vec4(vec3(0.), _color.a); // start with vertex color alpha\n\n                #ifdef TANGRAM_MATERIAL_EMISSION\n                    color.rgb = material.emission.rgb;\n                    color.a *= material.emission.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_AMBIENT\n                    color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.ambient.rgb;\n                    color.a *= material.ambient.a;\n                #else\n                    #ifdef TANGRAM_MATERIAL_DIFFUSE\n                        color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.diffuse.rgb;\n                    #endif\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_DIFFUSE\n                    color.rgb += light_accumulator_diffuse.rgb * _color.rgb * material.diffuse.rgb;\n                    color.a *= material.diffuse.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_SPECULAR\n                    color.rgb += light_accumulator_specular.rgb * material.specular.rgb;\n                    color.a *= material.specular.a;\n                #endif\n\n                // Clamp final color\n                color = clamp(color, 0.0, 1.0);\n\n                return color;\n            }");ra.addBlock(t.block,s)}}}]),t}();ca.types={},ca.block="lighting",ca.enabled=!0;var ha=function(){xr(e,ca);var t=Ir(e);function e(n,r){var i;return mr(this,e),(i=t.call(this,n,r)).type="ambient",i.struct_name="AmbientLight",i}return _r(e,[{key:"setupProgram",value:function(t){t.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient)}}],[{key:"inject",value:function(){ra.addBlock(ca.block,"/*Expected globals:light_accumulator_**/struct AmbientLight{vec3 ambient;};void calculateLight(in AmbientLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;}")}}]),e}();ca.types.ambient=ha;var pa=function(){xr(e,ca);var t=Ir(e);function e(n,r){var i,o;return mr(this,e),(i=t.call(this,n,r)).type="directional",i.struct_name="DirectionalLight",r.direction?i._direction=r.direction:(o=Math.sin(60*Math.PI/180),i._direction=[Math.cos(135*Math.PI/180)*o,Math.sin(135*Math.PI/180)*o,-.5]),null==r.ambient&&(i.ambient=Xo.expandVec3(.5)),i.direction=i._direction.map(parseFloat),i._initial_direction=[i.direction[0],i.direction[1],i.direction[2]],i}return _r(e,[{key:"update",value:function(){No(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"setupProgram",value:function(t){Or(kr(e.prototype),"setupProgram",this).call(this,t),t.uniform("3fv","u_".concat(this.name,".direction"),this.direction)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=ua.normalize(ua.copy(t))}}],[{key:"inject",value:function(){ra.addBlock(ca.block,"/*Expected globals:materiallight_accumulator_**/struct DirectionalLight{vec3 ambient;vec3 diffuse;vec3 specular;vec3 direction;};void calculateLight(in DirectionalLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;float nDotVP=clamp(dot(_normal,-_light.direction),0.0,1.0);\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(_light.direction,_normal);float eyeDotR=max(dot(normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf;\n#endif\n}")}}]),e}();ca.types.directional=pa;var fa=function(){xr(e,ca);var t=Ir(e);function e(n,r){var i;return mr(this,e),(i=t.call(this,n,r)).type="point",i.struct_name="PointLight",i.position=r.position||[0,0,"100px"],i.position_eye=[],i.origin=r.origin||"ground",i.attenuation=isNaN(parseFloat(r.attenuation))?0:parseFloat(r.attenuation),r.radius?Array.isArray(r.radius)&&2===r.radius.length?i.radius=r.radius:i.radius=[null,r.radius]:i.radius=null,i}return _r(e,[{key:"inject",value:function(){Or(kr(e.prototype),"inject",this).call(this),ra.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT=0!==this.attenuation,ra.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS=null!=this.radius&&null!=this.radius[0],ra.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS=null!=this.radius}},{key:"update",value:function(){var t,e,n,r=this.view.lookAtManipulator.getLookAtData().zoom;"world"===this.origin?(e=(t=Cr(Qr.latLngToMeters(this.position),2))[0],n=t[1],this.position_eye[0]=e-this.view.lookAtManipulator.getLookAtData().position[0],this.position_eye[1]=n-this.view.lookAtManipulator.getLookAtData().position[1],this.position_eye[2]=go.convertUnits(this.position[2],{zoom:r,meters_per_pixel:Qr.metersPerPixel(r)}),this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance):"ground"!==this.origin&&"camera"!==this.origin||(this.position_eye=go.convertUnits(this.position,{zoom:r,meters_per_pixel:Qr.metersPerPixel(r)}),"ground"===this.origin&&(this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance)),this.position_eye[3]=1}},{key:"setupProgram",value:function(t){Or(kr(e.prototype),"setupProgram",this).call(this,t),t.uniform("4fv","u_".concat(this.name,".position"),this.position_eye),ra.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT&&t.uniform("1f","u_".concat(this.name,".attenuationExponent"),this.attenuation);var n=this.view.lookAtManipulator.getLookAtData().zoom;ra.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS&&t.uniform("1f","u_".concat(this.name,".innerRadius"),go.convertUnits(this.radius[0],{zoom:n,meters_per_pixel:Qr.metersPerPixel(n)})),ra.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS&&t.uniform("1f","u_".concat(this.name,".outerRadius"),go.convertUnits(this.radius[1],{zoom:n,meters_per_pixel:Qr.metersPerPixel(n)}))}}],[{key:"inject",value:function(){ra.addBlock(ca.block,"/*Expected globals:materiallight_accumulator_**/struct PointLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\n};void calculateLight(in PointLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(VP,_normal),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nlight_accumulator_ambient.rgb+=_light.ambient*attenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(0.0,dot(-normalize(_eyeToPoint),reflectVector));pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation;\n#endif\n}")}}]),e}();ca.types.point=fa;var da=function(){xr(e,fa);var t=Ir(e);function e(n,r){var i;return mr(this,e),(i=t.call(this,n,r)).type="spotlight",i.struct_name="SpotLight",i.direction=i._direction=(r.direction||[0,0,-1]).map(parseFloat),i._initial_direction=[i.direction[0],i.direction[1],i.direction[2]],i.exponent=r.exponent?parseFloat(r.exponent):.2,i.angle=r.angle?parseFloat(r.angle):20,i}return _r(e,[{key:"setupProgram",value:function(t){Or(kr(e.prototype),"setupProgram",this).call(this,t),t.uniform("3fv","u_".concat(this.name,".direction"),this.direction),t.uniform("1f","u_".concat(this.name,".spotCosCutoff"),Math.cos(3.14159*this.angle/180)),t.uniform("1f","u_".concat(this.name,".spotExponent"),this.exponent)}},{key:"update",value:function(){Or(kr(e.prototype),"update",this).call(this),No(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=ua.normalize(ua.copy(t))}}],[{key:"inject",value:function(){ra.addBlock(ca.block,"/*Expected globals:materiallight_accumulator_**/struct SpotLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\nvec3 direction;float spotCosCutoff;float spotExponent;};void calculateLight(in SpotLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(_normal,VP),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nfloat spotAttenuation=0.0;float spotDot=clamp(dot(-VP,_light.direction),0.0,1.0);if(spotDot>=_light.spotCosCutoff){spotAttenuation=pow(spotDot,_light.spotExponent);}light_accumulator_ambient.rgb+=_light.ambient*attenuation*spotAttenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation*spotAttenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(dot(-normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation*spotAttenuation;\n#endif\n}")}}]),e}();function ya(t){for(var e=0;e<(arguments.length<=1?0:arguments.length-1);e++){var n=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];if(n)for(var r in n){var i=n[r];null===i||"object"!==vr(i)||Array.isArray(i)?void 0!==i&&(t[r]=i):null===t[r]||"object"!==vr(t[r])||Array.isArray(t[r])?t[r]=ya({},i):t[r]=ya(t[r],i)}}return t}ca.types.spotlight=da;var ga="#ifdef TANGRAM_FRAGMENT_SHADER\nuniform sampler2D u_raster;uniform vec3 u_raster_offset;\n#define sampleRaster() (texture2D(u_raster, v_modelpos_base_zoom.xy * u_raster_offset.z + u_raster_offset.xy))\n#endif\n",va={init:function(t){var e=0<arguments.length&&void 0!==t?t:{},n=e.generation,r=e.styles,i=e.sources,o=void 0===i?{}:i,a=e.introspection,s=e.id,l=void 0!==s?s+"/":"";this.scene_id=s,this.textureManager=Lo(s),this.main_thread_target="".concat(l,"Style/").concat(this.name),this.setGeneration(n),this.styles=r,this.sources=o,this.defines=this.hasOwnProperty("defines")&&this.defines||{},this.shaders=this.hasOwnProperty("shaders")&&this.shaders||{},this.introspection=a||!1,this.selection=this.selection||this.introspection||!1,this.compile_setup=!1,this.program=null,this.selection_program=null,this.feature_style={},this.vertex_template=[],this.tile_data={},this.defines.TANGRAM_WORLD_POSITION_WRAP=1e5,this.blend=this.blend||"opaque",this.defines["TANGRAM_BLEND_".concat(this.blend.toUpperCase())]=!0,null==this.blend_order&&(this.blend_order=-1),this.removeShaderBlock("setup"),this.material instanceof la||(la.isValid(this.material)||(this.material=go.defaults.material),this.material=new la(this.material)),this.material.inject(this),ca.setMode(this.lighting,this),this.setupRasters(),this.initialized=!0},destroy:function(){this.program&&(this.program.destroy(),this.program=null),this.selection_program&&(this.selection_program.destroy(),this.selection_program=null),ui.removeTarget(this.main_thread_target),this.gl=null,this.initialized=!1},reset:function(){},baseStyle:function(){return this.base||this.name},setGeneration:function(t){this.generation=t,li.is_main&&ui.addTarget(this.main_thread_target,this)},fillVertexTemplate:function(t,e,n,r){var i=r.size,o=void 0===(o=r.offset)?0:o,a=t.index[e];if(void 0!==a)for(var s=0;s<i;++s){var l=n.length>s?n[s]:n;this.vertex_template[a+s+o]=l}else ki("warn","Style: in style '".concat(this.name,"', no index found in vertex layout for attribute '").concat(e,"'"))},startData:function(t){this.tile_data[t.id]=this.tile_data[t.id]||{meshes:{},uniforms:{},textures:[]}},endData:function(t){var e=this.tile_data[t.id];if(this.tile_data[t.id]=null,e&&0<Object.keys(e.meshes).length){for(var n in e.meshes){var r=e.meshes[n];0!==r.vertex_data.vertex_count?(r.vertex_data.end(),r.vertex_elements=r.vertex_data.element_buffer,r.vertex_data=r.vertex_data.vertex_buffer):delete e.meshes[n]}return t.mesh_data[this.name]=e,this.buildRasterTextures(t,e).then((function(t){return t}))}return Promise.resolve(null)},hasDataForTile:function(t){return null!=this.tile_data[t.id]},getTileMesh:function(t,e){var n=this.tile_data[t.id].meshes;return null==n[e.key]&&(n[e.key]={variant:e,vertex_data:this.vertexLayoutForMeshVariant(e).createVertexData()}),n[e.key]},vertexLayoutForMeshVariant:function(){return this.vertex_layout},default_mesh_variant:{key:0},style_mesh_variants:{default:{variants:{0:{variant:{key:0},times_unref:0}}}},addMeshVariantForDraw:function(t,e){this.style_mesh_variants[t]||(this.style_mesh_variants[t]={variants:{}});var n=this.computeVariantForDraw(e);return this.style_mesh_variants[t].variants[n.key]={variant:n,times_unref:0},this.style_mesh_variants[t].variants[n.key].variant},getMeshVariantTypeForDraw:function(t){return this.getMeshVariantType(this.base,t)},getMeshVariantType:function(t,e){void 0===t&&(t="default");var n=this.style_mesh_variants[t];if(void 0===e.variantKey||!n||!n.variants[e.variantKey])return this.addMeshVariantForDraw(t,e);var r=e.variantKey,i=n.variants[r];return i.times_unref=0,i.variant},updateMeshVariantTypeCache:function(t){for(var e in this.style_mesh_variants){var n=this.style_mesh_variants[e].variants;for(var r in n){var i=n[r];i.times_unref++,i.times_unref>t&&("default"!==e||0!=+r)&&(delete n[r],0===Object.keys(n).length&&delete this.style_mesh_variants[e])}}},computeVariantForDraw:function(){return this.default_mesh_variant},addFeature:function(t,e,n){var r=n.tile;this.tile_data[r.id]||this.startData(r);var i,o,a,s,l=this.parseFeature(t,e,n);l&&(i="lines"===this.base?this.getMeshVariantTypeForDraw(e):this.getMeshVariantTypeForDraw(l),a=(o=this.getTileMesh(r,i)).vertex_data.offset,s=o.vertex_data.vertex_count,0<this.buildGeometry(t.geometry,l,o,n)?t.generation=this.generation:o.vertex_data.vertex_count>s&&(o.vertex_data.vertex_buffer.fill(0,a,o.vertex_data.offset),o.vertex_data.vertex_count=s,o.vertex_data.offset=a))},buildGeometry:function(t,e,n,r){var i;return"Polygon"===t.type?i=this.buildPolygons([t.coordinates],e,n,r):"MultiPolygon"===t.type?i=this.buildPolygons(t.coordinates,e,n,r):"LineString"===t.type?i=this.buildLines([t.coordinates],e,n,r):"MultiLineString"===t.type?i=this.buildLines(t.coordinates,e,n,r):"Point"===t.type?i=this.buildPoints([t.coordinates],e,n,r):"MultiPoint"===t.type&&(i=this.buildPoints(t.coordinates,e,n,r)),i},parseFeature:function(t,e,n){try{var r,i,o,a=this.feature_style;if(a.order=this.parseOrder(e.order,n),null==a.order&&"overlay"!==this.blend){var s="Layer '".concat(e.layers.join(", "),"', draw group '").concat(e.group,"': ");return s+="'order' parameter is required unless blend mode is 'overlay'",null!=e.order&&(s+="; 'order' was set to a dynamic value (e.g. string tied to feature property, ",s+="or JS function), but evaluated to null for one or more features"),void ki({level:"warn",once:!0},s)}if(!(a=this._parseFeature(t,e,n)))return;return this.selection?a.interactive=go.evalProperty(this.introspection||e.interactive,n):a.interactive=!1,!0===a.interactive?(i=(r=Ko.makeEntry()).color,o=r.key,a.selection_color=i,n.tile.selection_data||(n.tile.selection_data={}),n.tile.selection_data[o]={id:t.id||o,properties:t.properties,source_name:n.source,source_layer:n.layer,layers:n.layers}):a.selection_color=Ko.defaultColor,a}catch(e){ki("error","Style.parseFeature: style parsing error",t,a,e.stack)}},_parseFeature:function(){return this.feature_style},preprocess:function(t,e){if(!t.preprocessed){if(this.draw)for(var n in this.draw){var r=this.draw[n];"object"!==vr(r)||Array.isArray(r)?null==t[n]&&(t[n]=r):t[n]=ya({},r,t[n])}var i=e||"";if(!(t=this._preprocess(t,i)))return;t.preprocessed=!0}return t},_preprocess:function(t){return t},parseOrder:function(t,e){return"number"!=typeof t?go.calculateOrder(t,e):t},scaleOrder:function(t){return 2*t},parseColor:function(t,e){return t?go.evalCachedColorProperty(t,e):this.shaders.blocks.color||this.shaders.blocks.filter?go.defaults.color:void 0},buildPolygons:function(){return 0},buildLines:function(){return 0},buildPoints:function(){return 0},setGL:function(t){this.gl=t,this.max_texture_size=this.textureManager.getMaxTextureSize(this.gl)},makeMesh:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:{},i=this.vertexLayoutForMeshVariant(r.variant);return new aa(this.gl,t,e,i,this.scene_id,r)},render:function(t){return t.render()},getProgram:function(t){var e=0<arguments.length&&void 0!==t?t:"program";this.compileSetup();var n=this[e];if(n&&!n.error){if(!n.compiled)try{n.compile()}catch(t){ki("error","Style: error compiling program for style '".concat(this.name,"' (program key '").concat(e,"')"),this,t.stack)}return n}},compileSetup:function(){if(!this.compile_setup){if(!this.gl)throw new Error("style.compile(): skipping for ".concat(this.name," because no GL context"));var t,e=this.buildDefineList();this.selection&&((t=Object.assign({},e)).TANGRAM_FEATURE_SELECTION=!0);var n=this.shaders&&this.shaders.blocks,r=this.shaders&&this.shaders.block_scopes,i=Object.assign({},this.shaders&&this.shaders.uniforms);for(var o in i)null==i[o]&&ki({level:"warn",once:!0},"Style '".concat(this.name,"' has invalid uniform '").concat(o,"': uniform values must be non-null"));var a=this.shaders&&this.shaders.extensions;"string"==typeof a&&(a=[a]),this.program=new ra(this.gl,this.vertex_shader_src,this.fragment_shader_src,this.scene_id,{name:this.name,defines:e,uniforms:i,blocks:n,block_scopes:r,extensions:a}),this.selection?this.selection_program=new ra(this.gl,this.vertex_shader_src,this.crop_by_tile?"\n#pragma tangram: utils\n#ifdef TANGRAM_FEATURE_SELECTION\nuniform float u_meters_per_pixel;varying vec4 v_selection_color;varying vec4 v_local_space_position;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}else{gl_FragColor=v_selection_color;}\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}":"\n#ifdef TANGRAM_FEATURE_SELECTION\nvarying vec4 v_selection_color;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\ngl_FragColor=v_selection_color;\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}",this.scene_id,{name:this.name+" (selection)",defines:t,uniforms:i,blocks:n,block_scopes:r,extensions:a}):this.selection_program=null,this.compile_setup=!0}},addShaderBlock:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:null;this.shaders.blocks=this.shaders.blocks||{},this.shaders.blocks[t]=this.shaders.blocks[t]||[],this.shaders.blocks[t].push(e),this.shaders.block_scopes=this.shaders.block_scopes||{},this.shaders.block_scopes[t]=this.shaders.block_scopes[t]||[],this.shaders.block_scopes[t].push(r)},removeShaderBlock:function(t){this.shaders.blocks&&(this.shaders.blocks[t]=null)},replaceShaderBlock:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:null;this.removeShaderBlock(t),this.addShaderBlock(t,e,r)},buildDefineList:function(){var t={};if(null!=this.defines)for(var e in this.defines)t[e]=this.defines[e];if(null!=this.shaders&&null!=this.shaders.defines)for(e in this.shaders.defines)t[e]=this.shaders.defines[e];return t},hasRasters:function(){return-1<["color","normal","custom"].indexOf(this.raster)},setupRasters:function(){if(!li.is_main)return!1;if(!this.hasRasters())return!1;"color"===this.raster?this.defines.TANGRAM_RASTER_TEXTURE_COLOR=!0:"normal"===this.raster&&(this.defines.TANGRAM_RASTER_TEXTURE_NORMAL=!0);var t=!1;for(var e in this.sources)if(this.sources[e]instanceof xa){t=!0;break}return!!t&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",ga,"Raster"),!0)},buildRasterTextures:function(t,e){var n=this;if(!this.hasRasters())return Promise.resolve(e);var r={};return t.rasters.map((function(t){return n.sources[t]})).filter((function(t){return t})).forEach((function(e,n){var i;e instanceof xa&&(i=e.tileTexture(t),r[i.url]=i)})),0===Object.keys(r).length?Promise.resolve(e):ui.postMessage(this.main_thread_target+".loadTextures",r).then((function(n){if(!n||n.length<1)return ki("trace","Missing texture info for tile ".concat(t.key)),null;if(n.some((function(t){return!t.loaded})))return null;e.uniforms=e.uniforms||{},e.textures=e.textures||[];var i,o,a=n[0].name,s=r[a].coords;return e.uniforms.u_raster=a,e.textures.push(a),t.coords.z>s.z?(i=t.coords.z-s.z,o=Math.pow(2,i),e.uniforms.u_raster_offset=[(t.coords.x%o+o)%o/o,(o-1-t.coords.y%o)/o,1/o]):e.uniforms.u_raster_offset=[0,0,1],e}))},loadTextures:function(t){var e=this;return this.textureManager.createFromObject(this.gl,t).then((function(){return Promise.all(Object.keys(t).map((function(t){return e.textureManager.textures[t]&&e.textureManager.textures[t].load()})).filter((function(t){return t})))})).then((function(t){return t.forEach((function(t){return t.retain()})),t.map((function(t){return{name:t.name,width:t.width,height:t.height,loaded:t.loaded}}))}))},setup:function(){this.setUniforms(),this.material.setupProgram(ra.current)},setUniforms:function(){var t=ra.current;t&&t.setUniforms(this.shaders&&this.shaders.uniforms,!0)},render_states:{opaque:{depth_test:!0,depth_write:!0},translucent:{depth_test:!0,depth_write:!0},add:{depth_test:!0,depth_write:!1},multiply:{depth_test:!0,depth_write:!1},inlay:{depth_test:!0,depth_write:!1},overlay:{depth_test:!1,depth_write:!1}},default_blend_orders:{opaque:0,add:1,multiply:2,inlay:3,translucent:4,overlay:5},sortByBlendOrderWithinLayers:function(t){var e=[],n={};for(var r in t.forEach((function(t){var e=parseInt(t.name,10)||0;n[e]||(n[e]=[]),n[e].push(t)})),n)e.push.apply(e,Lr(n[r].sort(va.blendOrderSort)));return e},blendOrderSort:function(t,e){return"opaque"===t.blend||"opaque"===e.blend?"opaque"===t.blend&&"opaque"===e.blend?t.name<e.name?-1:1:"opaque"===t.blend?-1:1:t.blend_order<e.blend_order||!(t.blend_order>e.blend_order)&&(va.default_blend_orders[t.blend]<va.default_blend_orders[e.blend]||!(va.default_blend_orders[t.blend]>va.default_blend_orders[e.blend])&&t.name<e.name)?-1:1}},ma=0,ba=0,_a=function(){function t(e){var n=e.coords,r=e.style_zoom,i=e.source,o=e.worker,a=e.view,s=e.sceneId;mr(this,t),this.textureManager=Lo(s),this.id=ma++,this.worker=o,this.view=a,this.source=i,this.generation=null,this.valid=!0,this.proxy_for=null,this.proxy_depth=0,this.proxied_as=null,this.fade_in=!0,this.loading=!1,this.loaded=!1,this.built=!1,this.labeled=!1,this.error=null,this.style_zoom=r,this.coords=t.normalizedCoordinate(n,this.source,this.style_zoom),this.key=t.key(this.coords,this.source,this.style_zoom),this.overzoom=Math.max(this.style_zoom-this.coords.z,0),this.overzoom2=Math.pow(2,this.overzoom),this.min=Qr.metersForTile(this.coords),this.max=Qr.metersForTile({x:this.coords.x+1,y:this.coords.y+1,z:this.coords.z}),this.span={x:this.max.x-this.min.x,y:this.max.y-this.min.y},this.bounds={sw:{x:this.min.x,y:this.max.y},ne:{x:this.max.x,y:this.min.y}},this.center_dist=0,this.meters_per_pixel=Qr.metersPerPixel(this.style_zoom),this.meters_per_pixel_sq=this.meters_per_pixel*this.meters_per_pixel,this.units_per_pixel=Qr.units_per_pixel/this.overzoom2,this.units_per_meter_overzoom=Qr.unitsPerMeter(this.coords.z)*this.overzoom2,this.meshes={},this.new_mesh_styles=[]}return _r(t,[{key:"freeResources",value:function(){for(var t in this.meshes)this.meshes[t].forEach((function(t){return t.destroy()}));this.meshes={}}},{key:"destroy",value:function(){Ao.removeForTile(this.id),this.workerMessage("self.removeTile",this.id),this.freeResources(),this.worker=null,this.valid=!1}},{key:"buildAsMessage",value:function(){return{id:this.id,key:this.key,source:this.source.name,coords:this.coords,min:this.min,max:this.max,units_per_pixel:this.units_per_pixel,meters_per_pixel:this.meters_per_pixel,meters_per_pixel_sq:this.meters_per_pixel_sq,units_per_meter_overzoom:this.units_per_meter_overzoom,style_zoom:this.style_zoom,overzoom:this.overzoom,overzoom2:this.overzoom2,generation:this.generation}}},{key:"workerMessage",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ui.postMessage.apply(ui,[this.worker].concat(e))}},{key:"build",value:function(t,e){var n=(1<arguments.length&&void 0!==e?e:{}).fade_in,r=void 0===n||n;return this.generation=t,this.fade_in=r,this.loaded||(this.loading=!0,this.built=!1,this.labeled=!1),this.workerMessage("self.buildTile",{tile:this.buildAsMessage()})}},{key:"buildMeshes",value:function(t,e){if(!this.error){this.build_id=ba++;var n={},r=this.mesh_data;if(r)for(var i in r){for(var o in r[i].meshes){var a=r[i].meshes[o];if(a.vertex_data){if(!t[i]){ki("warn","Could not create mesh because style '".concat(i,"' not found, for tile ").concat(this.key,", aborting tile"));break}var s=Object.assign({},r[i]);s.uniforms=Object.assign({},s.uniforms,a.uniforms),s.variant=a.variant,a.textures&&(s.textures=a.textures),a.labels&&(s.retain=!0);var l=t[i].makeMesh(a.vertex_data,a.vertex_elements,s);l.variant=s.variant,l.labels=a.labels,n[i]=n[i]||[],n[i].push(l),null==l.variant.order&&(l.variant.order=n[i].length-1)}}n[i]&&n[i].sort((function(t,e){var n=t.variant.order,r=e.variant.order;return null!=n&&(null==r||n<r)?-1:1}))}for(var u in delete this.mesh_data,n)this.meshes[u]&&this.meshes[u].forEach((function(t){return t.destroy()})),this.meshes[u]=n[u],this.new_mesh_styles.push(u);if(e.done){for(var c in this.meshes)-1===this.new_mesh_styles.indexOf(c)&&(this.meshes[c].forEach((function(t){return t.destroy()})),delete this.meshes[c]);this.new_mesh_styles=[]}}}},{key:"setProxyFor",value:function(t){t?(this.proxy_for=this.proxy_for||[],this.proxy_for.push(t),this.proxy_depth=1,t.proxied_as=t.style_zoom>this.style_zoom?"child":"parent"):(this.proxy_for=null,this.proxy_depth=0)}},{key:"isProxy",value:function(){return null!=this.proxy_for}},{key:"shouldProxyForStyle",value:function(t){return!this.proxy_for||this.proxy_for.some((function(e){return null==e.meshes[t]}))}},{key:"setupProgram",value:function(t,e){var n=t.model,r=t.model32;e.uniform("4fv","u_tile_origin",[this.min.x,this.min.y,this.style_zoom,this.coords.z]),e.uniform("1f","u_tile_proxy_depth",this.proxy_depth),Uo(n),Fo(n,n,Ro(this.min.x,this.min.y,0)),Bo(n,n,Ro(this.span.x/Qr.tile_scale,-1*this.span.y/Qr.tile_scale,1)),qo(r,n),e.uniform("Matrix4fv","u_model",r),e.uniform("1i","u_tile_fade_in",this.fade_in&&"child"!==this.proxied_as)}},{key:"merge",value:function(t){return this.loading=t.loading,this.loaded=t.loaded,this.generation=t.generation,this.error=t.error,this.mesh_data=t.mesh_data,this.selection_data?Object.assign(this.selection_data,t.selection_data):this.selection_data=t.selection_data,this}}],[{key:"coord",value:function(e){return{x:e.x,y:e.y,z:e.z,key:t.coordKey(e)}}},{key:"coordKey",value:function(t){return t.x+"/"+t.y+"/"+t.z}},{key:"key",value:function(t,e,n){if(!(t.y<0||t.y>=1<<t.z||t.z<0))return[e.name,n,t.x,t.y,t.z].join("/")}},{key:"normalizedKey",value:function(e,n,r){return t.key(t.normalizedCoordinate(e,n,r),n,r)}},{key:"normalizedCoordinate",value:function(e,n){return n.zoom_bias&&(e=t.coordinateAtZoom(e,Math.max(0,e.z-n.zoom_bias))),t.coordinateWithMaxZoom(e,n.max_zoom)}},{key:"coordinateAtZoom",value:function(e,n){var r,i=e.x,o=e.y,a=e.z;return a!==n&&(r=Math.pow(2,a-n),i=Math.floor(i/r),o=Math.floor(o/r),a=n),t.coord({x:i,y:o,z:a})}},{key:"coordinateWithMaxZoom",value:function(e,n){var r=e.x,i=e.y,o=e.z;return void 0!==n&&n<o?t.coordinateAtZoom({x:r,y:i,z:o},n):t.coord({x:r,y:i,z:o})}},{key:"childrenForCoordinate",value:function(e){var n=e.x,r=e.y,i=e.z,o=e.key;return t.coord_children[o]||(i++,n*=2,r*=2,t.coord_children[o]=[t.coord({x:n,y:r,z:i}),t.coord({x:n+1,y:r,z:i}),t.coord({x:n,y:r+1,z:i}),t.coord({x:n+1,y:r+1,z:i})]),t.coord_children[o]}},{key:"isDescendant",value:function(e,n){if(n.z>e.z){var r=t.coordinateAtZoom(n,e.z),i=r.x,o=r.y;return e.x===i&&e.y===o}return!1}},{key:"cancel",value:function(e){e&&(e.canceled=!0,e.source_data&&e.source_data.request_id&&(Ti.cancelRequest(e.source_data.request_id),e.source_data.request_id=null),t.abortBuild(e))}},{key:"buildGeometry",value:function(e,n){var r=n.scene_id,i=n.layers,o=n.styles,a=n.global,s=n.sources,l=n.meshVariantMaxLife,u=e.source_data;for(var c in To.startTile(e.id,{apply_repeat_groups:!0}),i){var h=i[c];if(h&&h.config_data){if(h.config_data.source===e.source)for(var p=t._getDataForSource(u,h.config_data,c),f=0;f<p.length;f++){var d=p[f],y=d.geom;if(y)for(var g=0;g<y.features.length;g++){var v=y.features[g];if(null!=v.geometry){var m=go.getFeatureParseContext(v,e,a,s);m.winding=e.default_winding,m.source=e.source,m.layer=d.layer;var b=h.buildDrawGroups(m,!0);if(b)for(var _ in b){var w=b[_],x=w.style||_,k=o[x];k?null!=(w=k.preprocess(w,e.source))&&!1!==w.visible&&(m.layers=w.layers,k.addFeature(v,w,m)):ki("warn","Style '".concat(x,"' not found, skipping layer '").concat(c,"':"),w,v)}}}}}else ki("warn","Layer ".concat(c," was defined without a geometry data source and will not be rendered."))}var E=t._stylesForTile(e,o);t._sendStyleGroups(e,E,{scene_id:r,meshVariantMaxLife:l},(function(t){return t.collision?"collision":"non-collision"}))}},{key:"_stylesForTile",value:function(t,e){var n=[];for(var r in e)e[r].hasDataForTile(t)&&n.push(e[r]);return n}},{key:"_sendStyleGroups",value:function(e,n,r,i){var o=r.scene_id,a=r.meshVariantMaxLife,s={};n.forEach((function(t){var e=i(t);s[e]=s[e]||[],s[e].push(t)})),0<Object.keys(s).length?function(){var n={start:!0};for(var r in e.mesh_data={},s)!function(r){var i=s[r];Promise.all(i.map((function(t){return t.endData(e)}))).then((function(){ki("trace","Finished style group '".concat(r,"' for tile ").concat(e.key)),s[r]=[],Object.keys(s).every((function(t){return 0===s[t].length}))&&(n.done=!0),ui.postMessage("TileManager_".concat(o,".buildTileStylesCompleted"),ui.withTransferables({tile:t.slice(e,["mesh_data","selection_data"]),progress:n})),n.start=null,e.mesh_data={},e.selection_data={},n.done&&To.resetTile(e.id)}),(function(t){ki("error","Error for style group '".concat(r,"' for tile ").concat(e.key),t)}))}(r);va.updateMeshVariantTypeCache(a)}():(ui.postMessage("TileManager_".concat(o,".buildTileStylesCompleted"),ui.withTransferables({tile:t.slice(e),progress:{start:!0,done:!0}})),To.resetTile(e.id))}},{key:"_getDataForSource",value:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:null,i=[];return null!=e&&null!=t&&null!=t.layers&&(!e.layer&&t.layers._default||"string"==typeof e.layer&&!t.layers[e.layer]&&new RegExp("^\\d+_"+e.layer+"$").test(r)&&t.layers._default?i.push({geom:t.layers._default}):!e.layer&&r?i.push({layer:r,geom:t.layers[r]}):"string"==typeof e.layer?i.push({layer:e.layer,geom:t.layers[e.layer]}):Array.isArray(e.layer)&&e.layer.forEach((function(e){t.layers[e]&&t.layers[e].features&&i.push({layer:e,geom:t.layers[e]})}))),i}},{key:"abortBuild",value:function(t,e){if(Ao.removeForTile(t.id),To.abortTile(t.id),t.mesh_data)for(var n in t.mesh_data){var r=t.mesh_data[n].textures;r&&r.forEach((function(n){var r=Lo(e).textures[n];r&&(ki("trace","releasing texture ".concat(n," for tile ").concat(t.key)),r.release())}))}}},{key:"slice",value:function(t,e){var n=["id","key","loading","loaded","generation","error","debug"];Array.isArray(e)&&n.push.apply(n,Lr(e));for(var r={},i=0;i<n.length;i++){var o=n[i];r[o]=t[o]}return r}}]),t}();_a.coord_children={};var wa,xa=function(){xr(e,ji);var t=Ir(e);function e(n,r){var i;return mr(this,e),-1===(i=t.call(this,n,r)).rasters.indexOf(i.name)&&i.rasters.unshift(i.name),i.filtering=n.filtering,i.textures={},i}return _r(e,[{key:"load",value:function(t){t.source_data={},t.source_data.layers={},t.pad_scale=this.pad_scale,t.rasters=Lr(this.rasters);var e=Qr.tile_scale;return t.source_data.layers={_default:{type:"FeatureCollection",features:[{geometry:{type:"Polygon",coordinates:[[[0,0],[e,0],[e,-e],[0,-e],[0,0]]]},properties:{}}]}},t.default_winding="CW",Promise.resolve(t)}},{key:"tileTexture",value:function(t){var e,n,r=t.coords.key;return this.textures[r]||(e=_a.coordinateWithMaxZoom(t.coords,this.max_zoom),n=this.formatUrl(this.url,{coords:e}),this.textures[r]={url:n,filtering:this.filtering,coords:e}),this.textures[r]}}]),e}();Pi.register(xa,"Raster");var ka=wa={};function Ea(t,e,n,r){for(var i,o=r,a=n-e>>1,s=n-e,l=t[e],u=t[e+1],c=t[n],h=t[n+1],p=e+3;p<n;p+=3){var f,d=function(t,e,n,r,i,o){var a,s=i-n,l=o-r;return 0===s&&0===l||(1<(a=((t-n)*s+(e-r)*l)/(s*s+l*l))?(n=i,r=o):0<a&&(n+=s*a,r+=l*a)),(s=t-n)*s+(l=e-r)*l}(t[p],t[p+1],l,u,c,h);o<d?(i=p,o=d):d!==o||(f=Math.abs(p-a))<s&&(i=p,s=f)}r<o&&(3<i-e&&Ea(t,e,i,r),t[i+2]=o,3<n-i&&Ea(t,i,n,r))}function Ta(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)Aa(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)Aa(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)Aa(t,e[r][i])}(i),i}function Aa(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function Sa(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)Ma(n,t.features[r],e,r);else"Feature"===t.type?Ma(n,t,e):Ma(n,{geometry:t},e);return n}function Ma(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)Ia(i,s);else if("MultiPoint"===o)for(var u=0;u<i.length;u++)Ia(i[u],s);else if("LineString"===o)Oa(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(u=0;u<i.length;u++)s=[],Oa(i[u],s,a,!1),t.push(Ta(l,"LineString",s,e.properties));return}Ca(i,s,a,!1)}else if("Polygon"===o)Ca(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"!==o)throw new Error("Input data is not a valid GeoJSON object.");for(u=0;u<e.geometry.geometries.length;u++)Ma(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},n,r);return}for(u=0;u<i.length;u++){var c=[];Ca(i[u],c,a,!0),s.push(c)}}t.push(Ta(l,o,s,e.properties))}}function Ia(t,e){e.push(La(t[0])),e.push(Pa(t[1])),e.push(0)}function Oa(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var l=La(t[s][0]),u=Pa(t[s][1]);e.push(l),e.push(u),e.push(0),0<s&&(a+=r?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=e.length-3;e[2]=1,Ea(e,0,c,n),e[2+c]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function Ca(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];Oa(t[i],o,n,r),e.push(o)}}function La(t){return t/360+.5}function Pa(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:1<n?1:n}function Ra(t,e,n,r,i,o,a,s){if(r/=e,(n/=e)<=o&&a<r)return t;if(a<n||r<=o)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,p=c.type,f=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(n<=f&&d<r)l.push(c);else if(!(d<n||r<=f)){var y=[];if("Point"===p||"MultiPoint"===p)!function(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];n<=a&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}(h,y,n,r,i);else if("LineString"===p)Na(h,y,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===p)Da(h,y,n,r,i,!1);else if("Polygon"===p)Da(h,y,n,r,i,!0);else if("MultiPolygon"===p)for(var g=0;g<h.length;g++){var v=[];Da(h[g],v,n,r,i,!0),v.length&&y.push(v)}if(y.length){if(s.lineMetrics&&"LineString"===p){for(g=0;g<y.length;g++)l.push(Ta(c.id,p,y[g],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===y.length?(p="LineString",y=y[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===y.length?"Point":"MultiPoint"),l.push(Ta(c.id,p,y,c.tags))}}}return l.length?l:null}function Na(t,e,n,r,i,o,a){for(var s,l,u=ja(t),c=0===i?Fa:Ba,h=t.start,p=0;p<t.length-3;p+=3){var f=t[p],d=t[p+1],y=t[p+2],g=t[p+3],v=t[p+4],m=0===i?f:d,b=0===i?g:v,_=!1;a&&(s=Math.sqrt(Math.pow(f-g,2)+Math.pow(d-v,2))),m<n?n<b&&(l=c(u,f,d,g,v,n),a&&(u.start=h+s*l)):r<m?b<r&&(l=c(u,f,d,g,v,r),a&&(u.start=h+s*l)):za(u,f,d,y),b<n&&n<=m&&(l=c(u,f,d,g,v,n),_=!0),r<b&&m<=r&&(l=c(u,f,d,g,v,r),_=!0),!o&&_&&(a&&(u.end=h+s*l),e.push(u),u=ja(t)),a&&(h+=s)}var w=t.length-3;f=t[w],d=t[w+1],y=t[w+2],n<=(m=0===i?f:d)&&m<=r&&za(u,f,d,y),w=u.length-3,o&&3<=w&&(u[w]!==u[0]||u[w+1]!==u[1])&&za(u,u[0],u[1],u[2]),u.length&&e.push(u)}function ja(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function Da(t,e,n,r,i,o){for(var a=0;a<t.length;a++)Na(t[a],e,n,r,i,o,!1)}function za(t,e,n,r){t.push(e),t.push(n),t.push(r)}function Fa(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function Ba(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function Ga(t,e){var n=e.buffer/e.extent,r=t,i=Ra(t,1,-1-n,n,0,-1,2,e),o=Ra(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=Ra(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=Ha(i,1).concat(r)),o&&(r=r.concat(Ha(o,-1)))),r}function Ha(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=Ua(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(Ua(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(Ua(o.geometry[s][u],e));i.push(l)}n.push(Ta(o.id,a,i,o.tags))}return n}function Ua(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function qa(t,e){if(t.transformed)return t;for(var n,r=1<<t.z,i=t.x,o=t.y,a=0;a<t.features.length;a++){var s=t.features[a],l=s.geometry,u=s.type;if(s.geometry=[],1===u)for(n=0;n<l.length;n+=2)s.geometry.push(Va(l[n],l[n+1],e,r,i,o));else for(n=0;n<l.length;n++){for(var c=[],h=0;h<l[n].length;h+=2)c.push(Va(l[n][h],l[n][h+1],e,r,i,o));s.geometry.push(c)}}return t.transformed=!0,t}function Va(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function Za(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,function(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)Wa(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)Wa(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)Wa(a,u[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var p={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(p.id=e.id),t.features.push(p)}}(a,t[s],o,i);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function Wa(t,e,n,r,i,o){var a=r*r;if(0<r&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>a)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(0<n===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}var Ya={maxZoom:14,tolerance:3,extent:4096,buffer:64,lineMetrics:!(wa.deepClone=function(t){return Array.isArray(t)?t.map(wa.deepClone):t}),promoteId:null,generateId:!1};function Ka(t,e,n,r,i){var o=Object.assign({},Ya,i),a=Sa(t,o),s=function(t){var e,n=2,r=-1,i=1,o=0,a=Nr(t);try{for(a.s();!(e=a.n()).done;){var s=e.value;s.minX<n&&(n=s.minX),s.maxX>r&&(r=s.maxX),s.minY<i&&(i=s.minY),s.maxY>o&&(o=s.maxY)}}catch(t){a.e(t)}finally{a.f()}return{minX:n,maxX:r,minY:i,maxY:o}}(a=Ga(a,o)),l=s.minX,u=s.minY,c=s.maxX,h=s.maxY,p=1<<e,f=o.buffer/o.extent,d=1+f;return a=Ra(a,p,n-f,n+d,0,l,c,o)||[],qa(Za(a=Ra(a,p,r-f,r+d,1,u,h,o)||[],e,n,r,o),o.extent)}function Xa(t,e){this.items=[],this.algorithm=t;var n=void 0===(e=e||{}).sort||e.sort;this.sort=n}Xa.prototype={addItem:function(t){this.items.push(t)},normalizeCoordinates:function(){var t=this.items,e=1/0,n=1/0;t.forEach((function(t){var r=t;e=Math.min(e,r.x),n=Math.min(n,r.y)})),t.forEach((function(t){var r=t;r.x-=e,r.y-=n}))},getStats:function(){var t=this.items.map((function(t){return t})),e=t.map((function(t){return t.x})),n=t.map((function(t){return t.y})),r=t.map((function(t){return t.x+t.width})),i=t.map((function(t){return t.y+t.height}));return{minX:Math.max.apply(Math,e),minY:Math.max.apply(Math,n),maxX:Math.max.apply(Math,r),maxY:Math.max.apply(Math,i)}},getItems:function(){return this.items},processItems:function(){var t=this.items;return this.sort&&(t=this.algorithm.sort(t)),t=this.algorithm.placeItems(t),this.items=t},exportItems:function(){return this.processItems(),this.normalizeCoordinates(),this.items},export:function(){var t=this.exportItems(),e=this.getStats();return{height:e.maxY,width:e.maxX,items:t}}};var Ja=Xa,$a=[],Qa=[],ts="undefined"!=typeof Uint8Array?Uint8Array:Array,es=!1;function ns(){es=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)$a[e]=t[e],Qa[t.charCodeAt(e)]=e;Qa["-".charCodeAt(0)]=62,Qa["_".charCodeAt(0)]=63}function rs(t,e,n){for(var r,i,o=[],a=e;a<n;a+=3)r=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o.push($a[(i=r)>>18&63]+$a[i>>12&63]+$a[i>>6&63]+$a[63&i]);return o.join("")}function is(t){var e;es||ns();for(var n=t.length,r=n%3,i="",o=[],a=0,s=n-r;a<s;a+=16383)o.push(rs(t,a,s<a+16383?s:a+16383));return 1==r?(e=t[n-1],i+=$a[e>>2],i+=$a[e<<4&63],i+="=="):2==r&&(e=(t[n-2]<<8)+t[n-1],i+=$a[e>>10],i+=$a[e>>4&63],i+=$a[e<<2&63],i+="="),o.push(i),o.join("")}function os(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=s;0<c;o=256*o+t[e+h],h+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+t[e+h],h+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)}function as(t,e,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+h?p/l:p*Math.pow(2,1-h))*l&&(a++,l/=2),c<=a+h?(s=0,a=c):1<=a+h?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));8<=i;t[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;t[n+f]=255&a,f+=d,a/=256,u-=8);t[n+f-d]|=128*y}var ss={}.toString,ls=Array.isArray||function(t){return"[object Array]"==ss.call(t)};ps.TYPED_ARRAY_SUPPORT=void 0===Yr.TYPED_ARRAY_SUPPORT||Yr.TYPED_ARRAY_SUPPORT;var us=cs();function cs(){return ps.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function hs(t,e){if(cs()<e)throw new RangeError("Invalid typed array length");return ps.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=ps.prototype:(null===t&&(t=new ps(e)),t.length=e),t}function ps(t,e,n){if(!(ps.TYPED_ARRAY_SUPPORT||this instanceof ps))return new ps(t,e,n);if("number"!=typeof t)return fs(this,t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return ys(this,t)}function fs(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),ps.TYPED_ARRAY_SUPPORT?(t=e).__proto__=ps.prototype:t=gs(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!ps.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|bs(e,n),i=(t=hs(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(ms(e)){var n=0|vs(e.length);return 0===(t=hs(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?hs(t,0):gs(t,e);if("Buffer"===e.type&&ls(e.data))return gs(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function ds(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function ys(t,e){if(ds(e),t=hs(t,e<0?0:0|vs(e)),!ps.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function gs(t,e){var n=e.length<0?0:0|vs(e.length);t=hs(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function vs(t){if(t>=cs())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+cs().toString(16)+" bytes");return 0|t}function ms(t){return null!=t&&t._isBuffer}function bs(t,e){if(ms(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return js(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Ds(t).length;default:if(r)return js(t).length;e=(""+e).toLowerCase(),r=!0}}function _s(t,e,n){var r,i,o,a=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=e;o<n;++o)i+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[o]);return i}(this,e,n);case"utf8":case"utf-8":return As(this,e,n);case"ascii":return function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}(this,e,n);case"latin1":case"binary":return function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}(this,e,n);case"base64":return r=this,o=n,0===(i=e)&&o===r.length?is(r):is(r.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(this,e,n);default:if(a)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),a=!0}}function ws(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function xs(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=ps.from(e,r)),ms(e))return 0===e.length?-1:ks(t,e,n,r,i);if("number"==typeof e)return e&=255,ps.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):ks(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function ks(t,e,n,r,i){var o=1,a=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a/=o=2,s/=2,n/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i)for(var u=-1,c=n;c<a;c++)if(l(t,c)===l(e,-1===u?0:c-u)){if(-1===u&&(u=c),c-u+1===s)return u*o}else-1!==u&&(c-=c-u),u=-1;else for(a<n+s&&(n=a-s),c=n;0<=c;c--){for(var h=!0,p=0;p<s;p++)if(l(t,c+p)!==l(e,p)){h=!1;break}if(h)return c}return-1}function Es(t,e,n,r){return zs(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function Ts(t,e,n,r){return zs(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function As(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,l,u=t[i],c=null,h=239<u?4:223<u?3:191<u?2:1;if(i+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[i+1]))&&127<(l=(31&u)<<6|63&o)&&(c=l);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(c=l);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,h=1):65535<c&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(t){var e=t.length;if(e<=Ss)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Ss));return n}(r)}ps.poolSize=8192,ps._augment=function(t){return t.__proto__=ps.prototype,t},ps.from=function(t,e,n){return fs(null,t,e,n)},ps.TYPED_ARRAY_SUPPORT&&(ps.prototype.__proto__=Uint8Array.prototype,ps.__proto__=Uint8Array),ps.alloc=function(t,e,n){return r=null,o=e,a=n,ds(i=t),i<=0||void 0===o?hs(r,i):"string"==typeof a?hs(r,i).fill(o,a):hs(r,i).fill(o);var r,i,o,a},ps.allocUnsafe=function(t){return ys(null,t)},ps.allocUnsafeSlow=function(t){return ys(null,t)},ps.isBuffer=Fs,ps.compare=function(t,e){if(!ms(t)||!ms(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},ps.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ps.concat=function(t,e){if(!ls(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return ps.alloc(0);if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;for(var n=ps.allocUnsafe(e),r=0,i=0;i<t.length;++i){var o=t[i];if(!ms(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},ps.byteLength=bs,ps.prototype._isBuffer=!0,ps.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)ws(this,e,e+1);return this},ps.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)ws(this,e,e+3),ws(this,e+1,e+2);return this},ps.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)ws(this,e,e+7),ws(this,e+1,e+6),ws(this,e+2,e+5),ws(this,e+3,e+4);return this},ps.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?As(this,0,t):_s.apply(this,arguments)},ps.prototype.equals=function(t){if(!ms(t))throw new TypeError("Argument must be a Buffer");return this===t||0===ps.compare(this,t)},ps.prototype.inspect=function(){var t="";return 0<this.length&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(t+=" ... ")),"<Buffer "+t+">"},ps.prototype.compare=function(t,e,n,r,i){if(!ms(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=e)return 0;if(i<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(r,i),u=t.slice(e,n),c=0;c<s;++c)if(l[c]!==u[c]){o=l[c],a=u[c];break}return o<a?-1:a<o?1:0},ps.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},ps.prototype.indexOf=function(t,e,n){return xs(this,t,e,n,!0)},ps.prototype.lastIndexOf=function(t,e,n){return xs(this,t,e,n,!1)},ps.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||i<n)&&(n=i),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,a,s,l,u=!1;;)switch(r){case"hex":return function(t,e,n,r){n=Number(n)||0;var i=t.length-n;(!r||i<(r=Number(r)))&&(r=i);var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<r&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}(this,t,e,n);case"utf8":case"utf-8":return s=e,l=n,zs(js(t,this.length-s),this,s,l);case"ascii":case"latin1":case"binary":return Es(this,t,e,n);case"base64":return o=e,a=n,zs(Ds(t),this,o,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ts(this,t,e,n);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},ps.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ss=4096;function Ms(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function Is(t,e,n,r,i,o){if(!ms(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function Os(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Cs(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function Ls(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Ps(t,e,n,r,i){return i||Ls(t,0,n,4),as(t,e,n,r,23,4),n+4}function Rs(t,e,n,r,i){return i||Ls(t,0,n,8),as(t,e,n,r,52,8),n+8}ps.prototype.slice=function(t,e){var n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t),ps.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=ps.prototype;else for(var r=e-t,i=new ps(r,void 0),o=0;o<r;++o)i[o]=this[o+t];return i},ps.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||Ms(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},ps.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||Ms(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},ps.prototype.readUInt8=function(t,e){return e||Ms(t,1,this.length),this[t]},ps.prototype.readUInt16LE=function(t,e){return e||Ms(t,2,this.length),this[t]|this[t+1]<<8},ps.prototype.readUInt16BE=function(t,e){return e||Ms(t,2,this.length),this[t]<<8|this[t+1]},ps.prototype.readUInt32LE=function(t,e){return e||Ms(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},ps.prototype.readUInt32BE=function(t,e){return e||Ms(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ps.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||Ms(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*e)),r},ps.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||Ms(t,e,this.length);for(var r=e,i=1,o=this[t+--r];0<r&&(i*=256);)o+=this[t+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},ps.prototype.readInt8=function(t,e){return e||Ms(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},ps.prototype.readInt16LE=function(t,e){e||Ms(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},ps.prototype.readInt16BE=function(t,e){e||Ms(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},ps.prototype.readInt32LE=function(t,e){return e||Ms(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ps.prototype.readInt32BE=function(t,e){return e||Ms(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ps.prototype.readFloatLE=function(t,e){return e||Ms(t,4,this.length),os(this,t,!0,23,4)},ps.prototype.readFloatBE=function(t,e){return e||Ms(t,4,this.length),os(this,t,!1,23,4)},ps.prototype.readDoubleLE=function(t,e){return e||Ms(t,8,this.length),os(this,t,!0,52,8)},ps.prototype.readDoubleBE=function(t,e){return e||Ms(t,8,this.length),os(this,t,!1,52,8)},ps.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||Is(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},ps.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||Is(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+n},ps.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||Is(this,t,e,1,255,0),ps.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},ps.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||Is(this,t,e,2,65535,0),ps.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Os(this,t,e,!0),e+2},ps.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||Is(this,t,e,2,65535,0),ps.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Os(this,t,e,!1),e+2},ps.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||Is(this,t,e,4,4294967295,0),ps.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Cs(this,t,e,!0),e+4},ps.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||Is(this,t,e,4,4294967295,0),ps.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Cs(this,t,e,!1),e+4},ps.prototype.writeIntLE=function(t,e,n,r){var i;t=+t,e|=0,r||Is(this,t,e,n,(i=Math.pow(2,8*n-1))-1,-i);var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},ps.prototype.writeIntBE=function(t,e,n,r){var i;t=+t,e|=0,r||Is(this,t,e,n,(i=Math.pow(2,8*n-1))-1,-i);var o=n-1,a=1,s=0;for(this[e+o]=255&t;0<=--o&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},ps.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||Is(this,t,e,1,127,-128),ps.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},ps.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||Is(this,t,e,2,32767,-32768),ps.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Os(this,t,e,!0),e+2},ps.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||Is(this,t,e,2,32767,-32768),ps.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Os(this,t,e,!1),e+2},ps.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||Is(this,t,e,4,2147483647,-2147483648),ps.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Cs(this,t,e,!0),e+4},ps.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||Is(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ps.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Cs(this,t,e,!1),e+4},ps.prototype.writeFloatLE=function(t,e,n){return Ps(this,t,e,!0,n)},ps.prototype.writeFloatBE=function(t,e,n){return Ps(this,t,e,!1,n)},ps.prototype.writeDoubleLE=function(t,e,n){return Rs(this,t,e,!0,n)},ps.prototype.writeDoubleBE=function(t,e,n){return Rs(this,t,e,!1,n)},ps.prototype.copy=function(t,e,n,r){if(n=n||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),e=e||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;0<=i;--i)t[i+e]=this[i+n];else if(o<1e3||!ps.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},ps.prototype.fill=function(t,e,n,r){if("string"==typeof t){var i;if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1!==t.length||(i=t.charCodeAt(0))<256&&(t=i),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!ps.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;if(e>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(s=e;s<n;++s)this[s]=t;else for(var o=ms(t)?t:js(new ps(t,r).toString()),a=o.length,s=0;s<n-e;++s)this[s+e]=o[s%a];return this};var Ns=/[^+\/0-9A-Za-z-_]/g;function js(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=t.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,n<128){if(--e<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Ds(t){return function(t){var e,n,r,i;es||ns();var o=t.length;if(0<o%4)throw new Error("Invalid string. Length must be a multiple of 4");r="="===t[o-2]?2:"="===t[o-1]?1:0,i=new ts(3*o/4-r),e=0<r?o-4:o;for(var a=0,s=0;s<e;s+=4,0)n=Qa[t.charCodeAt(s)]<<18|Qa[t.charCodeAt(s+1)]<<12|Qa[t.charCodeAt(s+2)]<<6|Qa[t.charCodeAt(s+3)],i[a++]=n>>16&255,i[a++]=n>>8&255,i[a++]=255&n;return 2==r?(n=Qa[t.charCodeAt(s)]<<2|Qa[t.charCodeAt(s+1)]>>4,i[a++]=255&n):1==r&&(n=Qa[t.charCodeAt(s)]<<10|Qa[t.charCodeAt(s+1)]<<4|Qa[t.charCodeAt(s+2)]>>2,i[a++]=n>>8&255,i[a++]=255&n),i}(function(t){var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(Ns,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function zs(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function Fs(t){return null!=t&&(!!t._isBuffer||Bs(t)||"function"==typeof(e=t).readFloatLE&&"function"==typeof e.slice&&Bs(e.slice(0,0)));var e}function Bs(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var Gs=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:us,Buffer:ps,SlowBuffer:function(t){return+t!=t&&(t=0),ps.alloc(+t)},isBuffer:Fs});Yr.setTimeout,Yr.clearTimeout,Yr.performance;var Hs="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){function n(){}t.super_=e,n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},Us=Hs;function qs(t,e){var n={seen:[],stylize:Zs};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),Xs(e)?n.showHidden=e:e&&function(t,e){if(e&&el(e))for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]]}(n,e),Qs(n.showHidden)&&(n.showHidden=!1),Qs(n.depth)&&(n.depth=2),Qs(n.colors)&&(n.colors=!1),Qs(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Vs),Ws(n,t,n.depth)}function Vs(t,e){var n=qs.styles[e];return n?"\x1b["+qs.colors[n][0]+"m"+t+"\x1b["+qs.colors[n][1]+"m":t}function Zs(t,e){return t}function Ws(t,e,n){if(t.customInspect&&e&&il(e.inspect)&&e.inspect!==qs&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return $s(r)||(r=Ws(t,r,n)),r}var i=function(t,e){if(Qs(e))return t.stylize("undefined","undefined");if($s(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return"number"==typeof e?t.stylize(""+e,"number"):Xs(e)?t.stylize(""+e,"boolean"):Js(e)?t.stylize("null","null"):void 0}(t,e);if(i)return i;var o,a=Object.keys(e),s=(o={},a.forEach((function(t,e){o[t]=!0})),o);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),rl(e)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return Ys(e);if(0===a.length){if(il(e)){var l=e.name?": "+e.name:"";return t.stylize("[Function"+l+"]","special")}if(tl(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(nl(e))return t.stylize(Date.prototype.toString.call(e),"date");if(rl(e))return Ys(e)}var u,c,h="",p=!1,f=["{","}"];return u=e,Array.isArray(u)&&(p=!0,f=["[","]"]),il(e)&&(h=" [Function"+(e.name?": "+e.name:"")+"]"),tl(e)&&(h=" "+RegExp.prototype.toString.call(e)),nl(e)&&(h=" "+Date.prototype.toUTCString.call(e)),rl(e)&&(h=" "+Ys(e)),0!==a.length||p&&0!=e.length?n<0?tl(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=p?function(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)sl(e,String(a))?o.push(Ks(t,e,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(Ks(t,e,n,r,i,!0))})),o}(t,e,n,s,a):a.map((function(r){return Ks(t,e,n,s,r,p)})),t.seen.pop(),function(t,e,n){return 60<t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(c,h,f)):f[0]+h+f[1]}function Ys(t){return"["+Error.prototype.toString.call(t)+"]"}function Ks(t,e,n,r,i,o){var a,s,l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]};if(l.get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),sl(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(l.value)<0?-1<(s=Js(n)?Ws(t,l.value,null):Ws(t,l.value,n-1)).indexOf("\n")&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),Qs(a)){if(o&&i.match(/^\d+$/))return s;a=(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),t.stylize(a,"string"))}return a+": "+s}function Xs(t){return"boolean"==typeof t}function Js(t){return null===t}function $s(t){return"string"==typeof t}function Qs(t){return void 0===t}function tl(t){return el(t)&&"[object RegExp]"===al(t)}function el(t){return"object"==typeof t&&null!==t}function nl(t){return el(t)&&"[object Date]"===al(t)}function rl(t){return el(t)&&("[object Error]"===al(t)||t instanceof Error)}function il(t){return"function"==typeof t}function ol(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function al(t){return Object.prototype.toString.call(t)}function sl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ll(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}qs.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},qs.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var ul,cl=Object.prototype.hasOwnProperty,hl=Object.keys||function(t){var e=[];for(var n in t)cl.call(t,n)&&e.push(n);return e},pl=Array.prototype.slice;function fl(){return void 0!==ul?ul:ul="foo"===function(){}.name}function dl(t){return Object.prototype.toString.call(t)}function yl(t){if(!Fs(t)&&"function"==typeof Yr.ArrayBuffer){if("function"==typeof ArrayBuffer.isView)return ArrayBuffer.isView(t);if(t)return t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)}}function gl(t,e){t||xl(t,!0,e,"==",kl)}var vl=/\s*function\s+([^\(\s]*)\s*/;function ml(t){if(il(t)){if(fl())return t.name;var e=t.toString().match(vl);return e&&e[1]}}function bl(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=_l(wl(this.actual),128)+" "+this.operator+" "+_l(wl(this.expected),128),this.generatedMessage=!0);var e,n,r,i,o,a=t.stackStartFunction||xl;Error.captureStackTrace?Error.captureStackTrace(this,a):(e=new Error).stack&&(o=e.stack,n=ml(a),0<=(r=o.indexOf("\n"+n))&&(i=o.indexOf("\n",r+1),o=o.substring(i+1)),this.stack=o)}function _l(t,e){return"string"!=typeof t||t.length<e?t:t.slice(0,e)}function wl(t){if(fl()||!il(t))return qs(t);var e=ml(t);return"[Function"+(e?": "+e:"")+"]"}function xl(t,e,n,r,i){throw new bl({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function kl(t,e){t||xl(t,!0,e,"==",kl)}function El(t,e,n,r){if(t===e)return!0;if(Fs(t)&&Fs(e))return 0===ll(t,e);if(nl(t)&&nl(e))return t.getTime()===e.getTime();if(tl(t)&&tl(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(yl(t)&&yl(e)&&dl(t)===dl(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===ll(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(Fs(t)!==Fs(e))return!1;var i=(r=r||{actual:[],expected:[]}).actual.indexOf(t);return-1!==i&&i===r.expected.indexOf(e)||(r.actual.push(t),r.expected.push(e),function(t,e,n,r){if(null==t||null==e)return!1;if(ol(t)||ol(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=Tl(t),o=Tl(e);if(i&&!o||!i&&o)return!1;if(i)return El(t=pl.call(t),e=pl.call(e),n);var a,s,l=hl(t),u=hl(e);if(l.length!==u.length)return!1;for(l.sort(),u.sort(),s=l.length-1;0<=s;s--)if(l[s]!==u[s])return!1;for(s=l.length-1;0<=s;s--)if(!El(t[a=l[s]],e[a],n,r))return!1;return!0}(t,e,n,r))}return n?t===e:t==e}function Tl(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function Al(t,e){if(t&&e){if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return 1}catch(t){}if(!Error.isPrototypeOf(e))return!0===e.call({},t)}}function Sl(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&xl(i,n,"Missing expected exception"+r);var o="string"==typeof r,a=!t&&i&&!n;if((!t&&rl(i)&&o&&Al(i,n)||a)&&xl(i,n,"Got unwanted exception"+r),t&&i&&n&&!Al(i,n)||!t&&i)throw i}function Ml(){}Us(gl.AssertionError=bl,Error),gl.fail=xl,gl.ok=kl,gl.equal=function t(e,n,r){e!=n&&xl(e,n,r,"==",t)},gl.notEqual=function t(e,n,r){e==n&&xl(e,n,r,"!=",t)},gl.deepEqual=function t(e,n,r){El(e,n,!1)||xl(e,n,r,"deepEqual",t)},gl.deepStrictEqual=function t(e,n,r){El(e,n,!0)||xl(e,n,r,"deepStrictEqual",t)},gl.notDeepEqual=function t(e,n,r){El(e,n,!1)&&xl(e,n,r,"notDeepEqual",t)},gl.notDeepStrictEqual=function t(e,n,r){El(e,n,!0)&&xl(e,n,r,"notDeepStrictEqual",t)},gl.strictEqual=function t(e,n,r){e!==n&&xl(e,n,r,"===",t)},gl.notStrictEqual=function t(e,n,r){e===n&&xl(e,n,r,"!==",t)},gl.throws=function(t,e,n){Sl(!0,t,e,n)},gl.doesNotThrow=function(t,e,n){Sl(!1,t,e,n)},gl.ifError=function(t){if(t)throw t};var Il={sort:function(t){return t.sort((function(t,e){return Math.sqrt(Math.pow(t.height,2)+Math.pow(t.width,2))-Math.sqrt(Math.pow(e.height,2)+Math.pow(e.width,2))})),t},placeItems:function(t){var e=0,n=0;return t.forEach((function(t){t.x=e,t.y=n,e+=t.width,n+=t.height})),t}},Ol={sort:function(t){return t.sort((function(t,e){return Math.sqrt(Math.pow(t.height,2)+Math.pow(t.width,2))-Math.sqrt(Math.pow(e.height,2)+Math.pow(e.width,2))})),t},placeItems:function(t){var e=0,n=0;return t.forEach((function(t){var r=t.width;t.x=e-r,t.y=n,e-=r,n+=t.height})),t}};Ml.prototype={fit:function(t){var e,n,r,i,o=t.length,a=0<o?t[0].width:0,s=0<o?t[0].height:0;for(this.root={x:0,y:0,width:a,height:s},e=0;e<o;e++)r=t[e],i=(n=this.findNode(this.root,r.width,r.height))?this.splitNode(n,r.width,r.height):this.growNode(r.width,r.height),r.x=i.x,r.y=i.y},findNode:function(t,e,n){return t.used?this.findNode(t.right,e,n)||this.findNode(t.down,e,n):e<=t.width&&n<=t.height?t:null},splitNode:function(t,e,n){return t.used=!0,t.down={x:t.x,y:t.y+n,width:t.width,height:t.height-n},t.right={x:t.x+e,y:t.y,width:t.width-e,height:n},t},growNode:function(t,e){var n=t<=this.root.width,r=e<=this.root.height,i=r&&this.root.height>=this.root.width+t,o=n&&this.root.width>=this.root.height+e;return i?this.growRight(t,e):o?this.growDown(t,e):r?this.growRight(t,e):n?this.growDown(t,e):null},growRight:function(t,e){var n;return this.root={used:!0,x:0,y:0,width:this.root.width+t,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:t,height:this.root.height}},(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null},growDown:function(t,e){var n;return this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+e,down:{x:0,y:this.root.height,width:this.root.width,height:e},right:this.root},(n=this.findNode(this.root,t,e))?this.splitNode(n,t,e):null}};var Cl=Ml,Ll={sort:function(t){return t},placeItems:function(t){return function(t,e){e=e||{};var n=new Cl,r=e.inPlace||!1,i=(i=t.map((function(t){return r?t:{width:t.width,height:t.height,item:t}}))).sort((function(t,e){return e.width*e.height-t.width*t.height}));n.fit(i);var o={width:i.reduce((function(t,e){return Math.max(t,e.x+e.width)}),0),height:i.reduce((function(t,e){return Math.max(t,e.y+e.height)}),0)};r||(o.items=i)}(t,{inPlace:!0}),t}},Pl={};function Rl(t,e){var n=t||"top-down";return"string"==typeof n&&gl(n=Pl[t],"Sorry, the '"+t+"' algorithm could not be loaded."),new Ja(n,e)}function Nl(t,e){Pl[t]=e}Rl.PackingSmith=Ja,Rl.addAlgorithm=Nl,Rl.algorithms=Pl,Nl("top-down",{sort:function(t){return t.sort((function(t,e){return t.height-e.height})),t},placeItems:function(t){var e=0;return t.forEach((function(t){t.x=0,t.y=e,e+=t.height})),t}}),Nl("left-right",{sort:function(t){return t.sort((function(t,e){return t.width-e.width})),t},placeItems:function(t){var e=0;return t.forEach((function(t){t.x=e,t.y=0,e+=t.width})),t}}),Nl("diagonal",Il),Nl("alt-diagonal",Ol),Nl("binary-tree",Ll);var jl=Rl;function Dl(t){var e;try{t.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1)}catch(t){e=t.message}return e}function zl(t,e,n){var r;return t instanceof HTMLImageElement&&((r=t.ownerDocument.createElement("canvas")).width=e,r.height=n,r.getContext("2d").drawImage(t,0,0,e,n),t=r),t}var Fl=Qr.metersToLatLng([Qr.half_circumference_meters,Qr.half_circumference_meters]),Bl=Math.log(Qr.tile_size)/Math.LN2,Gl=function(){xr(e,Di);var t=Ir(e);function e(n,r){var i;return mr(this,e),i=t.call(this,n,r),li.is_worker&&(i._quad_tree=new Kr.H.geo.QuadTree,i._marker_quad_tree=new Kr.H.geo.QuadTree,i._tree_entries_by_object_id={},i._groups_by_id={},i._layersCache=new Kr.H.util.Cache(100)),li.is_main&&(i._objects_by_id={},i._commands=[],i._sendCommands=Ei(i._sendCommands,100,200),i.dispatchUpdate=i.dispatchUpdate.bind(Mr(i))),i}return _r(e,[{key:"hasLabeledData",value:function(){return!1}},{key:"onReady",value:function(){this._synced_at=this.provider.getInvalidations().getMark();var t,e,n=this.provider.getRootGroup(),r=n.getObjects(!0),i=[];for(r.push(n),t=r.length;t--;)e=r[t],this._isObjectSupported(e)&&this._shouldBeStored(e)&&(this._objects_by_id[e.getId()]=e,i.push(e.forWorkerMessage()));var o=[{method_name:"addObjects",arguments:[i]}];this._sendImmediateCommands(o)}},{key:"onProviderUpdate",value:function(t){var e,n,r,i,o=t.target,a=t.currentTarget.getInvalidations(o.type);this._isObjectSupported(o)&&(e=this._synced_at,n=o.getId(),a.isRemove(e)?(delete this._objects_by_id[n],this._commands.push({method_name:"removeObjectsByIds",arguments:[[n],!0]})):a.isAdd(e)?this._shouldBeStored(o)&&(this._objects_by_id[n]=o,this._commands.push({method_name:"addObjects",arguments:[[o.forWorkerMessage()]]})):a.isSpatial(e)||a.isZOrder(e)?this._shouldBeStored(o)&&(r=[{method_name:"removeObjectsByIds",arguments:[[n],!0]},{method_name:"addObjects",arguments:[[(this._objects_by_id[n]=o).forWorkerMessage()]]}],this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands(r):this._commands.push(r[0],r[1])):a.isVisual(e)?this._shouldBeStored(o)&&(i={method_name:"updateObjectProperties",arguments:[(this._objects_by_id[n]=o).forWorkerMessage()]},this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands([i]):this._commands.push(i)):a.isVolatility(e)&&(delete this._objects_by_id[n],this._commands.push({method_name:"removeObjectsByIds",arguments:[[n],!0]}),this._shouldBeStored(o)&&(this._objects_by_id[n]=o,this._commands.push({method_name:"addObjects",arguments:[[o.forWorkerMessage()]]}))),this._commands.length&&this._sendCommands()),this._synced_at=a.getMark()}},{key:"_shouldBeStored",value:function(t){return 16===t.type||(!t.getIcon||1===t.getIcon().getState())&&this._hasSameVolatility(t)}},{key:"_hasSameVolatility",value:function(t){return t.getVolatility(!0)===this.has_volatile_data}},{key:"hasPendingCommands",value:function(){return 0<this._commands.length}},{key:"_sendCommands",value:function(){this._sendImmediateCommands(this._commands),this._commands=[]}},{key:"_sendImmediateCommands",value:function(t){t.length&&ui.postMessage(this.worker,this.target_name+".executeCommands",t).then(this.dispatchUpdate)}},{key:"_isObjectSupported",value:function(t){return t.forWorkerMessage&&8!==t.type}},{key:"getSyncedAt",value:function(){return this._synced_at}},{key:"getMapObjectById",value:function(t){return this._objects_by_id[t]}},{key:"getIconBitmapByObjectId",value:function(t,e){var n=this.getMapObjectById(t);if(n){var r=n.getIcon();if(r.uid===e&&1===r.getState()){var i=r.getSize();return zl(r.getBitmap(),i.w,i.h)}}}},{key:"_getRastersForMarkers",value:function(t){for(var e={},n=jl("binary-tree"),r=0;r<t.length;r++){var i=t[r],o=i.properties.icon;e[o.id]||(n.addItem({width:o.size.w,height:o.size.h,meta:{objectId:i.id,id:o.id}}),e[o.id]=!0)}return n.export()}},{key:"fetchFeaturesForTile",value:function(t){var n=[],r=[],i=[],o=[],a=[],s=this._marker_quad_tree.intersectBoundingBox(Qr.getTileBoundingBox(t.coords,this.tile_size));t.source_data.error=null;for(var l=0;l<s.length;l++){var u={id:s[l].$feature$.id,properties:Object.assign({},s[l].$feature$.properties),geometry:{type:s[l].$feature$.geometry.type,coordinates:ka.deepClone(s[l].$feature$.geometry.coordinates)}};n.push(u)}s=this._quad_tree.intersectBoundingBox(Qr.getTileBoundingBox(t.coords,this.tile_size,100));for(var c=0;c<s.length;c++){var h,p={id:s[c].$feature$.id,properties:Object.assign({},s[c].$feature$.properties),geometry:{type:s[c].$feature$.geometry.type,coordinates:ka.deepClone(s[c].$feature$.geometry.coordinates)}};p.properties.overlay?r.push(p):p.geometry.type.includes("LineString")?i.push(p):p.geometry.type.includes("Polygon")&&(o.push(p),h={id:p.id,properties:p.properties,geometry:{type:p.geometry.type,coordinates:ka.deepClone(p.geometry.coordinates)}},a.push(h))}n.sort(e._compareZInfo),o.sort(e._compareZInfo),r.sort(e._compareZInfo);var f=this.has_volatile_data?4096:0;a.sort(e._compareZInfo);for(var d=0;d<a.length;d++)a[d].properties.effectiveZIdx=f++;i.sort(e._compareZInfo);for(var y=0;y<i.length;y++)i[y].properties.effectiveZIdx=f++;t.source_data.layers.markers={type:"FeatureCollection",features:n},t.source_data.layers.polylines={type:"FeatureCollection",features:i},t.source_data.layers.polygons={type:"FeatureCollection",features:o},t.source_data.layers.outlines={type:"FeatureCollection",features:a},t.source_data.layers.overlays={type:"FeatureCollection",features:r}}},{key:"tileTexture",value:function(t){var e=t.source_data.layers.overlays;if(e){var n=this.name+"_"+t.coords.key,r=_a.coordinateWithMaxZoom(t.coords,this.max_zoom),i=e.features[0].properties.overlays_config;return{name:n,filtering:this.filtering,coords:r,width:Qr.tile_size,height:Qr.tile_size,overlays_config:i,source:this.name}}}},{key:"_load",value:function(t){var e=Qr.wrapTile(t.coords,{x:!0}),n=e.z,r=e.x,i=e.y,o="".concat(n,"_").concat(r,"_").concat(i),a=this._layersCache.get(o),s=!1;if(a)t.source_data.layers=a;else{this.fetchFeaturesForTile(t);var l={maxZoom:this.max_zoom,tolerance:1.5,extent:Qr.tile_scale},u=t.source_data.layers.overlays;u.features.length&&delete t.source_data.layers.overlays;var c=t.source_data.layers.markers;for(var h in c.features.length&&delete t.source_data.layers.markers,t.source_data.layers){var p,f=t.source_data.layers[h];f.features.length&&(l.buffer=h.includes("lines")?100*Qr.units_per_pixel:0,p=Ka(f,n,r,i,l),t.source_data.layers[h]=ao(p))}t.source_data.layers.overlays=this._processOverlays(t,u);for(var d=t.source_data.layers.overlays.features.length;d--;)if(!t.source_data.layers.overlays.features[d].id){s=!0,this._layersCache.drop(o);break}t.source_data.layers.markers=this._processMarkers(t,c),this._postProcessTile(t),s||this._layersCache.add(o,t.source_data.layers,1)}return t.rasters=this._getRastersForMarkers(t.source_data.layers.markers.features),Promise.resolve(t)}},{key:"_processMarkers",value:function(t,e){var n=e.features.length;if(n){for(var r=Qr.unitsPerMeter(t.coords.z),i=Qr.wrapTile(t.coords,{x:!0}),o=Qr.metersForTile(i),a=Qr.isLastTile(i),s=Qr.wrapMeters(t.min),l=Qr.wrapMeters(t.max),u=function(e){Pi.coordsToMeters(e);var n=Cr(e,2),i=n[0],u=n[1],c=i>=s.x&&(a.column||i<l.x)&&u>=l.y&&(a.row||!t.coords.y||u<s.y);return Pi.metersToTileUnits(r,o,e),c},c=[],h=0;h<n;h++){var p,f=e.features[h].geometry,d=!1;"Point"===f.type?u(p=f.coordinates)?f.coordinates=p:d=!0:"MultiPoint"===f.type&&(f.coordinates=f.coordinates.filter(u),0===f.coordinates.length&&(d=!0)),d||c.push(e.features[h])}e.features=c}return e}},{key:"_processOverlays",value:function(t,e){var n=this;if(!e.features.length)return e;var r={coords:t.coords,min:Qr.metersForTile(Qr.wrapTile(t.coords,{x:!0}))},i={coords:t.coords,source_data:{layers:{_default:{type:"FeatureCollection",features:e.features}}}},o=Math.pow(2,t.coords.z+Bl);Di.projectData(i.source_data),Di.scaleData(i.source_data,r);var a=e.features.map((function(t){var e=t.geometry.coordinates[0],n=e[0],r=e[5===e.length?2:3],i=Math.floor(n[0]/Qr.tile_scale*Qr.tile_size),a=Math.floor(n[1]/Qr.tile_scale*Qr.tile_size),s=Math.floor(r[0]/Qr.tile_scale*Qr.tile_size),l=Math.floor(r[1]/Qr.tile_scale*Qr.tile_size)-a,u=s<=i,c=u?o-(i-s):s-i,h=[];return i<=Qr.tile_size&&h.push([i,a,c,l]),u&&0<s&&h.push([i-o,a,c,l]),{id:t.id,properties:t.properties,texcoords:h}})).filter((function(e){return n._isVisible(e.properties)&&n.isInMinMaxRange(e.properties,t.style_zoom)})),s=Qr.tile_scale;return t.pad_scale=this.pad_scale,t.default_winding="CW",e.features=a.length?[{geometry:{type:"Polygon",coordinates:[[[0,0],[s,0],[s,s],[0,s],[0,0]]]},properties:{overlays_config:a}}]:a,e}},{key:"executeCommands",value:function(t){for(var e,n=t.length<10,r=0;r<t.length;r++){var i=t[r];i.arguments.push(n);var o=this[i.method_name].apply(this,i.arguments);n&&(o&&e?e.mergeRect(o,!0,e):o&&(e=o))}return e?e.forWorkerMessage():void 0}},{key:"_getClampedGeoRectForFeature",value:function(t){var e=t.geometry.boundingBox;return new Kr.H.geo.Rect(Jr.clamp(e[0],-Fl[1],Fl[1]),e[1],Jr.clamp(e[2],-Fl[1],Fl[1]),e[3])}},{key:"addObjects",value:function(t,n){for(var r,i=1<arguments.length&&void 0!==n&&n,o=0;o<t.length;o++){var a,s,l,u=t[o];"Group"===u.type?(u.$children_ids$={},this._groups_by_id[u.id]=u):(e._preprocessGeometry(u.geometry),a=this._getClampedGeoRectForFeature(u),i&&(r?r.mergeRect(a,!0,r):r=a),(l=(s=-1!==u.geometry.type.indexOf("Point")?this._marker_quad_tree:this._quad_tree).insertBoundingBox(a)).$tree=s,l.$feature$=u,this._tree_entries_by_object_id[u.id]=l)}for(var c=0;c<t.length;c++){var h=t[c];h.properties.parent&&(this._groups_by_id[h.properties.parent].$children_ids$[h.id]=h.id),h.properties.ref={effectiveVisibility:this._isVisible(h.properties),zInfo:this._getZInfo([],h)}}return this._layersCache.removeAll(),r}},{key:"removeObjectsByIds",value:function(t,e,n){for(var r,i=2<arguments.length&&void 0!==n&&n,o=0;o<t.length;o++){var a,s=t[o],l=void 0,u=void 0;(l=this._tree_entries_by_object_id[s])?(i&&(a=this._getClampedGeoRectForFeature(l.$feature$),r?r.mergeRect(a,!0,r):r=a),delete this._groups_by_id[l.$feature$.properties.parent].$children_ids$[s],l.$tree.remove(l),delete this._tree_entries_by_object_id[s]):(u=this._groups_by_id[s])&&(u.properties.parent&&delete this._groups_by_id[u.properties.parent].$children_ids$[s],e&&this.removeObjectsByIds(Object.keys(u.$children_ids$),!0),delete this._groups_by_id[s])}return this._layersCache.removeAll(),r}},{key:"updateObjectProperties",value:function(t,e){var n,r=1<arguments.length&&void 0!==e&&e;return"Group"===t.type?(ya(this._groups_by_id[t.id].properties,t.properties),this._groups_by_id[t.id].properties.ref.effectiveVisibility=this._isVisible(t.properties)):(this._tree_entries_by_object_id[t.id]||this.addObjects([t]),ya(this._tree_entries_by_object_id[t.id].$feature$.properties,t.properties),this._tree_entries_by_object_id[t.id].$feature$.properties.ref.effectiveVisibility=this._isVisible(t.properties),r&&(n=this._getClampedGeoRectForFeature(t))),n}},{key:"_getZInfo",value:function(t,e){var n=e.properties.zIdx,r=e.properties.sIdx;return t[0]|=void 0!==n,t.splice(1,0,n||0,r<0?e.id:r),0===e.properties.parent?t:this._getZInfo(t,this._groups_by_id[e.properties.parent])}},{key:"_isVisible",value:function(t){var e=t.visible,n=!t.parent||this._isVisible(this._groups_by_id[t.parent].properties);return e&&n}},{key:"isInMinMaxRange",value:function(t,e){var n=t.min<=e&&t.max>=e,r=!t.parent||this.isInMinMaxRange(this._groups_by_id[t.parent].properties,e);return n&&r}},{key:"dispose",value:function(){this._commands=[],Or(kr(e.prototype),"dispose",this).call(this)}}],[{key:"_compareZInfo",value:function(t,e){for(var n,r=t.properties.ref.zInfo,i=e.properties.ref.zInfo,o=r.length,a=i.length,s=Math.min(o,a),l=1;l<s;l++)if(n=r[l]-i[l])return n;return o-a}},{key:"_preprocessGeometry",value:function(t){var n=t.type;t.coordinates="Point"===n?e._processPointCoordinates(t.coordinates):"MultiPoint"===n?t.coordinates.map(e._processPointCoordinates):"LineString"===n?e._processLineStringCoordinates(t.coordinates):"MultiLineString"===n?t.coordinates.map(e._processLineStringCoordinates):"Polygon"===n?t.coordinates.map(e._processPolygonCoordinates):"MultiPolygon"===n?t.coordinates.map(e._processMultiPolygonCoordinates):[]}},{key:"_processPointCoordinates",value:function(t){return[t[1],t[0],t[2]]}},{key:"_processLineStringCoordinates",value:function(t){return e._latLngAltArrayToLineString(t,!1)}},{key:"_processPolygonCoordinates",value:function(t){return e._latLngAltArrayToLineString(t,!0)}},{key:"_processMultiPolygonCoordinates",value:function(t){return t.map(e._processPolygonCoordinates)}},{key:"_latLngAltArrayToLineString",value:function(t,e){for(var n=[],r=t.length,i=0;i<r;i+=3)n.push([t[i+1],t[i]]);return e&&n.push([t[1],t[0]]),n}}]),e}();Di.register(Gl,"ObjectSource");var Hl=function(){function t(){mr(this,t),this._map={}}return _r(t,[{key:"set",value:function(t,e,n){var r;this._map[t]?this._map[t].accumulator.add(n):((r=new Set).add(n),this._map[t]={value:e,accumulator:r})}},{key:"get",value:function(t){return this._map[t]&&this._map[t].value}},{key:"delete",value:function(t,e){var n=this._map[t];n&&n.accumulator&&(n.accumulator.delete(e),0===n.accumulator.size&&delete this._map[t])}}]),t}(),Ul=function(){xr(e,Di);var t=Ir(e);function e(n,r){var i;return mr(this,e),i=t.call(this,n,r),li.is_worker||(i._icons=new Hl),i}return _r(e,[{key:"onProviderUpdate",value:function(t){t.target instanceof H.map.provider.Tile?this.dispatchUpdate(t.target,t.data):this.dispatchUpdate(void 0,t.data)}},{key:"onReady",value:function(){var t=this.provider;t.setTileCanvasRendering&&t.setTileCanvasRendering(!1),t.providesMarkers()&&(this._onCacheDrop=this._onCacheDrop.bind(this),t.getCache().registerOnDrop(this._onCacheDrop)),this.dispatchUpdate()}},{key:"dispose",value:function(){Or(kr(e.prototype),"dispose",this).call(this);var t=this.provider;t.providesMarkers()&&t.getCache().deRegisterOnDrop(this._onCacheDrop)}},{key:"_onCacheDrop",value:function(t,e){this.provider.cacheFilter(t)&&this._deleteIcons(t,e.data)}},{key:"_deleteIcons",value:function(t,e){for(var n=0,r=e.length;n<r;n++){var i=e[n].getIcon();this._icons.delete(i.uid,t)}}},{key:"getIconBitmapByObjectId",value:function(t,e){var n=this._icons.get(e);return n&&n.getBitmap()}},{key:"requestMarkerTile",value:function(t){var e=this;return new Promise((function(n,r){e.provider?e.provider.requestTileAsPromise(t.x,t.y,t.z,!1).then((function(t){var r,i,o=[];if(t.data)for(i=(r=t.data).length;i--;){var a=r[i],s=a.getIcon();e._icons.set(s.uid,s,t.key),o.push(a.forWorkerMessage())}n(o)})):n([])}))}},{key:"requestSpatialTile",value:function(t){var e=this;return new Promise((function(n,r){e.provider?e.provider.requestTileAsPromise(t.x,t.y,t.z,!1).then((function(t){var e,r=[];if(t.getObjects){e=t.getObjects();for(var i=0;i<e.length;i++){var o=e[i];r.push({id:o.getId(),geometries:o.getGeometriesForTile(t),isClosed:o.isClosed(),style:o.getStyle().forWorkerMessage()})}}n(r)})):n([])}))}},{key:"_pointToArray",value:function(t){var e=Qr.tile_scale/this.tile_size;return[t.x*e,t.y*e]}},{key:"_getGeoJsonMultiPolygon",value:function(t){for(var e=t.geometries,n=e.length,r=[],i={coordinates:r,type:"MultiPolygon"},o=0;o<n;o++){var a=e[o],s=a.paths,l=s.length,u=a.interiorsIndex,c=a.outlinesIndex,h=Math.min(u,c,l),p=void 0,f=void 0;for(f=0;f<h;f++)p=[s[f].map(this._pointToArray,this)],r.push(p);if(1===h)for(h=Math.min(c,l),f=u;f<h;f++)p.push(s[f].map(this._pointToArray,this))}return i}},{key:"_getGeoJsonMultiLineString",value:function(t,e){for(var n=1<arguments.length&&void 0!==e&&e,r={coordinates:[],type:"MultiLineString"},i=t.geometries,o=0;o<i.length;o++)for(var a=i[o],s=n?a.outlinesIndex:0,l=n?a.paths.length:Math.min(a.interiorsIndex,a.outlinesIndex,a.paths.length),u=s;u<l;u++){var c=a.paths[u].map(this._pointToArray,this);r.coordinates.push(c)}return r}},{key:"_getGeoJsonGeometry",value:function(t,e){var n=1===e?this._getGeoJsonMultiPolygon(t):this._getGeoJsonMultiLineString(t,3===e);return n.coordinates.length?n:null}},{key:"_load",value:function(t){var e=this;return new Promise((function(n,r){var i=ui.postMessage(e.target_name+".requestMarkerTile",t.coords).then(e._prepareTileData.bind(e,t)),o=new Promise((function(n,r){ui.postMessage(e.target_name+".requestSpatialTile",t.coords).then((function(r){for(var i=[],o=[],a=[],s=0;s<r.length;s++){var l,u=r[s],c=void 0,h=u.isClosed?(c=o,1):(c=i,2),p=e._getGeoJsonGeometry(u,h);p&&(l={id:u.id,type:"Feature",properties:{height:0,style:u.style},geometry:p},2===h&&(l.properties.effectiveZIdx=i.length),c.push(l));var f=e._getGeoJsonGeometry(u,3);f&&a.push({id:u.id,type:"Feature",properties:{height:0,style:u.style,effectiveZIdx:a.length},geometry:f})}t.source_data.layers.polylines={type:"FeatureCollection",features:i},t.source_data.layers.polygons={type:"FeatureCollection",features:o},t.source_data.layers.outlines={type:"FeatureCollection",features:a},n(t)}))}));Promise.all([i,o]).then((function(r){e._postProcessTile(t),n(t)}))}))}},{key:"_prepareTileData",value:function(t,e){var n=Qr.wrapTile(t.coords,{x:!0,y:!0}),r=Qr.metersForTile(n);t.source_data.layers={markers:{features:e,type:"FeatureCollection"}};var i={coords:n,min:r},o=t.source_data,a=jl("binary-tree"),s={};for(var l in o.layers)for(var u=o.layers[l].features.length,c=0;c<u;c++){var h=o.layers[l].features[c],p=h.properties.icon;s[p.id]||(a.addItem({width:p.size.w,height:p.size.h,meta:{objectId:h.id,id:p.id}}),s[p.id]=!0),Qr.transformGeometry(h.geometry,(function(t){var e=t[0];t[0]=t[1],t[1]=e}))}return t.rasters=a.export(),Di.projectData(t.source_data),Di.scaleData(t.source_data,i),t}}]),e}();Di.register(Ul,"ObjectTileSource");var ql=function(){xr(e,xa);var t=Ir(e);function e(n,r){var i;return mr(this,e),(i=t.call(this,n,r)).uid_=n.uid,i}return _r(e,[{key:"initialize",value:function(t,e){this.provider=t,this._on_update=e,this._onProviderUpdate=this._onProviderUpdate.bind(this),t.addEventListener("update",this._onProviderUpdate)}},{key:"_onProviderUpdate",value:function(){this._on_update(this.name)}},{key:"tileTexture",value:function(t){return Object.assign(Or(kr(e.prototype),"tileTexture",this).call(this,t),{uid:this.uid_,url:this.uid_+"_"+t.coords.key,coords:t.coords})}},{key:"dispose",value:function(){this.provider.removeEventListener("update",this._onProviderUpdate)}}]),e}();function Vl(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||24<e.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=Sa(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=Ga(r,e)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Zl(t,e,n){return 32*((1<<t)*n+e)+t}Pi.register(ql,"RemoteRasterTileSource"),Vl.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Vl.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],l=this.options,u=l.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c,h,p,f,d,y,g,v,m,b,_,w=1<<e,x=Zl(e,n,r),k=this.tiles[x];if(k||(1<u&&console.time("creation"),k=this.tiles[x]=Za(t,e,n,r,l),this.tileCoords.push({z:e,x:n,y:r}),u&&(1<u&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,k.numFeatures,k.numPoints,k.numSimplified),console.timeEnd("creation")),c="z"+e,this.stats[c]=(this.stats[c]||0)+1,this.total++)),k.source=t,i){if(e===l.maxZoom||e===i)continue;var E=1<<i-e;if(n!==Math.floor(o/E)||r!==Math.floor(a/E))continue}else if(e===l.indexMaxZoom||k.numPoints<=l.indexMaxPoints)continue;k.source=null,0!==t.length&&(1<u&&console.time("clipping"),p=.5-(h=.5*l.buffer/l.extent),d=1+h,m=y=g=v=null,b=Ra(t,w,n-h,n+(f=.5+h),0,k.minX,k.maxX,l),_=Ra(t,w,n+p,n+d,0,k.minX,k.maxX,l),t=null,b&&(m=Ra(b,w,r-h,r+f,1,k.minY,k.maxY,l),y=Ra(b,w,r+p,r+d,1,k.minY,k.maxY,l),b=null),_&&(g=Ra(_,w,r-h,r+f,1,k.minY,k.maxY,l),v=Ra(_,w,r+p,r+d,1,k.minY,k.maxY,l),_=null),1<u&&console.timeEnd("clipping"),s.push(m||[],e+1,2*n,2*r),s.push(y||[],e+1,2*n,2*r+1),s.push(g||[],e+1,2*n+1,2*r),s.push(v||[],e+1,2*n+1,2*r+1))}},Vl.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||24<t)return null;var a=1<<t,s=Zl(t,e=(e%a+a)%a,n);if(this.tiles[s])return qa(this.tiles[s],i);1<o&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,u=t,c=e,h=n;!l&&0<u;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[Zl(u,c,h)];return l&&l.source?(1<o&&console.log("found parent tile z%d-%d-%d",u,c,h),1<o&&console.time("drilling down"),this.splitTile(l.source,u,c,h,t,e,n),1<o&&console.timeEnd("drilling down"),this.tiles[s]?qa(this.tiles[s],i):null):null};var Wl={type:"FeatureCollection",features:[]},Yl=function(){xr(e,Di);var t=Ir(e);function e(n,r){return mr(this,e),n.tiled=!0,n.url="",t.call(this,n,r)}return _r(e,[{key:"fetchTile",value:function(t,e,n){return this.provider?this.provider.requestTileAsPromise(t,e,n).then((function(t){return t.data})):Promise.resolve(Wl)}},{key:"_load",value:function(t){var e=this,n=Qr.wrapTile(t.coords,{x:!0,y:!0}),r={indexMaxZoom:0,maxZoom:this.max_zoom,tolerance:1.5,extent:Qr.tile_scale};return ui.postMessage(this.target_name+".fetchTile",n.x,n.y,n.z).then((function(i){for(var o in t.source_data.layers="FeatureCollection"===i.type?{_default:i}:i,t.source_data.layers){var a=new Vl(t.source_data.layers[o],r).getTile(n.z,n.x,n.y);t.source_data.layers[o]=ao(a)}return e._postProcessTile(t),t}))}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),e}();Pi.register(Yl,"GeoJSONTileSource");var Kl,Xl={layers:{_default:{type:"FeatureCollection",features:[{type:"Point",geometry:{}}]}}},Jl=function(){xr(e,Pi);var t=Ir(e);function e(n,r){return mr(this,e),n.max_zoom=0,t.call(this,n,r)}return _r(e,[{key:"load",value:function(t){return t.source_data="0/0/0"===t.coords.key?Xl:void 0,Promise.resolve(t)}}]),e}();Pi.register(Jl,"SkyBox");var $l,Ql=Kl={draw_label_collision_boxes:!1,draw_label_texture_boxes:!1,suppress_label_fade_in:!1,suppress_snap_animation:!1,show_hidden_labels:!1,layer_stats:!1};function tu(t,e){var n={};return e.forEach((function(e){return n[e]=t[e]})),n}var eu,nu=$l={},ru=0;$l.getContext=function(t,e){var n=!1;null==t&&((t=document.createElement("canvas")).style.position="absolute",t.style.top=0,t.style.left=0,t.style.zIndex=-1,document.body.appendChild(t),n=!0);var r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!r)throw new Error("Couldn't create WebGL context.");return r._tangram_id=ru++,n?($l.resize(r,window.innerWidth,window.innerHeight,e.device_pixel_ratio),window.addEventListener("resize",(function(){$l.resize(r,window.innerWidth,window.innerHeight,e.device_pixel_ratio)}))):$l.resize(r,parseFloat(t.style.width),parseFloat(t.style.height),e.device_pixel_ratio),r},$l.resize=function(t,e,n,r){t.canvas.style.width=e+"px",t.canvas.style.height=n+"px",t.canvas.width=Math.round(e*r),t.canvas.height=Math.round(n*r),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,t.canvas.width,t.canvas.height)};var iu=eu={};eu.BYTE=5120,eu.UNSIGNED_BYTE=5121,eu.SHORT=5122,eu.UNSIGNED_SHORT=5123,eu.INT=5124,eu.UNSIGNED_INT=5125,eu.FLOAT=5126;var ou,au=Math.pow(2,16)-1,su=1024,lu=!1,uu=function(){function t(e){mr(this,t),this.size_=e||su,this.position_=0,this.ArrayType_=Uint16Array,this.buffer_=new this.ArrayType_(this.size_),this.overflows_=!1}return _r(t,[{key:"push",value:function(t){if(!this.overflows_||lu){if(au<t){if(this.overflows_=!0,!lu)return;this.ArrayType_===Uint16Array&&(this.ArrayType_=Uint32Array,this.buffer_=new this.ArrayType_(this.buffer_))}this.position_===this.size_&&this.expand_(),this.buffer_[this.position_]=t,this.position_+=1}}},{key:"end",value:function(){if(0===this.position_)return!1;var t=this.buffer_,e=this.position_;return this.buffer_=new this.ArrayType_(this.size_),this.position_=0,this.overflows_=!1,t.subarray(0,e)}},{key:"expand_",value:function(){this.size_=this.size_<<1;var t=new this.ArrayType_(this.size_);t.set(this.buffer_),this.buffer_=t}}]),t}();uu.setElementIndexUint=function(t){lu=t};var cu=(wr(ou={},iu.FLOAT,Float32Array),wr(ou,iu.BYTE,Int8Array),wr(ou,iu.UNSIGNED_BYTE,Uint8Array),wr(ou,iu.INT,Int32Array),wr(ou,iu.UNSIGNED_INT,Uint32Array),wr(ou,iu.SHORT,Int16Array),wr(ou,iu.UNSIGNED_SHORT,Uint16Array),ou),hu=function(){function t(e){var n=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).prealloc,r=void 0===n?500:n;mr(this,t),this.vertex_layout=e,this.vertex_elements=new uu,this.stride=this.vertex_layout.stride,0<t.array_pool.length?(this.vertex_buffer=t.array_pool.pop(),this.byte_length=this.vertex_buffer.byteLength,this.size=Math.floor(this.byte_length/this.stride),ki("trace","VertexData: reused buffer of bytes ".concat(this.byte_length,", ").concat(this.size," vertices"))):(this.size=r,this.byte_length=this.stride*this.size,this.vertex_buffer=new Uint8Array(this.byte_length)),this.offset=0,this.vertex_count=0,this.realloc_count=0,this.setBufferViews(),this.setAddVertexFunction()}return _r(t,[{key:"setBufferViews",value:function(){var t=this;this.views={},this.views[iu.UNSIGNED_BYTE]=this.vertex_buffer,this.vertex_layout.dynamic_attribs.forEach((function(e){var n;null==t.views[e.type]&&(n=cu[e.type],t.views[e.type]=new n(t.vertex_buffer.buffer))}))}},{key:"checkBufferSize",value:function(){var e;this.offset+this.stride>this.byte_length&&(this.size=Math.floor(1.5*this.size),this.size-=this.size%4,this.byte_length=this.stride*this.size,(e=new Uint8Array(this.byte_length)).set(this.vertex_buffer),t.array_pool.push(this.vertex_buffer),this.vertex_buffer=e,this.setBufferViews(),this.realloc_count++)}},{key:"setAddVertexFunction",value:function(){this.vertexLayoutAddVertex=this.vertex_layout.getAddVertexFunction()}},{key:"addVertex",value:function(t){this.checkBufferSize(),this.vertexLayoutAddVertex(t,this.views,this.offset),this.offset+=this.stride,this.vertex_count++}},{key:"end",value:function(){return this.vertex_buffer=this.vertex_buffer.subarray(0,this.offset),this.element_buffer=this.vertex_elements.end(),ki("trace","VertexData: ".concat(this.size," vertices total, realloc count ").concat(this.realloc_count)),this}}]),t}();hu.array_pool=[];var pu=function(){function t(e){mr(this,t),this.attribs=e,this.dynamic_attribs=this.attribs.filter((function(t){return!t.static})),this.components=[],this.index={},this.offset={};for(var n=this.stride=0,r=0,i=0;i<this.attribs.length;i++){var o=this.attribs[i];if(null==o.static){o.offset=this.stride,o.byte_size=o.size;var a=0;switch(o.type){case iu.FLOAT:case iu.INT:case iu.UNSIGNED_INT:o.byte_size*=4,a=2;break;case iu.SHORT:case iu.UNSIGNED_SHORT:o.byte_size*=2,a=1}3&o.byte_size&&(o.byte_size+=4-(3&o.byte_size)),this.stride+=o.byte_size;for(var s=o.offset>>a,l=0;l<o.size;l++)this.components.push({type:o.type,shift:a,offset:s++,index:r++});this.index[o.name]=n,n+=o.size,this.offset[o.name]=o.offset}else o.static=Array.isArray(o.static)?o.static:[o.static],o.method="vertexAttrib".concat(o.static.length,"fv")}}return _r(t,[{key:"enable",value:function(e,n,r){for(var i,o,a=0;a<this.attribs.length;a++)i=this.attribs[a],-1!==(o=n.attribute(i.name).location)&&(null==i.static?(t.enabled_attribs[o]&&!r||e.enableVertexAttribArray(o),e.vertexAttribPointer(o,i.size,i.type,i.normalized,this.stride,i.offset),t.enabled_attribs[o]=n):e[i.method]instanceof Function&&(e.enableVertexAttribArray(o),e[i.method](o,i.static),e.disableVertexAttribArray(o),delete t.enabled_attribs[o]));for(o in t.enabled_attribs)this.disableUnusedAttribute(e,o,n)}},{key:"disableUnusedAttribute",value:function(e,n,r){t.enabled_attribs[n]!==r&&(e.disableVertexAttribArray(n),delete t.enabled_attribs[n])}},{key:"createVertexData",value:function(){return new hu(this)}},{key:"getAddVertexFunction",value:function(){return null==this.addVertex&&this.createAddVertexFunction(),this.addVertex}},{key:"createAddVertexFunction",value:function(){var e=Qo(JSON.stringify(this.attribs));if(null==t.add_vertex_funcs[e]){var n,r=["var t, o;"],i=Lr(this.components);i.sort((function(t,e){return t.type!==e.type?t.type-e.type:t.index-e.index}));for(var o=0;o<i.length;o++){var a=i[o];n!==a.type&&(r.push("t = vs[".concat(a.type,"];")),r.push("o = off".concat(a.shift?" >> "+a.shift:"",";")),n=a.type),r.push("t[o + ".concat(a.offset,"] = v[").concat(a.index,"];"))}r=r.join("\n");var s=new Function("v","vs","off",r);t.add_vertex_funcs[e]=s}this.addVertex=t.add_vertex_funcs[e]}}]),t}();pu.enabled_attribs={},pu.add_vertex_funcs={};var fu=[{x:0,y:0},{x:Qr.tile_scale,y:-Qr.tile_scale}],du=[0,0,1,1];function yu(t,e,n){var r=fu[0],i=fu[1];return t[0]<=r.x+n&&e[0]<=r.x+n||t[0]>=i.x-n&&e[0]>=i.x-n||t[1]>=r.y-n&&e[1]>=r.y-n||t[1]<=i.y+n&&e[1]<=i.y+n}function gu(t,e){e=e||0;var n=fu[0],r=fu[1];return t[0]<=n.x+e||t[0]>=r.x-e||t[1]>=n.y-e||t[1]<=r.y+e}var vu=mu;function mu(t,e,n){n=n||2;var r,i,o,a,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,p=bu(t,0,h,n,!0),f=[];if(!p)return f;if(c&&(p=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=bu(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(function(t){for(var e=t,n=t;e.x<n.x&&(n=e),(e=e.next)!==t;);return n}(a));for(s.sort(xu),i=0;i<s.length;i++)!function(t,e){var n;(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&a<s){if((a=s)===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var l,u=n,c=n.x,h=n.y,p=1/0;for(r=n.next;r!==u;)i>=r.x&&r.x>=c&&Eu(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(i-r.x))<p||l===p&&r.x>n.x)&&Mu(r,t)&&(n=r,p=l),r=r.next;return n}(t,e))&&_u(n=Iu(e,t),n.next)}(s[i],n),n=_u(n,n.next);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<h;d+=n)(s=t[d])<r&&(r=s),(l=t[d+1])<i&&(i=l),o<s&&(o=s),a<l&&(a=l);u=Math.max(o-r,a-i)}return wu(p,f,n,r,i,u),f}function bu(t,e,n,r,i){var o,a;if(i===0<Pu(t,e,n,r))for(o=e;o<n;o+=r)a=Ou(o,t[o],t[o+1],a);else for(o=n-r;e<=o;o-=r)a=Ou(o,t[o],t[o+1],a);return a&&Au(a,a.next)&&(Cu(a),a=a.next),a}function _u(t,e){if(!t)return t;e=e||t;var n,r=t;do{if(n=!1,r.steiner||!Au(r,r.next)&&0!==Tu(r.prev,r,r.next))r=r.next;else{if(Cu(r),(r=e=r.prev)===r.next)return null;n=!0}}while(n||r!==e);return e}function wu(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){for(var i=t;null===i.z&&(i.z=ku(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,(i=i.next)!==t;);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,l,u=1;do{for(n=t,o=t=null,a=0;n;){for(a++,r=n,e=s=0;e<u&&(s++,r=r.nextZ);e++);for(l=u;0<s||0<l&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(n=(i=n).nextZ,s--):(r=(i=r).nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(1<a)}(i)}(t,r,i,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?function(t,e,n,r){var i=t.prev,o=t,a=t.next;if(0<=Tu(i,o,a))return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=ku(s,l,e,n,r),p=ku(u,c,e,n,r),f=t.nextZ;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&Eu(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&0<=Tu(f.prev,f,f.next))return!1;f=f.nextZ}for(f=t.prevZ;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&Eu(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&0<=Tu(f.prev,f,f.next))return!1;f=f.prevZ}return!0}(t,r,i,o):function(t){var e=t.prev,n=t,r=t.next;if(0<=Tu(e,n,r))return!1;for(var i=t.next.next;i!==t.prev;){if(Eu(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&0<=Tu(i.prev,i,i.next))return!1;i=i.next}return!0}(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),Cu(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?wu(t=function(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Au(i,o)&&Su(i,r,r.next,o)&&Mu(i,o)&&Mu(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Cu(r),Cu(r.next),r=t=o),r=r.next}while(r!==t);return r}(t,e,n),e,n,r,i,o,2):2===a&&function(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Su(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Mu(t,e)&&Mu(e,t)&&function(t,e){for(var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;n.y>o!=n.next.y>o&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),(n=n.next)!==t;);return r}(t,e)}(a,s)){var l=Iu(a,s);return a=_u(a,a.next),l=_u(l,l.next),wu(a,e,n,r,i,o),wu(l,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}(t,e,n,r,i,o):wu(_u(t),e,n,r,i,o,1);break}}}function xu(t,e){return t.x-e.x}function ku(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)/i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)/i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Eu(t,e,n,r,i,o,a,s){return 0<=(i-a)*(e-s)-(t-a)*(o-s)&&0<=(t-a)*(r-s)-(n-a)*(e-s)&&0<=(n-a)*(o-s)-(i-a)*(r-s)}function Tu(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Au(t,e){return t.x===e.x&&t.y===e.y}function Su(t,e,n,r){return Au(t,e)&&Au(n,r)||Au(t,r)&&Au(n,e)||0<Tu(t,e,n)!=0<Tu(t,e,r)&&0<Tu(n,r,t)!=0<Tu(n,r,e)}function Mu(t,e){return Tu(t.prev,t,t.next)<0?0<=Tu(t,e,t.next)&&0<=Tu(t,t.prev,e):Tu(t,e,t.prev)<0||Tu(t,t.next,e)<0}function Iu(t,e){var n=new Lu(t.i,t.x,t.y),r=new Lu(e.i,e.x,e.y),i=t.next,o=e.prev;return(t.next=e).prev=t,(n.next=i).prev=n,(r.next=n).prev=r,(o.next=r).prev=o,r}function Ou(t,e,n,r){var i=new Lu(t,e,n);return r?(i.next=r.next,(i.prev=r).next.prev=i,r.next=i):(i.prev=i).next=i,i}function Cu(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Lu(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Pu(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}mu.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(Pu(t,0,o,n));if(i)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;a-=Math.abs(Pu(t,u,c,n))}var h=0;for(s=0;s<r.length;s+=3){var p=r[s]*n,f=r[s+1]*n,d=r[s+2]*n;h+=Math.abs((t[p]-t[d])*(t[1+f]-t[1+p])-(t[p]-t[f])*(t[1+d]-t[1+p]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},mu.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);0<i&&(r+=t[i-1].length,n.holes.push(r))}return n};var Ru=[0,0,1];function Nu(t,e,n,r){var i,o,a,s,l,u=r.texcoord_index,c=r.texcoord_scale,h=r.texcoord_normalize,p=e.vertex_elements;u&&(h=h||1,o=(i=Cr(c||du,4))[0],a=i[1],s=i[2],l=i[3]);for(var f,d=0,y=t.length,g=0;g<y;g++){var v,m,b,_,w,x=e.vertex_count,k=t[g];u&&(m=(v=Cr(Qr.findBoundingBox(k),4))[0],b=v[1],_=(s-o)/(v[2]-m),w=(l-a)/(v[3]-b));for(var E=0;E<k.length;E++)for(var T=k[E],A=0;A<T.length;A++){var S=T[A];n[0]=S[0],n[1]=S[1],u&&(n[u+0]=((S[0]-m)*_+o)*h,n[u+1]=((S[1]-b)*w+a)*h),e.addVertex(n)}for(var M=(f=vu.flatten(k),vu(f.vertices,f.holes,f.dimensions)),I=0;I<M.length;I++)p.push(x+M[I]);d+=M.length/3}return d}var ju="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;attribute vec4 a_position;attribute vec4 a_color;\n#ifdef TANGRAM_NORMAL_ATTRIBUTE\nattribute vec3 a_normal;\n#define TANGRAM_NORMAL a_normal\n#else\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nattribute vec2 a_extrude;attribute vec2 a_offset;attribute vec2 a_scaling;uniform float u_v_scale_adjust;\n#endif\nvarying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nattribute vec2 a_texcoord;varying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvoid main(){\n#pragma tangram: setup\n#ifdef TANGRAM_TEXTURE_COORDS\nv_texcoord=a_texcoord;\n#ifdef TANGRAM_EXTRUDE_LINES\nv_texcoord.y*=u_v_scale_adjust;\n#endif\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nvec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.);\n#ifdef TANGRAM_EXTRUDE_LINES\nvec2 extrude=a_extrude.xy;vec2 offset=a_offset.xy;float dz=clamp(u_map_position.z-u_tile_origin.z,0.,4.);dz+=step(1.,dz)*(1.-dz)+mix(0.,2.,clamp((dz-2.)/2.,0.,1.));float mdz=(dz-0.5)*2.;extrude-=extrude*UNPACK_SCALING(a_scaling.x)*mdz;float dwdz=UNPACK_SCALING(a_scaling.y);float sdwdz=sign(step(0.,dwdz)-0.5);offset-=offset*abs(dwdz)*((1.-step(0.,sdwdz))-(dz*-sdwdz));float ssz=exp2(-dz-(u_tile_origin.z-u_tile_origin.w));extrude*=ssz;offset*=ssz;\n#ifdef TANGRAM_BLOCK_WIDTH\nfloat width=1.;\n#pragma tangram: width\nextrude*=width;\n#endif\nposition.xy+=extrude+offset;\n#endif\nv_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);v_color=a_color;\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#if defined(SNAP_TO_PIXEL_GRID)\nsnapToPixelGrid(position);\n#endif\ngl_Position=position;}",Du="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_EXTRUDE_LINES\nuniform bool u_has_line_texture;uniform sampler2D u_texture;uniform float u_texture_ratio;uniform vec4 u_dash_background_color;\n#endif\n#define TANGRAM_NORMAL v_normal\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nvarying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#pragma tangram: utils\nvoid main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_COLOR\ncolor*=sampleRaster();\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nif(u_has_line_texture){vec2 _line_st=vec2(v_texcoord.x,fract(v_texcoord.y/u_texture_ratio));vec4 _line_color=texture2D(u_texture,_line_st);if(_line_color.a<TANGRAM_ALPHA_TEST){\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY)\nif(u_dash_background_color.a==0.){discard;}color=u_dash_background_color;\n#else\ncolor=vec4(u_dash_background_color.rgb,color.a*step(TANGRAM_EPSILON,u_dash_background_color.a));\n#endif\n}else{color*=_line_color;}}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_NORMAL\nnormal=normalize(sampleRaster().rgb*2.-1.);\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\ngl_FragColor=color;}",zu=Object.create(va);Object.assign(zu,{name:"polygons",built_in:!0,vertex_shader_src:ju,fragment_shader_src:Du,selection:!0,init:function(){va.init.apply(this,arguments),this.defines.TANGRAM_NORMAL_ATTRIBUTE=!0,this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.texcoords&&(this.defines.TANGRAM_TEXTURE_COORDS=!0)},vertexLayoutForMeshVariant:function(){var t;return this.vertex_layout||(t=[{name:"a_position",size:4,type:iu.SHORT,normalized:!1},{name:"a_normal",size:3,type:iu.BYTE,normalized:!0},{name:"a_color",size:4,type:iu.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:iu.UNSIGNED_BYTE,normalized:!0}],this.texcoords&&t.push({name:"a_texcoord",size:2,type:iu.UNSIGNED_SHORT,normalized:!0}),this.vertex_layout=new pu(t)),this.vertex_layout},_parseFeature:function(t,e,n){var r=this.feature_style;return r.color=this.parseColor(e.color,n),r.color?(r.z=e.z&&go.evalCachedDistanceProperty(e.z,n)||go.defaults.z,r.z*=Qr.height_scale,r.extrude=go.evalProperty(e.extrude,n),r.extrude&&(!0===r.extrude?(r.height=void 0!==t.properties.height?t.properties.height:go.defaults.height,r.min_height=void 0!==t.properties.min_height?t.properties.min_height:go.defaults.min_height):"number"==typeof r.extrude?(r.height=r.extrude,r.min_height=0):Array.isArray(r.extrude)&&(r.min_height=r.extrude[0],r.height=r.extrude[1]),r.height*=Qr.height_scale,r.min_height*=Qr.height_scale),r.tile_edges=e.tile_edges,r):null},_preprocess:function(t){return t.color=go.createColorPropertyCache(t.color),t.z=go.createPropertyCache(t.z,go.parseUnits),t},makeVertexTemplate:function(t){var e=0;return this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=t.z||0,this.vertex_template[e++]=this.scaleOrder(t.order),this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=127,this.vertex_template[e++]=255*t.color[0],this.vertex_template[e++]=255*t.color[1],this.vertex_template[e++]=255*t.color[2],this.vertex_template[e++]=255*t.color[3],this.selection&&(this.vertex_template[e++]=255*t.selection_color[0],this.vertex_template[e++]=255*t.selection_color[1],this.vertex_template[e++]=255*t.selection_color[2],this.vertex_template[e++]=255*t.selection_color[3]),this.texcoords&&(this.vertex_template[e++]=0,this.vertex_template[e++]=0),this.vertex_template},buildPolygons:function(t,e,n,r){var i=this.makeVertexTemplate(e),o={texcoord_index:this.vertex_layout.index.a_texcoord,texcoord_normalize:65535,remove_tile_edges:!e.tile_edges,tile_edge_tolerance:Qr.tile_scale*r.tile.pad_scale*4,winding:r.winding};return e.extrude&&e.height?function(t,e,n,r,i,o,a,s,l){var u=l.remove_tile_edges,c=l.tile_edge_tolerance,h=l.texcoord_index,p=l.texcoord_scale,f=l.texcoord_normalize,d=l.winding,y=e+(r||0),g=e+n;o[2]=g;var v,m,b,_,w,x,k=Nu(t,i,o,{texcoord_index:h,texcoord_scale:p,texcoord_normalize:f}),E=i.vertex_elements,T=i.vertex_count;h&&(f=f||1,m=(v=Cr(p||du,4))[0],b=v[1],_=v[2],x=[[m,w=v[3]],[m,b],[_,b],[_,w]]);for(var A=t.length,S=0;S<A;S++)for(var M=t[S],I=0;I<M.length;I++)for(var O=M[I],C=0;C<O.length-1;C++)if(!u||!yu(O[C],O[C+1],c)){var L,P=void 0,R=[[O[L="CCW"===d?(P=C)+1:(P=C+1,C)][0],O[L][1],g],[O[L][0],O[L][1],y],[O[P][0],O[P][1],y],[O[P][0],O[P][1],g]],N=ua.normalize([O[L][0]-O[P][0],O[L][1]-O[P][1],0]),j=ua.cross(Ru,N);o[a+0]=127*j[0],o[a+1]=127*j[1],o[a+2]=127*j[2];for(var D=0;D<R.length;D++)o[0]=R[D][0],o[1]=R[D][1],o[2]=R[D][2],h&&(o[h+0]=x[D][0]*f,o[h+1]=x[D][1]*f),i.addVertex(o);E.push(T+0),E.push(T+1),E.push(T+2),E.push(T+2),E.push(T+3),E.push(T+0),T+=4,k+=2}return k}(t,e.z,e.height,e.min_height,n.vertex_data,i,this.vertex_layout.index.a_normal,0,o):Nu(t,n.vertex_data,i,o)}});var Fu=[0,0],Bu={butt:0,square:1,round:2},Gu={miter:0,bevel:1,round:2},Hu={MITER_LIMIT:3,TEXCOORD_NORMALIZE:1,TEXCOORD_RATIO:1,MIN_FAN_WIDTH:5},Uu=Qr.tile_scale,qu=[0,0],Vu=[1,0],Zu=[.5,0];function Wu(t,e){if(!(t.length<2)){var n,r,i=e.join_type,o=e.cap_type,a=e.closed_polygon,s=e.remove_tile_edges,l=e.tile_edge_tolerance,u=e.v_scale,c=e.miter_len_sq,h=e.crop_by_tile,p=null!=e.texcoord_index,f=0;if(a&&i===Gu.miter){var d=function(t){if(gu(t[0]))return 0;for(var e=0;e<t.length;e++)if(gu(t[t.length-1-e]))return t.length-1-e;return 0}(t);if(0!==d){var y=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=(r+e)%t.length;0!=i&&n.push(t[i])}return n.push(n[0]),n}(t,d);return e.extra_lines=e.extra_lines||[],void e.extra_lines.push(y)}}var g=0,v=t.length-1,m=0;for(k=t[g],E=t[g+1];ua.isEqual(k,E);)if(k=E,E=t[1+ ++g],m++,g===t.length-1)return;for(;ua.isEqual(t[v],t[v-1]);)if(m++,0===--v)return;if(!(t.length<2+m))if(r=ua.normalize(ua.perp(k,E)),s&&yu(k,E,l)){var b=Yu(t,g,l);b&&(e.extra_lines=e.extra_lines||[],e.extra_lines.push(b))}else{a?function(t,e,n,r,i){void 0===r||gu(t)&&!i.crop_by_tile?(Qu(t,n,n,1,0,i,1),Qu(t,n,n,0,0,i,-1)):r===Gu.miter?Xu(0,t,e,n,i.miter_len_sq,!0,i):Ju(r,0,t,e,n,!0,i)}(k,n=ua.normalize(ua.perp(t[v-1],k)),r,i,e):(!h&&gu(k)||(nc(k,f,r,o,!0,e),p&&o!==Bu.butt&&(f+=.5*u*e.texcoord_width)),Qu(k,r,r,1,f,e,1),Qu(k,r,r,0,f,e,-1)),p&&(f+=u*ua.length(ua.sub(E,k)));for(var _=g+1;_<v;_++){var w=_,x=_+1,k=t[w],E=t[x];if(!ua.isEqual(k,E)){if(s&&yu(k,E,l)){Qu(k,r,r,1,f,e,1),Qu(k,r,r,0,f,e,-1),$u(1,e);var T=Yu(t,w+1,l);return void(T&&(e.extra_lines=e.extra_lines||[],e.extra_lines.push(T)))}n=r,r=ua.normalize(ua.perp(k,E)),i===Gu.miter?Xu(f,k,n,r,c,!1,e):Ju(i,f,k,n,r,!1,e),p&&(f+=u*ua.length(ua.sub(E,k)))}}k=E,n=r,a?function(t,e,n,r,i,o){var a;gu(t)&&!o.crop_by_tile?(Qu(t,e,e,1,i,o,1),Qu(t,e,e,0,i,o,-1)):(a=Ku(e,n),r===Gu.miter&&ua.lengthSq(a)>o.miter_len_sq&&(r=Gu.bevel),r===Gu.miter?(Qu(t,a,e,1,i,o,1),Qu(t,a,e,0,i,o,-1)):(Qu(t,e,e,1,i,o,1),Qu(t,e,e,0,i,o,-1))),$u(1,o)}(k,n,r=ua.normalize(ua.perp(k,t[1])),i,f,e):(Qu(k,n,r,1,f,e,1),Qu(k,n,r,0,f,e,-1),$u(1,e),!h&&gu(k)||nc(k,f,n,o,!1,e))}}}function Yu(t,e,n){for(var r=e;t[r+1]&&yu(t[r],t[r+1],n);)r++;return 2<=t.length-r&&t.slice(r)}function Ku(t,e){var n=ua.normalize(ua.add(t,e)),r=2/(1+Math.abs(ua.dot(t,n)));return ua.mult(n,r*r)}function Xu(t,e,n,r,i,o,a){var s=Ku(n,r);ua.lengthSq(s)>i?Ju(Gu.bevel,t,e,n,r,o,a):(Qu(e,s,s,1,t,a,1),Qu(e,s,s,0,t,a,-1),o||$u(1,a))}function Ju(t,e,n,r,i,o,a){var s=Ku(r,i),l=0<i[0]*r[1]-i[1]*r[0];null!=a.texcoord_index&&(qu[1]=e,Vu[1]=e),l?(Qu(n,s,s,1,e,a,1),Qu(n,r,s,0,e,a,-1),o||$u(1,a),ec(n,ua.neg(r),s,ua.neg(i),s,qu,Vu,qu,!1,t===Gu.bevel,a),Qu(n,s,s,1,e,a,1),Qu(n,i,s,0,e,a,-1)):(Qu(n,r,s,1,e,a,1),Qu(n,s,s,0,e,a,-1),o||$u(1,a),ec(n,r,ua.neg(s),i,s,Vu,qu,Vu,!1,t===Gu.bevel,a),Qu(n,i,s,1,e,a,1),Qu(n,s,s,0,e,a,-1))}function $u(t,e){for(var n=e.vertex_data.vertex_elements,r=e.vertex_data.vertex_count-2*t-2,i=0;i<t;i++)n.push(r+2*i+2),n.push(r+2*i+1),n.push(r+2*i),n.push(r+2*i+2),n.push(r+2*i+3),n.push(r+2*i+1),e.geom_count+=2}function Qu(t,e,n,r,i,o,a){var s=o.vertex_template,l=o.vertex_data;s[0]=t[0],s[1]=t[1];var u=o.half_width*a;s[o.extrude_index+0]=e[0]*u,s[o.extrude_index+1]=e[1]*u,o.offset&&(s[o.offset_index+0]=n[0]*o.offset,s[o.offset_index+1]=n[1]*o.offset),null!=o.texcoord_index&&(s[o.texcoord_index+0]=r*o.texcoord_normalize,s[o.texcoord_index+1]=i*o.texcoord_normalize),l.addVertex(s)}var tc=[0,0];function ec(t,e,n,r,i,o,a,s,l,u,c){for(var h=e[0]*r[1]-e[1]*r[0],p=ua.dot(e,r),f=Math.atan2(h,p);f>=Math.PI;)f-=2*Math.PI;if(u)d=1;else{var d=function(t,e){t<0&&(t=-t);var n=e>2*Hu.MIN_FAN_WIDTH?Math.log2(e/Hu.MIN_FAN_WIDTH):1;return Math.ceil(t/Math.PI*n)}(f,c.half_width);if(d<1)return}var y=c.vertex_data.vertex_count,g=c.vertex_data.vertex_elements;Qu(t,n,i,a[0],a[1],c,1),Qu(t,e,i,o[0],o[1],c,1);var v,m,b=e,_=null!=c.texcoord_index;_&&(l?v=ua.sub(o,a):(tc=ua.copy(o),m=ua.div(ua.sub(s,o),d)));for(var w,x=f/d,k=f<0?-1:1,E=0<h?(w=2,1):(w=1,2),T=0;T<d;T++)0===T&&f<0&&(b=ua.neg(b)),b=ua.rot(b,x),_&&(l?(v=ua.rot(v,x),tc[0]=v[0]+a[0],tc[1]=v[1]*c.texcoord_width*c.v_scale+a[1]):tc=ua.add(tc,m)),Qu(t,b,i,tc[0],tc[1],c,k),g.push(y+T+w),g.push(y),g.push(y+T+E)}function nc(t,e,n,r,i,o){var a,s=ua.neg(n),l=null!=o.texcoord_index;switch(r){case Bu.square:i?(a=[n[1],-n[0]],Qu(t,ua.add(n,a),n,1,e,o,1),Qu(t,ua.add(s,a),n,0,e,o,1),l&&(e+=.5*o.texcoord_width*o.v_scale),Qu(t,n,n,1,e,o,1),Qu(t,s,n,0,e,o,1)):(a=[-n[1],n[0]],Qu(t,n,n,1,e,o,1),Qu(t,s,n,0,e,o,1),l&&(e+=.5*o.texcoord_width*o.v_scale),Qu(t,ua.add(n,a),n,1,e,o,1),Qu(t,ua.add(s,a),n,0,e,o,1)),$u(1,o);break;case Bu.round:var u,c,h=qu,p=Vu,f=Zu;i?(u=n,c=s,l&&(e+=.5*o.texcoord_width*o.v_scale,h=Vu,p=qu,f=Zu)):(u=s,c=n),l&&(qu[1]=e,Vu[1]=e,Zu[1]=e),ec(t,u,Fu,c,n,h,f,p,!0,!1,o);break;case Bu.butt:return}}var rc=[255,255,255,255],ic=[0,0,0,0],oc=Object.create(va);function ac(t){var e=t.vertex_data.vertex_elements,n=t.vertex_data.vertex_count-4;e.push(2+n),e.push(1+n),e.push(n),e.push(2+n),e.push(3+n),e.push(1+n),t.geom_count+=2}oc.vertex_layouts=[[],[]],oc.dash_textures={},Object.assign(oc,{name:"lines",built_in:!0,vertex_shader_src:ju,fragment_shader_src:Du,selection:!0,init:function(){va.init.apply(this,arguments),this.styles=this.styles||{},this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_EXTRUDE_LINES=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_TEXTURE_COORDS=!0,this.outline_feature_style={},this.inline_feature_style=this.feature_style},calcDistance:function(t,e){return t&&go.evalCachedDistanceProperty(t,e)||0},calcDistanceNextZoom:function(t,e){e.zoom++;var n=this.calcDistance(t,e);return e.zoom--,n},calcWidth:function(t,e,n){var r=this.calcDistance(t.width,n);if(!(r<0)){var i,o=t.next_width?this.calcDistanceNextZoom(t.next_width,n):r/2;return!(0===r&&0===o||o<0)&&(e.width_unscaled=r,e.next_width_unscaled=o,t.next_width?(i=.5*(r+(o*=2)),e.width=i*n.units_per_meter_overzoom,e.width_scale=1-o/i):(e.width=r*n.units_per_meter_overzoom,e.width_scale=0),t.texcoords&&(t.inline_texcoord_width?e.texcoord_width=t.inline_texcoord_width:e.texcoord_width=(e.width_unscaled||e.next_width_unscaled)*n.units_per_meter_overzoom/n.tile.overzoom2),!0)}},calcOffset:function(t,e,n){var r,i;t.offset_precalc?(e.offset=t.offset_precalc,e.offset_scale=t.offset_scale_precalc):t.offset?(r=this.calcDistance(t.offset,n),t.next_offset?(i=2*this.calcDistanceNextZoom(t.next_offset,n),Math.abs(r)>=Math.abs(i)?(e.offset=r*n.units_per_meter_overzoom,e.offset_scale=0!==r?1-i/r:0):(e.offset=i*n.units_per_meter_overzoom,e.offset_scale=0!=i?-1*(1-r/i):0)):(e.offset=r*n.units_per_meter_overzoom,e.offset_scale=0)):(e.offset=0,e.offset_scale=0),go.evalProperty(t.offset_reverse,n)&&(e.offset*=-1)},_parseFeature:function(t,e,n){var r,i,o=this.feature_style;if(!1!==this.calcWidth(e,o,n)&&(this.calcOffset(e,o,n),o.color=this.parseColor(e.color,n),o.color))return o.variantKey=e.variantKey,o.z=e.z&&go.evalCachedDistanceProperty(e.z||0,n)||go.defaults.z,o.height=t.properties.height||go.defaults.height,o.extrude=go.evalProperty(e.extrude,n),o.extrude&&("number"==typeof o.extrude?o.height=o.extrude:Array.isArray(o.extrude)&&(o.height=o.extrude[1])),o.extrude&&o.height&&(o.z+=o.height),o.z*=Qr.height_scale,o.height*=Qr.height_scale,o.cap=go.evalProperty(e.cap,n),o.join=go.evalProperty(e.join,n),o.miter_limit=go.evalProperty(e.miter_limit,n),o.tile_edges=e.tile_edges,o.outline=o.outline||{width:{},next_width:{},preprocessed:!0},e.outline&&!1!==e.outline.visible&&e.outline.color&&e.outline.width?(r=2*this.calcDistance(e.outline.width,n),i=2*this.calcDistanceNextZoom(e.outline.next_width,n),0==r&&0==i||r<0||i<0?(o.outline.width.value=null,o.outline.next_width.value=null,o.outline.color=null,o.outline.inline_texcoord_width=null,o.outline.texcoords=!1):(o.outline.width.value=r+o.width_unscaled,o.outline.next_width.value=i+o.next_width_unscaled,o.outline.inline_texcoord_width=o.texcoord_width,o.outline.offset_precalc=o.offset,o.outline.offset_scale_precalc=o.offset_scale,o.outline.color=e.outline.color,o.outline.cap=e.outline.cap,o.outline.join=e.outline.join,o.outline.miter_limit=e.outline.miter_limit,o.outline.texcoords=e.outline.texcoords,o.outline.style=e.outline.style,o.outline.variantKey=e.outline.variantKey,e.outline.order?o.outline.order=this.parseOrder(e.outline.order,n):o.outline.order=o.order,o.outline.order>o.order&&(o.outline.order=o.order),o.outline.order-=.5,o.outline.variant_order=0)):(o.outline.width.value=null,o.outline.next_width.value=null,o.outline.color=null,o.outline.inline_texcoord_width=null),o},_preprocess:function(t,e){var n,r=this.sources[e]?this.sources[e].config.uid:"";return t.color=go.createColorPropertyCache(t.color),t.width=go.createPropertyCache(t.width,go.parseUnits),t.width&&t.width.type!==go.CACHE_TYPE.STATIC&&(t.next_width=go.createPropertyCache(t.width,go.parseUnits)),t.offset=t.offset&&go.createPropertyCache(t.offset,go.parseUnits),t.offset&&t.offset.type!==go.CACHE_TYPE.STATIC&&(t.next_offset=go.createPropertyCache(t.offset,go.parseUnits)),t.z=go.createPropertyCache(t.z,go.parseUnits),t.dash=void 0!==t.dash?t.dash:this.dash,t.dash_key=t.dash&&this.dashTextureKey(t.dash,r),t.dash_background_color=void 0!==t.dash_background_color?t.dash_background_color:this.dash_background_color,t.dash_background_color=t.dash_background_color&&go.parseColor(t.dash_background_color),t.texture_merged=t.dash_key||(void 0!==t.texture?t.texture:this.texture),t.texcoords=this.texcoords||t.texture_merged?1:0,this.addMeshVariantForDraw(this.base,t),t.outline&&(t.outline.style=t.outline.style||this.name,t.outline.color=go.createColorPropertyCache(t.outline.color),t.outline.width=go.createPropertyCache(t.outline.width,go.parseUnits),t.outline.next_width=go.createPropertyCache(t.outline.width,go.parseUnits),t.outline.cap=t.outline.cap||t.cap,t.outline.join=t.outline.join||t.join,t.outline.miter_limit=t.outline.miter_limit||t.miter_limit,t.outline.offset=t.offset,(n=this.styles[t.outline.style])?(t.outline.dash=void 0!==t.outline.dash?t.outline.dash:n.dash,t.outline.texture=void 0!==t.outline.texture?t.outline.texture:n.texture,null!=t.outline.dash?(t.outline.dash_key=t.outline.dash&&this.dashTextureKey(t.outline.dash,r),t.outline.texture_merged=t.outline.dash_key):null===t.outline.dash||null!=t.outline.texture?(t.outline.dash_key=null,t.outline.texture_merged=t.outline.texture):(t.outline.dash=t.dash,t.outline.dash_key=t.outline.dash&&this.dashTextureKey(t.outline.dash,r),t.outline.texture_merged=t.outline.dash_key),t.outline.dash_background_color=void 0!==t.outline.dash_background_color?t.outline.dash_background_color:n.dash_background_color,t.outline.dash_background_color=void 0!==t.outline.dash_background_color?t.outline.dash_background_color:t.dash_background_color,t.outline.dash_background_color=t.outline.dash_background_color&&go.parseColor(t.outline.dash_background_color),t.outline.texcoords=n.texcoords||t.outline.texture_merged?1:0,this.addMeshVariantForDraw(this.base,t.outline)):(ki({level:"warn",once:!0},"Layer '".concat(t.layers[t.layers.length-1],"': ")+"line 'outline' specifies non-existent draw style '".concat(t.outline.style,"' (or maybe the style is ")+"defined but is missing a 'base' or has another error), skipping outlines in layer"),t.outline=null)),t},dashTextureKey:function(t,e){return"__dash_"+e+"_"+this.scene_id+"_"+JSON.stringify(t)},getDashTexture:function(t,e){var n,r=this.dashTextureKey(t,this.sources[e].config.uid);null==oc.dash_textures[r]&&(oc.dash_textures[r]=!0,n=function(t,e){var n=1<arguments.length&&void 0!==e?e:{},r=n.dash_color||rc,i=n.background_color||ic,o=t,a=n.scale||1;o.length%2==1&&Array.prototype.push.apply(o,o);for(var s=!0,l=[],u=0;u<o.length;u++){for(var c=Math.floor(o[u]*a),h=0;h<c;h++)Array.prototype.push.apply(l,s?r:i);s=!s}return{pixels:l=new Uint8Array(l),length:l.length/4}}(t,{scale:20}),this.textureManager.create(this.gl,r,{data:n.pixels,height:n.length,width:1,filtering:"nearest"}))},endData:function(t){var e=this;return va.endData.call(this,t).then((function(n){if(n){n.uniforms.u_has_line_texture=!1,n.uniforms.u_texture=e.textureManager.default,n.uniforms.u_v_scale_adjust=Qr.tile_scale;var r=[];for(var i in n.meshes)!function(i){var o,a,s=n.meshes[i].variant;s.texture&&((o=n.meshes[i].uniforms=n.meshes[i].uniforms||{}).u_has_line_texture=!0,o.u_texture=s.texture,o.u_texture_ratio=1,s.dash&&(o.u_v_scale_adjust=20*Qr.tile_scale,o.u_dash_background_color=s.dash_background_color||[0,0,0,0]),s.dash_key&&null==oc.dash_textures[s.dash_key]&&(oc.dash_textures[s.dash_key]=!0,ui.postMessage(e.main_thread_target+".getDashTexture",s.dash,t.source)),null==e.textureManager.textures[s.texture]?r.push(e.textureManager.syncTexturesToWorker([s.texture]).then((function(t){var e=t[s.texture];e&&(o.u_texture_ratio=e.height/e.width)}))):(a=e.textureManager.textures[s.texture],o.u_texture_ratio=a.height/a.width))}(i);return t.mesh_data[e.name]=n,Promise.all(r).then((function(){return n}))}return n}))},computeVariantForDraw:function(t){var e=t.offset?1:0;return t.dash_key&&(e+=t.dash_key,t.dash_background_color&&(e+=t.dash_background_color)),t.texture_merged&&(e+=t.texture_merged),e=Qo(e+="/"+t.texcoords),{key:t.variantKey=e,order:t.variant_order,offset:t.offset?1:0,texcoords:t.texcoords,texture:t.texture_merged,dash:t.dash,dash_key:t.dash_key,dash_background_color:t.dash_background_color}},vertexLayoutForMeshVariant:function(t){var e;return null==oc.vertex_layouts[t.key]&&(e=[{name:"a_position",size:4,type:iu.SHORT,normalized:!1},{name:"a_extrude",size:2,type:iu.SHORT,normalized:!1},{name:"a_offset",size:2,type:iu.SHORT,normalized:!1,static:t.offset?null:[0,0]},{name:"a_scaling",size:2,type:iu.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:iu.UNSIGNED_SHORT,normalized:!0,static:t.texcoords?null:[0,0]},{name:"a_color",size:4,type:iu.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:iu.UNSIGNED_BYTE,normalized:!0}],oc.vertex_layouts[t.key]=new pu(e)),oc.vertex_layouts[t.key]},makeVertexTemplate:function(t,e){var n=0;return this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=t.z||0,this.vertex_template[n++]=this.scaleOrder(t.order),this.vertex_template[n++]=0,this.vertex_template[n++]=0,e.variant.offset&&(this.vertex_template[n++]=0,this.vertex_template[n++]=0),this.vertex_template[n++]=1024*t.width_scale,this.vertex_template[n++]=1024*t.offset_scale,e.variant.texcoords&&(this.vertex_template[n++]=0,this.vertex_template[n++]=0),this.vertex_template[n++]=255*t.color[0],this.vertex_template[n++]=255*t.color[1],this.vertex_template[n++]=255*t.color[2],this.vertex_template[n++]=255*t.color[3],this.selection&&(this.vertex_template[n++]=255*t.selection_color[0],this.vertex_template[n++]=255*t.selection_color[1],this.vertex_template[n++]=255*t.selection_color[2],this.vertex_template[n++]=255*t.selection_color[3]),this.vertex_template},buildLines:function(t,e,n,r,i){var o;this.feature_style=this.outline_feature_style,!e.outline||null==e.outline.color||null==e.outline.width.value||(o=this.styles[e.outline.style])&&o.addFeature(r.feature,e.outline,r),this.feature_style=this.inline_feature_style;var a=n.vertex_data,s=a.vertex_layout,l=this.makeVertexTemplate(e,n);return function(t,e,n,r,i){var o,a,s=i.closed_polygon,l=i.remove_tile_edges,u=i.tile_edge_tolerance,c=i.texcoord_index,h=i.texcoord_width,p=i.texcoord_ratio,f=i.texcoord_normalize,d=i.extrude_index,y=i.offset_index,g=i.join,v=i.cap,m=i.miter_limit,b=i.offset,_=i.crop_by_tile,w=v?Bu[v]:Bu.butt,x=g?Gu[g]:Gu.miter;x===Gu.miter&&(o=(m=m||Hu.MITER_LIMIT)*m),c&&(f=f||Hu.TEXCOORD_NORMALIZE,a=1/(h*(p=p||Hu.TEXCOORD_RATIO)*Uu));for(var k={closed_polygon:s,remove_tile_edges:l,tile_edge_tolerance:u,miter_len_sq:o,join_type:x,cap_type:w,vertex_data:n,vertex_template:r,half_width:e/2,extrude_index:d,offset_index:y,v_scale:a,texcoord_index:c,texcoord_width:h,texcoord_normalize:f,offset:b,geom_count:0,crop_by_tile:_},E=0;E<t.length;E++)Wu(t[E],k);if(k.extra_lines)for(var T=0;T<k.extra_lines.length;T++)Wu(k.extra_lines[T],k);return k.geom_count}(t,e.width,a,l,{cap:e.cap,join:e.join,miter_limit:e.miter_limit,extrude_index:s.index.a_extrude,offset_index:s.index.a_offset,texcoord_index:s.index.a_texcoord,texcoord_width:e.texcoord_width,texcoord_normalize:65535,closed_polygon:i&&i.closed_polygon,remove_tile_edges:!e.tile_edges&&i&&i.remove_tile_edges,tile_edge_tolerance:Qr.tile_scale*r.tile.pad_scale*2,offset:e.offset,crop_by_tile:this.crop_by_tile})},buildPolygons:function(t,e,n,r){for(var i=0,o=0;o<t.length;o++)i+=this.buildLines(t[o],e,n,r,{closed_polygon:!0,remove_tile_edges:!this.crop_by_tile});return i}});var sc=[[1,1],[1,-1],[-1,1],[-1,-1]];function lc(t,e,n,r,i,o,a){var s,l=e.vertex_template,u=e.vertex_data;uc(e,"a_position",t),uc(e,"a_width",e.half_width),e.vertex_layout_index.a_barycentric&&((s=[0,0,0])[n%3]=1,uc(e,"a_barycentric",s)),uc(e,"a_tangents",a[0].concat(a[1])),uc(e,"a_segment",r),uc(e,"a_texcoord",sc[n%4]),uc(e,"a_length",i),uc(e,"a_closed",e.closed?1:0),uc(e,"a_angles",o),u.addVertex(l)}function uc(t,e,n){var r=n.length,i=t.vertex_template,o=t.vertex_layout_index[e],a=0;if(r)for(;a!==r;)i[o+a]=n[a],a++;else i[o+a]=n}function cc(t,e){for(var n=t.reduce((function(t,e){return t+e})),r=0,i=[],o=0,a=t.length;o<=a;o+=2){var s=Math.max(1e-4,t[o%a]),l=Math.max(1e-4,t[(o+1)%a]);i.push(r,r+s),r+=s+l}for(var u=new Uint8Array(4*e),c=0,h=0;h<e;h++)!function(t){var r=n*t/(e-1),o=function(t){for(var e=t[0],n=0,r=1,i=t.length;r<i;r++)t[r]<e&&(e=t[n=r]);return n}(i.map((function(t){return Math.abs(t-r)}))),a=void 0,s=void 0,l=o%2==0?(a=r<=i[o]?1:0,s=i[o],i[o+1]):(a=r>i[o]?2:0,s=i[o-1],i[o]);u[c++]=i[o],u[c++]=a,u[c++]=s,u[c++]=l}(h);return u}var hc=Object.create(va),pc={round:1,"arrow-tail":2,"arrow-head":3,square:4,butt:5},fc={miter:0,round:1,bevel:2},dc=pc.round,yc=fc.miter,gc=[0,0],vc="antialias join linecaps miter_limit dash_index dash dash_caps dash_phase".split(" ");Object.assign(hc,{name:"pattern-lines",built_in:!0,vertex_shader_src:"uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform sampler2D u_uniforms;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform vec3 u_map_position;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_index;uniform vec2 u_dash_caps;uniform float u_dash_phase;uniform float u_dash_period;attribute vec4 a_position;attribute vec4 a_color;attribute float a_width;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nattribute vec3 a_barycentric;\n#endif\nattribute vec2 a_normal;attribute float a_length;attribute vec2 a_segment;attribute vec2 a_texcoord;attribute vec2 a_angles;attribute vec4 a_tangents;attribute float a_closed;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#ifndef TANGRAM_HEIGHT_SCALE\nfloat TANGRAM_HEIGHT_SCALE=16.0;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\nconst float PI=3.141592653589793;const float THETA=15.0*PI/180.0;float cross(in vec2 v1,in vec2 v2){return v1.x*v2.y-v1.y*v2.x;}float signed_distance(in vec2 v1,in vec2 v2,in vec2 v3){return cross(v2-v1,v1-v3)/length(v2-v1);}void rotate(in vec2 v,in float angle,out vec2 result){float cosine=cos(angle);float sine=sin(angle);result=vec2(cosine*v.x-sine*v.y,sine*v.x+cosine*v.y);}void main(){\n#pragma tangram: setup\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nfloat linewidth=a_width*2.0;v_angles=a_angles;v_segment=a_segment;v_color=a_color;v_length=a_length;v_texcoord=a_texcoord;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nv_barycentric=a_barycentric;\n#endif\nv_color.a=min(linewidth,v_color.a);linewidth=max(linewidth,1.0);linewidth/=exp2(u_map_position.z-u_tile_origin.w);v_linewidth_and_closed=linewidth*(a_closed>0.0 ?-1.0 : 1.0);if(v_color.a<=0.0){gl_Position=vec4(0.0,0.0,0.0,1.0);return;}float width=ceil(1.25*u_antialias+linewidth)/2.0;vec2 t1=normalize(a_tangents.xy);vec2 t2=normalize(a_tangents.zw);float u=a_texcoord.x;u*=-1.0;float v=a_texcoord.y;vec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.0);if(t1!=t2){float angle=a_texcoord.x==1.0 ? a_angles.x : a_angles.y;vec2 t=normalize(t1+t2);vec2 o=vec2(+t.y,-t.x);float segmentLength=a_segment.y-a_segment.x;float magnitude=width/cos(angle/2.0);float sqMagnitude=magnitude*magnitude;float seg1SqMagnitude=dot(a_tangents.xy,a_tangents.xy);float seg2SqMagnitude=dot(a_tangents.zw,a_tangents.zw);if((abs(magnitude)>linewidth)&&(sqMagnitude>=min(seg1SqMagnitude,seg2SqMagnitude))){if(u==1.0){o=vec2(-t2.y,+t2.x);}else{o=vec2(-t1.y,+t1.x);}magnitude=width;angle=0.0;v_angles.x=0.0;v_angles.y=0.0;}if(u_dash_index>0.0){if((abs(angle)>THETA)){position.xy+=v*width*o/cos(angle/2.0);float s=sign(angle);if(angle<0.0){if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==1.0){position.xy-=2.0*width*t1/sin(angle);u-=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==1.0){position.xy+=2.0*width*t2/sin(angle);u+=2.0*width/sin(angle);}}}else{if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==-1.0){position.xy+=2.0*width*t1/sin(angle);u+=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==-1.0){position.xy-=2.0*width*t2/sin(angle);u-=2.0*width/sin(angle);}}}}else{position.xy+=v*width*o/cos(angle/2.0);if(u==+1.0){u=v_segment.y;}else{u=v_segment.x;}}}else{position.xy+=v*o*magnitude;if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);}else{u=v_segment.x-v*width*tan(angle/2.0);}}v_joinIndicator=(segmentLength+v*width*tan(angle/2.0))/segmentLength;}else{v_joinIndicator=-1.0;vec2 o=vec2(+t1.y,-t1.x);position.xy+=v*width*o;if(u==-1.0){u=v_segment.x-width;position.xy-=width*t1;}else{u=v_segment.y+width;position.xy+=width*t2;}}vec2 t;vec2 curr=a_position.xy;if(a_texcoord.x>=0.0){vec2 next=curr+t2*(v_segment.y-v_segment.x);rotate(t1,+a_angles.x/2.0,t);v_miter.x=signed_distance(curr,curr+t,position.xy);rotate(t2,+a_angles.y/2.0,t);v_miter.y=signed_distance(next,next+t,position.xy);}else{vec2 prev=curr-t1*(v_segment.y-v_segment.x);rotate(t1,-a_angles.x/2.0,t);v_miter.x=signed_distance(prev,prev+t,position.xy);rotate(t2,-a_angles.y/2.0,t);v_miter.y=signed_distance(curr,curr+t,position.xy);}v_distances=vec2(u,v*width);v_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#endif\ngl_Position=position;}",fragment_shader_src:"uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_dash_atlas;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_phase;uniform float u_dash_period;uniform float u_dash_index;uniform vec2 u_dash_caps;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL v_normal\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\n#pragma tangram: utils\nconst float PI=3.141592653589793;const float HALF_PI=PI/2.0;const float THETA=15.0*PI/180.0;/***Compute distance to cap.*@param{int}type The Type of the cap(see CAP_TYPE in pattern_lines)*@param{float}dx The distance of the pixel from the beginning of the line(not straight distance,but along the legs)*@param{float}dy The distance of the pixel from the midline(see v_distances in vertex shader,aka \xb11*half_line_width)*@param{float}aa_radius The distance from the mid-line from where antialiasing starts.*For example for a linewidth 10px width and 2px filter radius it is 10px/2-2px=3px.*@return{float}distance*/float cap(int type,float dx,float dy,float aa_radius){float dist=0.0;dx=abs(dx);dy=abs(dy);if(type==1)dist=sqrt(dx*dx+dy*dy);else if(type==3)dist=(dx+abs(dy));else if(type==2)dist=max(abs(dy),(aa_radius+dx-abs(dy)));else if(type==4)dist=max(dx,dy);else if(type==5)dist=max(dx+aa_radius,dy);return dist;}/***Compute distance to join.*@param{int}type The type of the join(see JOIN_TYPE in pattern_lines)*@param{vec2}segment Interpolated a_segment attribute from the vertex shader*@param{vec2}texcoord Pair of u/v coordinates to identify the 4 different extruded points of the segment.*@param{vec2}distances 2 component vector where:*x is the distance of the pixel from the beginning of the line(along the legs)*y is the  distance of the pixel from the midline(see v_distances in vertex shader,\xb11*half_line_width)*@param{vec2}miter Miter point coordiante*@param{float}miter_limit The miter limit*@param{float}linewidth The width of the line*@return{float}computed distance*/float join(in int type,in vec2 segment,in vec2 texcoord,in vec2 distances,in vec2 miter,in float miter_limit,in float linewidth){float dx=distances.x;float result=abs(distances.y);if((dx<segment.x)||(dx>segment.y)){if(type==1){float s=dx<segment.x ? segment.x : segment.y;result=max(result,length(distances-vec2(s,0.0)));}else{float m=abs(texcoord.x>=0.0 ? miter.x : miter.y);if(type==2){result=max(result,m);}else if(type==0){result=max(result,m-miter_limit*linewidth/2.0);}}}return result;}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\nif(v_color.a<=0.0){discard;}bool solid=(u_dash_index==0.0);bool closed=v_linewidth_and_closed<0.0;float dx=v_distances.x;float dy=v_distances.y;float linewidth=abs(v_linewidth_and_closed);float aa_radius=linewidth/2.0-u_antialias;float dist=0.0;vec2 linecaps=u_linecaps;vec2 dash_caps=u_dash_caps;float line_start=0.0;float line_stop=v_length;if(solid){dist=abs(dy);bool potentialCap=!closed&&v_joinIndicator<0.0;if(potentialCap&&dx<line_start){dist=cap(int(u_linecaps.x),abs(dx),abs(dy),aa_radius);}else if(potentialCap&&dx>line_stop){dist=cap(int(u_linecaps.y),abs(dx)-line_stop,abs(dy),aa_radius);}else{dist=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);}}else{float segment_start=v_segment.x;float segment_stop=v_segment.y;float segment_center=(segment_start+segment_stop)/2.0;float freq=u_dash_period*linewidth;float dash_phase=u_dash_phase-1e-5;float u=mod(dx+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));float dash_center=float(tex.x)*255.0*linewidth;float dash_type=floor(float(tex.y)*255.0+0.5);float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;float dash_start=dx-u+_start;float dash_stop=dx-u+_stop;if((dash_stop<segment_start)&&(dash_caps.x!=5.0)){float u=mod(segment_start+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_start-u+_start;dash_stop=segment_start-u+_stop;}else if((dash_start>segment_stop)&&(dash_caps.y!=5.0)){float u=mod(segment_stop+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_stop-u+_start;dash_stop=segment_stop-u+_stop;}bool discontinuous=((dx<segment_center)&&abs(v_angles.x)>THETA)||((dx>=segment_center)&&abs(v_angles.y)>THETA);float d_join=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);if(closed){line_start+=linewidth/2.0;line_stop-=linewidth/2.0;}if(dash_stop<=line_start){discard;}if(dash_start>=line_stop){discard;}if(discontinuous){if((dash_start>segment_stop)){discard;}if((dash_stop<segment_start)){discard;}if(dash_caps.x==1.0){if((u>_stop)&&(dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){discard;}}if(dash_caps.y==1.0){if((u<_start)&&(dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){discard;}}if((dash_caps.x!=1.0)&&(dash_caps.x!=5.0)){if((dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){float a=v_angles.x/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(segment_start-dx)*cos_a-dy*sin_a;float y=(segment_start-dx)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.x=4.0;}}if((dash_caps.y!=1.0)&&(dash_caps.y!=5.0)){if((dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){float a=v_angles.y/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(dx-segment_stop)*cos_a-dy*sin_a;float y=(dx-segment_stop)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.y=4.0;}}}if((dx<line_start)&&(dash_start<=line_start)&&(dash_stop>line_start)){dist=cap(int(linecaps.x),dx-line_start,dy,aa_radius);}else if((dx>line_stop)&&(dash_stop>line_stop)&&(dash_start<line_stop)){dist=cap(int(linecaps.y),dx-line_stop,dy,aa_radius);}else if(dash_type==1.0){dist=cap(int(dash_caps.x),abs(dash_center-u),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}else if(dash_type==0.0){dist=abs(dy);}else if(dash_type==2.0){dist=cap(int(dash_caps.y),abs(u-dash_center),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}if((dx>line_start)&&(dx<line_stop)){if((dx<=segment_start)&&(dash_start<=segment_start)&&(dash_stop>=segment_start)){dist=d_join;float angle=HALF_PI+v_angles.x;float f=abs((segment_start-dx)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if((dx>segment_stop)&&(dash_start<=segment_stop)&&(dash_stop>=segment_stop)){dist=d_join;float angle=HALF_PI+v_angles.y;float f=abs((dx-segment_stop)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}dist=dist-aa_radius;if(dist>=0.0){if(u_antialias==0.0){discard;}else{color=vec4(color.rgb,exp(-dist*dist)*color.a);}}\n#ifdef TANGRAM_DEBUG_TRIANGLES\nif(any(lessThan(v_barycentric,vec3(0.0085)))){color=vec4(0.0,1.0,0.0,1.0);}\n#endif\ngl_FragColor=color;}",selection:!0,init:function(){va.init.apply(this,arguments),this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_DEBUG_TRIANGLES=!1,this.defines.TANGRAM_DEBUG_NO_TEXTURE_FLOAT_SUPPORT=!1,this.styles=this.styles||{},hc.vertex_layouts=[]},calcDistance:function(t,e){return t&&go.evalCachedDistanceProperty(t,e)||0},calcDash:function(t,e){var n=go.evalProperty(t.dash,e),r=0;return n&&((n=Array.isArray(n)&&n.length?n:gc).length%2==1&&(n=n.concat(n)),r=+(r=n.reduce((function(t,e){return t+e})))||0),{dash:n,dash_period:r}},calcWidth:function(t,e,n){var r=this.calcDistance(t.width,n);return!(r<0)&&(e.width=r*n.units_per_meter_overzoom,!0)},getCapType:function(t,e,n){var r=go.evalProperty(t,e);return void 0!==pc[r]?pc[r]:n},_parseFeature:function(t,e,n){if(!1!==this.calcWidth(e,this.feature_style,n)){var r=this.parseColor(e.color,n);if(r&&0!==r[3]){var i=this.getCapType(e.cap,n,dc),o=go.evalProperty(e.join,n),a=+go.evalProperty(e.miter_limit,n),s=this.calcDash(e,n),l=s.dash,u=s.dash_period,c=Object.assign({color:r,antialias:e.antialias,linecaps:[this.getCapType(e.tail_cap,n,i),this.getCapType(e.head_cap,n,i)],join:void 0!==fc[o]?fc[o]:yc,miter_limit:0<=a?a:3,dash_index:0===u?0:1,dash:l,dash_caps:[this.getCapType(e.tail_cap,n,i),this.getCapType(e.head_cap,n,i)],dash_phase:+go.evalProperty(e.dash_phase,n)||0,dash_period:u},this.feature_style);return c.z=e.z&&go.evalCachedDistanceProperty(e.z||0,n)||go.defaults.z,c.z*=Qr.height_scale,c.extrude=go.evalProperty(e.extrude,n),c.extrude&&(!0===c.extrude?(c.height=void 0!==t.properties.height?t.properties.height:go.defaults.height,c.min_height=void 0!==t.properties.min_height?t.properties.min_height:go.defaults.min_height):"number"==typeof c.extrude?(c.height=c.extrude,c.min_height=0):Array.isArray(c.extrude)&&(c.min_height=c.extrude[0],c.height=c.extrude[1]),c.height*=Qr.height_scale,c.min_height*=Qr.height_scale),this.addMeshVariantForDraw(this.base,c),c}}},_preprocess:function(t){t.color=go.createColorPropertyCache(t.color),t.width=go.createPropertyCache(t.width,go.parseUnits),t.width&&t.width.type!==go.CACHE_TYPE.STATIC&&(t.next_width=go.createPropertyCache(t.width,go.parseUnits)),t.z=go.createPropertyCache(t.z,go.parseUnits);var e=+t.antialias;return t.antialias=isNaN(e)?0:e,t},buildRasterTextures:function(t,e){var n=[];for(var r in e.meshes){var i,o=this.getMeshVariantTypeForDraw({variantKey:r}),a=o.uniforms,s=o.pattern;a.u_dash_index&&(i="__dash_"+s.join("_")+"_"+t.key+"_"+t.id,n.push({name:i,data:cc(s,1024)}),a.u_dash_atlas=i,e.meshes[r].textures=[i]),e.meshes[r].uniforms=a}return e.uniforms=e.uniforms||{},n.length?ui.postMessage(this.main_thread_target+".loadTextures",n).then((function(t){return e})):Promise.resolve(e)},loadTextures:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=(i=this.textureManager.textures[r.name])||this.textureManager.create(this.gl,r.name,{filtering:"nearest",repeat:!0,width:1024,height:1,data:r.data});e.push(i.loading)}return Promise.all(e).then((function(t){return t.map((function(t){return t.retain(),t.name}))}))},computeVariantForDraw:function(t){var e=function(t){for(var e=[],n=0,r=vc.length;n<r;n++){var i=t[vc[n]];Array.isArray(i)?e.push(i.join("_")):"boolean"==typeof i?e.push(i?1:0):i&&e.push(i.toString())}return e.join("/")}(t);return{key:t.variantKey=e,order:t.variant_order,uniforms:{u_antialias:t.antialias,u_linecaps:t.linecaps,u_linejoin:t.join,u_miter_limit:t.miter_limit,u_dash_index:t.dash_index,u_dash_caps:t.dash_caps,u_dash_phase:t.dash_phase,u_dash_period:t.dash_period},pattern:t.dash}},vertexLayoutForMeshVariant:function(t){var e;return null==hc.vertex_layouts[t.key]&&(e=[{name:"a_position",size:4,type:iu.SHORT,normalized:!1},{name:"a_color",size:4,type:iu.UNSIGNED_BYTE,normalized:!0},{name:"a_width",size:1,type:iu.FLOAT,normalized:!1},{name:"a_tangents",size:4,type:iu.FLOAT,normalized:!1},{name:"a_segment",size:2,type:iu.FLOAT,normalized:!1},{name:"a_angles",size:2,type:iu.FLOAT,normalized:!1},{name:"a_texcoord",size:2,type:iu.FLOAT,normalized:!0},{name:"a_length",size:1,type:iu.FLOAT,normalized:!1},{name:"a_closed",size:1,type:iu.FLOAT,normalized:!1},{name:"a_selection_color",size:4,type:iu.UNSIGNED_BYTE,normalized:!0}],this.defines.TANGRAM_DEBUG_TRIANGLES&&e.push({name:"a_barycentric",size:3,type:iu.SHORT,normalized:!1}),hc.vertex_layouts[t.key]=new pu(e)),hc.vertex_layouts[t.key]},makeVertexTemplate:function(t){var e=0;return this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=t.z+t.height||0,this.vertex_template[e++]=this.scaleOrder(t.order),this.vertex_template[e++]=255*t.color[0],this.vertex_template[e++]=255*t.color[1],this.vertex_template[e++]=255*t.color[2],this.vertex_template[e++]=255*t.color[3],this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.selection&&(this.vertex_template[e++]=255*t.selection_color[0],this.vertex_template[e++]=255*t.selection_color[1],this.vertex_template[e++]=255*t.selection_color[2],this.vertex_template[e++]=255*t.selection_color[3]),this.defines.TANGRAM_DEBUG_TRIANGLES&&(this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0),this.vertex_template},buildLines:function(t,e,n,r,i){var o=4<arguments.length&&void 0!==i&&i,a=n.vertex_data,s=a.vertex_layout,l=this.makeVertexTemplate(e,n);return function(t,e,n,r,i,o){for(var a={closed:o,vertex_data:n,vertex_template:r,half_width:e/2,vertex_layout_index:i,geom_count:0},s=0,l=t.length;s<l;s++)!function(t,e){if(!(t.length<2)){for(var n=[t[0]],r=0,i=[],o=[],a=1,s=t.length;a<s;a++){var l,u;t[a][0]===t[a-1][0]&&t[a][1]===t[a-1][1]||(n.push(t[a]),l=ua.sub(t[a],t[a-1]),u=ua.length(l),i.push(l),o.push([r,r+u]),r+=u)}if(!(n.length<2)){var c=0,h=i[i.length-1],p=i[0],f=i[1],d=[0,0];2<n.length&&(e.closed&&(d[0]=ua.signedAngleBetween(h,p)),d[1]=ua.signedAngleBetween(p,f));var y=n[0],g=o[0];e.closed?(lc(y,e,c++,g,r,d,[h,p]),lc(y,e,c++,g,r,d,[h,p])):(lc(y,e,c++,g,r,d,[p,p]),lc(y,e,c++,g,r,d,[p,p]));for(var v=1,m=n.length-1;v<m;v++)y=n[v],h=i[v-1],p=i[v],f=i[v+1],lc(y,e,c++,g=o[v-1],r,d,[h,p]),lc(y,e,c++,g,r,d,[h,p]),ac(e),g=o[v],d[0]=d[1],d[1]=v!==m-1?ua.signedAngleBetween(p,f):e.closed?ua.signedAngleBetween(p,i[0]):0,lc(y,e,c++,g,r,d,[h,p]),lc(y,e,c++,g,r,d,[h,p]);y=n[n.length-1],g=o[o.length-1],p=i[i.length-1],e.closed?(lc(y,e,c++,g,r,d,[p,i[0]]),lc(y,e,c++,g,r,d,[p,i[0]])):(lc(y,e,c++,g,r,d,[p,p]),lc(y,e,c++,g,r,d,[p,p])),ac(e)}}}(t[s],a);return a.geom_count}(t,e.width,a,l,s.index,o)},buildPolygons:function(t,e,n,r){for(var i=0,o=0,a=t.length;o<a;o++)i+=this.buildLines(t[o],e,n,r,!0);return i}});var mc=0,bc={id_prefix:"",nextLabelId:function(){return"".concat(bc.id_prefix,"/").concat(mc++)}};function _c(t){return{priority:t.priority,collide:t.collide,repeat_distance:t.repeat_distance,repeat_group:t.repeat_group,buffer:t.buffer,italic:t.italic}}var wc=["left","top-left","bottom-left"],xc=["right","top-right","bottom-right"],kc=["top","top-left","top-right"],Ec=["bottom","bottom-left","bottom-right"],Tc={computeOffset:function(t,e,n,r){var i=3<arguments.length&&void 0!==r?r:null;if(!n||"center"===n)return t;var o=[t[0],t[1]];return i=i||this.default_buffer,this.isLeftAnchor(n)?(o[0]-=e[0]/2,"left"===n&&(o[0]-=i[0])):this.isRightAnchor(n)&&(o[0]+=e[0]/2,"right"===n&&(o[0]+=i[1])),this.isTopAnchor(n)?(o[1]-=e[1]/2,"top"===n&&(o[1]-=i[2])):this.isBottomAnchor(n)&&(o[1]+=e[1]/2,"bottom"===n&&(o[1]+=i[3])),o},alignForAnchor:function(t){if(t&&"center"!==t){if(this.isLeftAnchor(t))return"right";if(this.isRightAnchor(t))return"left"}return"center"},isLeftAnchor:function(t){return-1<wc.indexOf(t)},isRightAnchor:function(t){return-1<xc.indexOf(t)},isTopAnchor:function(t){return-1<kc.indexOf(t)},isBottomAnchor:function(t){return-1<Ec.indexOf(t)},default_buffer:[2.5,2.5,1.5,.75],zero_buffer:[0,0,0,0]};function Ac(t,e,n,r,i){var o=[],a=n-t,s=r-e,l=Jr.getLineLength(t,e,n,r),u=2*i;if((c=l/u)<=1)o.push(t+a/2,e+s/2,i);else{var c,h=u/l,p=a*h,f=s*h;(c=l/i/2)%1&&o.push(n-p/2,r-f/2,i),c|=0;for(var d=t+p/2,y=e+f/2;c--;)o.push(d,y,i),d+=p,y+=f}return o}var Sc=function(){function t(e,n,r,i){mr(this,t),this.id=bc.nextLabelId(),this.position=[e[0],e[1]],void 0!==e[2]&&this.position.push(e[2]),this.size=n,this.layout=i,this.anchor=Array.isArray(this.layout.anchor)?this.layout.anchor[0]:this.layout.anchor,this.placed=null,this.type="point",this.parent=this.layout.parent,this.offset=this.computeOffset(),this.align=this.layout.align||Tc.alignForAnchor(this.anchor),this._is_flat=r}return _r(t,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,align:this.align,sides:this.getSides(),breach:!this.inTileBounds(),layout:_c(this.layout)}}},{key:"inTileBounds",value:function(){var t=this.getAABB(),e=t.left,n=t.top,r=t.right,i=t.bottom;return Ti.pointInTile([e,n])&&Ti.pointInTile([r,i])}},{key:"isFlat",value:function(){return this._is_flat}},{key:"setAnchor",value:function(t){this._circles=void 0,this._aabb=void 0,this.anchor=t,this.offset=this.computeOffset()}},{key:"computeOffset",value:function(){var t,e=[this.layout.offset[0],this.layout.offset[1]];return this.parent&&(t=this.parent,e=Tc.computeOffset(e,t.size,t.anchor,Tc.zero_buffer),e=Tc.computeOffset(e,t.size,this.anchor,Tc.zero_buffer),t.offset!==go.zeroPair&&(e===go.zeroPair?e=t.offset:(e[0]+=t.offset[0],e[1]+=t.offset[1]))),Tc.computeOffset(e,this.size,this.anchor)}},{key:"getBoundingCircles",value:function(){return this.angle?(this._circles||(t=this.layout.units_per_pixel,i=-(n=(e=this.size[0]/2*t)*Math.cos(this.angle)),o=-(r=e*Math.sin(this.angle)),s=(a=Cr(this.position,2))[0],l=a[1],n+=s,r+=l*=-1,i+=s,o+=l,u=this.size[1]/2*t,this._circles=Ac(n,r,i,o,u)),this._circles):[];var t,e,n,r,i,o,a,s,l,u}},{key:"getAABB",value:function(){var t,e,n,r,i;return this._aabb||(t=this.layout.units_per_pixel,e=(this.size[0]/2+this.layout.buffer[0])*t,n=(this.size[1]/2+this.layout.buffer[1])*t,r=this.position[0]+this.offset[0]*t,i=this.position[1]-this.offset[1]*t,this._aabb={left:r-e,top:i+n,right:r+e,bottom:i-n}),this._aabb}},{key:"getSides",value:function(){var t=this.getAABB(),e=t.left,n=t.top,r=t.right,i=(n+t.bottom)/2;return[e,i,r,i]}}]),t}();Sc.PLACEMENT={VERTEX:0,MIDPOINT:1,SPACED:2,CENTROID:3};var Mc=Sc.PLACEMENT,Ic=80;function Oc(t,e,n,r){var i=[],o=r.placement,a=Math.max(e[0],e[1])*r.placement_min_length_ratio*r.units_per_pixel;switch(o){case Mc.SPACED:var s=function(t,e,n){var r=n.units_per_pixel,i=(n.placement_spacing||Ic)*r,o=function(t){for(var e=0,n=0;n<t.length-1;n++)e+=Lc(t[n],t[n+1]);return e}(t);if(o<=e)return!1;for(var a=Math.max(Math.floor(o/i),1),s=[],l=[],u=.5*(o-(a-1)*i),c=0;c<a;c++){var h=function(t,e,n,r){for(var i,o,a=0,s=0;s<t.length-1;s++){var l=t[s],u=t[s+1],c=Lc(l,u);if(!(c<=n)&&e<(a+=c)){i=function(t,e,n){var r=n/Lc(t,e);return[r*t[0]+(1-r)*e[0],r*t[1]+(1-r)*e[1]]}(l,u,a-e),o=Cc(l,u,r.angle);break}}return{position:i,angle:o}}(t,u,e,n),p=h.position,f=h.angle;null!=p&&null!=f&&(s.push(p),l.push(f)),u+=i}return{positions:s,angles:l}}(t,a,r);if(!s)return[];for(var l=s.positions,u=s.angles,c=0;c<l.length;c++){var h,p=l[c],f=u[c];!0!==r.tile_edges&&gu(p)||((h=new Sc(p,e,n,r)).angle=f,i.push(h))}break;case Mc.VERTEX:for(var d,y,g,v=0;v<t.length-1;v++)d=t[v],y=t[v+1],!0!==r.tile_edges&&gu(d)||((g=new Sc(d,e,n,r)).angle=Cc(d,y,r.angle),i.push(g));(g=new Sc(y,e,n,r)).angle=Cc(d,y,r.angle),i.push(g);break;case Mc.MIDPOINT:for(var m=0;m<t.length-1;m++){var b,_=t[m],w=t[m+1],x=[.5*(_[0]+w[0]),.5*(_[1]+w[1])];!0!==r.tile_edges&&gu(x)||(!a||Lc(_,w)>a)&&((b=new Sc(x,e,n,r)).angle=Cc(_,w,r.angle),i.push(b))}}return i}function Cc(t,e,n){var r=2<arguments.length&&void 0!==n?n:0;return"auto"===r?Math.atan2(e[0]-t[0],e[1]-t[1]):r}function Lc(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}var Pc={key:function(t){return[t.style,t.weight,t.family,t.px_size,t.fill,t.stroke,t.stroke_width,t.transform,t.text_wrap,t.max_lines,t.supersample,t.background_color,t.outline_color,t.outline_width,t.padding,Ti.device_pixel_ratio].join("/")},defaults:{style:"normal",weight:null,size:"12px",px_size:12,family:"Helvetica",fill:"white",text_wrap:15,max_lines:5,align:"center",stroke:null,stroke_width:0,background_color:null,outline_color:null,outline_width:0,padding:[0,0,0,0]},compute:function(t,e,n){var r={};if(e.font=e.font||this.defaults,r.can_articulate=e.can_articulate,r.fill=e.font.fill&&Ti.toCSSColor(go.evalCachedColorProperty(e.font.fill,n))||this.defaults.fill,r.style=e.font.style||this.defaults.style,r.weight=e.font.weight||this.defaults.weight,e.font.family?(r.family=e.font.family,r.family!==this.defaults.family&&(r.family+=", "+this.defaults.family)):r.family=this.defaults.family,r.transform=e.font.transform,r.size=e.font.size||this.defaults.size,r.supersample=e.supersample_text?1.5:1,r.px_size=go.evalCachedProperty(e.font.px_size,n)*r.supersample,0!==r.px_size){e.font.stroke&&e.font.stroke.color&&(r.stroke=Ti.toCSSColor(go.evalCachedColorProperty(e.font.stroke.color,n)||this.defaults.stroke),r.stroke_width=go.evalCachedProperty(e.font.stroke.width,n)||this.defaults.stroke_width),r.font_css=this.fontCSS(r);var i=e.text_wrap;return null==i&&"line"!==Qr.geometryType(t.geometry.type)&&(i=!0),!0===i&&(i=this.defaults.text_wrap),r.text_wrap=i,r.max_lines=e.max_lines||this.defaults.max_lines,r.background_color=e.background&&e.background.color&&!e.can_articulate?Ti.toCSSColor(go.evalCachedColorProperty(e.background.color,n)):this.defaults.background_color,r.outline_color=e.outline&&e.outline.color&&!e.can_articulate?Ti.toCSSColor(go.evalCachedColorProperty(e.outline.color,n)):this.defaults.outline_color,r.outline_width=e.outline&&e.outline.width&&!e.can_articulate?go.evalCachedProperty(e.outline.width,n):this.defaults.outline_width,r.padding=e.padding&&!e.can_articulate?go.evalCachedProperty(e.padding,n):this.defaults.padding,r}},fontCSS:function(t){return[t.style,t.weight,t.px_size+"px",t.family].filter((function(t){return t})).join(" ")}},Rc=a((function(t){function e(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function n(t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function r(t,e){t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+e+";"}function i(t){var e=t.a.offsetWidth,n=e+100;return t.f.style.width=n+"px",t.c.scrollLeft=n,t.b.scrollLeft=t.b.scrollWidth+100,t.g!==e&&(t.g=e,1)}function o(t,n){function r(){var t=o;i(t)&&t.a.parentNode&&n(t.g)}var o=t;e(t.b,r),e(t.c,r),i(t)}function a(t,e){var n=e||{};this.family=t,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}function s(t,e){return[t.style,t.weight,function(){if(null===c){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(t){}c=""!==t.style.font}return c}()?t.stretch:"","100px",e].join(" ")}var l,u,c,h;h=c=u=l=null,a.prototype.load=function(t,e){var i=this,a=t||"BESbswy",c=0,p=e||3e3,f=(new Date).getTime();return new Promise((function(t,e){var d,y,g;null===h&&(h=!!document.fonts),(d=h)&&(null===u&&(u=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),d=!u),d?(d=new Promise((function(t,e){!function n(){(new Date).getTime()-f>=p?e():document.fonts.load(s(i,'"'+i.family+'"'),a).then((function(e){1<=e.length?t():setTimeout(n,25)}),(function(){e()}))}()})),y=new Promise((function(t,e){c=setTimeout(e,p)})),Promise.race([y,d]).then((function(){clearTimeout(c),t(i)}),(function(){e(i)}))):(g=function(){function u(){var e;(e=-1!=g&&-1!=v||-1!=g&&-1!=m||-1!=v&&-1!=m)&&((e=g!=v&&g!=m&&v!=m)||(null===l&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)),e=l&&(g==b&&v==b&&m==b||g==_&&v==_&&m==_||g==w&&v==w&&m==w)),e=!e),e&&(x.parentNode&&x.parentNode.removeChild(x),clearTimeout(c),t(i))}var h=new n(a),d=new n(a),y=new n(a),g=-1,v=-1,m=-1,b=-1,_=-1,w=-1,x=document.createElement("div");x.dir="ltr",r(h,s(i,"sans-serif")),r(d,s(i,"serif")),r(y,s(i,"monospace")),x.appendChild(h.a),x.appendChild(d.a),x.appendChild(y.a),document.body.appendChild(x),b=h.a.offsetWidth,_=d.a.offsetWidth,w=y.a.offsetWidth,function t(){var n;(new Date).getTime()-f>=p?(x.parentNode&&x.parentNode.removeChild(x),e(i)):(!0!==(n=document.hidden)&&void 0!==n||(g=h.a.offsetWidth,v=d.a.offsetWidth,m=y.a.offsetWidth,u()),c=setTimeout(t,50))}(),o(h,(function(t){g=t,u()})),r(h,s(i,'"'+i.family+'",sans-serif')),o(d,(function(t){v=t,u()})),r(d,s(i,'"'+i.family+'",serif')),o(y,(function(t){m=t,u()})),r(y,s(i,'"'+i.family+'",monospace'))},document.body?g():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),g()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),g())})))}))},t.exports=a})),Nc={fonts_loaded:Promise.resolve(),last_loaded:null,loadFonts:function(t){var e=this,n=JSON.stringify(t)===this.last_loaded;return t&&!n&&function(){var n=[];for(var r in t)!function(r){Array.isArray(t[r])?t[r].forEach((function(t){return n.push(e.loadFontFace(r,t))})):n.push(e.loadFontFace(r,t[r]))}(r);e.last_loaded=JSON.stringify(t),e.fonts_loaded=Promise.all(n.filter((function(t){return t})))}(),this.fonts_loaded},loadFontFace:function(t,e){if(null!=e&&("object"===vr(e)||"external"===e)){var n={family:t},r=Promise.resolve();"object"===vr(e)&&(Object.assign(n,e),"string"==typeof e.url&&(r=this.injectFontFace(n)));var i=new Rc(t,n);return r.then((function(){return i.load()})).then((function(){ki("debug","Font face '".concat(t,"' is available"),n)}),(function(){ki("debug","Font face '".concat(t,"' is NOT available"),n)}))}},injectFontFace:function(t){var e=this,n=t.family,r=t.url,i=t.weight,o=t.style;void 0===this.supports_native_font_loading&&(this.supports_native_font_loading=void 0!==window.FontFace);var a=Promise.resolve(r);return"blob:"===r.slice(0,5)&&(a=Ti.io(r,6e4,"arraybuffer").then((function(t){var n=new Uint8Array(t);if(e.supports_native_font_loading)return n;for(var r="",i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return"data:font/opentype;base64,"+btoa(r)}))),a.then((function(t){var r,a,s;e.supports_native_font_loading?("string"==typeof t?r=new FontFace(n,"url(".concat(encodeURI(t),")"),{weight:i,style:o}):t instanceof Uint8Array&&(r=new FontFace(n,t,{weight:i,style:o})),document.fonts.add(r),ki("trace","Adding FontFace to document.fonts:",r)):(a="\n                    @font-face {\n                        font-family: '".concat(n,"';\n                        font-weight: ").concat(i||"normal",";\n                        font-style: ").concat(o||"normal",";\n                        src: url(").concat(encodeURI(t),");\n                    }\n                "),(s=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(s),s.sheet.insertRule(a,0),ki("trace","Injecting CSS font face:",a))}))}},jc=function(){function t(){mr(this,t),this.vertical_text_buffer=1,this.horizontal_text_buffer=1,this.layout=jl("binary-tree")}return _r(t,[{key:"createCanvas",value:function(t,e){var n=document.createElement("canvas");return t&&e&&(n.width=t,n.height=e),n.style.backgroundColor="transparent",n}},{key:"setFont",value:function(t,e){var n=e.font_css,r=e.fill,i=e.stroke,o=e.stroke_width,a=e.px_size,s=e.supersample;this.px_size=a;var l=Ti.device_pixel_ratio*s;i&&0<o&&(t.strokeStyle=i,t.lineWidth=o*l),t.fillStyle=r,t.textBaseline="bottom",t.font=n,t.miterLimit=2}},{key:"textSizes",value:function(t,e,n){var r=this;return Nc.loadFonts().then((function(){return Ao.add({type:"textSizes",run:r.processTextSizesTask.bind(r),texts:e,tile_id:t,cursor:{ctx:n,styles:Object.keys(e),texts:null,style_idx:null,text_idx:null}})}))}},{key:"processTextSizesTask",value:function(t){var e,n=t.cursor,r=t.texts,i=n.ctx;for(n.style_idx=n.style_idx||0;n.style_idx<n.styles.length;){var o=n.styles[n.style_idx];null==n.text_idx&&(n.text_idx=0,n.texts=Object.keys(r[o]));for(var a=r[o],s=!0;n.text_idx<n.texts.length;){var l=n.texts[n.text_idx],u=a[l],c=u.text_settings;if(s&&(this.setFont(i,c),s=!1),u.size=this.textSize(i,o,l,c).size,c.can_articulate){var h=!1,p=!1;if(zc(l)&&(Gc(l)?h=!0:p=!0),u.isRTL=h,u.no_curving=p||(e=l,Kc.test(e)),u.vertical_buffer=this.vertical_text_buffer+c.outline_width+(c.padding[0]+c.padding[2])/2,u.segment_sizes=[],!u.no_curving){var f=function(t,e){var n=e?1:Xc;if(t.length<n)return[t];var r=t;if(jc.cache.segment[r])return jc.cache.stats.segment_hits++,jc.cache.segment[r];var i=[];if(Hc.exec(t)){i=t.split(Uc);for(var o,a=-1,s=0;s<i.length-1;s++)0<s&&(o=qc.exec(i[s]))&&(i[s]=i[s].substring(o[0].length),i[s-1]+=o[0],a+=o[0].length),a+=1+i[s].length,i[s]+=t.slice(a,a+1);t=""}for(;t.length;){for(var l="",u=t,c=0;c<n&&u.length;c++){var h=(Zc.exec(u)||u)[0];l+=h,u=u.substring(h.length)}i.push(l),t=t.substring(l.length)}return e&&i.reverse(),jc.cache.stats.segment_misses++,jc.cache.segment[r]=i}(l,h);u.segments=f;for(var d=0;d<f.length;d++)u.segment_sizes.push(this.textSize(i,o,f[d],c).size)}}if(n.text_idx++,!Ao.shouldContinue(t))return!1}n.text_idx=null,n.style_idx++}return Ao.finish(t,{texts:r}),!0}},{key:"textSize",value:function(e,n,r,i){var o=i.transform,a=i.text_wrap,s=i.max_lines,l=i.stroke_width,u=void 0===l?0:l,c=i.supersample,h=i.padding,p=i.outline_width,f=i.can_articulate;if(t.cache.text[n]=t.cache.text[n]||{},t.cache.text[n][r])return t.cache.stats.text_hits++,t.cache.text[n][r];t.cache.stats.text_misses++,t.cache.text_count++;var d=Ti.device_pixel_ratio*c,y=this.applyTextTransform(r,o),g=d*(this.vertical_text_buffer+p+(h[0]+h[2])/2),v=d*(this.horizontal_text_buffer+p+u+(h[1]+h[3])/2),m=2*d,b=this.px_size+m,_=Jc.parse(y,a,s,b,e),w=_.height,x=_.width,k=_.lines,E=[x/d,w/d];f||(E[0]+=2*v/d,E[1]+=2*g/d);var T=[x+2*v,w+2*g],A=[T[0]/d,T[1]/d];return t.cache.text[n][r]={lines:k,size:{collision_size:E,texture_size:T,logical_size:A,line_height:b}},t.cache.text[n][r]}},{key:"drawTextMultiLine",value:function(t,e,n,r,i,o){var a=Cr(n,2),s=a[0],l=a[1],u=Ti.device_pixel_ratio*i.supersample,c=i.stroke_width||0,h=i.stroke;i.background_color&&(t.fillStyle=i.background_color,t.fillRect(s,l,r.texture_size[0],r.texture_size[1]));var p=i.outline_width*u,f=i.outline_color;p&&f&&(t.strokeStyle=f,t.lineWidth=p,t.strokeRect(s+p/2,l+p/2,r.texture_size[0]-p,r.texture_size[1]-p)),(i.background_color||p&&f)&&this.setFont(t,i);for(var d,y,g,v,m=r.line_height,b=l,_=0;_<e.length;_++){var w=e[_];this.drawTextLine(t,w,[s,b],r,i,o),b+=m}Ql.draw_label_collision_boxes&&(t.save(),d=u*(this.horizontal_text_buffer+i.outline_width+c+(i.padding[1]+i.padding[3])/2),y=u*(this.vertical_text_buffer+i.outline_width+(i.padding[0]+i.padding[2])/2),g=r.collision_size,t.strokeStyle="blue",t.lineWidth=2,t.strokeRect(s+d,l+y,u*g[0],u*g[1]),"curved"===o&&h&&0<c&&t.strokeRect(s+r.texture_size[0]+d,l+y,u*g[0],u*g[1]),t.restore()),Ql.draw_label_texture_boxes&&(t.save(),v=r.texture_size,t.strokeStyle="green",t.lineWidth=2,t.strokeRect(s+2,l+2,v[0]-4,v[1]-4),"curved"===o&&h&&0<c&&t.strokeRect(s+2+r.texture_size[0],l+2,v[0]-4,v[1]-4),t.restore())}},{key:"drawTextLine",value:function(t,e,n,r,i,o){var a,s=Cr(n,2),l=s[0],u=s[1],c=i.stroke,h=i.stroke_width,p=void 0===h?0:h,f=i.transform,d=i.align,y=i.supersample,g=i.padding,v=i.outline_width,m=Ti.device_pixel_ratio*y,b=(d=d||"center",r.texture_size),_=r.line_height,w=m*(this.vertical_text_buffer+v),x=m*(this.horizontal_text_buffer+v+p),k=this.applyTextTransform(e.text,f);"left"===d?a=l+x+g[3]*m:"center"===d?a=l+b[0]/2-e.width/2-(g[1]-g[3])*m/2:"right"===d&&(a=l+b[0]-e.width-x-g[1]*m);var E,T=u+w+_+g[0]*m;c&&0<p&&(E="curved"===o?b[0]:0,t.strokeText(k,a+E,T)),t.fillText(k,a,T)}},{key:"rasterize",value:function(e,n,r,i,o,a){return Ao.removeForTile(r),Ao.add({type:"rasterizeLabels",run:this.processRasterizeTask.bind(this),cancel:t.returnNoTextures,pause_factor:2,user_moving_view:!1,texts:e,textures:n,texture_prefix:i,gl:o,tile_id:r,texture_manager:a,cursor:{styles:Object.keys(e),texts:null,style_idx:0,text_idx:null,texture_idx:0,texture_names:[]}})}},{key:"processRasterizeTask",value:function(t){if(!Ao.shouldContinue(t))return!1;for(var e=t.cursor,n=t.texts,r=t.textures;e.texture_idx<t.textures.length;){for(var i=!1,o=r[e.texture_idx],a=this.createCanvas.apply(this,Lr(o.texture_size)),s=a.getContext("2d");e.style_idx<e.styles.length;){var l=e.styles[e.style_idx];null==e.text_idx&&(e.text_idx=0,e.texts=Object.keys(n[l]));for(var u=n[l],c=!0;e.text_idx<e.texts.length;){var h=e.texts[e.text_idx],p=u[h],f=p.text_settings;if(c&&(this.setFont(s,f),c=!1),f.can_articulate){p.texcoords=p.texcoords||{};for(var d=0;d<p.type.length;d++){var y=p.type[d];switch(y){case"straight":if(p.textures[d]!==e.texture_idx)continue;var g,v,m,b,_=p.isRTL?h.split().reverse().join():h,w=o.texcoord_cache[l][_],x=void 0;w.texcoord?x=w.texcoord:(g=w.texture_position,m=(v=this.textSize(s,l,_,f)).size,b=v.lines,this.drawTextMultiLine(s,b,g,m,f,y),x=t.texture_manager.getTexcoordsForSprite(g,m.texture_size,o.texture_size),w.texcoord=x),p.texcoords[y]={texcoord:x,texture_id:w.texture_id};break;case"curved":var k=p.segments;p.texcoords.curved=[],p.texcoords_stroke=[];for(var E,T,A,S,M,I,O,C,L=0;L<k.length;L++)p.textures[d][L]===e.texture_idx&&(E=k[L],S=A=void 0,(T=o.texcoord_cache[l][E]).texcoord&&T.texcoord_stroke?(A=T.texcoord,S=T.texcoord_stroke):(M=T.texture_position,O=(I=this.textSize(s,l,E,f)).size,C=I.lines,this.drawTextMultiLine(s,C,M,O,f,y),A=t.texture_manager.getTexcoordsForSprite(M,O.texture_size,o.texture_size),S=f.stroke&&0<f.stroke_width?t.texture_manager.getTexcoordsForSprite([M[0]+O.texture_size[0],M[1]],O.texture_size,o.texture_size):(i=!0,t.texture_manager.getTexcoordsForSprite([o.texture_size[0],o.texture_size[1]],[0,0],o.texture_size)),T.texcoord=A,T.texcoord_stroke=S),p.texcoords_stroke.push(S),p.texcoords.curved.push({texcoord:A,texture_id:T.texture_id}))}}}else{var P=this.textSize(s,l,h,f).lines;for(var R in p.align)p.align[R].texture_id===e.texture_idx&&(this.drawTextMultiLine(s,P,p.align[R].texture_position,p.size,{stroke:f.stroke,stroke_width:f.stroke_width,transform:f.transform,supersample:f.supersample,align:R,background_color:f.background_color,outline_width:f.outline_width,outline_color:f.outline_color,padding:f.padding,fill:f.fill,font_css:f.font_css,px_size:f.px_size}),p.align[R].texcoords=t.texture_manager.getTexcoordsForSprite(p.align[R].texture_position,p.size.texture_size,o.texture_size))}e.text_idx++}e.text_idx=null,e.style_idx++}!0===i&&(s.fillStyle="rgba(0, 0, 0, 0)",s.fillRect(a.width-1,a.height-1,1,1));var N=t.texture_prefix+e.texture_idx;t.texture_manager.create(t.gl,N,{element:a,filtering:"linear",UNPACK_PREMULTIPLY_ALPHA_WEBGL:!0}),e.texture_names.push(N),e.texture_idx++,e.style_idx=0,a.width=0,a.height=0}return Ao.finish(t,e.texture_names),!0}},{key:"setTextureTextPositions",value:function(t){var e={texture_id:0,texcoord_cache:{}},n=[];for(var r in t){var i=t[r];for(var o in i){var a=i[o],s=a.text_settings,l=s.can_articulate,u=s.stroke,c=s.stroke_width;if(l){a.textures=[],e.texcoord_cache[r]=e.texcoord_cache[r]||{};for(var h=0;h<a.type.length;h++)switch(a.type[h]){case"straight":var p,f=a.isRTL?o.split().reverse().join():o;e.texcoord_cache[r][f]||(p=a.size.texture_size,e.texcoord_cache[r][f]={},this.placeText(p[0],p[1],{can_articulate:l,style:r,word:f})),a.textures[h]=e.texture_id;break;case"curved":a.textures[h]=[];for(var d=0;d<a.segment_sizes.length;d++){var y,g,v=a.segments[d];e.texcoord_cache[r][v]||(g=(y=a.segment_sizes[d].texture_size)[0],u&&0<c&&(g*=2),e.texcoord_cache[r][v]={},this.placeText(g,y[1],{can_articulate:l,style:r,word:v})),a.textures[h].push(e.texture_id)}}}else{var m=a.size.texture_size;this.placeText(m[0],m[1],{can_articulate:l,text_info:a})}}}var b=this.layout.export(),_=b.items,w=b.width,x=b.height;e.texcoord_cache={};for(var k=0,E=_.length;k<E;k++){var T=_[k],A=T.x,S=T.y;if(T.meta.can_articulate){var M=T.meta,I=M.style,O=M.word;e.texcoord_cache[I]=e.texcoord_cache[I]||{},e.texcoord_cache[I][O]||(e.texcoord_cache[I][O]={texture_id:e.texture_id,texture_position:[A,S]})}else{var C=T.meta.text_info;for(var L in C.align)C.align[L].texture_id=e.texture_id,C.align[L].texture_position=[A,S]}}return 0<w&&0<x&&(n[e.texture_id]={texture_size:[w,x],texcoord_cache:e.texcoord_cache}),n}},{key:"placeText",value:function(t,e,n){this.layout.addItem({width:t+this.vertical_text_buffer,height:e+this.vertical_text_buffer,meta:n})}},{key:"applyTextTransform",value:function(t,e){return"capitalize"===e?t.replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1)})):"uppercase"===e?t.toUpperCase():"lowercase"===e?t.toLowerCase():t}}],[{key:"fontPixelSize",value:function(e){if(null!=e){var n=Cr((e="string"==typeof e?e:String(e)).match(t.font_size_re)||[],3),r=n[1],i=n[2];return"em"===(i=i||"px")?r*=16:"pt"===i?r/=.75:"%"===i&&(r/=6.25),(r=go.parsePositiveNumber(r))*Ti.device_pixel_ratio}}},{key:"pruneTextCache",value:function(){t.cache.text_count>t.cache.text_count_max&&(t.cache.text={},t.cache.text_count=0,ki("debug","CanvasText: pruning text cache")),Object.keys(t.cache.segment).length>t.cache.segment_count_max&&(t.cache.segment={},ki("debug","CanvasText: pruning segment cache"))}}]),t}();jc.font_size_re=/((?:[0-9]*\.)?[0-9]+)\s*(px|pt|em|%)?/,jc.cache={text:{},text_count:0,text_count_max:2e3,segment:{},segment_count_max:2e3,stats:{text_hits:0,text_misses:0,segment_hits:0,segment_misses:0}},jc.EMPTY_TEXTURES_ARR=[],jc.returnNoTextures=function(){return jc.EMPTY_TEXTURES_ARR};var Dc=new RegExp("[\u0591-\u07ff\u200f\u202b\u202e\ufb1d-\ufdfd\ufe70-\ufefc]");function zc(t){return Dc.test(t)}var Fc="\0-/:-@[-`{-\xbf\xd7\xf7\u02b9-\u02ff\u2000-\u2bff\u2010-\u2029\u202c\u202f-\u2bff",Bc=new RegExp("["+Fc+"]+");function Gc(t){return Bc.test(t)}var Hc=new RegExp("^["+Fc+"\u0600-\u06ff]+"),Uc=new RegExp("["+Fc+"\u0622-\u0625\u0627\u062f-\u0632\u0648\u0671-\u0677\u0688-\u0699\u06c4-\u06cb\u06cf\u06d2\u06d3\u06ee\u06ef]"),qc=new RegExp("^[\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed]+"),Vc="[\u0300-\u036f\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u07a6-\u07b0\u0900-\u0903\u093a-\u094c\u094e\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09cc\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c-\u0a4c\u0a51\u0a81-\u0a83\u0abc\u0abe-\u0acc\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b4c\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c4c\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0ccc\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d4c\u0d4e\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f83\u0f86\u0f87\u0f8d-\u0fbc\u0fc6\u102b-\u1038\u103a-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u17b4-\u17d1\u17d3\u1a55-\u1a5e\u1a61-\u1a7c\u1dc0-\u1dff\u20d0-\u20ff]",Zc=new RegExp("^.(?:"+Vc+"+)?([\u094d\u09cd\u0a4d\u0acd\u0b4d\u0c4d\u0ccd\u0d4d\u0f84\u1039\u17d2\u1a60\u1a7f]\\W(?:"+Vc+"+)?)*"),Wc={Mongolian:"\u1800-\u18af"},Yc=Object.keys(Wc).map((function(t){return Wc[t]})).join(""),Kc=new RegExp("["+Yc+"]"),Xc=2,Jc=function(){function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1/0;mr(this,t),this.width=0,this.height=0,this.lines=[],this.max_lines=n,this.text_wrap=r,this.context=e}return _r(t,[{key:"createLine",value:function(t){return this.lines.length<this.max_lines&&new $c(t,this.text_wrap)}},{key:"push",value:function(t){if(this.lines.length<this.max_lines){var e=this.context.measureText(t.text).width;return(t.width=e)>this.width&&(this.width=Math.ceil(e)),this.lines.push(t),this.height+=t.height,!0}return this.addEllipsis(),!1}},{key:"advance",value:function(t,e){return!!this.push(t)&&this.createLine(e)}},{key:"addEllipsis",value:function(){var e=this.lines[this.lines.length-1],n=Math.ceil(this.context.measureText(t.ellipsis).width);e.append(t.ellipsis),e.width+=n,e.width>this.width&&(this.width=e.width)}},{key:"finish",value:function(t){t?this.push(t):this.addEllipsis()}}],[{key:"parse",value:function(e,n,r,i,o){for(var a="number"==typeof n?e.split(" "):[e],s=new t(o,r,n),l=s.createLine(i),u=0;u<a.length;u++){for(var c=a[u].split("\n"),h=0===u,p=0;p<c.length&&l;p++){var f=c[p];zc(f)&&Gc(f[f.length-1])&&(f+="\u200f");var d=h?f:" "+f;if(n&&0<u&&l.exceedsTextwrap(d)){if(!(l=s.advance(l,i)))break;l.append(f),h=!0}else l.append(d);p<c.length-1&&(l=s.advance(l,i),h=!0)}u===a.length-1&&s.finish(l)}return s}}]),t}();Jc.ellipsis="...";var $c=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;mr(this,t),this.chars=0,this.text="",this.height=Math.ceil(e),this.text_wrap=n}return _r(t,[{key:"append",value:function(t){this.chars+=t.length,this.text+=t}},{key:"exceedsTextwrap",value:function(t){return t.length+this.chars>this.text_wrap}}]),t}(),Qc={resetText:function(){this.texts={}},freeText:function(t){delete this.texts[t.id]},parseTextFeature:function(t,e,n,r){var i=this.parseTextSource(t,e,n);if(null!=i&&""!==i){var o=Pc.compute(t,e,n);if(o){var a=Pc.key(o);this.texts[r.id]=this.texts[r.id]||{};var s=this.texts[r.id][a]=this.texts[r.id][a]||{};if(i instanceof Object){var l=[],u=i.left+"-"+i.right;for(var c in i){var h,p=i[c];p&&(h=this.computeTextLayout({},t,e,n,r,p,o,u,c),s[p]||(s[p]={text_settings:o,ref:0}),l.push({draw:e,text:p,text_settings_key:a,layout:h}))}return 0<l.length&&l}var f=this.computeTextLayout({},t,e,n,r,i,o);return s[i]||(s[i]={text_settings:o,ref:0}),{draw:e,text:i,text_settings_key:a,layout:f}}}},parseTextSource:function(t,e,n){var r,i=e.text_source||"name";if(null!=i&&"object"===vr(i))for(var o in r={},i)r[o]=this.parseTextSourceValue(i[o],t,n);else r=this.parseTextSourceValue(i,t,n);return r},parseTextSourceValue:function(t,e,n){var r;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("string"==typeof t[i]?r=e.properties[t[i]]:"function"==typeof t[i]&&(r=t[i](n)),r)return r}else"string"==typeof t?r=e.properties[t]:t instanceof Function&&(r=t(n));return r},prepareTextLabels:function(t,e,n){var r=this;return 0===Object.keys(this.texts[t.id]||{}).length?Promise.resolve([]):ui.postMessage(this.main_thread_target+".calcTextSizes",t.id,this.texts[t.id]).then((function(e){var i=e.texts;return t.canceled?(ki("trace","Style ".concat(r.name,": stop tile build because tile was canceled: ").concat(t.key,", post-calcTextSizes()")),[]):(r.texts[t.id]=i||[],i?r.buildTextLabels(t,n):(To.abortTile(t.id),[]))}))},collideAndRenderTextLabels:function(t,e,n){var r=this;return this.prepareTextLabels(t,e,n).then((function(n){return 0===n.length?(To.collide([],e,t.id),Promise.resolve({})):To.collide(n,e,t.id).then((function(e){if(t.canceled)return ki("trace","stop tile build because tile was canceled: ".concat(t.key,", post-collide()")),{};var n=r.texts[t.id];return null==n||0===e.length?{}:(r.cullTextStyles(n,e),e.forEach((function(t){var e=t.text_settings_key,r=n[e]&&n[e][t.text];r.text_settings.can_articulate?(r.type||(r.type=[]),-1===r.type.indexOf(t.label.type)&&r.type.push(t.label.type)):(r.align=r.align||{},r.align[t.label.align]={})})),{labels:e,texts:n,textures:[]})}))}))},cullTextStyles:function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t[r.text_settings_key][r.text].ref++}for(var i in t)for(var o in t[i])t[i][o].ref<1&&delete t[i][o];for(var a in t)0===Object.keys(t[a]).length&&delete t[a]},calcTextSizes:function(t,e){return this._canvas_text||(this._canvas_text=new jc,this._canvas_ctx_for_sizes=this._canvas_text.createCanvas().getContext("2d")),this._canvas_text.textSizes(t,e,this._canvas_ctx_for_sizes)},preprocessText:function(t){if(t&&t.font&&"object"===vr(t.font))return t.font.fill=go.createPropertyCache(t.font.fill),t.font.stroke&&(t.font.stroke.color=go.createPropertyCache(t.font.stroke.color)),t.background&&t.background.color&&(t.background.color=go.createPropertyCache(t.background.color)),t.outline&&(t.outline.color&&(t.outline.color=go.createPropertyCache(t.outline.color)),t.outline.width&&(t.outline.width=go.createPropertyCache(t.outline.width,go.parsePositiveNumber))),t.padding&&(Array.isArray(t.padding)?2===t.padding.length&&(t.padding=[t.padding[0],t.padding[1],t.padding[0],t.padding[1]]):t.padding=Array(4).fill(t.padding),t.padding=go.createPropertyCache(t.padding,(function(t){return t.map(go.parsePositiveNumber)}))),t.font.px_size=go.createPropertyCache(t.font.size||Pc.defaults.size,jc.fontPixelSize),t.font.stroke&&null!=t.font.stroke.width&&(t.font.stroke.width=go.createPropertyCache(t.font.stroke.width,go.parsePositiveNumber)),t.offset=go.createPropertyCache(t.offset,(function(t){return Array.isArray(t)&&t.map(go.parseNumber)})),t.buffer=go.createPropertyCache(t.buffer,(function(t){return(Array.isArray(t)?t:[t,t]).map(go.parsePositiveNumber)})),t.repeat_distance=go.createPropertyCache(t.repeat_distance||Qr.tile_size,go.parsePositiveNumber),t},computeTextLayout:function(t,e,n,r,i,o,a,s,l){var u=t||{};return(u=this.computeLayout(u,e,n,r,i)).repeat_distance&&(s&&(u.repeat_group+="/"+s),u.repeat_group+="/"+o),u.subdiv=i.overzoom2,u.align=n.align,u.italic="normal"!==a.style,"right"===l?u.orientation=1:"left"===l&&(u.orientation=-1),u}},th=Math.PI/180,eh=function(){function t(e,n){mr(this,t),this._min_zoom=H.util.constants.DEFAULT_MIN_ZOOM_LEVEL,this._max_zoom=H.util.constants.DEFAULT_MAX_ZOOM_LEVEL,this._viewport=e,this._center_offset=[],this._center_offset_normalized=[],this._viewport_aspect_ratio=1,this._focal_length=[[16,2],[17,2.5],[18,3],[19,4],[20,6]],this._view_matrix=new Float64Array(16),this._projection_matrix=new Float64Array(16),this._heading_matrix=new Float64Array(16),this._tilt_matrix=new Float64Array(16),this._transformation_matrix=new Float64Array(16),this._camera_matrix=new Float64Array(16),this._lookAtData={position:[0,0,0],zoom:0,tile_level:0,tetragon:void 0,bounds:void 0,unpadded_bounds:void 0,distance:void 0,tilt:0,incline:0,heading:180},this._zoom_direction=0,this._horizon=0,this.handleViewportUpdate(!0),n?this.setLookAtData(n):this._updateMatrices(),ra.replaceBlock("camera","\n            uniform mat4 u_projection;\n            uniform vec3 u_eye;\n            uniform vec2 u_center_offset;\n\n            void cameraProjection (inout vec4 position) {\n                position = u_projection * position;\n            }")}return _r(t,[{key:"getZoomForBounds",value:function(t,e,n,r){var i,o=this.clone(),a=this._max_zoom,s=this._min_zoom,l=(a-s)/2,u=a-l,c=e,h=Jr.getBBoxCenter(Jr.getBBox(t));for(void 0===c?c=h:(i=h[0]-c[0],Math.abs(i)>Qr.half_circumference_meters+1e-8&&(c[0]+=Math.round(i/Qr.circumference_meters)*Qr.circumference_meters));.001<l;)!function(){o.setLookAtData({zoom:u,position:c,tilt:n,heading:r});var e,i,h,p,f,d=o.getLookAtData().bounds;t.every((function(t){return Jr.isPointInsidePolygon(t,d)}))?s=u:(i=(e=Cr(Jr.getBBox(d),4))[0],h=e[1],p=e[2],f=e[3],p-i+1e-8>=Qr.circumference_meters&&f-h+1e-8>=Qr.circumference_meters?s=u:a=u),u=a-(l=(a-s)/2)}();return s}},{key:"setZoomConstraints",value:function(t,e){this._min_zoom=t,this._max_zoom=e,this.setLookAtData(this.getLookAtData())}},{key:"setLookAtData",value:function(t,e){var n,r,i,o,a,s=t.position,l=t.zoom;s===n&&t.bounds!==n&&(s=Jr.getBBoxCenter(Jr.getBBox(t.bounds))),l===n&&t.bounds!==n&&(l=this.getZoomForBounds(t.bounds,s,t.tilt,t.heading)),e!==n&&(r=s||this.screenToWorld(e)),l!==n&&(l=Jr.clamp(l,this._min_zoom,this._max_zoom),(i=Ti.zoomToTileLevel(l))!==(o=this._lookAtData.tile_level)&&(this._zoom_direction=o<i?1:-1),this._lookAtData.zoom=l,this._lookAtData.tile_level=i),t.tilt!==n&&(this._lookAtData.tilt=t.tilt),t.heading!==n&&(this._lookAtData.heading=t.heading),e!==n?(this._updateMatrices(),a=this.screenToWorld(e),this._lookAtData.position[0]-=a[0]-r[0],this._lookAtData.position[1]-=a[1]-r[1]):s&&(this._lookAtData.position=s),this._lookAtData.position[2]=0,this._lookAtData.position[1]=Jr.clamp(this._lookAtData.position[1],-Qr.half_circumference_meters,Qr.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"getZoomDirection",value:function(){return this._zoom_direction}},{key:"resetZoomDirection",value:function(){this._zoom_direction=0}},{key:"getLookAtData",value:function(){return this._lookAtData}},{key:"handleViewportUpdate",value:function(t){var e=0<arguments.length&&void 0!==t&&t,n=this._viewport,r=n.width,i=n.height;this._viewport_aspect_ratio=r/i;var o=this._viewport.center.x-(r/2<<0),a=this._viewport.center.y-(i/2<<0);this._center_offset[0]=o,this._center_offset[1]=a,this._center_offset_normalized[0]=o/r,this._center_offset_normalized[1]=a/-i,e||(this._updateMatrices(),this._updateVisibleBounds())}},{key:"setupMatrices",value:function(t,e){zo(t.model_view32,this._view_matrix,t.model),e.uniform("Matrix4fv","u_modelView",t.model_view32),jo(t.normal32,t.model_view32),Do(t.inverse_normal32,t.normal32),e.uniform("Matrix3fv","u_normalMatrix",t.normal32),e.uniform("Matrix3fv","u_inverseNormalMatrix",t.inverse_normal32)}},{key:"_updateMatrices",value:function(){var t=this._viewport.height*Qr.metersPerPixel(this._lookAtData.zoom),e=Ti.interpolate(this._lookAtData.zoom,this._focal_length);this._lookAtData.distance=t/2*e;var n=this._lookAtData.position[0],r=this._lookAtData.position[1];Ho(this._view_matrix,Ro(n,r,0),Ro(n,r,-1),Ro(0,1,0)),this._heading_matrix=Uo(this._heading_matrix);var i=180-this._lookAtData.heading;i*=th,this._heading_matrix[0]=Math.cos(i),this._heading_matrix[1]=-Math.sin(i),this._heading_matrix[4]=Math.sin(i),this._heading_matrix[5]=Math.cos(i),this._tilt_matrix=Uo(this._tilt_matrix),i=0<(i=this._lookAtData.tilt?this._lookAtData.tilt*th:0)?-i:i,this._tilt_matrix[5]=Math.cos(i),this._tilt_matrix[6]=Math.sin(i),this._tilt_matrix[9]=-Math.sin(i),this._tilt_matrix[10]=Math.cos(i),zo(this._transformation_matrix,this._tilt_matrix,this._heading_matrix),zo(this._view_matrix,this._transformation_matrix,this._view_matrix);var o=2*Math.atan(1/e),a=2*this._lookAtData.distance;this._depth_buffer_adjustment=2/Math.log(a),Go(this._projection_matrix,o,this._viewport_aspect_ratio,1,a),this._projection_matrix[8]=2*-this._center_offset_normalized[0],this._projection_matrix[9]=2*-this._center_offset_normalized[1],Fo(this._projection_matrix,this._projection_matrix,Ro(0,0,-this._lookAtData.distance)),this._camera_matrix=zo(this._camera_matrix,this._projection_matrix,this._view_matrix)}},{key:"_updateVisibleBounds",value:function(){var t,e,n,r,i,o=this._viewport,a=o.width,s=o.height,l=o.padding,u=this._lookAtData.tilt*Math.PI/180;this._horizon=Math.max((l.top+s)/2-Math.cos(u)*(l.top*(1-Math.sin(u))+.75*s),0),this._lookAtData.tetragon=[this.screenToWorld([0,this._horizon]),this.screenToWorld([a,this._horizon]),this.screenToWorld([a,s]),this.screenToWorld([0,s])],this._lookAtData.unpadded_bounds=this._clipAgainstGeoBounds(this._lookAtData.tetragon),0===l.left&&0===l.top&&0===l.right&&0===l.bottom?this._lookAtData.bounds=this._lookAtData.unpadded_bounds:(t=l.left,e=Math.max(this._horizon,l.top),n=a-l.right,r=s-l.bottom,i=[this.screenToWorld([t,e]),this.screenToWorld([n,e]),this.screenToWorld([n,r]),this.screenToWorld([t,r])],this._lookAtData.bounds=this._clipAgainstGeoBounds(i))}},{key:"_clipAgainstGeoBounds",value:function(t){var e,n=Cr(Jr.getBBox(t),4),r=n[0],i=n[1],o=n[2],a=n[3],s=Qr.half_circumference_meters,l=[[r-1,+s],[o+1,+s],[o+1,-s],[r-1,-s]],u=Jr.clipPolygon(l,t)[0],c=Cr(Jr.getBBox(u),4);r=c[0],i=c[1],o=c[2],a=c[3],o-r>=Qr.circumference_meters&&(u=[[(e=(o-r)/2)-s,a],[e+s,a],[e+s,i],[e-s,i]]);var h=[];return u&&(h=Jr.splitLegs(u,s)),h}},{key:"applyPxOffset",value:function(t){var e=Cr(t,2),n=e[0],r=e[1],i=Math.PI-this._lookAtData.heading*th,o=Qr.metersPerPixel(this._lookAtData.zoom);this._lookAtData.position[0]+=(n*Math.cos(i)+r*Math.sin(i))*o,this._lookAtData.position[1]-=(r*Math.cos(i)-n*Math.sin(i))*o,this._lookAtData.position[1]=Jr.clamp(this._lookAtData.position[1],-Qr.half_circumference_meters,Qr.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"screenToWorld",value:function(t){var e=Cr(t,2),n=e[0],r=e[1],i=this._viewport,o=i.width,a=i.height;return 0===o||0===a?[0,0]:(n-=o/2,r-=a/2,this._clipCoordsToWorldPlaneCoords([2*(n+o/2)/o-1,1-2*(r+a/2)/a,-1,1]))}},{key:"_clipToScreenCoords",value:function(t){var e=this._viewport,n=e.width,r=e.height;return[(.5*t[0]+.5)*n,r-(.5*t[1]+.5)*r]}},{key:"_isScreenPointInViewPort",value:function(t){var e=this._viewport,n=e.width,r=e.height;return 0<=t[0]&&t[0]<=n&&0<=t[1]&&t[1]<=r}},{key:"worldToScreen",value:function(t,e){var n,r,i,o,a,s,l=1<arguments.length&&void 0!==e&&e;return t[2]||(t[2]=0),l?(n=this._worldToClipCoords(t),a=this._clipToScreenCoords(n)):(r=Math.sign(this._lookAtData.position[0]),i=Math.trunc(this._lookAtData.position[0]/Qr.circumference_meters+r/2),t[0]+=Qr.circumference_meters*i,o=this._worldToClipCoords(t),s=a=this._clipToScreenCoords(o),this._isScreenPointInViewPort(a)||(o=this._worldToClipCoords([t[0]+Qr.circumference_meters,t[1],t[2]]),a=this._clipToScreenCoords(o),this._isScreenPointInViewPort(a)||(o=this._worldToClipCoords([t[0]-Qr.circumference_meters,t[1],t[2]]),a=this._clipToScreenCoords(o)),this._isScreenPointInViewPort(a)||(a=s))),a}},{key:"getHorizon",value:function(){return this._horizon}},{key:"_clipCoordsToWorldPlaneCoords",value:function(t){var e=[],n=this._lookAtData.distance,r=this._lookAtData.position,i=[0,0,n,0],o=0,a=n*Math.sin(th*this._lookAtData.tilt)*Math.cos(th*this._lookAtData.heading),s=n*Math.sin(th*this._lookAtData.tilt)*Math.sin(th*this._lookAtData.heading),l=new Float64Array(16),u=new Float64Array(16);return Vo(l,this._projection_matrix),Zo(e,t,l),e[2]=-1,e[3]=0,Vo(u,this._view_matrix),Zo(e,e,u),Wo(e,e),Zo(i,i,this._transformation_matrix),0!==e[2]&&(o=-i[2]/e[2]),Yo(e,e,o),[r[0]+(e[0]+s),r[1]+(e[1]+a)]}},{key:"_worldToClipCoords",value:function(t){var e=[t[0],t[1],t[2],1];return Zo(e,e,this._view_matrix),Zo(e,e,this._projection_matrix),Yo(e,e,1/e[3]),e}},{key:"setupProgram",value:function(t){t.uniform("Matrix4fv","u_projection",this._projection_matrix),t.uniform("3f","u_eye",[0,0,this._lookAtData.distance]),t.uniform("2fv","u_center_offset",this._center_offset_normalized),t.uniform("1f","u_tilt",this._lookAtData.tilt*th),t.uniform("1f","u_heading",this._lookAtData.heading*th),t.uniform("1f","u_near_plane",1),t.uniform("1f","u_depth_buffer_adjustment",this._depth_buffer_adjustment)}},{key:"getTransformationMatrix",value:function(){return this._transformation_matrix}},{key:"getCameraMatrix",value:function(){return this._camera_matrix}},{key:"clone",value:function(){var e=new t(this._viewport,this._lookAtData);return e.setZoomConstraints(this._min_zoom,this._max_zoom),e}},{key:"getViewport",value:function(){return this._viewport}}]),t}();function nh(t){return void 0===t.x?t[0]:t.x}function rh(t){return void 0===t.y?t[1]:t.y}function ih(t,e){return nh(t)-nh(e)}function oh(t,e){return rh(t)-rh(e)}function ah(t){return t.sort(ih)}function sh(t,e){for(var n,r=t[0],i=r,o=0;o<t.length;o+=1)e(n=t[o],r)<0?r=n:0<e(n,i)&&(i=n);return[r,i]}function lh(t,e){return Object.values(e.reduce((function(e,n){var r=n[+t];return e[r]||(e[r]=[]),e[r].push(n),e}),{}))}function uh(t,e,n){var r=+t,i=e[r],o=n[r];if(o<i)return[];var a=[e];if(o<i)return a;for(var s=e[(1+r)%2],l=t?function(t){return a.push([s,t])}:function(t){return a.push([t,s])},u=i+1;u<o;u+=1)l(u);return a.push(n),a}function ch(t,e){return uh(!1,t,e)}function hh(t,e){return uh(!0,t,e)}function ph(t){var e={},n=[];return t.forEach((function(t){var r=t.key||(Array.isArray(t)?"".concat(t[0],"/").concat(t[1]):"".concat(t.x,"/").concat(t.y));e[r]||(e[r]=!0,n.push(t))})),n}function fh(t){return t.reduce((function(t,e){return t.concat(e)}))}function dh(t,e,n){function r(e){return Object.values(Qr.metersToExactTileCoords(e,t.tile_level))}var i,o,a,s,l,u,c,h,p;return ph((i=function(t,e){return e<=0?t:ph((n=fh(lh(!1,t).map((function(t){var n=Cr(sh(t,oh),2),r=n[0],i=n[1],o=[r[0],r[1]-e],a=[i[0],i[1]+e];return t.concat(hh(o,r),hh(i,a))}))),fh(lh(!0,n).map((function(t){var n=Cr(sh(t,ih),2),r=n[0],i=n[1],o=[r[0]-e,r[1]],a=[i[0]+e,i[1]];return t.concat(ch(o,r),ch(i,a))})))));var n}((s=r(t.tetragon[0]),l=r(t.tetragon[1]),u=r(t.tetragon[3]),c=r(t.tetragon[2]),h=yh(l,s,u),p=yh(u,c,l),ph(h.concat(p))),e),o=t.tile_level,a=n,i.map((function(t){var e=Cr(t,2),n=e[0],r=e[1];return _a.coord(Qr.wrapTile({x:n,y:r,z:o},{x:!a,y:!0}))}))))}function yh(t,e,n){var r=function(t,e,n){var r=Cr(t,2),i=r[0],o=r[1],a=Cr(e,2),s=a[0],l=a[1],u=Cr(n,2),c=u[0],h=u[1],p=i+(l-o)/(h-o)*(c-i);return[[[i,o]].concat(Lr(ah([[s,l],[p,l]]))),[].concat(Lr(ah([[s,l],[p,l]])),[[c,h]])]}.apply(void 0,Lr([t,e,n].sort(oh))),i=Cr(r,2),o=i[0],a=i[1];return ph(function(t,e,n){var r=Cr(t,2),i=r[0],o=r[1],a=Cr(e,2),s=a[0],l=a[1];return vh(i,s,Cr(n,1)[0],o,l)}.apply(void 0,Lr(o)).concat(function(t,e,n){var r=Cr(t,2),i=r[0],o=r[1],a=Cr(e,1)[0],s=Cr(n,2);return vh(s[0],i,a,s[1],o)}.apply(void 0,Lr(a))))}var gh=.125;function vh(t,e,n,r,i){var o,a,s,l,u,c,h,p,f,d,y=Math.min(t,e),g=Math.max(t,n),v=Math.min(r,i),m=Math.max(r,i);if(Math.floor(r)===Math.floor(i))return _h(y,g,r);if(m-v<gh)return o=[g,m],s=(a=Cr([y,v],2))[0],l=a[1],c=(u=Cr(o,2))[0],h=u[1],f=mh(p=bh(s,c),l),d=mh(p,h),f.concat(d);function b(t){A=A.concat(_h(S,M,Math.floor(t))),S+=E,M+=T}var _,w,x=gh*((w=m)-(_=v))/(Math.ceil(w)-Math.floor(_)),k=(m-v)/x,E=(e-t)/k,T=(n-t)/k,A=[],S=t,M=t;if(r<i)for(var I=v;I<=m;I+=x)b(I);else for(var O=m;v<=O;O-=x)b(O);return ph(A)}function mh(t,e){return t.map((function(t){return[t,e]}))}function bh(t,e){var n=Math.floor(t),r=Math.floor(e);if(r<n)return[];if(n===r)return[n];for(var i=[],o=n;o<=r;o+=1)i.push(o);return i}function _h(t,e,n){return mh(bh(t,e),n)}var wh=function(){function t(e,n){mr(this,t),Io(this),this.scene=e,this.createMatrices(),this.bounds=null,this.center_tile=null,this.panning=!1,this.panning_stop_at=0,this.pan_snap_timer=0,this.user_input_at=0,this.user_input_timeout=50,this.user_input_active=!1,this.size={},this.buffer=0,this.wrap=!1!==n.wrapView,this.preserve_tiles_within_zoom=1,this.lookAtManipulator=new eh(n.viewport),this._viewport=n.viewport,this._offset_buffer=[0,0],this.handleViewportUpdate(!0)}return _r(t,[{key:"update",value:function(){this.pan_snap_timer=(new Date-this.panning_stop_at)/1e3,this.user_input_active=new Date-this.user_input_at<this.user_input_timeout,this.scene.tile_manager.updateTilesVisibilityCounters()}},{key:"handleViewportUpdate",value:function(t){var e=0<arguments.length&&void 0!==t&&t,n=this._viewport,r=n.width,i=n.height;this.size.css={width:r,height:i},this.size.device={width:Math.round(r*Ti.device_pixel_ratio),height:Math.round(i*Ti.device_pixel_ratio)},this.lookAtManipulator.handleViewportUpdate(),e||this.updateBounds()}},{key:"setLookAtData",value:function(e,n){t._setLookAtDataForManipulator(this.lookAtManipulator,e,n),this.updateBounds()}},{key:"getLookAtData",value:function(e){var n=0<arguments.length&&void 0!==e&&e;return t._getLookAtDataFromManipulator(this.lookAtManipulator,n)}},{key:"getBestLookAtData",value:function(e,n,r){var i=2<arguments.length&&void 0!==r&&r,o=this.lookAtManipulator.clone();return t._setLookAtDataForManipulator(o,e,n),t._getLookAtDataFromManipulator(o,i)}},{key:"getTileLevel",value:function(){return this.lookAtManipulator.getLookAtData().tile_level}},{key:"applyPxOffset",value:function(t){var e=this._offset_buffer;e[0]+=t[0],e[1]+=t[1];var n,r,i=Math.abs(e[0]),o=Math.abs(e[1]);(1<=i||1<=o)&&(n=~~e[0],r=~~e[1],this.lookAtManipulator.applyPxOffset([i<1?0:n,o<1?0:r]),1<=i&&(e[0]-=n),1<=o&&(e[1]-=r),this.updateBounds())}},{key:"setPanning",value:function(t){this.panning=t,this.panning||(this.panning_stop_at=+new Date)}},{key:"markUserInput",value:function(){this.user_input_at=+new Date}},{key:"ready",value:function(){return"number"==typeof this.size.css.width&&"number"==typeof this.size.css.height}},{key:"updateBounds",value:function(){var t,e;this.markUserInput(),this.ready()&&(this.center_tile=Qr.tileForMeters(this.lookAtManipulator.getLookAtData().position,this.lookAtManipulator.getLookAtData().tile_level),t=this.lookAtManipulator.screenToWorld([0,this.size.css.height]),e=this.lookAtManipulator.screenToWorld([this.size.css.width,0]),this.bounds={sw:{x:t[0],y:t[1]},ne:{x:e[0],y:e[1]}},this.scene.tile_manager.updateTilesForView(!0),this.trigger("move"),this.scene.requestRedraw())}},{key:"getTileGridFlatForBBox",value:function(t,e,n,r,i,o){var a,s=4<arguments.length&&void 0!==i?i:0,l=!(5<arguments.length&&void 0!==o)||o,u=this.lookAtManipulator.getLookAtData().tile_level,c=Qr.tileForMeters([e,t],u),h=Qr.tileForMeters([r,n],u);c.x-=s,c.y-=s,h.x+=s,h.y+=s,!1===l&&(a=(1<<u)-1,c.x=Math.min(Math.max(0,c.x),a),c.y=Math.min(Math.max(0,c.y),a),h.x=Math.min(Math.max(0,h.x),a),h.y=Math.min(Math.max(0,h.y),a));for(var p=[],f={},d=c.x;d<=h.x;d++)for(var y=c.y;y<=h.y;y++){var g=_a.coord(Qr.wrapTile({x:d,y:y,z:u},{x:!l,y:!0}));f[g.key]||(f[g.key]=!0,p.push(g))}return p}},{key:"getTileGridFlat",value:function(){return this.getTileGridFlatForBBox(this.bounds.ne.y,this.bounds.sw.x,this.bounds.sw.y,this.bounds.ne.x,this.buffer,this.wrap)}},{key:"getTileGridDistorted",value:function(){return dh(this.lookAtManipulator.getLookAtData(),this.buffer,this.wrap)}},{key:"findVisibleTileCoordinates",value:function(){if(!this.bounds)return[];var t=this.lookAtManipulator.getLookAtData(),e=t.tilt,n=t.heading;return 0===e&&180===n?this.getTileGridFlat():this.getTileGridDistorted()}},{key:"createMatrices",value:function(){this.matrices={},this.matrices.model=new Float64Array(16),this.matrices.model32=new Float32Array(16),this.matrices.model_view=new Float64Array(16),this.matrices.model_view32=new Float32Array(16),this.matrices.normal=new Float64Array(9),this.matrices.normal32=new Float32Array(9),this.matrices.inverse_normal32=new Float32Array(9)}},{key:"setupTile",value:function(t,e){t.setupProgram(this.matrices,e),this.lookAtManipulator.setupMatrices(this.matrices,e)}},{key:"setupProgram",value:function(t){var e=this.lookAtManipulator.getLookAtData();t.uniform("2fv","u_resolution",[this.size.device.width,this.size.device.height]),t.uniform("3fv","u_map_position",[e.position[0],e.position[1],Math.trunc(1e5*e.zoom)/1e5]),t.uniform("1f","u_meters_per_pixel",Qr.metersPerPixel(e.zoom)),t.uniform("1f","u_device_pixel_ratio",Ti.device_pixel_ratio),t.uniform("1f","u_view_pan_snap_timer",this.pan_snap_timer),t.uniform("1i","u_view_panning",this.panning),t.uniform("1f","u_horizon",this.lookAtManipulator.getHorizon()/(this.size.css.height/2)),this.lookAtManipulator.setupProgram(t)}},{key:"isAnimating",value:function(){return this.pan_snap_timer<=.5}},{key:"xyToGeo",value:function(t,e){var n=this.lookAtManipulator.screenToWorld([t,e]),r=Cr(Qr.metersToLatLng(n),2),i=r[0];return{lat:r[1],lng:i}}},{key:"geoToPixel",value:function(t){var e=Qr.latLngToMeters([t.lng,t.lat]);e.push(t.alt||0);var n=this.lookAtManipulator.worldToScreen(e);return{x:Math.floor(n[0]),y:Math.floor(n[1])}}},{key:"geoToMeters",value:function(t){var e=Cr(Qr.latLngToMeters([t.lng,t.lat]),2);return{x:e[0],y:e[1],z:t.alt||0}}},{key:"metersToGeo",value:function(t){var e=Cr(Qr.metersToLatLng([t.x,t.y]),2),n=e[0];return{lat:e[1],lng:n,alt:t.z||0}}},{key:"setZoomConstraints",value:function(t,e){this.lookAtManipulator.setZoomConstraints(t,e)}}],[{key:"_setLookAtDataForManipulator",value:function(t,e,n){var r=e.position,i=e.zoom,o=e.tilt,a=e.heading,s=e.bounds,l={zoom:i,tilt:o,heading:a};if(r&&"number"==typeof r.lng&&"number"==typeof r.lat&&(l.position=Qr.latLngToMeters([r.lng,r.lat])),s){var u=s.getExterior().getLatLngAltArray(),c=u.length/3,h=Array(c);if(s.getBoundingBox().isCDB())for(var p=u[1],f=0,d=0;d<c;d++){var y,g=u[3*d+1];0<d&&(y=g-p,180<Math.abs(y)&&(f+=p<g?-360:360)),p=g,h[d]=Qr.latLngToMeters([g+f,u[3*d]])}else for(var v=0;v<c;v++)h[v]=Qr.latLngToMeters([u[3*v+1],u[3*v]]);l.bounds=h}t.setLookAtData(l,n)}},{key:"_getLookAtDataFromManipulator",value:function(t,e){var n=1<arguments.length&&void 0!==e&&e,r=t.getLookAtData(),i=r.heading,o=r.incline,a=r.tilt,s=r.zoom,l=r.position,u=r.bounds,c=r.unpadded_bounds,h=Cr(Qr.metersToLatLng(l),2),p=h[0],f=h[1],d=new H.geo.LineString;return(n?c:u).forEach((function(t){var e=Qr.metersToLatLng(t);d.pushLatLngAlt(e[1],e[0],0)})),{heading:i,incline:o,tilt:a,zoom:s,bounds:new H.geo.Polygon(d),position:{lat:f,lng:p,alt:l[2]}}}}]),t}(),xh=Sc.PLACEMENT,kh=128/Math.PI,Eh=16384/Math.PI,Th=Object.create(va);Object.assign(Th,Qc),Object.assign(Th,{name:"points",built_in:!0,vertex_shader_src:"uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform bool u_tile_fade_in;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform bool u_view_panning;uniform float u_tilt;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform float u_heading;uniform float u_near_plane;uniform float u_depth_buffer_adjustment;attribute vec4 a_position;attribute vec4 a_shape;attribute vec4 a_color;attribute vec2 a_texcoord;attribute vec2 a_offset;uniform float u_point_type;attribute float a_is_flat;\n#ifdef TANGRAM_IS_TEXT_STYLE\nattribute vec4 a_offsets_alt;attribute vec4 a_pre_angles_alt;attribute vec4 a_angles_alt;attribute vec4 a_offsets;attribute vec4 a_pre_angles;attribute vec4 a_angles;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nattribute float a_is_stick;attribute float a_stick_height;varying float v_is_stick;\n#endif\nvarying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nattribute float a_outline_edge;attribute vec4 a_outline_color;varying float v_outline_edge;varying vec4 v_outline_color;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#define PI 3.14159265359\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvec2 rotate2D(vec2 _st,float _angle){return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle))*_st;}vec3 rotateX3D(vec3 _st,float _angle){return mat3(1.,0.,0.,0.,cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle))*_st;}vec3 rotateZ3D(vec3 _st,float _angle){return mat3(cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle),0.,0.,0.,1.)*_st;}\n#ifdef TANGRAM_IS_TEXT_STYLE\nfloat mix4linear(float a,float b,float c,float d,float x){return mix(mix(a,b,3.*x),mix(b,mix(c,d,3.*(max(x,.66)-.66)),3.*(clamp(x,.33,.66)-.33)),step(0.33,x));}\n#endif\nvoid main(){\n#pragma tangram: setup\n#ifndef TANGRAM_SHOW_HIDDEN_LABELS\nif(a_shape.w==0.){gl_Position=vec4(0.,0.,0.,1.);return;}\n#else\nif(a_shape.w==0.){v_label_hidden=1.;}else{v_label_hidden=0.;}\n#endif\nv_alpha_factor=1.0;v_color=a_color;v_texcoord=a_texcoord;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nv_outline_color=a_outline_color;v_outline_edge=a_outline_edge;if(u_point_type==TANGRAM_POINT_TYPE_SHADER){v_outline_color=a_outline_color;v_outline_edge=a_outline_edge;float size=abs(a_shape.x/128.);v_texcoord=sign(a_shape.xy)*(size+1.0)/size;size+=2.0;v_aa_offset=2.0/size;}\n#endif\nvec4 position=u_modelView*vec4(a_position.xyz,1.);vec4 shape=vec4(a_shape.xy,0.,0.);vec2 offset=vec2(a_offset.x,-a_offset.y);\n#ifdef TANGRAM_POINT_DRAW_STICK\nv_is_stick=a_is_stick;float scaled_stick_height=(sin(u_tilt+(1.5*PI))+1.0)*a_stick_height;offset.y+=(1.0-a_is_stick)*scaled_stick_height;\n#endif\nfloat zoom=clamp(u_map_position.z-u_tile_origin.z,0.,1.);float theta=a_shape.z/4096.;float heading=u_heading;float delta=(heading-PI);float new_theta=theta-delta;float reversed=abs(new_theta)>PI/2. ? 1. : 0.;if(a_is_flat==1.0){\n#ifdef TANGRAM_IS_TEXT_STYLE\nif(a_offsets[0]!=0.){vec4 angles_scaled;vec4 pre_angles_scaled;vec4 offsets_scaled;if(reversed==1.){offsets_scaled=a_offsets_alt*4.;angles_scaled=(PI/16384.)*a_angles_alt;pre_angles_scaled=(PI/128.)*a_pre_angles_alt;}else{offsets_scaled=a_offsets*4.;angles_scaled=(PI/16384.)*a_angles;pre_angles_scaled=(PI/128.)*a_pre_angles;}float pre_angle=mix4linear(pre_angles_scaled[0],pre_angles_scaled[1],pre_angles_scaled[2],pre_angles_scaled[3],zoom);float angle=mix4linear(angles_scaled[0],angles_scaled[1],angles_scaled[2],angles_scaled[3],zoom);float offset_curve=mix4linear(offsets_scaled[0],offsets_scaled[1],offsets_scaled[2],offsets_scaled[3],zoom);shape.xy=rotate2D(shape.xy,pre_angle+PI*reversed);shape.x+=offset_curve;shape.xy=rotate2D(shape.xy,angle);shape.xy+=rotate2D(offset,theta);}else{shape.xy=rotate2D(shape.xy+offset*256.,theta+(PI*reversed));}\n#else\nshape.xy=rotate2D(shape.xy+offset*256.,theta);\n#endif\nshape.xy/=pow(2.,4.+(u_map_position.z-u_tile_origin.w));shape=u_modelView*shape;position+=shape;}else{shape.xy/=256.;\n#ifdef TANGRAM_POINT_DRAW_STICK\nshape.y*=1.0+(scaled_stick_height-1.0)*a_is_stick;\n#endif\nshape.xy=rotate2D(shape.xy+offset,theta);}\n#ifdef TANGRAM_FADE_IN_RATE\nif(u_tile_fade_in){v_alpha_factor*=clamp(u_visible_time*TANGRAM_FADE_IN_RATE,0.,1.);}\n#endif\n#ifdef TANGRAM_FADE_ON_ZOOM_OUT\nv_alpha_factor*=clamp(1.+TANGRAM_FADE_ON_ZOOM_OUT_RATE*(u_map_position.z-u_tile_origin.z),0.,1.);\n#endif\nv_world_position=u_model*position;v_world_position.xy+=shape.xy*u_meters_per_pixel;v_world_position=wrapWorldPosition(v_world_position);\n#pragma tangram: position\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);/***Due to the precision loss on depth buffer,we had a z-fighting of translucent points when the distance to the camera was big.*For more information about the problem see: https:*For more information about the fix see: https:*position.z=(2.0*log(position.w/u_near_plane)/log(u_far_plane/u_near_plane)-1.0)*position.w;*/position.z=(log(position.w/u_near_plane)*u_depth_buffer_adjustment-1.0)*position.w;\n#endif\nif(a_is_flat!=1.){position.xy+=shape.xy*position.w*2.*u_device_pixel_ratio/u_resolution;}\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_SHADER){position.xy+=sign(shape.xy)*position.w*u_device_pixel_ratio/u_resolution;}\n#endif\nif(!u_view_panning){snapToPixelGrid(position);}gl_Position=position;}",fragment_shader_src:"uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_texture;uniform float u_point_type;uniform bool u_apply_color_blocks;varying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nvarying vec4 v_outline_color;varying float v_outline_edge;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nvarying float v_is_stick;\n#endif\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#ifdef TANGRAM_HAS_SHADER_POINTS\nfloat _tangram_antialias(float l,float R){float low=R-v_aa_offset;float high=R+v_aa_offset;return 1.-smoothstep(low,high,l);}\n#endif\nvoid mixTextureColor(inout vec4 color){\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_TEXTURE){color*=texture2D(u_texture,v_texcoord);}else if(u_point_type==TANGRAM_POINT_TYPE_LABEL){color=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);}else if(u_point_type==TANGRAM_POINT_TYPE_SHADER){float outline_edge=v_outline_edge;vec4 outlineColor=v_outline_color;float l=length(v_texcoord);float outer_alpha=_tangram_antialias(l,1.);float fill_alpha=_tangram_antialias(l,1.-v_outline_edge*0.5)*color.a;float stroke_alpha=(outer_alpha-_tangram_antialias(l,1.-v_outline_edge))*outlineColor.a;\n#ifdef TANGRAM_BLEND_ADD\ncolor.a=stroke_alpha+fill_alpha;color.rgb=color.rgb*fill_alpha+outlineColor.rgb*stroke_alpha;\n#else\ncolor.a=stroke_alpha+fill_alpha*(1.-stroke_alpha);color.rgb=mix(color.rgb*fill_alpha,outlineColor.rgb,stroke_alpha)/max(color.a,0.001);\n#endif\n}\n#else\ncolor=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);\n#endif\nif(u_apply_color_blocks){\n#pragma tangram: color\n#pragma tangram: filter\n}color.a*=v_alpha_factor;\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nif(v_label_hidden>0.){color.a*=0.5;color.rgb=vec3(1.,0.,0.);}\n#endif\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY) && !defined(TANGRAM_BLEND_ADD)\nif(color.a<TANGRAM_ALPHA_TEST){discard;}\n#endif\n}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;\n#ifdef TANGRAM_POINT_DRAW_STICK\nif(v_is_stick==0.0){mixTextureColor(color);}\n#else\nmixTextureColor(color);\n#endif\ngl_FragColor=color;}",selection:!0,collision:!0,blend:"overlay",init:function(t){var e=0<arguments.length&&void 0!==t?t:{};va.init.call(this,e),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!0,this.defines.TANGRAM_POINT_TYPE_TEXTURE=1,this.defines.TANGRAM_POINT_TYPE_LABEL=2,this.defines.TANGRAM_POINT_TYPE_SHADER=3,this.defines.TANGRAM_POINT_DRAW_STICK=!!this.stick,this.collision_group_points=this.name+"-points",this.collision_group_text=this.name+"-text",this.reset()},setupDefines:function(){"overlay"!==this.blend&&(this.defines.TANGRAM_LAYER_ORDER=!0),this.defines.TANGRAM_FADE_ON_ZOOM_OUT=!0,this.defines.TANGRAM_FADE_ON_ZOOM_OUT_RATE=2,Ql.suppress_label_fade_in||this.suppress_fade?(this.fade_in_time=0,this.defines.TANGRAM_FADE_IN_RATE=null):(this.fade_in_time=.15,this.defines.TANGRAM_FADE_IN_RATE=1/this.fade_in_time),Ql.suppress_snap_animation||(this.defines.TANGRAM_VIEW_PAN_SNAP_RATE=2),Ql.show_hidden_labels&&(this.defines.TANGRAM_SHOW_HIDDEN_LABELS=!0)},reset:function(){this.queues={},this.resetText(),this.texture_missing_sprites={}},addFeature:function(t,e,n){var r,i,o,a=n.tile,s={};if(s.color=this.parseColor(e.color,n),s.texture=e.texture,s.label_texture=null,s.color||s.texture){if(this.hasSprites(s)){if(!(r=this.parseSprite(s,e,n)))return;s.texcoords=r.texcoords}if(s.size=e.size,s.size){if(s.size=go.evalCachedPointSizeProperty(e.size,r,n),null==s.size)return void ki({level:"warn",once:!0},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"'size' includes % and/or ratio-based scaling (".concat(JSON.stringify(e.size.value),"); ")+"these can only applied to sprites, but no sprite was specified, skipping features in layer");"number"==typeof s.size&&(s.size=[s.size,s.size])}else s.size=r&&r.css_size||[16,16];e.outline&&(s.outline_width=go.evalCachedProperty(e.outline.width,n)||go.defaults.outline.width,s.outline_color=this.parseColor(e.outline.color,n)),s.outline_edge_pct=0,s.outline_width&&s.outline_color&&(i=s.outline_width,s.size[0]+=i,s.size[1]+=i,s.outline_edge_pct=i/Math.min(s.size[0],s.size[1])*2),s.size[0]=Math.min(s.size[0],256),s.size[1]=Math.min(s.size[1],256),s.placement=e.placement,s.placement_min_length_ratio=go.evalCachedProperty(e.placement_min_length_ratio,n),s.placement===xh.SPACED&&e.placement_spacing&&(s.placement_spacing=go.evalCachedProperty(e.placement_spacing,n)),s.angle=go.evalProperty(e.angle,n)||0,s.elevate_by_altitude=!!e.elevate_by_altitude,s.z=e.z?Jr.clamp(go.evalCachedDistanceProperty(e.z,n),0,32767):go.defaults.z,s.flat=e.flat,s.tile_edges=e.tile_edges,this.computeLayout(s,t,e,n,a),e.stick&&!s.flat&&(o=go.parseNumber(go.evalProperty(e.stick.height,n)),s.stick={color:this.parseColor(e.stick.color,n)||go.defaults.color,height:o?Math.max(o,0):0});var l=e.text&&!1!==go.evalProperty(e.text.visible,n)&&this.parseTextFeature(t,e.text,n,a);Array.isArray(l)&&ki({level:"warn",once:!(l=null)},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"cannot use boundary labels (e.g. 'text_source: { left: ..., right: ... }') for 'text' labels attached to 'points'; "+"provided 'text_source' value was ".concat(JSON.stringify(e.text.text_source))),l&&(l.layout.parent=s,l.layout.priority=e.text.priority?Math.max(l.layout.priority,s.priority+.5):s.priority+.5,l.layout.move_into_tile=!1,To.addStyle(this.collision_group_text,a.id)),this.queueFeature({feature:t,draw:e,context:n,style:s,text_feature:l},a),To.addStyle(this.collision_group_points,a.id)}},hasSprites:function(t){return t.texture&&this.textureManager.textures[t.texture]&&this.textureManager.textures[t.texture].sprites},getSpriteInfo:function(t,e){var n=this.textureManager.textures[t.texture].sprites[e]&&this.textureManager.getSpriteInfo(t.texture,e);return e&&!n?(this.texture_missing_sprites[t.texture]=this.texture_missing_sprites[t.texture]||{},this.texture_missing_sprites[t.texture][e]||(ki("debug","Style: in style '".concat(this.name,"', could not find sprite '").concat(e,"' for texture '").concat(t.texture,"'")),this.texture_missing_sprites[t.texture][e]=!0)):n&&(n.sprite=e),n},parseSprite:function(t,e,n){var r=go.evalProperty(e.sprite,n);return this.getSpriteInfo(t,r)||this.getSpriteInfo(t,e.sprite_default)},queueFeature:function(t,e){this.tile_data[e.id]&&this.queues[e.id]||this.startData(e),this.queues[e.id]=this.queues[e.id]||[],this.queues[e.id].push(t)},endData:function(t){var e=this;if(t.canceled)return ki("trace","Style ".concat(this.name,": stop tile build because tile was canceled: ").concat(t.key)),Promise.resolve();var n=this.queues[t.id];delete this.queues[t.id];var r=[],i=[];return n.forEach((function(t){for(var n=t.style,o=t.feature,a=o.geometry,s=e.buildLabels(n.size,a,n),l=0;l<s.length;l++){var u,c=s[l],h={feature:o,draw:t.draw,context:t.context,style:n,label:c};i.push(h),t.text_feature&&(u={feature:o,draw:t.text_feature.draw,context:t.context,text:t.text_feature.text,text_settings_key:t.text_feature.text_settings_key,layout:t.text_feature.layout,point_label:c,linked:h},r.push(u),t.draw.text.optional||(h.linked=u))}})),Promise.all([To.collide(i,this.collision_group_points,t.id).then((function(t){t.forEach((function(t){e.feature_style=t.style,e.feature_style.label=t.label,e.feature_style.linked=t.linked,va.addFeature.call(e,t.feature,t.draw,t.context)}))})),this.collideAndRenderTextLabels(t,this.collision_group_text,r)]).then((function(n){var r=Cr(n,2)[1],i=r.labels,o=r.texts;return i&&o&&i.forEach((function(t){var n=t.text_settings_key,r=o[n]&&o[n][t.text],i=e.feature_style;i.label=t.label,i.linked=t.linked,i.size=r.size.logical_size,i.angle=0,t.label.text_data={text_info:r,text_settings_key:n,text:t.text},i.label_texture=e.textureManager.default,va.addFeature.call(e,t.feature,t.draw,t.context)})),e.freeText(t),va.endData.call(e,t)}))},_preprocess:function(t){t.color=go.createColorPropertyCache(t.color),t.texture=void 0!==t.texture?t.texture:this.texture,t.outline&&(t.outline.color=go.createColorPropertyCache(t.outline.color),t.outline.width=go.createPropertyCache(t.outline.width,go.parsePositiveNumber)),t.z=go.createPropertyCache(t.z,go.parseUnits);try{t.size=go.createPointSizePropertyCache(t.size)}catch(o){return ki({level:"warn",once:!0},"Layer '".concat(t.layers[t.layers.length-1],"': ")+"".concat(o," (").concat(JSON.stringify(t.size),"), skipping features in layer")),null}return t.offset=go.createPropertyCache(t.offset,(function(t){return Array.isArray(t)&&t.map(go.parseNumber)})),t.buffer=go.createPropertyCache(t.buffer,(function(t){return(Array.isArray(t)?t:[t,t]).map(go.parsePositiveNumber)})),t.repeat_distance=go.createPropertyCache(t.repeat_distance,go.parseNumber),null==t.repeat_group&&(t.repeat_group=t.layers.join("-")),t.placement=xh[t.placement&&t.placement.toUpperCase()],null==t.placement&&(t.placement=xh.VERTEX),t.placement_spacing=null!=t.placement_spacing?t.placement_spacing:80,t.placement_spacing=go.createPropertyCache(t.placement_spacing,go.parsePositiveNumber),t.placement_min_length_ratio=null!=t.placement_min_length_ratio?t.placement_min_length_ratio:1,t.placement_min_length_ratio=go.createPropertyCache(t.placement_min_length_ratio,go.parsePositiveNumber),"number"==typeof t.angle?t.angle=t.angle*Math.PI/180:t.angle=t.angle||0,t.text=this.preprocessText(t.text),t.text&&(t.text.variantKey=t.variantKey,t.text.group=t.group,t.text.layers=t.layers,t.text.order=t.order,t.text.repeat_group=t.text.repeat_group||t.repeat_group,t.text.anchor=t.text.anchor||this.default_anchor,t.text.optional="boolean"==typeof t.text.optional&&t.text.optional,t.text.interactive=t.text.interactive||t.interactive),t.stick&&(t.stick.color=go.createColorPropertyCache(t.stick.color)),t},default_anchor:["bottom","top","right","left"],computeLayout:function(t,e,n,r,i){var o=t||{};o.id=e,o.units_per_pixel=i.units_per_pixel||1,o.collide=!1!==n.collide,o.anchor=n.anchor,o.offset=go.evalCachedProperty(n.offset,r)||go.zeroPair,o.buffer=go.evalCachedProperty(n.buffer,r)||go.zeroPair,o.repeat_distance=go.evalCachedProperty(n.repeat_distance,r),o.repeat_distance&&(o.repeat_distance*=o.units_per_pixel,o.repeat_scale=1,"function"==typeof n.repeat_group?o.repeat_group=n.repeat_group(r):o.repeat_group=n.repeat_group);var a=n.priority;return null!=a?"function"==typeof a&&(a=a(r)):a=-1>>>0,o.priority=a,o},buildTextLabels:function(t,e){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=this.texts[t.id][i.text_settings_key][i.text].size.collision_size;i.label=new Sc(i.point_label.position,o,i.point_label.isFlat(),i.layout),n.push(i)}return n},buildLabels:function(t,e,n){var r=!!n.flat,i=[];if("Point"===e.type)i.push(new Sc(e.coordinates,t,r,n));else if("MultiPoint"===e.type)for(var o=e.coordinates,a=0;a<o.length;++a){var s=o[a];i.push(new Sc(s,t,r,n))}else if("LineString"===e.type)for(var l=Oc(e.coordinates,t,r,n),u=0;u<l.length;++u)i.push(l[u]);else if("MultiLineString"===e.type)for(var c=e.coordinates,h=0;h<c.length;h++)for(var p=Oc(c[h],t,r,n),f=0;f<p.length;++f)i.push(p[f]);else if("Polygon"===e.type)if(n.placement===xh.CENTROID){var d=Qr.centroid(e.coordinates);i.push(new Sc(d,t,r,n))}else for(var y=e.coordinates,g=0;g<y.length;g++)for(var v=Oc(y[g],t,r,n),m=0;m<v.length;++m)i.push(v[m]);else if("MultiPolygon"===e.type)if(n.placement===xh.CENTROID){var b=Qr.multiCentroid(e.coordinates);i.push(new Sc(b,t,r,n))}else for(var _=e.coordinates,w=0;w<_.length;w++)for(var x=_[w],k=0;k<x.length;k++)for(var E=Oc(x[k],t,r,n),T=0;T<E.length;++T)i.push(E[T]);return i},makeVertexTemplate:function(t,e){var n,r=t.color||go.defaults.color,i=e.vertex_data.vertex_layout;return this.fillVertexTemplate(i,"a_position",0,{size:2}),this.fillVertexTemplate(i,"a_position",t.z||0,{size:1,offset:2}),this.fillVertexTemplate(i,"a_position",this.scaleOrder(t.order),{size:1,offset:3}),this.fillVertexTemplate(i,"a_shape",0,{size:4}),this.fillVertexTemplate(i,"a_shape",t.label.layout.collide?0:1,{size:1,offset:3}),this.fillVertexTemplate(i,"a_texcoord",0,{size:2}),this.fillVertexTemplate(i,"a_offset",0,{size:2}),this.fillVertexTemplate(i,"a_color",ua.mult(r,255),{size:4}),this.defines.TANGRAM_HAS_SHADER_POINTS&&e.variant.shader_point&&(n=t.outline_color||go.defaults.outline.color,this.fillVertexTemplate(i,"a_outline_color",ua.mult(n,255),{size:4}),this.fillVertexTemplate(i,"a_outline_edge",t.outline_edge_pct||go.defaults.outline.width,{size:1})),this.selection&&this.fillVertexTemplate(i,"a_selection_color",ua.mult(t.selection_color,255),{size:4}),this.fillVertexTemplate(i,"a_is_flat",0,{size:1}),this.defines.TANGRAM_POINT_DRAW_STICK&&t.stick&&(this.fillVertexTemplate(i,"a_is_stick",0,{size:1}),this.fillVertexTemplate(i,"a_stick_height",t.stick.height,{size:1})),this.vertex_template},buildQuad:function(t,e,n,r,i,o,a,s,l,u,c,h,p,f,d,y,g,v,m){return e[0]<=0||e[1]<=0?0:function(t,e,n,r){var i,o,a,s,l,u,c=r.quad,h=r.offset,p=r.offsets,f=r.offsets_alt,d=r.pre_angles,y=r.pre_angles_alt,g=r.angle,v=r.angles,m=r.angles_alt,b=r.is_flat,_=r.elevate_by_altitude,w=r.build_stick_points,x=r.color,k=r.stick_color,E=r.curve,T=r.texcoord_scale,A=r.texcoord_normalize,S=r.pre_angles_normalize,M=r.angles_normalize,I=r.offsets_normalize,O=(O=r.quad_normalize)||1,C=c[0]/2*O,L=c[1]/2*O,P=[[-C,-L],[C,-L],[C,L],[-C,L]],R=e.vertex_elements,N=e.vertex_count,j=e.vertex_layout.index,D=j.a_texcoord,z=j.a_position,F=j.a_shape,B=j.a_offset,G=j.a_offsets,H=j.a_offsets_alt,U=j.a_pre_angles,q=j.a_pre_angles_alt,V=j.a_angles,Z=j.a_angles_alt,W=j.a_is_flat,Y=j.a_is_stick,K=j.a_color;D&&(A=A||1,u=[[o=(i=Cr(T||du,4))[0],a=i[1]],[s=i[2],a],[s,l=i[3]],[o,l]]);for(var X=0,J=t.length,$=0;$<J;$++){var Q=t[$];if(w){for(var tt=.5*O,et=+O,nt=[[-tt,0],[+tt,0],[+tt,et],[-tt,et]],rt=0;rt<4;rt++)D&&(n[D+0]=u[rt][0]*A,n[D+1]=u[rt][1]*A),n[z+0]=Q[0],n[z+1]=Q[1],_&&(n[z+2]=Jr.clamp(Q[2],0,32767)),n[F+0]=nt[rt][0],n[F+1]=nt[rt][1],n[F+2]=0,n[K+0]=k[0],n[K+1]=k[1],n[K+2]=k[2],n[K+3]=k[3],n[Y+0]=255,e.addVertex(n);R.push(N+0),R.push(N+1),R.push(N+2),R.push(N+2),R.push(N+3),R.push(N+0),N+=4,X+=2}for(var it=0;it<4;it++)D&&(n[D+0]=u[it][0]*A,n[D+1]=u[it][1]*A),n[z+0]=Q[0],n[z+1]=Q[1],_&&(n[z+2]=Jr.clamp(Q[2],0,32767)),n[F+0]=P[it][0],n[F+1]=P[it][1],n[F+2]=g,n[K+0]=x[0],n[K+1]=x[1],n[K+2]=x[2],n[K+3]=x[3],n[B+0]=h[0],n[B+1]=h[1],n[W+0]=b?255:0,w&&(n[Y+0]=0),E&&(n[U+0]=S*d[0],n[U+1]=S*d[1],n[U+2]=S*d[2],n[U+3]=S*d[3],n[V+0]=M*v[0],n[V+1]=M*v[1],n[V+2]=M*v[2],n[V+3]=M*v[3],n[G+0]=I*p[0],n[G+1]=I*p[1],n[G+2]=I*p[2],n[G+3]=I*p[3],f&&(n[H+0]=I*f[0],n[H+1]=I*f[1],n[H+2]=I*f[2],n[H+3]=I*f[3],n[q+0]=S*y[0],n[q+1]=S*y[1],n[q+2]=S*y[2],n[q+3]=S*y[3],n[Z+0]=M*m[0],n[Z+1]=M*m[1],n[Z+2]=M*m[2],n[Z+3]=M*m[3])),e.addVertex(n);R.push(N+0),R.push(N+1),R.push(N+2),R.push(N+2),R.push(N+3),R.push(N+0),N+=4,X+=2}return X}(t,d,y,{quad:e,quad_normalize:256,offset:s,offsets:l,offsets_alt:u,pre_angles:o,pre_angles_alt:a,angle:4096*n,angles:r,angles_alt:i,is_flat:p,elevate_by_altitude:f,build_stick_points:g,stick_color:g&&ua.mult(v,255),color:ua.mult(m||go.defaults.color,255),curve:h,texcoord_scale:c,texcoord_normalize:65535,pre_angles_normalize:kh,angles_normalize:Eh,offsets_normalize:64})},build:function(t,e,n){var r=t.label;return"curved"===r.type?this.buildCurvedLabel(r,t,e,n):this.buildStraightLabel(r,t,e,n)},buildStraightLabel:function(t,e,n,r){var i,o=this.makeVertexTemplate(e,n),a=t.angle||e.angle,s="point"!==t.type?(i=e.size[t.type],du):(i=e.size,e.texcoords||du);n.uniforms=n.uniforms||{},e.label_texture?(n.uniforms.u_texture=e.label_texture,n.uniforms.u_point_type=2,n.uniforms.u_apply_color_blocks=!1):(e.texture?(n.uniforms.u_texture=e.texture,n.uniforms.u_point_type=1):(n.uniforms.u_texture=this.textureManager.default,n.uniforms.u_point_type=3),n.uniforms.u_apply_color_blocks=!0);var l=t.offset,u=this.defines.TANGRAM_POINT_DRAW_STICK&&!e.label_texture&&e.stick&&0<e.stick.height,c=this.buildQuad([t.position],i,a,null,null,null,null,l,null,null,s,!1,t.isFlat(),e.elevate_by_altitude,n.vertex_data,o,u,u&&e.stick.color,e.color),h=e.linked&&e.linked.label.id;return this.trackLabel(t,h,n,c,r,u),c},buildCurvedLabel:function(t,e,n,r){for(var i=this.makeVertexTemplate(e,n),o=t.angle,a=0,s=0;s<2;s++)for(var l=0;l<t.num_segments;l++){var u=e.size[t.type][l],c=du,h=this.getTileMesh(r.tile,this.getMeshVariantTypeForDraw(e));h.uniforms=h.uniforms||{},h.uniforms.u_texture=e.label_texture,h.uniforms.u_point_type=2,h.uniforms.u_apply_color_blocks=!1;var p=t.offset||[0,0],f=t.position,d=t.angles[l],y=t.offsets[l],g=t.pre_angles[l],v=t.num_segments-l-1,m=t.alt_angles[v],b=t.alt_pre_angles[v],_=t.alt_offsets[v],w=this.buildQuad([f],u,o,d,m,g,b,p,y,_,c,!0,t.isFlat(),e.elevate_by_altitude,h.vertex_data,i,!1,!1,e.color);a+=w;var x=e.linked&&e.linked.label.id;this.trackLabel(t,x,n,w,r,!1)}return a},trackLabel:function(t,e,n,r,i,o){var a=5<arguments.length&&void 0!==o&&o;n.labels=n.labels||{},n.labels.collision=n.labels.collision||{},n.labels["non-collision"]=n.labels["non-collision"]||{};var s=t.layout.collide?n.labels.collision:n.labels["non-collision"];s[t.id]=s[t.id]||{container:{label:t.text_data?Object.assign(t.toJSON(),{text_data:t.text_data}):t.toJSON(),linked:e},ranges:[]};var l=2*r,u=n.vertex_data.offset-n.vertex_data.stride*l;s[t.id].ranges.push([u,l,a])},buildLines:function(t,e,n,r){return this.build(e,n,r)},buildPoints:function(t,e,n,r){return this.build(e,n,r)},buildPolygons:function(t,e,n,r){return this.build(e,n,r)},vertexLayoutForMeshVariant:function(t){var e;return this.vertex_layout||(e=[{name:"a_position",size:4,type:iu.SHORT,normalized:!1},{name:"a_shape",size:4,type:iu.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:iu.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:iu.SHORT,normalized:!1},{name:"a_color",size:4,type:iu.UNSIGNED_BYTE,normalized:!0},{name:"a_outline_color",size:4,type:iu.UNSIGNED_BYTE,normalized:!0,static:[0,0,0,0]},{name:"a_outline_edge",size:1,type:iu.FLOAT,normalized:!1,static:0},{name:"a_selection_color",size:4,type:iu.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:iu.UNSIGNED_BYTE,normalized:!0}],this.defines&&this.defines.TANGRAM_POINT_DRAW_STICK&&e.push({name:"a_is_stick",size:1,type:iu.UNSIGNED_BYTE,normalized:!0},{name:"a_stick_height",size:1,type:iu.FLOAT,normalized:!1}),this.vertex_layout=new pu(e),(e=e.map((function(t){return Object.assign({},t)}))).forEach((function(t){"a_outline_color"!==t.name&&"a_outline_edge"!==t.name||(t.static=null)})),this.vertex_layout_shader_point=new pu(e)),t.shader_point?this.vertex_layout_shader_point:this.vertex_layout},computeVariantForDraw:function(t){var e=t.label_texture||t.texture||this.default_mesh_variant.key;return{key:e,shader_point:e===this.default_mesh_variant.key,order:t.label_texture?1:0}},makeMesh:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:{};return r=Object.assign({},r,{fade_in_time:this.fade_in_time}),va.makeMesh.call(this,t,e,r)}});var Ah=[0,.33,.66,.99],Sh=function(t,e,n,r,i){for(var o=[{type:"straight",tolerance:i.no_curving?1.8:1.5},{type:"curved"},{type:"straight",tolerance:2.3}],a=0;a<o.length;a++){var s=o[a],l=void 0;if("straight"===s.type?l=new Ih(e,n,r,i,s.tolerance):"curved"===s.type&&!i.no_curving&&2<n.length&&(l=new Oh(t,n,r,i)),l&&!l.throw_away)return l}return!1},Mh=function(){function t(e,n){mr(this,t),this.id=bc.nextLabelId(),this.layout=n,this.position=[],this.angle=0,this.offset=n.offset.slice(),this.unit_scale=this.layout.units_per_pixel,this.type="",this.throw_away=!1,this._is_flat=e,this._circles=void 0,this.placed=null}return _r(t,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,angle:this.angle,breach:this.breach,layout:_c(this.layout),circles:this.getBoundingCircles()}}},{key:"inTileBounds",value:function(){var t=this.getAABB(),e=t.left,n=t.top,r=t.right,i=t.bottom;return Ti.pointInTile([e,n])&&Ti.pointInTile([r,i])}},{key:"getAABBForSegment",value:function(t,e,n,r){var i,o=this.unit_scale,a=e/2,s=n/2,l=Cr(t,2),u=l[0],c=l[1];0===this.offset[0]&&0===this.offset[1]||(u+=(i=ua.rot(this.offset,this.angle))[0]*o,c-=i[1]*o);var h=[[Math.cos(r),-Math.sin(r)],[Math.sin(r),Math.cos(r)]],p=ua.multMatrix(h,[-a,-s]),f=ua.multMatrix(h,[a,-s]),d=ua.multMatrix(h,[a,s]),y=ua.multMatrix(h,[-a,s]);return{left:u+Math.min(p[0],f[0],d[0],y[0]),top:c+Math.max(p[1],f[1],d[1],y[1]),right:u+Math.max(p[0],f[0],d[0],y[0]),bottom:c+Math.min(p[1],f[1],d[1],y[1])}}},{key:"isFlat",value:function(){return this._is_flat}},{key:"getBoundingCircles",value:function(){}},{key:"getAABB",value:function(){}}],[{key:"splitLineByOrientation",value:function(t){for(var e=[t[0]],n=0,r=0,i=0,o=e,a=!1,s=1;s<t.length;s++){var l=t[s],u=t[s-1],c=ua.length(ua.sub(l,u));l[0]>u[0]?1===i?(e.push(l),r<(n+=c)&&(o=e,r=n,a=!1)):(e=[u,l],r<(n=c)&&(o=e,r=n,a=!1),i=1):l[0]<u[0]?-1===i?(e.unshift(l),r<(n+=c)&&(o=e,r=n,a=!0)):(e=[l,u],r<(n=c)&&(o=e,r=n,a=!0),i=-1):(-1===i?e.unshift(l):(e.push(l),i=1),r<(n+=c)&&(o=e,r=n,a=-1===i))}return[o,a]}}]),t}(),Ih=function(){xr(e,Mh);var t=Ir(e);function e(n,r,i,o,a){var s;return mr(this,e),(s=t.call(this,i,o)).type="straight",s.size=n,s.throw_away=!s.fit(n,r,o,a),s}return _r(e,[{key:"fit",value:function(t,e,n,r){var i,o=this.unit_scale,a=Cr(Mh.splitLineByOrientation(e),2);e=a[0],i=a[1],"number"==typeof n.orientation&&(this.offset[1]+=1.2*(t[1]-n.vertical_buffer),i&&(this.offset[1]*=-1),-1===n.orientation&&(this.offset[1]*=-1));for(var s=Lh(e),l=t[0]*o,u=0;u<e.length-1;u++)for(var c=e[u],h=0,p=0,f=u+1,d=void 0;f<e.length;){var y=e[f-1],g=e[f],v=Ch(y,g);if(f!==u+1&&(h+=function(t,e){var n,r;for(r=e<t?(n=e,t):(n=t,e);r-n>Math.PI;)n+=2*Math.PI;return Math.abs(r-n)}(v,d)),.1<Math.abs(h))break;if(l/(p+=s[f-1])<r){var m=ua.mult(ua.add(c,g),.5);return this.angle=-v,Math.abs(this.angle-Math.PI/2)<.01&&(this.angle=-Math.PI/2,"number"==typeof n.orientation&&(this.offset[1]*=-1)),this.position=m,this.breach=!this.inTileBounds(),!0}d=v,f++}return!1}},{key:"getBoundingCircles",value:function(){var t,e,n,r,i,o,a,s,l,u,c,h,p,f;return this._circles||(t=this.unit_scale,i=-(n=(e=this.size[0]/2*t)*Math.cos(this.angle)),o=-(r=e*Math.sin(this.angle)),a=this.offset[0]*t,s=this.offset[1]*t,u=(l=Cr(this.position,2))[0],c=l[1],c*=-1,a&&(h=[n,r],ua.normalize(h),h[0]*=a,h[1]*=a,u+=h[0],c+=h[1]),s&&(p=[r,-n],ua.normalize(p),p[0]*=s,p[1]*=s,u-=p[0],c-=p[1]),n+=u,r+=c,i+=u,o+=c,f=this.size[1]/2*t,this._circles=Ac(n,r,i,o,f)),this._circles}},{key:"getAABB",value:function(){var t,e,n,r,i;return this._aabb||(t=this.unit_scale,e=this.size,n=this.layout.buffer,r=(e[0]+2*n[0])*t,i=(e[1]+2*n[1])*t,this._aabb=this.getAABBForSegment(this.position,r,i,this.angle)),this._aabb}}]),e}(),Oh=function(){xr(e,Mh);var t=Ir(e);function e(n,r,i,o){var a;return mr(this,e),(a=t.call(this,i,o)).type="curved",a.positions=[],a.angles=[],a._aabbs=[],a.pre_angles=[],a.offsets=[],a.num_segments=n.length,a.sizes=n,a.alt_angles=[],a.alt_pre_angles=[],a.alt_offsets=[],a.throw_away=!a.fit(a.sizes,r,o),a}return _r(e,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,breach:this.breach,layout:_c(this.layout),circles:this.getBoundingCircles()}}},{key:"fit",value:function(t,n,r){var i,o=this.unit_scale,a=Math.max.apply(Math,Lr(t.map((function(t){return t[1]})))),s=a*o,l=Cr(Mh.splitLineByOrientation(n),2);n=l[0],i=l[1],"number"==typeof r.orientation&&(this.offset[1]+=1.2*(a-r.vertical_buffer),i&&(this.offset[1]*=-1),-1===r.orientation&&(this.offset[1]*=-1));var u=Lh(n),c=t.map((function(t){return t[0]*o})),h=u.reduce((function(t,e){return t+e}),0),p=c.reduce((function(t,e){return t+e}),0);if(h<p)return!1;var f=n.length-1;if(f<2)return!1;var d=e.curvaturePlacement(n,h,u,p,0,f),y=n[d];if(-1===d||f-d<2)return!1;this.position=y;for(var g=0;g<c.length;g++){this.positions[g]=[],this.offsets[g]=[],this.angles[g]=[],this.pre_angles[g]=[];for(var v=0;v<Ah.length;v++){var m=Ah[v],b=Cr(e.scaleLine(m,n),2),_=b[0],w=b[1],x=(y=_[d],e.placeAtIndex(d,_,w,c)),k=x.positions,E=x.offsets,T=x.angles,A=x.pre_angles,S=E.map((function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])/o}));if(0===m){this.angle=1/T.length*T.reduce((function(t,e){return t+e}));for(var M=0;M<k.length;M++){var I=k[M],O=A[M],C=c[M],L=O+T[M];this._aabbs.push(this.getAABBForSegment(I,C,s,L))}}this.positions[g].push(k[g]),this.offsets[g].push(S[g]),this.angles[g].push(T[g]),this.pre_angles[g].push(A[g])}}c=t.slice().reverse().map((function(t){return t[0]*o}));for(var P=0;P<c.length;P++){this.alt_offsets[P]=[],this.alt_angles[P]=[],this.alt_pre_angles[P]=[];for(var R=0;R<Ah.length;R++){var N=Ah[R],j=Cr(e.scaleLine(N,n),2),D=j[0],z=j[1];y=D[d];var F=e.placeAtIndex(d,D,z,c),B=F.offsets,G=F.angles,H=F.pre_angles,U=B.map((function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])/o}));0===N&&(this.alt_angle=1/G.length*G.reduce((function(t,e){return t+e}))),this.alt_offsets[P].push(U[P]),this.alt_angles[P].push(G[P]),this.alt_pre_angles[P].push(H[P])}}return!0}},{key:"getBoundingCircles",value:function(){if(!this._circles){for(var t=[],e=this.unit_scale,n=0;n<this.positions.length;n++){var r=this.sizes[n],i=this.angles[n][0],o=this.positions[n][0],a=r[0]/2*e,s=a*Math.cos(i),l=a*Math.sin(i),u=-s,c=-l,h=Cr(o,2),p=h[0],f=h[1],d=Ac(s+=p,l+=f*=-1,u+=p,c+=f,r[1]/2*e);Array.prototype.push.apply(t,d)}this._circles=t}return this._circles}},{key:"getAABB",value:function(){if(!this._aabb){for(var t=1/0,e=-1/0,n=-1/0,r=1/0,i=0;i<this._aabbs.length;i++){var o=this._aabbs[i];t=Math.min(t,o.left),e=Math.max(e,o.top),n=Math.max(n,o.right),r=Math.min(r,o.bottom)}this._aabb={left:t,top:e,right:n,bottom:r}}return this._aabb}}],[{key:"curvaturePlacement",value:function(t,e,n,r,i,o){i=i||0,o=o||t.length-1;for(var a=[],s=i+1;s<o;s++){var l=t[s-1],u=t[s],c=t[s+1],h=ua.perp(u,l),p=ua.perp(c,u),f=ua.angleBetween(h,p);1<f&&(f=1/0),a.push(f)}a.push(1/0);for(var d=[],y=[],g=i,v=0,m=0;m<i;m++)v+=n[m];for(;v+r<e;){for(var b=v+r,_=v,w=g,x=0;w<o&&_+n[w]<b&&(x+=a[w])!==1/0;)_+=n[w],w++;if(0===x)return g;var k=x/(w-g);d.push(x),y.push(k),v+=n[g],g++}if(0===d.length)return-1;var E=Math.min.apply(null,d),T=y[d.indexOf(E)];return E<1.3&&T<.4?d.indexOf(E):-1}},{key:"scaleLine",value:function(t,e){var n=[e[0]],r=[];return e.forEach((function(i,o){var a,s;o!==e.length-1&&(a=ua.sub(e[o+1],e[o]),s=ua.mult(a,1+t),n.push(ua.add(n[o],s)),r.push(ua.length(s)))})),[n,r]}},{key:"placeAtIndex",value:function(t,n,r,i){var o=n[t],a=Cr(e.getIndicesAndOffsets(t,r,i),2),s=a[0],l=a[1],u=e.getPositionsFromIndicesAndOffsets(n,s,l),c=Cr(e.getAnglesFromIndicesAndOffsets(o,s,n,u),3);return{positions:u,offsets:c[0],angles:c[1],pre_angles:c[2]}}},{key:"getIndicesAndOffsets",value:function(t,e,n){for(var r=n.length,i=[],o=[],a=0,s=0,l=0;a<r;){for(var u=n[a];a<r&&s+.5*u<=l+e[t];){var c=s-l+.5*u;o.push(c),i.push(t),s+=u,u=n[++a]}l+=e[t],t++}return[i,o]}},{key:"getPositionsFromIndicesAndOffsets",value:function(t,e,n){for(var r=[],i=0;i<e.length;i++){var o=e[i],a=n[i],s=Ch(t[o],t[o+1]),l=ua.rot([a,0],s),u=ua.add(t[o],l);r.push(u)}return r}},{key:"getAnglesFromIndicesAndOffsets",value:function(t,e,n,r){for(var i=[],o=[],a=[],s=0;s<r.length;s++){var l,u,c=r[s],h=e[s],p=ua.sub(c,t),f=-ua.angle(p),d=-Ch(n[h],n[h+1])-f;0<s&&(l=i[s-1],u=o[s-1],Math.abs(f-l)>Math.PI&&(f+=l<f?-2*Math.PI:2*Math.PI),Math.abs(u-d)>Math.PI&&(d+=u<d?-2*Math.PI:2*Math.PI)),i.push(f),o.push(d),a.push(p)}return[a,i,o]}}]),e}();function Ch(t,e){var n=ua.sub(e,t);return ua.angle(n)}function Lh(t){for(var e=[],n=0;n<t.length-1;n++){var r=t[n],i=t[n+1],o=Math.hypot(r[0]-i[0],r[1]-i[1]);e.push(o)}return e}var Ph=Object.create(Th);Object.assign(Ph,{name:"text",super:Th,built_in:!0,init:function(t){var e=0<arguments.length&&void 0!==t?t:{};va.init.call(this,e),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!1,this.defines.TANGRAM_IS_TEXT_STYLE=!0,this.reset()},makeVertexTemplate:function(t,e){this.super.makeVertexTemplate.apply(this,arguments);var n=e.vertex_data.vertex_layout;return this.fillVertexTemplate(n,"a_pre_angles",0,{size:4}),this.fillVertexTemplate(n,"a_offsets",0,{size:4}),this.fillVertexTemplate(n,"a_angles",0,{size:4}),this.fillVertexTemplate(n,"a_offsets_alt",0,{size:4}),this.fillVertexTemplate(n,"a_pre_angles_alt",0,{size:4}),this.fillVertexTemplate(n,"a_angles_alt",0,{size:4}),this.vertex_template},reset:function(){this.queues={},this.resetText()},addFeature:function(t,e,n){var r=this,i=n.tile,o=t.geometry.type;e.can_articulate="LineString"===o||"MultiLineString"===o,e.supersample_text="LineString"===o||"MultiLineString"===o;var a=this.parseTextFeature(t,e,n,i);a&&(a instanceof Array?a.forEach((function(e){e.feature=t,e.context=n,e.layout.vertex=!1,r.queueFeature(e,i)})):(a.feature=t,a.context=n,a.layout.vertex=!1,this.queueFeature(a,i)),To.addStyle(this.name,i.id))},endData:function(t){var e=this,n=this.queues[t.id];return delete this.queues[t.id],this.collideAndRenderTextLabels(t,this.name,n).then((function(n){var r=n.labels,i=n.texts;return r&&i&&(e.texts[t.id]=i,r.forEach((function(n){var r=n.text_settings_key,i=e.texts[t.id][r]&&e.texts[t.id][r][n.text],o=e.feature_style;o.label=n.label,n.label.text_data={text_info:i,text_settings_key:r,text:n.text},o.label_texture=e.textureManager.default,i.text_settings.can_articulate?(o.size={},"straight"===n.label.type?o.size.straight=i.size.logical_size:o.size.curved=i.segment_sizes.map((function(t){return t.logical_size}))):o.size=i.size.logical_size,va.addFeature.call(e,n.feature,n.draw,n.context)}))),e.freeText(t),va.endData.call(e,t).then((function(n){if(n){for(var r in n.meshes)n.meshes[r].uniforms.u_apply_color_blocks=!0;t.mesh_data[e.name]=n}return n}))}))},_preprocess:function(t){return this.preprocessText(t)},buildTextLabels:function(t,e){for(var n=[],r=0;r<e.length;r++){var i,o,a=e[r],s=this.texts[t.id][a.text_settings_key][a.text];a.layout.vertical_buffer=s.vertical_buffer,o=s.text_settings.can_articulate?(i=s.segment_sizes.map((function(t){return t.collision_size})),a.layout.no_curving=s.no_curving,this.buildLabels(i,a.feature.geometry,a.layout,s.size.collision_size)):this.buildLabels(s.size.collision_size,a.feature.geometry,a.layout);for(var l=0;l<o.length;l++){var u=Object.create(a);u.label=o[l],n.push(u)}}return n},buildLabels:function(t,e,n,r){var i,o,a="Point"!==e.type,s=[];if("LineString"===e.type)Array.prototype.push.apply(s,this.buildLineLabels(e.coordinates,t,a,n,r));else if("MultiLineString"===e.type)for(var l=e.coordinates,u=0;u<l.length;++u)Array.prototype.push.apply(s,this.buildLineLabels(l[u],t,a,n,r));else if("Point"===e.type)s.push(new Sc(e.coordinates,t,a,n));else if("MultiPoint"===e.type)for(var c=e.coordinates,h=0;h<c.length;++h)s.push(new Sc(c[h],t,a,n));else"Polygon"===e.type?(i=Qr.centroid(e.coordinates),s.push(new Sc(i,t,a,n))):"MultiPolygon"===e.type&&(o=Qr.multiCentroid(e.coordinates),s.push(new Sc(o,t,a,n)));return s},buildLineLabels:function(t,e,n,r,i){var o,a=[],s=Math.min(r.subdiv,t.length-1);if(1<s)for(var l=(t.length-1)/s,u=0;u<s;u++){var c=Math.floor(u*l),h=Math.floor((u+1)*l)+1,p=t.slice(c,h),f=Sh(e,i,p,n,r);f&&a.push(f)}return a.length<s&&(o=Sh(e,i,t,n,r))&&a.push(o),a},vertexLayoutForMeshVariant:function(){var t;return this.vertex_layout||(t=[{name:"a_position",size:4,type:iu.SHORT,normalized:!1},{name:"a_shape",size:4,type:iu.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:iu.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:iu.SHORT,normalized:!1},{name:"a_color",size:4,type:iu.UNSIGNED_BYTE,normalized:!0},{name:"a_angles",size:4,type:iu.SHORT,normalized:!1},{name:"a_offsets",size:4,type:iu.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles",size:4,type:iu.BYTE,normalized:!1},{name:"a_selection_color",size:4,type:iu.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:iu.UNSIGNED_BYTE,normalized:!0},{name:"a_offsets_alt",size:4,type:iu.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles_alt",size:4,type:iu.BYTE,normalized:!1},{name:"a_angles_alt",size:4,type:iu.SHORT,normalized:!1}],this.vertex_layout=new pu(t)),this.vertex_layout},getMeshVariantTypeForDraw:Th.getMeshVariantTypeForDraw}),Ph.texture_id=0;var Rh=Object.create(zu);Object.assign(Rh,{name:"raster",super:zu,built_in:!0,init:function(){this.raster=this.raster||"color",this.super.init.apply(this,arguments),this.selection=!1,this.defines.SNAP_TO_PIXEL_GRID=!0},_preprocess:function(t){return t.color=t.color||go.defaults.color,this.super._preprocess.apply(this,arguments)}});var Nh=Object.create(Th);Object.assign(Nh,{name:"custom_icons",collision:!1,init:function(t){var e=0<arguments.length&&void 0!==t?t:{};Th.init.call(this,e)},loadTexture:function(t,e,n){var r,i=t.width,o=t.height,a=t.items,s=document.createElement("canvas"),l=Ti.device_pixel_ratio,u=this.sources[e],c={sprites:{}};if(s.width=i*l,s.height=o*l,u){var h,p=a.length,f=s.getContext("2d");for(f.scale(l,l);h=a[--p];){var d,y=u.getIconBitmapByObjectId(h.meta.objectId,h.meta.id);y&&((d=Dl(y))?ki("error",d):(f.drawImage(y,h.x,h.y,h.width,h.height),c.sprites[h.meta.id]=[h.x,h.y,h.width,h.height]))}}return c.element=s,(r=this.textureManager.create(this.gl,n,c)).retain(),r.loading.then((function(t){return t.name}))},buildRasterTextures:function(t,e){return ui.postMessage(this.main_thread_target+".loadTexture",t.rasters,t.source,t.texture_name).then((function(t){return e.textures.push(t),e}))},addFeature:function(t,e,n){var r=n.tile.rasters,i={};r.items.forEach((function(t){i[t.meta.id]=[t.x,t.y,t.width,t.height]}));var o="".concat(n.tile.source,"_dyn_").concat(n.tile.coords.key,"_").concat(this.generation,"_").concat(n.tile.id);e.texture=n.tile.texture_name=o;var a=Object.assign({},jh,{name:o,width:r.width,height:r.height,sprites:i,manager:this.textureManager});Mo.prototype.calculateSprites.apply(a),this.textureManager.textures[o]=a,Th.addFeature.apply(this,arguments),delete this.textureManager.textures[o]}});var jh={filtering:"linear",density:1,valid:!0,power_of_2:!1,texcoords:{},sizes:{},css_sizes:{},aspects:{}},Dh=Object.create(zu);Object.assign(Dh,{name:"overlays",super:zu,init:function(t){var e=0<arguments.length&&void 0!==t?t:{};this.selection=e.selection||!0,this.raster=this.raster||"color",this.super.init.apply(this,arguments)},setupRasters:function(){if(!li.is_main)return!1;if(this.super.setupRasters.call(this))return!0;var t=!1;for(var e in this.sources)if(this.sources[e]instanceof Gl){t=!0;break}return!!t&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",ga,"Raster"),!0)},loadTextures:function(t,e){var n,r,i,o=this.sources[e],a=t.name;if(t.overlays_config.forEach((function(e){var a,s=e.texcoords,l=e.id,u=o.getMapObjectById(l),c=u.getBitmap();c&&((a=Dl(c=zl(c,c.width,c.height)))?ki("error",a):(n||((n=document.createElement("canvas")).width=t.width,n.height=t.height,r=n.getContext("2d")),r.save(),r.globalAlpha=u.getOpacity(),s.forEach((function(t){return r.drawImage(c,t[0],t[1],t[2],t[3])})),r.restore(),i=!0))})),i){t.element=n;var s={};return s[a]=t,this.super.loadTextures.call(this,s)}var l=this.textureManager.textures[this.textureManager.default];return Promise.resolve([{name:l.name,width:l.width,height:l.height,loaded:l.loaded}])},buildRasterTextures:function(t,e){var n=this.sources[t.source].tileTexture(t);return n?ui.postMessage(this.main_thread_target+".loadTextures",n,t.source).then((function(t){if(!t||t.length<1)return e;if(t.some((function(t){return!t.loaded})))return null;var n=t[0].name;return e.uniforms=e.uniforms||{},e.textures=e.textures||[],e.uniforms.u_raster=n,e.uniforms.u_raster_offset=[0,0,1],e.textures.push(n),e})):Promise.resolve(e)}});var zh=Object.create(va),Fh=[-1,0,1,0,-1,1,-1,1,1,0,1,1,-1,0,1,0,-1,1,-1,1,1,0,1,1];Object.assign(zh,{name:"skybox",built_in:!0,vertex_shader_src:"uniform float u_horizon;uniform float u_tilt;uniform float u_zoom;attribute vec2 a_position;attribute float a_is_sky;attribute float a_is_top;attribute vec4 a_color;varying vec4 v_color;const float SIN_THRESHOLD_ANGLE=0.96126069082;void main(){v_color=a_color;float sin_tilt=sin(u_tilt);float sky_bottom_alpha=1.-max(sin_tilt-SIN_THRESHOLD_ANGLE,0.)*3.;if((a_position.y==1.&&a_is_sky==0.)||(a_position.y==0.&&a_is_sky==1.)){v_color.w=sky_bottom_alpha;}float fog_height=max((22.-u_zoom)*0.04,0.)*(sin_tilt-.7);float position_z=u_zoom<17. ? .942 : .9418;gl_Position=vec4(a_position.x,a_is_sky*(a_position.y+a_is_top)+1.0-u_horizon-(1.0-a_is_sky)*(1.0-a_position.y)*fog_height,position_z,1.0);}",fragment_shader_src:"varying vec4 v_color;void main(void){gl_FragColor=v_color;}",selection:!1,blend:"inlay",blend_order:1,init:function(){va.init.apply(this,arguments),this.selection=!1},_preprocess:function(t){return t.color={top:go.createColorPropertyCache(t.color.zenith),bottom:go.createColorPropertyCache(t.color.horizon),fog:go.createColorPropertyCache(t.color.fog)},t},vertexLayoutForMeshVariant:function(){var t;return this.vertex_layout||(t=[{name:"a_position",size:2,type:iu.FLOAT,normalized:!1},{name:"a_is_sky",size:1,type:iu.FLOAT,normalized:!0},{name:"a_color",size:4,type:iu.UNSIGNED_BYTE,normalized:!0},{name:"a_is_top",size:1,type:iu.FLOAT,normalized:!0}],this.vertex_layout=new pu(t)),this.vertex_layout},makeVertexTemplate:function(){var t=0;return this.vertex_template[t++]=0,this.vertex_template[1]=0,this.vertex_template},parseFeature:function(t,e,n){var r=this.feature_style;return e.color&&e.color.top&&e.color.bottom&&(r.color_top=this.parseColor(e.color.top,n),r.color_bottom=this.parseColor(e.color.bottom,n),r.color_fog=this.parseColor(e.color.fog||"white",n),Array.isArray(r.color_fog)&&(r.color_fog=r.color_fog.slice(),r.color_fog[3]=0)),r},buildGeometry:function(t,e,n){for(var r=this.makeVertexTemplate(e),i=n.vertex_data,o=n.vertex_data.vertex_layout,a=i.vertex_layout.index.a_position,s={top:e.color_top,bottom:e.color_bottom},l={top:e.color_bottom,bottom:e.color_fog},u=0,c=Fh.length-1;u<c;u+=2){r[a+0]=Fh[u],r[a+1]=Fh[u+1];var h=u<12,p=0<Fh[u+1],f=h?s:l;this.fillVertexTemplate(o,"a_is_sky",h?1:0,{size:1}),this.fillVertexTemplate(o,"a_is_top",p?1:0,{size:1}),this.fillVertexTemplate(o,"a_color",ua.mult(p?f.top:f.bottom,255),{size:4}),i.addVertex(r)}return 4}});var Bh=function(){function t(){mr(this,t),this.styles={},this.base_styles={},this.register(Object.create(zu)),this.register(Object.create(oc)),this.register(Object.create(hc)),this.register(Object.create(Th)),this.register(Object.create(Ph)),this.register(Object.create(Rh)),this.register(Object.create(Nh)),this.register(Object.create(Dh)),this.register(Object.create(zh))}return _r(t,[{key:"init",value:function(){ra.removeBlock("global"),ra.removeBlock("setup"),ra.addBlock("global","#ifdef TANGRAM_VERTEX_SHADER\nvec4 modelPosition(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE*exp2(u_tile_origin.z-u_tile_origin.w),1.)+vec4(0.,1.,0.,0.);}vec4 modelPositionBaseZoom(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE,1.)+vec4(0.,1.,0.,0.);}\n#endif\nvec4 worldPosition(){return v_world_position;}\n#ifdef TANGRAM_VERTEX_SHADER\nvec4 wrapWorldPosition(vec4 world_position){\n#if defined(TANGRAM_WORLD_POSITION_WRAP)\nvec2 anchor=u_tile_origin.xy-mod(u_tile_origin.xy,TANGRAM_WORLD_POSITION_WRAP);world_position.xy-=anchor;\n#endif\nreturn world_position;}\n#endif\n#if defined(TANGRAM_VERTEX_SHADER)\nvec3 worldNormal(){return TANGRAM_NORMAL;}\n#elif defined(TANGRAM_FRAGMENT_SHADER)\nvec3 worldNormal(){return u_inverseNormalMatrix*TANGRAM_NORMAL;}\n#endif\n"),ra.addBlock("global","void applyLayerOrder(float layer,inout vec4 position){position.z-=layer*TANGRAM_LAYER_DELTA*position.w;}"),ra.addBlock("global","\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nattribute vec4 a_selection_color;varying vec4 v_selection_color;uniform vec4 u_selection_discard0;uniform vec4 u_selection_discard1;uniform vec4 u_selection_discard2;uniform vec4 u_selection_discard3;uniform vec4 u_selection_discard4;uniform vec4 u_selection_discard5;uniform vec4 u_selection_discard6;uniform vec4 u_selection_discard7;uniform vec4 u_selection_discard8;uniform vec4 u_selection_discard9;\n#endif\n"),ra.addBlock("global","uniform float u_view_pan_snap_timer;void snapToPixelGrid(inout vec4 position){vec2 position_fract=fract((((position.xy/position.w)+1.)*.5)*u_resolution);vec2 position_snap=position.xy+((step(0.5,position_fract)-position_fract)*position.w*2./u_resolution);\n#ifdef TANGRAM_VIEW_PAN_SNAP_RATE\nposition.xy=mix(position.xy,position_snap,clamp(u_view_pan_snap_timer*TANGRAM_VIEW_PAN_SNAP_RATE,0.,1.));\n#else\nposition.xy=position_snap;\n#endif\n}"),ra.replaceBlock("utils","#ifndef UTILS\n#define UTILS\nbool isLocalSpacePixelOutsideTile(vec4 pixel_local_space_position,float tile_scale){return pixel_local_space_position.x<0.||pixel_local_space_position.x>=tile_scale||pixel_local_space_position.y>0.||pixel_local_space_position.y<=-tile_scale;}\n#endif\n"),ra.replaceBlock("setup","\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nif(a_selection_color.rgb==vec3(0.)||a_selection_color==u_selection_discard0||a_selection_color==u_selection_discard1||a_selection_color==u_selection_discard2||a_selection_color==u_selection_discard3||a_selection_color==u_selection_discard4||a_selection_color==u_selection_discard5||a_selection_color==u_selection_discard6||a_selection_color==u_selection_discard7||a_selection_color==u_selection_discard8||a_selection_color==u_selection_discard9){gl_Position=vec4(0.,0.,0.,1.);return;}v_selection_color=a_selection_color;\n#endif\n"),ra.defines.TANGRAM_EPSILON=1e-5,ra.defines.TANGRAM_LAYER_DELTA=1/16384,ra.defines.TANGRAM_TILE_SCALE="vec3(".concat(Qr.tile_scale,"., ").concat(Qr.tile_scale,"., u_meters_per_pixel * ").concat(Qr.tile_size,".)"),ra.defines.TANGRAM_HEIGHT_SCALE=Qr.height_scale,ra.defines.TANGRAM_ALPHA_TEST=.1,oc.dash_textures={}}},{key:"destroy",value:function(t){var e=this;Object.keys(this.styles).forEach((function(n){var r=e.styles[n];r.gl===t&&(ki("trace","StyleManager.destroy: destroying render style ".concat(r.name)),r.base&&e.remove(r.name),r.destroy())}))}},{key:"register",value:function(t){this.styles[t.name]=t,this.base_styles[t.name]=t}},{key:"remove",value:function(t){delete this.styles[t]}},{key:"mix",value:function(t,e){if(t.mixed)return t;t.mixed={};var n=[];t.mix&&(Array.isArray(t.mix)?n.push.apply(n,Lr(t.mix)):n.push(t.mix),(n=n.map((function(t){return e[t]})).filter((function(e){return e&&e!==t}))).forEach((function(e){return t.mixed[e.name]=!0}))),n.push(t),t.animated=n.some((function(t){return t&&t.animated})),t.texcoords=n.some((function(t){return t&&t.texcoords})),t.base=n.map((function(t){return t.base})).filter((function(t){return t})).pop(),t.lighting=n.map((function(t){return t.lighting})).filter((function(t){return null!=t})).pop(),t.texture=n.map((function(t){return t.texture})).filter((function(t){return t})).pop(),t.raster=n.map((function(t){return t.raster})).filter((function(t){return null!=t})).pop(),t.dash=n.map((function(t){return t.dash})).filter((function(t){return null!=t})).pop(),t.dash_background_color=n.map((function(t){return t.dash_background_color})).filter((function(t){return null!=t})).pop(),n.some((function(t){return t.hasOwnProperty("blend")&&t.blend}))&&(t.blend=n.map((function(t){return t.hasOwnProperty("blend")&&t.blend})).filter((function(t){return t})).pop()),t.blend_order=n.map((function(t){return t.blend_order})).filter((function(t){return null!=t})).pop(),t.defines=Object.assign.apply(Object,[{}].concat(Lr(n.map((function(t){return t.defines})).filter((function(t){return t}))))),t.material=Object.assign.apply(Object,[{}].concat(Lr(n.map((function(t){return t.material})).filter((function(t){return t})))));var r=n.map((function(t){return t.draw})).filter((function(t){return t}));return 0<r.length&&(t.draw=ya.apply(void 0,[{}].concat(Lr(r)))),this.mixShaders(t,e,n),t}},{key:"mixShaders",value:function(t,e,n){var r={},i=n.map((function(t){return t.shaders})).filter((function(t){return t}));if(r.defines=Object.assign.apply(Object,[{}].concat(Lr(i.map((function(t){return t.defines})).filter((function(t){return t}))))),r.uniforms={},r._uniforms=t.shaders&&t.shaders.uniforms||{},r._uniform_scopes={},n.filter((function(t){return t.shaders&&t.shaders.uniforms})).forEach((function(t){for(var n in t.shaders.uniforms)!function(n){r._uniform_scopes[n]=t.name,Object.defineProperty(r.uniforms,n,{enumerable:!0,configurable:!0,get:function(){return void 0!==r._uniforms[n]?r._uniforms[n]:e[r._uniform_scopes[n]].shaders.uniforms!==r.uniforms?e[r._uniform_scopes[n]].shaders.uniforms[n]:void 0},set:function(t){r._uniforms[n]=t}})}(n)})),r.extensions=Object.keys(i.map((function(t){return t.extensions})).filter((function(t){return t})).reduce((function(t,e){return"string"==typeof e?t[e]=!0:e.forEach((function(e){return t[e]=!0})),t}),{})||{}),t.shaders&&t.shaders.blocks)for(var o in t.shaders.block_scopes=t.shaders.block_scopes||{},t.shaders.blocks){var a,s=t.shaders.blocks[o];t.shaders.block_scopes[o]=t.shaders.block_scopes[o]||[],Array.isArray(s)?(a=t.shaders.block_scopes[o]).push.apply(a,Lr(s.map((function(){return t.name})))):t.shaders.block_scopes[o].push(t.name)}var l={};return i.forEach((function(t){if(t.blocks){r.blocks=r.blocks||{},r.block_scopes=r.block_scopes||{};var e={};for(var n in t.blocks){var i=t.blocks[n],o=t.block_scopes[n];r.blocks[n]=r.blocks[n]||[],r.block_scopes[n]=r.block_scopes[n]||[],i=Array.isArray(i)?i:[i],o=Array.isArray(o)?o:[o];for(var a=0;a<i.length;a++)l[o[a]]||(e[o[a]]=!0,r.blocks[n].push(i[a]),r.block_scopes[n].push(o[a]))}Object.assign(l,e)}})),Object.assign(t.mixed,l),t.shaders=r,t}},{key:"create",value:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:{},i=ya({},e);return i.name=t,(i=this.mix(i,r)).base&&this.base_styles[i.base]?this.styles[t]=i=Object.assign(Object.create(this.base_styles[i.base]),i):i.base=null,i}},{key:"build",value:function(t){var e=this,n=Object.keys(t).sort((function(n,r){return e.inheritanceDepth(n,t)-e.inheritanceDepth(r,t)}));for(var r in this.styles)this.base_styles[r]?this.styles[r].reset():delete this.styles[r];var i={};return n.forEach((function(n){i[n]=e.create(n,t[n],i)})),this.styles}},{key:"initStyles",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};for(var n in this.styles)this.styles[n].init(e)}},{key:"inheritanceDepth",value:function(t,e){for(var n=this,r=0;;){var i=e[t];if(!i)break;if(!i.mix)break;if(r++,Array.isArray(i.mix)){r+=Math.max.apply(Math,Lr(i.mix.map((function(r){if(t!==r)return n.inheritanceDepth(r,e)}))));break}if(t===i.mix)break;t=i.mix}return r}}]),t}();function Gh(t){return null==t}var Hh={isNothing:Gh,isObject:function(t){return"object"==typeof t&&null!==t},toArray:function(t){return Array.isArray(t)?t:Gh(t)?[]:[t]},repeat:function(t,e){for(var n="",r=0;r<e;r+=1)n+=t;return n},isNegativeZero:function(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},extend:function(t,e){var n,r,i,o;if(e)for(n=0,r=(o=Object.keys(e)).length;n<r;n+=1)t[i=o[n]]=e[i];return t}};function Uh(t,e){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name="YAMLException",this.reason=t,this.mark=e,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"")}((Uh.prototype=Object.create(Error.prototype)).constructor=Uh).prototype.toString=function(t){var e=this.name+": ";return e+=this.reason||"(unknown reason)",!t&&this.mark&&(e+=" "+this.mark.toString()),e};var qh=Uh;function Vh(t,e,n,r,i){this.name=t,this.buffer=e,this.position=n,this.line=r,this.column=i}Vh.prototype.getSnippet=function(t,e){var n,r,i,o,a;if(!this.buffer)return null;for(t=t||4,e=e||75,n="",r=this.position;0<r&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(r-1));)if(--r,this.position-r>e/2-1){n=" ... ",r+=5;break}for(i="",o=this.position;o<this.buffer.length&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(o));)if((o+=1)-this.position>e/2-1){i=" ... ",o-=5;break}return a=this.buffer.slice(r,o),Hh.repeat(" ",t)+n+a+i+"\n"+Hh.repeat(" ",t+this.position-r+n.length)+"^"},Vh.prototype.toString=function(t){var e,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),t||(e=this.getSnippet())&&(n+=":\n"+e),n};var Zh=Vh,Wh=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],Yh=["scalar","sequence","mapping"],Kh=function(t,e){var n,r;if(e=e||{},Object.keys(e).forEach((function(e){if(-1===Wh.indexOf(e))throw new qh('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')})),this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.defaultStyle=e.defaultStyle||null,this.styleAliases=(n=e.styleAliases||null,r={},null!==n&&Object.keys(n).forEach((function(t){n[t].forEach((function(e){r[String(e)]=t}))})),r),-1===Yh.indexOf(this.kind))throw new qh('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')};function Xh(t,e,n){var r=[];return t.include.forEach((function(t){n=Xh(t,e,n)})),t[e].forEach((function(t){n.forEach((function(e,n){e.tag===t.tag&&r.push(n)})),n.push(t)})),n.filter((function(t,e){return-1===r.indexOf(e)}))}function Jh(t){this.include=t.include||[],this.implicit=t.implicit||[],this.explicit=t.explicit||[],this.implicit.forEach((function(t){if(t.loadKind&&"scalar"!==t.loadKind)throw new qh("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=Xh(this,"implicit",[]),this.compiledExplicit=Xh(this,"explicit",[]),this.compiledTypeMap=function(){var t,e,n={};function r(t){n[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(r);return n}(this.compiledImplicit,this.compiledExplicit)}Jh.DEFAULT=null,Jh.create=function(t,e){var n,r;switch(arguments.length){case 1:n=Jh.DEFAULT,r=t;break;case 2:n=t,r=e;break;default:throw new qh("Wrong number of arguments for Schema.create function")}if(n=Hh.toArray(n),r=Hh.toArray(r),!n.every((function(t){return t instanceof Jh})))throw new qh("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!r.every((function(t){return t instanceof Kh})))throw new qh("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new Jh({include:n,explicit:r})};var $h=Jh,Qh=new $h({explicit:[new Kh("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),new Kh("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),new Kh("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}})]}),tp=new Kh("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)},construct:function(){return null},predicate:function(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"}),ep=new Kh("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)},construct:function(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"}),np=new Kh("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,n,r,i,o=t.length,a=0,s=!1;if(!o)return!1;if("-"!==(e=t[a])&&"+"!==e||(e=t[++a]),"0"===e){if(a+1===o)return!0;if("b"===(e=t[++a])){for(a++;a<o;a++)if("_"!==(e=t[a])){if("0"!==e&&"1"!==e)return!1;s=!0}return s}if("x"===e){for(a++;a<o;a++)if("_"!==(e=t[a])){if(!(48<=(r=t.charCodeAt(a))&&r<=57||65<=r&&r<=70||97<=r&&r<=102))return!1;s=!0}return s}for(;a<o;a++)if("_"!==(e=t[a])){if(!(48<=(n=t.charCodeAt(a))&&n<=55))return!1;s=!0}return s}for(;a<o;a++)if("_"!==(e=t[a])){if(":"===e)break;if(!(48<=(i=t.charCodeAt(a))&&i<=57))return!1;s=!0}return!!s&&(":"!==e||/^(:[0-5]?[0-9])+$/.test(t.slice(a)))},construct:function(t){var e,n,r=t,i=1,o=[];return-1!==r.indexOf("_")&&(r=r.replace(/_/g,"")),"-"!==(e=r[0])&&"+"!==e||("-"===e&&(i=-1),e=(r=r.slice(1))[0]),"0"===r?0:"0"===e?"b"===r[1]?i*parseInt(r.slice(2),2):"x"===r[1]?i*parseInt(r,16):i*parseInt(r,8):-1!==r.indexOf(":")?(r.split(":").forEach((function(t){o.unshift(parseInt(t,10))})),r=0,n=1,o.forEach((function(t){r+=t*n,n*=60})),i*r):i*parseInt(r,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!Hh.isNegativeZero(t)},represent:{binary:function(t){return"0b"+t.toString(2)},octal:function(t){return"0"+t.toString(8)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return"0x"+t.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),rp=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),ip=/^[-+]?[0-9]+e/,op=new $h({include:[Qh],implicit:[tp,ep,np,new Kh("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(t){return null!==t&&!!rp.test(t)},construct:function(t){var e,n=t.replace(/_/g,"").toLowerCase(),r="-"===n[0]?-1:1,i=[];return 0<="+-".indexOf(n[0])&&(n=n.slice(1)),".inf"===n?1==r?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===n?NaN:0<=n.indexOf(":")?(n.split(":").forEach((function(t){i.unshift(parseFloat(t,10))})),n=0,e=1,i.forEach((function(t){n+=t*e,e*=60})),r*n):r*parseFloat(n,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||Hh.isNegativeZero(t))},represent:function(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Hh.isNegativeZero(t))return"-0.0";return n=t.toString(10),ip.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"})]}),ap=new $h({include:[op]}),sp=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$"),lp=new Kh("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(t){return null!==t&&null!==sp.exec(t)},construct:function(t){var e,n,r,i,o,a,s,l=0,u=null,c=sp.exec(t);if(null===c)throw new Error("Date resolve error");if(e=+c[1],n=c[2]-1,r=+c[3],!c[4])return new Date(Date.UTC(e,n,r));if(i=+c[4],o=+c[5],a=+c[6],c[7]){for(l=c[7].slice(0,3);l.length<3;)l+="0";l=+l}return c[9]&&(u=6e4*(60*+c[10]+ +(c[11]||0)),"-"===c[9]&&(u=-u)),s=new Date(Date.UTC(e,n,r,i,o,a,l)),u&&s.setTime(s.getTime()-u),s},instanceOf:Date,represent:function(t){return t.toISOString()}}),up=new Kh("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(t){return"<<"===t||null===t}}),cp=Gs.Buffer,hp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",pp=new Kh("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(t){if(null===t)return!1;for(var e,n=0,r=t.length,i=hp,o=0;o<r;o++)if(!(64<(e=i.indexOf(t.charAt(o))))){if(e<0)return!1;n+=6}return n%8==0},construct:function(t){for(var e,n=t.replace(/[\r\n=]/g,""),r=n.length,i=hp,o=0,a=[],s=0;s<r;s++)s%4==0&&s&&(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)),o=o<<6|i.indexOf(n.charAt(s));return 0==(e=r%4*6)?(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)):18==e?(a.push(o>>10&255),a.push(o>>2&255)):12==e&&a.push(o>>4&255),cp?new cp(a):a},predicate:function(t){return cp&&cp.isBuffer(t)},represent:function(t){for(var e,n="",r=0,i=t.length,o=hp,a=0;a<i;a++)a%3==0&&a&&(n+=o[r>>18&63],n+=o[r>>12&63],n+=o[r>>6&63],n+=o[63&r]),r=(r<<8)+t[a];return 0==(e=i%3)?(n+=o[r>>18&63],n+=o[r>>12&63],n+=o[r>>6&63],n+=o[63&r]):2==e?(n+=o[r>>10&63],n+=o[r>>4&63],n+=o[r<<2&63],n+=o[64]):1==e&&(n+=o[r>>2&63],n+=o[r<<4&63],n+=o[64],n+=o[64]),n}}),fp=Object.prototype.hasOwnProperty,dp=Object.prototype.toString,yp=new Kh("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(t){if(null===t)return!0;for(var e,n,r,i=[],o=t,a=0,s=o.length;a<s;a+=1){if(e=o[a],r=!1,"[object Object]"!==dp.call(e))return!1;for(n in e)if(fp.call(e,n)){if(r)return!1;r=!0}if(!r)return!1;if(-1!==i.indexOf(n))return!1;i.push(n)}return!0},construct:function(t){return null!==t?t:[]}}),gp=Object.prototype.toString,vp=new Kh("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(t){if(null===t)return!0;for(var e,n,r=t,i=new Array(r.length),o=0,a=r.length;o<a;o+=1){if(e=r[o],"[object Object]"!==gp.call(e))return!1;if(1!==(n=Object.keys(e)).length)return!1;i[o]=[n[0],e[n[0]]]}return!0},construct:function(t){if(null===t)return[];for(var e,n,r=t,i=new Array(r.length),o=0,a=r.length;o<a;o+=1)e=r[o],n=Object.keys(e),i[o]=[n[0],e[n[0]]];return i}}),mp=Object.prototype.hasOwnProperty,bp=new $h({include:[ap],implicit:[lp,up],explicit:[pp,yp,vp,new Kh("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(t){if(null===t)return!0;var e,n=t;for(e in n)if(mp.call(n,e)&&null!==n[e])return!1;return!0},construct:function(t){return null!==t?t:{}}})]}),_p=new Kh("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(t){return void 0===t},represent:function(){return""}}),wp=new Kh("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(t){if(null===t)return!1;if(0===t.length)return!1;var e=t,n=/\/([gim]*)$/.exec(t),r="";if("/"===e[0]){if(n&&(r=n[1]),3<r.length)return!1;if("/"!==e[e.length-r.length-1])return!1}return!0},construct:function(t){var e=t,n=/\/([gim]*)$/.exec(t),r="";return"/"===e[0]&&(n&&(r=n[1]),e=e.slice(1,e.length-r.length-1)),new RegExp(e,r)},predicate:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},represent:function(t){var e="/"+t.source+"/";return t.global&&(e+="g"),t.multiline&&(e+="m"),t.ignoreCase&&(e+="i"),e}});try{var xp=function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}()}catch(o){"undefined"!=typeof window&&(xp=window.esprima)}var kp=new Kh("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(t){if(null===t)return!1;try{var e="("+t+")",n=xp.parse(e,{range:!0});return"Program"===n.type&&1===n.body.length&&"ExpressionStatement"===n.body[0].type&&"FunctionExpression"===n.body[0].expression.type}catch(t){return!1}},construct:function(t){var e,n="("+t+")",r=xp.parse(n,{range:!0}),i=[];if("Program"!==r.type||1!==r.body.length||"ExpressionStatement"!==r.body[0].type||"FunctionExpression"!==r.body[0].expression.type)throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach((function(t){i.push(t.name)})),e=r.body[0].expression.body.range,new Function(i,n.slice(e[0]+1,e[1]-1))},predicate:function(t){return"[object Function]"===Object.prototype.toString.call(t)},represent:function(t){return t.toString()}}),Ep=$h.DEFAULT=new $h({include:[bp],explicit:[_p,wp,kp]}),Tp=Object.prototype.hasOwnProperty,Ap=1,Sp=2,Mp=3,Ip=4,Op=1,Cp=2,Lp=3,Pp=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Rp=/[\x85\u2028\u2029]/,Np=/[,\[\]\{\}]/,jp=/^(?:!|!!|![a-z\-]+!)$/i,Dp=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function zp(t){return 10===t||13===t}function Fp(t){return 9===t||32===t}function Bp(t){return 9===t||32===t||10===t||13===t}function Gp(t){return 44===t||91===t||93===t||123===t||125===t}function Hp(t){return 48===t?"\0":97===t?"\x07":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"\x1b":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"\x85":95===t?"\xa0":76===t?"\u2028":80===t?"\u2029":""}for(var Up=new Array(256),qp=new Array(256),Vp=0;Vp<256;Vp++)Up[Vp]=Hp(Vp)?1:0,qp[Vp]=Hp(Vp);function Zp(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Ep,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function Wp(t,e){return new qh(e,new Zh(t.filename,t.input,t.position,t.line,t.position-t.lineStart))}function Yp(t,e){throw Wp(t,e)}function Kp(t,e){t.onWarning&&t.onWarning.call(null,Wp(t,e))}var Xp={YAML:function(t,e,n){var r,i,o;null!==t.version&&Yp(t,"duplication of %YAML directive"),1!==n.length&&Yp(t,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&Yp(t,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),o=parseInt(r[2],10),1!==i&&Yp(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,1!==o&&2!==o&&Kp(t,"unsupported YAML version of the document")},TAG:function(t,e,n){var r,i;2!==n.length&&Yp(t,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],jp.test(r)||Yp(t,"ill-formed tag handle (first argument) of the TAG directive"),Tp.call(t.tagMap,r)&&Yp(t,'there is a previously declared suffix for "'+r+'" tag handle'),Dp.test(i)||Yp(t,"ill-formed tag prefix (second argument) of the TAG directive"),t.tagMap[r]=i}};function Jp(t,e,n,r){var i,o,a,s;if(e<n){if(s=t.input.slice(e,n),r)for(i=0,o=s.length;i<o;i+=1)9===(a=s.charCodeAt(i))||32<=a&&a<=1114111||Yp(t,"expected valid JSON character");else Pp.test(s)&&Yp(t,"the stream contains non-printable characters");t.result+=s}}function $p(t,e,n,r){var i,o,a,s;for(Hh.isObject(n)||Yp(t,"cannot merge mappings; the provided source object is unacceptable"),a=0,s=(i=Object.keys(n)).length;a<s;a+=1)o=i[a],Tp.call(e,o)||(e[o]=n[o],r[o]=!0)}function Qp(t,e,n,r,i,o){var a,s;if(i=String(i),null===e&&(e={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(o))for(a=0,s=o.length;a<s;a+=1)$p(t,e,o[a],n);else $p(t,e,o,n);else t.json||Tp.call(n,i)||!Tp.call(e,i)||Yp(t,"duplicated mapping key"),e[i]=o,delete n[i];return e}function tf(t){var e=t.input.charCodeAt(t.position);10===e?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):Yp(t,"a line break is expected"),t.line+=1,t.lineStart=t.position}function ef(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);0!==i;){for(;Fp(i);)i=t.input.charCodeAt(++t.position);if(e&&35===i)for(;10!==(i=t.input.charCodeAt(++t.position))&&13!==i&&0!==i;);if(!zp(i))break;for(tf(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;32===i;)t.lineIndent++,i=t.input.charCodeAt(++t.position)}return-1!==n&&0!==r&&t.lineIndent<n&&Kp(t,"deficient indentation"),r}function nf(t){var e=t.position,n=t.input.charCodeAt(e);return 45!==n&&46!==n||n!==t.input.charCodeAt(e+1)||n!==t.input.charCodeAt(e+2)||(e+=3,0!==(n=t.input.charCodeAt(e))&&!Bp(n))?void 0:1}function rf(t,e){1===e?t.result+=" ":1<e&&(t.result+=Hh.repeat("\n",e-1))}function of(t,e){var n,r,i=t.tag,o=t.anchor,a=[],s=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),r=t.input.charCodeAt(t.position);0!==r&&45===r&&Bp(t.input.charCodeAt(t.position+1));)if(s=!0,t.position++,ef(t,!0,-1)&&t.lineIndent<=e)a.push(null),r=t.input.charCodeAt(t.position);else if(n=t.line,af(t,e,Mp,!1,!0),a.push(t.result),ef(t,!0,-1),r=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&0!==r)Yp(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!s&&(t.tag=i,t.anchor=o,t.kind="sequence",t.result=a,!0)}function af(t,e,n,r,i){var o,a,s,l,u,c,h,p,f=1,d=!1,y=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=s=Ip===n||Mp===n,r&&ef(t,!0,-1)&&(d=!0,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)),1===f)for(;function(t){var e,n,r,i=!1,o=!1,a=t.input.charCodeAt(t.position);if(33===a){if(null!==t.tag&&Yp(t,"duplication of a tag property"),60===(a=t.input.charCodeAt(++t.position))?(i=!0,a=t.input.charCodeAt(++t.position)):33===a?(o=!0,n="!!",a=t.input.charCodeAt(++t.position)):n="!",e=t.position,i){for(;0!==(a=t.input.charCodeAt(++t.position))&&62!==a;);t.position<t.length?(r=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):Yp(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==a&&!Bp(a);)33===a&&(o?Yp(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(e-1,t.position+1),jp.test(n)||Yp(t,"named tag handle cannot contain such characters"),o=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);r=t.input.slice(e,t.position),Np.test(r)&&Yp(t,"tag suffix cannot contain flow indicator characters")}return r&&!Dp.test(r)&&Yp(t,"tag name cannot contain such characters: "+r),i?t.tag=r:Tp.call(t.tagMap,n)?t.tag=t.tagMap[n]+r:"!"===n?t.tag="!"+r:"!!"===n?t.tag="tag:yaml.org,2002:"+r:Yp(t,'undeclared tag handle "'+n+'"'),1}}(t)||function(t){var e,n=t.input.charCodeAt(t.position);if(38===n){for(null!==t.anchor&&Yp(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!Bp(n)&&!Gp(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Yp(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),1}}(t);)ef(t,!0,-1)?(d=!0,s=o,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)):s=!1;if(s=s&&(d||i),1!==f&&Ip!==n||(h=Ap===n||Sp===n?e:e+1,p=t.position-t.lineStart,1===f?s&&(of(t,p)||function(t,e,n){var r,i,o,a,s=t.tag,l=t.anchor,u={},c={},h=null,p=null,f=null,d=!1,y=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=u),a=t.input.charCodeAt(t.position);0!==a;){if(r=t.input.charCodeAt(t.position+1),o=t.line,63!==a&&58!==a||!Bp(r)){if(!af(t,n,Sp,!1,!0))break;if(t.line===o){for(a=t.input.charCodeAt(t.position);Fp(a);)a=t.input.charCodeAt(++t.position);if(58===a)Bp(a=t.input.charCodeAt(++t.position))||Yp(t,"a whitespace character is expected after the key-value separator within a block mapping"),d&&(Qp(t,u,c,h,p,null),h=p=f=null),i=d=!(y=!0),h=t.tag,p=t.result;else{if(!y)return t.tag=s,t.anchor=l,1;Yp(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!y)return t.tag=s,t.anchor=l,1;Yp(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===a?(d&&(Qp(t,u,c,h,p,null),h=p=f=null),i=d=y=!0):d?i=!(d=!1):Yp(t,"incomplete explicit mapping pair; a key node is missed"),t.position+=1,a=r;if((t.line===o||t.lineIndent>e)&&(af(t,e,Ip,!0,i)&&(d?p=t.result:f=t.result),d||(Qp(t,u,c,h,p,f),h=p=f=null),ef(t,!0,-1),a=t.input.charCodeAt(t.position)),t.lineIndent>e&&0!==a)Yp(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return d&&Qp(t,u,c,h,p,null),y&&(t.tag=s,t.anchor=l,t.kind="mapping",t.result=u),y}(t,p,h))||function(t,e){var n,r,i,o,a,s,l,u,c,h=!0,p=t.tag,f=t.anchor,d={},y=t.input.charCodeAt(t.position);if(91===y)s=!(i=93),r=[];else{if(123!==y)return;i=125,s=!0,r={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=r),y=t.input.charCodeAt(++t.position);0!==y;){if(ef(t,!0,e),(y=t.input.charCodeAt(t.position))===i)return t.position++,t.tag=p,t.anchor=f,t.kind=s?"mapping":"sequence",t.result=r,1;h||Yp(t,"missed comma between flow collection entries"),c=null,o=a=!1,63===y&&Bp(t.input.charCodeAt(t.position+1))&&(o=a=!0,t.position++,ef(t,!0,e)),n=t.line,af(t,e,Ap,!1,!0),u=t.tag,l=t.result,ef(t,!0,e),y=t.input.charCodeAt(t.position),!a&&t.line!==n||58!==y||(o=!0,y=t.input.charCodeAt(++t.position),ef(t,!0,e),af(t,e,Ap,!1,!0),c=t.result),s?Qp(t,r,d,u,l,c):o?r.push(Qp(t,null,d,u,l,c)):r.push(l),ef(t,!0,e),44===(y=t.input.charCodeAt(t.position))?(h=!0,y=t.input.charCodeAt(++t.position)):h=!1}Yp(t,"unexpected end of the stream within a flow collection")}(t,h)?y=!0:(a&&function(t,e){var n,r,i,o,a=Op,s=!1,l=e,u=0,c=!1,h=t.input.charCodeAt(t.position);if(124===h)r=!1;else{if(62!==h)return;r=!0}for(t.kind="scalar",t.result="";0!==h;)if(43===(h=t.input.charCodeAt(++t.position))||45===h)Op===a?a=43===h?Lp:Cp:Yp(t,"repeat of a chomping mode identifier");else{if(!(0<=(i=48<=(o=h)&&o<=57?o-48:-1)))break;0==i?Yp(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Yp(t,"repeat of an indentation width identifier"):(l=e+i-1,s=!0)}if(Fp(h)){for(;Fp(h=t.input.charCodeAt(++t.position)););if(35===h)for(;!zp(h=t.input.charCodeAt(++t.position))&&0!==h;);}for(;0!==h;){for(tf(t),t.lineIndent=0,h=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&32===h;)t.lineIndent++,h=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),zp(h))u++;else{if(t.lineIndent<l){a===Lp?t.result+=Hh.repeat("\n",u):a===Op&&s&&(t.result+="\n");break}for(r?Fp(h)?(c=!0,t.result+=Hh.repeat("\n",u+1)):c?(c=!1,t.result+=Hh.repeat("\n",u+1)):0===u?s&&(t.result+=" "):t.result+=Hh.repeat("\n",u):t.result+=s?Hh.repeat("\n",u+1):Hh.repeat("\n",u),s=!0,u=0,n=t.position;!zp(h)&&0!==h;)h=t.input.charCodeAt(++t.position);Jp(t,n,t.position,!1)}}return 1}(t,h)||function(t,e){var n,r,i=t.input.charCodeAt(t.position);if(39===i){for(t.kind="scalar",t.result="",t.position++,n=r=t.position;0!==(i=t.input.charCodeAt(t.position));)if(39===i){if(Jp(t,n,t.position,!0),39!==(i=t.input.charCodeAt(++t.position)))return 1;n=r=t.position,t.position++}else zp(i)?(Jp(t,n,r,!0),rf(t,ef(t,!1,e)),n=r=t.position):t.position===t.lineStart&&nf(t)?Yp(t,"unexpected end of the document within a single quoted scalar"):(t.position++,r=t.position);Yp(t,"unexpected end of the stream within a single quoted scalar")}}(t,h)||function(t,e){var n,r,i,o,a,s,l,u,c,h=t.input.charCodeAt(t.position);if(34===h){for(t.kind="scalar",t.result="",t.position++,n=r=t.position;0!==(h=t.input.charCodeAt(t.position));){if(34===h)return Jp(t,n,t.position,!0),t.position++,1;if(92===h){if(Jp(t,n,t.position,!0),zp(h=t.input.charCodeAt(++t.position)))ef(t,!1,e);else if(h<256&&Up[h])t.result+=qp[h],t.position++;else if(0<(a=120===(c=h)?2:117===c?4:85===c?8:0)){for(i=a,o=0;0<i;i--)u=void 0,0<=(a=48<=(l=h=t.input.charCodeAt(++t.position))&&l<=57?l-48:97<=(u=32|l)&&u<=102?u-97+10:-1)?o=(o<<4)+a:Yp(t,"expected hexadecimal character");t.result+=(s=o)<=65535?String.fromCharCode(s):String.fromCharCode(55296+(s-65536>>10),56320+(s-65536&1023)),t.position++}else Yp(t,"unknown escape sequence");n=r=t.position}else zp(h)?(Jp(t,n,r,!0),rf(t,ef(t,!1,e)),n=r=t.position):t.position===t.lineStart&&nf(t)?Yp(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Yp(t,"unexpected end of the stream within a double quoted scalar")}}(t,h)?y=!0:function(t){var e,n,r=t.input.charCodeAt(t.position);if(42===r){for(r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!Bp(r)&&!Gp(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Yp(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),t.anchorMap.hasOwnProperty(n)||Yp(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],ef(t,!0,-1),1}}(t)?(y=!0,null===t.tag&&null===t.anchor||Yp(t,"alias node should not have any properties")):function(t,e,n){var r,i,o,a,s,l,u,c=t.kind,h=t.result,p=t.input.charCodeAt(t.position);if(!Bp(p)&&!Gp(p)&&35!==p&&38!==p&&42!==p&&33!==p&&124!==p&&62!==p&&39!==p&&34!==p&&37!==p&&64!==p&&96!==p&&(63!==p&&45!==p||!(Bp(r=t.input.charCodeAt(t.position+1))||n&&Gp(r)))){for(t.kind="scalar",t.result="",i=o=t.position,a=!1;0!==p;){if(58===p){if(Bp(r=t.input.charCodeAt(t.position+1))||n&&Gp(r))break}else if(35===p){if(Bp(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&nf(t)||n&&Gp(p))break;if(zp(p)){if(s=t.line,l=t.lineStart,u=t.lineIndent,ef(t,!1,-1),t.lineIndent>=e){a=!0,p=t.input.charCodeAt(t.position);continue}t.position=o,t.line=s,t.lineStart=l,t.lineIndent=u;break}}a&&(Jp(t,i,o,!1),rf(t,t.line-s),i=o=t.position,a=!1),Fp(p)||(o=t.position+1),p=t.input.charCodeAt(++t.position)}if(Jp(t,i,o,!1),t.result)return 1;t.kind=c,t.result=h}}(t,h,Ap===n)&&(y=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===f&&(y=s&&of(t,p))),null!==t.tag&&"!"!==t.tag)if("?"===t.tag){for(l=0,u=t.implicitTypes.length;l<u;l+=1)if((c=t.implicitTypes[l]).resolve(t.result)){t.result=c.construct(t.result),t.tag=c.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else Tp.call(t.typeMap,t.tag)?(c=t.typeMap[t.tag],null!==t.result&&c.kind!==t.kind&&Yp(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+c.kind+'", not "'+t.kind+'"'),c.resolve(t.result)?(t.result=c.construct(t.result),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):Yp(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")):Yp(t,"unknown tag !<"+t.tag+">");return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||y}function sf(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var n=new Zp(t,e);for(n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)!function(t){var e,n,r,i,o=t.position,a=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap={},t.anchorMap={};0!==(i=t.input.charCodeAt(t.position))&&(ef(t,!0,-1),i=t.input.charCodeAt(t.position),!(0<t.lineIndent||37!==i));){for(a=!0,i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!Bp(i);)i=t.input.charCodeAt(++t.position);for(r=[],(n=t.input.slice(e,t.position)).length<1&&Yp(t,"directive name must not be less than one character in length");0!==i;){for(;Fp(i);)i=t.input.charCodeAt(++t.position);if(35===i){for(;0!==(i=t.input.charCodeAt(++t.position))&&!zp(i););break}if(zp(i))break;for(e=t.position;0!==i&&!Bp(i);)i=t.input.charCodeAt(++t.position);r.push(t.input.slice(e,t.position))}0!==i&&tf(t),Tp.call(Xp,n)?Xp[n](t,n,r):Kp(t,'unknown document directive "'+n+'"')}ef(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,ef(t,!0,-1)):a&&Yp(t,"directives end mark is expected"),af(t,t.lineIndent-1,Ip,!1,!0),ef(t,!0,-1),t.checkLineBreaks&&Rp.test(t.input.slice(o,t.position))&&Kp(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&nf(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,ef(t,!0,-1)):t.position<t.length-1&&Yp(t,"end of the stream or a document separator is expected")}(n);return n.documents}function lf(t,e,n){for(var r=sf(t,n),i=0,o=r.length;i<o;i+=1)e(r[i])}function uf(t,e){var n=sf(t,e);if(0!==n.length){if(1===n.length)return n[0];throw new qh("expected a single document in the stream, but found more")}}var cf={loadAll:lf,load:uf,safeLoadAll:function(t,e,n){lf(t,e,Hh.extend({schema:bp},n))},safeLoad:function(t,e){return uf(t,Hh.extend({schema:bp},e))}},hf=Object.prototype.toString,pf=Object.prototype.hasOwnProperty,ff=9,df=10,yf=13,gf=32,vf=33,mf=34,bf=35,_f=37,wf=38,xf=39,kf=42,Ef=44,Tf=45,Af=58,Sf=62,Mf=63,If=64,Of=91,Cf=93,Lf=96,Pf=123,Rf=124,Nf=125,jf={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},Df=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function zf(t){this.schema=t.schema||Ep,this.indent=Math.max(1,t.indent||2),this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Hh.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=function(t,e){var n,r,i,o,a,s,l;if(null===e)return{};for(n={},i=0,o=(r=Object.keys(e)).length;i<o;i+=1)a=r[i],s=String(e[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(l=t.compiledTypeMap[a])&&pf.call(l.styleAliases,s)&&(s=l.styleAliases[s]),n[a]=s;return n}(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Ff(t,e){for(var n,r=Hh.repeat(" ",e),i=0,o=-1,a="",s=t.length;i<s;)i=-1===(o=t.indexOf("\n",i))?(n=t.slice(i),s):(n=t.slice(i,o+1),o+1),n.length&&"\n"!==n&&(a+=r),a+=n;return a}function Bf(t,e){return"\n"+Hh.repeat(" ",t.indent*e)}function Gf(t){this.source=t,this.result="",this.checkpoint=0}function Hf(t,e){if(""===t)return t;for(var n,r,i=/[^\s] [^\s]/g,o="",a=0,s=0,l=i.exec(t);l;)e<(n=l.index)-s&&(r=a!==s?a:n,o&&(o+="\n"),o+=t.slice(s,r),s=r+1),a=n+1,l=i.exec(t);return o&&(o+="\n"),s!==a&&t.length-s>e?o+=t.slice(s,a)+"\n"+t.slice(a+1):o+=t.slice(s),o}function Uf(t){return!(32<=t&&t<=126||133===t||160<=t&&t<=55295||57344<=t&&t<=65533||65536<=t&&t<=1114111)}function qf(t,e,n){for(var r,i,o,a=n?t.explicitTypes:t.implicitTypes,s=0,l=a.length;s<l;s+=1)if(((i=a[s]).instanceOf||i.predicate)&&(!i.instanceOf||"object"==typeof e&&e instanceof i.instanceOf)&&(!i.predicate||i.predicate(e))){if(t.tag=n?i.tag:"?",i.represent){if(o=t.styleMap[i.tag]||i.defaultStyle,"[object Function]"===hf.call(i.represent))r=i.represent(e,o);else{if(!pf.call(i.represent,o))throw new qh("!<"+i.tag+'> tag resolver accepts not "'+o+'" style');r=i.represent[o](e,o)}t.dump=r}return 1}}function Vf(t,e,n,r,i,o){t.tag=null,t.dump=n,qf(t,n,!1)||qf(t,n,!0);var a=hf.call(t.dump);r=r&&(t.flowLevel<0||t.flowLevel>e);var s,l,u="[object Object]"===a||"[object Array]"===a;if(u&&(l=-1!==(s=t.duplicates.indexOf(n))),(null!==t.tag&&"?"!==t.tag||l||2!==t.indent&&0<e)&&(i=!1),l&&t.usedDuplicates[s])t.dump="*ref_"+s;else{if(u&&l&&!t.usedDuplicates[s]&&(t.usedDuplicates[s]=!0),"[object Object]"===a)r&&0!==Object.keys(t.dump).length?(function(t,e,n,r){var i,o,a,s,l,u,c="",h=t.tag,p=Object.keys(n);if(!0===t.sortKeys)p.sort();else if("function"==typeof t.sortKeys)p.sort(t.sortKeys);else if(t.sortKeys)throw new qh("sortKeys must be a boolean or a function");for(i=0,o=p.length;i<o;i+=1)u="",r&&0===i||(u+=Bf(t,e)),s=n[a=p[i]],Vf(t,e+1,a,!0,!0,!0)&&((l=null!==t.tag&&"?"!==t.tag||t.dump&&1024<t.dump.length)&&(t.dump&&df===t.dump.charCodeAt(0)?u+="?":u+="? "),u+=t.dump,l&&(u+=Bf(t,e)),Vf(t,e+1,s,!0,l)&&(t.dump&&df===t.dump.charCodeAt(0)?u+=":":u+=": ",c+=u+=t.dump));t.tag=h,t.dump=c||"{}"}(t,e,t.dump,i),l&&(t.dump="&ref_"+s+t.dump)):(function(t,e,n){for(var r,i,o,a="",s=t.tag,l=Object.keys(n),u=0,c=l.length;u<c;u+=1)o="",0!==u&&(o+=", "),i=n[r=l[u]],Vf(t,e,r,!1,!1)&&(1024<t.dump.length&&(o+="? "),o+=t.dump+": ",Vf(t,e,i,!1,!1)&&(a+=o+=t.dump));t.tag=s,t.dump="{"+a+"}"}(t,e,t.dump),l&&(t.dump="&ref_"+s+" "+t.dump));else if("[object Array]"===a)r&&0!==t.dump.length?(function(t,e,n,r){for(var i="",o=t.tag,a=0,s=n.length;a<s;a+=1)Vf(t,e+1,n[a],!0,!0)&&(r&&0===a||(i+=Bf(t,e)),i+="- "+t.dump);t.tag=o,t.dump=i||"[]"}(t,e,t.dump,i),l&&(t.dump="&ref_"+s+t.dump)):(function(t,e,n){for(var r="",i=t.tag,o=0,a=n.length;o<a;o+=1)Vf(t,e,n[o],!1,!1)&&(0!==o&&(r+=", "),r+=t.dump);t.tag=i,t.dump="["+r+"]"}(t,e,t.dump),l&&(t.dump="&ref_"+s+" "+t.dump));else{if("[object String]"!==a){if(t.skipInvalid)return;throw new qh("unacceptable kind of an object to dump "+a)}"?"!==t.tag&&function(t,e,n,r){var i,o,a,s,l,u,c,h,p,f,d,y,g,v,m,b,_,w,x,k,E;if(0!==e.length)if(-1===Df.indexOf(e)){for(i=!0,o=e.length?e.charCodeAt(0):0,a=gf===o||gf===e.charCodeAt(e.length-1),Tf!==o&&Mf!==o&&If!==o&&Lf!==o||(i=!1),l=s=a||-1<t.flowLevel&&t.flowLevel<=n?(a&&(i=!1),!1):!r,u=!0,c=new Gf(e),h=!1,f=p=0,d=t.indent*n,-1===(y=t.lineWidth)&&(y=9007199254740991),d<40?y-=d:y=40,v=0;v<e.length;v++){if(g=e.charCodeAt(v),i){if(ff!==(E=g)&&df!==E&&yf!==E&&Ef!==E&&Of!==E&&Cf!==E&&Pf!==E&&Nf!==E&&bf!==E&&wf!==E&&kf!==E&&vf!==E&&Rf!==E&&Sf!==E&&xf!==E&&mf!==E&&_f!==E&&Af!==E&&!jf[E]&&!Uf(E))continue;i=!1}u&&g===xf&&(u=!1),m=jf[g],b=Uf(g),(m||b)&&(g!==df&&g!==mf&&g!==xf?l=s=!1:g===df&&(u=!(h=!0),0<v&&e.charCodeAt(v-1)===gf&&(s=l=!1),s&&(_=v-p,p=v,f<_&&(f=_))),g!==mf&&(u=!1),c.takeUpTo(v),c.escapeChar())}if(i&&function(t,e){for(var n=0,r=t.implicitTypes.length;n<r;n+=1)if(t.implicitTypes[n].resolve(e))return 1}(t,e)&&(i=!1),w="",(s||l)&&(x=0,e.charCodeAt(e.length-1)===df&&(x+=1,e.charCodeAt(e.length-2)===df&&(x+=1)),0===x?w="-":2===x&&(w="+")),(l&&f<y||null!==t.tag)&&(s=!1),h||(l=!1),i)t.dump=e;else if(u)t.dump="'"+e+"'";else if(s)k=function(t,e){var n,r="",i=0,o=t.length,a=/\n+$/.exec(t);for(a&&(o=a.index+1);i<o;)i=o<(n=t.indexOf("\n",i))||-1===n?(r&&(r+="\n\n"),r+=Hf(t.slice(i,o),e),o):(r&&(r+="\n\n"),r+=Hf(t.slice(i,n),e),n+1);return a&&"\n"!==a[0]&&(r+=a[0]),r}(e,y),t.dump=">"+w+"\n"+Ff(k,d);else if(l)w||(e=e.replace(/\n$/,"")),t.dump="|"+w+"\n"+Ff(e,d);else{if(!c)throw new Error("Failed to dump scalar value");c.finish(),t.dump='"'+c.result+'"'}}else t.dump="'"+e+"'";else t.dump="''"}(t,t.dump,e,o)}null!==t.tag&&"?"!==t.tag&&(t.dump="!<"+t.tag+"> "+t.dump)}return 1}function Zf(t,e){var n=new zf(e=e||{});return n.noRefs||function(t,e){var n,r,i=[],o=[];for(function t(e,n,r){var i,o,a;if(null!==e&&"object"==typeof e)if(-1!==(o=n.indexOf(e)))-1===r.indexOf(o)&&r.push(o);else if(n.push(e),Array.isArray(e))for(o=0,a=e.length;o<a;o+=1)t(e[o],n,r);else for(o=0,a=(i=Object.keys(e)).length;o<a;o+=1)t(e[i[o]],n,r)}(t,i,o),n=0,r=o.length;n<r;n+=1)e.duplicates.push(i[o[n]]);e.usedDuplicates=new Array(r)}(t,n),Vf(n,0,t,!0,!0)?n.dump+"\n":""}Gf.prototype.takeUpTo=function(t){var e;if(t<this.checkpoint)throw(e=new Error("position should be > checkpoint")).position=t,e.checkpoint=this.checkpoint,e;return this.result+=this.source.slice(this.checkpoint,t),this.checkpoint=t,this},Gf.prototype.escapeChar=function(){var t=this.source.charCodeAt(this.checkpoint),e=jf[t]||function(t){var e,n,r=t.toString(16).toUpperCase();if(t<=255)e="x",n=2;else if(t<=65535)e="u",n=4;else{if(!(t<=4294967295))throw new qh("code point within a string may not be greater than 0xFFFFFFFF");e="U",n=8}return"\\"+e+Hh.repeat("0",n-r.length)+r}(t);return this.result+=e,this.checkpoint+=1,this},Gf.prototype.finish=function(){this.source.length>this.checkpoint&&this.takeUpTo(this.source.length)};var Wf={dump:Zf,safeDump:function(t,e){return Zf(t,Hh.extend({schema:bp},e))}};function Yf(t){return function(){throw new Error("Function "+t+" is deprecated and cannot be used.")}}var Kf={Type:Kh,Schema:$h,FAILSAFE_SCHEMA:Qh,JSON_SCHEMA:op,CORE_SCHEMA:ap,DEFAULT_SAFE_SCHEMA:bp,DEFAULT_FULL_SCHEMA:Ep,load:cf.load,loadAll:cf.loadAll,safeLoad:cf.safeLoad,safeLoadAll:cf.safeLoadAll,dump:Wf.dump,safeDump:Wf.safeDump,YAMLException:qh,MINIMAL_SCHEMA:Qh,SAFE_SCHEMA:bp,DEFAULT_SCHEMA:Ep,scan:Yf("scan"),parse:Yf("parse"),compose:Yf("compose"),addConstructor:Yf("addConstructor")},Xf=function(){function t(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;mr(this,t),this.url=e,!n||Ci(n)&&!Ci(this.url)?this.path=Oi(this.url):this.path=n,this.path_for_parent=n||this.path,this.parent=r,this.container=null,this.parent&&(this.parent.container?this.container=this.parent.container:this.parent.isContainer()&&(this.container=this.parent))}return _r(t,[{key:"load",value:function(){return t=this.url,new Promise((function(e,n){"string"==typeof t?Ti.io(t).then((function(t){try{var r=function(t){var e;try{e=Kf.safeLoad(t,{json:!0})}catch(t){throw t}return e}(t);e(r)}catch(t){n(t)}}),n):(t=Object.assign({},t),e(t))}));var t}},{key:"resourceFor",value:function(t){return{url:this.urlFor(t),path:this.pathFor(t),type:this.typeFor(t)}}},{key:"urlFor",value:function(t){return Jf(t)?t:Ci(t)&&this.container?this.parent.urlFor(this.path_for_parent+t):function(t,e){if(!t||!Ci(t))return t;var n,r="/"!==t[0];return e?(n=document.createElement("a")).href=e:n=window.location,r?Oi(n.href)+t:(n.origin||n.protocol+"//"+n.host)+t}(t,this.path)}},{key:"pathFor",value:Oi},{key:"typeFor",value:function(t){var e=(t=t.split("/").pop()).lastIndexOf(".");if(-1<e)return t.substring(e+1)}},{key:"isContainer",value:function(){return!1}}]),t}();function Jf(t){return!(!t||"global."!==t.slice(0,7))}function $f(t){return null!=t}function Qf(t){return"("+t+")"}function td(t){return"$"===t[0]?"context['"+t.substring(1)+"']":"context.feature.properties['"+t+"']"}function ed(t,e){return Qf(("string"==typeof(n=e)?'"'+n+'"':n)+" === "+td(t));var n}function nd(t,e){return Qf(t.filter($f).map((function(t){return Qf(t.join(" && "))})).join(" "+e+" "))}function rd(t,e,n){return e&&0<e.length?nd(e.map((function(t){return id(t,n)})),"||"):"true"}function id(t,e){var n=[];if("function"==typeof t)return[Qf(t.toString()+"(context)")];if(Array.isArray(t))return[rd(0,t,e)];if(null==t)return["true"];for(var r,i,o,a,s,l,u,c,h=Object.keys(t),p=0;p<h.length;p++){var f=h[p],d=t[f],y=vr(d);if("string"===y||"number"===y)n.push(ed(f,d));else if("boolean"===y)n.push((c=d,Qf(td(f)+(c?" != ":" == ")+"null")));else if("not"===f)n.push("!"+Qf(id(d,e).join(" && ")));else if("any"===f)n.push(rd(0,d,e));else if("all"===f)n.push(function(t,e){return t&&0<t.length?nd(t.map((function(t){return id(t,e)})),"&&"):"true"}(d,e));else if("none"===f)n.push("!"+Qf(rd(0,d,e)));else if(Array.isArray(d))n.push(function(t,e){return Qf(e.map((function(e){return ed(t,e)})).join(" || "))}(f,d));else if("object"===y&&null!=d)(d.max||d.min)&&n.push((r=f,i=d,u=l=s=a=void 0,l=[],u=(o=e)&&"function"==typeof o.rangeTransform&&o.rangeTransform,i.max&&(a=u?u(i.max):i.max,l.push(td(r)+" < "+a)),i.min&&(s=u?s=u(i.min):i.min,l.push(td(r)+" >= "+s)),Qf(l.join(" && "))));else{if(null!=d)throw new Error("Unknown Query syntax: "+d);n.push(" true ")}}return 0===h.length?["true"]:n}function od(t,e){return null==t?function(){return!0}:new Function("context","return "+Qf(id(t,e).join(" && "))+";")}var ad=["filter","draw","visible","enabled","data"],sd={},ld=["any","all","not","none"],ud=function(){function t(e){var n,r=e.layer,i=e.name,o=e.parent,a=e.draw,s=e.visible,l=e.enabled,u=e.filter,c=e.styles;if(mr(this,t),this.id=t.id++,this.config_data=r.data,this.parent=o,this.name=i,this.full_name=this.parent?this.parent.full_name+":"+this.name:this.name,this.draw=a,this.filter=u,this.styles=c,this.is_built=!1,l=void 0===l?s:l,this.parent&&!1===this.parent.visible?this.enabled=!1:this.enabled=!1!==l,this.draw)for(var h in this.draw)this.draw[h]=null==this.draw[h]?{}:this.draw[h],"object"!==vr(this.draw[h])?(n="Draw group '".concat(h,"' for layer ").concat(this.full_name," is invalid, must be an object, "),ki("warn",n+="but was set to `".concat(h,": ").concat(this.draw[h],"` instead")),delete this.draw[h]):this.draw[h].layer_name=this.full_name}return _r(t,[{key:"build",value:function(){ki("trace","Building layer '".concat(this.full_name,"'")),this.buildFilter(),this.buildDraw(),this.is_built=!0}},{key:"buildDraw",value:function(){this.draw=Ti.stringsToFunctions(this.draw,go.wrapFunction),this.calculatedDraw=function(t){var e,n=[];return t.parent&&(e=t.parent.calculatedDraw||[],n.push.apply(n,Lr(e))),n.push(t.draw),n}(this)}},{key:"buildFilter",value:function(){this.filter_original=this.filter,this.filter=Ti.stringsToFunctions(this.filter,go.wrapFunction);var t=vr(this.filter);if(null==this.filter||"object"===t||"function"===t)try{this.buildZooms(),this.buildPropMatches(),null!=this.filter&&("function"==typeof this.filter||0<Object.keys(this.filter).length)?this.filter=od(this.filter,fd):this.filter=null}catch(t){var e="Filter for layer ".concat(this.full_name," is invalid, `filter: ").concat(JSON.stringify(this.filter),"` ");ki("warn",e+="failed with error '".concat(t.message,"', stack trace: ").concat(t.stack))}else{var n="Filter for layer ".concat(this.full_name," is invalid, filter value must be an object or function, ");ki("warn",n+="but was set to `filter: ".concat(this.filter,"` instead"))}}},{key:"buildZooms",value:function(){var t=this.filter&&this.filter.$zoom,e=vr(t);if(null!=t&&"function"!==e){if(this.zooms={},"number"===e)this.zooms[t]=!0;else if(Array.isArray(t))for(var n=0;n<t.length;n++)this.zooms[t[n]]=!0;else if("object"===e&&(null!=t.min||null!=t.max))for(var r=t.min||0,i=t.max||25,o=r;o<i;o++)this.zooms[o]=!0;delete this.filter.$zoom}}},{key:"buildPropMatches",value:function(){var t=this;this.filter&&!Array.isArray(this.filter)&&"function"!=typeof this.filter&&Object.keys(this.filter).forEach((function(e){if(-1===ld.indexOf(e)){var n=t.filter[e],r=vr(n),i=Array.isArray(n);if(!i&&"string"!==r&&"number"!==r)return;"$"===e[0]?(t.context_prop_matches=t.context_prop_matches||[],t.context_prop_matches.push([e.substring(1),i?n:[n]])):(t.feature_prop_matches=t.feature_prop_matches||[],t.feature_prop_matches.push([e,i?n:[n]])),delete t.filter[e]}}))}},{key:"doPropMatches",value:function(t){if(this.feature_prop_matches)for(var e=0;e<this.feature_prop_matches.length;e++){var n=this.feature_prop_matches[e],r=t.feature.properties[n[0]];if(null==r||-1===n[1].indexOf(r))return!1}if(this.context_prop_matches)for(var i=0;i<this.context_prop_matches.length;i++){var o=this.context_prop_matches[i],a=t[o[0]];if(null==a||-1===o[1].indexOf(a))return!1}return!0}},{key:"doesMatch",value:function(t){if(!this.enabled)return!1;if(this.is_built||this.build(),null!=this.zooms&&!this.zooms[t.zoom])return!1;if(!this.doPropMatches(t))return!1;var e;if(this.filter instanceof Function)try{e=this.filter(t)}catch(e){var n="Filter for this ".concat(this.full_name,": `filter: ").concat(this.filter_original,"` ");ki("error",n+="failed with error '".concat(e.message,"', stack trace: ").concat(e.stack),t.feature)}else e=null==this.filter;return!!e&&(this.children_to_parse&&(function(t,e,n){for(var r in e){var i,o=e[r];"object"!==vr(o)||Array.isArray(o)?(i="Layer value must be an object: cannot create layer '".concat(r,": ").concat(JSON.stringify(o),"'"),i+=", under parent layer '".concat(t.full_name,"'."),n[t.name]&&(i+=" The parent name '".concat(t.name,"' is also the name of a style, did you mean to create a 'draw' group"),t.parent&&(i+=" under '".concat(t.parent.name,"'")),i+=" instead?"),ki("warn",i)):yd(r,o,t,n)}}(this,this.children_to_parse,this.styles),delete this.children_to_parse),!0)}}]),t}();ud.id=0;var cd,hd=function(){xr(e,ud);var t=Ir(e);function e(n){var r;return mr(this,e),(r=t.call(this,n)).is_leaf=!0,r}return e}(),pd=function(){xr(e,ud);var t=Ir(e);function e(n){var r;return mr(this,e),(r=t.call(this,n)).is_tree=!0,r.layers=n.layers||[],r}return _r(e,[{key:"addLayer",value:function(t){this.layers.push(t)}},{key:"buildDrawGroups",value:function(t){var e=[],n=[];if(function t(e,n,r,i){var o=!1;if(0!==n.length){for(var a=0;a<n.length;a++){var s=n[a];s.is_leaf?s.doesMatch(e)&&(o=!0,r.push(s),i.push(s.id)):s.is_tree&&s.doesMatch(e)&&(o=!0,t(e,s.layers,r,i)||(r.push(s),i.push(s.id)))}return o}}(t,[this],e,n),0<e.length){var r=function(t){if(1<t.length){for(var e=t[0],n=1;n<t.length;n++)e+="/"+t[n];return e}return t[0]}(n);if(void 0===sd[r]){for(var i=e.map((function(t){return t&&!1!==t.visible&&t.calculatedDraw})),o={},a=0;a<i.length;a++){var s=i[a];if(s)for(var l=0;l<s.length;l++){var u=s[l];for(var c in u)o[c]=!0}}for(var h in o)sd[r]=sd[r]||{},sd[r][h]=function(t,e){for(var n,r=0,i=0;i<t.length;i++)t[i].length>r&&(r=t[i].length);if(0===r)return null;for(var o={visible:!0},a=0;a<r;a++)!function(r){n=[],t.forEach((function(t){t[r]&&t[r][e]&&-1===n.indexOf(t[r][e])&&n.push(t[r][e])})),0!==n.length&&(n.sort((function(t,e){return(t&&t.layer_name)>(e&&e.layer_name)?1:-1})),ya.apply(void 0,[o].concat(Lr(n))),delete o.layer_name)}(a);return!1===o.visible?null:o}(i,h),sd[r][h]?(sd[r][h].key=r+"/"+h,sd[r][h].layers=e.map((function(t){return t&&t.full_name})),sd[r][h].group=h):delete sd[r][h];sd[r]&&0===Object.keys(sd[r]).length&&(sd[r]=null)}return sd[r]}}}]),e}(),fd={rangeTransform:function(t){return"string"==typeof t&&"px2"===t.trim().slice(-3)?"".concat(parseFloat(t)," * context.meters_per_pixel_sq"):t}};function dd(t){return-1<ad.indexOf(t)}function yd(t,e,n,r){var i,o={name:t,layer:e=null==e?{}:e,parent:n,styles:r},a=Cr(function(t){var e={},n={};for(var r in t)dd(r)?e[r]=t[r]:n[r]=t[r];return[e,n]}(e),2),s=a[0],l=a[1],u=(i=l,0===Object.keys(i).length),c=new(u&&null!=n?hd:pd)(Object.assign(o,s));return c.enabled&&(n&&n.addLayer(c),c.children_to_parse=u?null:l),c}var gd=/^global\.(.+)$/,vd=cd={loadScene:function(t,e){var n=this,r=1<arguments.length&&void 0!==e?e:{},i=r.path,o=r.type,a=[];return this.loadSceneRecursive({url:t,path:i,type:o},null,a).then((function(t){return n.finalize(t)})).then((function(t){var e=t.config,r=t.bundle;return e?(0<a.length&&a.forEach((function(t){var e="Failed to import scene: ".concat(t.url);ki("error",e,t),n.trigger("error",{type:"scene_import",message:e,error:t,url:t.url})})),{config:e,bundle:r}):Promise.reject(a[0])}))},loadSceneRecursive:function(t,e,n){var r=this,i=t.url,o=t.path,a=(t.type,2<arguments.length&&void 0!==n?n:[]);if(!i)return Promise.resolve({});var s=new Xf(i,o,e);return s.load().then((function(t){if(null==t.import)return r.normalize(t,s),{config:t,bundle:s};Array.isArray(t.import)||(t.import=[t.import]);var e=[];return t.import.forEach((function(t){"object"===vr(t)&&(t=Li(new Blob([JSON.stringify(t)]))),e.push(s.resourceFor(t))})),delete t.import,Promise.all(e.map((function(t){return r.loadSceneRecursive(t,s,a)}))).then((function(e){e.forEach((function(t){return r.normalize(t.config,t.bundle)}));var n=e.map((function(t){return t.config}));return t=ya.apply(void 0,Lr(n).concat([t])),r.normalize(t,s),{config:t,bundle:s}}))})).catch((function(t){return t.url=i,a.push(t),{}}))},normalize:function(t,e){return this.normalizeDataSources(t,e),this.normalizeFonts(t,e),this.normalizeTextures(t,e),this.hoistTextures(t,e),{config:t,bundle:e}},normalizeDataSources:function(t,e){for(var n in t.sources=t.sources||{},t.sources)this.normalizeDataSource(t.sources[n],e);return t},normalizeDataSource:function(t,e){if(t.url&&(t.url=e.urlFor(t.url)),t.scripts)for(var n in Array.isArray(t.scripts)&&(t.scripts=t.scripts.reduce((function(t,e){return t[e]=e,t}),{})),t.scripts)t.scripts[n]=e.urlFor(t.scripts[n]);return t},normalizeFonts:function(t,e){for(var n in t.fonts=t.fonts||{},t.fonts){var r;Array.isArray(t.fonts[n])?t.fonts[n].forEach((function(t){t.url=t.url&&e.urlFor(t.url)})):(r=t.fonts[n]).url=r.url&&e.urlFor(r.url)}return t},normalizeTextures:function(t,e){if(t.textures=t.textures||{},t.textures)for(var n in t.textures){var r=t.textures[n];r.url&&(r.url=e.urlFor(r.url))}},hoistTextures:function(t,e){var n=this;if(t.styles)for(var r in t.styles)!function(r){var i=t.styles[r],o=i.texture;"string"!=typeof o||t.textures[o]||(i.texture=n.hoistTexture(o,t,e)),i.material&&["emission","ambient","diffuse","specular","normal"].forEach((function(r){var o=null!=i.material[r]&&i.material[r].texture;"string"!=typeof o||t.textures[o]||(i.material[r].texture=n.hoistTexture(o,t,e))}))}(r);if(this.hoistStyleShaderUniformTextures(t,e,{include_globals:!1}),t.layers)for(var i=[t.layers];0<i.length;){var o=i.pop();if("object"===vr(o)&&!Array.isArray(o))for(var a in o)if("draw"===a){var s,l,u=o[a];for(var c in u)u[c].texture&&("string"!=typeof(s=u[c].texture)||t.textures[s]||(u[c].texture=this.hoistTexture(s,t,e))),u[c].outline&&u[c].outline.texture&&("string"!=typeof(l=u[c].outline.texture)||t.textures[l]||(u[c].outline.texture=this.hoistTexture(l,t,e)))}else{if(dd(a))continue;i.push(o[a])}}},hoistStyleShaderUniformTextures:function(t,e,n){var r=this,i=n.include_globals;if(t.styles)for(var o in t.styles){var a=t.styles[o];a.shaders&&a.shaders.uniforms&&Xo.parseUniforms(a.shaders.uniforms).forEach((function(n){var o=n.type,a=n.value,s=n.key,l=n.uniforms;"sampler2D"!==o||"string"!=typeof a||t.textures[a]||!i&&Jf(a)||(l[s]=r.hoistTexture(a,t,e))}))}},hoistTexture:function(t,e,n){var r=Jf(t),i=r?t:n.urlFor(t),o=r?"texture-".concat(i):i;return e.textures[o]={url:i},o},applyGlobalProperties:function(t){if(!t.global||0===Object.keys(t.global).length)return t;var e=function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:".",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};for(var o in r=r?r+n:"",e){var a=r+o,s=e[o];"object"!==vr(i[a]=s)||Array.isArray(s)||t(s,n,a,i)}return i}(t.global);return function t(n){if("string"==typeof n){var r=function t(e,n,r){var i=2<arguments.length&&void 0!==r?r:[];if(-1<i.indexOf(e))ki({level:"warn",once:!0},"Global properties: cyclical reference detected",i);else{i.push(e);var o=gd.exec(e);if(o){var a=o[1];if(a){var s=n[a];if(void 0!==s)return"string"==typeof s&&gd.exec(s)?t(s,n,i):s;ki({level:"warn",once:!0},"Global property not found: "+e)}else ki({level:"warn",once:!0},"Invalid global property reference: "+e)}}}(n,e);void 0!==r&&(n=r)}else if(Array.isArray(n))for(var i=0;i<n.length;i++)n[i]=t(n[i]);else if("object"===vr(n))for(var o in n)n[o]=t(n[o]);return n}(t)},finalize:function(t){var e=t.config,n=t.bundle;return e?(e.global=e.global||{},e.scene=e.scene||{},e.cameras=e.cameras||{},e.lights=e.lights||{},e.styles=e.styles||{},e.layers=e.layers||{},e.camera&&(e.cameras.default=e.camera),0===Object.keys(e.cameras).length&&(e.cameras.default={}),0!==Object.keys(e.lights).length&&!Object.keys(e.lights).every((function(t){return!1===e.lights[t].visible}))||(e.lights.default_light={type:"directional"}),{config:e,bundle:n}):{}}};Io(cd);var md=function(){function t(){mr(this,t),this.coords={},this.max_proxy_descendant_depth=6,this.max_proxy_ancestor_depth=10}return _r(t,[{key:"sourceTiles",value:function(t,e){return this.coords[t.key]&&this.coords[t.key].sources&&this.coords[t.key].sources[e.name]}},{key:"addTile",value:function(t){var e=t.coords.key,n=this.coords[e];(n=n||(this.coords[e]={descendants:0})).sources||(n.sources={}),n.sources[t.source.name]||(n.sources[t.source.name]={});for(var r=(n.sources[t.source.name][t.style_zoom]=t).coords.z-1;0<=r;r--){var i=_a.coordinateAtZoom(t.coords,r);this.coords[i.key]||(this.coords[i.key]={descendants:0}),this.coords[i.key].descendants++}}},{key:"removeTile",value:function(t){var e=this.sourceTiles(t.coords,t.source),n=t.coords.key;e&&(delete e[t.style_zoom],0===Object.keys(e).length&&(delete this.coords[n].sources[t.source.name],0===Object.keys(this.coords[n].sources).length&&(delete this.coords[n].sources,0===this.coords[n].descendants&&delete this.coords[n])));for(var r=t.coords.z-1;0<=r;r--){var i=_a.coordinateAtZoom(t.coords,r);this.coords[i.key]&&0<this.coords[i.key].descendants&&(this.coords[i.key].descendants--,0!==this.coords[i.key].descendants||this.coords[i.key].sources||delete this.coords[i.key])}}},{key:"getAncestor",value:function(t,e){var n=t.coords,r=t.style_zoom,i=t.source,o=1<arguments.length&&void 0!==e?e:1;if(!(o>this.max_proxy_ancestor_depth)){if(r>i.max_coord_zoom){var a=this.sourceTiles(n,i);if(a)for(var s=r-1;s>=i.max_coord_zoom;s--)if(a[s]&&a[s].loaded)return a[s];r=i.max_coord_zoom}r--;var l=_a.coordinateAtZoom(n,n.z-1),u=this.sourceTiles(l,i);return u&&u[r]&&u[r].loaded?u[r]:0<l.z?this.getAncestor({coords:l,style_zoom:r,source:i},o+1):void 0}}},{key:"getDescendants",value:function(t,e){var n=t.coords,r=t.style_zoom,i=t.source,o=1<arguments.length&&void 0!==e?e:1,a=[];if(r>=i.max_coord_zoom){var s=this.sourceTiles(n,i);if(s)for(var l=Math.max(Qr.default_view_max_zoom,r+this.max_proxy_descendant_depth),u=r+1;u<=l;u++)if(s[u]&&s[u].loaded)return a.push(s[u]),a;return a}if(this.coords[n.key]&&0<this.coords[n.key].descendants){r++;for(var c=_a.childrenForCoordinate(n),h=0;h<c.length;h++){var p=c[h],f=this.sourceTiles(p,i);f&&f[r]&&f[r].loaded?a.push(f[r]):o<=this.max_proxy_descendant_depth&&p.z<=i.max_coord_zoom&&a.push.apply(a,Lr(this.getDescendants({coords:p,source:i,style_zoom:r},o+1)))}}return a}}]),t}(),bd=function(){function t(e,n,r,i){mr(this,t),Object.assign(this,e),this.placed=null,this._tile=i;var o=Qr.unitsPerMeter(i.coords.z)*Math.pow(2,r-i.style_zoom);this.layout=Object.assign({},e.layout),this.layout.repeat_scale=.75,this.layout.repeat_distance=this.layout.repeat_distance||0,this.layout.repeat_distance/=o,this.position=Qr.tileSpaceToMeters(this.position,i.coords.z,i.min),this._worldToScreen=n,this._screenSpaceBoundingBox=void 0,this._boundingCircles=void 0}return _r(t,[{key:"getTile",value:function(){return this._tile}},{key:"isFlat",value:function(){return this.is_flat}},{key:"getScreenSpaceBoundingBox",value:function(){var t,e,n,r,i,o,a;return this._screenSpaceBoundingBox||((t=this._worldToScreen(this.position,!0))[0]+=this.offset[0],t[1]+=this.offset[1],e=this.size[0]/2+this.layout.buffer[0],n=this.size[1]/2+this.layout.buffer[1],r=t[0]-e,i=t[0]+e,o=t[1]-n,a=t[1]+n,this._screenSpaceBoundingBox={left:r,bottom:a,right:i,top:o}),this._screenSpaceBoundingBox}},{key:"getBoundingCircles",value:function(){return this._boundingCircles||(this._boundingCircles="point"===this.type?this._convertSidesToScreenSpaceCircles():this._convertCirclesToScreenSpace()),this._boundingCircles}},{key:"_convertSidesToScreenSpaceCircles",value:function(){var t=this._tile.coords.z,e=this._tile.min,n=Qr.tileSpaceToMeters([this.sides[0],this.sides[1]],t,e),r=Qr.tileSpaceToMeters([this.sides[2],this.sides[3]],t,e),i=Cr(this._worldToScreen(n,!0),2),o=i[0],a=i[1],s=Cr(this._worldToScreen(r,!0),2);return Ac(o,a,s[0],s[1],this.size[1]/2+this.layout.buffer[1])}},{key:"_convertCirclesToScreenSpace",value:function(){for(var t=[],e=this.circles,n=this._tile.coords.z,r=this._tile.min,i=0;i<e.length-2;i+=3){var o=Qr.tileSpaceToMeters([e[i],-e[i+1]],n,r),a=e[i+2]/Qr.unitsPerMeter(n),s=[o[0]+a,o[1]],l=this._worldToScreen(o,!0),u=this._worldToScreen(s,!0),c=Jr.getLineLength(l[0],l[1],u[0],u[1]);t.push(l[0],l[1],c)}return t}}]),t}(),_d=function(t,e,n,r,i,o){xd=wd,wd={};var a={},s={},l=[],u=n.worldToScreen.bind(n),c=new Td(o);for(var h in t.forEach((function(t){for(var n in t.meshes)t.meshes[n].forEach((function(n){if(n.labels){for(var r in c.trackMesh(n),n.labels["non-collision"]){var i=Ed(n.labels["non-collision"][r],n,u,e,t);i.label.text_data&&c.insertLabel(i,t)}for(var o in n.labels.collision){var l;a[o]||(l=Ed(n.labels.collision[o],n,u,e,t),a[o]=l.label,s[o]=l)}}}))})),s){var p=s[h];p.linked&&(p.linked=s[p.linked]),l.push(p)}var f=n.getViewport(),d=f.width,y=f.height;return To.startTile("main",{apply_repeat_groups:!0,return_hidden:!0,grid_index:new ko(d,y,30)}),To.addStyle("main","main"),To.collide(l,"main","main").then((function(t){return t.forEach((function(t){var e,n,i,o,a,s,l=t.mesh,u=t.label.getTile();l.valid&&(!(e=0)!==t.show||r&&t.label.breach&&!xd[t.label.id]||(e=1),e&&(wd[t.label.id]=!0),t.label.text_data&&c.insertLabel(t,u),n=l.vertex_layout.offset.a_shape,i=l.vertex_layout.stride,a=(o=l.vertex_layout.attribs.find((function(t){return"a_shape"===t.name}))).byte_size/o.size,n+=3*a,s=!0,t.ranges.forEach((function(t){if(s){for(var r=0;r<t[1];r++){if(l.vertex_data[t[0]+r*i+n]===e)return void(s=!1);l.vertex_data[t[0]+r*i+n]=e}c.trackMesh(l)}})))})),c.createTextures(i).then((function(){return c.updateMeshes()}))})).then((function(e){e.forEach((function(t){return t.valid&&t.upload()})),t.forEach((function(t){t.labeled=!0})),l=[],s={},a={}}))},wd={},xd={},kd=120===new Uint8Array(new Uint32Array([305419896]).buffer)[0];function Ed(t,e,n,r,i){var o=t.container,a=o.label,s=o.linked,l=t.ranges;return{label:new bd(a,n,r,i),linked:s,ranges:l,mesh:e}}var Td=function(){function t(e){mr(this,t),this.textureManager=Lo(e),this.tiles={},this.meshes=[],this.containers=[]}return _r(t,[{key:"insertLabel",value:function(t,e){var n=t.label.text_data,r=n.text_settings_key,i=n.text,o=n.text_info;this.containers.push(t);var a=this._ensureTextSection(e,r);a[i]?t.label.text_data.text_info=a[i]:a[i]=o}},{key:"trackMesh",value:function(t){-1===this.meshes.indexOf(t)&&this.meshes.push(t)}},{key:"updateMeshes",value:function(){var t=this;return this.containers.forEach((function(e){var n,r,i,o,a,s,l,u,c,h;e.label.text_data&&(n=e.label.getTile(),(r=e.mesh).valid?(i=e.label.type,o=e.label.text_data.text_info,t.tiles[n.id]&&t.tiles[n.id].textures&&(a=t.tiles[n.id].textures[0],r.uniforms.u_texture=a,-1===r.textures.indexOf(a)&&r.textures.push(a),"point"===i||"straight"===i?(s="point"===i?o.align[e.label.align].texcoords:o.texcoords[i].texcoord,t.setTexCoords(r,e,s)):"curved"===i&&(l=o.segments.length,u=o.texcoords_stroke,c=o.texcoords.curved,t.setTexCoords(r,e,(function(t){return t<l?u[t]:c[t-l].texcoord}))))):t.tiles[n.id]&&t.tiles[n.id].textures&&(h=t.tiles[n.id].textures[0],t.textureManager.release(h)))})),this.meshes}},{key:"setTexCoords",value:function(t,e,n){var r,i,o,a,s,l,u=n instanceof Function;u||(i=(r=Cr(n,4))[0],o=r[1],a=r[2],s=r[3],l=[[i,o],[a,o],[a,s],[i,s]]);var c=t.vertex_layout.stride,h=new DataView(t.vertex_data.buffer),p=t.vertex_layout.offset.a_texcoord;e.ranges.forEach((function(t,e){var r,i,o,a,s,f=Cr(t,3),d=f[0],y=f[1],g=f[2];u&&(i=(r=Cr(n(e),4))[0],o=r[1],a=r[2],s=r[3],l=[[i,o],[a,o],[a,s],[i,s]]);for(var v=g?y/2:0;v<y;v++){var m=l[v%4],b=d+v*c;h.setUint16(b+p,65535*m[0],kd),h.setUint16(b+p+2,65535*m[1],kd)}}))}},{key:"createTextures",value:function(t){var e=this;return Promise.all(Object.values(this.tiles).map((function(n){var r=n.id,i=n.key,o=n.texts;return e._createTexturesForTile(t,o,"labels-".concat(i,"-").concat(r),r,e.textureManager).then((function(t){t.length&&(t.forEach((function(t){e.textureManager.retain(t),1<e.textureManager.getRetainCount(t)&&e.textureManager.release(t)})),e.tiles[r].textures=t)}))})))}},{key:"_createTexturesForTile",value:function(t,e,n,r,i){var o=new jc,a=o.setTextureTextPositions(e);return o.rasterize(e,a,r,n,t,i)}},{key:"_ensureTile",value:function(t){var e=t.id,n=t.key;return this.tiles[e]||(this.tiles[e]={id:e,key:n,texts:{}}),this.tiles[e]}},{key:"_ensureTextSection",value:function(t,e){var n=this._ensureTile(t).texts;return n[e]||(n[e]={}),n[e]}}]),t}(),Ad=function(){function t(e){var n=this,r=e.scene,i=e.view;mr(this,t),this._scene=r,this._view=i,this._visible_tiles={},this._pyramid=new md,this._visible_coords={},this._building_tiles=null,this._renderable_tiles=[],this._active_styles=[],this._tile_visibility_counters={},this._update_labels_on_queue_check=!1,this._all_visible_tiles_are_cached=!1,this._debouncedUpdateLabels=Ei(this._updateLabels.bind(this),100,200),this._main_thread_target=["TileManager",this._scene.id].join("_"),ui.addTarget(this._main_thread_target,this),this._keepCoordinate=this._keepCoordinate.bind(this),this._removeTilesFilter=this._removeTilesFilter.bind(this),this._removeCachedTilesFilter=this._removeCachedTilesFilter.bind(this),this._is_labeled=!1,this._tile_cache=new H.util.Cache(function(){var t=.1;return navigator&&navigator.deviceMemory?t=5*navigator.deviceMemory/100:window&&window.screen&&(t=window.screen.width/512*window.screen.height/512*.03*3,t=Math.min(t,1)),1024*t*1024*1024}(),(function(t,e,r){n._visible_tiles[t]&&n._visible_tiles[t]===e||e.destroy()}))}return _r(t,[{key:"destroy",value:function(){this._tile_cache.removeAll(),this.forEachVisibleTile((function(t){return t.destroy()})),this._visible_tiles={},this._pyramid=null,this._visible_coords={},this._scene=null,this._view=null}},{key:"keepTile",value:function(t){this._visible_tiles[t.key]=t,this._pyramid.addTile(t)}},{key:"hasTile",value:function(t){return void 0!==this._visible_tiles[t]}},{key:"_forgetTile",value:function(t){var e,n;this.hasTile(t)&&(e=this._visible_tiles[t],this._pyramid.removeTile(e),delete this._visible_tiles[t],e.loaded?this._tile_cache.add(e.key,e,function(t){var e=0;for(var n in t.meshes)for(var r=t.meshes[n],i=0;i<r.length;i++){var o=r[i];e+=o.buffer_size;for(var a=0;a<o.textures.length;a++)e+=t.textureManager.getByteLength(o.textures[a])}return e}(e)):(n=this._tile_cache.get(e.key))?this._tile_cache.drop(n.key):e.destroy(),this._tileBuildStop(e))}},{key:"removeTile",value:function(t){this._forgetTile(t),this._scene.requestRedraw()}},{key:"forEachVisibleTile",value:function(t){for(var e in this._visible_tiles)t(this._visible_tiles[e])}},{key:"removeTiles",value:function(t){for(var e in this._visible_tiles)t(this._visible_tiles[e])&&this.removeTile(e)}},{key:"removeCachedTiles",value:function(t){var e=this;this._tile_cache.forEach((function(n,r){t(r)&&e._tile_cache.drop(n)}))}},{key:"updateTilesForView",value:function(t){var e=0<arguments.length&&void 0!==t&&t;this._visible_coords={};for(var n=this._view.findVisibleTileCoordinates(),r=0;r<n.length;r++){var i=n[r];this._visible_coords[i.key]=i}this.updateTileStates(e)}},{key:"updateTileStates",value:function(t){var e=0<arguments.length&&void 0!==t&&t;for(var n in this._all_visible_tiles_are_cached=!0,this._visible_coords)this._keepCoordinate(n,e);this._all_visible_tiles_are_cached&&(this._is_labeled=!1,this._debouncedUpdateLabels()),this._tile_cache.removeAll(this._removeCachedTilesFilter),this._updateProxyTiles(),this.removeTiles(this._removeTilesFilter),this._updateRenderableTiles(),this._updateActiveStyles()}},{key:"_removeTilesFilter",value:function(t){if(t.style_zoom===this._view.lookAtManipulator.getLookAtData().tile_level){if(this._visible_coords[t.coords.key])return!1;for(var e in this._visible_coords)if(_a.isDescendant(t.coords,this._visible_coords[e]))return!1}return!t.isProxy()}},{key:"_updateLabels",value:function(){var t,e=this;this._building_tiles&&0!==Object.keys(this._building_tiles).length||(jc.pruneTextCache(),t=this._renderable_tiles.sort(Sd),_d(t,function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2,r=Math.pow(10,n);return Math.round(Math.floor(t*e)/e*r)/r}(this._view.lookAtManipulator.getLookAtData().zoom,2),this._view.lookAtManipulator,this.isLoadingVisibleTiles(),this._scene.gl,this._scene.id).then((function(){e._is_labeled=!Ao.hasPendingTasks(),e._scene.immediateRedraw(),e._update_labels_on_queue_check=!1})))}},{key:"_updateProxyTiles",value:function(){var t,e=this,n=this._view.lookAtManipulator.getZoomDirection();0!==n&&(t=!1,this.forEachVisibleTile((function(r){var i;if(r.setProxyFor(null),1===n)r.built||(i=e._pyramid.getAncestor(r))&&(i.setProxyFor(r),t=!0);else if(-1===n&&!r.built)for(var o=e._pyramid.getDescendants(r),a=0;a<o.length;a++)o[a].setProxyFor(r),t=!0})),t||this._view.lookAtManipulator.resetZoomDirection())}},{key:"getRenderableTiles",value:function(){return this._renderable_tiles}},{key:"_updateRenderableTiles",value:function(){for(var t in this._renderable_tiles=[],this._visible_tiles){var e=this._visible_tiles[t],n=this._tile_cache.get(t);e.loaded?(this._renderable_tiles.push(e),n&&n!==e&&this._tile_cache.drop(t)):n&&(n.generation===this._scene.generation?this._renderable_tiles.push(n):this._tile_cache.drop(t))}return this._renderable_tiles}},{key:"getWorkerForTile",value:function(t,e){return e.has_volatile_data?this._scene.getWorkers(1)[0]:e.tiled?this._scene.getWorkers(0)[Math.abs(t.x+t.y+t.z)%this._scene.num_workers]:this._scene.getWorkers(0)[e.id%this._scene.num_workers]}},{key:"getActiveStyles",value:function(){return this._active_styles}},{key:"_updateActiveStyles",value:function(){for(var t=this._renderable_tiles,e={},n=0;n<t.length;n++){var r=t[n];Object.keys(r.meshes).forEach((function(t){return e[t]=!0}))}return this._active_styles=Object.keys(e),this._active_styles}},{key:"isLoadingVisibleTiles",value:function(){var t=!1;for(var e in this._visible_tiles)if(!this._visible_tiles[e].built){t=!0;break}return t}},{key:"updateTilesVisibilityCounters",value:function(){var t=this;Object.keys(this._visible_coords).forEach((function(e){e in t._tile_visibility_counters||(t._tile_visibility_counters[e]=0)}));var e=Object.keys(this._tile_visibility_counters),n=[];e.forEach((function(e){e in t._visible_coords?(t._tile_visibility_counters[e]++,30<=t._tile_visibility_counters[e]&&n.push(t._visible_coords[e])):(t._tile_visibility_counters[e]--,t._tile_visibility_counters[e]<=0&&delete t._tile_visibility_counters[e])})),n.length&&this.loadCoordinates(n)}},{key:"loadCoordinates",value:function(t){var e=this;t.sort((function(t,n){var r=e._view.lookAtManipulator.getLookAtData().position,i=Qr.metersPerTile(t.z)/2,o=Qr.metersForTile(t);o.x+=i,o.y-=i;var a=Qr.metersForTile(n);a.x+=i,a.y-=i;var s=Math.abs(r[0]-o.x)+Math.abs(r[1]-o.y),l=Math.abs(r[0]-a.x)+Math.abs(r[1]-a.y);return(t.center_dist=s)<(n.center_dist=l)?-1:l===s?0:1})),t.forEach((function(t){return e.loadCoordinate(t)}))}},{key:"_keepCoordinate",value:function(t,e){var n=1<arguments.length&&void 0!==e&&e,r=this._visible_coords[t];if(r.z===this._view.center_tile.z)for(var i in this._scene.sources){var o,a,s,l=this._scene.sources[i];l.builds_geometry_tiles&&l.includesTile(r,this._view.lookAtManipulator.getLookAtData().tile_level)&&(o=_a.normalizedKey(r,l,this._view.lookAtManipulator.getLookAtData().tile_level))&&!this.hasTile(o)&&((a=n&&this._tile_cache.get(o))||(this._all_visible_tiles_are_cached=!1),s=a||new _a({source:l,coords:r,worker:this.getWorkerForTile(r,l),style_zoom:Ti.zoomToTileLevel(r.z),view:this._view,sceneId:this._scene.id}),"ObjectSource"===l.config.type&&(s.syncedAt=l.getSyncedAt()),this.keepTile(s))}}},{key:"loadCoordinate",value:function(t){if(t.z===this._view.center_tile.z)for(var e in this._scene.sources){var n,r=this._scene.sources[e];r.builds_geometry_tiles&&r.includesTile(t,this._view.lookAtManipulator.getLookAtData().tile_level)&&(n=_a.normalizedKey(t,r,this._view.lookAtManipulator.getLookAtData().tile_level),this.hasTile(n)&&this.buildTile(this._visible_tiles[n]))}}},{key:"buildTile",value:function(t,e){this._building_tiles&&this._building_tiles[t.key]||t.built&&t.generation===this._scene.generation||(this._tileBuildStart(t.key),t.build(this._scene.generation,e))}},{key:"buildTileStylesCompleted",value:function(t){var e=t.tile,n=t.progress;if(null==this._visible_tiles[e.key])_a.abortBuild(e,this._scene.id);else if(e.generation!==this._scene.generation)_a.abortBuild(e,this._scene.id);else{if(e.id<this._visible_tiles[e.key].id)return void _a.abortBuild(e,this._scene.id);e=this._visible_tiles[e.key].merge(e),n.done&&(e.built=!0),e.buildMeshes(this._scene.styles,n),this.updateTileStates(),this._scene.requestRedraw()}n.done&&this._tileBuildStop(e)}},{key:"buildTileError",value:function(t){this._forgetTile(t.key),_a.abortBuild(t,this._scene.id)}},{key:"_tileBuildStart",value:function(t){this._is_labeled=!1,this._building_tiles=this._building_tiles||{},this._building_tiles[t]=!0}},{key:"_tileBuildStop",value:function(t){this._building_tiles&&(t.source&&t.source.hasLabeledData()&&(this._update_labels_on_queue_check=!0),delete this._building_tiles[t.key],Ao.removeForTile(t.id),this.checkBuildQueue())}},{key:"isReady",value:function(){return this._is_labeled&&!this.isLoadingVisibleTiles()}},{key:"checkBuildQueue",value:function(){this._building_tiles&&0!==Object.keys(this._building_tiles).length||(this._building_tiles=null,this._update_labels_on_queue_check?this._updateLabels():(this._is_labeled=!Ao.hasPendingTasks(),this._scene.immediateRedraw()))}},{key:"_removeCachedTilesFilter",value:function(t,e){var n=e.source;return!this._visible_tiles[t]&&(e.generation!==this._scene.generation||"ObjectSource"===n.config.type&&n.getSyncedAt()>e.syncedAt)}}]),t}();function Sd(t,e){var n=t.coords,r=e.coords;return n.z-r.z||n.x-r.x||n.y-r.y}function Md(t){mr(this,Md),this.defaults={},this.defaults.culling=!0,this.defaults.culling_face=t.BACK,this.defaults.blending=!1,this.defaults.blending_src=t.ONE_MINUS_SRC_ALPHA,this.defaults.blending_dst=t.ONE_MINUS_SRC_ALPHA,this.defaults.blending_src_alpha=t.ONE,this.defaults.blending_dst_alpha=t.ONE_MINUS_SRC_ALPHA,this.defaults.depth_write=!0,this.defaults.depth_test=!0,t.depthFunc(t.LESS),this.culling=new Id({cull:this.defaults.culling,face:this.defaults.culling_face},(function(e){e.cull?(t.enable(t.CULL_FACE),t.cullFace(e.face)):t.disable(t.CULL_FACE)})),this.blending=new Id({blend:this.defaults.blending,src:this.defaults.blending_src,dst:this.defaults.blending_dst,src_alpha:this.defaults.blending_src_alpha,dst_alpha:this.defaults.blending_dst_alpha},(function(e){e.blend?(t.enable(t.BLEND),e.src_alpha&&e.dst_alpha?t.blendFuncSeparate(e.src,e.dst,e.src_alpha,e.dst_alpha):t.blendFunc(e.src,e.dst)):t.disable(t.BLEND)})),this.depth_write=new Id({depth_write:this.defaults.depth_write},(function(e){t.depthMask(e.depth_write)})),this.depth_test=new Id({depth_test:this.defaults.depth_test},(function(e){e.depth_test?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST)}))}var Id=function(){function t(e,n){mr(this,t),n(e),this.value=e,this.setup=n}return _r(t,[{key:"get",value:function(){return this.value}},{key:"set",value:function(t){JSON.stringify(this.value)!==JSON.stringify(t)&&(this.setup(t),this.value=t)}}]),t}(),Od=function(){function t(){mr(this,t),this.canvas=null,this.gl=null,this.screenshot_canvas=null,this.screenshot_context=null,this.queue_screenshot=null,this.video_capture=null}return _r(t,[{key:"setCanvas",value:function(t,e){this.canvas=t,this.gl=e}},{key:"screenshot",value:function(t){var e=this,n=(0<arguments.length&&void 0!==t?t:{}).background;return null!=this.queue_screenshot||(this.queue_screenshot={background:n},this.queue_screenshot.promise=new Promise((function(t,n){e.queue_screenshot.resolve=t,e.queue_screenshot.reject=n}))),this.queue_screenshot.promise}},{key:"completeScreenshot",value:function(){if(null!=this.queue_screenshot){var t=this.canvas.width,e=this.canvas.height,n=new Uint8Array(t*e*4);this.gl.readPixels(0,0,t,e,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n);for(var r=(r=this.queue_screenshot.background)&&"transparent"!==r?go.parseColor(r).slice(0,3).map((function(t){return 255*t})):null,i=new Uint8ClampedArray(t*e*4),o=0;o<e;o++)for(var a=0;a<t;a++){var s=4*((e-o-1)*t+a),l=4*(o*t+a),u=n[3+s];i[0+l]=255*n[0+s]/u,i[1+l]=255*n[1+s]/u,i[2+l]=255*n[2+s]/u,i[3+l]=u,r&&(u/=255,i[0+l]=i[0+l]*u+r[0]*(1-u),i[1+l]=i[1+l]*u+r[1]*(1-u),i[2+l]=i[2+l]*u+r[2]*(1-u),i[3+l]=255)}this.screenshot_canvas=this.screenshot_canvas||document.createElement("canvas");var c=this.screenshot_canvas;c.width=t,c.height=e,this.screenshot_context=this.screenshot_context||c.getContext("2d");var h=this.screenshot_context,p=new ImageData(i,t,e);h.putImageData(p,0,0);for(var f=c.toDataURL("image/png"),d=atob(f.slice(22)),y=new Uint8Array(d.length),g=0;g<d.length;++g)y[g]=d.charCodeAt(g);var v=new Blob([y],{type:"image/png"});this.queue_screenshot.resolve({url:f,blob:v,type:"png"}),this.queue_screenshot=null}}},{key:"startVideoCapture",value:function(){var e=this;if("function"!=typeof window.MediaRecorder||!this.canvas||"function"!=typeof this.canvas.captureStream)return ki("warn","Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser"),!1;if(this.video_capture)return ki("warn","Video capture already in progress, call Scene.stopVideoCapture() first"),!1;try{var n=this.video_capture={};n.chunks=[],n.stream=this.canvas.captureStream(),n.options={mimeType:"video/webm"},n.media_recorder=new MediaRecorder(n.stream,n.options),n.media_recorder.ondataavailable=function(t){var r,i;0<t.data.size&&n.chunks.push(t.data),n.resolve&&(i=Li(r=new Blob(n.chunks,{type:n.options.mimeType})),n.stream&&(n.stream.getTracks()||[]).forEach((function(t){t.stop(),n.stream.removeTrack(t)})),n.stream=null,n.media_recorder=null,e.video_capture=null,n.resolve({url:i,blob:r,type:"webm"}))},n.media_recorder.start()}catch(t){return this.video_capture=null,ki("error","Scene video capture failed",t),!1}return!0}},{key:"stopVideoCapture",value:function(){var t=this;return this.video_capture?(this.video_capture.promise=new Promise((function(e,n){t.video_capture.resolve=e,t.video_capture.reject=n})),this.video_capture.media_recorder.stop(),this.video_capture.promise):(ki("warn","No scene video capture in progress, call Scene.startVideoCapture() first"),Promise.resolve({}))}}]),t}(),Cd=function(){function t(){mr(this,t),this.sources={},this.styles={},this.layers={},this.tiles={},this._isConfigured=!1}return _r(t,[{key:"init",value:function(t,e,n,r,i,o,a){return this.setMeshVariantMaxLife(a),this.scene_id=t,this.textureManager=Lo(t),this._worker_id=e,ki.setLevel(n),Ti.device_pixel_ratio=r,uu.setElementIndexUint(i),Ko.setPrefix(this._worker_id),this._style_manager=new Bh,this._importExternalScripts(o),bc.id_prefix=e,this._isConfigured=!1,e}},{key:"dispose",value:function(){this._last_config_sources=null,this._config_sources=null,this.sources=null,this._style_manager=null,this.styles=null,this.layers=null,this.tiles=null}},{key:"_importExternalScripts",value:function(t){var e;0!==t.length&&(ki("debug","loading custom data source scripts in worker:",t),e=Object.getOwnPropertyNames(window),importScripts.apply(void 0,Lr(t)),Object.getOwnPropertyNames(window).forEach((function(t){-1===e.indexOf(t)&&(self[t]=window[t])})))}},{key:"updateConfig",value:function(t,e){var n,r=t.config,i=t.generation,o=t.introspection;for(var a in r=JSON.parse(r),n=e,Object.assign(Kl,n),this._generation=i,this._isConfigured=!1,r.layers)r.layers[a]&&(r.layers[a].data=Ti.stringsToFunctions(r.layers[a].data));this.global=Ti.stringsToFunctions(r.global),this._createDataSources(r),r.styles=Ti.stringsToFunctions(r.styles,go.wrapFunction),this.styles=this._style_manager.build(r.styles),self.is_fake_worker=li.is_main,this._style_manager.initStyles({generation:this._generation,styles:this.styles,sources:this.sources,introspection:o,id:this.scene_id}),delete self.is_fake_worker,this.layers=function(t,e){sd={};var n={};for(var r in t){var i=t[r];i&&(n[r]=yd(r,i,null,e))}return n}(r.layers,this._style_manager.styles),this._configuring=this._syncTextures(r.textures)}},{key:"setMeshVariantMaxLife",value:function(t){this.meshVariantMaxLife=t}},{key:"_createDataSources",value:function(t){var e=this;this._last_config_sources=this._config_sources||{},this._config_sources=t.sources;var n=this.sources,r=[];for(var i in t.sources=Ti.stringsToFunctions(t.sources),this.sources={},self.is_fake_worker=li.is_main,t.sources)if(JSON.stringify(this._last_config_sources[i])!==JSON.stringify(t.sources[i])){var o=void 0;try{o=Pi.create(Object.assign({},t.sources[i],{name:i}),this.sources)}catch(n){ki("error","Error creating source.",n.message,t.sources[i]);continue}o&&(this.sources[i]=o,r.push(i))}else this.sources[i]=n[i];delete self.is_fake_worker,r.forEach((function(t){for(var n in e.tiles)e.tiles[n].source===t&&delete e.tiles[n]}))}},{key:"awaitConfiguration",value:function(){return this._configuring}},{key:"_onConfig",value:function(e){var n=this;if((this._isConfigured=!0)!==e.loaded)e.loading=!0,e.loaded=!1,e.error=null,this._loadTileSourceData(e).then((function(){if(n.getTile(e.id)){e.loading=!1,e.loaded=!0;try{_a.buildGeometry(e,n)}catch(t){e.error=t.toString(),ui.postMessage("TileManager_".concat(n.scene_id,".buildTileError"),_a.slice(e))}}else ki("trace","stop tile build after data source load because tile was removed. Key: ".concat(e.key,", id: ").concat(e.id))}),(function(t){e.loading=!1,e.loaded=!1,e.error=t.stack,ki("error","tile load error for tile with key ".concat(e.key," and id ").concat(e.id,": ").concat(e.error)),ui.postMessage("TileManager_".concat(n.scene_id,".buildTileError"),_a.slice(e))}));else{ki("trace","used worker cache for tile with key ".concat(e.key," and id ").concat(e.id));try{_a.buildGeometry(e,this)}catch(t){e.error=t.toString(),ui.postMessage("TileManager_".concat(this.scene_id,".buildTileError"),_a.slice(e))}}}},{key:"buildTile",value:function(t){var e,n=t.tile,r=this.getTile(n.id);r&&r.loading||(n=this.tiles[n.id]=Object.assign(r||{},n),this._isConfigured?this._onConfig(n):(e=this).awaitConfiguration().then((function(){return e._onConfig(n)})))}},{key:"_loadTileSourceData",value:function(t){return this.sources[t.source]?this.sources[t.source].load(t):(t.source_data={},Promise.resolve(t))}},{key:"getTile",value:function(t){return this.tiles[t]}},{key:"removeTile",value:function(t){var e=this.tiles[t];null!=e&&(!0===e.loading&&(ki("trace","cancel tile load for tile id ".concat(t)),e.loading=!1,_a.cancel(e)),delete this.tiles[t],ki("trace","remove tile from cache, tile id: ".concat(t)))}},{key:"queryFeatures",value:function(t){var e=this,n=t.filter,r=t.visible,i=t.geometry,o=t.tile_ids,a=[],s=o.map((function(t){return e.tiles[t]})).filter((function(t){return t}));return null!=n&&(n=-1<["{","["].indexOf(n[0])?JSON.parse(n):n,n=Ti.stringsToFunctions(n,go.wrapFunction)),n=od(n,fd),s.forEach((function(t){for(var o in t.source_data.layers)!function(o){t.source_data.layers[o].features.forEach((function(s){var l,u;!0===r&&s.generation!==e._generation||!1===r&&s.generation===e._generation||((l=go.getFeatureParseContext(s,t,e.global)).source=t.source,l.layer=o,n(l)&&(u={type:s.type,properties:s.properties},!0===i&&(u.geometry=Qr.copyGeometry(s.geometry),Qr.tileSpaceToLatlng(u.geometry,t.coords.z,t.min)),a.push(u)))}))}(o)})),a}},{key:"resetFeatureSelection",value:function(){Ko.reset()}},{key:"_syncTextures",value:function(t){var e=[];return t&&e.push.apply(e,Lr(Object.keys(t))),ki("trace","sync textures to worker:",e),0<e.length?this.textureManager.syncTexturesToWorker(e):Promise.resolve()}},{key:"profile",value:function(t){console.profile("worker ".concat(this._worker_id,": ").concat(t))}},{key:"profileEnd",value:function(t){console.profileEnd("worker ".concat(this._worker_id,": ").concat(t))}},{key:"terminate",value:function(){this.dispose()}}]),t}();(li.is_worker||self.H&&self.H.DEBUG)&&ui.addTarget("self",new Cd);var Ld=function(){function t(e,n){mr(this,t),n=n||{},Io(this),this.id=t.id++,this.textureManager=Lo(this.id),this.initialized=!1,this.initializing=null,this.sources={},this.view=new wh(this,n),this.tile_manager=new Ad({scene:this,view:this.view}),this.num_workers=n.numWorkers||2,!0===n.disableVertexArrayObjects&&(oa.disabled=!0),Ti.device_pixel_ratio=n.devicePixelRatio,this.config=null,this.config_source=e,this.config_bundle=null,this.last_valid_config_source=null,this.styles=null,this.style_manager=new Bh,this.building=null,this.dirty=!0,n.preUpdate&&this.subscribe({pre_update:n.preUpdate}),n.postUpdate&&this.subscribe({post_update:n.postUpdate}),this.render_loop=!n.disableRenderLoop,this.render_loop_active=!1,this.render_loop_stop=!1,this.render_count=0,this.last_render_count=0,this.render_count_changed=!1,this.frame=0,this.last_main_render=-1,this.last_selection_render=-1,this.media_capture=new Od,this.selection=null,this.introspection=!0===n.introspection,this.viewport=n.viewport,this.adjustMeshVariantMaxLife(),this.container=n.container,this.canvas=null,this.contextOptions=n.webGLContextOptions,this.lights=null,this.background=null,this.createListeners(),this.updating=0,this.generation=t.generation,this.last_complete_generation=t.generation,this.log_level=n.logLevel||"warn",ki.setLevel(this.log_level),ki.reset()}return _r(t,[{key:"load",value:function(t,e){var n=this,r=0<arguments.length&&void 0!==t?t:null,i=1<arguments.length&&void 0!==e?e:{};return this.initializing||(ki.reset(),this.updating++,this.initialized=!1,this.initial_build_time=null,(i="string"==typeof i?{base_path:i}:i).blocking=void 0===i.blocking||i.blocking,!1!==this.render_loop&&this.setupRenderLoop(),this.createCanvas(),this.textureManager.destroy(this.gl),this.initializing=this.loadScene(r,i).then((function(){return n.createWorkers()})).then((function(){n.resetFeatureSelection();var t="object"===vr(n.config_source)||n.hasSubscribersFor("load"),e=n.updateConfig({serialize_funcs:t,normalize:!1,load_event:!0,fade_in:!0});if(!0===i.blocking)return e})).then((function(){n.updating--,n.initializing=null,n.initialized=!0,n.last_valid_config_source=n.config_source,n.last_valid_options={base_path:i.base_path,file_type:i.file_type},n.requestRedraw()})).catch((function(t){var e,r;if(n.initializing=null,n.updating=0,r="YAMLException"===t.name?(e="yaml","Error parsing scene YAML"):"Error initializing scene",n.trigger("error",{type:e,message:r,error:t,url:n.config_source}),r="Scene.load() failed to load ".concat(n.config_source,": ").concat(t.message),n.last_valid_config_source)return ki("warn",r,t),ki("info","Scene.load() reverting to last valid configuration"),n.load(n.last_valid_config_source,n.last_valid_base_path);throw ki("error",r,t),t}))),this.initializing}},{key:"destroy",value:function(){var t;this.initialized=!1,this.render_loop_stop=!0,this.destroyListeners(),this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),this.container=null,this.selection&&this.selection.destroy(),this.gl&&(this.textureManager.destroy(this.gl),this.style_manager.destroy(this.gl),this.styles={},ra.reset(),(t=this.gl.getExtension("WEBGL_lose_context"))&&t.loseContext(),this.gl=null),this.sources={},this.tile_manager.destroy(),this.tile_manager=null,this.destroyWorkers(),ki.reset()}},{key:"createCanvas",value:function(){if(!this.canvas){this.container=this.container||document.body,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.container.style.backgroundColor="transparent",this.container.appendChild(this.canvas);try{this.gl=nu.getContext(this.canvas,Object.assign({alpha:!0,premultipliedAlpha:!1,stencil:!0,device_pixel_ratio:Ti.device_pixel_ratio},this.contextOptions)),navigator.appVersion.includes("iPhone")&&this.gl.depthRange(.994,1)}catch(o){throw new Error("Couldn't create WebGL context. Your browser may not support WebGL, or it's turned off? Visit http://webglreport.com/ for more info.")}this.handleViewportUpdate(),oa.init(this.gl),this.render_states=new Md(this.gl),this.media_capture.setCanvas(this.canvas,this.gl)}}},{key:"getWorkerUrl",value:function(){var t,i;if(void 0!==e&&(i="("+e+")()",r&&""!==n&&(i+="\n//# sourceMappingURL="+r.slice(0,r.lastIndexOf("/")+1)+n),t=Li(new Blob([i],{type:"application/javascript"}))),!t)throw new Error("Couldn't find internal Tangram source variable (may indicate the library did not build correctly)");return t}},{key:"updateExternalScripts",value:function(){var t=Lr(this.external_scripts||[]),e=[];if(this.config.scene.scripts)for(var n in this.config.scene.scripts)-1===e.indexOf(this.config.scene.scripts[n])&&e.push(this.config.scene.scripts[n]);for(var r in this.config.sources){var i=this.config.sources[r];if(i.scripts)for(var o in i.scripts)-1===e.indexOf(i.scripts[o])&&e.push(i.scripts[o])}return this.external_scripts=e,!(this.external_scripts.length===t.length&&this.external_scripts.every((function(e,n){return e===t[n]})))}},{key:"createWorkers",value:function(){return this.updateExternalScripts()&&this.destroyWorkers(),this._workers?Promise.resolve():this.makeWorkers(this.getWorkerUrl())}},{key:"makeWorkers",value:function(t){var e=this,n=!!this.gl.getExtension("OES_element_index_uint"),r=[];this._workers=[];for(var i=0;i<this.num_workers;i++)!function(){var o=new Worker(t);e._workers[i]=o,ui.addWorker(o),ki("debug","Scene.makeWorkers: initializing worker ".concat(i));var a=i;r.push(ui.postMessage(o,"self.init",e.id,i,e.log_level,Ti.device_pixel_ratio,n,e.external_scripts,e.meshVariantMaxLife).then((function(t){return ki("debug","Scene.makeWorkers: initialized worker ".concat(t)),t}),(function(t){return ki("error","Scene.makeWorkers: failed to initialize worker ".concat(a,":"),t),Promise.reject(t)})))}();var o=new Cd;return this._workers.push(o),r.push(o.init(this.id,i,this.log_level,Ti.device_pixel_ratio,n,[],this.meshVariantMaxLife)),this.next_worker=0,Promise.all(r).then((function(){var n;ki.setWorkers(e._workers.slice(0,e.num_workers)),n=t,void 0===Si&&"function"!=typeof(Si=window.URL&&window.URL.revokeObjectURL||window.webkitURL&&window.webkitURL.revokeObjectURL)&&(Si=null,ki("warn","window.URL.revokeObjectURL (or vendor prefix) not found, unable to create local blob URLs")),Si&&Si(n)}))}},{key:"getWorkers",value:function(t){return this._workers.filter((function(e){switch(t){case 0:return e instanceof Worker;case 1:return e instanceof Cd;default:return!0}}))}},{key:"destroyWorkers",value:function(){this.selection=null,Array.isArray(this._workers)&&(ki.setWorkers(null),this._workers.forEach((function(t){t.terminate()})),this._workers=null)}},{key:"ready",value:function(){return!(!this.view.ready()||0===Object.keys(this.sources).length)}},{key:"handleViewportUpdate",value:function(){var t=this.viewport,e=t.width,n=t.height;0<e&&0<n&&(this.dirty=!0,this.view.handleViewportUpdate(),this.gl&&nu.resize(this.gl,e,n,Ti.device_pixel_ratio)),this.adjustMeshVariantMaxLife()&&this.syncMeshVariantMaxLife()}},{key:"adjustMeshVariantMaxLife",value:function(){var t=this.viewport,e=t.width,n=t.height,r=Ti.device_pixel_ratio,i=e/r/256*(n/r/256),o=Math.max(Math.ceil(2*i),8);if(this.meshVariantMaxLife!==o)return this.meshVariantMaxLife=o,!0}},{key:"syncMeshVariantMaxLife",value:function(){this._workers&&ui.postMessage(this._workers,"self.setMeshVariantMaxLife",this.meshVariantMaxLife)}},{key:"requestRedraw",value:function(){this.dirty=!0}},{key:"immediateRedraw",value:function(){this.dirty=!0,this.update()}},{key:"renderLoop",value:function(){this.render_loop_active=!0,this.initialized&&this.update(),Ao.setState({user_moving_view:this.view.user_input_active}),Ao.processAll(),this.render_loop_stop?(this.render_loop_stop=!1,this.render_loop_active=!1):window.requestAnimationFrame(this.renderLoop.bind(this))}},{key:"setupRenderLoop",value:function(){var t=this;this.render_loop_active||setTimeout((function(){t.renderLoop()}),0)}},{key:"update",value:function(){var t=this.dirty,e=!!this.selection&&this.selection.hasPendingRequests(),n=!(!1===t&&!1===e||!1===this.initialized||0<this.updating||!1===this.ready());return this.trigger("pre_update",n),this.view.update(),n&&(this.dirty=!1,this.render({main:t,selection:e}),this.updateViewComplete(),this.media_capture.completeScreenshot(),this.trigger("post_update",n),!0!==this.animated&&!this.view.isAnimating()||(this.dirty=!0),this.frame++,ki("trace","Scene.render()"),!0)}},{key:"render",value:function(t){var e=this,n=t.main,r=t.selection,i=this.gl;if(Object.keys(this.lights).forEach((function(t){return e.lights[t].update()})),n&&(this.render_count=this.renderPass(),this.last_main_render=this.frame),r){if(this.view.panning||this.view.user_input_active)return void this.selection.clearPendingRequests();(this.last_selection_render<this.last_main_render||this.selection.has_dirty_buffer)&&(this.selection.bind(),this.renderPass("selection_program",{allow_blend:!1}),i.bindFramebuffer(i.FRAMEBUFFER,null),i.viewport(0,0,this.canvas.width,this.canvas.height),i.clearColor.apply(i,Lr(this.background.color)),this.last_selection_render=this.frame,this.selection.has_dirty_buffer=!1),this.selection.read(this.tile_manager.getRenderableTiles()),this.selection.has_dirty_buffer&&this.render({main:!1,selection:r})}return this.render_count_changed=!1,this.render_count!==this.last_render_count&&(this.render_count_changed=!0),this.last_render_count=this.render_count,!0}},{key:"renderPass",value:function(t,e){var n=this,r=0<arguments.length&&void 0!==t?t:"program",i=(1<arguments.length&&void 0!==e?e:{}).allow_blend,o=this.gl;i=null==i||i,this.clearFrame();for(var a,s=va.sortByBlendOrderWithinLayers(this.tile_manager.getActiveStyles().map((function(t){return n.styles[t]})).filter((function(t){return t}))),l=0,u=0,c=0;c<s.length;c++){var h,p,f=s[c],d=u-(h=parseInt(f.name));(f.clean_depth||d)&&(this.render_states.depth_write.value.depth_write?o.clear(o.DEPTH_BUFFER_BIT):(o.depthMask(!0),o.clear(o.DEPTH_BUFFER_BIT),o.depthMask(!1)),d&&(u=h)),f.blend!==a&&(p=Object.assign({},va.render_states[f.blend],{blend:i&&f.blend}),this.setRenderState(p));var y="translucent"===f.blend&&"program"===r;y&&(this.gl.colorMask(!1,!1,!1,!1),this.renderStyle(f.name,r),this.gl.colorMask(!0,!0,!0,!0),this.gl.depthFunc(this.gl.EQUAL),this.gl.enable(this.gl.STENCIL_TEST),this.gl.clear(this.gl.STENCIL_BUFFER_BIT),this.gl.stencilFunc(this.gl.EQUAL,this.gl.ZERO,255),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.INCR)),l+=this.renderStyle(f.name,r),y&&(this.gl.disable(this.gl.STENCIL_TEST),this.gl.depthFunc(this.gl.LESS)),a=f.blend}return l}},{key:"renderStyle",value:function(t,e){for(var n,r=this,i=this.styles[t],o=!0,a=0,s=this.tile_manager.getRenderableTiles(),l=Math.max.apply(Math,Lr(s.map((function(e){return e.meshes[t]?Math.max.apply(Math,Lr(e.meshes[t].map((function(t){return t.variant.order})))):-1})))),u=0;u<l+1;u++){var c=function(l){for(var u=0;u<s.length;u++){var c=s[u];if(null!=c.meshes[t]&&c.shouldProxyForStyle(t))for(var h=c.meshes[t].filter((function(t){return t.variant.order===l})),p=0,f=h.length;p<f;p+=1){var d=h[p];if(!0===o&&(o=!1,!(n=r.setupStyle(i,e))))return{v:0};r.view.setupTile(c,n),r.selection.setupDiscards(n),i.render(d)&&r.requestRedraw(),a+=d.geometry_count}}}(u);if("object"===vr(c))return c.v}return a}},{key:"setupStyle",value:function(t,e){var n;try{if(!(n=t.getProgram(e)))return}catch(e){return void this.trigger("warning",{type:"styles",message:"Error compiling style ".concat(t.name),style:t,shader_errors:t.program&&t.program.shader_errors})}for(var r in n.use(),t.setup(),this.view.setupProgram(n),this.lights)this.lights[r].setupProgram(n);return n}},{key:"clearFrame",value:function(){this.initialized&&(this.render_states.depth_write.set({depth_write:!0}),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT))}},{key:"setRenderState",value:function(t){var e,n,r=0<arguments.length&&void 0!==t?t:{},i=r.depth_test,o=r.depth_write,a=r.cull_face,s=r.blend;this.initialized&&(e=this.render_states,i=!1!==i&&e.defaults.depth_test,o=!1!==o&&e.defaults.depth_write,a=!1!==a&&e.defaults.culling,s=null!=s?s:e.defaults.blending,n=this.gl,e.depth_test.set({depth_test:i}),e.depth_write.set({depth_write:o}),e.culling.set({cull:a,face:e.defaults.culling_face}),s&&"opaque"!==s?"overlay"===s||"inlay"===s||"translucent"===s?e.blending.set({blend:!0,src:n.SRC_ALPHA,dst:n.ONE_MINUS_SRC_ALPHA,src_alpha:n.ONE,dst_alpha:n.ONE_MINUS_SRC_ALPHA}):"add"===s?e.blending.set({blend:!0,src:n.ONE,dst:n.ONE}):"multiply"===s&&e.blending.set({blend:!0,src:n.ZERO,dst:n.SRC_COLOR}):e.blending.set({blend:!1}))}},{key:"getFeatureAt",value:function(t,e,n){var r,i=e.radius,o=e.top_most_only;this.initialized?(r={x:t.x/this.view.size.css.width,y:t.y/this.view.size.css.height},i=0<i?{x:i/this.view.size.css.width,y:i/this.view.size.css.height}:null,this.selection.getFeatureAt(r,{radius:i,top_most_only:o},n)):ki("debug","Scene.getFeatureAt() called before scene was initialized")}},{key:"queryFeatures",value:function(t){var e=0<arguments.length&&void 0!==t?t:{},n=e.filter,r=e.unique,i=void 0===r||r,o=e.group_by,a=void 0===o?null:o,s=e.visible,l=void 0===s?null:s,u=e.geometry,c=void 0!==u&&u,h=(n=Ti.serializeWithFunctions(n),this.tile_manager.getRenderableTiles().map((function(t){return t.id})));return ui.postMessage(this._workers,"self.queryFeatures",{filter:n,visible:l,geometry:c,tile_ids:h}).then((function(t){var e=[],n={},r={},o=(i="string"==typeof i?[i]:i)&&function(t){return JSON.stringify(Array.isArray(i)?tu(t,i):t)},s=(a=("string"==typeof a||Array.isArray(a))&&a)&&function(t){return Array.isArray(a)?JSON.stringify(tu(t,a)):t[a]};return t.forEach((function(t){return t.forEach((function(t){if(o){var i=o(t);if(n[i])return;n[i]=!0}var a;s?(a=s(t.properties),r[a]=r[a]||[],r[a].push(t)):e.push(t)}))})),s?r:e}))}},{key:"loadScene",value:function(t,e){var n=this,r=0<arguments.length&&void 0!==t?t:null,i=1<arguments.length&&void 0!==e?e:{},o=i.base_path,a=i.file_type;return this.config_source=r||this.config_source,"string"==typeof this.config_source?this.base_path=Oi(o||this.config_source):this.base_path=Oi(o),this.config_path=this.base_path,vd.loadScene(this.config_source,{path:this.base_path,type:a}).then((function(t){var e=t.config,r=t.bundle;return n.config=e,n.config_bundle=r,n.config}))}},{key:"createDataSources",value:function(){var t=this,e=[],n=Object.keys(this.sources),r=0;for(var i in this.config.sources){var o=this.config.sources[i],a=this.sources[i];try{var s=Object.assign({},o,{name:i,id:r++});if(this.sources[i]=Pi.create(s,this.sources),!this.sources[i])throw{}}catch(n){delete this.sources[i];var l="Could not create data source: ".concat(n.message);ki("warn","Scene: ".concat(l),o),this.trigger("warning",{type:"sources",source:o,message:l})}Pi.sameConfig(this.sources[i],a)||e.push(i)}for(var u in n.forEach((function(n){t.config.sources[n]||(delete t.sources[n],e.push(n))})),0<e.length&&this.tile_manager.removeTiles((function(t){return-1<e.indexOf(t.source.name)})),this.config.layers){var c=this.config.layers[u];!1!==c.enabled&&c.data&&this.sources[c.data.source]&&(this.sources[c.data.source].builds_geometry_tiles=!0)}}},{key:"loadTextures",value:function(){var t=this;return this.textureManager.createFromObject(this.gl,this.config.textures).then((function(){return t.textureManager.createDefault(t.gl)}))}},{key:"updateStyles",value:function(){if(!this.initialized&&!this.initializing)throw new Error("Scene.updateStyles() called before scene was initialized");for(var t in this.styles=this.style_manager.build(this.config.styles),this.style_manager.initStyles(this),this.styles)this.styles[t].setGL(this.gl);this.dirty=!0}},{key:"createLights",value:function(){for(var t in this.lights={},this.config.lights){var e;this.config.lights[t]&&"object"===vr(this.config.lights[t])&&((e=this.config.lights[t]).name=t.replace("-","_"),e.visible=!1!==e.visible,e.visible&&(this.lights[e.name]=ca.create(this.view,e)))}ca.inject(this.lights)}},{key:"setBackground",value:function(){var t,e=this.config.scene.background;this.background={},e&&e.color&&(this.background.color=go.parseColor(e.color)),this.background.color||(this.background.color=[0,0,0,0]),1===this.background.color[3]?this.canvas.style.backgroundColor="rgba(".concat(this.background.color.map((function(t){return Math.floor(255*t)})).join(", "),")"):this.canvas.style.backgroundColor="transparent",(t=this.gl).clearColor.apply(t,Lr(this.background.color))}},{key:"setIntrospection",value:function(t){var e=this;return t!==this.introspection?(this.introspection=t||!1,this.updating++,this.updateConfig({normalize:!1}).then((function(){return e.updating--}))):Promise.resolve()}},{key:"updateConfig",value:function(e){var n=0<arguments.length&&void 0!==e?e:{},r=n.load_event,i=void 0!==r&&r,o=n.serialize_funcs,a=n.normalize,s=void 0===a||a;n.fade_in,this.generation=++t.generation,this.updating++,this.config=vd.applyGlobalProperties(this.config),s?vd.normalize(this.config,this.config_bundle):(vd.hoistStyleShaderUniformTextures(this.config,this.config_bundle,{include_globals:!0}),vd.normalizeTextures(this.config,this.config_bundle)),this.trigger(i?"load":"update",{config:this.config}),this.style_manager.init(),this.createLights(),this.createDataSources(),this.loadTextures(),this.setBackground(),Nc.loadFonts(this.config.fonts),this.updateStyles();var l=this.syncConfigToWorker({serialize_funcs:o});return this.updating--,this.view.updateBounds(),this.requestRedraw(),l}},{key:"syncConfigToWorker",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).serialize_funcs,n=void 0===e||e?Ti.serializeWithFunctions(this.config):JSON.stringify(this.config);return ui.postMessage(this._workers,"self.updateConfig",{config:n,generation:this.generation,introspection:this.introspection},Ql)}},{key:"createListeners",value:function(){var t=this;this.listeners={},this.listeners.view={move:function(){return t.trigger("move")}},this.view.subscribe(this.listeners.view),this.listeners.texture={update:function(){return t.dirty=!0},warning:function(e){return t.trigger("warning",Object.assign({type:"textures"},e))}},this.textureManager.subscribe(this.listeners.texture),this.listeners.scene_loader={error:function(e){return t.trigger("error",Object.assign({type:"scene"},e))}},vd.subscribe(this.listeners.scene_loader)}},{key:"destroyListeners",value:function(){this.unsubscribeAll(),this.view.unsubscribe(this.listeners.view),this.textureManager.unsubscribe(this.listeners.texture),vd.unsubscribe(this.listeners.scene_loader),this.listeners=null}},{key:"resetFeatureSelection",value:function(){this.selection?this._workers&&ui.postMessage(this._workers,"self.resetFeatureSelection"):this.selection=new Ko(this.gl,this.id)}},{key:"updateViewComplete",value:function(){(this.render_count_changed||this.generation!==this.last_complete_generation)&&this.tile_manager.isReady()&&(this.last_complete_generation=this.generation,this.trigger("view_complete"))}},{key:"resetViewComplete",value:function(){this.last_complete_generation=null}},{key:"screenshot",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).background,n=void 0===e?"white":e;return this.requestRedraw(),this.media_capture.screenshot({background:n})}},{key:"pixelRatio",value:function(){return Ti.device_pixel_ratio}},{key:"startVideoCapture",value:function(){return this.requestRedraw(),this.media_capture.startVideoCapture()}},{key:"stopVideoCapture",value:function(){return this.media_capture.stopVideoCapture()}},{key:"_profile",value:function(t){console.profile("main thread: ".concat(t)),ui.postMessage(this._workers,"self.profile",t)}},{key:"_profileEnd",value:function(t){console.profileEnd("main thread: ".concat(t)),ui.postMessage(this._workers,"self.profileEnd",t)}},{key:"getCameraMatrix",value:function(){return this.view.lookAtManipulator.getCameraMatrix()}},{key:"animated",get:function(){var t=this;return void 0!==this.config.scene.animated?this.config.scene.animated:this.tile_manager.getActiveStyles().some((function(e){return t.styles[e]&&t.styles[e].animated}))}}],[{key:"create",value:function(e,n){return new t(e,1<arguments.length&&void 0!==n?n:{})}}]),t}();Ld.id=0,Ld.generation=0;var Pd=function(){xr(e,Mo);var t=Ir(e);function e(n,r,i){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};mr(this,e);var a=Math.pow(2,o.coords.z),s=Math.abs(Math.floor(o.coords.x/a)),l=Math.abs(a*s-Math.abs(o.coords.x)),u=o.coords;return o.coords={x:l,y:u.y,z:u.z},t.call(this,n,r,i,o)}return _r(e,[{key:"load",value:function(t){var n=this;if(!t||!t.uid)return Or(kr(e.prototype),"load",this).call(this,t);var r=t.coords,i=new Uint8Array([0,0,0,0]);return this.loading=new Promise((function(e,o){var a=H.map.DataModel.invoke(t.uid,"requestTileAsPromise",[r.x,r.y,r.z])||null;a?a.then((function(e){var r=e.data;n.loaded=!0,!r||r instanceof ArrayBuffer||"IMG"!==r.tagName.toUpperCase()&&"CANVAS"!==r.tagName.toUpperCase()?n.setData(1,1,i,{filtering:"nearest"}):n.setElement(r,t)}),(function(){n.loaded=!1})).then(e,(function(t){return o(t)})):o(new Error("Unable to invoke on target "+t.uid))})),this.loading}}]),e}();Oo.register(Pd,(function(t){return t&&t.uid})),self.H=self.H||{},self.H.gl={DataSource:Pi,Geo:Qr,MathUtils:Jr,Scene:Ld,Task:Ao,Tile:_a,WorkerBroker:ui,log:ki,SceneLoader:vd,yaml:Kf}}()}(),this.H=this.H||{},this.H.venues=function(t){function e(t,e){var n,r;e=(e=void 0===e?{}:e).insertAt;t&&"undefined"!=typeof document&&(n=document.head||document.getElementsByTagName("head")[0],(r=document.createElement("style")).type="text/css","top"===e&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)))}function n(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)),r}function r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(){i=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=(d="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=d.asyncIterator||"@@asyncIterator",a=d.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(e){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i,o,a,s;e=e&&e.prototype instanceof h?e:h,e=Object.create(e.prototype),r=new w(r||[]);return e._invoke=(i=t,o=n,a=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return{value:void 0,done:!0}}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n&&(n=function t(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,t(e,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}return"throw"===(r=u(r,e.iterator,n.arg)).type?(n.method="throw",n.arg=r.arg,n.delegate=null,c):(r=r.arg)?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a),n)){if(n===c)continue;return n}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);if(s="executing","normal"===(n=u(i,o,a)).type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),e}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function h(){}function p(){}function f(){}var d,y,g=((y=(y=(s(d={},r,(function(){return this})),Object.getPrototypeOf))&&y(y(x([]))))&&y!==e&&n.call(y,r)&&(d=y),f.prototype=h.prototype=Object.create(d));function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var r;this._invoke=function(i,o){function a(){return new e((function(r,a){!function r(i,o,a,s){var l;if("throw"!==(i=u(t[i],t,o)).type)return(o=(l=i.arg).value)&&"object"==typeof o&&n.call(o,"__await")?e.resolve(o.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(o).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}));s(i.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function x(t){if(t){var e,i=t[r];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return e=-1,(i=function r(){for(;++e<t.length;)if(n.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r}).next=i}return{next:k}}function k(){return{value:void 0,done:!0}}return s(g,"constructor",p.prototype=f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){return!!(t="function"==typeof t&&t.constructor)&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},v(m.prototype),s(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new m(l(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(g),s(g,a,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e,n=[];for(e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=x,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;0<=i;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}var a=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,i=this.tryEntries[e];if(i.tryLoc===t)return"throw"===(n=i.completion).type&&(r=n.arg,_(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function y(t,e,n){return(y=d()?Reflect.construct.bind():function(t,e,n){var r=[null];return r.push.apply(r,e),e=new(Function.bind.apply(t,r)),n&&f(e,n.prototype),e}).apply(null,arguments)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){var e=d();return function(){var n,r=p(t);n=e?(n=p(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return g(r)}}function m(){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:n):r.value}).apply(this,arguments)}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||w(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t){return function(t){if(Array.isArray(t))return x(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||w(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){if(t){if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e(".H_l_right .venues-ui__drawings .trigger.button--active .arrow {\n  transform: rotate(90deg);\n}\n.H_l_right .venues-ui__drawings .drawings {\n  right: 45px;\n  left: initial;\n}");var k=function(){h(e,H.map.Feature);var t=v(e);function e(n){var r;return s(this,e),(r=t.call(this)).id=n.id,r.model=n,r}return u(e,[{key:"getData",value:function(){return this.model}},{key:"getAddress",value:function(){return this.model.getInternalAddress()}},{key:"getCenter",value:function(){var t=(e=b(this.model.getCenter(),2))[0],e=e[1];return new H.geo.Point(e,t)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"toGeoJSON",value:function(){return this.model.toJSON()}},{key:"getLevel",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getLevel().getDrawing().getParentEventTarget()}}]),e}(),E=function(){h(e,H.map.Feature);var t=v(e);function e(n){var r;return s(this,e),(r=t.call(this)).id=n.id,r.model=n,r}return u(e,[{key:"getData",value:function(){return this.model}},{key:"getBoundingBox",value:function(){return y(H.geo.Rect,_(this.model.getBoundingBox()))}},{key:"getCenter",value:function(){var t=(e=b(this.model.getCenter(),2))[0],e=e[1];return new H.geo.Point(e,t)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getLevel",value:function(t){return this.getLevels().find((function(e){return e.getIdentifier()===t}))}},{key:"getLevels",value:function(){var t=this.getData().getLevels().map((function(t){return t.getIdentifier()}));return this.getVenue().getLevels().filter((function(e){return-1!==t.indexOf(e.id)}))}},{key:"getMainLevel",value:function(){return this.getLevel(this.model.getMainLevel().getIdentifier())}},{key:"getVenue",value:function(){return this.getParentEventTarget()}}]),e}(),T=function(){h(e,H.map.Feature);var t=v(e);function e(n){var r;return s(this,e),(r=t.call(this)).id=n.id,r.model=n,r}return u(e,[{key:"getGeometry",value:function(t){return this.getGeometries().find((function(e){return e.getIdentifier()===t}))}},{key:"getGeometries",value:function(){var t=this.getData().getGeometries().map((function(t){return t.getIdentifier()}));return this.getDrawing().getVenue().getGeometries().filter((function(e){return-1!==t.indexOf(e.id)}))}},{key:"getData",value:function(){return this.model}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getShortName",value:function(){return this.model.getShortName()}},{key:"getZIndex",value:function(){return this.model.getZIndex()}},{key:"isMain",value:function(){return this.model.isMain()}},{key:"getDrawing",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getDrawing().getParentEventTarget()}}]),e}();function A(t,e,n,r){for(var i,o=r,a=n-e>>1,s=n-e,l=t[e],u=t[e+1],c=t[n],h=t[n+1],p=e+3;p<n;p+=3){var f=function(t,e,n,r,i,o){var a,s=i-n,l=o-r;return 0===s&&0===l||(1<(a=((t-n)*s+(e-r)*l)/(s*s+l*l))?(n=i,r=o):0<a&&(n+=s*a,r+=l*a)),(s=t-n)*s+(l=e-r)*l}(t[p],t[p+1],l,u,c,h);o<f?(i=p,o=f):f===o&&(f=Math.abs(p-a))<s&&(i=p,s=f)}r<o&&(3<i-e&&A(t,e,i,r),t[i+2]=o,3<n-i&&A(t,i,n,r))}function S(t,e,n,r){var i=t={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},o=i.geometry;if("Point"===(e=i.type)||"MultiPoint"===e||"LineString"===e)M(i,o);else if("Polygon"===e||"MultiLineString"===e)for(var a=0;a<o.length;a++)M(i,o[a]);else if("MultiPolygon"===e)for(a=0;a<o.length;a++)for(var s=0;s<o[a].length;s++)M(i,o[a][s]);return t}function M(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function I(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)O(i,s);else if("MultiPoint"===o)for(var u=0;u<i.length;u++)O(i[u],s);else if("LineString"===o)C(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(u=0;u<i.length;u++)C(i[u],s=[],a,!1),t.push(S(l,"LineString",s,e.properties));return}L(i,s,a,!1)}else if("Polygon"===o)L(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"!==o)throw new Error("Input data is not a valid GeoJSON object.");for(u=0;u<e.geometry.geometries.length;u++)I(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},n,r);return}for(u=0;u<i.length;u++){var c=[];L(i[u],c,a,!0),s.push(c)}}t.push(S(l,o,s,e.properties))}}function O(t,e){e.push(P(t[0])),e.push(R(t[1])),e.push(0)}function C(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var l=P(t[s][0]),u=R(t[s][1]);e.push(l),e.push(u),e.push(0),0<s&&(a+=r?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=e.length-3;e[2]=1,A(e,0,c,n),e[2+c]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function L(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];C(t[i],o,n,r),e.push(o)}}function P(t){return t/360+.5}function R(t){return t=Math.sin(t*Math.PI/180),(t=.5-.25*Math.log((1+t)/(1-t))/Math.PI)<0?0:1<t?1:t}function N(t,e,n,r,i,o,a,s){if(r/=e,(n/=e)<=o&&a<r)return t;if(a<n||r<=o)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,p=c.type,f=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(n<=f&&d<r)l.push(c);else if(!(d<n||r<=f)){var y=[];if("Point"===p||"MultiPoint"===p){x=w=v=void 0;for(var g=h,v=y,m=n,b=r,_=i,w=0;w<g.length;w+=3){var x=g[w+_];m<=x&&x<=b&&(v.push(g[w]),v.push(g[w+1]),v.push(g[w+2]))}}else if("LineString"===p)j(h,y,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===p)z(h,y,n,r,i,!1);else if("Polygon"===p)z(h,y,n,r,i,!0);else if("MultiPolygon"===p)for(var k=0;k<h.length;k++){var E=[];z(h[k],E,n,r,i,!0),E.length&&y.push(E)}if(y.length)if(s.lineMetrics&&"LineString"===p)for(k=0;k<y.length;k++)l.push(S(c.id,p,y[k],c.tags));else"LineString"!==p&&"MultiLineString"!==p||(1===y.length?(p="LineString",y=y[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===y.length?"Point":"MultiPoint"),l.push(S(c.id,p,y,c.tags))}}return l.length?l:null}function j(t,e,n,r,i,o,a){for(var s,l,u=D(t),c=0===i?B:G,h=t.start,p=0;p<t.length-3;p+=3){var f=t[p],d=t[p+1],y=t[p+2],g=t[p+3],v=t[p+4],m=0===i?f:d,b=0===i?g:v,_=!1;a&&(s=Math.sqrt(Math.pow(f-g,2)+Math.pow(d-v,2))),m<n?n<b&&(l=c(u,f,d,g,v,n),a&&(u.start=h+s*l)):r<m?b<r&&(l=c(u,f,d,g,v,r),a&&(u.start=h+s*l)):F(u,f,d,y),b<n&&n<=m&&(l=c(u,f,d,g,v,n),_=!0),r<b&&m<=r&&(l=c(u,f,d,g,v,r),_=!0),!o&&_&&(a&&(u.end=h+s*l),e.push(u),u=D(t)),a&&(h+=s)}var w=t.length-3;f=t[w],d=t[1+w],y=t[2+w];n<=(m=0===i?f:d)&&m<=r&&F(u,f,d,y),w=u.length-3,o&&3<=w&&(u[w]!==u[0]||u[1+w]!==u[1])&&F(u,u[0],u[1],u[2]),u.length&&e.push(u)}function D(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function z(t,e,n,r,i,o){for(var a=0;a<t.length;a++)j(t[a],e,n,r,i,o,!1)}function F(t,e,n,r){t.push(e),t.push(n),t.push(r)}function B(t,e,n,r,i,o){return r=(o-e)/(r-e),t.push(o),t.push(n+(i-n)*r),t.push(1),r}function G(t,e,n,r,i,o){return i=(o-n)/(i-n),t.push(e+(r-e)*i),t.push(o),t.push(1),i}function U(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=i.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)a=q(i.geometry,e);else if("MultiLineString"===o||"Polygon"===o)for(var a=[],s=0;s<i.geometry.length;s++)a.push(q(i.geometry[s],e));else if("MultiPolygon"===o)for(a=[],s=0;s<i.geometry.length;s++){for(var l=[],u=0;u<i.geometry[s].length;u++)l.push(q(i.geometry[s][u],e));a.push(l)}n.push(S(i.id,o,a,i.tags))}return n}function q(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function V(t,e){if(!t.transformed){for(var n,r=1<<t.z,i=t.x,o=t.y,a=0;a<t.features.length;a++){var s=t.features[a],l=s.geometry,u=s.type;if(s.geometry=[],1===u)for(n=0;n<l.length;n+=2)s.geometry.push(Z(l[n],l[n+1],e,r,i,o));else for(n=0;n<l.length;n++){for(var c=[],h=0;h<l[n].length;h+=2)c.push(Z(l[n][h],l[n][h+1],e,r,i,o));s.geometry.push(c)}}t.transformed=!0}return t}function Z(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function W(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,h=b=m=v=g=y=d=h=l=void 0;var l=a,u=t[s],c=o,h=i,p=u.geometry,f=u.type,d=[];if("Point"===f||"MultiPoint"===f)for(var y=0;y<p.length;y+=3)d.push(p[y]),d.push(p[y+1]),l.numPoints++,l.numSimplified++;else if("LineString"===f)Y(d,p,l,c,!1,!1);else if("MultiLineString"===f||"Polygon"===f)for(y=0;y<p.length;y++)Y(d,p[y],l,c,"Polygon"===f,0===y);else if("MultiPolygon"===f)for(var g=0;g<p.length;g++){var v=p[g];for(y=0;y<v.length;y++)Y(d,v[y],l,c,!0,0===y)}if(d.length){var m=u.tags||null;if("LineString"===f&&h.lineMetrics){for(var b in m={},u.tags)m[b]=u.tags[b];m.mapbox_clip_start=p.start/p.size,m.mapbox_clip_end=p.end/p.size}h={geometry:d,type:"Polygon"===f||"MultiPolygon"===f?3:"LineString"===f||"MultiLineString"===f?2:1,tags:m},null!==u.id&&(h.id=u.id),l.features.push(h)}h=t[s].minX;var _=t[s].minY,w=t[s].maxX,x=t[s].maxY;h<a.minX&&(a.minX=h),_<a.minY&&(a.minY=_),w>a.maxX&&(a.maxX=w),x>a.maxY&&(a.maxY=x)}return a}function Y(t,e,n,r,i,o){var a=r*r;if(0<r&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>a)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;if(i){for(var u=s,c=(i=o,0),h=0,p=u.length,f=p-2;h<p;f=h,h+=2)c+=(u[h]-u[f])*(u[h+1]+u[f+1]);if(0<c===i)for(h=0,p=u.length;h<p/2;h+=2){var d=u[h],y=u[h+1];u[h]=u[p-2-h],u[h+1]=u[p-1-h],u[p-2-h]=d,u[p-1-h]=y}}t.push(s)}}function K(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||24<e.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r,i,o,a,s;t=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)I(n,t.features[r],e,r);else"Feature"===t.type?I(n,t,e):I(n,{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),a=N(o=r=t,1,-1-(i=e.buffer/e.extent),i,0,-1,2,e),s=N(r,1,1-i,2+i,0,-1,2,e),(a||s)&&(o=N(r,1,-i,1+i,0,-1,2,e)||[],a&&(o=U(a,1).concat(o)),s&&(o=o.concat(U(s,-1)))),(t=o).length&&this.splitTile(t,0,0,0),n&&(t.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function X(t,e,n){return 32*((1<<t)*n+e)+t}function J(t,e,n,r,i){var o;return e=1<<e,(o=[])[0]=(t[0]/i+n)/e,o[1]=(t[1]/i+r)/e,i=(t=n={x:o[0],y:o[1]}).x,t=t.y,i=360*(i-.5),r=Math.exp(Math.PI*(.5-t)/.25)-1,t=Math.exp(Math.PI*(.5-t)/.25)+1,[i,180*Math.asin(r/t)/Math.PI]}K.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},K.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],l=this.options,u=l.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c,h,p,f,d,y,g,v,m,b=1<<e,_=X(e,n,r),w=this.tiles[_];if(w||(1<u&&console.time("creation"),w=this.tiles[_]=W(t,e,n,r,l),this.tileCoords.push({z:e,x:n,y:r}),u&&(1<u&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,w.numFeatures,w.numPoints,w.numSimplified),console.timeEnd("creation")),this.stats[_="z"+e]=(this.stats[_]||0)+1,this.total++)),w.source=t,i){if(e===l.maxZoom||e===i)continue;_=1<<i-e;if(n!==Math.floor(o/_)||r!==Math.floor(a/_))continue}else if(e===l.indexMaxZoom||w.numPoints<=l.indexMaxPoints)continue;w.source=null,0!==t.length&&(1<u&&console.time("clipping"),c=.5-(_=.5*l.buffer/l.extent),p=1+_,g=f=d=y=null,v=N(t,b,n-_,n+(h=.5+_),0,w.minX,w.maxX,l),m=N(t,b,n+c,n+p,0,w.minX,w.maxX,l),t=null,v&&(g=N(v,b,r-_,r+h,1,w.minY,w.maxY,l),f=N(v,b,r+c,r+p,1,w.minY,w.maxY,l),v=null),m&&(d=N(m,b,r-_,r+h,1,w.minY,w.maxY,l),y=N(m,b,r+c,r+p,1,w.minY,w.maxY,l),m=null),1<u&&console.timeEnd("clipping"),s.push(g||[],e+1,2*n,2*r),s.push(f||[],e+1,2*n,2*r+1),s.push(d||[],e+1,2*n+1,2*r),s.push(y||[],e+1,2*n+1,2*r+1))}},K.prototype.getTile=function(t,e,n){var r=(i=this.options).extent,i=i.debug;if(t<0||24<t)return null;var o=X(t,e=(e%(o=1<<t)+o)%o,n);if(this.tiles[o])return V(this.tiles[o],r);1<i&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var a,s=t,l=e,u=n;!a&&0<s;)s--,l=Math.floor(l/2),u=Math.floor(u/2),a=this.tiles[X(s,l,u)];return a&&a.source?(1<i&&console.log("found parent tile z%d-%d-%d",s,l,u),1<i&&console.time("drilling down"),this.splitTile(a.source,s,l,u,t,e,n),1<i&&console.timeEnd("drilling down"),this.tiles[o]?V(this.tiles[o],r):null):null};var $={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINESTRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection"},Q={fillColor:"#e0e0e0",outlineColor:"#829DB4",outlineWidth:1},tt={fill:"#333333",size:13},et={fillColor:"#F2F285",outlineColor:"#0088BF",outlineWidth:1.2},nt=16,rt=24,it={FOOTPRINT:"FOOTPRINT",ICON:"ICON",TEXT:"TEXT",VECTOR:"VECTOR"},ot=Object.freeze({v1:1,v2:2}),at=1,st=2,lt=3,ut=function(t){return t=function(t){for(var e=0,n=t.length,r=0;r<n-1;r+=1){var i=t[r],o=t[r+1];e+=i[0]*o[1]-o[0]*i[1]}return e+(t[n-1][0]*t[0][1]-t[0][0]*t[n-1][1])}(t),0<t?"CW":t<0?"CCW":void 0};!function(t){function e(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return n[t].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n,r;t.exports=(n=[function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(t){return o(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":o(t)})(t)}var i=n(1),a=(n=n(7)).get,s=(n.deepValue,n.isArray);n=function(){function t(e,n){var r=void 0===(r=n.location)?0:r,i=void 0===(i=n.distance)?100:i,o=void 0===(o=n.threshold)?.6:o,s=void 0===(s=n.maxPatternLength)?32:s,l=void 0!==(l=n.caseSensitive)&&l,u=void 0===(u=n.tokenSeparator)?/ +/g:u,c=void 0!==(c=n.findAllMatches)&&c,h=void 0===(h=n.minMatchCharLength)?1:h,p=void 0===(p=n.id)?null:p,f=void 0===(f=n.keys)?[]:f,d=void 0===(d=n.shouldSort)||d,y=void 0===(y=n.getFn)?a:y,g=void 0===(g=n.sortFn)?function(t,e){return t.score-e.score}:g,v=void 0!==(v=n.tokenize)&&v,m=void 0!==(m=n.matchAllTokens)&&m,b=void 0!==(b=n.includeMatches)&&b,_=void 0!==(_=n.includeScore)&&_;n=void 0!==(n=n.verbose)&&n;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.options={location:r,distance:i,threshold:o,maxPatternLength:s,isCaseSensitive:l,tokenSeparator:u,findAllMatches:c,minMatchCharLength:h,id:p,keys:f,includeMatches:b,includeScore:_,shouldSort:d,getFn:y,sortFn:g,verbose:n,tokenize:v,matchAllTokens:m},this.setCollection(e),this._processKeys(f)}for(var e=t.prototype,n=[{key:"setCollection",value:function(t){return this.list=t}},{key:"_processKeys",value:function(t){if(this._keyWeights={},this._keyNames=[],t.length&&"string"==typeof t[0])for(var e=0,n=t.length;e<n;e+=1){var r=t[e];this._keyWeights[r]=1,this._keyNames.push(r)}else{for(var i=null,o=null,a=0,s=0,l=t.length;s<l;s+=1){var u=t[s];if(!u.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var c=u.name;if(this._keyNames.push(c),!u.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');if((u=u.weight)<0||1<u)throw new Error('"weight" property in key must bein the range of [0, 1)');o=null==o?u:Math.max(o,u),i=null==i?u:Math.min(i,u),a+=this._keyWeights[c]=u}if(1<a)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{limit:!1},n=(t=(this._log('---------\nSearch pattern: "'.concat(t,'"')),this._prepareSearchers(t))).tokenSearchers;t=t.fullSearcher,n=this._search(n,t);return this._computeScore(n),this.options.shouldSort&&this._sort(n),e.limit&&"number"==typeof e.limit&&(n=n.slice(0,e.limit)),this._format(n)}},{key:"_prepareSearchers",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=[];if(this.options.tokenize)for(var n=t.split(this.options.tokenSeparator),r=0,o=n.length;r<o;r+=1)e.push(new i(n[r],this.options));return{tokenSearchers:e,fullSearcher:new i(t,this.options)}}},{key:"_search",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length?arguments[1]:void 0,n=this.list,r={},i=[];if("string"==typeof n[0])for(var o=0,a=n.length;o<a;o+=1)this._analyze({key:"",value:n[o],record:o,index:o},{resultMap:r,results:i,tokenSearchers:t,fullSearcher:e});else for(var s=0,l=n.length;s<l;s+=1)for(var u=n[s],c=0,h=this._keyNames.length;c<h;c+=1){var p=this._keyNames[c];this._analyze({key:p,value:this.options.getFn(u,p),record:u,index:s},{resultMap:r,results:i,tokenSearchers:t,fullSearcher:e})}return i}},{key:"_analyze",value:function(t,e){var n,r=this,i=t.key,o=t.arrayIndex,a=t.value,l=t.record,u=(t=t.index,void 0===(n=e.tokenSearchers)?[]:n),c=e.fullSearcher,h=void 0===(n=e.resultMap)?{}:n,p=void 0===(n=e.results)?[]:n;!function t(e,n,o,a){if(null!=n)if("string"==typeof n){var l=!1,f=-1,d=0,y=(r._log("\nKey: ".concat(""===i?"--":i)),c.search(n));if(r._log('Full text: "'.concat(n,'", score: ').concat(y.score)),r.options.tokenize){for(var g=n.split(r.options.tokenSeparator),v=g.length,m=[],b=0,_=u.length;b<_;b+=1){var w=u[b];r._log('\nPattern: "'.concat(w.pattern,'"'));for(var x=!1,k=0;k<v;k+=1){var E=g[k],T=w.search(E),A={};T.isMatch?(A[E]=T.score,x=l=!0,m.push(T.score)):(A[E]=1,r.options.matchAllTokens||m.push(1)),r._log('Token: "'.concat(E,'", score: ').concat(A[E]))}x&&(d+=1)}f=m[0];for(var S=m.length,M=1;M<S;M+=1)f+=m[M];r._log("Token score average:",f/=S)}var I=y.score,O=(r._log("Score average:",I=-1<f?(I+f)/2:I),!r.options.tokenize||!r.options.matchAllTokens||d>=u.length);r._log("\nCheck Matches: ".concat(O)),(l||y.isMatch)&&O&&(O={key:i,arrayIndex:e,value:n,score:I},r.options.includeMatches&&(O.matchedIndices=y.matchedIndices),(e=h[a])?e.output.push(O):(h[a]={item:o,output:[O]},p.push(h[a])))}else if(s(n))for(var C=0,L=n.length;C<L;C+=1)t(C,n[C],o,a)}(void 0===o?-1:o,a,l,t)}},{key:"_computeScore",value:function(t){this._log("\n\nComputing score:\n");for(var e=this._keyWeights,n=!!Object.keys(e).length,r=0,i=t.length;r<i;r+=1){for(var o=t[r],a=o.output,s=a.length,l=1,u=0;u<s;u+=1){var c=a[u],h=c.key,p=n?e[h]:1;h=0===c.score&&e&&0<e[h]?Number.EPSILON:c.score;l*=Math.pow(h,p)}o.score=l,this._log(o)}}},{key:"_sort",value:function(t){this._log("\n\nSorting...."),t.sort(this.options.sortFn)}},{key:"_format",value:function(t){var e,n=[],i=(this.options.verbose&&(e=[],this._log("\n\nOutput:\n\n",JSON.stringify(t,(function(t,n){if("object"===r(n)&&null!==n){if(-1!==e.indexOf(n))return;e.push(n)}return n}),2)),e=null),[]);this.options.includeMatches&&i.push((function(t,e){var n=t.output;e.matches=[];for(var r=0,i=n.length;r<i;r+=1){var o,a=n[r];0!==a.matchedIndices.length&&(o={indices:a.matchedIndices,value:a.value},a.key&&(o.key=a.key),a.hasOwnProperty("arrayIndex")&&-1<a.arrayIndex&&(o.arrayIndex=a.arrayIndex),e.matches.push(o))}})),this.options.includeScore&&i.push((function(t,e){e.score=t.score}));for(var o=0,a=t.length;o<a;o+=1){var s=t[o];if(this.options.id&&(s.item=this.options.getFn(s.item,this.options.id)[0]),i.length){for(var l={item:s.item},u=0,c=i.length;u<c;u+=1)i[u](s,l);n.push(l)}else n.push(s.item)}return n}},{key:"_log",value:function(){var t;this.options.verbose&&(t=console).log.apply(t,arguments)}}],o=0;o<n.length;o++){var l=n[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}return t}();t.exports=n},function(t,e,n){var r=n(2),i=n(3),o=n(6);n=function(){function t(e,n){var r=void 0===(r=n.location)?0:r,i=void 0===(i=n.distance)?100:i,a=void 0===(a=n.threshold)?.6:a,s=void 0===(s=n.maxPatternLength)?32:s,l=void 0!==(l=n.isCaseSensitive)&&l,u=void 0===(u=n.tokenSeparator)?/ +/g:u,c=void 0!==(c=n.findAllMatches)&&c,h=void 0===(h=n.minMatchCharLength)?1:h;n=void 0!==(n=n.includeMatches)&&n;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.options={location:r,distance:i,threshold:a,maxPatternLength:s,isCaseSensitive:l,tokenSeparator:u,findAllMatches:c,includeMatches:n,minMatchCharLength:h},this.pattern=l?e:e.toLowerCase(),this.pattern.length<=s&&(this.patternAlphabet=o(this.pattern))}for(var e=t.prototype,n=[{key:"search",value:function(t){var e=(n=this.options).isCaseSensitive,n=n.includeMatches;if(e||(t=t.toLowerCase()),this.pattern===t)return e={isMatch:!0,score:0},n&&(e.matchedIndices=[[0,t.length-1]]),e;var o=(e=this.options).maxPatternLength;e=e.tokenSeparator;if(this.pattern.length>o)return r(t,this.pattern,e);e=(o=this.options).location;var a=o.distance,s=o.threshold,l=o.findAllMatches;o=o.minMatchCharLength;return i(t,this.pattern,this.patternAlphabet,{location:e,distance:a,threshold:s,findAllMatches:l,minMatchCharLength:o,includeMatches:n})}}],a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}return t}();t.exports=n},function(t,e){var n=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;t.exports=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:/ +/g,i=(e=new RegExp(e.replace(n,"\\$&").replace(r,"|")),t.match(e)),o=[];if(r=!!i)for(var a=0,s=i.length;a<s;a+=1){var l=i[a];o.push([t.indexOf(l),l.length-1])}return{score:r?.5:1,isMatch:r,matchedIndices:o}}},function(t,e,n){var r=n(4),i=n(5);t.exports=function(t,e,n,o){for(var a=o.location,s=void 0===(l=o.distance)?100:l,l=o.threshold,u=void 0!==(c=o.findAllMatches)&&c,c=void 0===(c=o.minMatchCharLength)?1:c,h=(o=void 0!==(o=o.includeMatches)&&o,void 0===a?0:a),p=t.length,f=void 0===l?.6:l,d=t.indexOf(e,h),y=e.length,g=[],v=0;v<p;v+=1)g[v]=0;-1!==d&&(a=r(e,{errors:0,currentLocation:d,expectedLocation:h,distance:s}),f=Math.min(a,f),-1!==(d=t.lastIndexOf(e,h+y))&&(l=r(e,{errors:0,currentLocation:d,expectedLocation:h,distance:s}),f=Math.min(l,f)));d=-1;for(var m=[],b=1,_=y+p,w=1<<(y<=31?y-1:30),x=0;x<y;x+=1){for(var k=0,E=_;k<E;)r(e,{errors:x,currentLocation:h+E,expectedLocation:h,distance:s})<=f?k=E:_=E,E=Math.floor((_-k)/2+k);_=E;var T=Math.max(1,h-E+1),A=u?p:Math.min(h+E,p)+y,S=Array(A+2);S[A+1]=(1<<x)-1;for(var M=A;T<=M;--M){var I=M-1,O=n[t.charAt(I)];if(O&&(g[I]=1),S[M]=(S[M+1]<<1|1)&O,0!==x&&(S[M]|=(m[M+1]|m[M])<<1|1|m[M+1]),S[M]&w&&(b=r(e,{errors:x,currentLocation:I,expectedLocation:h,distance:s}))<=f){if(f=b,(d=I)<=h)break;T=Math.max(1,2*h-d)}}if(r(e,{errors:x+1,currentLocation:h,expectedLocation:h,distance:s})>f)break;m=S}return a={isMatch:0<=d,score:0===b?.001:b},o&&(a.matchedIndices=i(g,c)),a}},function(t,e){t.exports=function(t,e){var n=e.errors,r=e.currentLocation,i=e.expectedLocation;e=void 0===(e=e.distance)?100:e,n=(void 0===n?0:n)/t.length,t=Math.abs((void 0===i?0:i)-(void 0===r?0:r));return e?n+t/e:t?1:n}},function(t,e){t.exports=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,i=0,o=t.length;i<o;i+=1){var a=t[i];a&&-1===r?r=i:a||-1===r||((a=i-1)-r+1>=e&&n.push([r,a]),r=-1)}return t[i-1]&&e<=i-r&&n.push([r,i-1]),n}},function(t,e){t.exports=function(t){for(var e={},n=t.length,r=0;r<n;r+=1)e[t.charAt(r)]=0;for(var i=0;i<n;i+=1)e[t.charAt(i)]|=1<<n-i-1;return e}},function(t,e){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function r(t){if(null==t)return"";if("string"==typeof t)return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function i(t){return"string"==typeof t}function o(t){return"number"==typeof t}t.exports={get:function(t,e){var a=[];return function t(e,s){if(s){var l=s.indexOf("."),u=s,c=null,h=(-1!==l&&(u=s.slice(0,l),c=s.slice(l+1)),e[u]);if(null!=h)if(c||!i(h)&&!o(h))if(n(h))for(var p=0,f=h.length;p<f;p+=1)t(h[p],c);else c&&t(h,c);else a.push(r(h))}else a.push(e)}(t,e),a},isArray:n,isString:i,isNum:o,toString:r}}],r={},e.m=n,e.c=r,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==o(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(e){return t[e]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0))}(Pe={exports:{}});var ct=(Lt=Pe=Pe.exports)&&Lt.__esModule&&Object.prototype.hasOwnProperty.call(Lt,"default")?Lt.default:Lt,ht=(Pe.Fuse,u((function t(e){var n=void 0===(n=e.addressList)?[]:n,r=void 0===(r=e.geometries)?[]:r,i=void 0===(i=e.entity)?null:i,o=void 0===(o=e.name)?"":o;e=void 0===(e=e.icon)?"":e;s(this,t),this.addressList=n,this.geometries=r,this.icon=e,this.entity=i,this.name=o}))),pt={keys:[{name:"name",weight:.6},{name:"addressList",weight:.4}],threshold:.2},ft=function(){function t(e){s(this,t),this.fuseSearch=null,this.levels_=null,this.searchListEntities_=[],this.searchListIcons_=[],this.searchList_=[],this.venueModel=e,this.init()}return u(t,[{key:"init",value:function(){var t=this.venueModel.getGeometries().reduce((function(t,e){return t[e.getId()]=e,t}),{});this.initEntityList(this.venueModel.getOccupant()),this.initIconList(t),this.levels_=this.venueModel.getLevels().map((function(t){return{levelId:t.getId(),levelName:t.getName(),drawingId:t.getDrawing().getId(),drawingName:t.getDrawing().getName()}})),t=[].concat(_(this.searchListEntities_),_(this.searchListIcons_));this.searchList_=t.sort((function(t,e){return t.name.localeCompare(e.name)})),this.fuseSearch_=new ct(this.searchList_,pt)}},{key:"initEntityList",value:function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return t.spaceIds?new ht({geometries:t.space,addressList:t.spaceIds||[],name:t.properties.name||"",entity:t}):null})).filter((function(t){return null!==t}));this.searchListEntities_=t}},{key:"initIconList",value:function(){this.searchListIcons_=Object.values(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).filter((function(t){return t.isIcon()})).map((function(t){var e=t.getIcon();return new ht({geometries:[t],icon:e,name:t.properties.name||""})}))}},{key:"all",value:function(){return this.searchList_}},{key:"allIconTypes",value:function(){var t=this.searchListIcons_.reduce((function(t,e){return t[e.name]=e.name,t}),{});return Object.keys(t)}},{key:"find",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return""===t?this.searchList_:this.fuseSearch_.search(t)}}]),t}(),dt=Object.freeze({SITE:"SITE",IMAGES:"IMAGES",THEME:"THEME"}),yt="indoor.Site",gt="indoor.Occupant",vt="indoor.Space",mt="Address",bt="indoor.Level",_t="indoor.Entrance",wt="SPACE_TYPE_NAME",xt="SPACE_CATEGORY_NAME",kt="Point",Et="LineString",Tt="Polygon",At="MultiPoint",St="MultiLineString",Mt="MultiPolygon",It=Object.freeze({STANDARD:"STANDARD",FLATTEN:"FLATTEN",OUTDOOR_MAIN:"OUTDOOR_MAIN",INDOOR_MAIN:"INDOOR_MAIN",NO_OUTDOORS:"NO_OUTDOORS",FLATTEN_INDOOR_MAIN:"FLATTEN_INDOOR_MAIN",FLATTEN_OUTDOOR_COPY:"FLATTEN_OUTDOOR_COPY"}),Ot="9999999999999",Ct="https://interactive.data.api.platform.here.com/interactive/v1/catalogs",Lt=Object.freeze({THEME:"THEME",THEME_MAP:"THEME_MAP",PRESETS:"PRESETS",SDK_STRINGS:"SDK_STRINGS",ICON_FILE:"ICON_FILE",INPUT_COLORS:"INPUT_COLORS",BASE_MAP_INFO:"BASE_MAP_INFO",CONFIG_PROFILE:"CONFIG_PROFILE",NAV_THEME:"NAV_THEME",NAV_NAME_THEME:"NAV_NAME_THEME",NAV_PROP_MAP:"NAV_PROP_MAP",NAV_STRINGS:"NAV_STRINGS",NAV_THEME_MAP:"NAV_THEME_MAP",NAV_NAME_THEME_MAP:"NAV_NAME_THEME_MAP",V4_THEME_FAMILY:"V4_THEME_FAMILY",V4_MAPTYPE_THEME:"V4_MAPTYPE_THEME",ICON:"ICON",MARKER:"MARKER",PERMISSIONS:"PERMISSIONS",NAICS_ARRAY:"NAICS_ARRAY",NAICS_MAP:"NAICS_MAP"}),Pt=(Lt=(Object.freeze((c(Pe={},Lt.THEME,"themeUrls"),c(Pe,Lt.THEME_MAP,"themeMapUrl"),c(Pe,Lt.PRESETS,"presetsUrl"),c(Pe,Lt.SDK_STRINGS,"stringsUrl"),Pe)),Object.freeze((c(Pe={},Lt.THEME,"themeOverrides"),c(Pe,Lt.THEME_MAP,"themeMapOverrides"),c(Pe,Lt.PRESETS,"presetOverrides"),c(Pe,Lt.SDK_STRINGS,"stringsOverrides"),c(Pe,Lt.INPUT_COLORS,"inputColorOverrides"),Pe)),Object.freeze((c(Pe={},Lt.THEME,["Modern","Standard","Factory","Navteq","TheBase","Westfield_noLabels","Westfield","TDM_noLabel"]),c(Pe,Lt.SDK_STRINGS,["Standard","SDK","sdk/standard"]),c(Pe,Lt.V4_THEME_FAMILY,["modern","standard"]),c(Pe,Lt.V4_MAPTYPE_THEME,["Airport Terminal","Airport","Casino","College Building","College Campus","Convention","General","Hospital","Outdoor","Retail","School Building","School Campus","Shopping Mall","Traffic","Train Station"]),c(Pe,Lt.NAV_THEME,["Factory","MapEditor"]),c(Pe,Lt.ICON,["Multicolor","Standard","TheBase","Factory"]),Pe)),Object.freeze((c(Pe={},Lt.THEME,"Modern"),c(Pe,Lt.THEME_MAP,"Standard"),c(Pe,Lt.PRESETS,"Standard"),c(Pe,Lt.SDK_STRINGS,"Standard"),c(Pe,Lt.ICON_FILE,"Standard"),c(Pe,Lt.INPUT_COLORS,"Standard"),c(Pe,Lt.BASE_MAP_INFO,"Standard"),c(Pe,Lt.CONFIG_PROFILE,"factory"),c(Pe,Lt.NAV_THEME,"Factory"),c(Pe,Lt.NAV_NAME_THEME,"FactoryName"),c(Pe,Lt.NAV_PROP_MAP,"Standard"),c(Pe,Lt.NAV_STRINGS,"Standard"),c(Pe,Lt.NAV_THEME_MAP,"Standard"),c(Pe,Lt.NAV_NAME_THEME_MAP,"StandardName"),c(Pe,Lt.V4_THEME_FAMILY,"Standard"),c(Pe,Lt.V4_MAPTYPE_THEME,"Standard"),c(Pe,Lt.ICON,"Multicolor"),c(Pe,Lt.MARKER,"Standard"),Pe)),Object.freeze({GEO_JSON:"GEO_JSON",V5_MAP:"V5_MAP",V5_NAV:"V5_NAV",V5_INFO:"V5_INFO",KML:"KML",SVG:"SVG",PNG:"PNG"})),Object.freeze(c({},Lt.GEO_JSON,{COMMUNITY_MAP:"COMMUNITY_MAP",COMMUNITY_ENTITY:"COMMUNITY_ENTITY",PATH_LEVEL_GEOMETRY:"PATH_LEVEL_GEOMETRY",GEOJSON_LEVEL_GEOMETRY:"GEOJSON_LEVEL_GEOMETRY"})),Object.freeze({ACCOUNT_API:"ACCOUNT_API",DEFAULT_COLLECTION:"DEFAULT_COLLECTION",CATALOG_LAYER:"CATALOG_LAYER"})),Rt=Object.freeze((c(Pe={},Pt.ACCOUNT_API,{BASE_URL:"https://account.api.here.com/authorization/v1.1/projects/me"}),c(Pe,Pt.DEFAULT_COLLECTION,{BASE_URL:"https://config.data.api.platform.here.com/config/v1/catalogs",PARAMS:{CREATED_BY:"created",COLLECTION:"-collection"}}),c(Pe,Pt.CATALOG_LAYER,{BASE_URL:"https://interactive.data.api.platform.here.com/interactive/v1/catalogs",MOMDATA_LAYER:"9999999999999",ICON_LAYER:"icons",THEMERULE_LAYER:"config",COLLECTION_LAYER:"layers/9999999999999/search",PARAMS:{FEATURE_TYPE:{KEY:"p.featureType",VALUE:"indoor.Site"}}}),Pe)),Nt=Object.freeze({isIconsEnabled:!0,isMetaEnabled:!0,metaOptions:{},iconOptions:{}}),jt=Object.freeze({GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH",OPTIONS:"OPTIONS",HEAD:"HEAD"});function Dt(){}function zt(){zt.init.call(this)}function Ft(t){return void 0===t._maxListeners?zt.defaultMaxListeners:t._maxListeners}function Bt(t,e,n,r){var i,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener||n),i=t._events),o=i[e]):(i=t._events=new Dt,t._eventsCount=0),o?("function"==typeof o?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),o.warned||(r=Ft(t))&&0<r&&o.length>r&&(o.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",r.emitter=t,r.type=e,r.count=o.length,"function"==typeof console.warn?console.warn(r):console.log(r))):(o=i[e]=n,++t._eventsCount),t}function Gt(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function Ht(t){var e=this._events;if(e){if("function"==typeof(e=e[t]))return 1;if(e)return e.length}return 0}function Ut(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}function qt(t,e,n){return n===Oe.ObjectType.SEGMENT_START_MARKER?0===t?Me:null:n===Oe.ObjectType.SEGMENT_FINISH_MARKER?1===e.length||t===e.length-1?Ie:null:"indoor"===e[t].departure.place.type?Ae:Se}Dt.prototype=Object.create(null),(zt.EventEmitter=zt).usingDomains=!1,zt.prototype.domain=void 0,zt.prototype._events=void 0,zt.prototype._maxListeners=void 0,zt.defaultMaxListeners=10,zt.init=function(){this.domain=null,zt.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Dt,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},zt.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},zt.prototype.getMaxListeners=function(){return Ft(this)},zt.prototype.emit=function(t){var e,n,r,i="error"===t,o=this._events;if(o)i=i&&null==o.error;else if(!i)return!1;if(a=this.domain,i){var a;i=arguments[1];if(a)return(i=i||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,i.domain=a,i.domainThrown=!1,a.emit("error",i),!1;throw i instanceof Error?i:((a=new Error('Uncaught, unspecified "error" event. ('+i+")")).context=i,a)}if(!(e=o[t]))return!1;var s,l="function"==typeof e;switch(s=arguments.length){case 1:var u=e;if(f=l)u.call(this);else for(var c=u.length,h=Ut(u,c),p=0;p<c;++p)h[p].call(this);break;case 2:var f=e,d=arguments[1];if(u=l)f.call(this,d);else for(var y=f.length,g=Ut(f,y),v=0;v<y;++v)g[v].call(this,d);break;case 3:var m=e,b=arguments[1],_=arguments[2];if(E=l)m.call(this,b,_);else for(var w=m.length,x=Ut(m,w),k=0;k<w;++k)x[k].call(this,b,_);break;case 4:var E=e,T=arguments[1],A=arguments[2],S=arguments[3];if(m=l)E.call(this,T,A,S);else for(var M=E.length,I=Ut(E,M),O=0;O<M;++O)I[O].call(this,T,A,S);break;default:for(n=new Array(s-1),r=1;r<s;r++)n[r-1]=arguments[r];var C=e,L=n;if(l)C.apply(this,L);else for(var P=C.length,R=Ut(C,P),N=0;N<P;++N)R[N].apply(this,L)}return!0},zt.prototype.on=zt.prototype.addListener=function(t,e){return Bt(this,t,e,!1)},zt.prototype.prependListener=function(t,e){return Bt(this,t,e,!0)},zt.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,Gt(this,t,e)),this},zt.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,Gt(this,t,e)),this},zt.prototype.removeListener=function(t,e){var n,r,i,o,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if((r=this._events)&&(n=r[t]))if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new Dt:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length;0<o--;)if(n[o]===e||n[o].listener&&n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new Dt,this;delete r[t]}else{for(var s=n,l=i,u=l+1,c=s.length;u<c;l+=1,u+=1)s[l]=s[u];s.pop()}r.removeListener&&this.emit("removeListener",t,a||e)}return this},zt.prototype.removeAllListeners=function(t){var e,n=this._events;if(n){if(!n.removeListener)return 0===arguments.length?(this._events=new Dt,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new Dt:delete n[t]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new Dt,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)for(;this.removeListener(t,e[e.length-1]),e[0];);}return this},zt.prototype.listeners=function(t){var e=this._events;t=e&&(e=e[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[];return t},zt.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):Ht.call(t,e)},zt.prototype.listenerCount=Ht,zt.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var Vt="venues-ui-button--active",Zt="venues-ui-button",Wt="venues-ui__drawings",Yt="data-drawing",Kt=function(){function t(e,n,r){var i=this,o=(s(this,t),this.clickHandler=r,this.containerDiv=document.createElement("div"),this.containerDiv.setAttribute("class",Wt),document.createElement("div"));(r=(o.setAttribute("class","trigger ".concat(Zt)),document.createElement("div"))).setAttribute("class","arrow arrow--down"),o.appendChild(r),o.addEventListener("click",(function(){o.classList.toggle(Vt),i.containerButtons.classList.toggle("drawings--open")})),this.containerDiv.appendChild(o),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","drawings"),this.containerDiv.appendChild(this.containerButtons),n&&this.update(n),e.appendChild(this.containerDiv)}return u(t,[{key:"drawButton",value:function(t,e,n){var r=this,i=document.createElement("div");n=Number(n)===Number(t);i.setAttribute("class",n?"".concat(Zt," ").concat(Vt):Zt),i.innerHTML=e,i.setAttribute(Yt,t),i.addEventListener("click",(function(){r.switch(t),r.clickHandler(t)})),this.containerButtons.appendChild(i)}},{key:"switch",value:function(t){this.containerButtons.querySelectorAll(".".concat(Wt," .").concat(Vt)).forEach((function(t){return t.setAttribute("class",Zt)})),(t=this.containerButtons.querySelector("[".concat(Yt,"='").concat(t,"']")))&&t.setAttribute("class","".concat(Zt," ").concat(Vt))}},{key:"update",value:function(t){var e=this,n=(this.containerButtons.innerHTML="",function(t){return t=t.getDrawings(),new Map(t.map((function(t){var e=t.getDisplayName()||t.getName();return[t.getId(),e]})))}(t));0<n.size&&n.forEach((function(n,r){return e.drawButton(r,n,t.getRootDrawing().getId())}))}}]),t}(),Xt="venues-ui-button--active",Jt="venues-ui-button",$t="data-level",Qt="venues-ui__levels",te=function(){function t(e,n,r,i){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:4;s(this,t),this.clickHandler=i,this.levelButtonCount=o,this.currentScrollIndex=0,this.containerUI=document.createElement("div"),this.containerUI.setAttribute("class","".concat(Qt)),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","levels"),this.containerUI.appendChild(this.containerButtons),n&&this.update(n,r),e.appendChild(this.containerUI)}return u(t,[{key:"clear",value:function(){this.containerButtons.innerHTML="",this.buttonScrollUp&&(this.containerUI.removeChild(this.buttonScrollUp),this.buttonScrollUp=null),this.buttonScrollDown&&(this.containerUI.removeChild(this.buttonScrollDown),this.buttonScrollDown=null)}},{key:"drawLevelButton",value:function(t,e){var n=this,r=document.createElement("div");r.innerHTML=e,r.style.fontSize="".concat(Math.max(Math.min(28.8/e.length,11.52),10),"px"),r.style.display="block",r.setAttribute("class",Jt),r.setAttribute($t,t),r.addEventListener("click",(function(){n.switch(t),n.clickHandler(t)})),this.containerButtons.appendChild(r)}},{key:"drawScrollButtons",value:function(){var t,e=this;(t=((t=(this.buttonScrollUp=document.createElement("div"),this.buttonScrollUp.setAttribute("class","".concat(Jt," ").concat(Jt,"--up")),document.createElement("div"))).setAttribute("class","arrow arrow--up"),this.buttonScrollUp.appendChild(t),this.buttonScrollUp.addEventListener("click",(function(){return e.scroll(1)})),this.containerUI.insertBefore(this.buttonScrollUp,this.containerButtons),this.buttonScrollDown=document.createElement("div"),this.buttonScrollDown.setAttribute("class","".concat(Jt," ").concat(Jt,"--down")),document.createElement("div"))).setAttribute("class","arrow arrow--down"),this.buttonScrollDown.appendChild(t),this.buttonScrollDown.addEventListener("click",(function(){return e.scroll(-1)})),this.containerUI.appendChild(this.buttonScrollDown)}},{key:"scroll",value:function(){var t,e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,r=Array.from(this.containerButtons.querySelectorAll(".".concat(Jt))).reverse(),i=[];0<=n?(this.currentScrollIndex=Math.min(this.currentScrollIndex+n,r.length-this.levelButtonCount),t=Math.min(this.currentScrollIndex,r.length-this.levelButtonCount),e=Math.min(this.currentScrollIndex+this.levelButtonCount,r.length),i=r.slice(t,e)):n<0&&(this.currentScrollIndex=Math.max(this.currentScrollIndex+n,0),t=Math.max(0,this.currentScrollIndex),e=Math.min(r.length,this.currentScrollIndex+this.levelButtonCount),i=r.slice(t,e)),r.forEach((function(t){-1!==i.indexOf(t)?t.style.display="block":t.style.display="none"})),this.buttonScrollDown&&(0===this.currentScrollIndex?this.buttonScrollDown.setAttribute("disabled","disabled"):this.buttonScrollDown.removeAttribute("disabled")),this.buttonScrollUp&&(this.currentScrollIndex===r.length-this.levelButtonCount?this.buttonScrollUp.setAttribute("disabled","disabled"):this.buttonScrollUp.removeAttribute("disabled"))}},{key:"switch",value:function(t){var e;this.containerButtons.querySelectorAll(".".concat(Xt)).forEach((function(t){return t.setAttribute("class",Jt)})),(t=this.containerButtons.querySelector(".".concat(Qt," [").concat($t,"='").concat(t,"']")))&&(e=Array.from(this.containerButtons.querySelectorAll(".".concat(Jt))).reverse(),t.setAttribute("class","".concat(Jt," ").concat(Xt)),((e=e.indexOf(t))<this.currentScrollIndex||e>=this.currentScrollIndex+4)&&this.scroll(e-this.currentScrollIndex))}},{key:"update",value:function(t,e){var n,r=this,i=(e=function(){return new Map((0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return[t.getZIndex(),t.getShortName()||t.getDisplayName()||t.getName()]})))}((n=t,(e===It.FLATTEN?(e=n.getVenueModel().getLevelMapFlattenedByZIndex_(),Object.values(e).map((function(t){return t[0]}))):n.getLevels()).sort((function(t,e){return e.getZIndex()-t.getZIndex()})))),t.getMainLevel().getZIndex());this.clear(),e.forEach((function(t,e){return r.drawLevelButton(e,t)})),e.size>this.levelButtonCount&&(e.size>this.levelButtonCount+1?this.currentScrollIndex=Math.min(Array.from(e).reverse().findIndex((function(t){return t[0]===i})),e.size-this.levelButtonCount):this.currentScrollIndex=0,this.drawScrollButtons(),this.scroll(0)),this.switch(i)}}]),t}(),ee=function(){function t(e,n){s(this,t),this.baseTheme=e,this.metaInformation=n,this.labelStyleMap={},this.styleMap={},this.setStyleMap()}return u(t,[{key:"setStyleMap",value:function(){this.styleMap.ENTRANCE=this.baseTheme.entranceRules.default.styleProperties,this.labelStyleMap.ENTRANCE=this.baseTheme.entranceRules.default.textLabelStyleProperties;for(var t=0,e=Object.entries(this.baseTheme.spaceRules);t<e.length;t++){var n,r=(n=b(e[t],2))[0],i=(n=n[1]).properties.behavioralAppearance.default.styleProperties,o=n.properties.behavioralAppearance.default.textLabelStyleProperties;if(this.styleMap[r]=i,this.labelStyleMap[r]=o,n.spaceTypes)for(var a=0,s=Object.entries(n.spaceTypes);a<s.length;a++){var l=(c=b(s[a],2))[0],u=(c=c[1]).behavioralAppearance.default.styleProperties,c=c.behavioralAppearance.default.textLabelStyleProperties;this.styleMap["".concat(r,"_").concat(l)]=u&&0!==Object.keys(u)?u:i,this.labelStyleMap["".concat(r,"_").concat(l)]=c&&0!==Object.keys(c)?c:o}}}},{key:"getBaseTheme",value:function(){return this.baseTheme}},{key:"getStyleMap",value:function(){return this.styleMap}},{key:"getGeometryStyle",value:function(t){return this.styleMap&&Object.getOwnPropertyNames(this.styleMap)?this.styleMap[t]:null}},{key:"getLabelStyle",value:function(t){return this.labelStyleMap&&Object.getOwnPropertyNames(this.labelStyleMap)?this.labelStyleMap[t]:null}}],[{key:"getGeometryDefaultStyle",value:function(){return{fill:"#e5e5e5",fillOpacity:1,stroke:"#6c7a89",strokeOpacity:1,strokeWidth:2}}},{key:"getLabelDefaultStyle",value:function(){return{stroke:"#6c7a89",zmin:15}}}]),t}(),ne=function(){function t(){s(this,t),this.config=Object.seal({emitEventOnOverrideUpdate:!0}),this.imageCache={},this.releaseSettings_={displayOptions:{},mom:[]},this.theme={}}return u(t,[{key:"getMomData",value:function(){return this.releaseSettings_.mom}},{key:"getTheme",value:function(){return this.theme||{}}},{key:"getStyle",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.getTheme(),r=ee.getGeometryDefaultStyle(),i=t.properties.spaceType,o=t=t.properties.spaceCategory;return i&&(o="".concat(t,"_").concat(i)),{m:(t=(t=n.getGeometryStyle(o))&&!e?t:r).fill&&t.fill.toLowerCase()||"#fff",w:t.strokeWidth/10||.1,o:t.stroke&&t.stroke.toLowerCase()||"#fff",l:"Dark"}}},{key:"getLabelStyle",value:function(t){this.getTheme();var e=ee.getLabelDefaultStyle();return{fill:e.stroke,zmin:e.zmin}}}]),t}(),re=Math.PI/180,ie=180/Math.PI,oe=function(){function t(){s(this,t)}return u(t,null,[{key:"toRadians",value:function(t){return t*re}},{key:"toDegrees",value:function(t){return t*ie}},{key:"getBoundingBox",value:function(e,n){var r=[];switch(e){case kt:r=[n,n];break;case At:case Et:r=n;break;case St:case Tt:r=n.reduce((function(t,e){return t.concat(e)}),[]);break;case Mt:r=n.reduce((function(t,e){return t.concat(e)}),[]).reduce((function(t,e){return t.concat(e)}),[])}return t.getBoundingBoxVertices(r)}},{key:"getInverseTransform",value:function(t){var e=t[0]*t[3]-t[1]*t[2];return(e=[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,0,0])[4]=-(e[0]*t[4]+e[2]*t[5]),e[5]=-(e[1]*t[4]+e[3]*t[5]),e}},{key:"applyTransformToPoint",value:function(t,e){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}},{key:"transformProduct",value:function(t,e){var n=[0,0,0,0,0,0];return n[0]=e[0]*t[0]+e[2]*t[1],n[1]=e[1]*t[0]+e[3]*t[1],n[2]=e[0]*t[2]+e[2]*t[3],n[3]=e[1]*t[2]+e[3]*t[3],n[4]=e[0]*t[4]+e[2]*t[5]+e[4],n[5]=e[1]*t[4]+e[3]*t[5]+e[5],n}},{key:"convertLonLatToMerc",value:function(t){var e=t[0]*re;t=t[1]*re,t=Math.sin(t);return[.5+e/(2*Math.PI),.5-Math.log((1+t)/(1-t))/(4*Math.PI)]}},{key:"convertMercToLatLon",value:function(t){var e=2*Math.PI*(t[0]-.5);t=Math.atan(Math.sinh(2*Math.PI*(.5-t[1])));return[e/re,t/re]}},{key:"getTransformScale",value:function(t){return Math.sqrt(t[0]*t[3]-t[1]*t[2])}},{key:"getLonLatToMercTransform",value:function(e){var n=[1/360,0,0,-1/(360*Math.cos(e[1]*re)),0,0],r=t.applyTransformToPoint(n,e);e=t.convertLonLatToMerc(e);return n[4]=e[0]-r[0],n[5]=e[1]-r[1],n}},{key:"getNatToMercTransform",value:function(e){var n=[e[4],e[5]];n=t.getLonLatToMercTransform(n);return t.transformProduct(e,n)}},{key:"convertMxMy2LonLat",value:function(e,n){return e.length&&n.length?t.applyTransformToPoint(e,n):[]}},{key:"convertLonLat2MxMy",value:function(e,n){return e.length&&n.length?(e=t.getInverseTransform(e),t.applyTransformToPoint(e,n)):[]}},{key:"getFlattenedQuadraticBezierCurve",value:function(t,e,n){var r=[],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:10;i<1&&(i=6);for(var o=0;o<=i;o+=1){var a=(1-(l=o/i))*(1-l),s=2*l*(1-l),l=l*l,u=a*t[0]+s*e[0]+l*n[0];a=a*t[1]+s*e[1]+l*n[1];r.push([u,a])}return r}},{key:"getFlattenedCubicBezierCurve",value:function(t,e,n,r){var i=[],o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:10;o<1&&(o=6);for(var a=0;a<=o;a+=1){var s=(1-(c=a/o))*(1-c)*(1-c),l=3*c*(1-c)*(1-c),u=3*c*c*(1-c),c=c*c*c,h=s*t[0]+l*e[0]+u*n[0]+c*r[0];s=s*t[1]+l*e[1]+u*n[1]+c*r[1];i.push([h,s])}return i}},{key:"getRectangularCoordinatesOfLabelArea",value:function(e,n){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i=(l=b(e,6))[0],o=l[1],a=l[2],s=l[3],l=l[5],u=t.getDeltaLonLatForMeterAtGivenLonLat(i,o);e=e[4];return r?(l&&(e*=-1),null!=n&&(e=(e+=n<0?2*Math.PI+n:n)<0?2*Math.PI+e:e)):e=0,t.getRectVerticesFromSignatureRectRepresentation([i,o],{xLength:a,yLength:s},e,u)}},{key:"getRotatedPoint",value:function(t,e){var n,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[0,0],o=Math.cos(e),a=(e=Math.sin(e),t[0]-i[0]);t=t[1]-i[1];return[(n=r?[a*o+t*e,t*o-a*e]:[a*o-t*e,t*o+a*e])[0]+i[0],n[1]+i[1]]}},{key:"getRectVerticesFromSignatureRectRepresentation",value:function(e,n,r,i){var o=n.xLength,a=(n=n.yLength,!(4<arguments.length&&void 0!==arguments[4])||arguments[4]),s=(e=b(e,2))[0],l=e[1],u=o/2,c=n/2,h=(e=b(i,2))[0],p=e[1];return[[1,1],[-1,1],[-1,-1],[1,-1]].map((function(t){return[t[0]*u,t[1]*c]})).map((function(e){return t.getRotatedPoint(e,r,a)})).map((function(t){return[t[0]*h,t[1]*p]})).map((function(t){return[t[0]+s,t[1]+l]}))}},{key:"getScaleFactorForRectInSpace",value:function(t,e,n,r){return t/=n,(n=e/r)<t?n:t}},{key:"getDeltaLonLatForMeterAtGivenLonLat",value:function(t,e){return[1/6371e3*(180/Math.PI)/Math.cos(e*Math.PI/180),1/6371e3*(180/Math.PI)]}},{key:"getBoundingBoxVertices",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=[[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]];return t.reduce((function(t,e){return[[Math.min(e[0],t[0][0]),Math.min(e[1],t[0][1])],[Math.max(e[0],t[1][0]),Math.max(e[1],t[1][1])]]}),e)}},{key:"isPointInBoundingBox",value:function(t,e){var n,r,i,o;if(t&&e)return n=(t=b(t,2))[0],t=t[1],e=b(e,2),r=(i=b(e[0],2))[0],i=i[1],o=(e=b(e[1],2))[0],e=e[1],n<=o&&r<=n&&t<=e&&i<=t}},{key:"isPointOnLineSegment",value:function(t,e,n){var r=(t=b(t,2))[0],i=(t=t[1],(e=b(e,2))[0]),o=(e=e[1],(n=b(n,2))[0]),a=(e-t)*((n=n[1])-t)<=0;return i===o?i===r&&a:t-n==(n-e)/(o-i)*(r-o)&&a}},{key:"rayIntersectLineSegment",value:function(t,e,n){var r=(t=b(t,2))[0],i=(t=t[1],(e=b(e,2))[0]),o=(e=e[1],(n=b(n,2))[0]);n=n[1];return i!==o&&(0<=(r=(r-i)/(o-i))&&r<1&&t<(n-e)*r+e)}},{key:"isPointInPolygon",value:function(e,n){var r=(e=b(e,2))[0],i=e[1];if((e=n.length)<3)return!1;var o=0,a=n[e-1];return n.forEach((function(e){t.rayIntersectLineSegment([r,i],a,e)&&(o+=1),a=e})),o%2!=0}},{key:"isPointOnLineString",value:function(e,n){var r=(e=b(e,2))[0],i=e[1],o=n.length;if(!(o<2))for(var a=n[o-1],s=0;s<o;s+=1){var l=n[s];if(t.isPointOnLineSegment([r,i],a,l))return!0;a=n[s]}return!1}},{key:"getAreaOfPolygon",value:function(t){var e=t.length;if(e<3)return null;var n=0,r=t[e-1];return t.forEach((function(t){var e,i,o,a;n+=.5*(i=t,o=(e=b(e=r,2))[0],e=e[1],a=(i=b(i,2))[0],o*i[1]-e*a),r=t})),n}},{key:"getDistanceBetweenPoints",value:function(t,e){var n=(t=b(t,2))[0];t=t[1],n-=(e=b(e,2))[0],t-=e[1];return Math.sqrt(n*n+t*t)}}]),t}(),ae=function(){function t(){s(this,t),this.spaceRules={}}return u(t,null,[{key:"getDataEntriesOne",value:function(t,e){var n;t=[t,""];return null!==e&&Array.isArray(e)?t[1]=e.toString():null!==e&&"object"===o(e)?0<(n=Object.entries(e)).length&&(n=this.getDataEntriesOne(n[0][0],n[0][1]),t[0]="".concat(t[0],".").concat(n[0]),t[1]=n[1]):t[1]=e,t}},{key:"getDataEntriesAll",value:function(t){for(var e=[],n=0,r=Object.entries(t);n<r.length;n++){var i=(o=b(r[n],2))[0],o=o[1];i=this.getDataEntriesOne(i,o);e.push(i)}return e}},{key:"doFindComboMatch",value:function(t,e){var n="";if(t&&t.configuration&&t.configuration.combinations)for(var r=this.getDataEntriesAll(e),i=(e=Object.entries(t.configuration.combinations),0),o=0,a=e;o<a.length;o++)!function(){var t=a[o],e=Object.keys(t[1]).filter((function(e){return r.some((function(n){return e===n[0]&&t[1][e]===n[1]}))}));e.length===Object.keys(t[1]).length&&e.length>i&&(n=t[0],i=e.length)}();return n}},{key:"getIconFromCombinations",value:function(t,e){if(t&&t.configuration.combinations&&e&&0<Object.keys(e).length&&t.behavioralAppearance.combinations&&0<Object.keys(t.behavioralAppearance.combinations).length){if(""===(e=this.doFindComboMatch(t,e))||!t.behavioralAppearance.combinations[e].labelIcon)return"";if(t.behavioralAppearance.combinations&&t.behavioralAppearance.combinations[e]&&t.behavioralAppearance.combinations[e].labelIcon)return t.behavioralAppearance.combinations[e].labelIcon.referenceUri}return""}},{key:"findSpace",value:function(t,e){if(e.spaceTypes&&e.spaceTypes[t])return e.spaceTypes[t]}},{key:"findCategory",value:function(t){if(this.spaceRules[t])return this.spaceRules[t]}},{key:"setSpaceRules",value:function(t){this.spaceRules=t}},{key:"getSpaceIcon",value:function(t,e,n){var r,i="";return(e=this.findCategory(e))&&(t=this.findSpace(t,e))&&(r="",(r=n?this.getIconFromCombinations(t,n):r)&&""!==r?i=r:t.behavioralAppearance.default.labelIcon?i=t.behavioralAppearance.default.labelIcon.referenceUri:e.properties.behavioralAppearance.default.labelIcon&&(i=e.properties.behavioralAppearance.default.labelIcon.referenceUri)),i}}]),t}(),se=function(){function t(){s(this,t),this.themeRule={},this.svgList={},this.defaultLang="ENG"}return u(t,null,[{key:"getNumberFromAlphaNumeric",value:function(t){try{var e=t.split("").reverse().join("").replace(/[^0-9]/g,"").substr(0,6);return parseInt(e,10)}catch(t){return null}}},{key:"extractNumFromSting",value:function(t){try{var e=t.replace(/[^0-9]/g,"");return parseInt(e,10)}catch(e){return console.warn("Exception in converting string to Id"),this.getNumberFromAlphaNumeric(t)}}},{key:"getVenueId",value:function(t){var e;return"number"!=typeof t?(e=t.substr(t.length-6),parseInt(e,10)):t}},{key:"getStringFormatIdentifier",value:function(t){return"number"==typeof t||t.length<13?"indoormap-00000000-0000-4000-a000-".concat(t.toString().padStart(12,"0")):t}},{key:"setSite",value:function(t,e){var n=this.getName(t);return(t={id:this.getStringFormatIdentifier(e),location:t.referencePoint,properties:t.properties,geometry:t.geometry,map_version:t.properties.indoorSiteMetadata.legacyVersion.mapVersion,identifier:this.getVenueId(e),obj_type:"CommunityMap"}).properties.name=n,t.properties.display_name=n,t}},{key:"setEntrance",value:function(t){var e=this.themeRule.entranceRules.default.labelIcon.referenceUri,n=this.extractNumFromSting(t.id),r=this.getName(t),i=t.properties;return i.icon=!0,i.svg=this.svgList[e.toLowerCase()],i.name=r||"entrance",i.display_name=r||"entrance",i.level={id:t.properties.level.id},{id:t.id,levelId:t.properties.level.id,momType:_t,geometry:t.geometry,location:t.geometry,properties:i,identifier:n,label_area:[t.referencePoint.coordinates[0],t.referencePoint.coordinates[1],50,50,180]}}},{key:"setStructure",value:function(t){var e=this.extractNumFromSting(t.id),n=this.getName(t),r=t.properties;return r.is_root=0===t.properties.drawOrder,r.display_name=n,r.map_type=t.properties.structureType,r.name=n,{id:t.id,obj_type:"Drawing",identifier:e,properties:r}}},{key:"getNameByPriority",value:function(t,e){for(var n,r="",i=0;i<t.length;i++){var o=t[i];if(("OFFICIAL"===(n=o).nameType&&n.languageCode&&n.languageCode===this.defaultLang||"OFFICIAL"===n.nameType)&&(e&&e===o.nameType||!e)){r=o.name;break}if("ABBREVIATION"===o.nameType&&(e&&e===o.nameType||!e)){r=o.name;break}if("UNCLASSIFIED"===o.nameType&&(e&&e===o.nameType||!e)){r=o.name;break}if(!o.nameType&&o.name){r=o.name;break}}return r}},{key:"getName",value:function(t,e){return t.properties&&t.properties.names?this.getNameByPriority(t.properties.names,e):t.properties.placeProperties&&t.properties.placeProperties&&t.properties.placeProperties.names?this.getNameByPriority(t.properties.placeProperties.names,e):t.properties.locationDetails&&t.properties.locationDetails[0]&&t.properties.locationDetails[0].names?this.getNameByPriority(t.properties.locationDetails[0].names,e):""}},{key:"setLevel",value:function(t){var e=this.extractNumFromSting(t.id),n=t.properties.names,r=t.properties;return r["short name"]=this.getNameByPriority(n,n&&1!==n.length?"ABBREVIATION":""),r.name=this.getNameByPriority(n,n&&1!==n.length?"ABBREVIATION":""),{id:t.id,obj_type:"Level",identifier:e,properties:r}}},{key:"setLevelConnector",value:function(t){var e=this.extractNumFromSting(t.id);return{id:t.id,obj_type:"LevelConnector",properties:t.properties,geometry:t.geometry,identifier:e,location:t.geometry}}},{key:"setOccupant",value:function(t){var e=this.getName(t),n=this.extractNumFromSting(t.id),r=t.properties;return r.occupantName=e,r.email=t.properties.placeProperties&&t.properties.placeProperties.contacts&&t.properties.placeProperties.contacts.find((function(t){return"EMAIL"===t.contactType}))&&t.properties.placeProperties.contacts.find((function(t){return"EMAIL"===t.contactType})).value,r.name=e,r.tags=t.properties.attributes&&t.properties.attributes.tags,{geometry:t.geometry,id:t.id,obj_type:"Geometry",properties:r,identifier:n,spaceIds:t.properties.spaces||[],type:"Feature",momType:gt}}},{key:"getIcon",value:function(t){var e=!1,n="";return this.svgList[t]&&(e=!0,n=this.svgList[t]),{icon:e,svg:n}}},{key:"setSpace",value:function(t){var e=ae.getSpaceIcon(t.properties.spaceType,t.properties.spaceCategory,t.properties.spaceTypeProperties),n=this.getName(t),r=(e=this.getIcon(e)).icon,i=(e=e.svg,this.extractNumFromSting(t.id)),o=(t.properties.level.id.includes("out"),t.properties.level.id),a=t.properties;a.spaceName=n,a[t.properties.spaceCategory]=t.properties.spaceType,a.spaceType=t.properties.spaceType,a.spaceCategory=t.properties.spaceCategory,a.icon=r,a.svg=e,n={geometry:t.geometry,id:t.id,levelId:o,label_area:[t.referencePoint.coordinates[0],t.referencePoint.coordinates[1],50,50,180],location:t.referencePoint,obj_type:"Geometry",identifier:i,properties:a,momType:vt,type:"Feature"};return t.properties.spaceAddress&&t.properties.spaceAddress.id&&(n.addressId=t.properties.spaceAddress.id),n}},{key:"setSpaceGroups",value:function(t){var e=this.extractNumFromSting(t.id);return{id:t.id,obj_type:"SpaceGroups",properties:t.properties,geometry:t.geometry,location:t.referencePoint,identifier:e}}},{key:"setTopology",value:function(t){var e=this.extractNumFromSting(t.id);return{id:t.id,obj_type:"Topology",properties:t.properties,geometry:t.geometry,identifier:e}}},{key:"setAddress",value:function(t){var e=this.extractNumFromSting(t.id),n=this.getName(t),r=t.properties;return r.addressName=n,r.name=n,{id:t.id,properties:r,obj_type:"Address",identifier:e}}},{key:"manageSvgDimensions",value:function(t){for(var e={},n=0,r=Object.entries(t);n<r.length;n++){var i,o,a,s=(a=b(r[n],2))[0];"string"==typeof(a=a[1])&&(i=-1!==a.indexOf("<g")&&a.indexOf("<g")||a.indexOf("<p"),o=a.indexOf("</s"),i&&o&&(a=a.substring(i-1,o-1),e[s]="<svg width='64' height='64' viewBox='0 0 24 32' fill='none' xmlns='http://www.w3.org/2000/svg'>".concat(a,"</svg>")))}return e}},{key:"getSiteBoundingBox",value:function(t){if(t){var e=(t=b(oe.getBoundingBox(t.geometry.type,t.geometry.coordinates),2))[0];t=t[1];if(e)return"".concat(e[0],",").concat(e[1],",").concat(t[0],",").concat(t[1])}return"null, null, null, null"}}]),t}(),le=function(){function t(){s(this,t)}return u(t,null,[{key:"get",value:function(t){return fetch(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{method:"GET"}).then((function(e){return e.ok?e.json():Promise.reject(new Error("Call failed for ".concat(t," : ").concat(e.status," ").concat(e.statusText)))}))}},{key:"getFormattedIndoorMapId",value:function(t){return"number"==typeof t?"indoormap-00000000-0000-4000-a000-".concat(t.toString().padStart(12,"0")):t.includes("indoormap")?t:"indoormap-00000000-0000-4000-a000-".concat(t.padStart(12,"0"))}},{key:"getConfigUrl",value:function(t,e,n){var r=n.apiKey,i=n.url,o=n.token,a=(n=n.hrn,{method:"GET",mode:"cors",cache:"default"});i="".concat(i||Ct,"/").concat(n),n="";return e===dt.SITE&&(n="".concat(i,"/layers/").concat(Ot,"/search?p.featureType=indoor.Site&p.indoorMapId='").concat(this.getFormattedIndoorMapId(t),"'")),e===dt.IMAGES&&(n="".concat(i,"/layers/").concat("icons","/features/svg")),e===dt.Theme&&(n="".concat(i,"/layers/").concat("config","/features/indoorMapRules")),o?a.headers={Authorization:"Bearer ".concat(o)}:n=n.concat("".concat(e===dt.SITE?"&":"?","apiKey=").concat(r)),this.get(n,a)}},{key:"getMomData",value:function(t,e){var n=e.apiKey,r=e.url,i=e.token,o=(e=e.hrn,{method:"GET",mode:"cors",cache:"default"});r="".concat(r||Ct,"/").concat(e),e=t&&t.features&&t.features.find((function(t){return t.momType===yt})),t=se.getSiteBoundingBox(e),r="".concat(r,"/layers/").concat(Ot,"/bbox?bbox=").concat(t,"&f.momType=indoor.Level,indoor.Space,indoor.Site,indoor.Structure,indoor.Occupant,indoor.SpaceGroups,Address,indoor.Entrance");return i?o.headers={Authorization:"Bearer ".concat(i)}:r=r.concat("&apiKey=".concat(n)),{mom:this.get(r,o),site:e}}},{key:"getDefaultCollection",value:function(t){t=t.token;var e=(n=Rt[Pt.DEFAULT_COLLECTION]).PARAMS,n=n.BASE_URL;n=encodeURI("".concat(n,"?sortBy=").concat(e.CREATED_BY,"&q=").concat(e.COLLECTION));return t?(e={method:"GET",headers:{Authorization:"Bearer ".concat(t)}},this.get(n,e)):Promise.reject(new Error("Please provide valid token"))}},{key:"getProjectAccountDetails",value:function(t){t=t.token;var e=Rt[Pt.ACCOUNT_API].BASE_URL;return t?(t={method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(t)}},this.get(e,t)):Promise.reject(new Error("Please provide valid token"))}},{key:"fetchIndoorMapList",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.hrn,n=t.url,r=(i=Rt[Pt.CATALOG_LAYER]).PARAMS,i=i.COLLECTION_LAYER;n=n||Ct;return e?(n=encodeURI("".concat(n,"/").concat(e,"/").concat(i,"?").concat(r.FEATURE_TYPE.KEY,"=").concat(r.FEATURE_TYPE.VALUE)),i=(e=this.createBaseUrl(n,jt.GET,{},t)).URL,r=e.options,this.get(i,r)):Promise.reject(new Error("Please provide valid hrn"))}},{key:"createBaseUrl",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:jt.GET,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=(o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).token,o=o.apiKey,a=t;e={method:e,mode:"cors"};return i?e.headers=r({Authorization:"Bearer ".concat(i)},n):a=t.concat("&apiKey=".concat(o)),{URL:a,options:e}}}]),t}(),ue=function(){function t(){s(this,t)}return u(t,null,[{key:"isPointOnGeoJSONLineString",value:function(t,e){var n=!1;if(e&&1<e.length)for(var r,i,o=1;o<e.length;o+=1)if(r=e[o-1],i=e[o],oe.isPointOnLineSegment(t,r,i)){n=!0;break}return n}},{key:"isPointOnGeoJSONMultiLineString",value:function(e,n){for(var r=!1,i=0;i<n.length;i+=1)if(t.isPointOnGeoJSONLineString(e,n[i])){r=!0;break}return r}},{key:"isPointInsideGeoJSONPolygon",value:function(t,e){var n=!1;if(n=!!oe.isPointInPolygon(t,e[0])||n)for(var r=1;r<e.length;r+=1)if(oe.isPointInPolygon(t,e[r])){n=!1;break}return n}},{key:"isPointInsideGeoJSONMultiPolygon",value:function(e,n){for(var r=n.length,i=0;i<r;i+=1)if(t.isPointInsideGeoJSONPolygon(e,n[i]))return!0;return!1}},{key:"getGeometriesByLonLat",value:function(t,e){for(var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=[],i=e.filter((function(e){return oe.isPointInBoundingBox(t,e.getBoundingBox())})),o=0;o<i.length;o+=1){var a=i[o];if(a.isPointInsideGeometry(t,!0)&&(r.push(a),!n))break}return r.sort((function(t,e){return e.getZIndex()-t.getZIndex()}))}}]),t}(),ce=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0,r=2<arguments.length?arguments[2]:void 0;s(this,t),this.id=e.id,this.properties=e.properties||{},this.labelArea=e.label_area||[],this.geometry=e.geometry||{},this.location=e.location||{},this.address=e.address||{},this.level=n,this.zIndex=r,this.spaceId=e.spaceId,this.state_={isHighlighted:!1,highlightedStyle:{}},this.geometryData=e}return u(t,[{key:"getId",value:function(){return this.geometryData&&this.geometryData.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getInternalAddress",value:function(){return this.address?this.address.properties&&this.address.properties.name:null}},{key:"getCenter",value:function(){return this.location.coordinates||[]}},{key:"getCoordinates",value:function(){return this.geometry.coordinates||[]}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getStyle",value:function(){return this.getMetaInformation_().getStyle(this)}},{key:"getIcon",value:function(){return this.properties.svg}},{key:"getLabelArea",value:function(){return this.labelArea||[]}},{key:"getLabelStyle",value:function(){return this.getMetaInformation_().getLabelStyle(this)||null}},{key:"getLevel",value:function(){return this.level}},{key:"getType",value:function(){return this.geometry.type}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"getBoundingBox",value:function(){var t=this.getType(),e=this.getCoordinates(),n=[];switch(t){case kt:n=[e,e];break;case At:case Et:n=e;break;case St:case Tt:n=e.reduce((function(t,e){return t.concat(e)}),[]);break;case Mt:n=e.reduce((function(t,e){return t.concat(e)}),[]).reduce((function(t,e){return t.concat(e)}),[])}return oe.getBoundingBoxVertices(n)}},{key:"isIcon",value:function(){return!!this.properties.icon}},{key:"isPointInsideGeometry",value:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=!1;switch(this.getType()){case kt:e=this.getLabelArea()&&oe.getRectangularCoordinatesOfLabelArea(this.getLabelArea()),r=oe.isPointInPolygon(t,e);break;case At:break;case Et:r=n&&ue.isPointOnGeoJSONLineString(t,this.getCoordinates());break;case St:r=n&&ue.isPointOnGeoJSONMultiLineString(t,this.getCoordinates());break;case Tt:r=ue.isPointInsideGeoJSONPolygon(t,this.getCoordinates());break;case Mt:r=ue.isPointInsideGeoJSONMultiPolygon(t,this.getCoordinates())}return r}},{key:"highlight",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=1<arguments.length?arguments[1]:void 0;this.state_.isHighlighted=t,this.state_.highlightedStyle=t?e:{}}},{key:"isHighlighted",value:function(){return Boolean(this.state_.isHighlighted)}},{key:"getHighlightedStyle",value:function(){return this.state_.highlightedStyle||{}}},{key:"toJSON",value:function(){return r({},this.geometry)}},{key:"getMetaInformation_",value:function(){return this.getLevel()?this.getLevel().getDrawing().getVenueModel().metaInformation_:null}}]),t}(),he=function(){function t(e,n){var r=this;s(this,t),this.id=e&&e.id,this.properties=e&&e.properties,this.zIndexCount=0,this.geometries=e&&e.features&&Object.values(e.features).reduce((function(t,e){return t[[e.id]]=new ce(e,r,e.properties.drawOrder),t}),{}),this.drawing=n,this.levelData=e}return u(t,[{key:"getId",value:function(){return this.levelData&&this.levelData.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getName",value:function(){return this.properties&&this.properties.name||""}},{key:"getDisplayName",value:function(){return this.properties&&this.properties.display_name||""}},{key:"getDrawing",value:function(){return this.drawing}},{key:"getShortName",value:function(){return this.properties&&this.properties["short name"]||""}},{key:"getZIndex",value:function(){return this.properties&&this.properties.zLevel}},{key:"getFeatureCollectionArray",value:function(){return this.getGeometries().map((function(t){return t.toJSON()}))}},{key:"getGeometryById",value:function(t){return this.geometries[t]}},{key:"getGeometries",value:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]?this.geometries&&Object.values(this.geometries).sort((function(t,e){return e.getZIndex()-t.getZIndex()})):this.geometries&&Object.values(this.geometries).sort((function(t,e){return t.getZIndex()-e.getZIndex()}))}},{key:"getGeometriesByAddress",value:function(t){return Object.values(this.geometries).filter((function(e){return e.address&&e.address.properties&&e.address.properties.name&&e.address.properties.name===t}))}},{key:"isMain",value:function(){return Boolean(this.properties.isMain)}}]),t}(),pe=function(){function t(e){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],o=3<arguments.length?arguments[3]:void 0;s(this,t),this.venueModel=o,this.levels=i.map((function(t){return new he(t,n)})),this.structure=e,this.id=e&&e.id,this.properties=r}return u(t,[{key:"getId",value:function(){return this.structure&&this.structure&&this.structure.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"isRoot",value:function(){return Boolean(this.properties.is_root)}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getBoundingBox",value:function(){if(this.structure&&this.structure.geometry){var t=(e=b(oe.getBoundingBox(this.structure.geometry.type,this.structure.geometry.coordinates),2))[0],e=e[1];if(t)return[e[1],t[0],t[1],e[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.structure&&this.structure.location&&this.structure.location.coordinates}},{key:"getGeometryById",value:function(t){return this.getGeometries().find((function(e){return e.getId()===t||e.getIdentifier()===t}))}},{key:"getGeometries",value:function(){return this.levels.flatMap((function(t){return t.getGeometries()}))}},{key:"getLevelById",value:function(t){return this.levels.find((function(e){return e.getId()===t||e.getIdentifier()===t}))}},{key:"getLevelByZIndex",value:function(t){return this.levels.find((function(e){return e.getZIndex()===t}))}},{key:"getLevels",value:function(){return this.levels}},{key:"getMainLevel",value:function(){return this.levels.find((function(t){return t.isMain()}))}},{key:"getVenueModel",value:function(){return this.venueModel}}]),t}(),fe=It.STANDARD,de=function(){function t(e){var n=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new ne;s(this,t),this.metaInformation_=i,this.momStructure=e,this.id=e&&e.site&&e.site.id,this.location=e&&e.site&&e.site.location||{},this.properties=e&&e.site&&r({},e.site.properties),this.drawings=e&&e.structure&&Object.values(e.structure).map((function(t){var r=e.getStructureWiseGeometry(t.id);return new pe(t,t.properties,Object.values(r),n)}))}return u(t,[{key:"getDisplaySettings",value:function(){return(this.metaInformation_.releaseSettings_?this.metaInformation_.releaseSettings_.displayOptions:"").display||fe}},{key:"getId",value:function(){return this.momStructure&&this.momStructure.site&&this.momStructure.site.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getName",value:function(){return this.properties.name}},{key:"getBoundingBox",value:function(){if(this.momStructure){var t=(e=b(oe.getBoundingBox(this.momStructure.site.geometry.type,this.momStructure.site.geometry.coordinates),2))[0],e=e[1];if(t)return[e[1],t[0],t[1],e[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.location.coordinates}},{key:"getGeometryById",value:function(t){return this.getGeometries().find((function(e){return e.getId()===t||e.getIdentifier()===t}))}},{key:"getGeometries",value:function(){return this.getLevels().sort((function(t,e){return t.getZIndex()-e.getZIndex()})).flatMap((function(t){return t.getGeometries()}))}},{key:"getGeometriesByLonLat",value:function(t){var e,n=this,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return 0===(e=(e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]).map((function(t){return n.getLevelById(t)}))).length&&(e=this.drawings.filter((function(e){return e=e.getBoundingBox(),oe.isPointInBoundingBox(t,e)})).flatMap((function(t){return t.getLevels()}))),ue.getGeometriesByLonLat(t,e.flatMap((function(t){return t.getGeometries(!0)})),r)}},{key:"getDrawingById",value:function(t){return this.drawings.find((function(e){return e.getId()===t||e.getIdentifier()===t}))}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getRootDrawing",value:function(){return this.drawings.find((function(t){return t.isRoot()}))}},{key:"getLevelById",value:function(t){return this.getLevels().find((function(e){return e.getId()===t||e.getIdentifier()===t}))}},{key:"getLevelsByZIndex",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this.getLevels().filter((function(e){return Number(e.getZIndex())===Number(t)}))}},{key:"getLevels",value:function(){return this.drawings.flatMap((function(t){return t.getLevels()}))}},{key:"getMomStructure",value:function(){return this.momStructure}},{key:"getLevelMapFlattenedByZIndex_",value:function(){return this.getLevels().reduce((function(t,e){var n=e.getZIndex();return t[n]||(t[n]=[]),t[n].push(e),t}),{})}},{key:"getOccupant",value:function(){var t=this.momStructure.occupant;return Object.values(t)}}]),t}(),ye=function(){function t(e){s(this,t),this.theme=e&&e.theme,this.level=e&&e.level,this.site=e&&e.site,this.spaces=e&&e.spaces,this.address=e&&e.address,this.levelConnector=e&&e.levelConnector,this.topology=e&&e.topology,this.entrance=e&&e.entrance,this.occupant=e&&e.occupant,this.structure=e&&e.structure,this.spaceGroups=e&&e.spaceGroups,this.levelWiseGeometry={},this.levelStructureMapping=e&&e.levelStructureMapping,this.outdoorLevelMapping=e&&e.outdoorLevelMapping||{},this.labelTextPreference=e&&e.labelTextPreference||null}return u(t,[{key:"setSpaceWithLevel",value:function(){var t=this;this.spaces&&Object.values(this.spaces).forEach((function(e){var n="",i=(n=((i=(e.addressId&&(n=t.address&&t.address[e.addressId]&&t.address[e.addressId].properties.addressName),e.properties)).addressName=n,t.getLabelAsPerPreference(r(r({},e),{},{properties:i}))),(n=((i=e.properties).name=n,i.display_name=n,e.properties.icon&&(i.name=e.id,i.display_name=e.id),e)).properties=i,n.address=t.address[e.addressId],(t.spaces[e.id]=e).levelId);t.outdoorLevelMapping[i]&&(i=t.outdoorLevelMapping[i]),t.levelWiseGeometry[i]||(t.levelWiseGeometry[i]={}),t.levelWiseGeometry[i][n.id]=n}))}},{key:"setOccupantWithLevel",value:function(){var t=this;this.occupant&&Object.values(this.occupant).forEach((function(e){var n,r;e.spaceIds&&e.properties.occupantName&&(n=[],r=[],e.spaceIds.forEach((function(i){function o(i){var o=!1,a=(o=(t.labelTextPreference&&t.labelTextPreference.length&&(o=-1!==t.labelTextPreference.indexOf("OCCUPANT_NAMES")),null===t.labelTextPreference||o),i),s=i.properties;s.name=i.properties.icon||!o?i.properties.name:e.properties.occupantName,s.display_name=i.properties.icon||!o?i.properties.display_name:e.properties.occupantName,s.address=i.address,s.occupantName=e.properties.occupantName,o=i.levelId;t.outdoorLevelMapping[o]&&(o=t.outdoorLevelMapping[o]),t.levelWiseGeometry[o]||(t.levelWiseGeometry[o]={}),t.levelWiseGeometry[o][i.id]=a,n.push(a),r.push(i.id)}var a=i.id,s=(a=t.spaces[a],null);t.spaceGroups&&Object.values(t.spaceGroups).forEach((function(t){t.properties.spaceGroups&&t.properties.spaceGroups&&t.properties.spaceGroups.forEach((function(t){t.mainSpace&&t.mainSpace.id===i.id&&(s=t.spaces.map((function(t){return t.id})))}))})),s&&0<s.length&&s.forEach((function(e){o(t.spaces[e])})),a&&o(a)})),t.occupant[e.id]=e,t.occupant[e.id].space=n,t.occupant[e.id].spaceIds=r)}))}},{key:"setEntrance",value:function(){var t=this;this.entrance&&Object.values(this.entrance).forEach((function(e){var n=e.properties.level.id;t.levelWiseGeometry[n]||(t.levelWiseGeometry[e.properties.level.id]={}),t.outdoorLevelMapping[n]&&(n=t.outdoorLevelMapping[n]),t.levelWiseGeometry[n][e.id]=e}))}},{key:"setLevelWiseGeometry",value:function(){var t=this;this.level&&Object.keys(this.level).forEach((function(e){t.levelWiseGeometry[e]={}})),this.setSpaceWithLevel(),this.setOccupantWithLevel(),this.setEntrance()}},{key:"getStructureWiseGeometry",value:function(t){for(var e={},n=0,r=Object.entries(this.levelWiseGeometry);n<r.length;n++){var i=(o=b(r[n],2))[0],o=o[1];t===this.levelStructureMapping[i]&&(e[i]=this.level[i],e[i].features=o)}return e}},{key:"getLabelAsPerPreference",value:function(t){var e=(t=t.properties).spaceType,n=t.occupantName,r=t.spaceName,i=t.addressName,o=(t=t.spaceCategory,c(s={},"OCCUPANT_NAMES",n),c(s,"SPACE_NAME",r),c(s,wt,e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""),c(s,xt,t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():""),c(s,"INTERNAL_ADDRESS_SHORT",i),c(s,"INTERNAL_ADDRESS",i),c(s,"INTERNAL_ADDRESS_LONG",i),s),a=(n=this.theme.spaceRules,"");if("NONE"===(r=t&&e&&n[t]&&n[t].spaceTypes&&n[t].spaceTypes[e].behavioralAppearance.default.labelType)){if(!this.labelTextPreference)return"";o[wt]=""}if(("NONE"===(i=t&&e&&n[t]&&n[t].properties&&n[t].properties.behavioralAppearance&&n[t].properties.behavioralAppearance.default&&n[t].properties.behavioralAppearance.default.labelType)||void 0===i)&&void 0===r){if(!this.labelTextPreference)return"";o[wt]="",o[xt]=""}var s=t&&e&&n[t]&&n[t].properties&&n[t].properties.behavioralAppearance&&n[t].properties.behavioralAppearance.default&&n[t].properties.behavioralAppearance.default.labelTextPreference,l=s&&this.labelTextPreference?this.labelTextPreference:s;if(l)for(var u=0;u<l.length;u++)if(o[l[u]]){a=o[l[u]];break}return a}}]),t}(),ge=function(){function t(e){var n=e.apiKey,r=e.baseUrl,i=e.token;e=e.hrn;s(this,t),this.hostOptions_={apiKey:n,url:r,token:i,hrn:e},this.momData=[],this.theme={},this.loadOptions={}}var e,n;return u(t,[{key:"setHostOptions",value:function(t){0!==Object.keys(t).length&&(this.hostOptions_=r(r({},this.hostOptions_),t))}},{key:"getToken",value:function(){return this.hostOptions_.token}},{key:"getHrn",value:function(){return this.hostOptions_.hrn}},{key:"load",value:function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.loadOptions=r(r(r({},Nt),n),{},{venueId:t}),this.hostOptions_.mapData=n.mapData,this.hostOptions_.themeRule=n.themeRule,this.hostOptions_.svgList=n.svgList,this.hostOptions_.labelTextPreference=n.labelTextPreferenceOverride,this.getHrn()?this.getVenueModalInstance():this.getToken()?this.getDefaultCollectionWithToken().then((function(){return e.getVenueModalInstance()})).catch((function(){return Promise.reject(new Error("Unable to find indoor map collection. Please contact your administrator"))})):Promise.reject(new Error("In order to load indoor map, Please provide either hrn or token"))}},{key:"getVenueModalInstance",value:function(){var t=this;return Promise.resolve().then((function(){return t.loadOptions.isMetaEnabled?t.getMeta_(t.loadOptions.isIconsEnabled).catch((function(t){return console.warn(t),Promise.resolve()})):Promise.reject()})).then((function(e){return t.getVenue_(e)})).then((function(t){return t})).catch((function(t){console.debug("Captured event VENUE_ERROR_STATE",t)}))}},{key:"createMomStructure",value:function(){var t=this,e={site:{},structure:{},level:{},levelConnector:{},occupant:{},spaces:{},spaceGroups:{},topology:{},address:{},outdoorLevelMapping:{},entrance:{},levelStructureMapping:{}};return this.momData.forEach((function(n){var r="indoormap-00000000-0000-4000-a000-".concat(t.loadOptions.venueId.toString().padStart(12,"0")),i=n.id;n.momType!==mt&&!t.hostOptions_.mapData&&n.properties.indoorMapId!=t.loadOptions.venueId&&n.properties.indoorMapId!==r||(n.momType===yt?e.site=se.setSite(n,t.loadOptions.venueId):"indoor.Structure"===n.momType?e.structure[i]=se.setStructure(n):n.momType!==bt||n.properties.isOutdoor&&(!n.properties.isOutdoor||n.properties.parentIndoorLevel)?n.momType===bt&&n.properties.isOutdoor&&n.properties.parentIndoorLevel?e.outdoorLevelMapping[n.id]=n.properties.parentIndoorLevel.id:n.momType===_t?e.entrance[i]=se.setEntrance(n):n.momType===gt?e.occupant[i]=se.setOccupant(n):n.momType===vt?e.spaces[i]=se.setSpace(n):"indoor.SpaceGroups"===n.momType?e.spaceGroups[i]=se.setSpaceGroups(n):n.momType===mt&&(e.address[i]=se.setAddress(n)):(e.level[i]=se.setLevel(n),e.levelStructureMapping[i]=n.properties.structure.id))})),e.theme=this.theme,e.labelTextPreference=this.hostOptions_.labelTextPreference,new ye(e)}},{key:"getVenue_",value:function(t){this.momData=t.getMomData();var e=this.createMomStructure();return e.setLevelWiseGeometry(),new de(e,t)}},{key:"setConfigData",value:function(t){var e=t.themeRule,n=t.svgList;t=t.defaultLang;ae.setSpaceRules(e.spaceRules),se.svgList=n,se.themeRule=e,se.defaultLang=t,this.theme=e}},{key:"getMeta_",value:function(){var t=this,e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],n=new ne,r=this.hostOptions_.mapData?{}:this.getMetaConfig_(this.loadOptions.venueId,dt.SITE),i=this.hostOptions_.themeRule||this.getMetaConfig_(this.loadOptions.venueId,dt.Theme),o=[];return e&&(o=this.hostOptions_.svgList||this.getMetaConfig_(this.loadOptions.venueId,dt.IMAGES)),new Promise((function(a){Promise.all([r,i,o]).then((function(r){var i=(r=b(r,3))[0],o=r[1],s=r[2],l=t.hostOptions_.mapData?{mom:new Promise((function(e){return e(t.hostOptions_.mapData)})),site:t.hostOptions_.mapData.features.find((function(t){return t.momType===yt}))}:le.getMomData(i,t.hostOptions_);l.mom.then((function(r){var i=o.properties;n.imageCache=e?se.manageSvgDimensions(s.properties):[],t.setConfigData({themeRule:i,svgList:n.imageCache,defaultLang:l&&l.site&&l.site.properties.defaultLanguageCode}),n.releaseSettings_={displayOptions:{display:i.entranceRules.default.displayName||It.STANDARD},mom:r.features},n.theme=new ee(i,n),a(n)}))}))}))}},{key:"getMetaConfig_",value:function(t,e){return le.getConfigUrl(t,e,this.hostOptions_)}},{key:"fetchCollections",value:function(){return le.getDefaultCollection(this.hostOptions_)}},{key:"fetchUserProjects",value:function(){return le.getProjectAccountDetails(this.hostOptions_)}},{key:"getDefaultCollectionWithToken",value:(e=i().mark((function t(){var e=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all([this.fetchCollections(),this.fetchUserProjects()]).then((function(t){var n=(t=b(t,2))[0];t=t[1];return(n=e.getHrnFromDefaultCollection(n,t)).hrn?(t={hrn:n.hrn},e.setHostOptions(t),Promise.resolve()):Promise.reject()})).catch((function(t){return Promise.reject(t)})));case 1:case"end":return t.stop()}}),t,this)})),n=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(t){a(o,r,i,s,l,"next",t)}function l(t){a(o,r,i,s,l,"throw",t)}s(void 0)}))},function(){return n.apply(this,arguments)})},{key:"getHrnFromDefaultCollection",value:function(t,e){var n;t=t.results.items;return Array.isArray(t)&&t.length?(n=this.getProjectRealm(e),t.find((function(t){return t.hrn.includes(n)}))):Promise.reject(new Error("Error while accessing default collection"))}},{key:"getProjectRealm",value:function(t){return Array.isArray(t.items)&&t.items.length&&t.items[0].id.includes("indoor-")?(t=t.items[0].hrn,this.getRealmNameFromHrn(t)):""}},{key:"getRealmNameFromHrn",value:function(t){return t?(t=t.split(":")).length&&t[4]:""}},{key:"getSupportedMapList",value:function(){var t=this,e=(n=this.hostOptions_).hrn,n=n.token;return e?this.fetchMapInfoList():n?this.getDefaultCollectionWithToken().then((function(){return t.fetchMapInfoList()})).catch((function(){return Promise.reject(new Error("Unable to find indoor map collection. Please contact your administrator"))})):Promise.reject(new Error("In order to load map list, Please provide either hrn or token"))}},{key:"fetchMapInfoList",value:function(){var t=this;return le.fetchIndoorMapList(this.hostOptions_).then((function(e){return 0<(e=e.features).length?e.map((function(e){var n=(e=e.properties).placeProperties,r=(r=(e=e.indoorMapId).split("-").pop()).substring(r.length-5);return{mapIdentifier:e,mapName:t.getMapName(n.names).name,mapId:r}})):[]})).catch((function(t){Promise.reject(new Error("".concat(t,": Error while fetching map list")))}))}},{key:"getMapName",value:function(t){return Array.isArray(t)&&0<t.length?t.find((function(t){return"OFFICIAL"===t.nameType})):{}}}]),t}(),ve=["origin","destination"],me=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(s(this,t),!e.apiKey&&!e.token)throw new Error("API key or Token is missing");this.config_=r({baseUrl:"https://meta-indoor-routing.api-gateway.ls.hereapi.com"},e)}return u(t,[{key:"calculateRoute",value:function(t){var e=void 0===(e=t.origin)?{}:e,n=void 0===(n=t.destination)?{}:n;t=function(t,e){if(null==t)return{};var n,r=function(t,e){if(null==t)return{};for(var n,r={},i=Object.keys(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n]);return r}(t,ve);if(!e.coordinates||!n.coordinates)throw new Error("Waypoint coordinates are missing");function r(t){var e=t.coordinates,n=t.venueId;t=t.levelId,e=e.join(",");return n&&t?e.concat(";indoorMapId=",n,";levelId=",t):e}var i=new URL("".concat(this.config_.baseUrl,"/v1/routes")),a=new URLSearchParams({origin:r(e),destination:r(n),apiKey:this.config_.apiKey});return Object.entries(t).forEach((function(t){var e=(t=b(t,2))[0];t=t[1];a.append(e,"object"===o(t)?JSON.stringify(t):t)})),i.search=a,fetch(i,{headers:{"X-Api-Key":this.config_.apiKey}}).then((function(t){return t.json()}))}}]),t}(),be={VENUE_DATA_LOADED:"VENUE_DATA_LOADED",VENUE_THEME_LOADED:"VENUE_THEME_LOADED",VENUE_ICONS_LOADED:"VENUE_ICONS_LOADED",VENUE_MOM_DATA_LOADED:"VENUE_MOM_DATA_LOADED",VENUE_ERROR_STATE:"VENUE_ERROR_STATE",VENUE_MAP_DATA_LOADED:"VENUE_MAP_DATA_LOADED",VENUE_ENTITY_DATA_LOADED:"VENUE_ENTITY_DATA_LOADED",VENUE_DATA_MODEL_LOADED:"VENUE_DATA_MODEL_LOADED",VENUE_NAV_DATA_LOADED:"VENUE_NAV_DATA_LOADED",META_DATA_LOADED:"META_DATA_LOADED",META_DATA_MODEL_LOADED:"META_DATA_MODEL_LOADED",META_DATA_MODEL_UPDATED:"META_DATA_MODEL_UPDATED"},_e=((Pe=(Object.freeze((c(Lt={},be.VENUE_DATA_LOADED,{description:"event fired when all requested files along with metadata & overrides are loaded",emitTemplate:{}}),c(Lt,be.VENUE_MAP_DATA_LOADED,{description:"event fired when requested levels, drawings & community files are loaded",emitTemplate:{}}),c(Lt,be.VENUE_ENTITY_DATA_LOADED,{description:"event fired when requested entity data is loaded",emitTemplate:{}}),c(Lt,be.VENUE_DATA_MODEL_LOADED,{description:"event fired when a map file is loaded",emitTemplate:{}}),c(Lt,be.VENUE_NAV_DATA_LOADED,{description:"event fired when requested navigation product is loaded",emitTemplate:{}}),c(Lt,be.META_DATA_LOADED,{description:"event fired when all requested meta files are loaded except icon & marker",emitTemplate:{}}),c(Lt,be.META_DATA_MODEL_LOADED,{description:"event fired when a specific model is loaded except icon & marker",emitTemplate:{}}),c(Lt,be.META_DATA_MODEL_UPDATED,{description:"event fired when a specific meta override is added or removed",emitTemplate:{}}),c(Lt,be.VENUE_ICONS_LOADED,{description:"event fired when all icons of venue are loaded",emitTemplate:{}}),Lt)),new zt)).EVENT_NAME=be,Pe.on("newListener",(function(t){be[t]||console.warn("subscribing for un-registered/documented event")})),function(){h(e,H.map.Feature);var t=v(e);function e(n){var r;if(s(this,e),r=t.call(this),n instanceof de)return r.venueModel=n,r.search_=new ft(n),r.status_={activeDrawingId:n.getRootDrawing().getIdentifier(),activeLevelIndex:n.getRootDrawing().getMainLevel().getZIndex()},r.mapObjectStore_=r.getDefaultMapObjectsStore_(),r.drawings=n.getDrawings().map((function(t){return(t=new E(t)).setParentEventTarget(g(r)),t})),r.levels=n.getLevels().map((function(t){var e=new T(t);return e.setParentEventTarget(r.drawings.find((function(t){return t.getIdentifier()===e.getData().getDrawing().getIdentifier()}))),e})),r.geometries=n.getGeometries().map((function(t){var e=new k(t);return e.setParentEventTarget(r.levels.find((function(t){return t.getIdentifier()===e.getData().getLevel().getIdentifier()}))),e})),r.mutualExclusiveHighlight_=!1,r;throw new Error("It is mandatory to provide valid instance of venueModel")}return u(e,[{key:"getData",value:function(){return this.venueModel}},{key:"getBoundingBox",value:function(){return y(H.geo.Rect,_(this.venueModel.getBoundingBox()))}},{key:"getCenter",value:function(){var t=(e=b(this.venueModel.getCenter(),2))[0],e=e[1];return new H.geo.Point(e,t)}},{key:"getId",value:function(){return this.venueModel.getId()}},{key:"getIdentifier",value:function(){return this.venueModel.getIdentifier()}},{key:"getName",value:function(){return this.venueModel.getName()}},{key:"getDrawing",value:function(t){return this.drawings.find((function(e){return e.getIdentifier()===t}))}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getLevel",value:function(t){return this.levels.find((function(e){return e.getIdentifier()===t}))}},{key:"getLevels",value:function(){return this.levels}},{key:"getGeometry",value:function(t){return this.getGeometries().find((function(e){return e.getIdentifier()===t}))}},{key:"getGeometries",value:function(){return this.geometries}},{key:"getActiveLevels",value:function(){var t=this;return this.getData().getDisplaySettings()===It.FLATTEN?this.venueModel.getLevelsByZIndex(this.status_.activeLevelIndex).map((function(e){return t.getLevel(e.getIdentifier())})):[this.venueModel.getDrawingById(this.status_.activeDrawingId).getLevelByZIndex(this.status_.activeLevelIndex)].map((function(e){return t.getLevel(e.getIdentifier())}))}},{key:"getActiveDrawing",value:function(){return this.getDrawing(this.status_.activeDrawingId)}},{key:"setActiveDrawing",value:function(t){if(this.status_.activeDrawingId!==t){var n=this.venueModel.getDrawingById(t);if(!n)throw new Error("Drawing ".concat(t," was not found"));var r=this.status_.activeDrawingId;this.status_.activeDrawingId=n.id,this.setActiveLevelIndex(n.getMainLevel().getZIndex()),this.dispatchEvent(new H.util.ChangeEvent(e.EVENTS.DRAWING_CHANGE,t,r))}}},{key:"getActiveLevelIndex",value:function(){return this.status_.activeLevelIndex}},{key:"setActiveLevelIndex",value:function(t){var n;this.venueModel.getLevelsByZIndex(t)&&(n=this.status_.activeLevelIndex,this.status_.activeLevelIndex=t,this.dispatchEvent(new H.util.ChangeEvent(e.EVENTS.LEVEL_CHANGE,t,n)))}},{key:"isActive",value:function(){var t=this.getParentEventTarget();return!!t&&this===t.activeVenue}},{key:"getHighlightedGeometries",value:function(){var t=this;return this.venueModel.getGeometries().filter((function(t){return t.isHighlighted()})).map((function(e){return t.getGeometry(e.getIdentifier())}))}},{key:"setHighlightedGeometries",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=(i=r(r({},et),i)).fillColor,s=i.outlineColor,l=i.outlineWidth;this.mutualExclusiveHighlight_=!!o,this.mutualExclusiveHighlight_&&this.getHighlightedGeometries().forEach((function(t){t.getData().highlight(!1)})),n.forEach((function(e){e.getData().highlight(t,{m:a,o:s,w:l})})),this.dispatchEvent(e.EVENTS.GEOMETRY_HIGHLIGHT)}},{key:"getMapObjects",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.getActiveLevelIndex(),e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getActiveDrawing();return this.mapObjectStore_[t][e.getIdentifier()]}},{key:"setMapObjects",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getActiveLevelIndex(),n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.getActiveDrawing();this.mapObjectStore_[e]&&this.mapObjectStore_[e][n.getIdentifier()]&&(this.mapObjectStore_[e][n.getIdentifier()]=_(t)),this.updateMapObjectsVisibility_()}},{key:"search",value:function(){var t=this;return this.search_.find(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").flatMap((function(e){return e.geometries.map((function(e){return t.getGeometry(e.id)}))}))}},{key:"updateMapObjectsVisibility_",value:function(){Object.values(this.mapObjectStore_).forEach((function(t){Object.values(t).forEach((function(t){return t.forEach((function(t){return t.setVisibility(!1)}))}))})),this.isActive()&&this.mapObjectStore_[this.getActiveLevelIndex()][this.getActiveDrawing().getIdentifier()].forEach((function(t){return t.setVisibility(!0)}))}},{key:"getDefaultMapObjectsStore_",value:function(){var t=this,e=this.getData().getDisplaySettings()===It.FLATTEN;return this.venueModel.getLevels().reduce((function(n,i){var o=i.getZIndex();return(n=r({},n))[o]||(n[o]={}),n[o][i.getDrawing().getIdentifier()]=[],e&&(n[o][t.venueModel.getRootDrawing().getIdentifier()]=[]),n}),{})}}]),e}()),we=(_e.EVENTS={ACTIVE_VENUE_CHANGE:"activevenuechange",DRAWING_CHANGE:"drawingchange",LEVEL_CHANGE:"levelchange",GEOMETRY_HIGHLIGHT:"geometryhighlight"},function(){function t(){s(this,t)}return u(t,null,[{key:"getIconLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap((function(t){return t.getData().getGeometries()})).filter((function(t){return t.isIcon()&&t.getIcon()})).map((function(t){var e=(n=b(t.getLabelArea(),2))[0],n=n[1],r=t.getLevel(),i=t.getIcon(),o=t.properties.spaceType||t.properties.spaceCategory||t.getDisplayName();return{type:"Feature",properties:{id:t.getIdentifier(),geometryId:t.getIdentifier(),levelId:r.getIdentifier(),name:o,venueId:r.getDrawing().getVenueModel().getIdentifier(),url:i?"data:image/svg+xml;utf8,".concat(encodeURIComponent(i)):""},geometry:{type:$.POINT,coordinates:[e,n]}}}))}}},{key:"getLabelLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap((function(t){return t.getData().getGeometries()})).filter((function(t){return t.getDisplayName()&&!t.isIcon()})).map((function(t){var e=(n=b(t.getLabelArea(),2))[0],n=n[1],r=(i=t.getLabelStyle()).fill,i=i.zmin,o=t.getLevel();return{type:"Feature",properties:{id:t.getIdentifier(),geometryId:t.getIdentifier(),levelId:o.getIdentifier(),venueId:o.getDrawing().getVenueModel().getIdentifier(),name:t.getDisplayName(),minZoom:i||15,textFillColor:r.toLowerCase()},geometry:{type:$.POINT,coordinates:[e,n]}}}))}}},{key:"getGeometryLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap((function(t){return t.getData().getGeometries()})).filter((function(t){return t.getType()!==$.POINT})).map((function(t){var e=(i=t.getHighlightedStyle()||{}).m,n=i.o,i=i.w,o=(s=r({},t.getStyle())).m,a=s.o,s=s.w,l=(c=Q).fillColor,u=c.outlineColor,c=c.outlineWidth,h=t.getLevel();return{type:"Feature",properties:{id:t.getIdentifier(),fillColor:(e||o||l).toLowerCase(),geometryId:t.getIdentifier(),levelId:h.getIdentifier(),venueId:h.getDrawing().getVenueModel().getIdentifier(),outlineColor:(n||a||u).toLowerCase(),outlineWidth:Number(((i||s||c)/3).toFixed(2)),zIndex:t.getZIndex()},geometry:{type:t.getType(),coordinates:t.getCoordinates()}}}))}}},{key:"getFootprintLayer",value:function(t){return{type:"FeatureCollection",features:t.flatMap((function(t){var e=t.getData().getRootDrawing().getMainLevel().getIdentifier(),n=t.getLevel(e).getData().getGeometries().filter((function(t){return t.getType()===$.POLYGON}));return[{type:"Feature",properties:{isFootprint:!0,levelId:e,venueId:t.getIdentifier(),zIndex:1},geometry:{type:"MultiPolygon",coordinates:n.map((function(t){return t.getCoordinates()}))}},{type:"Feature",properties:{isFootprint:!0,levelId:e,venueId:t.getIdentifier(),zIndex:2,venueName:t.getName()},geometry:{type:"Point",coordinates:t.getCenter().toGeoJSON().coordinates.slice(0,2)}}]}))}}}]),t}()),xe=function(){function t(){s(this,t)}return u(t,null,[{key:"getStyle",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n={styles:[{layer:it.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#613F8E",lineWidth:"2px",renderOrder:1},{layer:it.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#AF91B4",renderOrder:2},{layer:it.FOOTPRINT,when:["==",["geometry-type"],"Point"],technique:"text",color:"black",size:16,text:["get","venueName"],priority:61},{layer:it.VECTOR,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:["get","fillColor"],renderOrder:["get","zIndex"]},{layer:it.VECTOR,technique:"solid-line",color:["get","outlineColor"],lineWidth:["get","outlineWidth"],renderOrder:["get","zIndex"]},{layer:it.TEXT,minZoomLevel:["get","minZoom"],technique:"text",color:["get","textFillColor"],size:tt.size,text:["get","name"],priority:60},{layer:it.ICON,minZoomLevel:nt,when:["==",["geometry-type"],"Point"],technique:"labeled-icon",textIsOptional:!0,size:0,imageTexture:["concat","texture",["get","name"]],screenWidth:["interpolate",["linear"],["zoom"],15,3,21,70],screenHeight:["interpolate",["linear"],["zoom"],15,3,21,70],priority:61}],images:{},imageTextures:[]};return t.forEach((function(t){var e="texture"+t.properties.name;n.images[e]||(n.images[e]={url:t.properties.url,preload:!0},n.imageTextures.push({name:e,image:e}))})),e.forEach((function(t){var e,r=(o=t.getData().getHighlightedStyle()).m,i=o.o,o=o.w;(e=n.styles).push.apply(e,[{layer:it.VECTOR,when:["==",["get","id"],t.id],technique:"fill",color:r,renderOrder:["get","zIndex"]},{layer:it.VECTOR,when:["==",["get","id"],t.id],technique:"solid-line",color:i,lineWidth:o,renderOrder:["get","zIndex"]}])})),new H.map.render.harp.Style(n)}}]),t}(),ke=function(){function t(){s(this,t)}return u(t,null,[{key:"getIconsTextures",value:function(){var t={},e={},n=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,e){var n=e.properties.name;return t[n]||(t[n]=[]),t[n].push(e),t}),{});return Object.keys(n).forEach((function(r){var i="texture".concat(r),o="sprite".concat(r),a=n[r][0].properties.url;t[i]={url:a,sprites:c({},o,[0,0,50,50])},n[r].forEach((function(t){t=t.properties,e["icon".concat(t.name)]={filter:{name:t.name,$zoom:{min:nt}},draw:{points:{interactive:!0,priority:1,size:[[15,"50%"],[16,"55%"],[17,"60%"],[18,"65%"],[19,"75%"],[20,"80%"],[21,"100%"]],texture:i,sprite:o}}}}))})),{textures:t,iconLayers:e}}},{key:"getFootprintLayer",value:function(){return{data:{source:"venues",layer:it.FOOTPRINT},draw:{polygons:{interactive:!0,color:"#AF91B4",order:2},lines:{color:"#613F8E",width:"2px",order:1},points:{color:"[0, 0, 0, 0]",size:"0px",order:3,priority:1,text:{anchor:"center",collide:!1,font:{fill:"black",size:"16px"},text_source:"function() { return feature.venueName }"}}}}}},{key:"getGeometryLayer",value:function(){var t,e,n,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i={};return r.length&&(t=(n=r[0].getData().getHighlightedStyle()).m,e=n.o,n=n.w,i={filter:{id:r.map((function(t){return t.id}))},draw:{polygons:{interactive:!0,color:t},lines:{color:e,width:n}}}),{data:{source:"venues",layer:it.VECTOR},draw:{polygons:{interactive:!0,color:"function() { return feature.fillColor }",order:"function() { return feature.zIndex }"},lines:{color:"function() { return feature.outlineColor }",order:"function() { return feature.zIndex }",width:"function() { return feature.outlineWidth }"}},highlighted:i}}},{key:"getTextLayer",value:function(){return{filter:{$zoom:{min:18}},data:{source:"venues",layer:it.TEXT},draw:{points:{filter:"function() { return $zoom > feature.minZoom }",color:"[0, 0, 0, 0]",size:"0px",offset:["0px","-10px"],priority:2,text:{font:{fill:"function() { return feature.textFillColor }",size:tt.size},text_source:"function() { return feature.name }"}}}}}},{key:"getIconLayer",value:function(t){return r({data:{source:"venues",layer:it.ICON}},t)}},{key:"getStyle",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=(e=t.getIconsTextures(e)).textures;e=e.iconLayers,n={venue_footprints:t.getFootprintLayer(),venue_geometries:t.getGeometryLayer(n),venue_labels:t.getTextLayer(),venue_icons:t.getIconLayer(e)},e=H.gl.yaml.safeDump({sources:{venues:{max_zoom:rt,type:"GeoJSONTileSource"}},layers:n,textures:r});return new H.map.render.webgl.Style(e)}}]),t}(),Ee={type:"FeatureCollection",features:[]},Te={extent:4096,indexMaxZoom:0,maxZoom:24,tolerance:3},Ae=(Lt=function(){h(e,H.map.provider.RemoteTileProvider);var t=v(e);function e(n){return s(this,e),(n=t.call(this,n)).venues=[],n.activeVenue=null,n.dataLayers_={},n.tileIndexes_={},n.addEventListener(_e.EVENTS.ACTIVE_VENUE_CHANGE,n.activeVenueChangeHandler_,void 0,g(n)),n}return u(e,[{key:"setStyle",value:function(t){return this.setStyleInternal(t)}},{key:"getStyle",value:function(){return this.getStyleInternal()}},{key:"isFeatureVisible_",value:function(t,e){var n=t.properties;return this.activeVenue&&n.venueId===this.activeVenue.getIdentifier()?e!==it.FOOTPRINT&&this.activeVenue.getActiveLevels().some((function(t){return t.id===n.levelId})):!0===n.isFootprint&&e===it.FOOTPRINT}},{key:"requestInternal",value:function(t,e,n,r){function i(r){for(var i=0;i<r.length;i+=1)r[i]=r[i].map((function(r){return J(r,n,t,e,Te.extent)}))}var o=this,a={};return Object.keys(this.tileIndexes_).forEach((function(r){var s=o.tileIndexes_[r].getTile(n,t,e);a[r]=s?function(t){var e=[],n=t&&t.features;if(n)for(var r=0,i=n.length;r<i;r+=1){var o=n[r],a=o.type,s=void 0,l=!1;switch(a){case at:s={type:$.MULTI_POINT,coordinates:o.geometry.map((function(t){return t.slice()}))};break;case st:case lt:s={type:$.MULTI_LINESTRING,coordinates:o.geometry.map((function(t){return t.map((function(t){return t.slice()}))}))},a===lt&&null==(s=function(t){for(var e,n=[],r=[],i=0,o=t.coordinates.length;i<o;i+=1){var a=t.coordinates[i],s=ut(a);null!==s&&(s===(e=e||s)&&r.length&&(n.push(r),r=[]),r.push(a))}return 0<r.length&&n.push(r),1===n.length?(t.type=$.POLYGON,t.coordinates=n[0]):1<n.length?(t.type=$.MULTI_POLYGON,t.coordinates=n):t=null,t}(s))&&(l=!0);break;default:l=!0}l||e.push({geometry:s,id:o.id,properties:o.tags,type:"Feature"})}return{type:"FeatureCollection",features:e}}(s):Ee,a[r].features=a[r].features.filter((function(t){return o.isFeatureVisible_(t,r)}));for(var l=0;l<a[r].features.length;l+=1){var u=a[r].features[l],c=u.geometry.type;if(c===$.POLYGON||c===$.MULTI_LINESTRING)i(u.geometry.coordinates);else if(c===$.MULTI_POLYGON)u.geometry.coordinates.map(i);else for(var h=u.geometry.coordinates,p=0;p<h.length;p+=1)h[p]=J(h[p],n,t,e,Te.extent)}})),r(a),{cancel:function(){}}}},{key:"getActiveVenue",value:function(){return this.activeVenue}},{key:"getVenue",value:function(t){return t?this.venues.find((function(e){return e.getIdentifier()===t})):this.activeVenue}},{key:"setActiveVenue",value:function(t){var e=this.activeVenue;this.activeVenue=t,this.dispatchEvent(new H.util.ChangeEvent(_e.EVENTS.ACTIVE_VENUE_CHANGE,t,e)),this.reload()}},{key:"addVenue",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!(t instanceof _e))throw new Error("Invalid argument");var n=t.getIdentifier();if(this.getVenue(n))throw new Error("Please invoke provider.removeVenue to remove old instance of venue ".concat(n," before adding new"));t.setParentEventTarget(this),this.venues.push(t),e||(this.reloadData_(),this.reloadStyle_())}},{key:"addVenues",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];0<e.length&&(e.forEach((function(e){e instanceof _e&&t.addVenue(e,!0)})),this.reloadData_(),this.reloadStyle_())}},{key:"removeVenue",value:function(t){var e;t instanceof _e&&-1<this.venues.indexOf(t)&&(e=t.getIdentifier(),this.activeVenue&&this.activeVenue.getIdentifier()===e&&this.setActiveVenue(null),this.venues.splice(this.venues.indexOf(t),1),this.reloadData_(),this.reloadStyle_(),this.reload())}},{key:"getFeatureProxy",value:function(t,e,n){var r=t.geometryId;t=t.venueId,t=this.getVenue(t);return r?n(t.getGeometries().find((function(t){return t.id===r}))):t&&n(t),!0}},{key:"addVenueEventListeners_",value:function(t){t&&(t.addEventListener(_e.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),t.addEventListener(_e.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),t.addEventListener(_e.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"removeVenueEventListeners_",value:function(t){t&&(t.removeEventListener(_e.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),t.removeEventListener(_e.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),t.removeEventListener(_e.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"activeVenueChangeHandler_",value:function(t){var e=t.oldValue;t=t.newValue;e&&(this.removeVenueEventListeners_(e),e.updateMapObjectsVisibility_()),t&&(this.addVenueEventListeners_(t),t.updateMapObjectsVisibility_())}},{key:"drawingChangeHandler_",value:function(){this.reload()}},{key:"levelChangeHandler_",value:function(){this.activeVenue&&(this.activeVenue.updateMapObjectsVisibility_(),this.reload())}},{key:"geometryHighlightHandler_",value:function(){this.reloadStyle_(this.activeVenue.getHighlightedGeometries())}},{key:"createDataLayers_",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(it),n=it.FOOTPRINT,r=it.ICON,i=it.TEXT,o=it.VECTOR;e.forEach((function(e){switch(e){case o:t.dataLayers_[o]=we.getGeometryLayer(t.venues);break;case n:t.dataLayers_[n]=we.getFootprintLayer(t.venues);break;case r:t.dataLayers_[r]=we.getIconLayer(t.venues);break;case i:t.dataLayers_[i]=we.getLabelLayer(t.venues);break;default:throw new Error("Unsupported Layer ".concat(e))}}))}},{key:"createTileIndexes_",value:function(){var t=this;(0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(it)).forEach((function(e){t.tileIndexes_[e]=new K(t.dataLayers_[e],Te)}))}},{key:"reloadData_",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(it);this.createDataLayers_(t),this.createTileIndexes_(t)}},{key:"reloadStyle_",value:function(t){var e=this.dataLayers_[it.ICON]?this.dataLayers_[it.ICON].features:[];this.getEngineType()===H.Map.EngineType.WEBGL?this.setStyle(ke.getStyle(e,t)):this.getEngineType()===H.Map.EngineType.HARP&&this.setStyle(xe.getStyle(e,t))}},{key:"providesGeoJSON",value:function(){return!0}}]),e}(),new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3})),Se=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),Me=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImIiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PG1hc2sgaWQ9ImMiIHdpZHRoPSIzOCIgaGVpZ2h0PSI0NiIgeD0iMCIgeT0iMCIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZWxsaXBzZSBjeD0iMjAiIGN5PSI0NS4xNiIgZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjOTc5Nzk3IiBzdHJva2Utd2lkdGg9Ii4yNSIgcng9IjMuNSIgcnk9IjMuNSIvPjx1c2UgZmlsbD0iIzAxQjZCMiIgeGxpbms6aHJlZj0iI2IiLz48cGF0aCBmaWxsPSIjMzIzMjMyIiBmaWxsLW9wYWNpdHk9Ii41IiBkPSJNMTEuODEgMzcuNjZoMTYuMzhsLTguMiA4eiIvPjx1c2Ugc3Ryb2tlPSIjNDE2QTg2IiBzdHJva2Utd2lkdGg9Ii41IiBtYXNrPSJ1cmwoI2MpIiB4bGluazpocmVmPSIjYSIvPjxlbGxpcHNlIGN4PSIxOS44MSIgY3k9IjE5LjE5IiBmaWxsPSIjRkZGIiByeD0iNC44MSIgcnk9IjQuODEiLz48L2c+PC9zdmc+"),Ie=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzMi44MyAzMy4xMDRjLjQwNy0uMzc0IDEuNDE5LTEuNDUyIDEuNDE5LTEuNDUyeiIvPjxtYXNrIGlkPSJjIiB3aWR0aD0iMzgiIGhlaWdodD0iNDYiIHg9IjAiIHk9IjAiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PGVsbGlwc2UgaWQ9ImIiIGN4PSIxOS44MDciIGN5PSIxOS4xNjgiIHJ4PSIxMi4zNjMiIHJ5PSIxMi4xOTciLz48bWFzayBpZD0iZCIgd2lkdGg9IjI1LjcyNSIgaGVpZ2h0PSIyNS4zOTQiIHg9Ii0uNSIgeT0iLS41Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNi45NDQgNi40NzFoMjUuNzI1djI1LjM5NEg2Ljk0NHoiLz48dXNlIHhsaW5rOmhyZWY9IiNiIi8+PC9tYXNrPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxlbGxpcHNlIGN4PSIyMCIgY3k9IjQ1LjE2IiBmaWxsPSIjRkZGIiBzdHJva2U9IiM5Nzk3OTciIHN0cm9rZS13aWR0aD0iLjI1IiByeD0iMy41IiByeT0iMy41Ii8+PHVzZSBmaWxsPSIjMzIzMjMyIiB4bGluazpocmVmPSIjYSIvPjxwYXRoIGZpbGw9IiM3RDdEN0QiIGQ9Ik0xMi4wMTEgMzcuODA1aDE1Ljk3OGwtNy45MTYgOHoiLz48dXNlIHN0cm9rZT0iIzdDN0M3QyIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNlKSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNjKSIgeGxpbms6aHJlZj0iI2EiLz48ZWxsaXBzZSBmaWxsPSIjRkZGIiBjeD0iMTkuODA3IiBjeT0iMTkuMTY4IiByeD0iMTIuMzYzIiByeT0iMTIuMTk3Ii8+PHBhdGggZmlsbD0iIzMyMzIzMiIgZD0iTTYuODEyIDYuOTQ4aDYuNDV2Ni4zNjRoLTYuNDV6bTAgMTIuNzI3aDYuNDV2Ni4zNjRoLTYuNDV6bTYuNDUtNi4zNjNoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS0xOS4wOTFoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS02LjM2M2g2LjQ1djYuMzY0aC02LjQ1em0wIDEyLjcyN2g2LjQ1djYuMzY0aC02LjQ1eiIvPjx1c2Ugc3Ryb2tlPSIjRkZGIiBtYXNrPSJ1cmwoI2QpIiB4bGluazpocmVmPSIjYiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPjwvZz48L3N2Zz4="),Oe=function(){function t(e,n){s(this,t),this.indoorMapObjects_=null,this.outdoorMapObjects_=null,this.createRouteObjects_(e,n)}return u(t,[{key:"createRouteObjects_",value:function(e){for(var n=this,i=void 0===(e=e.sections)?[]:e,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:qt,a=(this.indoorMapObjects_={},this.outdoorMapObjects_=new H.map.Group,function(e){var a,s,l=i[e],u=(c=l.departure.place).id,c=c.type,h=H.util.flexiblePolyline.decode(l.polyline).polyline,p=void 0,f=void 0,d=((s=((s=o(e,i,t.ObjectType.SEGMENT_START_MARKER))&&(p=new H.map.Marker(l.departure.place.location,{icon:s})),o(e,i,t.ObjectType.SEGMENT_FINISH_MARKER)))&&(f=new H.map.Marker(l.arrival.place.location,{icon:s})),o(e,i,t.ObjectType.SEGMENT_POLYLINE));"indoor"===c?(s=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=new Map,n=new H.geo.LineString,r=b(t[0],3)[2];return e.set(r,[n]),t.forEach((function(t){t[2]!==r&&(r=t[2],n=new H.geo.LineString,e.has(r)?e.get(r).push(n):e.set(r,[n])),n.pushLatLngAlt.apply(n,_(t))})),e}(h),a=Array.from(s.keys()).reduce((function(t,e){return t[e]||(t[e]=new H.map.Group),t}),{}),d&&s.forEach((function(t,e){t.forEach((function(t){1<t.getPointCount()&&(t=new H.map.Polyline(t,{style:d}),a[e].addObject(t))}))})),p&&a[l.departure.place.location.lvl].addObject(p),f&&a[l.arrival.place.location.lvl].addObject(f),n.indoorMapObjects_[u]=r(r({},n.indoorMapObjects_[u]||{}),a)):(d&&(e=new H.geo.LineString(h.flatMap((function(t){return[t[0],t[1],0]}))),c=new H.map.Polyline(e,{style:d}),n.outdoorMapObjects_.addObject(c)),p&&n.outdoorMapObjects_.addObject(p),f&&n.outdoorMapObjects_.addObject(f))}),s=0;s<i.length;s++)a(s)}},{key:"getIndoorObjects",value:function(){return this.indoorMapObjects_}},{key:"getOutdoorObjects",value:function(){return this.outdoorMapObjects_}}]),t}(),Ce=(Oe.ObjectType={SEGMENT_START_MARKER:1,SEGMENT_FINISH_MARKER:2,SEGMENT_POLYLINE:3},function(){h(e,H.service.Service);var t=v(e);function e(n){s(this,e),i=t.call(this,e,r(r({},n),{},{baseUrl:void 0}));var i,o={apiKey:n.apikey,baseUrl:n.baseUrl,token:n.token},a={apiKey:o.apiKey,token:o.token},l=(o.apiKey||(o.apiKey=i.getUrl().getQuery().apikey),n.useLegacy||!1);return i.venueService_=new ge(o,l),a.apiKey||(a.apiKey=i.getUrl().getQuery().apikey),n.routingBaseUrl&&(a.baseUrl=n.routingBaseUrl),i.routingService_=new me(a),i}return u(e,[{key:"loadVenue",value:function(t){return console.warn("Venue service version 1 is no longer supported hence "+t+" could not be loaded"),Promise.resolve()}},{key:"calculateRoute",value:function(t){return console.warn("HERE Indoor Routing is deprecated and will be removed soon."),this.routingService_.calculateRoute(t)}}]),e}()),Le=(Ce.CONFIG_KEY="venues",function(){h(e,H.service.Service);var t=v(e);function e(n){s(this,e),i=t.call(this,e,r(r({},n),{},{baseUrl:void 0}));var i,o={apiKey:n.apikey,baseUrl:n.baseUrl,token:n.token,hrn:n.hrn};o.apiKey||(o.apiKey=i.getUrl().getQuery().apikey),n=n.useLegacy||!1;return i.venueService_=new ge(o,n),i}return u(e,[{key:"loadVenue",value:function(t){return this.venueService_.load(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).then((function(t){return new _e(t)}))}},{key:"getMapInfoList",value:function(){return this.venueService_.getSupportedMapList()}}]),e}()),Pe=(Le.CONFIG_KEY="indoorMaps",H.service.Platform.prototype.getVenuesService=function(t,e){var n=Le;return 1!==e&&e?e!==ot.v2||t.token||(t.hrn?t.apikey||console.error("Venue Service version 2 requires either apikey or token"):console.error("Token is mandatory when Hrn is not provided in Venue Service version 2")):(console.warn("Venue service version 1 is no longer supported"),n=Ce),this.createService(n,t)},Le.LABEL_TEXT_PREFERENCE_OVERRIDE={OCCUPANT_NAMES:"OCCUPANT_NAMES",SPACE_NAME:"SPACE_NAME",SPACE_TYPE_NAME:"SPACE_TYPE_NAME",SPACE_CATEGORY_NAME:"SPACE_CATEGORY_NAME",INTERNAL_ADDRESS:"INTERNAL_ADDRESS"},function(){h(e,H.ui.Control);var t=v(e);function e(n){var r,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return s(this,e),(r=t.call(this)).provider_=null,r.levelSelectorUI_=null,r.setAlignment(i&&i.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),r.addClass("venues-ui"),n instanceof _e&&r.setVenue(n),r}return u(e,[{key:"renderInternal",value:function(t,n){m(p(e.prototype),"renderInternal",this).call(this,t,n),this.createLevelSelectorUI_(t),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(t){t instanceof _e&&(this.removeEventListeners_(),this.venue=t,this.provider_=t.getParentEventTarget(),this.update_(),this.addEventListeners_())}},{key:"createLevelSelectorUI_",value:function(t){var e=this;t.innerHTML="",this.levelSelectorUI_=null,this.levelSelectorUI_=new te(t,null,null,(function(t){return e.venue.setActiveLevelIndex(t)}))}},{key:"update_",value:function(){var t,e;this.levelSelectorUI_&&(t=this.venue.getActiveDrawing().getData(),e=this.venue.getData().getDisplaySettings(),this.levelSelectorUI_.update(t,e),this.levelChangeHandler_())}},{key:"addEventListeners_",value:function(){this.venue&&(this.venue.addEventListener(_e.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.addEventListener(_e.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.addEventListener(_e.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&(this.venue.removeEventListener(_e.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.removeEventListener(_e.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.removeEventListener(_e.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"levelChangeHandler_",value:function(){this.levelSelectorUI_.switch(this.venue.getActiveLevelIndex())}},{key:"drawingChangeHandler_",value:function(){this.update_()}},{key:"activeVenueChangeHandler_",value:function(t){this.setVenue(t.newValue)}}]),e}()),Re=function(){h(e,H.ui.Control);var t=v(e);function e(n){var r,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return s(this,e),(r=t.call(this)).provider_=null,r.drawingSelectorUI_=null,r.addClass("venues-ui"),r.setAlignment(i&&i.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),n instanceof _e&&r.setVenue(n),r}return u(e,[{key:"renderInternal",value:function(t,n){m(p(e.prototype),"renderInternal",this).call(this,t,n),this.createDrawingSelectorUI_(t),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(t){t instanceof _e&&(this.removeEventListeners_(),this.venue=t,this.provider_=t.getParentEventTarget(),this.drawingSelectorUI_&&this.drawingSelectorUI_.update(t.getData()),this.addEventListeners_())}},{key:"createDrawingSelectorUI_",value:function(t){var e=this;t.innerHTML="",this.drawingSelectorUI_=null,this.drawingSelectorUI_=new Kt(t,null,(function(t){return e.venue.setActiveDrawing(t)}))}},{key:"addEventListeners_",value:function(){this.venue&&this.venue.addEventListener(_e.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.addEventListener(_e.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&this.venue.removeEventListener(_e.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.removeEventListener(_e.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"drawingChangeHandler_",value:function(){this.drawingSelectorUI_.switch(this.venue.getActiveDrawing().id)}},{key:"activeVenueChangeHandler_",value:function(t){this.setVenue(t.newValue)}}]),e}();Re=Object.freeze({__proto__:null,DrawingControl:Re,LevelControl:Pe});return e(".venues-ui * {\n  font-family: \"Fira Sans\", \"Helvetica Neue\", Helvetica, sans-serif;\n  color: #0F1621;\n}\n.venues-ui .arrow {\n  display: block;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.venues-ui .arrow--up {\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-426.000000, -584.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls-Copy' transform='translate(417.753906, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(15.000000, 16.499023) rotate(-180.000000) translate(-15.000000, -16.499023) translate(9.000000, 12.749023)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n.venues-ui .arrow--down {\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-347.000000, -704.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls' transform='translate(338.251953, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(9.000000, 132.746094)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n.venues-ui .venues-ui-button {\n  display: block;\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  font-size: 16px;\n  font-weight: 600;\n  background-color: #fff;\n  border: none;\n  border-bottom: 1px solid #9FA2A6;\n  cursor: pointer;\n  overflow: hidden;\n  color: #6e737a;\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.venues-ui .venues-ui-button:hover, .venues-ui .venues-ui-button--active {\n  background-color: #f0f0f0;\n  color: #0F1621;\n}\n@keyframes fade {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n.venues-ui__drawings .drawings {\n  position: absolute;\n  top: 0;\n  right: 45px;\n  display: none;\n  opacity: 0;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__drawings .drawings--open {\n  display: block;\n  opacity: 1;\n  animation: fade 1s;\n}\n.venues-ui__drawings .drawings .venues-ui-button {\n  width: auto;\n  padding: 0 10px;\n}\n.venues-ui__drawings .drawings .venues-ui-button:first-of-type {\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n}\n.venues-ui__drawings .drawings .venues-ui-button:last-of-type {\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n.venues-ui__drawings .trigger {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__drawings .trigger .arrow {\n  transform: rotate(0);\n  transition: 0.4s;\n}\n.venues-ui__drawings .trigger.venues-ui-button--active .arrow {\n  transform: rotate(90deg);\n  transition: 0.4s;\n}\n.venues-ui__levels {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__levels .levels {\n  overflow: hidden;\n}\n.venues-ui__levels .venues-ui-button--up + .levels .venues-ui-button {\n  border-radius: 0;\n}\n.venues-ui__levels .venues-ui-button:first-of-type {\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n}\n.venues-ui__levels .venues-ui-button:last-of-type {\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n.venues-ui__levels .venues-ui-button[disabled=disabled] .arrow {\n  opacity: 0.5;\n}\n.venues-ui__directory {\n  position: absolute;\n  top: 10px;\n  right: 60px;\n  bottom: calc(100% - 45px);\n  width: 350px;\n  overflow: hidden;\n  background: white;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__directory.active {\n  bottom: 10px;\n}\n.venues-ui__directory .directory__list {\n  top: 80px;\n  bottom: 20px;\n  position: absolute;\n  overflow-y: scroll;\n  right: 10px;\n  left: 10px;\n  font-size: 12px;\n}\n.venues-ui__directory .directory__list svg {\n  width: 25px;\n  height: 25px;\n}\n.venues-ui__directory .directory__heading {\n  margin: 8px;\n  font-size: 15px;\n  font-weight: normal;\n  cursor: pointer;\n}\n.venues-ui__directory .directory__input {\n  margin: 10px;\n}\n.venues-ui__directory .directory__input input {\n  width: 100%;\n  padding: 5px 0;\n}\n.venues-ui__directory .directory__trigger {\n  position: absolute;\n  right: 10px;\n  top: 15px;\n  width: 10px;\n  height: 10px;\n}\n.venues-ui__directory .directory__trigger .arrow {\n  transform: rotate(0);\n  transition: 0.4s;\n}\n.venues-ui__directory .directory__trigger--active .arrow {\n  transform: rotate(-180deg);\n  transition: 0.4s;\n}"),t.Drawing=E,t.Geometry=k,t.Level=T,t.Provider=Lt,t.Route=Oe,t.Service=Ce,t.Service2=Le,t.Venue=_e,t.ui=Re,Object.defineProperty(t,"__esModule",{value:!0}),t}({})}.call(self);var __WEBPACK_DEFAULT_EXPORT__=H},2093:function(t,e,n){"use strict";var r=n(4836);e.Z=void 0;!function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var n=a(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}r.default=t,n&&n.set(t,r)}(n(2791));var i=r(n(5649)),o=n(184);function a(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(a=function(t){return t?n:e})(t)}var s=(0,i.default)((0,o.jsx)("path",{d:"M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5A3.5 3.5 0 0 0 12 8.5V11h-2v3h2v7h3v-7h3v-3h-3V9a1 1 0 0 1 1-1h2V5z"}),"Facebook");e.Z=s},5649:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(3519)},7107:function(t,e,n){"use strict";n.d(e,{Z:function(){return q}});var r=n(7462),i=n(3366),o=n(6189),a=n(2466),s=n(5080),l=n(7416),u=n(104),c=n(4572);function h(t,e){var n;return(0,r.Z)({toolbar:(n={minHeight:56},(0,c.Z)(n,t.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),(0,c.Z)(n,t.up("sm"),{minHeight:64}),n)},e)}var p=n(2065),f={black:"#000",white:"#fff"},d={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},y={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},g={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},v={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},m={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},b={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},_={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},w=["mode","contrastThreshold","tonalOffset"],x={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:f.white,default:f.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},k={text:{primary:f.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:f.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function E(t,e,n,r){var i=r.light||r,o=r.dark||1.5*r;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:"light"===e?t.light=(0,p.$n)(t.main,i):"dark"===e&&(t.dark=(0,p._j)(t.main,o)))}function T(t){var e=t.mode,n=void 0===e?"light":e,s=t.contrastThreshold,l=void 0===s?3:s,u=t.tonalOffset,c=void 0===u?.2:u,h=(0,i.Z)(t,w),T=t.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[200],light:m[50],dark:m[400]}:{main:m[700],light:m[400],dark:m[800]}}(n),A=t.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[200],light:y[50],dark:y[400]}:{main:y[500],light:y[300],dark:y[700]}}(n),S=t.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[500],light:g[300],dark:g[700]}:{main:g[700],light:g[400],dark:g[800]}}(n),M=t.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:b[400],light:b[300],dark:b[700]}:{main:b[700],light:b[500],dark:b[900]}}(n),I=t.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:_[400],light:_[300],dark:_[700]}:{main:_[800],light:_[500],dark:_[900]}}(n),O=t.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:"#ed6c02",light:v[500],dark:v[900]}}(n);function C(t){return(0,p.mi)(t,k.text.primary)>=l?k.text.primary:x.text.primary}var L=function(t){var e=t.color,n=t.name,i=t.mainShade,a=void 0===i?500:i,s=t.lightShade,l=void 0===s?300:s,u=t.darkShade,h=void 0===u?700:u;if(!(e=(0,r.Z)({},e)).main&&e[a]&&(e.main=e[a]),!e.hasOwnProperty("main"))throw new Error((0,o.Z)(11,n?" (".concat(n,")"):"",a));if("string"!==typeof e.main)throw new Error((0,o.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(e.main)));return E(e,"light",l,c),E(e,"dark",h,c),e.contrastText||(e.contrastText=C(e.main)),e},P={dark:k,light:x};return(0,a.Z)((0,r.Z)({common:(0,r.Z)({},f),mode:n,primary:L({color:T,name:"primary"}),secondary:L({color:A,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:L({color:S,name:"error"}),warning:L({color:O,name:"warning"}),info:L({color:M,name:"info"}),success:L({color:I,name:"success"}),grey:d,contrastThreshold:l,getContrastText:C,augmentColor:L,tonalOffset:c},P[n]),h)}var A=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var S={textTransform:"uppercase"},M='"Roboto", "Helvetica", "Arial", sans-serif';function I(t,e){var n="function"===typeof e?e(t):e,o=n.fontFamily,s=void 0===o?M:o,l=n.fontSize,u=void 0===l?14:l,c=n.fontWeightLight,h=void 0===c?300:c,p=n.fontWeightRegular,f=void 0===p?400:p,d=n.fontWeightMedium,y=void 0===d?500:d,g=n.fontWeightBold,v=void 0===g?700:g,m=n.htmlFontSize,b=void 0===m?16:m,_=n.allVariants,w=n.pxToRem,x=(0,i.Z)(n,A);var k=u/14,E=w||function(t){return"".concat(t/b*k,"rem")},T=function(t,e,n,i,o){return(0,r.Z)({fontFamily:s,fontWeight:t,fontSize:E(e),lineHeight:n},s===M?{letterSpacing:"".concat((a=i/e,Math.round(1e5*a)/1e5),"em")}:{},o,_);var a},I={h1:T(h,96,1.167,-1.5),h2:T(h,60,1.2,-.5),h3:T(f,48,1.167,0),h4:T(f,34,1.235,.25),h5:T(f,24,1.334,0),h6:T(y,20,1.6,.15),subtitle1:T(f,16,1.75,.15),subtitle2:T(y,14,1.57,.1),body1:T(f,16,1.5,.15),body2:T(f,14,1.43,.15),button:T(y,14,1.75,.4,S),caption:T(f,12,1.66,.4),overline:T(f,12,2.66,1,S)};return(0,a.Z)((0,r.Z)({htmlFontSize:b,pxToRem:E,fontFamily:s,fontSize:u,fontWeightLight:h,fontWeightRegular:f,fontWeightMedium:y,fontWeightBold:v},I),x,{clone:!1})}var O=.2,C=.14,L=.12;function P(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(O,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(C,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(L,")")].join(",")}var R=["none",P(0,2,1,-1,0,1,1,0,0,1,3,0),P(0,3,1,-2,0,2,2,0,0,1,5,0),P(0,3,3,-2,0,3,4,0,0,1,8,0),P(0,2,4,-1,0,4,5,0,0,1,10,0),P(0,3,5,-1,0,5,8,0,0,1,14,0),P(0,3,5,-1,0,6,10,0,0,1,18,0),P(0,4,5,-2,0,7,10,1,0,2,16,1),P(0,5,5,-3,0,8,10,1,0,3,14,2),P(0,5,6,-3,0,9,12,1,0,3,16,2),P(0,6,6,-3,0,10,14,1,0,4,18,3),P(0,6,7,-4,0,11,15,1,0,4,20,3),P(0,7,8,-4,0,12,17,2,0,5,22,4),P(0,7,8,-4,0,13,19,2,0,5,24,4),P(0,7,9,-4,0,14,21,2,0,5,26,4),P(0,8,9,-5,0,15,22,2,0,6,28,5),P(0,8,10,-5,0,16,24,2,0,6,30,5),P(0,8,11,-5,0,17,26,2,0,6,32,5),P(0,9,11,-5,0,18,28,2,0,7,34,6),P(0,9,12,-6,0,19,29,2,0,7,36,6),P(0,10,13,-6,0,20,31,3,0,8,38,7),P(0,10,13,-6,0,21,33,3,0,8,40,7),P(0,10,14,-6,0,22,35,3,0,8,42,7),P(0,11,14,-7,0,23,36,3,0,9,44,8),P(0,11,15,-7,0,24,38,3,0,9,46,8)],N=["duration","easing","delay"],j={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},D={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function z(t){return"".concat(Math.round(t),"ms")}function F(t){if(!t)return 0;var e=t/36;return Math.round(10*(4+15*Math.pow(e,.25)+e/5))}function B(t){var e=(0,r.Z)({},j,t.easing),n=(0,r.Z)({},D,t.duration);return(0,r.Z)({getAutoHeightDuration:F,create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.duration,a=void 0===o?n.standard:o,s=r.easing,l=void 0===s?e.easeInOut:s,u=r.delay,c=void 0===u?0:u;(0,i.Z)(r,N);return(Array.isArray(t)?t:[t]).map((function(t){return"".concat(t," ").concat("string"===typeof a?a:z(a)," ").concat(l," ").concat("string"===typeof c?c:z(c))})).join(",")}},t,{easing:e,duration:n})}var G={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},H=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function U(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mixins,n=void 0===e?{}:e,c=t.palette,p=void 0===c?{}:c,f=t.transitions,d=void 0===f?{}:f,y=t.typography,g=void 0===y?{}:y,v=(0,i.Z)(t,H);if(t.vars)throw new Error((0,o.Z)(18));var m=T(p),b=(0,s.Z)(t),_=(0,a.Z)(b,{mixins:h(b.breakpoints,n),palette:m,shadows:R.slice(),typography:I(m,g),transitions:B(d),zIndex:(0,r.Z)({},G)});_=(0,a.Z)(_,v);for(var w=arguments.length,x=new Array(w>1?w-1:0),k=1;k<w;k++)x[k-1]=arguments[k];return(_=x.reduce((function(t,e){return(0,a.Z)(t,e)}),_)).unstable_sxConfig=(0,r.Z)({},l.Z,null==v?void 0:v.unstable_sxConfig),_.unstable_sx=function(t){return(0,u.Z)({sx:t,theme:this})},_}var q=U},6482:function(t,e,n){"use strict";var r=(0,n(7107).Z)();e.Z=r},6934:function(t,e,n){"use strict";n.d(e,{FO:function(){return o}});var r=n(4046),i=n(6482),o=function(t){return(0,r.x9)(t)&&"classes"!==t},a=(0,r.ZP)({defaultTheme:i.Z,rootShouldForwardProp:o});e.ZP=a},1402:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(7078),i=n(6482);function o(t){var e=t.props,n=t.name;return(0,r.Z)({props:e,name:n,defaultTheme:i.Z})}},4036:function(t,e,n){"use strict";var r=n(7312);e.Z=r.Z},3519:function(t,e,n){"use strict";n.r(e),n.d(e,{capitalize:function(){return i.Z},createChainedFunction:function(){return o},createSvgIcon:function(){return x},debounce:function(){return k},deprecatedPropType:function(){return E},isMuiElement:function(){return T},ownerDocument:function(){return S},ownerWindow:function(){return M},requirePropFactory:function(){return I},setRef:function(){return O},unstable_ClassNameGenerator:function(){return G},unstable_useEnhancedEffect:function(){return C},unstable_useId:function(){return N},unsupportedProp:function(){return j},useControlled:function(){return D},useEventCallback:function(){return z.Z},useForkRef:function(){return F.Z},useIsFocusVisible:function(){return B.Z}});var r=n(5902),i=n(4036);var o=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return null==e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r),e.apply(this,r)}}),(function(){}))},a=n(7462),s=n(2791),l=n.t(s,2),u=n(3366),c=n(8182),h=n(4419),p=n(1402),f=n(6934),d=n(5878),y=n(1217);function g(t){return(0,y.Z)("MuiSvgIcon",t)}(0,d.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var v=n(184),m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],b=(0,f.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,"inherit"!==n.color&&e["color".concat((0,i.Z)(n.color))],e["fontSize".concat((0,i.Z)(n.fontSize))]]}})((function(t){var e,n,r,i,o,a,s,l,u,c,h,p,f,d,y,g,v,m=t.theme,b=t.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(e=m.transitions)||null==(n=e.create)?void 0:n.call(e,"fill",{duration:null==(r=m.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(o=m.typography)||null==(a=o.pxToRem)?void 0:a.call(o,20))||"1.25rem",medium:(null==(s=m.typography)||null==(l=s.pxToRem)?void 0:l.call(s,24))||"1.5rem",large:(null==(u=m.typography)||null==(c=u.pxToRem)?void 0:c.call(u,35))||"2.1875rem"}[b.fontSize],color:null!=(h=null==(p=(m.vars||m).palette)||null==(f=p[b.color])?void 0:f.main)?h:{action:null==(d=(m.vars||m).palette)||null==(y=d.action)?void 0:y.active,disabled:null==(g=(m.vars||m).palette)||null==(v=g.action)?void 0:v.disabled,inherit:void 0}[b.color]}})),_=s.forwardRef((function(t,e){var n=(0,p.Z)({props:t,name:"MuiSvgIcon"}),r=n.children,o=n.className,s=n.color,l=void 0===s?"inherit":s,f=n.component,d=void 0===f?"svg":f,y=n.fontSize,_=void 0===y?"medium":y,w=n.htmlColor,x=n.inheritViewBox,k=void 0!==x&&x,E=n.titleAccess,T=n.viewBox,A=void 0===T?"0 0 24 24":T,S=(0,u.Z)(n,m),M=(0,a.Z)({},n,{color:l,component:d,fontSize:_,instanceFontSize:t.fontSize,inheritViewBox:k,viewBox:A}),I={};k||(I.viewBox=A);var O=function(t){var e=t.color,n=t.fontSize,r=t.classes,o={root:["root","inherit"!==e&&"color".concat((0,i.Z)(e)),"fontSize".concat((0,i.Z)(n))]};return(0,h.Z)(o,g,r)}(M);return(0,v.jsxs)(b,(0,a.Z)({as:d,className:(0,c.Z)(O.root,o),focusable:"false",color:w,"aria-hidden":!E||void 0,role:E?"img":void 0,ref:e},I,S,{ownerState:M,children:[r,E?(0,v.jsx)("title",{children:E}):null]}))}));_.muiName="SvgIcon";var w=_;function x(t,e){function n(n,r){return(0,v.jsx)(w,(0,a.Z)({"data-testid":"".concat(e,"Icon"),ref:r},n,{children:t}))}return n.muiName=w.muiName,s.memo(s.forwardRef(n))}var k=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];clearTimeout(e),e=setTimeout((function(){t.apply(r,o)}),n)}return r.clear=function(){clearTimeout(e)},r};var E=function(t,e){return function(){return null}};var T=function(t,e){return s.isValidElement(t)&&-1!==e.indexOf(t.type.muiName)};function A(t){return t&&t.ownerDocument||document}var S=A;var M=function(t){return A(t).defaultView||window};var I=function(t,e){return function(){return null}},O=n(2971).Z,C=n(5721).Z,L=n(885),P=0;var R=l.useId;var N=function(t){if(void 0!==R){var e=R();return null!=t?t:e}return function(t){var e=s.useState(t),n=(0,L.Z)(e,2),r=n[0],i=n[1],o=t||r;return s.useEffect((function(){null==r&&i("mui-".concat(P+=1))}),[r]),o}(t)};var j=function(t,e,n,r,i){return null};var D=function(t){var e=t.controlled,n=t.default,r=(t.name,t.state,s.useRef(void 0!==e).current),i=s.useState(n),o=(0,L.Z)(i,2),a=o[0],l=o[1];return[r?e:a,s.useCallback((function(t){r||l(t)}),[])]},z=n(6868),F=n(4843),B=n(3031),G={configure:function(t){r.Z.configure(t)}}},6868:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(2791),i=n(5721);var o=function(t){var e=r.useRef(t);return(0,i.Z)((function(){e.current=t})),r.useCallback((function(){return e.current.apply(void 0,arguments)}),[])}},4843:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(2791),i=n(2971);var o=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.useMemo((function(){return e.every((function(t){return null==t}))?null:function(t){e.forEach((function(e){(0,i.Z)(e,t)}))}}),e)}},3031:function(t,e,n){"use strict";n.d(e,{Z:function(){return p}});var r,i=n(2791),o=!0,a=!1,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(t){t.metaKey||t.altKey||t.ctrlKey||(o=!0)}function u(){o=!1}function c(){"hidden"===this.visibilityState&&a&&(o=!0)}function h(t){var e=t.target;try{return e.matches(":focus-visible")}catch(n){}return o||function(t){var e=t.type,n=t.tagName;return!("INPUT"!==n||!s[e]||t.readOnly)||"TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable}(e)}var p=function(){var t=i.useCallback((function(t){var e;null!=t&&((e=t.ownerDocument).addEventListener("keydown",l,!0),e.addEventListener("mousedown",u,!0),e.addEventListener("pointerdown",u,!0),e.addEventListener("touchstart",u,!0),e.addEventListener("visibilitychange",c,!0))}),[]),e=i.useRef(!1);return{isFocusVisibleRef:e,onFocus:function(t){return!!h(t)&&(e.current=!0,!0)},onBlur:function(){return!!e.current&&(a=!0,window.clearTimeout(r),r=window.setTimeout((function(){a=!1}),100),e.current=!1,!0)},ref:t}}},1125:function(t,e,n){"use strict";n.d(e,{ZP:function(){return k},Co:function(){return E}});var r=n(2791),i=n(7462),o=n(9797),a=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,s=(0,o.Z)((function(t){return a.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),l=n(3361),u=n(9140),c=n(2561),h=(0,r.createContext)("undefined"!==typeof HTMLElement?(0,l.Z)({key:"css"}):null);h.Provider;var p=function(t){return(0,r.forwardRef)((function(e,n){var i=(0,r.useContext)(h);return t(e,i,n)}))},f=(0,r.createContext)({});var d=function(t,e,n){var r=t.key+"-"+e.name;!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles)},y=s,g=function(t){return"theme"!==t},v=function(t){return"string"===typeof t&&t.charCodeAt(0)>96?y:g},m=function(t,e,n){var r;if(e){var i=e.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(e){return t.__emotion_forwardProp(e)&&i(e)}:i}return"function"!==typeof r&&n&&(r=t.__emotion_forwardProp),r},b=function(t){var e=t.cache,n=t.serialized,r=t.isStringTag;d(e,n,r);(0,c.L)((function(){return function(t,e,n){d(t,e,n);var r=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var i=e;do{t.insert(e===i?"."+r:"",i,t.sheet,!0),i=i.next}while(void 0!==i)}}(e,n,r)}));return null},_=function t(e,n){var o,a,s=e.__emotion_real===e,l=s&&e.__emotion_base||e;void 0!==n&&(o=n.label,a=n.target);var c=m(e,n,s),h=c||v(l),d=!h("as");return function(){var y=arguments,g=s&&void 0!==e.__emotion_styles?e.__emotion_styles.slice(0):[];if(void 0!==o&&g.push("label:"+o+";"),null==y[0]||void 0===y[0].raw)g.push.apply(g,y);else{0,g.push(y[0][0]);for(var _=y.length,w=1;w<_;w++)g.push(y[w],y[0][w])}var x=p((function(t,e,n){var i=d&&t.as||l,o="",s=[],p=t;if(null==t.theme){for(var y in p={},t)p[y]=t[y];p.theme=(0,r.useContext)(f)}"string"===typeof t.className?o=function(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):r+=n+" "})),r}(e.registered,s,t.className):null!=t.className&&(o=t.className+" ");var m=(0,u.O)(g.concat(s),e.registered,p);o+=e.key+"-"+m.name,void 0!==a&&(o+=" "+a);var _=d&&void 0===c?v(i):h,w={};for(var x in t)d&&"as"===x||_(x)&&(w[x]=t[x]);return w.className=o,w.ref=n,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(b,{cache:e,serialized:m,isStringTag:"string"===typeof i}),(0,r.createElement)(i,w))}));return x.displayName=void 0!==o?o:"Styled("+("string"===typeof l?l:l.displayName||l.name||"Component")+")",x.defaultProps=e.defaultProps,x.__emotion_real=x,x.__emotion_base=l,x.__emotion_styles=g,x.__emotion_forwardProp=c,Object.defineProperty(x,"toString",{value:function(){return"."+a}}),x.withComponent=function(e,r){return t(e,(0,i.Z)({},n,r,{shouldForwardProp:m(x,r,!0)})).apply(void 0,g)},x}},w=_.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){w[t]=w(t)}));var x=w;function k(t,e){return x(t,e)}var E=function(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}},1184:function(t,e,n){"use strict";n.d(e,{L7:function(){return s},P$:function(){return l},VO:function(){return r},W8:function(){return a},k9:function(){return o}});var r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:function(t){return"@media (min-width:".concat(r[t],"px)")}};function o(t,e,n){var o=t.theme||{};if(Array.isArray(e)){var a=o.breakpoints||i;return e.reduce((function(t,r,i){return t[a.up(a.keys[i])]=n(e[i]),t}),{})}if("object"===typeof e){var s=o.breakpoints||i;return Object.keys(e).reduce((function(t,i){if(-1!==Object.keys(s.values||r).indexOf(i)){t[s.up(i)]=n(e[i],i)}else{var o=i;t[o]=e[o]}return t}),{})}return n(e)}function a(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==(t=e.keys)?void 0:t.reduce((function(t,n){return t[e.up(n)]={},t}),{}))||{}}function s(t,e){return t.reduce((function(t,e){var n=t[e];return(!n||0===Object.keys(n).length)&&delete t[e],t}),e)}function l(t){var e,n=t.values,r=t.breakpoints,i=t.base||function(t,e){if("object"!==typeof t)return{};var n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((function(e,r){r<t.length&&(n[e]=!0)})):r.forEach((function(e){null!=t[e]&&(n[e]=!0)})),n}(n,r),o=Object.keys(i);return 0===o.length?n:o.reduce((function(t,r,i){return Array.isArray(n)?(t[r]=null!=n[i]?n[i]:n[e],e=i):"object"===typeof n?(t[r]=null!=n[r]?n[r]:n[e],e=r):t[r]=n,t}),{})}},2065:function(t,e,n){"use strict";n.d(e,{$n:function(){return h},Fq:function(){return u},_j:function(){return c},mi:function(){return l}});var r=n(6189);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)}function o(t){if(t.type)return t;if("#"===t.charAt(0))return o(function(t){t=t.slice(1);var e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g"),n=t.match(e);return n&&1===n[0].length&&(n=n.map((function(t){return t+t}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(t,e){return e<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3})).join(", "),")"):""}(t));var e=t.indexOf("("),n=t.substring(0,e);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,t));var i,a=t.substring(e+1,t.length-1);if("color"===n){if(i=(a=a.split(" ")).shift(),4===a.length&&"/"===a[3].charAt(0)&&(a[3]=a[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.Z)(10,i))}else a=a.split(",");return{type:n,values:a=a.map((function(t){return parseFloat(t)})),colorSpace:i}}function a(t){var e=t.type,n=t.colorSpace,r=t.values;return-1!==e.indexOf("rgb")?r=r.map((function(t,e){return e<3?parseInt(t,10):t})):-1!==e.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==e.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(e,"(").concat(r,")")}function s(t){var e="hsl"===(t=o(t)).type||"hsla"===t.type?o(function(t){var e=(t=o(t)).values,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+n/30)%12;return i-s*Math.max(Math.min(e-3,9-e,1),-1)},u="rgb",c=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===t.type&&(u+="a",c.push(e[3])),a({type:u,values:c})}(t)).values:t.values;return e=e.map((function(e){return"color"!==t.type&&(e/=255),e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function l(t,e){var n=s(t),r=s(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function u(t,e){return t=o(t),e=i(e),"rgb"!==t.type&&"hsl"!==t.type||(t.type+="a"),"color"===t.type?t.values[3]="/".concat(e):t.values[3]=e,a(t)}function c(t,e){if(t=o(t),e=i(e),-1!==t.type.indexOf("hsl"))t.values[2]*=1-e;else if(-1!==t.type.indexOf("rgb")||-1!==t.type.indexOf("color"))for(var n=0;n<3;n+=1)t.values[n]*=1-e;return a(t)}function h(t,e){if(t=o(t),e=i(e),-1!==t.type.indexOf("hsl"))t.values[2]+=(100-t.values[2])*e;else if(-1!==t.type.indexOf("rgb"))for(var n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(-1!==t.type.indexOf("color"))for(var r=0;r<3;r+=1)t.values[r]+=(1-t.values[r])*e;return a(t)}},4046:function(t,e,n){"use strict";n.d(e,{ZP:function(){return k},x9:function(){return w}});var r=n(2982),i=n(885),o=n(3366),a=n(7462),s=n(1125),l=n(5080),u=n(7312),c=["variant"];function h(t){return 0===t.length}function p(t){var e=t.variant,n=(0,o.Z)(t,c),r=e||"";return Object.keys(n).sort().forEach((function(e){r+="color"===e?h(r)?t[e]:(0,u.Z)(t[e]):"".concat(h(r)?e:(0,u.Z)(e)).concat((0,u.Z)(t[e].toString()))})),r}var f=n(104),d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],y=["theme"],g=["theme"];function v(t){return 0===Object.keys(t).length}var m=function(t,e){return e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null},b=function(t,e){var n=[];e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants);var r={};return n.forEach((function(t){var e=p(t.props);r[e]=t.style})),r},_=function(t,e,n,r){var i,o,a=t.ownerState,s=void 0===a?{}:a,l=[],u=null==n||null==(i=n.components)||null==(o=i[r])?void 0:o.variants;return u&&u.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(e){s[e]!==n.props[e]&&t[e]!==n.props[e]&&(r=!1)})),r&&l.push(e[p(n.props)])})),l};function w(t){return"ownerState"!==t&&"theme"!==t&&"sx"!==t&&"as"!==t}var x=(0,l.Z)();function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.defaultTheme,n=void 0===e?x:e,l=t.rootShouldForwardProp,u=void 0===l?w:l,c=t.slotShouldForwardProp,h=void 0===c?w:c,p=function(t){var e=v(t.theme)?n:t.theme;return(0,f.Z)((0,a.Z)({},t,{theme:e}))};return p.__mui_systemSx=!0,function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Co)(t,(function(t){return t.filter((function(t){return!(null!=t&&t.__mui_systemSx)}))}));var l=e.name,c=e.slot,f=e.skipVariantsResolver,x=e.skipSx,k=e.overridesResolver,E=(0,o.Z)(e,d),T=void 0!==f?f:c&&"Root"!==c||!1,A=x||!1;var S=w;"Root"===c?S=u:c?S=h:function(t){return"string"===typeof t&&t.charCodeAt(0)>96}(t)&&(S=void 0);var M=(0,s.ZP)(t,(0,a.Z)({shouldForwardProp:S,label:undefined},E)),I=function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),u=1;u<e;u++)s[u-1]=arguments[u];var c=s?s.map((function(t){return"function"===typeof t&&t.__emotion_real!==t?function(e){var r=e.theme,i=(0,o.Z)(e,y);return t((0,a.Z)({theme:v(r)?n:r},i))}:t})):[],h=t;l&&k&&c.push((function(t){var e=v(t.theme)?n:t.theme,r=m(l,e);if(r){var o={};return Object.entries(r).forEach((function(n){var r=(0,i.Z)(n,2),s=r[0],l=r[1];o[s]="function"===typeof l?l((0,a.Z)({},t,{theme:e})):l})),k(t,o)}return null})),l&&!T&&c.push((function(t){var e=v(t.theme)?n:t.theme;return _(t,b(l,e),e,l)})),A||c.push(p);var f=c.length-s.length;if(Array.isArray(t)&&f>0){var d=new Array(f).fill("");(h=[].concat((0,r.Z)(t),(0,r.Z)(d))).raw=[].concat((0,r.Z)(t.raw),(0,r.Z)(d))}else"function"===typeof t&&t.__emotion_real!==t&&(h=function(e){var r=e.theme,i=(0,o.Z)(e,g);return t((0,a.Z)({theme:v(r)?n:r},i))});return M.apply(void 0,[h].concat((0,r.Z)(c)))};return M.withConfig&&(I.withConfig=M.withConfig),I}}},5080:function(t,e,n){"use strict";n.d(e,{Z:function(){return d}});var r=n(7462),i=n(3366),o=n(2466),a=n(4572),s=["values","unit","step"],l=function(t){var e=Object.keys(t).map((function(e){return{key:e,val:t[e]}}))||[];return e.sort((function(t,e){return t.val-e.val})),e.reduce((function(t,e){return(0,r.Z)({},t,(0,a.Z)({},e.key,e.val))}),{})};var u={borderRadius:4},c=n(5682);var h=n(104),p=n(7416),f=["breakpoints","palette","spacing","shape"];var d=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.breakpoints,n=void 0===e?{}:e,a=t.palette,d=void 0===a?{}:a,y=t.spacing,g=t.shape,v=void 0===g?{}:g,m=(0,i.Z)(t,f),b=function(t){var e=t.values,n=void 0===e?{xs:0,sm:600,md:900,lg:1200,xl:1536}:e,o=t.unit,a=void 0===o?"px":o,u=t.step,c=void 0===u?5:u,h=(0,i.Z)(t,s),p=l(n),f=Object.keys(p);function d(t){var e="number"===typeof n[t]?n[t]:t;return"@media (min-width:".concat(e).concat(a,")")}function y(t){var e="number"===typeof n[t]?n[t]:t;return"@media (max-width:".concat(e-c/100).concat(a,")")}function g(t,e){var r=f.indexOf(e);return"@media (min-width:".concat("number"===typeof n[t]?n[t]:t).concat(a,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[f[r]]?n[f[r]]:e)-c/100).concat(a,")")}return(0,r.Z)({keys:f,values:p,up:d,down:y,between:g,only:function(t){return f.indexOf(t)+1<f.length?g(t,f[f.indexOf(t)+1]):d(t)},not:function(t){var e=f.indexOf(t);return 0===e?d(f[1]):e===f.length-1?y(f[e]):g(t,f[f.indexOf(t)+1]).replace("@media","@media not all and")},unit:a},h)}(n),_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(t.mui)return t;var e=(0,c.hB)({spacing:t}),n=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((function(t){var n=e(t);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(y),w=(0,o.Z)({breakpoints:b,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},d),spacing:_,shape:(0,r.Z)({},u,v)},m),x=arguments.length,k=new Array(x>1?x-1:0),E=1;E<x;E++)k[E-1]=arguments[E];return(w=k.reduce((function(t,e){return(0,o.Z)(t,e)}),w)).unstable_sxConfig=(0,r.Z)({},p.Z,null==m?void 0:m.unstable_sxConfig),w.unstable_sx=function(t){return(0,h.Z)({sx:t,theme:this})},w}},8247:function(t,e,n){"use strict";var r=n(2466);e.Z=function(t,e){return e?(0,r.Z)(t,e,{clone:!1}):t}},5682:function(t,e,n){"use strict";n.d(e,{hB:function(){return y},eI:function(){return d},NA:function(){return g},e6:function(){return b},o3:function(){return _}});var r=n(885),i=n(1184),o=n(8529),a=n(8247);var s={m:"margin",p:"padding"},l={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},u={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){if(t.length>2){if(!u[t])return[t];t=u[t]}var e=t.split(""),n=(0,r.Z)(e,2),i=n[0],o=n[1],a=s[i],c=l[o]||"";return Array.isArray(c)?c.map((function(t){return a+t})):[a+c]})),h=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],p=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],f=[].concat(h,p);function d(t,e,n,r){var i,a=null!=(i=(0,o.DW)(t,e,!1))?i:n;return"number"===typeof a?function(t){return"string"===typeof t?t:a*t}:Array.isArray(a)?function(t){return"string"===typeof t?t:a[t]}:"function"===typeof a?a:function(){}}function y(t){return d(t,"spacing",8)}function g(t,e){if("string"===typeof e||null==e)return e;var n=t(Math.abs(e));return e>=0?n:"number"===typeof n?-n:"-".concat(n)}function v(t,e,n,r){if(-1===e.indexOf(n))return null;var o=function(t,e){return function(n){return t.reduce((function(t,r){return t[r]=g(e,n),t}),{})}}(c(n),r),a=t[n];return(0,i.k9)(t,a,o)}function m(t,e){var n=y(t.theme);return Object.keys(t).map((function(r){return v(t,e,r,n)})).reduce(a.Z,{})}function b(t){return m(t,h)}function _(t){return m(t,p)}function w(t){return m(t,f)}b.propTypes={},b.filterProps=h,_.propTypes={},_.filterProps=p,w.propTypes={},w.filterProps=f},8529:function(t,e,n){"use strict";n.d(e,{DW:function(){return a},Jq:function(){return s}});var r=n(4572),i=n(7312),o=n(1184);function a(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||"string"!==typeof e)return null;if(t&&t.vars&&n){var r="vars.".concat(e).split(".").reduce((function(t,e){return t&&t[e]?t[e]:null}),t);if(null!=r)return r}return e.split(".").reduce((function(t,e){return t&&null!=t[e]?t[e]:null}),t)}function s(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof t?t(n):Array.isArray(t)?t[n]||i:a(t,n)||i,e&&(r=e(r,i,t)),r}e.ZP=function(t){var e=t.prop,n=t.cssProperty,l=void 0===n?t.prop:n,u=t.themeKey,c=t.transform,h=function(t){if(null==t[e])return null;var n=t[e],h=a(t.theme,u)||{};return(0,o.k9)(t,n,(function(t){var n=s(h,c,t);return t===n&&"string"===typeof t&&(n=s(h,c,"".concat(e).concat("default"===t?"":(0,i.Z)(t)),t)),!1===l?n:(0,r.Z)({},l,n)}))};return h.propTypes={},h.filterProps=[e],h}},7416:function(t,e,n){"use strict";n.d(e,{Z:function(){return C}});var r=n(5682),i=n(8529),o=n(8247);var a=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce((function(t,e){return e.filterProps.forEach((function(n){t[n]=e})),t}),{}),i=function(t){return Object.keys(t).reduce((function(e,n){return r[n]?(0,o.Z)(e,r[n](t)):e}),{})};return i.propTypes={},i.filterProps=e.reduce((function(t,e){return t.concat(e.filterProps)}),[]),i},s=n(1184);function l(t){return"number"!==typeof t?t:"".concat(t,"px solid")}var u=(0,i.ZP)({prop:"border",themeKey:"borders",transform:l}),c=(0,i.ZP)({prop:"borderTop",themeKey:"borders",transform:l}),h=(0,i.ZP)({prop:"borderRight",themeKey:"borders",transform:l}),p=(0,i.ZP)({prop:"borderBottom",themeKey:"borders",transform:l}),f=(0,i.ZP)({prop:"borderLeft",themeKey:"borders",transform:l}),d=(0,i.ZP)({prop:"borderColor",themeKey:"palette"}),y=(0,i.ZP)({prop:"borderTopColor",themeKey:"palette"}),g=(0,i.ZP)({prop:"borderRightColor",themeKey:"palette"}),v=(0,i.ZP)({prop:"borderBottomColor",themeKey:"palette"}),m=(0,i.ZP)({prop:"borderLeftColor",themeKey:"palette"}),b=function(t){if(void 0!==t.borderRadius&&null!==t.borderRadius){var e=(0,r.eI)(t.theme,"shape.borderRadius",4,"borderRadius");return(0,s.k9)(t,t.borderRadius,(function(t){return{borderRadius:(0,r.NA)(e,t)}}))}return null};b.propTypes={},b.filterProps=["borderRadius"];a(u,c,h,p,f,d,y,g,v,m,b);var _=function(t){if(void 0!==t.gap&&null!==t.gap){var e=(0,r.eI)(t.theme,"spacing",8,"gap");return(0,s.k9)(t,t.gap,(function(t){return{gap:(0,r.NA)(e,t)}}))}return null};_.propTypes={},_.filterProps=["gap"];var w=function(t){if(void 0!==t.columnGap&&null!==t.columnGap){var e=(0,r.eI)(t.theme,"spacing",8,"columnGap");return(0,s.k9)(t,t.columnGap,(function(t){return{columnGap:(0,r.NA)(e,t)}}))}return null};w.propTypes={},w.filterProps=["columnGap"];var x=function(t){if(void 0!==t.rowGap&&null!==t.rowGap){var e=(0,r.eI)(t.theme,"spacing",8,"rowGap");return(0,s.k9)(t,t.rowGap,(function(t){return{rowGap:(0,r.NA)(e,t)}}))}return null};x.propTypes={},x.filterProps=["rowGap"];a(_,w,x,(0,i.ZP)({prop:"gridColumn"}),(0,i.ZP)({prop:"gridRow"}),(0,i.ZP)({prop:"gridAutoFlow"}),(0,i.ZP)({prop:"gridAutoColumns"}),(0,i.ZP)({prop:"gridAutoRows"}),(0,i.ZP)({prop:"gridTemplateColumns"}),(0,i.ZP)({prop:"gridTemplateRows"}),(0,i.ZP)({prop:"gridTemplateAreas"}),(0,i.ZP)({prop:"gridArea"}));function k(t,e){return"grey"===e?e:t}a((0,i.ZP)({prop:"color",themeKey:"palette",transform:k}),(0,i.ZP)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:k}),(0,i.ZP)({prop:"backgroundColor",themeKey:"palette",transform:k}));function E(t){return t<=1&&0!==t?"".concat(100*t,"%"):t}var T=(0,i.ZP)({prop:"width",transform:E}),A=function(t){if(void 0!==t.maxWidth&&null!==t.maxWidth){return(0,s.k9)(t,t.maxWidth,(function(e){var n,r,i;return{maxWidth:(null==(n=t.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[e])||s.VO[e]||E(e)}}))}return null};A.filterProps=["maxWidth"];var S=(0,i.ZP)({prop:"minWidth",transform:E}),M=(0,i.ZP)({prop:"height",transform:E}),I=(0,i.ZP)({prop:"maxHeight",transform:E}),O=(0,i.ZP)({prop:"minHeight",transform:E}),C=((0,i.ZP)({prop:"size",cssProperty:"width",transform:E}),(0,i.ZP)({prop:"size",cssProperty:"height",transform:E}),a(T,A,S,M,I,O,(0,i.ZP)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:b},color:{themeKey:"palette",transform:k},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:k},backgroundColor:{themeKey:"palette",transform:k},p:{style:r.o3},pt:{style:r.o3},pr:{style:r.o3},pb:{style:r.o3},pl:{style:r.o3},px:{style:r.o3},py:{style:r.o3},padding:{style:r.o3},paddingTop:{style:r.o3},paddingRight:{style:r.o3},paddingBottom:{style:r.o3},paddingLeft:{style:r.o3},paddingX:{style:r.o3},paddingY:{style:r.o3},paddingInline:{style:r.o3},paddingInlineStart:{style:r.o3},paddingInlineEnd:{style:r.o3},paddingBlock:{style:r.o3},paddingBlockStart:{style:r.o3},paddingBlockEnd:{style:r.o3},m:{style:r.e6},mt:{style:r.e6},mr:{style:r.e6},mb:{style:r.e6},ml:{style:r.e6},mx:{style:r.e6},my:{style:r.e6},margin:{style:r.e6},marginTop:{style:r.e6},marginRight:{style:r.e6},marginBottom:{style:r.e6},marginLeft:{style:r.e6},marginX:{style:r.e6},marginY:{style:r.e6},marginInline:{style:r.e6},marginInlineStart:{style:r.e6},marginInlineEnd:{style:r.e6},marginBlock:{style:r.e6},marginBlockStart:{style:r.e6},marginBlockEnd:{style:r.e6},displayPrint:{cssProperty:!1,transform:function(t){return{"@media print":{display:t}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:_},rowGap:{style:x},columnGap:{style:w},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:E},maxWidth:{style:A},minWidth:{transform:E},height:{transform:E},maxHeight:{transform:E},minHeight:{transform:E},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},104:function(t,e,n){"use strict";var r=n(4572),i=n(7312),o=n(8247),a=n(8529),s=n(1184),l=n(7416);var u=function(){function t(t,e,n,o){var l,u=(l={},(0,r.Z)(l,t,e),(0,r.Z)(l,"theme",n),l),c=o[t];if(!c)return(0,r.Z)({},t,e);var h=c.cssProperty,p=void 0===h?t:h,f=c.themeKey,d=c.transform,y=c.style;if(null==e)return null;var g=(0,a.DW)(n,f)||{};if(y)return y(u);return(0,s.k9)(u,e,(function(e){var n=(0,a.Jq)(g,d,e);return e===n&&"string"===typeof e&&(n=(0,a.Jq)(g,d,"".concat(t).concat("default"===e?"":(0,i.Z)(e)),e)),!1===p?n:(0,r.Z)({},p,n)}))}return function e(n){var i,a=n||{},u=a.sx,c=a.theme,h=void 0===c?{}:c;if(!u)return null;var p=null!=(i=h.unstable_sxConfig)?i:l.Z;function f(n){var i=n;if("function"===typeof n)i=n(h);else if("object"!==typeof n)return n;if(!i)return null;var a=(0,s.W8)(h.breakpoints),l=Object.keys(a),u=a;return Object.keys(i).forEach((function(n){var a,l,c=(a=i[n],l=h,"function"===typeof a?a(l):a);if(null!==c&&void 0!==c)if("object"===typeof c)if(p[n])u=(0,o.Z)(u,t(n,c,h,p));else{var f=(0,s.k9)({theme:h},c,(function(t){return(0,r.Z)({},n,t)}));!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce((function(t,e){return t.concat(Object.keys(e))}),[]),i=new Set(r);return e.every((function(t){return i.size===Object.keys(t).length}))}(f,c)?u=(0,o.Z)(u,f):u[n]=e({sx:c,theme:h})}else u=(0,o.Z)(u,t(n,c,h,p))})),(0,s.L7)(l,u)}return Array.isArray(u)?u.map(f):f(u)}}();u.filterProps=["sx"],e.Z=u},886:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var r=n(5080),i=n(2791);var o=i.createContext(null);var a=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=i.useContext(o);return n&&(t=n,0!==Object.keys(t).length)?n:e},s=(0,r.Z)();var l=function(){return a(arguments.length>0&&void 0!==arguments[0]?arguments[0]:s)}},7078:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(5735);var i=n(886);function o(t){var e=t.props,n=t.name,o=t.defaultTheme,a=function(t){var e=t.theme,n=t.name,i=t.props;return e&&e.components&&e.components[n]&&e.components[n].defaultProps?(0,r.Z)(e.components[n].defaultProps,i):i}({theme:(0,i.Z)(o),name:n,props:e});return a}},5902:function(t,e){"use strict";var n=function(t){return t},r=function(){var t=n;return{configure:function(e){t=e},generate:function(e){return t(e)},reset:function(){t=n}}}();e.Z=r},7312:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(6189);function i(t){if("string"!==typeof t)throw new Error((0,r.Z)(7));return t.charAt(0).toUpperCase()+t.slice(1)}},4419:function(t,e,n){"use strict";function r(t,e,n){var r={};return Object.keys(t).forEach((function(i){r[i]=t[i].reduce((function(t,r){return r&&(t.push(e(r)),n&&n[r]&&t.push(n[r])),t}),[]).join(" ")})),r}n.d(e,{Z:function(){return r}})},2466:function(t,e,n){"use strict";n.d(e,{P:function(){return i},Z:function(){return a}});var r=n(7462);function i(t){return null!==t&&"object"===typeof t&&t.constructor===Object}function o(t){if(!i(t))return t;var e={};return Object.keys(t).forEach((function(n){e[n]=o(t[n])})),e}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},s=n.clone?(0,r.Z)({},t):t;return i(t)&&i(e)&&Object.keys(e).forEach((function(r){"__proto__"!==r&&(i(e[r])&&r in t&&i(t[r])?s[r]=a(t[r],e[r],n):n.clone?s[r]=i(e[r])?o(e[r]):e[r]:s[r]=e[r])})),s}},6189:function(t,e,n){"use strict";function r(t){for(var e="https://mui.com/production-error/?code="+t,n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}n.d(e,{Z:function(){return r}})},1217:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(5902),i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",o=i[e];return o?"".concat(n,"-").concat(o):"".concat(r.Z.generate(t),"-").concat(e)}},5878:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(1217);function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",i={};return e.forEach((function(e){i[e]=(0,r.Z)(t,e,n)})),i}},5735:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(7462);function i(t,e){var n=(0,r.Z)({},e);return Object.keys(t).forEach((function(o){if(o.toString().match(/^(components|slots)$/))n[o]=(0,r.Z)({},t[o],n[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){var a=t[o]||{},s=e[o];n[o]={},s&&Object.keys(s)?a&&Object.keys(a)?(n[o]=(0,r.Z)({},s),Object.keys(a).forEach((function(t){n[o][t]=i(a[t],s[t])}))):n[o]=s:n[o]=a}else void 0===n[o]&&(n[o]=t[o])})),n}},2971:function(t,e,n){"use strict";function r(t,e){"function"===typeof t?t(e):t&&(t.current=e)}n.d(e,{Z:function(){return r}})},5721:function(t,e,n){"use strict";var r=n(2791),i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;e.Z=i},8182:function(t,e,n){"use strict";function r(t){var e,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=r(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}e.Z=function(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=r(t))&&(i&&(i+=" "),i+=e);return i}},2110:function(t,e,n){"use strict";var r=n(7441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(t){return r.isMemo(t)?a:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,d=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(d){var i=f(n);i&&i!==d&&t(e,i,r)}var a=c(n);h&&(a=a.concat(h(n)));for(var s=l(e),y=l(n),g=0;g<a.length;++g){var v=a[g];if(!o[v]&&(!r||!r[v])&&(!y||!y[v])&&(!s||!s[v])){var m=p(n,v);try{u(e,v,m)}catch(b){}}}}return e}},4463:function(t,e,n){"use strict";var r=n(2791),i=n(5296);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(s[t]=e,t=0;t<e.length;t++)a.add(e[t])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},d={};function y(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new y(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new y(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new y(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new y(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new y(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new y(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new y(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new y(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new y(t,5,!1,t.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function m(t){return t[1].toUpperCase()}function b(t,e,n,r){var i=g.hasOwnProperty(e)?g[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!h.call(d,t)||!h.call(f,t)&&(p.test(t)?d[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(v,m);g[e]=new y(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(v,m);g[e]=new y(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(v,m);g[e]=new y(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new y(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new y(t,1,!1,t.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),S=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function N(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=R&&t[R]||t["@@iterator"])?t:null}var j,D=Object.assign;function z(t){if(void 0===j)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);j=e&&e[1]||""}return"\n"+j+t}var F=!1;function B(t,e){if(!t||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?z(t):""}function G(t){switch(t.tag){case 5:return z(t.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return t=B(t.type,!1);case 11:return t=B(t.type.render,!1);case 1:return t=B(t.type,!0);default:return""}}function H(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case k:return"Fragment";case x:return"Portal";case T:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case O:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case S:return(t.displayName||"Context")+".Consumer";case A:return(t._context.displayName||"Context")+".Provider";case M:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case C:return null!==(e=t.displayName||null)?e:H(t.type)||"Memo";case L:e=t._payload,t=t._init;try{return H(t(e))}catch(n){}}return null}function U(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(e);case 8:return e===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function q(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function V(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Z(t){t._valueTracker||(t._valueTracker=function(t){var e=V(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function W(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=V(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function Y(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function K(t,e){var n=e.checked;return D({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function X(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=q(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function J(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function $(t,e){J(t,e);var n=q(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,q(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Q(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&Y(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+q(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return D({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:q(n)}}function ot(t,e){var n=q(e.value),r=q(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function st(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?st(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ut,ct,ht=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ct(t,e)}))}:ct);function pt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dt=["Webkit","ms","Moz","O"];function yt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function gt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=yt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ft).forEach((function(t){dt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var vt=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mt(t,e){if(e){if(vt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=null;function wt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var xt=null,kt=null,Et=null;function Tt(t){if(t=bi(t)){if("function"!==typeof xt)throw Error(o(280));var e=t.stateNode;e&&(e=wi(e),xt(t.stateNode,t.type,e))}}function At(t){kt?Et?Et.push(t):Et=[t]:kt=t}function St(){if(kt){var t=kt,e=Et;if(Et=kt=null,Tt(t),e)for(t=0;t<e.length;t++)Tt(e[t])}}function Mt(t,e){return t(e)}function It(){}var Ot=!1;function Ct(t,e,n){if(Ot)return t(e,n);Ot=!0;try{return Mt(t,e,n)}finally{Ot=!1,(null!==kt||null!==Et)&&(It(),St())}}function Lt(t,e){var n=t.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var Pt=!1;if(c)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Pt=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch(ct){Pt=!1}function Nt(t,e,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var jt=!1,Dt=null,zt=!1,Ft=null,Bt={onError:function(t){jt=!0,Dt=t}};function Gt(t,e,n,r,i,o,a,s,l){jt=!1,Dt=null,Nt.apply(Bt,arguments)}function Ht(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Ut(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function qt(t){if(Ht(t)!==t)throw Error(o(188))}function Vt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Ht(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qt(i),t;if(a===r)return qt(i),e;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?Zt(t):null}function Zt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Zt(t);if(null!==e)return e;t=t.sibling}return null}var Wt=i.unstable_scheduleCallback,Yt=i.unstable_cancelCallback,Kt=i.unstable_shouldYield,Xt=i.unstable_requestPaint,Jt=i.unstable_now,$t=i.unstable_getCurrentPriorityLevel,Qt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,oe=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(se(t)/le|0)|0},se=Math.log,le=Math.LN2;var ue=64,ce=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pe(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=he(s):0!==(o&=a)&&(r=he(o))}else 0!==(a=n&~i)?r=he(a):0!==o&&(r=he(o));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-ae(e)),r|=t[n],e&=~i;return r}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function de(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ye(){var t=ue;return 0===(4194240&(ue<<=1))&&(ue=64),t}function ge(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ve(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=n}function me(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ae(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var be=0;function _e(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var we,xe,ke,Ee,Te,Ae=!1,Se=[],Me=null,Ie=null,Oe=null,Ce=new Map,Le=new Map,Pe=[],Re="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ne(t,e){switch(t){case"focusin":case"focusout":Me=null;break;case"dragenter":case"dragleave":Ie=null;break;case"mouseover":case"mouseout":Oe=null;break;case"pointerover":case"pointerout":Ce.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Le.delete(e.pointerId)}}function je(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=bi(e))&&xe(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function De(t){var e=mi(t.target);if(null!==e){var n=Ht(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Ut(n)))return t.blockedOn=e,void Te(t.priority,(function(){ke(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ze(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ke(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=bi(n))&&xe(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);_t=r,n.target.dispatchEvent(r),_t=null,e.shift()}return!0}function Fe(t,e,n){ze(t)&&n.delete(e)}function Be(){Ae=!1,null!==Me&&ze(Me)&&(Me=null),null!==Ie&&ze(Ie)&&(Ie=null),null!==Oe&&ze(Oe)&&(Oe=null),Ce.forEach(Fe),Le.forEach(Fe)}function Ge(t,e){t.blockedOn===e&&(t.blockedOn=null,Ae||(Ae=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Be)))}function He(t){function e(e){return Ge(e,t)}if(0<Se.length){Ge(Se[0],t);for(var n=1;n<Se.length;n++){var r=Se[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Me&&Ge(Me,t),null!==Ie&&Ge(Ie,t),null!==Oe&&Ge(Oe,t),Ce.forEach(e),Le.forEach(e),n=0;n<Pe.length;n++)(r=Pe[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Pe.length&&null===(n=Pe[0]).blockedOn;)De(n),null===n.blockedOn&&Pe.shift()}var Ue=_.ReactCurrentBatchConfig,qe=!0;function Ve(t,e,n,r){var i=be,o=Ue.transition;Ue.transition=null;try{be=1,We(t,e,n,r)}finally{be=i,Ue.transition=o}}function Ze(t,e,n,r){var i=be,o=Ue.transition;Ue.transition=null;try{be=4,We(t,e,n,r)}finally{be=i,Ue.transition=o}}function We(t,e,n,r){if(qe){var i=Ke(t,e,n,r);if(null===i)qr(t,e,r,Ye,n),Ne(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Me=je(Me,t,e,n,r,i),!0;case"dragenter":return Ie=je(Ie,t,e,n,r,i),!0;case"mouseover":return Oe=je(Oe,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ce.set(o,je(Ce.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Le.set(o,je(Le.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(Ne(t,r),4&e&&-1<Re.indexOf(t)){for(;null!==i;){var o=bi(i);if(null!==o&&we(o),null===(o=Ke(t,e,n,r))&&qr(t,e,r,Ye,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else qr(t,e,r,null,n)}}var Ye=null;function Ke(t,e,n,r){if(Ye=null,null!==(t=mi(t=wt(r))))if(null===(e=Ht(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Ut(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ye=t,null}function Xe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($t()){case Qt:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Je=null,$e=null,Qe=null;function tn(){if(Qe)return Qe;var t,e,n=$e,r=n.length,i="value"in Je?Je.value:Je.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return Qe=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return D(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var an,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),hn=D({},un,{view:0,detail:0}),pn=on(hn),fn=D({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(an=t.screenX-ln.screenX,sn=t.screenY-ln.screenY):sn=an=0,ln=t),an)},movementY:function(t){return"movementY"in t?t.movementY:sn}}),dn=on(fn),yn=on(D({},fn,{dataTransfer:0})),gn=on(D({},hn,{relatedTarget:0})),vn=on(D({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=D({},un,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bn=on(mn),_n=on(D({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=kn[t])&&!!e[t]}function Tn(){return En}var An=D({},hn,{key:function(t){if(t.key){var e=wn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?xn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Sn=on(An),Mn=on(D({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=on(D({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),On=on(D({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cn=D({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=on(Cn),Pn=[9,13,27,32],Rn=c&&"CompositionEvent"in window,Nn=null;c&&"documentMode"in document&&(Nn=document.documentMode);var jn=c&&"TextEvent"in window&&!Nn,Dn=c&&(!Rn||Nn&&8<Nn&&11>=Nn),zn=String.fromCharCode(32),Fn=!1;function Bn(t,e){switch(t){case"keyup":return-1!==Pn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Hn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Un[t.type]:"textarea"===e}function Vn(t,e,n,r){At(r),0<(e=Zr(e,"onChange")).length&&(n=new cn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zn=null,Wn=null;function Yn(t){zr(t,0)}function Kn(t){if(W(_i(t)))return t}function Xn(t,e){if("change"===t)return e}var Jn=!1;if(c){var $n;if(c){var Qn="oninput"in document;if(!Qn){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Qn="function"===typeof tr.oninput}$n=Qn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function er(){Zn&&(Zn.detachEvent("onpropertychange",nr),Wn=Zn=null)}function nr(t){if("value"===t.propertyName&&Kn(Wn)){var e=[];Vn(e,Wn,t,wt(t)),Ct(Yn,e)}}function rr(t,e,n){"focusin"===t?(er(),Wn=n,(Zn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Kn(Wn)}function or(t,e){if("click"===t)return Kn(e)}function ar(t,e){if("input"===t||"change"===t)return Kn(e)}var sr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function lr(t,e){if(sr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(e,i)||!sr(t[i],e[i]))return!1}return!0}function ur(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cr(t,e){var n,r=ur(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=ur(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function pr(){for(var t=window,e=Y();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=Y((t=e.contentWindow).document)}return e}function fr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function dr(t){var e=pr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var a=cr(n,r);i&&a&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,mr=null,br=!1;function _r(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},mr&&lr(mr,r)||(mr=r,0<(r=Zr(vr,"onSelect")).length&&(e=new cn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gr)))}function wr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Er={};function Tr(t){if(kr[t])return kr[t];if(!xr[t])return t;var e,n=xr[t];for(e in n)if(n.hasOwnProperty(e)&&e in Er)return kr[t]=n[e];return t}c&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Ar=Tr("animationend"),Sr=Tr("animationiteration"),Mr=Tr("animationstart"),Ir=Tr("transitionend"),Or=new Map,Cr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(t,e){Or.set(t,e),l(e,[t])}for(var Pr=0;Pr<Cr.length;Pr++){var Rr=Cr[Pr];Lr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Lr(Ar,"onAnimationEnd"),Lr(Sr,"onAnimationIteration"),Lr(Mr,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Ir,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nr));function Dr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,a,s,l,u){if(Gt.apply(this,arguments),jt){if(!jt)throw Error(o(198));var c=Dt;jt=!1,Dt=null,zt||(zt=!0,Ft=c)}}(r,e,void 0,t),t.currentTarget=null}function zr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break t;Dr(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break t;Dr(i,s,u),o=l}}}if(zt)throw t=Ft,zt=!1,Ft=null,t}function Fr(t,e){var n=e[yi];void 0===n&&(n=e[yi]=new Set);var r=t+"__bubble";n.has(r)||(Ur(e,t,2,!1),n.add(r))}function Br(t,e,n){var r=0;e&&(r|=4),Ur(n,t,r,e)}var Gr="_reactListening"+Math.random().toString(36).slice(2);function Hr(t){if(!t[Gr]){t[Gr]=!0,a.forEach((function(e){"selectionchange"!==e&&(jr.has(e)||Br(e,!1,t),Br(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Gr]||(e[Gr]=!0,Br("selectionchange",!1,e))}}function Ur(t,e,n,r){switch(Xe(e)){case 1:var i=Ve;break;case 4:i=Ze;break;default:i=We}n=i.bind(null,e,n,t),i=void 0,!Pt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function qr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=mi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue t}s=s.parentNode}}r=r.return}Ct((function(){var r=o,i=wt(n),a=[];t:{var s=Or.get(t);if(void 0!==s){var l=cn,u=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=Sn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Ar:case Sr:case Mr:l=vn;break;case Ir:l=On;break;case"scroll":l=pn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var c=0!==(4&e),h=!c&&"scroll"===t,p=c?null!==s?s+"Capture":null:s;c=[];for(var f,d=r;null!==d;){var y=(f=d).stateNode;if(5===f.tag&&null!==y&&(f=y,null!==p&&(null!=(y=Lt(d,p))&&c.push(Vr(d,y,f)))),h)break;d=d.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||n===_t||!(u=n.relatedTarget||n.fromElement)||!mi(u)&&!u[di])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?mi(u):null)&&(u!==(h=Ht(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=dn,y="onMouseLeave",p="onMouseEnter",d="mouse","pointerout"!==t&&"pointerover"!==t||(c=Mn,y="onPointerLeave",p="onPointerEnter",d="pointer"),h=null==l?s:_i(l),f=null==u?s:_i(u),(s=new c(y,d+"leave",l,n,i)).target=h,s.relatedTarget=f,y=null,mi(i)===r&&((c=new c(p,d+"enter",u,n,i)).target=f,c.relatedTarget=h,y=c),h=y,l&&u)t:{for(p=u,d=0,f=c=l;f;f=Wr(f))d++;for(f=0,y=p;y;y=Wr(y))f++;for(;0<d-f;)c=Wr(c),d--;for(;0<f-d;)p=Wr(p),f--;for(;d--;){if(c===p||null!==p&&c===p.alternate)break t;c=Wr(c),p=Wr(p)}c=null}else c=null;null!==l&&Yr(a,s,l,c,!1),null!==u&&null!==h&&Yr(a,h,u,c,!0)}if("select"===(l=(s=r?_i(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Xn;else if(qn(s))if(Jn)g=ar;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(t,r))?Vn(a,g,n,i):(v&&v(t,s,r),"focusout"===t&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&tt(s,"number",s.value)),v=r?_i(r):window,t){case"focusin":(qn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,mr=null);break;case"focusout":mr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(a,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":_r(a,n,i)}var m;if(Rn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Hn?Bn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(Dn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(m=tn()):($e="value"in(Je=i)?Je.value:Je.textContent,Hn=!0)),0<(v=Zr(r,b)).length&&(b=new _n(b,t,null,n,i),a.push({event:b,listeners:v}),m?b.data=m:null!==(m=Gn(n))&&(b.data=m))),(m=jn?function(t,e){switch(t){case"compositionend":return Gn(e);case"keypress":return 32!==e.which?null:(Fn=!0,zn);case"textInput":return(t=e.data)===zn&&Fn?null:t;default:return null}}(t,n):function(t,e){if(Hn)return"compositionend"===t||!Rn&&Bn(t,e)?(t=tn(),Qe=$e=Je=null,Hn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Zr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=m))}zr(a,e)}))}function Vr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Lt(t,n))&&r.unshift(Vr(t,o,i)),null!=(o=Lt(t,e))&&r.push(Vr(t,o,i))),t=t.return}return r}function Wr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Yr(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Lt(n,o))&&a.unshift(Vr(n,l,s)):i||null!=(l=Lt(n,o))&&a.push(Vr(n,l,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var Kr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(t){return("string"===typeof t?t:""+t).replace(Kr,"\n").replace(Xr,"")}function $r(t,e,n){if(e=Jr(e),Jr(t)!==e&&n)throw Error(o(425))}function Qr(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(t){return oi.resolve(null).then(t).catch(si)}:ri;function si(t){setTimeout((function(){throw t}))}function li(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void He(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);He(e)}function ui(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ci(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),pi="__reactFiber$"+hi,fi="__reactProps$"+hi,di="__reactContainer$"+hi,yi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function mi(t){var e=t[pi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[di]||n[pi]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ci(t);null!==t;){if(n=t[pi])return n;t=ci(t)}return e}n=(t=n).parentNode}return null}function bi(t){return!(t=t[pi]||t[di])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function _i(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function wi(t){return t[fi]||null}var xi=[],ki=-1;function Ei(t){return{current:t}}function Ti(t){0>ki||(t.current=xi[ki],xi[ki]=null,ki--)}function Ai(t,e){ki++,xi[ki]=t.current,t.current=e}var Si={},Mi=Ei(Si),Ii=Ei(!1),Oi=Si;function Ci(t,e){var n=t.type.contextTypes;if(!n)return Si;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Li(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Pi(){Ti(Ii),Ti(Mi)}function Ri(t,e,n){if(Mi.current!==Si)throw Error(o(168));Ai(Mi,e),Ai(Ii,n)}function Ni(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,U(t)||"Unknown",i));return D({},n,r)}function ji(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Si,Oi=Mi.current,Ai(Mi,t),Ai(Ii,Ii.current),!0}function Di(t,e,n){var r=t.stateNode;if(!r)throw Error(o(169));n?(t=Ni(t,e,Oi),r.__reactInternalMemoizedMergedChildContext=t,Ti(Ii),Ti(Mi),Ai(Mi,t)):Ti(Ii),Ai(Ii,n)}var zi=null,Fi=!1,Bi=!1;function Gi(t){null===zi?zi=[t]:zi.push(t)}function Hi(){if(!Bi&&null!==zi){Bi=!0;var t=0,e=be;try{var n=zi;for(be=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}zi=null,Fi=!1}catch(i){throw null!==zi&&(zi=zi.slice(t+1)),Wt(Qt,Hi),i}finally{be=e,Bi=!1}}return null}var Ui=[],qi=0,Vi=null,Zi=0,Wi=[],Yi=0,Ki=null,Xi=1,Ji="";function $i(t,e){Ui[qi++]=Zi,Ui[qi++]=Vi,Vi=t,Zi=e}function Qi(t,e,n){Wi[Yi++]=Xi,Wi[Yi++]=Ji,Wi[Yi++]=Ki,Ki=t;var r=Xi;t=Ji;var i=32-ae(r)-1;r&=~(1<<i),n+=1;var o=32-ae(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-ae(e)+i|n<<i|r,Ji=o+t}else Xi=1<<o|n<<i|r,Ji=t}function to(t){null!==t.return&&($i(t,1),Qi(t,1,0))}function eo(t){for(;t===Vi;)Vi=Ui[--qi],Ui[qi]=null,Zi=Ui[--qi],Ui[qi]=null;for(;t===Ki;)Ki=Wi[--Yi],Wi[Yi]=null,Ji=Wi[--Yi],Wi[Yi]=null,Xi=Wi[--Yi],Wi[Yi]=null}var no=null,ro=null,io=!1,oo=null;function ao(t,e){var n=Lu(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function so(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,no=t,ro=ui(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,no=t,ro=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Ki?{id:Xi,overflow:Ji}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Lu(18,null,null,0)).stateNode=e,n.return=t,t.child=n,no=t,ro=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function uo(t){if(io){var e=ro;if(e){var n=e;if(!so(t,e)){if(lo(t))throw Error(o(418));e=ui(n.nextSibling);var r=no;e&&so(t,e)?ao(r,n):(t.flags=-4097&t.flags|2,io=!1,no=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,io=!1,no=t}}}function co(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;no=t}function ho(t){if(t!==no)return!1;if(!io)return co(t),io=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=ro)){if(lo(t))throw po(),Error(o(418));for(;e;)ao(t,e),e=ui(e.nextSibling)}if(co(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ro=ui(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ro=null}}else ro=no?ui(t.stateNode.nextSibling):null;return!0}function po(){for(var t=ro;t;)t=ui(t.nextSibling)}function fo(){ro=no=null,io=!1}function yo(t){null===oo?oo=[t]:oo.push(t)}var go=_.ReactCurrentBatchConfig;function vo(t,e){if(t&&t.defaultProps){for(var n in e=D({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var mo=Ei(null),bo=null,_o=null,wo=null;function xo(){wo=_o=bo=null}function ko(t){var e=mo.current;Ti(mo),t._currentValue=e}function Eo(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function To(t,e){bo=t,wo=_o=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(_s=!0),t.firstContext=null)}function Ao(t){var e=t._currentValue;if(wo!==t)if(t={context:t,memoizedValue:e,next:null},null===_o){if(null===bo)throw Error(o(308));_o=t,bo.dependencies={lanes:0,firstContext:t}}else _o=_o.next=t;return e}var So=null;function Mo(t){null===So?So=[t]:So.push(t)}function Io(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,Mo(e)):(n.next=i.next,i.next=n),e.interleaved=n,Oo(t,r)}function Oo(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Co=!1;function Lo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Po(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ro(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function No(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Oo(t,n)}return null===(i=r.interleaved)?(e.next=e,Mo(r)):(e.next=i.next,i.next=e),r.interleaved=e,Oo(t,n)}function jo(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,me(t,n)}}function Do(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zo(t,e,n,r){var i=t.updateQueue;Co=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=t.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(a=0,c=u=l=null,s=o;;){var p=s.lane,f=s.eventTime;if((r&p)===p){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var d=t,y=s;switch(p=e,f=n,y.tag){case 1:if("function"===typeof(d=y.payload)){h=d.call(f,h,p);break t}h=d;break t;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(p="function"===typeof(d=y.payload)?d.call(f,h,p):d)||void 0===p)break t;h=D({},h,p);break t;case 2:Co=!0}}null!==s.callback&&0!==s.lane&&(t.flags|=64,null===(p=i.effects)?i.effects=[s]:p.push(s))}else f={eventTime:f,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,a|=p;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(p=s).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(e=i.shared.interleaved)){i=e;do{a|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Dl|=a,t.lanes=a,t.memoizedState=h}}function Fo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Bo=(new r.Component).refs;function Go(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:D({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Ho={isMounted:function(t){return!!(t=t._reactInternals)&&Ht(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=eu(),i=nu(t),o=Ro(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=No(t,o,i))&&(ru(e,t,i,r),jo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=eu(),i=nu(t),o=Ro(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=No(t,o,i))&&(ru(e,t,i,r),jo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=eu(),r=nu(t),i=Ro(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=No(t,i,r))&&(ru(e,t,r,n),jo(e,t,r))}};function Uo(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function qo(t,e,n){var r=!1,i=Si,o=e.contextType;return"object"===typeof o&&null!==o?o=Ao(o):(i=Li(e)?Oi:Mi.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?Ci(t,i):Si),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Ho,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Vo(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ho.enqueueReplaceState(e,e.state,null)}function Zo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Bo,Lo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=Ao(o):(o=Li(e)?Oi:Mi.current,i.context=Ci(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(Go(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Ho.enqueueReplaceState(i,i.state,null),zo(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function Wo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,t));var i=r,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=i.refs;e===Bo&&(e=i.refs={}),null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function Yo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ko(t){return(0,t._init)(t._payload)}function Xo(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Ru(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=zu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function u(t,e,n,r){var o=n.type;return o===k?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===L&&Ko(o)===e.type)?((r=i(e,n.props)).ref=Wo(t,e,n),r.return=t,r):((r=Nu(n.type,n.key,n.props,null,t.mode,r)).ref=Wo(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Fu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=ju(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function p(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=zu(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case w:return(n=Nu(e.type,e.key,e.props,null,t.mode,n)).ref=Wo(t,null,e),n.return=t,n;case x:return(e=Fu(e,t.mode,n)).return=t,e;case L:return p(t,(0,e._init)(e._payload),n)}if(et(e)||N(e))return(e=ju(e,t.mode,n,null)).return=t,e;Yo(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(t,e,n,r):null;case x:return n.key===i?c(t,e,n,r):null;case L:return f(t,e,(i=n._init)(n._payload),r)}if(et(n)||N(n))return null!==i?null:h(t,e,n,r,null);Yo(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case x:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case L:return d(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||N(r))return h(e,t=t.get(n)||null,r,i,null);Yo(e,r)}return null}function y(i,o,s,l){for(var u=null,c=null,h=o,y=o=0,g=null;null!==h&&y<s.length;y++){h.index>y?(g=h,h=null):g=h.sibling;var v=f(i,h,s[y],l);if(null===v){null===h&&(h=g);break}t&&h&&null===v.alternate&&e(i,h),o=a(v,o,y),null===c?u=v:c.sibling=v,c=v,h=g}if(y===s.length)return n(i,h),io&&$i(i,y),u;if(null===h){for(;y<s.length;y++)null!==(h=p(i,s[y],l))&&(o=a(h,o,y),null===c?u=h:c.sibling=h,c=h);return io&&$i(i,y),u}for(h=r(i,h);y<s.length;y++)null!==(g=d(h,i,y,s[y],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?y:g.key),o=a(g,o,y),null===c?u=g:c.sibling=g,c=g);return t&&h.forEach((function(t){return e(i,t)})),io&&$i(i,y),u}function g(i,s,l,u){var c=N(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,y=s,g=s=0,v=null,m=l.next();null!==y&&!m.done;g++,m=l.next()){y.index>g?(v=y,y=null):v=y.sibling;var b=f(i,y,m.value,u);if(null===b){null===y&&(y=v);break}t&&y&&null===b.alternate&&e(i,y),s=a(b,s,g),null===h?c=b:h.sibling=b,h=b,y=v}if(m.done)return n(i,y),io&&$i(i,g),c;if(null===y){for(;!m.done;g++,m=l.next())null!==(m=p(i,m.value,u))&&(s=a(m,s,g),null===h?c=m:h.sibling=m,h=m);return io&&$i(i,g),c}for(y=r(i,y);!m.done;g++,m=l.next())null!==(m=d(y,i,g,m.value,u))&&(t&&null!==m.alternate&&y.delete(null===m.key?g:m.key),s=a(m,s,g),null===h?c=m:h.sibling=m,h=m);return t&&y.forEach((function(t){return e(i,t)})),io&&$i(i,g),c}return function t(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:t:{for(var u=a.key,c=o;null!==c;){if(c.key===u){if((u=a.type)===k){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break t}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===L&&Ko(u)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=Wo(r,c,a),o.return=r,r=o;break t}n(r,c);break}e(r,c),c=c.sibling}a.type===k?((o=ju(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Nu(a.type,a.key,a.props,null,r.mode,l)).ref=Wo(r,o,a),l.return=r,r=l)}return s(r);case x:t:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break t}n(r,o);break}e(r,o),o=o.sibling}(o=Fu(a,r.mode,l)).return=r,r=o}return s(r);case L:return t(r,o,(c=a._init)(a._payload),l)}if(et(a))return y(r,o,a,l);if(N(a))return g(r,o,a,l);Yo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=zu(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var Jo=Xo(!0),$o=Xo(!1),Qo={},ta=Ei(Qo),ea=Ei(Qo),na=Ei(Qo);function ra(t){if(t===Qo)throw Error(o(174));return t}function ia(t,e){switch(Ai(na,e),Ai(ea,t),Ai(ta,Qo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ti(ta),Ai(ta,e)}function oa(){Ti(ta),Ti(ea),Ti(na)}function aa(t){ra(na.current);var e=ra(ta.current),n=lt(e,t.type);e!==n&&(Ai(ea,t),Ai(ta,n))}function sa(t){ea.current===t&&(Ti(ta),Ti(ea))}var la=Ei(0);function ua(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ca=[];function ha(){for(var t=0;t<ca.length;t++)ca[t]._workInProgressVersionPrimary=null;ca.length=0}var pa=_.ReactCurrentDispatcher,fa=_.ReactCurrentBatchConfig,da=0,ya=null,ga=null,va=null,ma=!1,ba=!1,_a=0,wa=0;function xa(){throw Error(o(321))}function ka(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function Ea(t,e,n,r,i,a){if(da=a,ya=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pa.current=null===t||null===t.memoizedState?ss:ls,t=n(r,i),ba){a=0;do{if(ba=!1,_a=0,25<=a)throw Error(o(301));a+=1,va=ga=null,e.updateQueue=null,pa.current=us,t=n(r,i)}while(ba)}if(pa.current=as,e=null!==ga&&null!==ga.next,da=0,va=ga=ya=null,ma=!1,e)throw Error(o(300));return t}function Ta(){var t=0!==_a;return _a=0,t}function Aa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===va?ya.memoizedState=va=t:va=va.next=t,va}function Sa(){if(null===ga){var t=ya.alternate;t=null!==t?t.memoizedState:null}else t=ga.next;var e=null===va?ya.memoizedState:va.next;if(null!==e)va=e,ga=t;else{if(null===t)throw Error(o(310));t={memoizedState:(ga=t).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===va?ya.memoizedState=va=t:va=va.next=t}return va}function Ma(t,e){return"function"===typeof e?e(t):e}function Ia(t){var e=Sa(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=ga,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,u=null,c=a;do{var h=c.lane;if((da&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=p,s=r):u=u.next=p,ya.lanes|=h,Dl|=h}c=c.next}while(null!==c&&c!==a);null===u?s=r:u.next=l,sr(r,e.memoizedState)||(_s=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{a=i.lane,ya.lanes|=a,Dl|=a,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Oa(t){var e=Sa(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=t(a,s.action),s=s.next}while(s!==i);sr(a,e.memoizedState)||(_s=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Ca(){}function La(t,e){var n=ya,r=Sa(),i=e(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,_s=!0),r=r.queue,qa(Na.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||null!==va&&1&va.memoizedState.tag){if(n.flags|=2048,Fa(9,Ra.bind(null,n,r,i,e),void 0,null),null===Ol)throw Error(o(349));0!==(30&da)||Pa(n,e,i)}return i}function Pa(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=ya.updateQueue)?(e={lastEffect:null,stores:null},ya.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ra(t,e,n,r){e.value=n,e.getSnapshot=r,ja(e)&&Da(t)}function Na(t,e,n){return n((function(){ja(e)&&Da(t)}))}function ja(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch(r){return!0}}function Da(t){var e=Oo(t,1);null!==e&&ru(e,t,1,-1)}function za(t){var e=Aa();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:t},e.queue=t,t=t.dispatch=ns.bind(null,ya,t),[e.memoizedState,t]}function Fa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=ya.updateQueue)?(e={lastEffect:null,stores:null},ya.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Ba(){return Sa().memoizedState}function Ga(t,e,n,r){var i=Aa();ya.flags|=t,i.memoizedState=Fa(1|e,n,void 0,void 0===r?null:r)}function Ha(t,e,n,r){var i=Sa();r=void 0===r?null:r;var o=void 0;if(null!==ga){var a=ga.memoizedState;if(o=a.destroy,null!==r&&ka(r,a.deps))return void(i.memoizedState=Fa(e,n,o,r))}ya.flags|=t,i.memoizedState=Fa(1|e,n,o,r)}function Ua(t,e){return Ga(8390656,8,t,e)}function qa(t,e){return Ha(2048,8,t,e)}function Va(t,e){return Ha(4,2,t,e)}function Za(t,e){return Ha(4,4,t,e)}function Wa(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ya(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Ha(4,4,Wa.bind(null,e,t),n)}function Ka(){}function Xa(t,e){var n=Sa();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ka(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ja(t,e){var n=Sa();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ka(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $a(t,e,n){return 0===(21&da)?(t.baseState&&(t.baseState=!1,_s=!0),t.memoizedState=n):(sr(n,e)||(n=ye(),ya.lanes|=n,Dl|=n,t.baseState=!0),e)}function Qa(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var r=fa.transition;fa.transition={};try{t(!1),e()}finally{be=n,fa.transition=r}}function ts(){return Sa().memoizedState}function es(t,e,n){var r=nu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(t))is(e,n);else if(null!==(n=Io(t,e,n,r))){ru(n,t,r,eu()),os(n,e,r)}}function ns(t,e,n){var r=nu(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(t))is(e,i);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=e.interleaved;return null===l?(i.next=i,Mo(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(u){}null!==(n=Io(t,e,i,r))&&(ru(n,t,r,i=eu()),os(n,e,r))}}function rs(t){var e=t.alternate;return t===ya||null!==e&&e===ya}function is(t,e){ba=ma=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function os(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,me(t,n)}}var as={readContext:Ao,useCallback:xa,useContext:xa,useEffect:xa,useImperativeHandle:xa,useInsertionEffect:xa,useLayoutEffect:xa,useMemo:xa,useReducer:xa,useRef:xa,useState:xa,useDebugValue:xa,useDeferredValue:xa,useTransition:xa,useMutableSource:xa,useSyncExternalStore:xa,useId:xa,unstable_isNewReconciler:!1},ss={readContext:Ao,useCallback:function(t,e){return Aa().memoizedState=[t,void 0===e?null:e],t},useContext:Ao,useEffect:Ua,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Ga(4194308,4,Wa.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ga(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ga(4,2,t,e)},useMemo:function(t,e){var n=Aa();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Aa();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=es.bind(null,ya,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Aa().memoizedState=t},useState:za,useDebugValue:Ka,useDeferredValue:function(t){return Aa().memoizedState=t},useTransition:function(){var t=za(!1),e=t[0];return t=Qa.bind(null,t[1]),Aa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ya,i=Aa();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===Ol)throw Error(o(349));0!==(30&da)||Pa(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,Ua(Na.bind(null,r,a,t),[t]),r.flags|=2048,Fa(9,Ra.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Aa(),e=Ol.identifierPrefix;if(io){var n=Ji;e=":"+e+"R"+(n=(Xi&~(1<<32-ae(Xi)-1)).toString(32)+n),0<(n=_a++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=wa++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ls={readContext:Ao,useCallback:Xa,useContext:Ao,useEffect:qa,useImperativeHandle:Ya,useInsertionEffect:Va,useLayoutEffect:Za,useMemo:Ja,useReducer:Ia,useRef:Ba,useState:function(){return Ia(Ma)},useDebugValue:Ka,useDeferredValue:function(t){return $a(Sa(),ga.memoizedState,t)},useTransition:function(){return[Ia(Ma)[0],Sa().memoizedState]},useMutableSource:Ca,useSyncExternalStore:La,useId:ts,unstable_isNewReconciler:!1},us={readContext:Ao,useCallback:Xa,useContext:Ao,useEffect:qa,useImperativeHandle:Ya,useInsertionEffect:Va,useLayoutEffect:Za,useMemo:Ja,useReducer:Oa,useRef:Ba,useState:function(){return Oa(Ma)},useDebugValue:Ka,useDeferredValue:function(t){var e=Sa();return null===ga?e.memoizedState=t:$a(e,ga.memoizedState,t)},useTransition:function(){return[Oa(Ma)[0],Sa().memoizedState]},useMutableSource:Ca,useSyncExternalStore:La,useId:ts,unstable_isNewReconciler:!1};function cs(t,e){try{var n="",r=e;do{n+=G(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i,digest:null}}function hs(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ps(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ds(t,e,n){(n=Ro(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vl||(Vl=!0,Zl=r),ps(0,e)},n}function ys(t,e,n){(n=Ro(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ps(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ps(0,e),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function gs(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new fs;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Au.bind(null,t,e,n),e.then(t,t))}function vs(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ms(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Ro(-1,1)).tag=2,No(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var bs=_.ReactCurrentOwner,_s=!1;function ws(t,e,n,r){e.child=null===t?$o(e,null,n,r):Jo(e,t.child,n,r)}function xs(t,e,n,r,i){n=n.render;var o=e.ref;return To(e,i),r=Ea(t,e,n,r,o,i),n=Ta(),null===t||_s?(io&&n&&to(e),e.flags|=1,ws(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vs(t,e,i))}function ks(t,e,n,r,i){if(null===t){var o=n.type;return"function"!==typeof o||Pu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Nu(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Es(t,e,o,r,i))}if(o=t.child,0===(t.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&t.ref===e.ref)return Vs(t,e,i)}return e.flags|=1,(t=Ru(o,r)).ref=e.ref,t.return=e,e.child=t}function Es(t,e,n,r,i){if(null!==t){var o=t.memoizedProps;if(lr(o,r)&&t.ref===e.ref){if(_s=!1,e.pendingProps=r=o,0===(t.lanes&i))return e.lanes=t.lanes,Vs(t,e,i);0!==(131072&t.flags)&&(_s=!0)}}return Ss(t,e,n,r,i)}function Ts(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Rl,Pl),Pl|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ai(Rl,Pl),Pl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ai(Rl,Pl),Pl|=r}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ai(Rl,Pl),Pl|=r;return ws(t,e,i,n),e.child}function As(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ss(t,e,n,r,i){var o=Li(n)?Oi:Mi.current;return o=Ci(e,o),To(e,i),n=Ea(t,e,n,r,o,i),r=Ta(),null===t||_s?(io&&r&&to(e),e.flags|=1,ws(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vs(t,e,i))}function Ms(t,e,n,r,i){if(Li(n)){var o=!0;ji(e)}else o=!1;if(To(e,i),null===e.stateNode)qs(t,e),qo(e,n,r),Zo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ao(u):u=Ci(e,u=Li(n)?Oi:Mi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==u)&&Vo(e,a,r,u),Co=!1;var p=e.memoizedState;a.state=p,zo(e,r,a,i),l=e.memoizedState,s!==r||p!==l||Ii.current||Co?("function"===typeof c&&(Go(e,n,c,r),l=e.memoizedState),(s=Co||Uo(e,n,s,r,p,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"===typeof a.componentDidMount&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Po(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:vo(e.type,s),a.props=u,h=e.pendingProps,p=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ao(l):l=Ci(e,l=Li(n)?Oi:Mi.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||p!==l)&&Vo(e,a,r,l),Co=!1,p=e.memoizedState,a.state=p,zo(e,r,a,i);var d=e.memoizedState;s!==h||p!==d||Ii.current||Co?("function"===typeof f&&(Go(e,n,f,r),d=e.memoizedState),(u=Co||Uo(e,n,u,r,p,d,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=d),a.props=r,a.state=d,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Is(t,e,n,r,o,i)}function Is(t,e,n,r,i,o){As(t,e);var a=0!==(128&e.flags);if(!r&&!a)return i&&Di(e,n,!1),Vs(t,e,o);r=e.stateNode,bs.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=Jo(e,t.child,null,o),e.child=Jo(e,null,s,o)):ws(t,e,s,o),e.memoizedState=r.state,i&&Di(e,n,!0),e.child}function Os(t){var e=t.stateNode;e.pendingContext?Ri(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ri(0,e.context,!1),ia(t,e.containerInfo)}function Cs(t,e,n,r,i){return fo(),yo(i),e.flags|=256,ws(t,e,n,r),e.child}var Ls,Ps,Rs,Ns,js={dehydrated:null,treeContext:null,retryLane:0};function Ds(t){return{baseLanes:t,cachePool:null,transitions:null}}function zs(t,e,n){var r,i=e.pendingProps,a=la.current,s=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&a)),r?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Ai(la,1&a),null===t)return uo(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,s?(i=e.mode,s=e.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Du(l,i,0,null),t=ju(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ds(n),e.memoizedState=js,t):Fs(e,l));if(null!==(a=t.memoizedState)&&null!==(r=a.dehydrated))return function(t,e,n,r,i,a,s){if(n)return 256&e.flags?(e.flags&=-257,Bs(t,e,s,r=hs(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Du({mode:"visible",children:r.children},i,0,null),(a=ju(a,i,s,null)).flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,0!==(1&e.mode)&&Jo(e,t.child,null,s),e.child.memoizedState=Ds(s),e.memoizedState=js,a);if(0===(1&e.mode))return Bs(t,e,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Bs(t,e,s,r=hs(a=Error(o(419)),r,void 0))}if(l=0!==(s&t.childLanes),_s||l){if(null!==(r=Ol)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Oo(t,i),ru(r,t,i,-1))}return gu(),Bs(t,e,s,r=hs(Error(o(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Mu.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ro=ui(i.nextSibling),no=e,io=!0,oo=null,null!==t&&(Wi[Yi++]=Xi,Wi[Yi++]=Ji,Wi[Yi++]=Ki,Xi=t.id,Ji=t.overflow,Ki=e),e=Fs(e,r.children),e.flags|=4096,e)}(t,e,l,i,r,a,n);if(s){s=i.fallback,l=e.mode,r=(a=t.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&e.child!==a?((i=e.child).childLanes=0,i.pendingProps=u,e.deletions=null):(i=Ru(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Ru(r,s):(s=ju(s,l,n,null)).flags|=2,s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,l=null===(l=t.child.memoizedState)?Ds(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=js,i}return t=(s=t.child).sibling,i=Ru(s,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Fs(t,e){return(e=Du({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Bs(t,e,n,r){return null!==r&&yo(r),Jo(e,t.child,null,n),(t=Fs(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Gs(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),Eo(t.return,e,n)}function Hs(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Us(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(ws(t,e,r.children,n),0!==(2&(r=la.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Gs(t,n,e);else if(19===t.tag)Gs(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ai(la,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===ua(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Hs(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===ua(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Hs(e,!0,n,null,o);break;case"together":Hs(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qs(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vs(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Dl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Ru(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Ru(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Zs(t,e){if(!io)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ws(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ys(t,e,n){var r=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(e),null;case 1:case 17:return Li(e.type)&&Pi(),Ws(e),null;case 3:return r=e.stateNode,oa(),Ti(Ii),Ti(Mi),ha(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ho(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(su(oo),oo=null))),Ps(t,e),Ws(e),null;case 5:sa(e);var i=ra(na.current);if(n=e.type,null!==t&&null!=e.stateNode)Rs(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(o(166));return Ws(e),null}if(t=ra(ta.current),ho(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[pi]=e,r[fi]=a,t=0!==(1&e.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Nr.length;i++)Fr(Nr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":X(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":it(r,a),Fr("invalid",r)}for(var l in mt(n,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,u,t),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,u,t),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":Z(r),Q(r,a,!0);break;case"textarea":Z(r),at(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Qr)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=st(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[pi]=e,t[fi]=r,Ls(t,e,!1,!1),e.stateNode=t;t:{switch(l=bt(n,r),n){case"dialog":Fr("cancel",t),Fr("close",t),i=r;break;case"iframe":case"object":case"embed":Fr("load",t),i=r;break;case"video":case"audio":for(i=0;i<Nr.length;i++)Fr(Nr[i],t);i=r;break;case"source":Fr("error",t),i=r;break;case"img":case"image":case"link":Fr("error",t),Fr("load",t),i=r;break;case"details":Fr("toggle",t),i=r;break;case"input":X(t,r),i=K(t,r),Fr("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=D({},r,{value:void 0}),Fr("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),Fr("invalid",t)}for(a in mt(n,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?gt(t,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&ht(t,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&pt(t,c):"number"===typeof c&&pt(t,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Fr("scroll",t):null!=c&&b(t,a,c,l))}switch(n){case"input":Z(t),Q(t,r,!1);break;case"textarea":Z(t),at(t);break;case"option":null!=r.value&&t.setAttribute("value",""+q(r.value));break;case"select":t.multiple=!!r.multiple,null!=(a=r.value)?nt(t,!!r.multiple,a,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ws(e),null;case 6:if(t&&null!=e.stateNode)Ns(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ta.current),ho(e)){if(r=e.stateNode,n=e.memoizedProps,r[pi]=e,(a=r.nodeValue!==n)&&null!==(t=no))switch(t.tag){case 3:$r(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&t.mode))}a&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=e,e.stateNode=r}return Ws(e),null;case 13:if(Ti(la),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&e.mode)&&0===(128&e.flags))po(),fo(),e.flags|=98560,a=!1;else if(a=ho(e),null!==r&&null!==r.dehydrated){if(null===t){if(!a)throw Error(o(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(o(317));a[pi]=e}else fo(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Ws(e),a=!1}else null!==oo&&(su(oo),oo=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&la.current)?0===Nl&&(Nl=3):gu())),null!==e.updateQueue&&(e.flags|=4),Ws(e),null);case 4:return oa(),Ps(t,e),null===t&&Hr(e.stateNode.containerInfo),Ws(e),null;case 10:return ko(e.type._context),Ws(e),null;case 19:if(Ti(la),null===(a=e.memoizedState))return Ws(e),null;if(r=0!==(128&e.flags),null===(l=a.rendering))if(r)Zs(a,!1);else{if(0!==Nl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=ua(t))){for(e.flags|=128,Zs(a,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ai(la,1&la.current|2),e.child}t=t.sibling}null!==a.tail&&Jt()>Ul&&(e.flags|=128,r=!0,Zs(a,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=ua(l))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Zs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Ws(e),null}else 2*Jt()-a.renderingStartTime>Ul&&1073741824!==n&&(e.flags|=128,r=!0,Zs(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=a.last)?n.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Jt(),e.sibling=null,n=la.current,Ai(la,r?1&n|2:1&n),e):(Ws(e),null);case 22:case 23:return pu(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Pl)&&(Ws(e),6&e.subtreeFlags&&(e.flags|=8192)):Ws(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function Ks(t,e){switch(eo(e),e.tag){case 1:return Li(e.type)&&Pi(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return oa(),Ti(Ii),Ti(Mi),ha(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return sa(e),null;case 13:if(Ti(la),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));fo()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ti(la),null;case 4:return oa(),null;case 10:return ko(e.type._context),null;case 22:case 23:return pu(),null;default:return null}}Ls=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ps=function(){},Rs=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ra(ta.current);var o,a=null;switch(n){case"input":i=K(t,i),r=K(t,r),a=[];break;case"select":i=D({},i,{value:void 0}),r=D({},r,{value:void 0}),a=[];break;case"textarea":i=rt(t,i),r=rt(t,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(t.onclick=Qr)}for(c in mt(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Fr("scroll",t),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(e.updateQueue=c)&&(e.flags|=4)}},Ns=function(t,e,n,r){n!==r&&(e.flags|=4)};var Xs=!1,Js=!1,$s="function"===typeof WeakSet?WeakSet:Set,Qs=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tu(t,e,r)}else n.current=null}function el(t,e,n){try{n()}catch(r){Tu(t,e,r)}}var nl=!1;function rl(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(e,n,o)}i=i.next}while(i!==r)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ol(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function al(t){var e=t.alternate;null!==e&&(t.alternate=null,al(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[pi],delete e[fi],delete e[yi],delete e[gi],delete e[vi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sl(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||sl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ul(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Qr));else if(4!==r&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}function cl(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var hl=null,pl=!1;function fl(t,e,n){for(n=n.child;null!==n;)dl(t,e,n),n=n.sibling}function dl(t,e,n){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,n)}catch(s){}switch(n.tag){case 5:Js||tl(n,e);case 6:var r=hl,i=pl;hl=null,fl(t,e,n),pl=i,null!==(hl=r)&&(pl?(t=hl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(pl?(t=hl,n=n.stateNode,8===t.nodeType?li(t.parentNode,n):1===t.nodeType&&li(t,n),He(t)):li(hl,n.stateNode));break;case 4:r=hl,i=pl,hl=n.stateNode.containerInfo,pl=!0,fl(t,e,n),hl=r,pl=i;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,e,a),i=i.next}while(i!==r)}fl(t,e,n);break;case 1:if(!Js&&(tl(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Tu(n,e,s)}fl(t,e,n);break;case 21:fl(t,e,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,fl(t,e,n),Js=r):fl(t,e,n);break;default:fl(t,e,n)}}function yl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new $s),e.forEach((function(e){var r=Iu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function gl(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,l=s;t:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,pl=!1;break t;case 3:case 4:hl=l.stateNode.containerInfo,pl=!0;break t}l=l.return}if(null===hl)throw Error(o(160));dl(a,s,i),hl=null,pl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Tu(i,e,c)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)vl(e,t),e=e.sibling}function vl(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gl(e,t),ml(t),4&r){try{rl(3,t,t.return),il(3,t)}catch(g){Tu(t,t.return,g)}try{rl(5,t,t.return)}catch(g){Tu(t,t.return,g)}}break;case 1:gl(e,t),ml(t),512&r&&null!==n&&tl(n,n.return);break;case 5:if(gl(e,t),ml(t),512&r&&null!==n&&tl(n,n.return),32&t.flags){var i=t.stateNode;try{pt(i,"")}catch(g){Tu(t,t.return,g)}}if(4&r&&null!=(i=t.stateNode)){var a=t.memoizedProps,s=null!==n?n.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(i,a),bt(l,s);var c=bt(l,a);for(s=0;s<u.length;s+=2){var h=u[s],p=u[s+1];"style"===h?gt(i,p):"dangerouslySetInnerHTML"===h?ht(i,p):"children"===h?pt(i,p):b(i,h,p,c)}switch(l){case"input":$(i,a);break;case"textarea":ot(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var d=a.value;null!=d?nt(i,!!a.multiple,d,!1):f!==!!a.multiple&&(null!=a.defaultValue?nt(i,!!a.multiple,a.defaultValue,!0):nt(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){Tu(t,t.return,g)}}break;case 6:if(gl(e,t),ml(t),4&r){if(null===t.stateNode)throw Error(o(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(g){Tu(t,t.return,g)}}break;case 3:if(gl(e,t),ml(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{He(e.containerInfo)}catch(g){Tu(t,t.return,g)}break;case 4:default:gl(e,t),ml(t);break;case 13:gl(e,t),ml(t),8192&(i=t.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Hl=Jt())),4&r&&yl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Js=(c=Js)||h,gl(e,t),Js=c):gl(e,t),ml(t),8192&r){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!h&&0!==(1&t.mode))for(Qs=t,h=t.child;null!==h;){for(p=Qs=h;null!==Qs;){switch(d=(f=Qs).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:tl(f,f.return);var y=f.stateNode;if("function"===typeof y.componentWillUnmount){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){Tu(r,n,g)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){xl(p);continue}}null!==d?(d.return=f,Qs=d):xl(p)}h=h.sibling}t:for(h=null,p=t;;){if(5===p.tag){if(null===h){h=p;try{i=p.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=p.stateNode,s=void 0!==(u=p.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=yt("display",s))}catch(g){Tu(t,t.return,g)}}}else if(6===p.tag){if(null===h)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(g){Tu(t,t.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===t)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===t)break t;for(;null===p.sibling;){if(null===p.return||p.return===t)break t;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:gl(e,t),ml(t),4&r&&yl(t);case 21:}}function ml(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(sl(n)){var r=n;break t}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(pt(i,""),r.flags&=-33),cl(t,ll(t),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ul(t,ll(t),a);break;default:throw Error(o(161))}}catch(s){Tu(t,t.return,s)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function bl(t,e,n){Qs=t,_l(t,e,n)}function _l(t,e,n){for(var r=0!==(1&t.mode);null!==Qs;){var i=Qs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Xs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Js;s=Xs;var u=Js;if(Xs=a,(Js=l)&&!u)for(Qs=i;null!==Qs;)l=(a=Qs).child,22===a.tag&&null!==a.memoizedState?kl(i):null!==l?(l.return=a,Qs=l):kl(i);for(;null!==o;)Qs=o,_l(o,e,n),o=o.sibling;Qs=i,Xs=s,Js=u}wl(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Qs=o):wl(t)}}function wl(t){for(;null!==Qs;){var e=Qs;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Js||il(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Js)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vo(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Fo(e,a,r);break;case 3:var s=e.updateQueue;if(null!==s){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Fo(e,s,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var p=h.dehydrated;null!==p&&He(p)}}}break;default:throw Error(o(163))}Js||512&e.flags&&ol(e)}catch(f){Tu(e,e.return,f)}}if(e===t){Qs=null;break}if(null!==(n=e.sibling)){n.return=e.return,Qs=n;break}Qs=e.return}}function xl(t){for(;null!==Qs;){var e=Qs;if(e===t){Qs=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Qs=n;break}Qs=e.return}}function kl(t){for(;null!==Qs;){var e=Qs;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){Tu(e,n,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){Tu(e,i,l)}}var o=e.return;try{ol(e)}catch(l){Tu(e,o,l)}break;case 5:var a=e.return;try{ol(e)}catch(l){Tu(e,a,l)}}}catch(l){Tu(e,e.return,l)}if(e===t){Qs=null;break}var s=e.sibling;if(null!==s){s.return=e.return,Qs=s;break}Qs=e.return}}var El,Tl=Math.ceil,Al=_.ReactCurrentDispatcher,Sl=_.ReactCurrentOwner,Ml=_.ReactCurrentBatchConfig,Il=0,Ol=null,Cl=null,Ll=0,Pl=0,Rl=Ei(0),Nl=0,jl=null,Dl=0,zl=0,Fl=0,Bl=null,Gl=null,Hl=0,Ul=1/0,ql=null,Vl=!1,Zl=null,Wl=null,Yl=!1,Kl=null,Xl=0,Jl=0,$l=null,Ql=-1,tu=0;function eu(){return 0!==(6&Il)?Jt():-1!==Ql?Ql:Ql=Jt()}function nu(t){return 0===(1&t.mode)?1:0!==(2&Il)&&0!==Ll?Ll&-Ll:null!==go.transition?(0===tu&&(tu=ye()),tu):0!==(t=be)?t:t=void 0===(t=window.event)?16:Xe(t.type)}function ru(t,e,n,r){if(50<Jl)throw Jl=0,$l=null,Error(o(185));ve(t,n,r),0!==(2&Il)&&t===Ol||(t===Ol&&(0===(2&Il)&&(zl|=n),4===Nl&&lu(t,Ll)),iu(t,r),1===n&&0===Il&&0===(1&e.mode)&&(Ul=Jt()+500,Fi&&Hi()))}function iu(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ae(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=fe(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}(t,e);var r=pe(t,t===Ol?Ll:0);if(0===r)null!==n&&Yt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Yt(n),1===e)0===t.tag?function(t){Fi=!0,Gi(t)}(uu.bind(null,t)):Gi(uu.bind(null,t)),ai((function(){0===(6&Il)&&Hi()})),n=null;else{switch(_e(r)){case 1:n=Qt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Ou(n,ou.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ou(t,e){if(Ql=-1,tu=0,0!==(6&Il))throw Error(o(327));var n=t.callbackNode;if(ku()&&t.callbackNode!==n)return null;var r=pe(t,t===Ol?Ll:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=vu(t,r);else{e=r;var i=Il;Il|=2;var a=yu();for(Ol===t&&Ll===e||(ql=null,Ul=Jt()+500,fu(t,e));;)try{bu();break}catch(l){du(t,l)}xo(),Al.current=a,Il=i,null!==Cl?e=0:(Ol=null,Ll=0,e=Nl)}if(0!==e){if(2===e&&(0!==(i=de(t))&&(r=i,e=au(t,i))),1===e)throw n=jl,fu(t,0),lu(t,r),iu(t,Jt()),n;if(6===e)lu(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=vu(t,r))&&(0!==(a=de(t))&&(r=a,e=au(t,a))),1===e))throw n=jl,fu(t,0),lu(t,r),iu(t,Jt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(o(345));case 2:case 5:xu(t,Gl,ql);break;case 3:if(lu(t,r),(130023424&r)===r&&10<(e=Hl+500-Jt())){if(0!==pe(t,0))break;if(((i=t.suspendedLanes)&r)!==r){eu(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(xu.bind(null,t,Gl,ql),e);break}xu(t,Gl,ql);break;case 4:if(lu(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ae(r);a=1<<s,(s=e[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Jt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){t.timeoutHandle=ri(xu.bind(null,t,Gl,ql),r);break}xu(t,Gl,ql);break;default:throw Error(o(329))}}}return iu(t,Jt()),t.callbackNode===n?ou.bind(null,t):null}function au(t,e){var n=Bl;return t.current.memoizedState.isDehydrated&&(fu(t,e).flags|=256),2!==(t=vu(t,e))&&(e=Gl,Gl=n,null!==e&&su(e)),t}function su(t){null===Gl?Gl=t:Gl.push.apply(Gl,t)}function lu(t,e){for(e&=~Fl,e&=~zl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ae(e),r=1<<n;t[n]=-1,e&=~r}}function uu(t){if(0!==(6&Il))throw Error(o(327));ku();var e=pe(t,0);if(0===(1&e))return iu(t,Jt()),null;var n=vu(t,e);if(0!==t.tag&&2===n){var r=de(t);0!==r&&(e=r,n=au(t,r))}if(1===n)throw n=jl,fu(t,0),lu(t,e),iu(t,Jt()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xu(t,Gl,ql),iu(t,Jt()),null}function cu(t,e){var n=Il;Il|=1;try{return t(e)}finally{0===(Il=n)&&(Ul=Jt()+500,Fi&&Hi())}}function hu(t){null!==Kl&&0===Kl.tag&&0===(6&Il)&&ku();var e=Il;Il|=1;var n=Ml.transition,r=be;try{if(Ml.transition=null,be=1,t)return t()}finally{be=r,Ml.transition=n,0===(6&(Il=e))&&Hi()}}function pu(){Pl=Rl.current,Ti(Rl)}function fu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==Cl)for(n=Cl.return;null!==n;){var r=n;switch(eo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:oa(),Ti(Ii),Ti(Mi),ha();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Ti(la);break;case 10:ko(r.type._context);break;case 22:case 23:pu()}n=n.return}if(Ol=t,Cl=t=Ru(t.current,null),Ll=Pl=e,Nl=0,jl=null,Fl=zl=Dl=0,Gl=Bl=null,null!==So){for(e=0;e<So.length;e++)if(null!==(r=(n=So[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}So=null}return t}function du(t,e){for(;;){var n=Cl;try{if(xo(),pa.current=as,ma){for(var r=ya.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ma=!1}if(da=0,va=ga=ya=null,ba=!1,_a=0,Sl.current=null,null===n||null===n.return){Nl=1,jl=e,Cl=null;break}t:{var a=t,s=n.return,l=n,u=e;if(e=Ll,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,p=h.tag;if(0===(1&h.mode)&&(0===p||11===p||15===p)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var d=vs(s);if(null!==d){d.flags&=-257,ms(d,s,l,0,e),1&d.mode&&gs(a,c,e),u=c;var y=(e=d).updateQueue;if(null===y){var g=new Set;g.add(u),e.updateQueue=g}else y.add(u);break t}if(0===(1&e)){gs(a,c,e),gu();break t}u=Error(o(426))}else if(io&&1&l.mode){var v=vs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ms(v,s,l,0,e),yo(cs(u,l));break t}}a=u=cs(u,l),4!==Nl&&(Nl=2),null===Bl?Bl=[a]:Bl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,Do(a,ds(0,u,e));break t;case 1:l=u;var m=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof m.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e,Do(a,ys(a,l,e));break t}}a=a.return}while(null!==a)}wu(n)}catch(_){e=_,Cl===n&&null!==n&&(Cl=n=n.return);continue}break}}function yu(){var t=Al.current;return Al.current=as,null===t?as:t}function gu(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===Ol||0===(268435455&Dl)&&0===(268435455&zl)||lu(Ol,Ll)}function vu(t,e){var n=Il;Il|=2;var r=yu();for(Ol===t&&Ll===e||(ql=null,fu(t,e));;)try{mu();break}catch(i){du(t,i)}if(xo(),Il=n,Al.current=r,null!==Cl)throw Error(o(261));return Ol=null,Ll=0,Nl}function mu(){for(;null!==Cl;)_u(Cl)}function bu(){for(;null!==Cl&&!Kt();)_u(Cl)}function _u(t){var e=El(t.alternate,t,Pl);t.memoizedProps=t.pendingProps,null===e?wu(t):Cl=e,Sl.current=null}function wu(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Ys(n,e,Pl)))return void(Cl=n)}else{if(null!==(n=Ks(n,e)))return n.flags&=32767,void(Cl=n);if(null===t)return Nl=6,void(Cl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Cl=e);Cl=e=t}while(null!==e);0===Nl&&(Nl=5)}function xu(t,e,n){var r=be,i=Ml.transition;try{Ml.transition=null,be=1,function(t,e,n,r){do{ku()}while(null!==Kl);if(0!==(6&Il))throw Error(o(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ae(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,a),t===Ol&&(Cl=Ol=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Ou(ee,(function(){return ku(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ml.transition,Ml.transition=null;var s=be;be=1;var l=Il;Il|=4,Sl.current=null,function(t,e){if(ti=qe,fr(t=pr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break t}var s=0,l=-1,u=-1,c=0,h=0,p=t,f=null;e:for(;;){for(var d;p!==n||0!==i&&3!==p.nodeType||(l=s+i),p!==a||0!==r&&3!==p.nodeType||(u=s+r),3===p.nodeType&&(s+=p.nodeValue.length),null!==(d=p.firstChild);)f=p,p=d;for(;;){if(p===t)break e;if(f===n&&++c===i&&(l=s),f===a&&++h===r&&(u=s),null!==(d=p.nextSibling))break;f=(p=f).parentNode}p=d}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},qe=!1,Qs=e;null!==Qs;)if(t=(e=Qs).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Qs=t;else for(;null!==Qs;){e=Qs;try{var y=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==y){var g=y.memoizedProps,v=y.memoizedState,m=e.stateNode,b=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:vo(e.type,g),v);m.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(o(163))}}catch(w){Tu(e,e.return,w)}if(null!==(t=e.sibling)){t.return=e.return,Qs=t;break}Qs=e.return}y=nl,nl=!1}(t,n),vl(n,t),dr(ei),qe=!!ti,ei=ti=null,t.current=n,bl(n,t,i),Xt(),Il=l,be=s,Ml.transition=a}else t.current=n;if(Yl&&(Yl=!1,Kl=t,Xl=i),a=t.pendingLanes,0===a&&(Wl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),iu(t,Jt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,t=Zl,Zl=null,t;0!==(1&Xl)&&0!==t.tag&&ku(),a=t.pendingLanes,0!==(1&a)?t===$l?Jl++:(Jl=0,$l=t):Jl=0,Hi()}(t,e,n,r)}finally{Ml.transition=i,be=r}return null}function ku(){if(null!==Kl){var t=_e(Xl),e=Ml.transition,n=be;try{if(Ml.transition=null,be=16>t?16:t,null===Kl)var r=!1;else{if(t=Kl,Kl=null,Xl=0,0!==(6&Il))throw Error(o(331));var i=Il;for(Il|=4,Qs=t.current;null!==Qs;){var a=Qs,s=a.child;if(0!==(16&Qs.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Qs=c;null!==Qs;){var h=Qs;switch(h.tag){case 0:case 11:case 15:rl(8,h,a)}var p=h.child;if(null!==p)p.return=h,Qs=p;else for(;null!==Qs;){var f=(h=Qs).sibling,d=h.return;if(al(h),h===c){Qs=null;break}if(null!==f){f.return=d,Qs=f;break}Qs=d}}}var y=a.alternate;if(null!==y){var g=y.child;if(null!==g){y.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Qs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Qs=s;else t:for(;null!==Qs;){if(0!==(2048&(a=Qs).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var m=a.sibling;if(null!==m){m.return=a.return,Qs=m;break t}Qs=a.return}}var b=t.current;for(Qs=b;null!==Qs;){var _=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Qs=_;else t:for(s=b;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(x){Tu(l,l.return,x)}if(l===s){Qs=null;break t}var w=l.sibling;if(null!==w){w.return=l.return,Qs=w;break t}Qs=l.return}}if(Il=i,Hi(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(x){}r=!0}return r}finally{be=n,Ml.transition=e}}return!1}function Eu(t,e,n){t=No(t,e=ds(0,e=cs(n,e),1),1),e=eu(),null!==t&&(ve(t,1,e),iu(t,e))}function Tu(t,e,n){if(3===t.tag)Eu(t,t,n);else for(;null!==e;){if(3===e.tag){Eu(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){e=No(e,t=ys(e,t=cs(n,t),1),1),t=eu(),null!==e&&(ve(e,1,t),iu(e,t));break}}e=e.return}}function Au(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=eu(),t.pingedLanes|=t.suspendedLanes&n,Ol===t&&(Ll&n)===n&&(4===Nl||3===Nl&&(130023424&Ll)===Ll&&500>Jt()-Hl?fu(t,0):Fl|=n),iu(t,e)}function Su(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ce,0===(130023424&(ce<<=1))&&(ce=4194304)));var n=eu();null!==(t=Oo(t,e))&&(ve(t,e,n),iu(t,n))}function Mu(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Su(t,n)}function Iu(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(e),Su(t,n)}function Ou(t,e){return Wt(t,e)}function Cu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lu(t,e,n,r){return new Cu(t,e,n,r)}function Pu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Ru(t,e){var n=t.alternate;return null===n?((n=Lu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nu(t,e,n,r,i,a){var s=2;if(r=t,"function"===typeof t)Pu(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case k:return ju(n.children,i,a,e);case E:s=8,i|=8;break;case T:return(t=Lu(12,n,e,2|i)).elementType=T,t.lanes=a,t;case I:return(t=Lu(13,n,e,i)).elementType=I,t.lanes=a,t;case O:return(t=Lu(19,n,e,i)).elementType=O,t.lanes=a,t;case P:return Du(n,i,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case A:s=10;break t;case S:s=9;break t;case M:s=11;break t;case C:s=14;break t;case L:s=16,r=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Lu(s,n,e,i)).elementType=t,e.type=r,e.lanes=a,e}function ju(t,e,n,r){return(t=Lu(7,t,r,e)).lanes=n,t}function Du(t,e,n,r){return(t=Lu(22,t,r,e)).elementType=P,t.lanes=n,t.stateNode={isHidden:!1},t}function zu(t,e,n){return(t=Lu(6,t,null,e)).lanes=n,t}function Fu(t,e,n){return(e=Lu(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Bu(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gu(t,e,n,r,i,o,a,s,l){return t=new Bu(t,e,n,s,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Lu(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),t}function Hu(t){if(!t)return Si;t:{if(Ht(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Li(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Li(n))return Ni(t,n,e)}return e}function Uu(t,e,n,r,i,o,a,s,l){return(t=Gu(n,r,!0,t,0,o,0,s,l)).context=Hu(null),n=t.current,(o=Ro(r=eu(),i=nu(n))).callback=void 0!==e&&null!==e?e:null,No(n,o,i),t.current.lanes=i,ve(t,i,r),iu(t,r),t}function qu(t,e,n,r){var i=e.current,o=eu(),a=nu(i);return n=Hu(n),null===e.context?e.context=n:e.pendingContext=n,(e=Ro(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=No(i,e,a))&&(ru(t,i,a,o),jo(t,i,a)),a}function Vu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Zu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Wu(t,e){Zu(t,e),(t=t.alternate)&&Zu(t,e)}El=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ii.current)_s=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return _s=!1,function(t,e,n){switch(e.tag){case 3:Os(e),fo();break;case 5:aa(e);break;case 1:Li(e.type)&&ji(e);break;case 4:ia(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ai(mo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Ai(la,1&la.current),e.flags|=128,null):0!==(n&e.child.childLanes)?zs(t,e,n):(Ai(la,1&la.current),null!==(t=Vs(t,e,n))?t.sibling:null);Ai(la,1&la.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return Us(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(la,la.current),r)break;return null;case 22:case 23:return e.lanes=0,Ts(t,e,n)}return Vs(t,e,n)}(t,e,n);_s=0!==(131072&t.flags)}else _s=!1,io&&0!==(1048576&e.flags)&&Qi(e,Zi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qs(t,e),t=e.pendingProps;var i=Ci(e,Mi.current);To(e,n),i=Ea(null,e,r,t,i,n);var a=Ta();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Li(r)?(a=!0,ji(e)):a=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Lo(e),i.updater=Ho,e.stateNode=i,i._reactInternals=e,Zo(e,r,t,n),e=Is(null,e,r,!0,a,n)):(e.tag=0,io&&a&&to(e),ws(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(qs(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Pu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===M)return 11;if(t===C)return 14}return 2}(r),t=vo(r,t),i){case 0:e=Ss(null,e,r,t,n);break t;case 1:e=Ms(null,e,r,t,n);break t;case 11:e=xs(null,e,r,t,n);break t;case 14:e=ks(null,e,r,vo(r.type,t),n);break t}throw Error(o(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ss(t,e,r,i=e.elementType===r?i:vo(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ms(t,e,r,i=e.elementType===r?i:vo(r,i),n);case 3:t:{if(Os(e),null===t)throw Error(o(387));r=e.pendingProps,i=(a=e.memoizedState).element,Po(t,e),zo(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Cs(t,e,r,n,i=cs(Error(o(423)),e));break t}if(r!==i){e=Cs(t,e,r,n,i=cs(Error(o(424)),e));break t}for(ro=ui(e.stateNode.containerInfo.firstChild),no=e,io=!0,oo=null,n=$o(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){e=Vs(t,e,n);break t}ws(t,e,r,n)}e=e.child}return e;case 5:return aa(e),null===t&&uo(e),r=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(e.flags|=32),As(t,e),ws(t,e,s,n),e.child;case 6:return null===t&&uo(e),null;case 13:return zs(t,e,n);case 4:return ia(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Jo(e,null,r,n):ws(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,xs(t,e,r,i=e.elementType===r?i:vo(r,i),n);case 7:return ws(t,e,e.pendingProps,n),e.child;case 8:case 12:return ws(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Ai(mo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ii.current){e=Vs(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=Ro(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),Eo(a.return,n,e),l.lanes|=n;break}u=u.next}}else if(10===a.tag)s=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Eo(s,n,e),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,To(e,n),r=r(i=Ao(i)),e.flags|=1,ws(t,e,r,n),e.child;case 14:return i=vo(r=e.type,e.pendingProps),ks(t,e,r,i=vo(r.type,i),n);case 15:return Es(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vo(r,i),qs(t,e),e.tag=1,Li(r)?(t=!0,ji(e)):t=!1,To(e,n),qo(e,r,i),Zo(e,r,i,n),Is(null,e,r,!0,t,n);case 19:return Us(t,e,n);case 22:return Ts(t,e,n)}throw Error(o(156,e.tag))};var Yu="function"===typeof reportError?reportError:function(t){console.error(t)};function Ku(t){this._internalRoot=t}function Xu(t){this._internalRoot=t}function Ju(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function $u(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Qu(){}function tc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var t=Vu(a);s.call(t)}}qu(e,a,t,i)}else a=function(t,e,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var t=Vu(a);o.call(t)}}var a=Uu(e,r,t,0,null,!1,0,"",Qu);return t._reactRootContainer=a,t[di]=a.current,Hr(8===t.nodeType?t.parentNode:t),hu(),a}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof r){var s=r;r=function(){var t=Vu(l);s.call(t)}}var l=Gu(t,0,!1,null,0,!1,0,"",Qu);return t._reactRootContainer=l,t[di]=l.current,Hr(8===t.nodeType?t.parentNode:t),hu((function(){qu(e,l,n,r)})),l}(n,e,t,i,r);return Vu(a)}Xu.prototype.render=Ku.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));qu(t,e,null,null)},Xu.prototype.unmount=Ku.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;hu((function(){qu(null,t,null,null)})),e[di]=null}},Xu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ee();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pe.length&&0!==e&&e<Pe[n].priority;n++);Pe.splice(n,0,t),0===n&&De(t)}},we=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(me(e,1|n),iu(e,Jt()),0===(6&Il)&&(Ul=Jt()+500,Hi()))}break;case 13:hu((function(){var e=Oo(t,1);if(null!==e){var n=eu();ru(e,t,1,n)}})),Wu(t,1)}},xe=function(t){if(13===t.tag){var e=Oo(t,134217728);if(null!==e)ru(e,t,134217728,eu());Wu(t,134217728)}},ke=function(t){if(13===t.tag){var e=nu(t),n=Oo(t,e);if(null!==n)ru(n,t,e,eu());Wu(t,e)}},Ee=function(){return be},Te=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},xt=function(t,e,n){switch(e){case"input":if($(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wi(r);if(!i)throw Error(o(90));W(r),$(r,i)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Mt=cu,It=hu;var ec={usingClientEntryPoint:!1,Events:[bi,_i,wi,At,St,cu]},nc={findFiberByHostInstance:mi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Vt(t))?null:t.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{ie=ic.inject(rc),oe=ic}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(e))throw Error(o(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Ju(t))throw Error(o(299));var n=!1,r="",i=Yu;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Gu(t,1,!1,null,0,n,0,r,i),t[di]=e.current,Hr(8===t.nodeType?t.parentNode:t),new Ku(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Vt(e))?null:t.stateNode},e.flushSync=function(t){return hu(t)},e.hydrate=function(t,e,n){if(!$u(e))throw Error(o(200));return tc(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Ju(t))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Yu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),e=Uu(e,null,t,1,null!=n?n:null,i,0,a,s),t[di]=e.current,Hr(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Xu(e)},e.render=function(t,e,n){if(!$u(e))throw Error(o(200));return tc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!$u(t))throw Error(o(40));return!!t._reactRootContainer&&(hu((function(){tc(null,null,t,!1,(function(){t._reactRootContainer=null,t[di]=null}))})),!0)},e.unstable_batchedUpdates=cu,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$u(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return tc(t,e,n,!1,r)},e.version="18.2.0-next-9e3b772b8-20220608"},1250:function(t,e,n){"use strict";var r=n(4164);e.createRoot=r.createRoot,e.hydrateRoot=r.hydrateRoot},4164:function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(4463)},1372:function(t,e){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,y=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,m=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function w(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case c:case h:case o:case s:case a:case f:return t;default:switch(t=t&&t.$$typeof){case u:case p:case g:case y:case l:return t;default:return e}}case i:return e}}}function x(t){return w(t)===h}e.AsyncMode=c,e.ConcurrentMode=h,e.ContextConsumer=u,e.ContextProvider=l,e.Element=r,e.ForwardRef=p,e.Fragment=o,e.Lazy=g,e.Memo=y,e.Portal=i,e.Profiler=s,e.StrictMode=a,e.Suspense=f,e.isAsyncMode=function(t){return x(t)||w(t)===c},e.isConcurrentMode=x,e.isContextConsumer=function(t){return w(t)===u},e.isContextProvider=function(t){return w(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return w(t)===p},e.isFragment=function(t){return w(t)===o},e.isLazy=function(t){return w(t)===g},e.isMemo=function(t){return w(t)===y},e.isPortal=function(t){return w(t)===i},e.isProfiler=function(t){return w(t)===s},e.isStrictMode=function(t){return w(t)===a},e.isSuspense=function(t){return w(t)===f},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===h||t===s||t===a||t===f||t===d||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===y||t.$$typeof===l||t.$$typeof===u||t.$$typeof===p||t.$$typeof===m||t.$$typeof===b||t.$$typeof===_||t.$$typeof===v)},e.typeOf=w},7441:function(t,e,n){"use strict";t.exports=n(1372)},6374:function(t,e,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(c=e.ref),e)a.call(e,r)&&!l.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:u,ref:c,props:o,_owner:s.current}}e.Fragment=o,e.jsx=u,e.jsxs=u},9117:function(t,e){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,g={};function v(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||d}function m(){}function b(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||d}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},m.prototype=v.prototype;var _=b.prototype=new m;_.constructor=b,y(_,v.prototype),_.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(t,e,r){var i,o={},a=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)x.call(e,i)&&!E.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:t,key:a,ref:s,props:o,_owner:k.current}}function A(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var S=/\/+/g;function M(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function I(t,e,i,o,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=t),t=""===o?"."+M(l,0):o,w(a)?(i="",null!=t&&(i=t.replace(S,"$&/")+"/"),I(a,e,i,"",(function(t){return t}))):null!=a&&(A(a)&&(a=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+t)),e.push(a)),1;if(l=0,o=""===o?".":o+":",w(t))for(var u=0;u<t.length;u++){var c=o+M(s=t[u],u);l+=I(s,e,i,c,a)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),u=0;!(s=t.next()).done;)l+=I(s=s.value,e,i,c=o+M(s,u++),a);else if("object"===s)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function O(t,e,n){if(null==t)return t;var r=[],i=0;return I(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function C(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var L={current:null},P={transition:null},R={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:P,ReactCurrentOwner:k};e.Children={map:O,forEach:function(t,e,n){O(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return O(t,(function(){e++})),e},toArray:function(t){return O(t,(function(t){return t}))||[]},only:function(t){if(!A(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=v,e.Fragment=i,e.Profiler=a,e.PureComponent=b,e.StrictMode=o,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=y({},t.props),o=t.key,a=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,s=k.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)x.call(e,u)&&!E.hasOwnProperty(u)&&(i[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:t.type,key:o,ref:a,props:i,_owner:s}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=T,e.createFactory=function(t){var e=T.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=A,e.lazy=function(t){return{$$typeof:p,_payload:{_status:-1,_result:t},_init:C}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=P.transition;P.transition={};try{t()}finally{P.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return L.current.useCallback(t,e)},e.useContext=function(t){return L.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return L.current.useDeferredValue(t)},e.useEffect=function(t,e){return L.current.useEffect(t,e)},e.useId=function(){return L.current.useId()},e.useImperativeHandle=function(t,e,n){return L.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return L.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return L.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return L.current.useMemo(t,e)},e.useReducer=function(t,e,n){return L.current.useReducer(t,e,n)},e.useRef=function(t){return L.current.useRef(t)},e.useState=function(t){return L.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return L.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return L.current.useTransition()},e.version="18.2.0"},2791:function(t,e,n){"use strict";t.exports=n(9117)},184:function(t,e,n){"use strict";t.exports=n(6374)},6813:function(t,e){"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=t[s],u=s+1,c=t[u];if(0>o(l,n))u<i&&0>o(c,l)?(t[r]=c,t[u]=n,r=u):(t[r]=l,t[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break t;t[r]=c,t[u]=n,r=u}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,p=null,f=3,d=!1,y=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,m="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(t){for(var e=r(c);null!==e;){if(null===e.callback)i(c);else{if(!(e.startTime<=t))break;i(c),e.sortIndex=e.expirationTime,n(u,e)}e=r(c)}}function w(t){if(g=!1,_(t),!y)if(null!==r(u))y=!0,P(x);else{var e=r(c);null!==e&&R(w,e.startTime-t)}}function x(t,n){y=!1,g&&(g=!1,m(A),A=-1),d=!0;var o=f;try{for(_(n),p=r(u);null!==p&&(!(p.expirationTime>n)||t&&!I());){var a=p.callback;if("function"===typeof a){p.callback=null,f=p.priorityLevel;var s=a(p.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?p.callback=s:p===r(u)&&i(u),_(n)}else i(u);p=r(u)}if(null!==p)var l=!0;else{var h=r(c);null!==h&&R(w,h.startTime-n),l=!1}return l}finally{p=null,f=o,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,E=!1,T=null,A=-1,S=5,M=-1;function I(){return!(e.unstable_now()-M<S)}function O(){if(null!==T){var t=e.unstable_now();M=t;var n=!0;try{n=T(!0,t)}finally{n?k():(E=!1,T=null)}}else E=!1}if("function"===typeof b)k=function(){b(O)};else if("undefined"!==typeof MessageChannel){var C=new MessageChannel,L=C.port2;C.port1.onmessage=O,k=function(){L.postMessage(null)}}else k=function(){v(O,0)};function P(t){T=t,E||(E=!0,k())}function R(t,n){A=v((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){y||d||(y=!0,P(x))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,i,o){var a=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(t.sortIndex=o,n(c,t),null===r(u)&&t===r(c)&&(g?(m(A),A=-1):g=!0,R(w,o-a))):(t.sortIndex=s,n(u,t),y||d||(y=!0,P(x))),t},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},5296:function(t,e,n){"use strict";t.exports=n(6813)},4836:function(t){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},907:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{Z:function(){return r}})},4572:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r(e)?e:String(e)}function o(t,e,n){return(e=i(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:function(){return o}})},7462:function(t,e,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}n.d(e,{Z:function(){return r}})},3366:function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n.d(e,{Z:function(){return r}})},885:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(181);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||(0,r.Z)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(907);var i=n(181);function o(t){return function(t){if(Array.isArray(t))return(0,r.Z)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||(0,i.Z)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(907);function i(t,e){if(t){if("string"===typeof t)return(0,r.Z)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(t,e):void 0}}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};__webpack_require__.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var i=Object.create(null);__webpack_require__.r(i);var o={};t=t||[null,e({}),e([]),e(e)];for(var a=2&r&&n;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((function(t){o[t]=function(){return n[t]}}));return o.default=function(){return n},__webpack_require__.d(i,o),i}}(),__webpack_require__.d=function(t,e){for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.f={},__webpack_require__.e=function(t){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(e,n){return __webpack_require__.f[n](t,e),e}),[]))},__webpack_require__.u=function(t){return"static/js/"+t+".c188198c.chunk.js"},__webpack_require__.miniCssF=function(t){},__webpack_require__.hmd=function(t){return(t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={},e="go-guyane-materiels:";__webpack_require__.l=function(n,r,i,o){if(t[n])t[n].push(r);else{var a,s;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var c=l[u];if(c.getAttribute("src")==n||c.getAttribute("data-webpack")==e+i){a=c;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,__webpack_require__.nc&&a.setAttribute("nonce",__webpack_require__.nc),a.setAttribute("data-webpack",e+i),a.src=n),t[n]=[r];var h=function(e,r){a.onerror=a.onload=null,clearTimeout(p);var i=t[n];if(delete t[n],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((function(t){return t(r)})),e)return e(r)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),s&&document.head.appendChild(a)}}}(),__webpack_require__.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.p="/",function(){var t={179:0};__webpack_require__.f.j=function(e,n){var r=__webpack_require__.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(n,i){r=t[e]=[n,i]}));n.push(r[2]=i);var o=__webpack_require__.p+__webpack_require__.u(e),a=new Error;__webpack_require__.l(o,(function(n){if(__webpack_require__.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,r[1](a)}}),"chunk-"+e,e)}};var e=function(e,n){var r,i,o=n[0],a=n[1],s=n[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(r in a)__webpack_require__.o(a,r)&&(__webpack_require__.m[r]=a[r]);if(s)s(__webpack_require__)}for(e&&e(n);l<o.length;l++)i=o[l],__webpack_require__.o(t,i)&&t[i]&&t[i][0](),t[i]=0},n=self.webpackChunkgo_guyane_materiels=self.webpackChunkgo_guyane_materiels||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var __webpack_exports__={};!function(){"use strict";var t=__webpack_require__(2791),e=__webpack_require__(1250),n=__webpack_require__(885);__webpack_require__.p;var r=__webpack_require__(4572),i=__webpack_require__(3366),o=__webpack_require__(7462),a=__webpack_require__(8182),s=__webpack_require__(7312),l=__webpack_require__(1217),u=__webpack_require__(4419),c=__webpack_require__(7078),h=(0,__webpack_require__(4046).ZP)(),p=__webpack_require__(5080),f=__webpack_require__(184),d=["className","component","disableGutters","fixed","maxWidth","classes"],y=(0,p.Z)(),g=h("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e["maxWidth".concat((0,s.Z)(String(n.maxWidth)))],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),v=function(t){return(0,c.Z)({props:t,name:"MuiContainer",defaultTheme:y})},m=function(t,e){var n=t.classes,r=t.fixed,i=t.disableGutters,o=t.maxWidth,a={root:["root",o&&"maxWidth".concat((0,s.Z)(String(o))),r&&"fixed",i&&"disableGutters"]};return(0,u.Z)(a,(function(t){return(0,l.Z)(e,t)}),n)};var b=__webpack_require__(4036),_=__webpack_require__(6934),w=__webpack_require__(1402),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.createStyledComponent,s=void 0===n?g:n,l=e.useThemeProps,u=void 0===l?v:l,c=e.componentName,h=void 0===c?"MuiContainer":c,p=s((function(t){var e=t.theme,n=t.ownerState;return(0,o.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&(0,r.Z)({paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}))}),(function(t){var e=t.theme;return t.ownerState.fixed&&Object.keys(e.breakpoints.values).reduce((function(t,n){var r=n,i=e.breakpoints.values[r];return 0!==i&&(t[e.breakpoints.up(r)]={maxWidth:"".concat(i).concat(e.breakpoints.unit)}),t}),{})}),(function(t){var e=t.theme,n=t.ownerState;return(0,o.Z)({},"xs"===n.maxWidth&&(0,r.Z)({},e.breakpoints.up("xs"),{maxWidth:Math.max(e.breakpoints.values.xs,444)}),n.maxWidth&&"xs"!==n.maxWidth&&(0,r.Z)({},e.breakpoints.up(n.maxWidth),{maxWidth:"".concat(e.breakpoints.values[n.maxWidth]).concat(e.breakpoints.unit)}))}));return t.forwardRef((function(t,e){var n=u(t),r=n.className,s=n.component,l=void 0===s?"div":s,c=n.disableGutters,y=void 0!==c&&c,g=n.fixed,v=void 0!==g&&g,b=n.maxWidth,_=void 0===b?"lg":b,w=(0,i.Z)(n,d),x=(0,o.Z)({},n,{component:l,disableGutters:y,fixed:v,maxWidth:_}),k=m(x,h);return(0,f.jsx)(p,(0,o.Z)({as:l,ownerState:x,className:(0,a.Z)(k.root,r),ref:e},w))}))}({createStyledComponent:(0,_.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e["maxWidth".concat((0,b.Z)(String(n.maxWidth)))],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:function(t){return(0,w.Z)({props:t,name:"MuiContainer"})}}),k=x,E=__webpack_require__(1125),T=__webpack_require__(104),A=__webpack_require__(2982),S=__webpack_require__(2466),M=__webpack_require__(7416),I=["sx"],O=function(t){var e,n,r={systemProps:{},otherProps:{}},i=null!=(e=null==t||null==(n=t.theme)?void 0:n.unstable_sxConfig)?e:M.Z;return Object.keys(t).forEach((function(e){i[e]?r.systemProps[e]=t[e]:r.otherProps[e]=t[e]})),r};function C(t){var e,n=t.sx,r=(0,i.Z)(t,I),a=O(r),s=a.systemProps,l=a.otherProps;return e=Array.isArray(n)?[s].concat((0,A.Z)(n)):"function"===typeof n?function(){var t=n.apply(void 0,arguments);return(0,S.P)(t)?(0,o.Z)({},s,t):s}:(0,o.Z)({},s,n),(0,o.Z)({},l,{sx:e})}var L=__webpack_require__(886),P=["className","component"];var R=__webpack_require__(5902),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.defaultTheme,r=e.defaultClassName,s=void 0===r?"MuiBox-root":r,l=e.generateClassName,u=(0,E.ZP)("div",{shouldForwardProp:function(t){return"theme"!==t&&"sx"!==t&&"as"!==t}})(T.Z);return t.forwardRef((function(t,e){var r=(0,L.Z)(n),c=C(t),h=c.className,p=c.component,d=void 0===p?"div":p,y=(0,i.Z)(c,P);return(0,f.jsx)(u,(0,o.Z)({as:d,ref:e,className:(0,a.Z)(h,l?l(s):s),theme:r},y))}))}({defaultTheme:(0,__webpack_require__(7107).Z)(),defaultClassName:"MuiBox-root",generateClassName:R.Z.generate}),j=N,D=__webpack_require__(5878);function z(t){return(0,l.Z)("MuiTypography",t)}(0,D.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var F=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],B=(0,_.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.variant&&e[n.variant],"inherit"!==n.align&&e["align".concat((0,b.Z)(n.align))],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})((function(t){var e=t.theme,n=t.ownerState;return(0,o.Z)({margin:0},n.variant&&e.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),G={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},H={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},U=t.forwardRef((function(t,e){var n=(0,w.Z)({props:t,name:"MuiTypography"}),r=function(t){return H[t]||t}(n.color),s=C((0,o.Z)({},n,{color:r})),l=s.align,c=void 0===l?"inherit":l,h=s.className,p=s.component,d=s.gutterBottom,y=void 0!==d&&d,g=s.noWrap,v=void 0!==g&&g,m=s.paragraph,_=void 0!==m&&m,x=s.variant,k=void 0===x?"body1":x,E=s.variantMapping,T=void 0===E?G:E,A=(0,i.Z)(s,F),S=(0,o.Z)({},s,{align:c,color:r,className:h,component:p,gutterBottom:y,noWrap:v,paragraph:_,variant:k,variantMapping:T}),M=p||(_?"p":T[k]||G[k])||"span",I=function(t){var e=t.align,n=t.gutterBottom,r=t.noWrap,i=t.paragraph,o=t.variant,a=t.classes,s={root:["root",o,"inherit"!==t.align&&"align".concat((0,b.Z)(e)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,u.Z)(s,z,a)}(S);return(0,f.jsx)(B,(0,o.Z)({as:M,ref:e,ownerState:S,className:(0,a.Z)(I.root,h)},A))})),q=__webpack_require__.p+"static/media/GUYANEMAT.ba6822941a6f7373a961.png";var V=function(){return(0,f.jsxs)(k,{children:[(0,f.jsx)(j,{component:"img",className:"App-logo",sx:{height:"100%",width:"90%",maxHeight:{xs:233,md:167},maxWidth:{xs:350,md:250}},alt:"Logo Guyane Mat\xe9riels",src:q}),(0,f.jsx)(U,{variant:"p",children:"Notre appartenance au r\xe9seau Socoda apporte \xe0 nos clients des offres comp\xe9titives et la garantie d'une qualit\xe9 de service. Pr\xe9sent depuis plus de trente ans sur le march\xe9 guyanais, Mat\xe9riels et Services commercialise les marques internationales telles que Hitachi Construction, Bell, Ammann, Putzmeister, pour la gamme lourde, Hikoki, Metabo, Facom, Benza, pour la gamme industrie, Wolf et Etesia pour les espaces verts. Bolt&Ladder est le sp\xe9cialiste de la fixation et des moyens d\u2019acc\xe8s en hauteur. Prestations et Services et MS Loc Guyane nous permettent d'offrir \xe0 nos clients une prise en charge totale de leurs besoins, de l'achat \xe0 la maintenance. Notre service pi\xe8ces d\xe9tach\xe9es dispose de 12 000 r\xe9f\xe9rences en stock permanent, r\xe9pondant ainsi aux besoins les plus urgents de nos clients."})]})},Z=__webpack_require__(1184),W=__webpack_require__(6482);var Y=t.createContext();function K(t){return(0,l.Z)("MuiGrid",t)}var X=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],J=(0,D.Z)("MuiGrid",["root","container","item","zeroMinWidth"].concat((0,A.Z)([0,1,2,3,4,5,6,7,8,9,10].map((function(t){return"spacing-xs-".concat(t)}))),(0,A.Z)(["column-reverse","column","row-reverse","row"].map((function(t){return"direction-xs-".concat(t)}))),(0,A.Z)(["nowrap","wrap-reverse","wrap"].map((function(t){return"wrap-xs-".concat(t)}))),(0,A.Z)(X.map((function(t){return"grid-xs-".concat(t)}))),(0,A.Z)(X.map((function(t){return"grid-sm-".concat(t)}))),(0,A.Z)(X.map((function(t){return"grid-md-".concat(t)}))),(0,A.Z)(X.map((function(t){return"grid-lg-".concat(t)}))),(0,A.Z)(X.map((function(t){return"grid-xl-".concat(t)}))))),$=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Q(t){var e=parseFloat(t);return"".concat(e).concat(String(t).replace(String(e),"")||"px")}function tt(t){var e=t.breakpoints,n=t.values,r="";Object.keys(n).forEach((function(t){""===r&&0!==n[t]&&(r=t)}));var i=Object.keys(e).sort((function(t,n){return e[t]-e[n]}));return i.slice(0,i.indexOf(r))}var et=(0,_.ZP)("div",{name:"MuiGrid",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState,r=n.container,i=n.direction,o=n.item,a=n.spacing,s=n.wrap,l=n.zeroMinWidth,u=n.breakpoints,c=[];r&&(c=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||t<=0)return[];if("string"===typeof t&&!Number.isNaN(Number(t))||"number"===typeof t)return[n["spacing-xs-".concat(String(t))]];var r=[];return e.forEach((function(e){var i=t[e];Number(i)>0&&r.push(n["spacing-".concat(e,"-").concat(String(i))])})),r}(a,u,e));var h=[];return u.forEach((function(t){var r=n[t];r&&h.push(e["grid-".concat(t,"-").concat(String(r))])})),[e.root,r&&e.container,o&&e.item,l&&e.zeroMinWidth].concat((0,A.Z)(c),["row"!==i&&e["direction-xs-".concat(String(i))],"wrap"!==s&&e["wrap-xs-".concat(String(s))]],h)}})((function(t){var e=t.ownerState;return(0,o.Z)({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},"wrap"!==e.wrap&&{flexWrap:e.wrap})}),(function(t){var e=t.theme,n=t.ownerState,r=(0,Z.P$)({values:n.direction,breakpoints:e.breakpoints.values});return(0,Z.k9)({theme:e},r,(function(t){var e={flexDirection:t};return 0===t.indexOf("column")&&(e["& > .".concat(J.item)]={maxWidth:"none"}),e}))}),(function(t){var e=t.theme,n=t.ownerState,i=n.container,o=n.rowSpacing,a={};if(i&&0!==o){var s,l=(0,Z.P$)({values:o,breakpoints:e.breakpoints.values});"object"===typeof l&&(s=tt({breakpoints:e.breakpoints.values,values:l})),a=(0,Z.k9)({theme:e},l,(function(t,n){var i,o=e.spacing(t);return"0px"!==o?(0,r.Z)({marginTop:"-".concat(Q(o))},"& > .".concat(J.item),{paddingTop:Q(o)}):null!=(i=s)&&i.includes(n)?{}:(0,r.Z)({marginTop:0},"& > .".concat(J.item),{paddingTop:0})}))}return a}),(function(t){var e=t.theme,n=t.ownerState,i=n.container,o=n.columnSpacing,a={};if(i&&0!==o){var s,l=(0,Z.P$)({values:o,breakpoints:e.breakpoints.values});"object"===typeof l&&(s=tt({breakpoints:e.breakpoints.values,values:l})),a=(0,Z.k9)({theme:e},l,(function(t,n){var i,o=e.spacing(t);return"0px"!==o?(0,r.Z)({width:"calc(100% + ".concat(Q(o),")"),marginLeft:"-".concat(Q(o))},"& > .".concat(J.item),{paddingLeft:Q(o)}):null!=(i=s)&&i.includes(n)?{}:(0,r.Z)({width:"100%",marginLeft:0},"& > .".concat(J.item),{paddingLeft:0})}))}return a}),(function(t){var e,n=t.theme,r=t.ownerState;return n.breakpoints.keys.reduce((function(t,i){var a={};if(r[i]&&(e=r[i]),!e)return t;if(!0===e)a={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===e)a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{var s=(0,Z.P$)({values:r.columns,breakpoints:n.breakpoints.values}),l="object"===typeof s?s[i]:s;if(void 0===l||null===l)return t;var u="".concat(Math.round(e/l*1e8)/1e6,"%"),c={};if(r.container&&r.item&&0!==r.columnSpacing){var h=n.spacing(r.columnSpacing);if("0px"!==h){var p="calc(".concat(u," + ").concat(Q(h),")");c={flexBasis:p,maxWidth:p}}}a=(0,o.Z)({flexBasis:u,flexGrow:0,maxWidth:u},c)}return 0===n.breakpoints.values[i]?Object.assign(t,a):t[n.breakpoints.up(i)]=a,t}),{})}));var nt=function(t){var e=t.classes,n=t.container,r=t.direction,i=t.item,o=t.spacing,a=t.wrap,s=t.zeroMinWidth,l=t.breakpoints,c=[];n&&(c=function(t,e){if(!t||t<=0)return[];if("string"===typeof t&&!Number.isNaN(Number(t))||"number"===typeof t)return["spacing-xs-".concat(String(t))];var n=[];return e.forEach((function(e){var r=t[e];if(Number(r)>0){var i="spacing-".concat(e,"-").concat(String(r));n.push(i)}})),n}(o,l));var h=[];l.forEach((function(e){var n=t[e];n&&h.push("grid-".concat(e,"-").concat(String(n)))}));var p={root:["root",n&&"container",i&&"item",s&&"zeroMinWidth"].concat((0,A.Z)(c),["row"!==r&&"direction-xs-".concat(String(r)),"wrap"!==a&&"wrap-xs-".concat(String(a))],h)};return(0,u.Z)(p,K,e)},rt=t.forwardRef((function(e,n){var r=(0,w.Z)({props:e,name:"MuiGrid"}),s=(0,L.Z)(W.Z).breakpoints,l=C(r),u=l.className,c=l.columns,h=l.columnSpacing,p=l.component,d=void 0===p?"div":p,y=l.container,g=void 0!==y&&y,v=l.direction,m=void 0===v?"row":v,b=l.item,_=void 0!==b&&b,x=l.rowSpacing,k=l.spacing,E=void 0===k?0:k,T=l.wrap,A=void 0===T?"wrap":T,S=l.zeroMinWidth,M=void 0!==S&&S,I=(0,i.Z)(l,$),O=x||E,P=h||E,R=t.useContext(Y),N=g?c||12:R,j={},D=(0,o.Z)({},I);s.keys.forEach((function(t){null!=I[t]&&(j[t]=I[t],delete D[t])}));var z=(0,o.Z)({},l,{columns:N,container:g,direction:m,item:_,rowSpacing:O,columnSpacing:P,wrap:A,zeroMinWidth:M,spacing:E},j,{breakpoints:s.keys}),F=nt(z);return(0,f.jsx)(Y.Provider,{value:N,children:(0,f.jsx)(et,(0,o.Z)({ownerState:z,className:(0,a.Z)(F.root,u),as:d,ref:n},D))})})),it=rt;var ot=function(t){var e=t.updateShopInfo,n=t.shops;return null===n?(0,f.jsx)("div",{}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("p",{children:"Choisir un magasin pour voir les informations qui le concerne"}),(0,f.jsx)(it,{sx:{mb:3},container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:n.map((function(t,n){return(0,f.jsx)(it,{item:!0,xs:4,onClick:e,children:(0,f.jsx)("img",{"data-id":n,src:window.location.origin+"/img/"+t.Title+".png",width:"90%"})},n)}))})]})},at=__webpack_require__(5735),st=__webpack_require__(2065),lt=__webpack_require__(4843),ut=__webpack_require__(6868),ct=__webpack_require__(3031);function ht(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function pt(t,e){return pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pt(t,e)}var ft=t.createContext(null);function dt(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(t){return t})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function yt(t,e,n){return null!=n[e]?n[e]:t.props[e]}function gt(e,n,r){var i=dt(e.children),o=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var r,i=Object.create(null),o=[];for(var a in t)a in e?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in e){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];s[i[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(n,i);return Object.keys(o).forEach((function(a){var s=o[a];if((0,t.isValidElement)(s)){var l=a in n,u=a in i,c=n[a],h=(0,t.isValidElement)(c)&&!c.props.in;!u||l&&!h?u||!l||h?u&&l&&(0,t.isValidElement)(c)&&(o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:c.props.in,exit:yt(s,"exit",e),enter:yt(s,"enter",e)})):o[a]=(0,t.cloneElement)(s,{in:!1}):o[a]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:yt(s,"exit",e),enter:yt(s,"enter",e)})}})),o}var vt=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},mt=function(e){var n,r;function a(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}r=e,(n=a).prototype=Object.create(r.prototype),n.prototype.constructor=n,pt(n,r);var s=a.prototype;return s.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},s.componentWillUnmount=function(){this.mounted=!1},a.getDerivedStateFromProps=function(e,n){var r,i,o=n.children,a=n.handleExited;return{children:n.firstRender?(r=e,i=a,dt(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:yt(e,"appear",r),enter:yt(e,"enter",r),exit:yt(e,"exit",r)})}))):gt(e,o,a),firstRender:!1}},s.handleExited=function(t,e){var n=dt(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=(0,o.Z)({},e.children);return delete n[t.key],{children:n}})))},s.render=function(){var e=this.props,n=e.component,r=e.childFactory,o=(0,i.Z)(e,["component","childFactory"]),a=this.state.contextValue,s=vt(this.state.children).map(r);return delete o.appear,delete o.enter,delete o.exit,null===n?t.createElement(ft.Provider,{value:a},s):t.createElement(ft.Provider,{value:a},t.createElement(n,o,s))},a}(t.Component);mt.propTypes={},mt.defaultProps={component:"div",childFactory:function(t){return t}};var bt=mt,_t=(__webpack_require__(3361),__webpack_require__(2110),__webpack_require__(9140));__webpack_require__(2561);function wt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,_t.O)(e)}var xt=function(){var t=wt.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var kt=function(e){var r=e.className,i=e.classes,o=e.pulsate,s=void 0!==o&&o,l=e.rippleX,u=e.rippleY,c=e.rippleSize,h=e.in,p=e.onExited,d=e.timeout,y=t.useState(!1),g=(0,n.Z)(y,2),v=g[0],m=g[1],b=(0,a.Z)(r,i.ripple,i.rippleVisible,s&&i.ripplePulsate),_={width:c,height:c,top:-c/2+u,left:-c/2+l},w=(0,a.Z)(i.child,v&&i.childLeaving,s&&i.childPulsate);return h||v||m(!0),t.useEffect((function(){if(!h&&null!=p){var t=setTimeout(p,d);return function(){clearTimeout(t)}}}),[p,h,d]),(0,f.jsx)("span",{className:b,style:_,children:(0,f.jsx)("span",{className:w})})};var Et,Tt,At,St,Mt,It,Ot,Ct,Lt=(0,D.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Pt=["center","classes","className"],Rt=80,Nt=xt(Mt||(Mt=Et||(Et=ht(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),jt=xt(It||(It=Tt||(Tt=ht(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),Dt=xt(Ot||(Ot=At||(At=ht(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),zt=(0,_.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Ft=(0,_.ZP)(kt,{name:"MuiTouchRipple",slot:"Ripple"})(Ct||(Ct=St||(St=ht(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),Lt.rippleVisible,Nt,550,(function(t){return t.theme.transitions.easing.easeInOut}),Lt.ripplePulsate,(function(t){return t.theme.transitions.duration.shorter}),Lt.child,Lt.childLeaving,jt,550,(function(t){return t.theme.transitions.easing.easeInOut}),Lt.childPulsate,Dt,(function(t){return t.theme.transitions.easing.easeInOut})),Bt=t.forwardRef((function(e,r){var s=(0,w.Z)({props:e,name:"MuiTouchRipple"}),l=s.center,u=void 0!==l&&l,c=s.classes,h=void 0===c?{}:c,p=s.className,d=(0,i.Z)(s,Pt),y=t.useState([]),g=(0,n.Z)(y,2),v=g[0],m=g[1],b=t.useRef(0),_=t.useRef(null);t.useEffect((function(){_.current&&(_.current(),_.current=null)}),[v]);var x=t.useRef(!1),k=t.useRef(null),E=t.useRef(null),T=t.useRef(null);t.useEffect((function(){return function(){clearTimeout(k.current)}}),[]);var S=t.useCallback((function(t){var e=t.pulsate,n=t.rippleX,r=t.rippleY,i=t.rippleSize,o=t.cb;m((function(t){return[].concat((0,A.Z)(t),[(0,f.jsx)(Ft,{classes:{ripple:(0,a.Z)(h.ripple,Lt.ripple),rippleVisible:(0,a.Z)(h.rippleVisible,Lt.rippleVisible),ripplePulsate:(0,a.Z)(h.ripplePulsate,Lt.ripplePulsate),child:(0,a.Z)(h.child,Lt.child),childLeaving:(0,a.Z)(h.childLeaving,Lt.childLeaving),childPulsate:(0,a.Z)(h.childPulsate,Lt.childPulsate)},timeout:550,pulsate:e,rippleX:n,rippleY:r,rippleSize:i},b.current)])})),b.current+=1,_.current=o}),[h]),M=t.useCallback((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=e.pulsate,i=void 0!==r&&r,o=e.center,a=void 0===o?u||e.pulsate:o,s=e.fakeElement,l=void 0!==s&&s;if("mousedown"===(null==t?void 0:t.type)&&x.current)x.current=!1;else{"touchstart"===(null==t?void 0:t.type)&&(x.current=!0);var c,h,p,f=l?null:T.current,d=f?f.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(a||void 0===t||0===t.clientX&&0===t.clientY||!t.clientX&&!t.touches)c=Math.round(d.width/2),h=Math.round(d.height/2);else{var y=t.touches&&t.touches.length>0?t.touches[0]:t,g=y.clientX,v=y.clientY;c=Math.round(g-d.left),h=Math.round(v-d.top)}if(a)(p=Math.sqrt((2*Math.pow(d.width,2)+Math.pow(d.height,2))/3))%2===0&&(p+=1);else{var m=2*Math.max(Math.abs((f?f.clientWidth:0)-c),c)+2,b=2*Math.max(Math.abs((f?f.clientHeight:0)-h),h)+2;p=Math.sqrt(Math.pow(m,2)+Math.pow(b,2))}null!=t&&t.touches?null===E.current&&(E.current=function(){S({pulsate:i,rippleX:c,rippleY:h,rippleSize:p,cb:n})},k.current=setTimeout((function(){E.current&&(E.current(),E.current=null)}),Rt)):S({pulsate:i,rippleX:c,rippleY:h,rippleSize:p,cb:n})}}),[u,S]),I=t.useCallback((function(){M({},{pulsate:!0})}),[M]),O=t.useCallback((function(t,e){if(clearTimeout(k.current),"touchend"===(null==t?void 0:t.type)&&E.current)return E.current(),E.current=null,void(k.current=setTimeout((function(){O(t,e)})));E.current=null,m((function(t){return t.length>0?t.slice(1):t})),_.current=e}),[]);return t.useImperativeHandle(r,(function(){return{pulsate:I,start:M,stop:O}}),[I,M,O]),(0,f.jsx)(zt,(0,o.Z)({className:(0,a.Z)(Lt.root,h.root,p),ref:T},d,{children:(0,f.jsx)(bt,{component:null,exit:!0,children:v})}))})),Gt=Bt;function Ht(t){return(0,l.Z)("MuiButtonBase",t)}var Ut,qt=(0,D.Z)("MuiButtonBase",["root","disabled","focusVisible"]),Vt=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Zt=(0,_.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(t,e){return e.root}})((Ut={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,r.Z)(Ut,"&.".concat(qt.disabled),{pointerEvents:"none",cursor:"default"}),(0,r.Z)(Ut,"@media print",{colorAdjust:"exact"}),Ut)),Wt=t.forwardRef((function(e,r){var s=(0,w.Z)({props:e,name:"MuiButtonBase"}),l=s.action,c=s.centerRipple,h=void 0!==c&&c,p=s.children,d=s.className,y=s.component,g=void 0===y?"button":y,v=s.disabled,m=void 0!==v&&v,b=s.disableRipple,_=void 0!==b&&b,x=s.disableTouchRipple,k=void 0!==x&&x,E=s.focusRipple,T=void 0!==E&&E,A=s.LinkComponent,S=void 0===A?"a":A,M=s.onBlur,I=s.onClick,O=s.onContextMenu,C=s.onDragLeave,L=s.onFocus,P=s.onFocusVisible,R=s.onKeyDown,N=s.onKeyUp,j=s.onMouseDown,D=s.onMouseLeave,z=s.onMouseUp,F=s.onTouchEnd,B=s.onTouchMove,G=s.onTouchStart,H=s.tabIndex,U=void 0===H?0:H,q=s.TouchRippleProps,V=s.touchRippleRef,Z=s.type,W=(0,i.Z)(s,Vt),Y=t.useRef(null),K=t.useRef(null),X=(0,lt.Z)(K,V),J=(0,ct.Z)(),$=J.isFocusVisibleRef,Q=J.onFocus,tt=J.onBlur,et=J.ref,nt=t.useState(!1),rt=(0,n.Z)(nt,2),it=rt[0],ot=rt[1];m&&it&&ot(!1),t.useImperativeHandle(l,(function(){return{focusVisible:function(){ot(!0),Y.current.focus()}}}),[]);var at=t.useState(!1),st=(0,n.Z)(at,2),ht=st[0],pt=st[1];t.useEffect((function(){pt(!0)}),[]);var ft=ht&&!_&&!m;function dt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;return(0,ut.Z)((function(r){return e&&e(r),!n&&K.current&&K.current[t](r),!0}))}t.useEffect((function(){it&&T&&!_&&ht&&K.current.pulsate()}),[_,T,it,ht]);var yt=dt("start",j),gt=dt("stop",O),vt=dt("stop",C),mt=dt("stop",z),bt=dt("stop",(function(t){it&&t.preventDefault(),D&&D(t)})),_t=dt("start",G),wt=dt("stop",F),xt=dt("stop",B),kt=dt("stop",(function(t){tt(t),!1===$.current&&ot(!1),M&&M(t)}),!1),Et=(0,ut.Z)((function(t){Y.current||(Y.current=t.currentTarget),Q(t),!0===$.current&&(ot(!0),P&&P(t)),L&&L(t)})),Tt=function(){var t=Y.current;return g&&"button"!==g&&!("A"===t.tagName&&t.href)},At=t.useRef(!1),St=(0,ut.Z)((function(t){T&&!At.current&&it&&K.current&&" "===t.key&&(At.current=!0,K.current.stop(t,(function(){K.current.start(t)}))),t.target===t.currentTarget&&Tt()&&" "===t.key&&t.preventDefault(),R&&R(t),t.target===t.currentTarget&&Tt()&&"Enter"===t.key&&!m&&(t.preventDefault(),I&&I(t))})),Mt=(0,ut.Z)((function(t){T&&" "===t.key&&K.current&&it&&!t.defaultPrevented&&(At.current=!1,K.current.stop(t,(function(){K.current.pulsate(t)}))),N&&N(t),I&&t.target===t.currentTarget&&Tt()&&" "===t.key&&!t.defaultPrevented&&I(t)})),It=g;"button"===It&&(W.href||W.to)&&(It=S);var Ot={};"button"===It?(Ot.type=void 0===Z?"button":Z,Ot.disabled=m):(W.href||W.to||(Ot.role="button"),m&&(Ot["aria-disabled"]=m));var Ct=(0,lt.Z)(r,et,Y);var Lt=(0,o.Z)({},s,{centerRipple:h,component:g,disabled:m,disableRipple:_,disableTouchRipple:k,focusRipple:T,tabIndex:U,focusVisible:it}),Pt=function(t){var e=t.disabled,n=t.focusVisible,r=t.focusVisibleClassName,i=t.classes,o={root:["root",e&&"disabled",n&&"focusVisible"]},a=(0,u.Z)(o,Ht,i);return n&&r&&(a.root+=" ".concat(r)),a}(Lt);return(0,f.jsxs)(Zt,(0,o.Z)({as:It,className:(0,a.Z)(Pt.root,d),ownerState:Lt,onBlur:kt,onClick:I,onContextMenu:gt,onFocus:Et,onKeyDown:St,onKeyUp:Mt,onMouseDown:yt,onMouseLeave:bt,onMouseUp:mt,onDragLeave:vt,onTouchEnd:wt,onTouchMove:xt,onTouchStart:_t,ref:Ct,tabIndex:m?-1:U,type:Z},Ot,W,{children:[p,ft?(0,f.jsx)(Gt,(0,o.Z)({ref:X,center:h},q)):null]}))})),Yt=Wt;function Kt(t){return(0,l.Z)("MuiButton",t)}var Xt=(0,D.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var Jt=t.createContext({}),$t=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Qt=function(t){return(0,o.Z)({},"small"===t.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===t.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===t.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},te=(0,_.ZP)(Yt,{shouldForwardProp:function(t){return(0,_.FO)(t)||"classes"===t},name:"MuiButton",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e[n.variant],e["".concat(n.variant).concat((0,b.Z)(n.color))],e["size".concat((0,b.Z)(n.size))],e["".concat(n.variant,"Size").concat((0,b.Z)(n.size))],"inherit"===n.color&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})((function(t){var e,n,i,a=t.theme,s=t.ownerState;return(0,o.Z)({},a.typography.button,(e={minWidth:64,padding:"6px 16px",borderRadius:(a.vars||a).shape.borderRadius,transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),"&:hover":(0,o.Z)({textDecoration:"none",backgroundColor:a.vars?"rgba(".concat(a.vars.palette.text.primaryChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,st.Fq)(a.palette.text.primary,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===s.variant&&"inherit"!==s.color&&{backgroundColor:a.vars?"rgba(".concat(a.vars.palette[s.color].mainChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,st.Fq)(a.palette[s.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===s.variant&&"inherit"!==s.color&&{border:"1px solid ".concat((a.vars||a).palette[s.color].main),backgroundColor:a.vars?"rgba(".concat(a.vars.palette[s.color].mainChannel," / ").concat(a.vars.palette.action.hoverOpacity,")"):(0,st.Fq)(a.palette[s.color].main,a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===s.variant&&{backgroundColor:(a.vars||a).palette.grey.A100,boxShadow:(a.vars||a).shadows[4],"@media (hover: none)":{boxShadow:(a.vars||a).shadows[2],backgroundColor:(a.vars||a).palette.grey[300]}},"contained"===s.variant&&"inherit"!==s.color&&{backgroundColor:(a.vars||a).palette[s.color].dark,"@media (hover: none)":{backgroundColor:(a.vars||a).palette[s.color].main}}),"&:active":(0,o.Z)({},"contained"===s.variant&&{boxShadow:(a.vars||a).shadows[8]})},(0,r.Z)(e,"&.".concat(Xt.focusVisible),(0,o.Z)({},"contained"===s.variant&&{boxShadow:(a.vars||a).shadows[6]})),(0,r.Z)(e,"&.".concat(Xt.disabled),(0,o.Z)({color:(a.vars||a).palette.action.disabled},"outlined"===s.variant&&{border:"1px solid ".concat((a.vars||a).palette.action.disabledBackground)},"contained"===s.variant&&{color:(a.vars||a).palette.action.disabled,boxShadow:(a.vars||a).shadows[0],backgroundColor:(a.vars||a).palette.action.disabledBackground})),e),"text"===s.variant&&{padding:"6px 8px"},"text"===s.variant&&"inherit"!==s.color&&{color:(a.vars||a).palette[s.color].main},"outlined"===s.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===s.variant&&"inherit"!==s.color&&{color:(a.vars||a).palette[s.color].main,border:a.vars?"1px solid rgba(".concat(a.vars.palette[s.color].mainChannel," / 0.5)"):"1px solid ".concat((0,st.Fq)(a.palette[s.color].main,.5))},"contained"===s.variant&&{color:a.vars?a.vars.palette.text.primary:null==(n=(i=a.palette).getContrastText)?void 0:n.call(i,a.palette.grey[300]),backgroundColor:(a.vars||a).palette.grey[300],boxShadow:(a.vars||a).shadows[2]},"contained"===s.variant&&"inherit"!==s.color&&{color:(a.vars||a).palette[s.color].contrastText,backgroundColor:(a.vars||a).palette[s.color].main},"inherit"===s.color&&{color:"inherit",borderColor:"currentColor"},"small"===s.size&&"text"===s.variant&&{padding:"4px 5px",fontSize:a.typography.pxToRem(13)},"large"===s.size&&"text"===s.variant&&{padding:"8px 11px",fontSize:a.typography.pxToRem(15)},"small"===s.size&&"outlined"===s.variant&&{padding:"3px 9px",fontSize:a.typography.pxToRem(13)},"large"===s.size&&"outlined"===s.variant&&{padding:"7px 21px",fontSize:a.typography.pxToRem(15)},"small"===s.size&&"contained"===s.variant&&{padding:"4px 10px",fontSize:a.typography.pxToRem(13)},"large"===s.size&&"contained"===s.variant&&{padding:"8px 22px",fontSize:a.typography.pxToRem(15)},s.fullWidth&&{width:"100%"})}),(function(t){var e;return t.ownerState.disableElevation&&(e={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,r.Z)(e,"&.".concat(Xt.focusVisible),{boxShadow:"none"}),(0,r.Z)(e,"&:active",{boxShadow:"none"}),(0,r.Z)(e,"&.".concat(Xt.disabled),{boxShadow:"none"}),e)})),ee=(0,_.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(t,e){var n=t.ownerState;return[e.startIcon,e["iconSize".concat((0,b.Z)(n.size))]]}})((function(t){var e=t.ownerState;return(0,o.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},Qt(e))})),ne=(0,_.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(t,e){var n=t.ownerState;return[e.endIcon,e["iconSize".concat((0,b.Z)(n.size))]]}})((function(t){var e=t.ownerState;return(0,o.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},Qt(e))})),re=t.forwardRef((function(e,n){var r=t.useContext(Jt),s=(0,at.Z)(r,e),l=(0,w.Z)({props:s,name:"MuiButton"}),c=l.children,h=l.color,p=void 0===h?"primary":h,d=l.component,y=void 0===d?"button":d,g=l.className,v=l.disabled,m=void 0!==v&&v,_=l.disableElevation,x=void 0!==_&&_,k=l.disableFocusRipple,E=void 0!==k&&k,T=l.endIcon,A=l.focusVisibleClassName,S=l.fullWidth,M=void 0!==S&&S,I=l.size,O=void 0===I?"medium":I,C=l.startIcon,L=l.type,P=l.variant,R=void 0===P?"text":P,N=(0,i.Z)(l,$t),j=(0,o.Z)({},l,{color:p,component:y,disabled:m,disableElevation:x,disableFocusRipple:E,fullWidth:M,size:O,type:L,variant:R}),D=function(t){var e=t.color,n=t.disableElevation,r=t.fullWidth,i=t.size,a=t.variant,s=t.classes,l={root:["root",a,"".concat(a).concat((0,b.Z)(e)),"size".concat((0,b.Z)(i)),"".concat(a,"Size").concat((0,b.Z)(i)),"inherit"===e&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,b.Z)(i))],endIcon:["endIcon","iconSize".concat((0,b.Z)(i))]},c=(0,u.Z)(l,Kt,s);return(0,o.Z)({},s,c)}(j),z=C&&(0,f.jsx)(ee,{className:D.startIcon,ownerState:j,children:C}),F=T&&(0,f.jsx)(ne,{className:D.endIcon,ownerState:j,children:T});return(0,f.jsxs)(te,(0,o.Z)({ownerState:j,className:(0,a.Z)(r.className,D.root,g),component:y,disabled:m,focusRipple:!E,focusVisibleClassName:(0,a.Z)(D.focusVisible,A),ref:n,type:L},N,{classes:D,children:[z,c,F]}))})),ie=__webpack_require__(2093);var oe=function(t){var e=t.shop;return null===e?(0,f.jsx)("div",{}):(0,f.jsxs)(k,{sx:{mb:2},children:[(0,f.jsxs)(k,{sx:{mb:6},children:[(0,f.jsx)(U,{sx:{mb:3},children:e.Title}),(0,f.jsx)(U,{sx:{mb:4},children:e.Descriptif}),(0,f.jsxs)(U,{sx:{mb:3},children:["Lundi au Vendredi ",e.Horaires]}),(0,f.jsx)("article",{children:(0,f.jsx)(U,{children:e.Street})})]}),(0,f.jsxs)(it,{container:!0,flexDirection:"column",spacing:3,children:[(0,f.jsx)(it,{item:!0,justifyContent:"center",children:(0,f.jsxs)(re,{href:"tel:".concat(String(e.T_x00e9_l_x00e9_phone)),variant:"contained",children:["Appeler ",e.Title]})}),(0,f.jsx)(it,{item:!0,justifyContent:"center",children:(0,f.jsxs)(re,{href:"mailto:bruno.sosin@matservgf.com",variant:"contained",children:["Envoyer un email \xe0 ",e.Title]})}),(0,f.jsx)(it,{item:!0,justifyContent:"center",children:(0,f.jsxs)(re,{href:"https://www.facebook.com/profile.php?id=100090642260998",target:"_blank",variant:"contained",children:[" ",(0,f.jsx)(ie.Z,{})," Nous rejoindre sur Facebook"]})})]})]})};__webpack_require__(5892);var ae=function(e){e.shop;var r=e.shopsList,i=(0,t.useState)(null),o=(0,n.Z)(i,2),a=(o[0],o[1],t.useRef(null));return(0,t.useEffect)((function(){if(a.current){var t=window.H,e=new t.service.Platform({apikey:"swUKpTO9NI2tyqIx3vpAAX9gbQDtZ9l6KGZEEw4IupY"}).createDefaultLayers(),n=new t.map.Icon('<svg id="Calque_1" width="25px" data-name="Calque 1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 167.42 131.24"><defs><style>.cls-1,.cls-3{fill:#003a96;}.cls-1,.cls-2{fill-rule:evenodd;}.cls-2{fill:url(#D\xe9grad\xe9_sans_nom_8);}</style><linearGradient id="D\xe9grad\xe9_sans_nom_8" x1="50.27" y1="65.11" x2="131.31" y2="65.11" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ff0"/><stop offset="0.19" stop-color="#fff500"/><stop offset="0.52" stop-color="#ffdb00"/><stop offset="0.94" stop-color="#ffb100"/><stop offset="1" stop-color="#fa0"/></linearGradient></defs><path class="cls-1" d="M56.42,19h53.15l25.09,43.48L54.94,21.62Z"/><path class="cls-2" d="M53,24.92l78.28,40.17L53.06,105.3l-2.79-4.84L85.45,65.09,50.27,29.69,53,24.92Z"/><path class="cls-1" d="M48.3,33.12l31.77,32L48.29,97,29.85,65.08l18.45-32Z"/><path class="cls-1" d="M134.67,67.65l-25.1,43.47H56.43L55,108.61Z"/><path class="cls-3" d="M116.27,122.86H49.89L16.7,65.37,49.89,7.88h66.38l33.19,57.49Zm-64.83-2.69h63.28l31.63-54.8L114.72,10.58H51.44L19.81,65.37Z"/></svg>');console.log(r);var i=r.map((function(t){return[{lat:t.GeoLoc.Latitude,lng:t.GeoLoc.Longitude},{icon:n}]})),o=i.map((function(e){return new t.map.Marker(e[0],e[1])})),s=new t.Map(a.current,e.vector.normal.map,{pixelRatio:window.devicePixelRatio,center:{lat:0,lng:0},zoom:2});s.addObjects(o),s.setCenter(i[0][0]),s.setZoom(8,!0);new t.mapevents.Behavior(new t.mapevents.MapEvents(s)),t.ui.UI.createDefault(s,e);return function(){s.dispose()}}}),[a]),(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"map",style:{width:"300px",height:"300px"},ref:a})})},se=["MS SUPPORT","MS SAFETY","MS TOOLS","MS HEAVY","BOLT AND LADDER KOUROU","MS INDUSTRY","PRESTATIONS ET SERVICES","MS LOCATION","MS SUPPORT","BOLT AND LADDER COLLERY","BOLT AND LADDER SUZINI"];var le=function(){var e=(0,t.useState)(null),r=(0,n.Z)(e,2),i=r[0],o=r[1],a=(0,t.useState)(null),s=(0,n.Z)(a,2),l=s[0],u=s[1];return(0,t.useEffect)((function(){null===i&&fetch("https://prod-20.brazilsouth.logic.azure.com:443/workflows/e233eb8317ff4a318d8e84ac1e3040a4/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=rT65bKZdt26Qt4QwfKfmSQoaspmO80YWtts30UD-DF8",{method:"POST"}).then((function(t){return t.json()})).then((function(t){var e=t.d.results.filter((function(t){return se.find((function(e){return e===t.Title}))}));o(e)}))})),null===i?(0,f.jsx)("p",{children:"En chargement"}):(0,f.jsxs)("div",{className:"App",children:[(0,f.jsx)("header",{className:"App-header",children:(0,f.jsx)(V,{id:"pageHeader"})}),(0,f.jsx)(ot,{id:"shopSelectorGallery",updateShopInfo:function(t){return u(i[t.target.dataset.id])},shops:i}),(0,f.jsx)(oe,{id:"shopInfoViz",shop:l}),(0,f.jsx)(ae,{id:"shopMaps",shop:l,shopsList:i})]})},ue=function(t){t&&t instanceof Function&&__webpack_require__.e(787).then(__webpack_require__.bind(__webpack_require__,787)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,o=e.getLCP,a=e.getTTFB;n(t),r(t),i(t),o(t),a(t)}))};e.createRoot(document.getElementById("root")).render((0,f.jsx)(t.StrictMode,{children:(0,f.jsx)(le,{})})),ue()}()})();
//# sourceMappingURL=main.69a4241f.js.map