var xL=(i,o)=>()=>(o||i((o={exports:{}}).exports,o),o.exports);var wL=xL((exports,module)=>{function _mergeNamespaces(i,o){for(var s=0;s<o.length;s++){const _e=o[s];if(typeof _e!="string"&&!Array.isArray(_e)){for(const _n in _e)if(_n!=="default"&&!(_n in i)){const _o=Object.getOwnPropertyDescriptor(_e,_n);_o&&Object.defineProperty(i,_n,_o.get?_o:{enumerable:!0,get:()=>_e[_n]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const _n of document.querySelectorAll('link[rel="modulepreload"]'))_e(_n);new MutationObserver(_n=>{for(const _o of _n)if(_o.type==="childList")for(const _a of _o.addedNodes)_a.tagName==="LINK"&&_a.rel==="modulepreload"&&_e(_a)}).observe(document,{childList:!0,subtree:!0});function s(_n){const _o={};return _n.integrity&&(_o.integrity=_n.integrity),_n.referrerPolicy&&(_o.referrerPolicy=_n.referrerPolicy),_n.crossOrigin==="use-credentials"?_o.credentials="include":_n.crossOrigin==="anonymous"?_o.credentials="omit":_o.credentials="same-origin",_o}function _e(_n){if(_n.ep)return;_n.ep=!0;const _o=s(_n);fetch(_n.href,_o)}})();function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function getAugmentedNamespace(i){if(i.__esModule)return i;var o=i.default;if(typeof o=="function"){var s=function _e(){return this instanceof _e?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};s.prototype=o.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(i).forEach(function(_e){var _n=Object.getOwnPropertyDescriptor(i,_e);Object.defineProperty(s,_e,_n.get?_n:{enumerable:!0,get:function(){return i[_e]}})}),s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(i){return i===null||typeof i!="object"?null:(i=z$2&&i[z$2]||i["@@iterator"],typeof i=="function"?i:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(i,o,s){this.props=i,this.context=o,this.refs=D$1,this.updater=s||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(i,o){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,o,"setState")};E$1.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(i,o,s){this.props=i,this.context=o,this.refs=D$1,this.updater=s||B$1}var H$3=G$1.prototype=new F;H$3.constructor=G$1;C$1(H$3,E$1.prototype);H$3.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(i,o,s){var _e,_n={},_o=null,_a=null;if(o!=null)for(_e in o.ref!==void 0&&(_a=o.ref),o.key!==void 0&&(_o=""+o.key),o)J.call(o,_e)&&!L$1.hasOwnProperty(_e)&&(_n[_e]=o[_e]);var _u=arguments.length-2;if(_u===1)_n.children=s;else if(1<_u){for(var _h=Array(_u),ty=0;ty<_u;ty++)_h[ty]=arguments[ty+2];_n.children=_h}if(i&&i.defaultProps)for(_e in _u=i.defaultProps,_u)_n[_e]===void 0&&(_n[_e]=_u[_e]);return{$$typeof:l$2,type:i,key:_o,ref:_a,props:_n,_owner:K$1.current}}function N$1(i,o){return{$$typeof:l$2,type:i.type,key:o,ref:i.ref,props:i.props,_owner:i._owner}}function O$1(i){return typeof i=="object"&&i!==null&&i.$$typeof===l$2}function escape(i){var o={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(s){return o[s]})}var P$1=/\/+/g;function Q$1(i,o){return typeof i=="object"&&i!==null&&i.key!=null?escape(""+i.key):o.toString(36)}function R$1(i,o,s,_e,_n){var _o=typeof i;(_o==="undefined"||_o==="boolean")&&(i=null);var _a=!1;if(i===null)_a=!0;else switch(_o){case"string":case"number":_a=!0;break;case"object":switch(i.$$typeof){case l$2:case n$2:_a=!0}}if(_a)return _a=i,_n=_n(_a),i=_e===""?"."+Q$1(_a,0):_e,I$1(_n)?(s="",i!=null&&(s=i.replace(P$1,"$&/")+"/"),R$1(_n,o,s,"",function(ty){return ty})):_n!=null&&(O$1(_n)&&(_n=N$1(_n,s+(!_n.key||_a&&_a.key===_n.key?"":(""+_n.key).replace(P$1,"$&/")+"/")+i)),o.push(_n)),1;if(_a=0,_e=_e===""?".":_e+":",I$1(i))for(var _u=0;_u<i.length;_u++){_o=i[_u];var _h=_e+Q$1(_o,_u);_a+=R$1(_o,o,s,_h,_n)}else if(_h=A$2(i),typeof _h=="function")for(i=_h.call(i),_u=0;!(_o=i.next()).done;)_o=_o.value,_h=_e+Q$1(_o,_u++),_a+=R$1(_o,o,s,_h,_n);else if(_o==="object")throw o=String(i),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return _a}function S$1(i,o,s){if(i==null)return i;var _e=[],_n=0;return R$1(i,_e,"","",function(_o){return o.call(s,_o,_n++)}),_e}function T$1(i){if(i._status===-1){var o=i._result;o=o(),o.then(function(s){(i._status===0||i._status===-1)&&(i._status=1,i._result=s)},function(s){(i._status===0||i._status===-1)&&(i._status=2,i._result=s)}),i._status===-1&&(i._status=0,i._result=o)}if(i._status===1)return i._result.default;throw i._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$1,forEach:function(i,o,s){S$1(i,function(){o.apply(this,arguments)},s)},count:function(i){var o=0;return S$1(i,function(){o++}),o},toArray:function(i){return S$1(i,function(o){return o})||[]},only:function(i){if(!O$1(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};react_production_min.Component=E$1;react_production_min.Fragment=p$3;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(i,o,s){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var _e=C$1({},i.props),_n=i.key,_o=i.ref,_a=i._owner;if(o!=null){if(o.ref!==void 0&&(_o=o.ref,_a=K$1.current),o.key!==void 0&&(_n=""+o.key),i.type&&i.type.defaultProps)var _u=i.type.defaultProps;for(_h in o)J.call(o,_h)&&!L$1.hasOwnProperty(_h)&&(_e[_h]=o[_h]===void 0&&_u!==void 0?_u[_h]:o[_h])}var _h=arguments.length-2;if(_h===1)_e.children=s;else if(1<_h){_u=Array(_h);for(var ty=0;ty<_h;ty++)_u[ty]=arguments[ty+2];_e.children=_u}return{$$typeof:l$2,type:i.type,key:_n,ref:_o,props:_e,_owner:_a}};react_production_min.createContext=function(i){return i={$$typeof:u,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:t$1,_context:i},i.Consumer=i};react_production_min.createElement=M$1;react_production_min.createFactory=function(i){var o=M$1.bind(null,i);return o.type=i,o};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(i){return{$$typeof:v$2,render:i}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(i){return{$$typeof:y$1,_payload:{_status:-1,_result:i},_init:T$1}};react_production_min.memo=function(i,o){return{$$typeof:x$1,type:i,compare:o===void 0?null:o}};react_production_min.startTransition=function(i){var o=V$1.transition;V$1.transition={};try{i()}finally{V$1.transition=o}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(i,o){return U$1.current.useCallback(i,o)};react_production_min.useContext=function(i){return U$1.current.useContext(i)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(i){return U$1.current.useDeferredValue(i)};react_production_min.useEffect=function(i,o){return U$1.current.useEffect(i,o)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(i,o,s){return U$1.current.useImperativeHandle(i,o,s)};react_production_min.useInsertionEffect=function(i,o){return U$1.current.useInsertionEffect(i,o)};react_production_min.useLayoutEffect=function(i,o){return U$1.current.useLayoutEffect(i,o)};react_production_min.useMemo=function(i,o){return U$1.current.useMemo(i,o)};react_production_min.useReducer=function(i,o,s){return U$1.current.useReducer(i,o,s)};react_production_min.useRef=function(i){return U$1.current.useRef(i)};react_production_min.useState=function(i){return U$1.current.useState(i)};react_production_min.useSyncExternalStore=function(i,o,s){return U$1.current.useSyncExternalStore(i,o,s)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$1=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$1(i,o,s){var _e,_n={},_o=null,_a=null;s!==void 0&&(_o=""+s),o.key!==void 0&&(_o=""+o.key),o.ref!==void 0&&(_a=o.ref);for(_e in o)m$2.call(o,_e)&&!p$2.hasOwnProperty(_e)&&(_n[_e]=o[_e]);if(i&&i.defaultProps)for(_e in o=i.defaultProps,o)_n[_e]===void 0&&(_n[_e]=o[_e]);return{$$typeof:k$1,type:i,key:_o,ref:_a,props:_n,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function o(_0,Y0){var N0=_0.length;_0.push(Y0);t:for(;0<N0;){var a1=N0-1>>>1,C1=_0[a1];if(0<_n(C1,Y0))_0[a1]=Y0,_0[N0]=C1,N0=a1;else break t}}function s(_0){return _0.length===0?null:_0[0]}function _e(_0){if(_0.length===0)return null;var Y0=_0[0],N0=_0.pop();if(N0!==Y0){_0[0]=N0;t:for(var a1=0,C1=_0.length,n_=C1>>>1;a1<n_;){var G1=2*(a1+1)-1,G_=_0[G1],p_=G1+1,M_=_0[p_];if(0>_n(G_,N0))p_<C1&&0>_n(M_,G_)?(_0[a1]=M_,_0[p_]=N0,a1=p_):(_0[a1]=G_,_0[G1]=N0,a1=G1);else if(p_<C1&&0>_n(M_,N0))_0[a1]=M_,_0[p_]=N0,a1=p_;else break t}}return Y0}function _n(_0,Y0){var N0=_0.sortIndex-Y0.sortIndex;return N0!==0?N0:_0.id-Y0.id}if(typeof performance=="object"&&typeof performance.now=="function"){var _o=performance;i.unstable_now=function(){return _o.now()}}else{var _a=Date,_u=_a.now();i.unstable_now=function(){return _a.now()-_u}}var _h=[],ty=[],oy=1,hy=null,fy=3,vy=!1,xy=!1,wy=!1,By=typeof setTimeout=="function"?setTimeout:null,Sy=typeof clearTimeout=="function"?clearTimeout:null,Ay=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Py(_0){for(var Y0=s(ty);Y0!==null;){if(Y0.callback===null)_e(ty);else if(Y0.startTime<=_0)_e(ty),Y0.sortIndex=Y0.expirationTime,o(_h,Y0);else break;Y0=s(ty)}}function Iy(_0){if(wy=!1,Py(_0),!xy)if(s(_h)!==null)xy=!0,K1($y);else{var Y0=s(ty);Y0!==null&&h_(Iy,Y0.startTime-_0)}}function $y(_0,Y0){xy=!1,wy&&(wy=!1,Sy(i0),i0=-1),vy=!0;var N0=fy;try{for(Py(Y0),hy=s(_h);hy!==null&&(!(hy.expirationTime>Y0)||_0&&!j0());){var a1=hy.callback;if(typeof a1=="function"){hy.callback=null,fy=hy.priorityLevel;var C1=a1(hy.expirationTime<=Y0);Y0=i.unstable_now(),typeof C1=="function"?hy.callback=C1:hy===s(_h)&&_e(_h),Py(Y0)}else _e(_h);hy=s(_h)}if(hy!==null)var n_=!0;else{var G1=s(ty);G1!==null&&h_(Iy,G1.startTime-Y0),n_=!1}return n_}finally{hy=null,fy=N0,vy=!1}}var Ky=!1,Jy=null,i0=-1,k0=5,g0=-1;function j0(){return!(i.unstable_now()-g0<k0)}function V0(){if(Jy!==null){var _0=i.unstable_now();g0=_0;var Y0=!0;try{Y0=Jy(!0,_0)}finally{Y0?k1():(Ky=!1,Jy=null)}}else Ky=!1}var k1;if(typeof Ay=="function")k1=function(){Ay(V0)};else if(typeof MessageChannel<"u"){var h1=new MessageChannel,r_=h1.port2;h1.port1.onmessage=V0,k1=function(){r_.postMessage(null)}}else k1=function(){By(V0,0)};function K1(_0){Jy=_0,Ky||(Ky=!0,k1())}function h_(_0,Y0){i0=By(function(){_0(i.unstable_now())},Y0)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(_0){_0.callback=null},i.unstable_continueExecution=function(){xy||vy||(xy=!0,K1($y))},i.unstable_forceFrameRate=function(_0){0>_0||125<_0?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k0=0<_0?Math.floor(1e3/_0):5},i.unstable_getCurrentPriorityLevel=function(){return fy},i.unstable_getFirstCallbackNode=function(){return s(_h)},i.unstable_next=function(_0){switch(fy){case 1:case 2:case 3:var Y0=3;break;default:Y0=fy}var N0=fy;fy=Y0;try{return _0()}finally{fy=N0}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(_0,Y0){switch(_0){case 1:case 2:case 3:case 4:case 5:break;default:_0=3}var N0=fy;fy=_0;try{return Y0()}finally{fy=N0}},i.unstable_scheduleCallback=function(_0,Y0,N0){var a1=i.unstable_now();switch(typeof N0=="object"&&N0!==null?(N0=N0.delay,N0=typeof N0=="number"&&0<N0?a1+N0:a1):N0=a1,_0){case 1:var C1=-1;break;case 2:C1=250;break;case 5:C1=1073741823;break;case 4:C1=1e4;break;default:C1=5e3}return C1=N0+C1,_0={id:oy++,callback:Y0,priorityLevel:_0,startTime:N0,expirationTime:C1,sortIndex:-1},N0>a1?(_0.sortIndex=N0,o(ty,_0),s(_h)===null&&_0===s(ty)&&(wy?(Sy(i0),i0=-1):wy=!0,h_(Iy,N0-a1))):(_0.sortIndex=C1,o(_h,_0),xy||vy||(xy=!0,K1($y))),_0},i.unstable_shouldYield=j0,i.unstable_wrapCallback=function(_0){var Y0=fy;return function(){var N0=fy;fy=Y0;try{return _0.apply(this,arguments)}finally{fy=N0}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,s=1;s<arguments.length;s++)o+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(i,o){ha(i,o),ha(i+"Capture",o)}function ha(i,o){for(ea[i]=o,i=0;i<o.length;i++)da.add(o[i])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(i){return ja.call(ma,i)?!0:ja.call(la,i)?!1:ka.test(i)?ma[i]=!0:(la[i]=!0,!1)}function pa(i,o,s,_e){if(s!==null&&s.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return _e?!1:s!==null?!s.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function qa(i,o,s,_e){if(o===null||typeof o>"u"||pa(i,o,s,_e))return!0;if(_e)return!1;if(s!==null)switch(s.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function v$1(i,o,s,_e,_n,_o,_a){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=_e,this.attributeNamespace=_n,this.mustUseProperty=s,this.propertyName=i,this.type=o,this.sanitizeURL=_o,this.removeEmptyString=_a}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){z$1[i]=new v$1(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];z$1[o]=new v$1(o,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){z$1[i]=new v$1(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){z$1[i]=new v$1(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){z$1[i]=new v$1(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){z$1[i]=new v$1(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){z$1[i]=new v$1(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){z$1[i]=new v$1(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){z$1[i]=new v$1(i,5,!1,i.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(ra,sa);z$1[o]=new v$1(o,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(ra,sa);z$1[o]=new v$1(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(ra,sa);z$1[o]=new v$1(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){z$1[i]=new v$1(i,1,!1,i.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){z$1[i]=new v$1(i,1,!1,i.toLowerCase(),null,!0,!0)});function ta(i,o,s,_e){var _n=z$1.hasOwnProperty(o)?z$1[o]:null;(_n!==null?_n.type!==0:_e||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(qa(o,s,_n,_e)&&(s=null),_e||_n===null?oa(o)&&(s===null?i.removeAttribute(o):i.setAttribute(o,""+s)):_n.mustUseProperty?i[_n.propertyName]=s===null?_n.type===3?!1:"":s:(o=_n.attributeName,_e=_n.attributeNamespace,s===null?i.removeAttribute(o):(_n=_n.type,s=_n===3||_n===4&&s===!0?"":""+s,_e?i.setAttributeNS(_e,o,s):i.setAttribute(o,s))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(i){return i===null||typeof i!="object"?null:(i=Ja&&i[Ja]||i["@@iterator"],typeof i=="function"?i:null)}var A$1=Object.assign,La;function Ma(i){if(La===void 0)try{throw Error()}catch(s){var o=s.stack.trim().match(/\n( *(at )?)/);La=o&&o[1]||""}return`
`+La+i}var Na=!1;function Oa(i,o){if(!i||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(ty){var _e=ty}Reflect.construct(i,[],o)}else{try{o.call()}catch(ty){_e=ty}i.call(o.prototype)}else{try{throw Error()}catch(ty){_e=ty}i()}}catch(ty){if(ty&&_e&&typeof ty.stack=="string"){for(var _n=ty.stack.split(`
`),_o=_e.stack.split(`
`),_a=_n.length-1,_u=_o.length-1;1<=_a&&0<=_u&&_n[_a]!==_o[_u];)_u--;for(;1<=_a&&0<=_u;_a--,_u--)if(_n[_a]!==_o[_u]){if(_a!==1||_u!==1)do if(_a--,_u--,0>_u||_n[_a]!==_o[_u]){var _h=`
`+_n[_a].replace(" at new "," at ");return i.displayName&&_h.includes("<anonymous>")&&(_h=_h.replace("<anonymous>",i.displayName)),_h}while(1<=_a&&0<=_u);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(i=i?i.displayName||i.name:"")?Ma(i):""}function Pa(i){switch(i.tag){case 5:return Ma(i.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return i=Oa(i.type,!1),i;case 11:return i=Oa(i.type.render,!1),i;case 1:return i=Oa(i.type,!0),i;default:return""}}function Qa(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ca:return(i.displayName||"Context")+".Consumer";case Ba:return(i._context.displayName||"Context")+".Provider";case Da:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ga:return o=i.displayName||null,o!==null?o:Qa(i.type)||"Memo";case Ha:o=i._payload,i=i._init;try{return Qa(i(o))}catch{}}return null}function Ra(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(o);case 8:return o===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Sa(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ta(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ua(i){var o=Ta(i)?"checked":"value",s=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),_e=""+i[o];if(!i.hasOwnProperty(o)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var _n=s.get,_o=s.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return _n.call(this)},set:function(_a){_e=""+_a,_o.call(this,_a)}}),Object.defineProperty(i,o,{enumerable:s.enumerable}),{getValue:function(){return _e},setValue:function(_a){_e=""+_a},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Va(i){i._valueTracker||(i._valueTracker=Ua(i))}function Wa(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var s=o.getValue(),_e="";return i&&(_e=Ta(i)?i.checked?"true":"false":i.value),i=_e,i!==s?(o.setValue(i),!0):!1}function Xa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ya(i,o){var s=o.checked;return A$1({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??i._wrapperState.initialChecked})}function Za(i,o){var s=o.defaultValue==null?"":o.defaultValue,_e=o.checked!=null?o.checked:o.defaultChecked;s=Sa(o.value!=null?o.value:s),i._wrapperState={initialChecked:_e,initialValue:s,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ab(i,o){o=o.checked,o!=null&&ta(i,"checked",o,!1)}function bb(i,o){ab(i,o);var s=Sa(o.value),_e=o.type;if(s!=null)_e==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+s):i.value!==""+s&&(i.value=""+s);else if(_e==="submit"||_e==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?cb(i,o.type,s):o.hasOwnProperty("defaultValue")&&cb(i,o.type,Sa(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function db(i,o,s){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var _e=o.type;if(!(_e!=="submit"&&_e!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,s||o===i.value||(i.value=o),i.defaultValue=o}s=i.name,s!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,s!==""&&(i.name=s)}function cb(i,o,s){(o!=="number"||Xa(i.ownerDocument)!==i)&&(s==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+s&&(i.defaultValue=""+s))}var eb=Array.isArray;function fb(i,o,s,_e){if(i=i.options,o){o={};for(var _n=0;_n<s.length;_n++)o["$"+s[_n]]=!0;for(s=0;s<i.length;s++)_n=o.hasOwnProperty("$"+i[s].value),i[s].selected!==_n&&(i[s].selected=_n),_n&&_e&&(i[s].defaultSelected=!0)}else{for(s=""+Sa(s),o=null,_n=0;_n<i.length;_n++){if(i[_n].value===s){i[_n].selected=!0,_e&&(i[_n].defaultSelected=!0);return}o!==null||i[_n].disabled||(o=i[_n])}o!==null&&(o.selected=!0)}}function gb(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hb(i,o){var s=o.value;if(s==null){if(s=o.children,o=o.defaultValue,s!=null){if(o!=null)throw Error(p$1(92));if(eb(s)){if(1<s.length)throw Error(p$1(93));s=s[0]}o=s}o==null&&(o=""),s=o}i._wrapperState={initialValue:Sa(s)}}function ib(i,o){var s=Sa(o.value),_e=Sa(o.defaultValue);s!=null&&(s=""+s,s!==i.value&&(i.value=s),o.defaultValue==null&&i.defaultValue!==s&&(i.defaultValue=s)),_e!=null&&(i.defaultValue=""+_e)}function jb(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function kb(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?kb(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mb,nb=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,s,_e,_n){MSApp.execUnsafeLocalFunction(function(){return i(o,s,_e,_n)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=mb.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function ob(i,o){if(o){var s=i.firstChild;if(s&&s===i.lastChild&&s.nodeType===3){s.nodeValue=o;return}}i.textContent=o}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(i){qb.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),pb[o]=pb[i]})});function rb(i,o,s){return o==null||typeof o=="boolean"||o===""?"":s||typeof o!="number"||o===0||pb.hasOwnProperty(i)&&pb[i]?(""+o).trim():o+"px"}function sb(i,o){i=i.style;for(var s in o)if(o.hasOwnProperty(s)){var _e=s.indexOf("--")===0,_n=rb(s,o[s],_e);s==="float"&&(s="cssFloat"),_e?i.setProperty(s,_n):i[s]=_n}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(i,o){if(o){if(tb[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(p$1(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(p$1(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(p$1(61))}if(o.style!=null&&typeof o.style!="object")throw Error(p$1(62))}}function vb(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yb=null,zb=null,Ab=null;function Bb(i){if(i=Cb(i)){if(typeof yb!="function")throw Error(p$1(280));var o=i.stateNode;o&&(o=Db(o),yb(i.stateNode,i.type,o))}}function Eb(i){zb?Ab?Ab.push(i):Ab=[i]:zb=i}function Fb(){if(zb){var i=zb,o=Ab;if(Ab=zb=null,Bb(i),o)for(i=0;i<o.length;i++)Bb(o[i])}}function Gb(i,o){return i(o)}function Hb(){}var Ib=!1;function Jb(i,o,s){if(Ib)return i(o,s);Ib=!0;try{return Gb(i,o,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(i,o){var s=i.stateNode;if(s===null)return null;var _e=Db(s);if(_e===null)return null;s=_e[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_e=!_e.disabled)||(i=i.type,_e=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!_e;break t;default:i=!1}if(i)return null;if(s&&typeof s!="function")throw Error(p$1(231,o,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(i,o,s,_e,_n,_o,_a,_u,_h){var ty=Array.prototype.slice.call(arguments,3);try{o.apply(s,ty)}catch(oy){this.onError(oy)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(i){Ob=!0,Pb=i}};function Tb(i,o,s,_e,_n,_o,_a,_u,_h){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(i,o,s,_e,_n,_o,_a,_u,_h){if(Tb.apply(this,arguments),Ob){if(Ob){var ty=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=ty)}}function Vb(i){var o=i,s=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(s=o.return),i=o.return;while(i)}return o.tag===3?s:null}function Wb(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Xb(i){if(Vb(i)!==i)throw Error(p$1(188))}function Yb(i){var o=i.alternate;if(!o){if(o=Vb(i),o===null)throw Error(p$1(188));return o!==i?null:i}for(var s=i,_e=o;;){var _n=s.return;if(_n===null)break;var _o=_n.alternate;if(_o===null){if(_e=_n.return,_e!==null){s=_e;continue}break}if(_n.child===_o.child){for(_o=_n.child;_o;){if(_o===s)return Xb(_n),i;if(_o===_e)return Xb(_n),o;_o=_o.sibling}throw Error(p$1(188))}if(s.return!==_e.return)s=_n,_e=_o;else{for(var _a=!1,_u=_n.child;_u;){if(_u===s){_a=!0,s=_n,_e=_o;break}if(_u===_e){_a=!0,_e=_n,s=_o;break}_u=_u.sibling}if(!_a){for(_u=_o.child;_u;){if(_u===s){_a=!0,s=_o,_e=_n;break}if(_u===_e){_a=!0,_e=_o,s=_n;break}_u=_u.sibling}if(!_a)throw Error(p$1(189))}}if(s.alternate!==_e)throw Error(p$1(190))}if(s.tag!==3)throw Error(p$1(188));return s.stateNode.current===s?i:o}function Zb(i){return i=Yb(i),i!==null?$b(i):null}function $b(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=$b(i);if(o!==null)return o;i=i.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(i){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,i,void 0,(i.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(i){return i>>>=0,i===0?32:31-(pc(i)/qc|0)|0}var rc=64,sc=4194304;function tc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc(i,o){var s=i.pendingLanes;if(s===0)return 0;var _e=0,_n=i.suspendedLanes,_o=i.pingedLanes,_a=s&268435455;if(_a!==0){var _u=_a&~_n;_u!==0?_e=tc(_u):(_o&=_a,_o!==0&&(_e=tc(_o)))}else _a=s&~_n,_a!==0?_e=tc(_a):_o!==0&&(_e=tc(_o));if(_e===0)return 0;if(o!==0&&o!==_e&&!(o&_n)&&(_n=_e&-_e,_o=o&-o,_n>=_o||_n===16&&(_o&4194240)!==0))return o;if(_e&4&&(_e|=s&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=_e;0<o;)s=31-oc(o),_n=1<<s,_e|=i[s],o&=~_n;return _e}function vc(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(i,o){for(var s=i.suspendedLanes,_e=i.pingedLanes,_n=i.expirationTimes,_o=i.pendingLanes;0<_o;){var _a=31-oc(_o),_u=1<<_a,_h=_n[_a];_h===-1?(!(_u&s)||_u&_e)&&(_n[_a]=vc(_u,o)):_h<=o&&(i.expiredLanes|=_u),_o&=~_u}}function xc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function yc(){var i=rc;return rc<<=1,!(rc&4194240)&&(rc=64),i}function zc(i){for(var o=[],s=0;31>s;s++)o.push(i);return o}function Ac(i,o,s){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-oc(o),i[o]=s}function Bc(i,o){var s=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var _e=i.eventTimes;for(i=i.expirationTimes;0<s;){var _n=31-oc(s),_o=1<<_n;o[_n]=0,_e[_n]=-1,i[_n]=-1,s&=~_o}}function Cc(i,o){var s=i.entangledLanes|=o;for(i=i.entanglements;s;){var _e=31-oc(s),_n=1<<_e;_n&o|i[_e]&o&&(i[_e]|=o),s&=~_n}}var C=0;function Dc(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(i,o){switch(i){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(o.pointerId)}}function Tc(i,o,s,_e,_n,_o){return i===null||i.nativeEvent!==_o?(i={blockedOn:o,domEventName:s,eventSystemFlags:_e,nativeEvent:_o,targetContainers:[_n]},o!==null&&(o=Cb(o),o!==null&&Fc(o)),i):(i.eventSystemFlags|=_e,o=i.targetContainers,_n!==null&&o.indexOf(_n)===-1&&o.push(_n),i)}function Uc(i,o,s,_e,_n){switch(o){case"focusin":return Lc=Tc(Lc,i,o,s,_e,_n),!0;case"dragenter":return Mc=Tc(Mc,i,o,s,_e,_n),!0;case"mouseover":return Nc=Tc(Nc,i,o,s,_e,_n),!0;case"pointerover":var _o=_n.pointerId;return Oc.set(_o,Tc(Oc.get(_o)||null,i,o,s,_e,_n)),!0;case"gotpointercapture":return _o=_n.pointerId,Pc.set(_o,Tc(Pc.get(_o)||null,i,o,s,_e,_n)),!0}return!1}function Vc(i){var o=Wc(i.target);if(o!==null){var s=Vb(o);if(s!==null){if(o=s.tag,o===13){if(o=Wb(s),o!==null){i.blockedOn=o,Ic(i.priority,function(){Gc(s)});return}}else if(o===3&&s.stateNode.current.memoizedState.isDehydrated){i.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xc(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var s=Yc(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(s===null){s=i.nativeEvent;var _e=new s.constructor(s.type,s);wb=_e,s.target.dispatchEvent(_e),wb=null}else return o=Cb(s),o!==null&&Fc(o),i.blockedOn=s,!1;o.shift()}return!0}function Zc(i,o,s){Xc(i)&&s.delete(o)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(i,o){i.blockedOn===o&&(i.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(i){function o(_n){return ad(_n,i)}if(0<Kc.length){ad(Kc[0],i);for(var s=1;s<Kc.length;s++){var _e=Kc[s];_e.blockedOn===i&&(_e.blockedOn=null)}}for(Lc!==null&&ad(Lc,i),Mc!==null&&ad(Mc,i),Nc!==null&&ad(Nc,i),Oc.forEach(o),Pc.forEach(o),s=0;s<Qc.length;s++)_e=Qc[s],_e.blockedOn===i&&(_e.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(i,o,s,_e){var _n=C,_o=cd.transition;cd.transition=null;try{C=1,fd(i,o,s,_e)}finally{C=_n,cd.transition=_o}}function gd(i,o,s,_e){var _n=C,_o=cd.transition;cd.transition=null;try{C=4,fd(i,o,s,_e)}finally{C=_n,cd.transition=_o}}function fd(i,o,s,_e){if(dd){var _n=Yc(i,o,s,_e);if(_n===null)hd(i,o,_e,id,s),Sc(i,_e);else if(Uc(_n,i,o,s,_e))_e.stopPropagation();else if(Sc(i,_e),o&4&&-1<Rc.indexOf(i)){for(;_n!==null;){var _o=Cb(_n);if(_o!==null&&Ec(_o),_o=Yc(i,o,s,_e),_o===null&&hd(i,o,_e,id,s),_o===_n)break;_n=_o}_n!==null&&_e.stopPropagation()}else hd(i,o,_e,null,s)}}var id=null;function Yc(i,o,s,_e){if(id=null,i=xb(_e),i=Wc(i),i!==null)if(o=Vb(i),o===null)i=null;else if(s=o.tag,s===13){if(i=Wb(o),i!==null)return i;i=null}else if(s===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return id=i,null}function jd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var i,o=ld,s=o.length,_e,_n="value"in kd?kd.value:kd.textContent,_o=_n.length;for(i=0;i<s&&o[i]===_n[i];i++);var _a=s-i;for(_e=1;_e<=_a&&o[s-_e]===_n[_o-_e];_e++);return md=_n.slice(i,1<_e?1-_e:void 0)}function od(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function pd(){return!0}function qd(){return!1}function rd(i){function o(s,_e,_n,_o,_a){this._reactName=s,this._targetInst=_n,this.type=_e,this.nativeEvent=_o,this.target=_a,this.currentTarget=null;for(var _u in i)i.hasOwnProperty(_u)&&(s=i[_u],this[_u]=s?s(_o):_o[_u]);return this.isDefaultPrevented=(_o.defaultPrevented!=null?_o.defaultPrevented:_o.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),o}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yd&&(yd&&i.type==="mousemove"?(wd=i.screenX-yd.screenX,xd=i.screenY-yd.screenY):xd=wd=0,yd=i),wd)},movementY:function(i){return"movementY"in i?i.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Od[i])?!!o[i]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(i){if(i.key){var o=Md[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=od(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(i){return i.type==="keypress"?od(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?od(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(i,o){switch(i){case"keyup":return $d.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ie=!1;function je(i,o){switch(i){case"compositionend":return he(o);case"keypress":return o.which!==32?null:(fe=!0,ee);case"textInput":return i=o.data,i===ee&&fe?null:i;default:return null}}function ke(i,o){if(ie)return i==="compositionend"||!ae&&ge(i,o)?(i=nd(),md=ld=kd=null,ie=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return de&&o.locale!=="ko"?null:o.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!le[i.type]:o==="textarea"}function ne(i,o,s,_e){Eb(_e),o=oe(o,"onChange"),0<o.length&&(s=new td("onChange","change",null,s,_e),i.push({event:s,listeners:o}))}var pe=null,qe=null;function re(i){se(i,0)}function te(i){var o=ue(i);if(Wa(o))return i}function ve(i,o){if(i==="change")return o}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(i){if(i.propertyName==="value"&&te(qe)){var o=[];ne(o,qe,i,xb(i)),Jb(re,o)}}function Ce(i,o,s){i==="focusin"?(Ae(),pe=o,qe=s,pe.attachEvent("onpropertychange",Be)):i==="focusout"&&Ae()}function De(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return te(qe)}function Ee(i,o){if(i==="click")return te(o)}function Fe(i,o){if(i==="input"||i==="change")return te(o)}function Ge(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(i,o){if(He(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var s=Object.keys(i),_e=Object.keys(o);if(s.length!==_e.length)return!1;for(_e=0;_e<s.length;_e++){var _n=s[_e];if(!ja.call(o,_n)||!He(i[_n],o[_n]))return!1}return!0}function Je(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ke(i,o){var s=Je(i);i=0;for(var _e;s;){if(s.nodeType===3){if(_e=i+s.textContent.length,i<=o&&_e>=o)return{node:s,offset:o-i};i=_e}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=Je(s)}}function Le(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Le(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Me(){for(var i=window,o=Xa();o instanceof i.HTMLIFrameElement;){try{var s=typeof o.contentWindow.location.href=="string"}catch{s=!1}if(s)i=o.contentWindow;else break;o=Xa(i.document)}return o}function Ne(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function Oe(i){var o=Me(),s=i.focusedElem,_e=i.selectionRange;if(o!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(_e!==null&&Ne(s)){if(o=_e.start,i=_e.end,i===void 0&&(i=o),"selectionStart"in s)s.selectionStart=o,s.selectionEnd=Math.min(i,s.value.length);else if(i=(o=s.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var _n=s.textContent.length,_o=Math.min(_e.start,_n);_e=_e.end===void 0?_o:Math.min(_e.end,_n),!i.extend&&_o>_e&&(_n=_e,_e=_o,_o=_n),_n=Ke(s,_o);var _a=Ke(s,_e);_n&&_a&&(i.rangeCount!==1||i.anchorNode!==_n.node||i.anchorOffset!==_n.offset||i.focusNode!==_a.node||i.focusOffset!==_a.offset)&&(o=o.createRange(),o.setStart(_n.node,_n.offset),i.removeAllRanges(),_o>_e?(i.addRange(o),i.extend(_a.node,_a.offset)):(o.setEnd(_a.node,_a.offset),i.addRange(o)))}}for(o=[],i=s;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<o.length;s++)i=o[s],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(i,o,s){var _e=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te||Qe==null||Qe!==Xa(_e)||(_e=Qe,"selectionStart"in _e&&Ne(_e)?_e={start:_e.selectionStart,end:_e.selectionEnd}:(_e=(_e.ownerDocument&&_e.ownerDocument.defaultView||window).getSelection(),_e={anchorNode:_e.anchorNode,anchorOffset:_e.anchorOffset,focusNode:_e.focusNode,focusOffset:_e.focusOffset}),Se&&Ie(Se,_e)||(Se=_e,_e=oe(Re,"onSelect"),0<_e.length&&(o=new td("onSelect","select",null,o,s),i.push({event:o,listeners:_e}),o.target=Qe)))}function Ve(i,o){var s={};return s[i.toLowerCase()]=o.toLowerCase(),s["Webkit"+i]="webkit"+o,s["Moz"+i]="moz"+o,s}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(i){if(Xe[i])return Xe[i];if(!We[i])return i;var o=We[i],s;for(s in o)if(o.hasOwnProperty(s)&&s in Ye)return Xe[i]=o[s];return i}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(i,o){df.set(i,o),fa(o,[i])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(i,o,s){var _e=i.type||"unknown-event";i.currentTarget=s,Ub(_e,o,void 0,i),i.currentTarget=null}function se(i,o){o=(o&4)!==0;for(var s=0;s<i.length;s++){var _e=i[s],_n=_e.event;_e=_e.listeners;t:{var _o=void 0;if(o)for(var _a=_e.length-1;0<=_a;_a--){var _u=_e[_a],_h=_u.instance,ty=_u.currentTarget;if(_u=_u.listener,_h!==_o&&_n.isPropagationStopped())break t;nf(_n,_u,ty),_o=_h}else for(_a=0;_a<_e.length;_a++){if(_u=_e[_a],_h=_u.instance,ty=_u.currentTarget,_u=_u.listener,_h!==_o&&_n.isPropagationStopped())break t;nf(_n,_u,ty),_o=_h}}}if(Qb)throw i=Rb,Qb=!1,Rb=null,i}function D(i,o){var s=o[of];s===void 0&&(s=o[of]=new Set);var _e=i+"__bubble";s.has(_e)||(pf(o,i,2,!1),s.add(_e))}function qf(i,o,s){var _e=0;o&&(_e|=4),pf(s,i,_e,o)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(i){if(!i[rf]){i[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,i),qf(s,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[rf]||(o[rf]=!0,qf("selectionchange",!1,o))}}function pf(i,o,s,_e){switch(jd(o)){case 1:var _n=ed;break;case 4:_n=gd;break;default:_n=fd}s=_n.bind(null,o,s,i),_n=void 0,!Lb||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(_n=!0),_e?_n!==void 0?i.addEventListener(o,s,{capture:!0,passive:_n}):i.addEventListener(o,s,!0):_n!==void 0?i.addEventListener(o,s,{passive:_n}):i.addEventListener(o,s,!1)}function hd(i,o,s,_e,_n){var _o=_e;if(!(o&1)&&!(o&2)&&_e!==null)t:for(;;){if(_e===null)return;var _a=_e.tag;if(_a===3||_a===4){var _u=_e.stateNode.containerInfo;if(_u===_n||_u.nodeType===8&&_u.parentNode===_n)break;if(_a===4)for(_a=_e.return;_a!==null;){var _h=_a.tag;if((_h===3||_h===4)&&(_h=_a.stateNode.containerInfo,_h===_n||_h.nodeType===8&&_h.parentNode===_n))return;_a=_a.return}for(;_u!==null;){if(_a=Wc(_u),_a===null)return;if(_h=_a.tag,_h===5||_h===6){_e=_o=_a;continue t}_u=_u.parentNode}}_e=_e.return}Jb(function(){var ty=_o,oy=xb(s),hy=[];t:{var fy=df.get(i);if(fy!==void 0){var vy=td,xy=i;switch(i){case"keypress":if(od(s)===0)break t;case"keydown":case"keyup":vy=Rd;break;case"focusin":xy="focus",vy=Fd;break;case"focusout":xy="blur",vy=Fd;break;case"beforeblur":case"afterblur":vy=Fd;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vy=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vy=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vy=Vd;break;case $e:case af:case bf:vy=Hd;break;case cf:vy=Xd;break;case"scroll":vy=vd;break;case"wheel":vy=Zd;break;case"copy":case"cut":case"paste":vy=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vy=Td}var wy=(o&4)!==0,By=!wy&&i==="scroll",Sy=wy?fy!==null?fy+"Capture":null:fy;wy=[];for(var Ay=ty,Py;Ay!==null;){Py=Ay;var Iy=Py.stateNode;if(Py.tag===5&&Iy!==null&&(Py=Iy,Sy!==null&&(Iy=Kb(Ay,Sy),Iy!=null&&wy.push(tf(Ay,Iy,Py)))),By)break;Ay=Ay.return}0<wy.length&&(fy=new vy(fy,xy,null,s,oy),hy.push({event:fy,listeners:wy}))}}if(!(o&7)){t:{if(fy=i==="mouseover"||i==="pointerover",vy=i==="mouseout"||i==="pointerout",fy&&s!==wb&&(xy=s.relatedTarget||s.fromElement)&&(Wc(xy)||xy[uf]))break t;if((vy||fy)&&(fy=oy.window===oy?oy:(fy=oy.ownerDocument)?fy.defaultView||fy.parentWindow:window,vy?(xy=s.relatedTarget||s.toElement,vy=ty,xy=xy?Wc(xy):null,xy!==null&&(By=Vb(xy),xy!==By||xy.tag!==5&&xy.tag!==6)&&(xy=null)):(vy=null,xy=ty),vy!==xy)){if(wy=Bd,Iy="onMouseLeave",Sy="onMouseEnter",Ay="mouse",(i==="pointerout"||i==="pointerover")&&(wy=Td,Iy="onPointerLeave",Sy="onPointerEnter",Ay="pointer"),By=vy==null?fy:ue(vy),Py=xy==null?fy:ue(xy),fy=new wy(Iy,Ay+"leave",vy,s,oy),fy.target=By,fy.relatedTarget=Py,Iy=null,Wc(oy)===ty&&(wy=new wy(Sy,Ay+"enter",xy,s,oy),wy.target=Py,wy.relatedTarget=By,Iy=wy),By=Iy,vy&&xy)e:{for(wy=vy,Sy=xy,Ay=0,Py=wy;Py;Py=vf(Py))Ay++;for(Py=0,Iy=Sy;Iy;Iy=vf(Iy))Py++;for(;0<Ay-Py;)wy=vf(wy),Ay--;for(;0<Py-Ay;)Sy=vf(Sy),Py--;for(;Ay--;){if(wy===Sy||Sy!==null&&wy===Sy.alternate)break e;wy=vf(wy),Sy=vf(Sy)}wy=null}else wy=null;vy!==null&&wf(hy,fy,vy,wy,!1),xy!==null&&By!==null&&wf(hy,By,xy,wy,!0)}}t:{if(fy=ty?ue(ty):window,vy=fy.nodeName&&fy.nodeName.toLowerCase(),vy==="select"||vy==="input"&&fy.type==="file")var $y=ve;else if(me(fy))if(we)$y=Fe;else{$y=De;var Ky=Ce}else(vy=fy.nodeName)&&vy.toLowerCase()==="input"&&(fy.type==="checkbox"||fy.type==="radio")&&($y=Ee);if($y&&($y=$y(i,ty))){ne(hy,$y,s,oy);break t}Ky&&Ky(i,fy,ty),i==="focusout"&&(Ky=fy._wrapperState)&&Ky.controlled&&fy.type==="number"&&cb(fy,"number",fy.value)}switch(Ky=ty?ue(ty):window,i){case"focusin":(me(Ky)||Ky.contentEditable==="true")&&(Qe=Ky,Re=ty,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(hy,s,oy);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(hy,s,oy)}var Jy;if(ae)t:{switch(i){case"compositionstart":var i0="onCompositionStart";break t;case"compositionend":i0="onCompositionEnd";break t;case"compositionupdate":i0="onCompositionUpdate";break t}i0=void 0}else ie?ge(i,s)&&(i0="onCompositionEnd"):i==="keydown"&&s.keyCode===229&&(i0="onCompositionStart");i0&&(de&&s.locale!=="ko"&&(ie||i0!=="onCompositionStart"?i0==="onCompositionEnd"&&ie&&(Jy=nd()):(kd=oy,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Ky=oe(ty,i0),0<Ky.length&&(i0=new Ld(i0,i,null,s,oy),hy.push({event:i0,listeners:Ky}),Jy?i0.data=Jy:(Jy=he(s),Jy!==null&&(i0.data=Jy)))),(Jy=ce?je(i,s):ke(i,s))&&(ty=oe(ty,"onBeforeInput"),0<ty.length&&(oy=new Ld("onBeforeInput","beforeinput",null,s,oy),hy.push({event:oy,listeners:ty}),oy.data=Jy))}se(hy,o)})}function tf(i,o,s){return{instance:i,listener:o,currentTarget:s}}function oe(i,o){for(var s=o+"Capture",_e=[];i!==null;){var _n=i,_o=_n.stateNode;_n.tag===5&&_o!==null&&(_n=_o,_o=Kb(i,s),_o!=null&&_e.unshift(tf(i,_o,_n)),_o=Kb(i,o),_o!=null&&_e.push(tf(i,_o,_n))),i=i.return}return _e}function vf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wf(i,o,s,_e,_n){for(var _o=o._reactName,_a=[];s!==null&&s!==_e;){var _u=s,_h=_u.alternate,ty=_u.stateNode;if(_h!==null&&_h===_e)break;_u.tag===5&&ty!==null&&(_u=ty,_n?(_h=Kb(s,_o),_h!=null&&_a.unshift(tf(s,_h,_u))):_n||(_h=Kb(s,_o),_h!=null&&_a.push(tf(s,_h,_u)))),s=s.return}_a.length!==0&&i.push({event:o,listeners:_a})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(i){return(typeof i=="string"?i:""+i).replace(xf,`
`).replace(yf,"")}function Af(i,o,s){if(o=zf(o),zf(i)!==o&&s)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(i){return Hf.resolve(null).then(i).catch(If)}:Ff;function If(i){setTimeout(function(){throw i})}function Kf(i,o){var s=o,_e=0;do{var _n=s.nextSibling;if(i.removeChild(s),_n&&_n.nodeType===8)if(s=_n.data,s==="/$"){if(_e===0){i.removeChild(_n),bd(o);return}_e--}else s!=="$"&&s!=="$?"&&s!=="$!"||_e++;s=_n}while(s);bd(o)}function Lf(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Mf(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var s=i.data;if(s==="$"||s==="$!"||s==="$?"){if(o===0)return i;o--}else s==="/$"&&o++}i=i.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(i){var o=i[Of];if(o)return o;for(var s=i.parentNode;s;){if(o=s[uf]||s[Of]){if(s=o.alternate,o.child!==null||s!==null&&s.child!==null)for(i=Mf(i);i!==null;){if(s=i[Of])return s;i=Mf(i)}return o}i=s,s=i.parentNode}return null}function Cb(i){return i=i[Of]||i[uf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ue(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p$1(33))}function Db(i){return i[Pf]||null}var Sf=[],Tf=-1;function Uf(i){return{current:i}}function E(i){0>Tf||(i.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(i,o){Tf++,Sf[Tf]=i.current,i.current=o}var Vf={},H$2=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(i,o){var s=i.type.contextTypes;if(!s)return Vf;var _e=i.stateNode;if(_e&&_e.__reactInternalMemoizedUnmaskedChildContext===o)return _e.__reactInternalMemoizedMaskedChildContext;var _n={},_o;for(_o in s)_n[_o]=o[_o];return _e&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=_n),_n}function Zf(i){return i=i.childContextTypes,i!=null}function $f(){E(Wf),E(H$2)}function ag(i,o,s){if(H$2.current!==Vf)throw Error(p$1(168));G(H$2,o),G(Wf,s)}function bg(i,o,s){var _e=i.stateNode;if(o=o.childContextTypes,typeof _e.getChildContext!="function")return s;_e=_e.getChildContext();for(var _n in _e)if(!(_n in o))throw Error(p$1(108,Ra(i)||"Unknown",_n));return A$1({},s,_e)}function cg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$2.current,G(H$2,i),G(Wf,Wf.current),!0}function dg(i,o,s){var _e=i.stateNode;if(!_e)throw Error(p$1(169));s?(i=bg(i,o,Xf),_e.__reactInternalMemoizedMergedChildContext=i,E(Wf),E(H$2),G(H$2,i)):E(Wf),G(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(i){eg===null?eg=[i]:eg.push(i)}function ig(i){fg=!0,hg(i)}function jg(){if(!gg&&eg!==null){gg=!0;var i=0,o=C;try{var s=eg;for(C=1;i<s.length;i++){var _e=s[i];do _e=_e(!0);while(_e!==null)}eg=null,fg=!1}catch(_n){throw eg!==null&&(eg=eg.slice(i+1)),ac(fc,jg),_n}finally{C=o,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(i,o){kg[lg++]=ng,kg[lg++]=mg,mg=i,ng=o}function ug(i,o,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=i;var _e=rg;i=sg;var _n=32-oc(_e)-1;_e&=~(1<<_n),s+=1;var _o=32-oc(o)+_n;if(30<_o){var _a=_n-_n%5;_o=(_e&(1<<_a)-1).toString(32),_e>>=_a,_n-=_a,rg=1<<32-oc(o)+_n|s<<_n|_e,sg=_o+i}else rg=1<<_o|s<<_n|_e,sg=i}function vg(i){i.return!==null&&(tg(i,1),ug(i,1,0))}function wg(i){for(;i===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;i===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(i,o){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=o,s.return=i,o=i.deletions,o===null?(i.deletions=[s],i.flags|=16):o.push(s)}function Cg(i,o){switch(i.tag){case 5:var s=i.type;return o=o.nodeType!==1||s.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,xg=i,yg=Lf(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,xg=i,yg=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(s=qg!==null?{id:rg,overflow:sg}:null,i.memoizedState={dehydrated:o,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=o,s.return=i,i.child=s,xg=i,yg=null,!0):!1;default:return!1}}function Dg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Eg(i){if(I){var o=yg;if(o){var s=o;if(!Cg(i,o)){if(Dg(i))throw Error(p$1(418));o=Lf(s.nextSibling);var _e=xg;o&&Cg(i,o)?Ag(_e,s):(i.flags=i.flags&-4097|2,I=!1,xg=i)}}else{if(Dg(i))throw Error(p$1(418));i.flags=i.flags&-4097|2,I=!1,xg=i}}}function Fg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xg=i}function Gg(i){if(i!==xg)return!1;if(!I)return Fg(i),I=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Ef(i.type,i.memoizedProps)),o&&(o=yg)){if(Dg(i))throw Hg(),Error(p$1(418));for(;o;)Ag(i,o),o=Lf(o.nextSibling)}if(Fg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p$1(317));t:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var s=i.data;if(s==="/$"){if(o===0){yg=Lf(i.nextSibling);break t}o--}else s!=="$"&&s!=="$!"&&s!=="$?"||o++}i=i.nextSibling}yg=null}}else yg=xg?Lf(i.stateNode.nextSibling):null;return!0}function Hg(){for(var i=yg;i;)i=Lf(i.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(i){zg===null?zg=[i]:zg.push(i)}var Kg=ua.ReactCurrentBatchConfig;function Lg(i,o){if(i&&i.defaultProps){o=A$1({},o),i=i.defaultProps;for(var s in i)o[s]===void 0&&(o[s]=i[s]);return o}return o}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(i){var o=Mg.current;E(Mg),i._currentValue=o}function Sg(i,o,s){for(;i!==null;){var _e=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,_e!==null&&(_e.childLanes|=o)):_e!==null&&(_e.childLanes&o)!==o&&(_e.childLanes|=o),i===s)break;i=i.return}}function Tg(i,o){Ng=i,Pg=Og=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(Ug=!0),i.firstContext=null)}function Vg(i){var o=i._currentValue;if(Pg!==i)if(i={context:i,memoizedValue:o,next:null},Og===null){if(Ng===null)throw Error(p$1(308));Og=i,Ng.dependencies={lanes:0,firstContext:i}}else Og=Og.next=i;return o}var Wg=null;function Xg(i){Wg===null?Wg=[i]:Wg.push(i)}function Yg(i,o,s,_e){var _n=o.interleaved;return _n===null?(s.next=s,Xg(o)):(s.next=_n.next,_n.next=s),o.interleaved=s,Zg(i,_e)}function Zg(i,o){i.lanes|=o;var s=i.alternate;for(s!==null&&(s.lanes|=o),s=i,i=i.return;i!==null;)i.childLanes|=o,s=i.alternate,s!==null&&(s.childLanes|=o),s=i,i=i.return;return s.tag===3?s.stateNode:null}var $g=!1;function ah(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ch(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function dh(i,o,s){var _e=i.updateQueue;if(_e===null)return null;if(_e=_e.shared,K&2){var _n=_e.pending;return _n===null?o.next=o:(o.next=_n.next,_n.next=o),_e.pending=o,Zg(i,s)}return _n=_e.interleaved,_n===null?(o.next=o,Xg(_e)):(o.next=_n.next,_n.next=o),_e.interleaved=o,Zg(i,s)}function eh(i,o,s){if(o=o.updateQueue,o!==null&&(o=o.shared,(s&4194240)!==0)){var _e=o.lanes;_e&=i.pendingLanes,s|=_e,o.lanes=s,Cc(i,s)}}function fh(i,o){var s=i.updateQueue,_e=i.alternate;if(_e!==null&&(_e=_e.updateQueue,s===_e)){var _n=null,_o=null;if(s=s.firstBaseUpdate,s!==null){do{var _a={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};_o===null?_n=_o=_a:_o=_o.next=_a,s=s.next}while(s!==null);_o===null?_n=_o=o:_o=_o.next=o}else _n=_o=o;s={baseState:_e.baseState,firstBaseUpdate:_n,lastBaseUpdate:_o,shared:_e.shared,effects:_e.effects},i.updateQueue=s;return}i=s.lastBaseUpdate,i===null?s.firstBaseUpdate=o:i.next=o,s.lastBaseUpdate=o}function gh(i,o,s,_e){var _n=i.updateQueue;$g=!1;var _o=_n.firstBaseUpdate,_a=_n.lastBaseUpdate,_u=_n.shared.pending;if(_u!==null){_n.shared.pending=null;var _h=_u,ty=_h.next;_h.next=null,_a===null?_o=ty:_a.next=ty,_a=_h;var oy=i.alternate;oy!==null&&(oy=oy.updateQueue,_u=oy.lastBaseUpdate,_u!==_a&&(_u===null?oy.firstBaseUpdate=ty:_u.next=ty,oy.lastBaseUpdate=_h))}if(_o!==null){var hy=_n.baseState;_a=0,oy=ty=_h=null,_u=_o;do{var fy=_u.lane,vy=_u.eventTime;if((_e&fy)===fy){oy!==null&&(oy=oy.next={eventTime:vy,lane:0,tag:_u.tag,payload:_u.payload,callback:_u.callback,next:null});t:{var xy=i,wy=_u;switch(fy=o,vy=s,wy.tag){case 1:if(xy=wy.payload,typeof xy=="function"){hy=xy.call(vy,hy,fy);break t}hy=xy;break t;case 3:xy.flags=xy.flags&-65537|128;case 0:if(xy=wy.payload,fy=typeof xy=="function"?xy.call(vy,hy,fy):xy,fy==null)break t;hy=A$1({},hy,fy);break t;case 2:$g=!0}}_u.callback!==null&&_u.lane!==0&&(i.flags|=64,fy=_n.effects,fy===null?_n.effects=[_u]:fy.push(_u))}else vy={eventTime:vy,lane:fy,tag:_u.tag,payload:_u.payload,callback:_u.callback,next:null},oy===null?(ty=oy=vy,_h=hy):oy=oy.next=vy,_a|=fy;if(_u=_u.next,_u===null){if(_u=_n.shared.pending,_u===null)break;fy=_u,_u=fy.next,fy.next=null,_n.lastBaseUpdate=fy,_n.shared.pending=null}}while(!0);if(oy===null&&(_h=hy),_n.baseState=_h,_n.firstBaseUpdate=ty,_n.lastBaseUpdate=oy,o=_n.shared.interleaved,o!==null){_n=o;do _a|=_n.lane,_n=_n.next;while(_n!==o)}else _o===null&&(_n.shared.lanes=0);hh|=_a,i.lanes=_a,i.memoizedState=hy}}function ih(i,o,s){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var _e=i[o],_n=_e.callback;if(_n!==null){if(_e.callback=null,_e=s,typeof _n!="function")throw Error(p$1(191,_n));_n.call(_e)}}}var jh=new aa.Component().refs;function kh(i,o,s,_e){o=i.memoizedState,s=s(_e,o),s=s==null?o:A$1({},o,s),i.memoizedState=s,i.lanes===0&&(i.updateQueue.baseState=s)}var nh={isMounted:function(i){return(i=i._reactInternals)?Vb(i)===i:!1},enqueueSetState:function(i,o,s){i=i._reactInternals;var _e=L(),_n=lh(i),_o=ch(_e,_n);_o.payload=o,s!=null&&(_o.callback=s),o=dh(i,_o,_n),o!==null&&(mh(o,i,_n,_e),eh(o,i,_n))},enqueueReplaceState:function(i,o,s){i=i._reactInternals;var _e=L(),_n=lh(i),_o=ch(_e,_n);_o.tag=1,_o.payload=o,s!=null&&(_o.callback=s),o=dh(i,_o,_n),o!==null&&(mh(o,i,_n,_e),eh(o,i,_n))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var s=L(),_e=lh(i),_n=ch(s,_e);_n.tag=2,o!=null&&(_n.callback=o),o=dh(i,_n,_e),o!==null&&(mh(o,i,_e,s),eh(o,i,_e))}};function oh(i,o,s,_e,_n,_o,_a){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(_e,_o,_a):o.prototype&&o.prototype.isPureReactComponent?!Ie(s,_e)||!Ie(_n,_o):!0}function ph(i,o,s){var _e=!1,_n=Vf,_o=o.contextType;return typeof _o=="object"&&_o!==null?_o=Vg(_o):(_n=Zf(o)?Xf:H$2.current,_e=o.contextTypes,_o=(_e=_e!=null)?Yf(i,_n):Vf),o=new o(s,_o),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=nh,i.stateNode=o,o._reactInternals=i,_e&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=_n,i.__reactInternalMemoizedMaskedChildContext=_o),o}function qh(i,o,s,_e){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(s,_e),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(s,_e),o.state!==i&&nh.enqueueReplaceState(o,o.state,null)}function rh(i,o,s,_e){var _n=i.stateNode;_n.props=s,_n.state=i.memoizedState,_n.refs=jh,ah(i);var _o=o.contextType;typeof _o=="object"&&_o!==null?_n.context=Vg(_o):(_o=Zf(o)?Xf:H$2.current,_n.context=Yf(i,_o)),_n.state=i.memoizedState,_o=o.getDerivedStateFromProps,typeof _o=="function"&&(kh(i,o,_o,s),_n.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof _n.getSnapshotBeforeUpdate=="function"||typeof _n.UNSAFE_componentWillMount!="function"&&typeof _n.componentWillMount!="function"||(o=_n.state,typeof _n.componentWillMount=="function"&&_n.componentWillMount(),typeof _n.UNSAFE_componentWillMount=="function"&&_n.UNSAFE_componentWillMount(),o!==_n.state&&nh.enqueueReplaceState(_n,_n.state,null),gh(i,s,_n,_e),_n.state=i.memoizedState),typeof _n.componentDidMount=="function"&&(i.flags|=4194308)}function sh(i,o,s){if(i=s.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p$1(309));var _e=s.stateNode}if(!_e)throw Error(p$1(147,i));var _n=_e,_o=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_o?o.ref:(o=function(_a){var _u=_n.refs;_u===jh&&(_u=_n.refs={}),_a===null?delete _u[_o]:_u[_o]=_a},o._stringRef=_o,o)}if(typeof i!="string")throw Error(p$1(284));if(!s._owner)throw Error(p$1(290,i))}return i}function th(i,o){throw i=Object.prototype.toString.call(o),Error(p$1(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function uh(i){var o=i._init;return o(i._payload)}function vh(i){function o(Sy,Ay){if(i){var Py=Sy.deletions;Py===null?(Sy.deletions=[Ay],Sy.flags|=16):Py.push(Ay)}}function s(Sy,Ay){if(!i)return null;for(;Ay!==null;)o(Sy,Ay),Ay=Ay.sibling;return null}function _e(Sy,Ay){for(Sy=new Map;Ay!==null;)Ay.key!==null?Sy.set(Ay.key,Ay):Sy.set(Ay.index,Ay),Ay=Ay.sibling;return Sy}function _n(Sy,Ay){return Sy=wh(Sy,Ay),Sy.index=0,Sy.sibling=null,Sy}function _o(Sy,Ay,Py){return Sy.index=Py,i?(Py=Sy.alternate,Py!==null?(Py=Py.index,Py<Ay?(Sy.flags|=2,Ay):Py):(Sy.flags|=2,Ay)):(Sy.flags|=1048576,Ay)}function _a(Sy){return i&&Sy.alternate===null&&(Sy.flags|=2),Sy}function _u(Sy,Ay,Py,Iy){return Ay===null||Ay.tag!==6?(Ay=xh(Py,Sy.mode,Iy),Ay.return=Sy,Ay):(Ay=_n(Ay,Py),Ay.return=Sy,Ay)}function _h(Sy,Ay,Py,Iy){var $y=Py.type;return $y===ya?oy(Sy,Ay,Py.props.children,Iy,Py.key):Ay!==null&&(Ay.elementType===$y||typeof $y=="object"&&$y!==null&&$y.$$typeof===Ha&&uh($y)===Ay.type)?(Iy=_n(Ay,Py.props),Iy.ref=sh(Sy,Ay,Py),Iy.return=Sy,Iy):(Iy=yh(Py.type,Py.key,Py.props,null,Sy.mode,Iy),Iy.ref=sh(Sy,Ay,Py),Iy.return=Sy,Iy)}function ty(Sy,Ay,Py,Iy){return Ay===null||Ay.tag!==4||Ay.stateNode.containerInfo!==Py.containerInfo||Ay.stateNode.implementation!==Py.implementation?(Ay=zh(Py,Sy.mode,Iy),Ay.return=Sy,Ay):(Ay=_n(Ay,Py.children||[]),Ay.return=Sy,Ay)}function oy(Sy,Ay,Py,Iy,$y){return Ay===null||Ay.tag!==7?(Ay=Ah(Py,Sy.mode,Iy,$y),Ay.return=Sy,Ay):(Ay=_n(Ay,Py),Ay.return=Sy,Ay)}function hy(Sy,Ay,Py){if(typeof Ay=="string"&&Ay!==""||typeof Ay=="number")return Ay=xh(""+Ay,Sy.mode,Py),Ay.return=Sy,Ay;if(typeof Ay=="object"&&Ay!==null){switch(Ay.$$typeof){case va:return Py=yh(Ay.type,Ay.key,Ay.props,null,Sy.mode,Py),Py.ref=sh(Sy,null,Ay),Py.return=Sy,Py;case wa:return Ay=zh(Ay,Sy.mode,Py),Ay.return=Sy,Ay;case Ha:var Iy=Ay._init;return hy(Sy,Iy(Ay._payload),Py)}if(eb(Ay)||Ka(Ay))return Ay=Ah(Ay,Sy.mode,Py,null),Ay.return=Sy,Ay;th(Sy,Ay)}return null}function fy(Sy,Ay,Py,Iy){var $y=Ay!==null?Ay.key:null;if(typeof Py=="string"&&Py!==""||typeof Py=="number")return $y!==null?null:_u(Sy,Ay,""+Py,Iy);if(typeof Py=="object"&&Py!==null){switch(Py.$$typeof){case va:return Py.key===$y?_h(Sy,Ay,Py,Iy):null;case wa:return Py.key===$y?ty(Sy,Ay,Py,Iy):null;case Ha:return $y=Py._init,fy(Sy,Ay,$y(Py._payload),Iy)}if(eb(Py)||Ka(Py))return $y!==null?null:oy(Sy,Ay,Py,Iy,null);th(Sy,Py)}return null}function vy(Sy,Ay,Py,Iy,$y){if(typeof Iy=="string"&&Iy!==""||typeof Iy=="number")return Sy=Sy.get(Py)||null,_u(Ay,Sy,""+Iy,$y);if(typeof Iy=="object"&&Iy!==null){switch(Iy.$$typeof){case va:return Sy=Sy.get(Iy.key===null?Py:Iy.key)||null,_h(Ay,Sy,Iy,$y);case wa:return Sy=Sy.get(Iy.key===null?Py:Iy.key)||null,ty(Ay,Sy,Iy,$y);case Ha:var Ky=Iy._init;return vy(Sy,Ay,Py,Ky(Iy._payload),$y)}if(eb(Iy)||Ka(Iy))return Sy=Sy.get(Py)||null,oy(Ay,Sy,Iy,$y,null);th(Ay,Iy)}return null}function xy(Sy,Ay,Py,Iy){for(var $y=null,Ky=null,Jy=Ay,i0=Ay=0,k0=null;Jy!==null&&i0<Py.length;i0++){Jy.index>i0?(k0=Jy,Jy=null):k0=Jy.sibling;var g0=fy(Sy,Jy,Py[i0],Iy);if(g0===null){Jy===null&&(Jy=k0);break}i&&Jy&&g0.alternate===null&&o(Sy,Jy),Ay=_o(g0,Ay,i0),Ky===null?$y=g0:Ky.sibling=g0,Ky=g0,Jy=k0}if(i0===Py.length)return s(Sy,Jy),I&&tg(Sy,i0),$y;if(Jy===null){for(;i0<Py.length;i0++)Jy=hy(Sy,Py[i0],Iy),Jy!==null&&(Ay=_o(Jy,Ay,i0),Ky===null?$y=Jy:Ky.sibling=Jy,Ky=Jy);return I&&tg(Sy,i0),$y}for(Jy=_e(Sy,Jy);i0<Py.length;i0++)k0=vy(Jy,Sy,i0,Py[i0],Iy),k0!==null&&(i&&k0.alternate!==null&&Jy.delete(k0.key===null?i0:k0.key),Ay=_o(k0,Ay,i0),Ky===null?$y=k0:Ky.sibling=k0,Ky=k0);return i&&Jy.forEach(function(j0){return o(Sy,j0)}),I&&tg(Sy,i0),$y}function wy(Sy,Ay,Py,Iy){var $y=Ka(Py);if(typeof $y!="function")throw Error(p$1(150));if(Py=$y.call(Py),Py==null)throw Error(p$1(151));for(var Ky=$y=null,Jy=Ay,i0=Ay=0,k0=null,g0=Py.next();Jy!==null&&!g0.done;i0++,g0=Py.next()){Jy.index>i0?(k0=Jy,Jy=null):k0=Jy.sibling;var j0=fy(Sy,Jy,g0.value,Iy);if(j0===null){Jy===null&&(Jy=k0);break}i&&Jy&&j0.alternate===null&&o(Sy,Jy),Ay=_o(j0,Ay,i0),Ky===null?$y=j0:Ky.sibling=j0,Ky=j0,Jy=k0}if(g0.done)return s(Sy,Jy),I&&tg(Sy,i0),$y;if(Jy===null){for(;!g0.done;i0++,g0=Py.next())g0=hy(Sy,g0.value,Iy),g0!==null&&(Ay=_o(g0,Ay,i0),Ky===null?$y=g0:Ky.sibling=g0,Ky=g0);return I&&tg(Sy,i0),$y}for(Jy=_e(Sy,Jy);!g0.done;i0++,g0=Py.next())g0=vy(Jy,Sy,i0,g0.value,Iy),g0!==null&&(i&&g0.alternate!==null&&Jy.delete(g0.key===null?i0:g0.key),Ay=_o(g0,Ay,i0),Ky===null?$y=g0:Ky.sibling=g0,Ky=g0);return i&&Jy.forEach(function(V0){return o(Sy,V0)}),I&&tg(Sy,i0),$y}function By(Sy,Ay,Py,Iy){if(typeof Py=="object"&&Py!==null&&Py.type===ya&&Py.key===null&&(Py=Py.props.children),typeof Py=="object"&&Py!==null){switch(Py.$$typeof){case va:t:{for(var $y=Py.key,Ky=Ay;Ky!==null;){if(Ky.key===$y){if($y=Py.type,$y===ya){if(Ky.tag===7){s(Sy,Ky.sibling),Ay=_n(Ky,Py.props.children),Ay.return=Sy,Sy=Ay;break t}}else if(Ky.elementType===$y||typeof $y=="object"&&$y!==null&&$y.$$typeof===Ha&&uh($y)===Ky.type){s(Sy,Ky.sibling),Ay=_n(Ky,Py.props),Ay.ref=sh(Sy,Ky,Py),Ay.return=Sy,Sy=Ay;break t}s(Sy,Ky);break}else o(Sy,Ky);Ky=Ky.sibling}Py.type===ya?(Ay=Ah(Py.props.children,Sy.mode,Iy,Py.key),Ay.return=Sy,Sy=Ay):(Iy=yh(Py.type,Py.key,Py.props,null,Sy.mode,Iy),Iy.ref=sh(Sy,Ay,Py),Iy.return=Sy,Sy=Iy)}return _a(Sy);case wa:t:{for(Ky=Py.key;Ay!==null;){if(Ay.key===Ky)if(Ay.tag===4&&Ay.stateNode.containerInfo===Py.containerInfo&&Ay.stateNode.implementation===Py.implementation){s(Sy,Ay.sibling),Ay=_n(Ay,Py.children||[]),Ay.return=Sy,Sy=Ay;break t}else{s(Sy,Ay);break}else o(Sy,Ay);Ay=Ay.sibling}Ay=zh(Py,Sy.mode,Iy),Ay.return=Sy,Sy=Ay}return _a(Sy);case Ha:return Ky=Py._init,By(Sy,Ay,Ky(Py._payload),Iy)}if(eb(Py))return xy(Sy,Ay,Py,Iy);if(Ka(Py))return wy(Sy,Ay,Py,Iy);th(Sy,Py)}return typeof Py=="string"&&Py!==""||typeof Py=="number"?(Py=""+Py,Ay!==null&&Ay.tag===6?(s(Sy,Ay.sibling),Ay=_n(Ay,Py),Ay.return=Sy,Sy=Ay):(s(Sy,Ay),Ay=xh(Py,Sy.mode,Iy),Ay.return=Sy,Sy=Ay),_a(Sy)):s(Sy,Ay)}return By}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(i){if(i===Dh)throw Error(p$1(174));return i}function Ih(i,o){switch(G(Gh,o),G(Fh,i),G(Eh,Dh),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:lb(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=lb(o,i)}E(Eh),G(Eh,o)}function Jh(){E(Eh),E(Fh),E(Gh)}function Kh(i){Hh(Gh.current);var o=Hh(Eh.current),s=lb(o,i.type);o!==s&&(G(Fh,i),G(Eh,s))}function Lh(i){Fh.current===i&&(E(Eh),E(Fh))}var M=Uf(0);function Mh(i){for(var o=i;o!==null;){if(o.tag===13){var s=o.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Nh=[];function Oh(){for(var i=0;i<Nh.length;i++)Nh[i]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p$1(321))}function Wh(i,o){if(o===null)return!1;for(var s=0;s<o.length&&s<i.length;s++)if(!He(i[s],o[s]))return!1;return!0}function Xh(i,o,s,_e,_n,_o){if(Rh=_o,N=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ph.current=i===null||i.memoizedState===null?Yh:Zh,i=s(_e,_n),Th){_o=0;do{if(Th=!1,Uh=0,25<=_o)throw Error(p$1(301));_o+=1,P=O=null,o.updateQueue=null,Ph.current=$h,i=s(_e,_n)}while(Th)}if(Ph.current=ai,o=O!==null&&O.next!==null,Rh=0,P=O=N=null,Sh=!1,o)throw Error(p$1(300));return i}function bi(){var i=Uh!==0;return Uh=0,i}function ci(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N.memoizedState=P=i:P=P.next=i,P}function di(){if(O===null){var i=N.alternate;i=i!==null?i.memoizedState:null}else i=O.next;var o=P===null?N.memoizedState:P.next;if(o!==null)P=o,O=i;else{if(i===null)throw Error(p$1(310));O=i,i={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P===null?N.memoizedState=P=i:P=P.next=i}return P}function ei(i,o){return typeof o=="function"?o(i):o}function fi(i){var o=di(),s=o.queue;if(s===null)throw Error(p$1(311));s.lastRenderedReducer=i;var _e=O,_n=_e.baseQueue,_o=s.pending;if(_o!==null){if(_n!==null){var _a=_n.next;_n.next=_o.next,_o.next=_a}_e.baseQueue=_n=_o,s.pending=null}if(_n!==null){_o=_n.next,_e=_e.baseState;var _u=_a=null,_h=null,ty=_o;do{var oy=ty.lane;if((Rh&oy)===oy)_h!==null&&(_h=_h.next={lane:0,action:ty.action,hasEagerState:ty.hasEagerState,eagerState:ty.eagerState,next:null}),_e=ty.hasEagerState?ty.eagerState:i(_e,ty.action);else{var hy={lane:oy,action:ty.action,hasEagerState:ty.hasEagerState,eagerState:ty.eagerState,next:null};_h===null?(_u=_h=hy,_a=_e):_h=_h.next=hy,N.lanes|=oy,hh|=oy}ty=ty.next}while(ty!==null&&ty!==_o);_h===null?_a=_e:_h.next=_u,He(_e,o.memoizedState)||(Ug=!0),o.memoizedState=_e,o.baseState=_a,o.baseQueue=_h,s.lastRenderedState=_e}if(i=s.interleaved,i!==null){_n=i;do _o=_n.lane,N.lanes|=_o,hh|=_o,_n=_n.next;while(_n!==i)}else _n===null&&(s.lanes=0);return[o.memoizedState,s.dispatch]}function gi(i){var o=di(),s=o.queue;if(s===null)throw Error(p$1(311));s.lastRenderedReducer=i;var _e=s.dispatch,_n=s.pending,_o=o.memoizedState;if(_n!==null){s.pending=null;var _a=_n=_n.next;do _o=i(_o,_a.action),_a=_a.next;while(_a!==_n);He(_o,o.memoizedState)||(Ug=!0),o.memoizedState=_o,o.baseQueue===null&&(o.baseState=_o),s.lastRenderedState=_o}return[_o,_e]}function hi(){}function ii(i,o){var s=N,_e=di(),_n=o(),_o=!He(_e.memoizedState,_n);if(_o&&(_e.memoizedState=_n,Ug=!0),_e=_e.queue,ji(ki.bind(null,s,_e,i),[i]),_e.getSnapshot!==o||_o||P!==null&&P.memoizedState.tag&1){if(s.flags|=2048,li(9,mi.bind(null,s,_e,_n,o),void 0,null),R===null)throw Error(p$1(349));Rh&30||ni(s,o,_n)}return _n}function ni(i,o,s){i.flags|=16384,i={getSnapshot:o,value:s},o=N.updateQueue,o===null?(o={lastEffect:null,stores:null},N.updateQueue=o,o.stores=[i]):(s=o.stores,s===null?o.stores=[i]:s.push(i))}function mi(i,o,s,_e){o.value=s,o.getSnapshot=_e,oi(o)&&pi(i)}function ki(i,o,s){return s(function(){oi(o)&&pi(i)})}function oi(i){var o=i.getSnapshot;i=i.value;try{var s=o();return!He(i,s)}catch{return!0}}function pi(i){var o=Zg(i,1);o!==null&&mh(o,i,1,-1)}function qi(i){var o=ci();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:i},o.queue=i,i=i.dispatch=ri.bind(null,N,i),[o.memoizedState,i]}function li(i,o,s,_e){return i={tag:i,create:o,destroy:s,deps:_e,next:null},o=N.updateQueue,o===null?(o={lastEffect:null,stores:null},N.updateQueue=o,o.lastEffect=i.next=i):(s=o.lastEffect,s===null?o.lastEffect=i.next=i:(_e=s.next,s.next=i,i.next=_e,o.lastEffect=i)),i}function si(){return di().memoizedState}function ti(i,o,s,_e){var _n=ci();N.flags|=i,_n.memoizedState=li(1|o,s,void 0,_e===void 0?null:_e)}function ui(i,o,s,_e){var _n=di();_e=_e===void 0?null:_e;var _o=void 0;if(O!==null){var _a=O.memoizedState;if(_o=_a.destroy,_e!==null&&Wh(_e,_a.deps)){_n.memoizedState=li(o,s,_o,_e);return}}N.flags|=i,_n.memoizedState=li(1|o,s,_o,_e)}function vi(i,o){return ti(8390656,8,i,o)}function ji(i,o){return ui(2048,8,i,o)}function wi(i,o){return ui(4,2,i,o)}function xi(i,o){return ui(4,4,i,o)}function yi(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function zi(i,o,s){return s=s!=null?s.concat([i]):null,ui(4,4,yi.bind(null,o,i),s)}function Ai(){}function Bi(i,o){var s=di();o=o===void 0?null:o;var _e=s.memoizedState;return _e!==null&&o!==null&&Wh(o,_e[1])?_e[0]:(s.memoizedState=[i,o],i)}function Ci(i,o){var s=di();o=o===void 0?null:o;var _e=s.memoizedState;return _e!==null&&o!==null&&Wh(o,_e[1])?_e[0]:(i=i(),s.memoizedState=[i,o],i)}function Di(i,o,s){return Rh&21?(He(s,o)||(s=yc(),N.lanes|=s,hh|=s,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,Ug=!0),i.memoizedState=s)}function Ei(i,o){var s=C;C=s!==0&&4>s?s:4,i(!0);var _e=Qh.transition;Qh.transition={};try{i(!1),o()}finally{C=s,Qh.transition=_e}}function Fi(){return di().memoizedState}function Gi(i,o,s){var _e=lh(i);if(s={lane:_e,action:s,hasEagerState:!1,eagerState:null,next:null},Hi(i))Ii(o,s);else if(s=Yg(i,o,s,_e),s!==null){var _n=L();mh(s,i,_e,_n),Ji(s,o,_e)}}function ri(i,o,s){var _e=lh(i),_n={lane:_e,action:s,hasEagerState:!1,eagerState:null,next:null};if(Hi(i))Ii(o,_n);else{var _o=i.alternate;if(i.lanes===0&&(_o===null||_o.lanes===0)&&(_o=o.lastRenderedReducer,_o!==null))try{var _a=o.lastRenderedState,_u=_o(_a,s);if(_n.hasEagerState=!0,_n.eagerState=_u,He(_u,_a)){var _h=o.interleaved;_h===null?(_n.next=_n,Xg(o)):(_n.next=_h.next,_h.next=_n),o.interleaved=_n;return}}catch{}finally{}s=Yg(i,o,_n,_e),s!==null&&(_n=L(),mh(s,i,_e,_n),Ji(s,o,_e))}}function Hi(i){var o=i.alternate;return i===N||o!==null&&o===N}function Ii(i,o){Th=Sh=!0;var s=i.pending;s===null?o.next=o:(o.next=s.next,s.next=o),i.pending=o}function Ji(i,o,s){if(s&4194240){var _e=o.lanes;_e&=i.pendingLanes,s|=_e,o.lanes=s,Cc(i,s)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(i,o){return ci().memoizedState=[i,o===void 0?null:o],i},useContext:Vg,useEffect:vi,useImperativeHandle:function(i,o,s){return s=s!=null?s.concat([i]):null,ti(4194308,4,yi.bind(null,o,i),s)},useLayoutEffect:function(i,o){return ti(4194308,4,i,o)},useInsertionEffect:function(i,o){return ti(4,2,i,o)},useMemo:function(i,o){var s=ci();return o=o===void 0?null:o,i=i(),s.memoizedState=[i,o],i},useReducer:function(i,o,s){var _e=ci();return o=s!==void 0?s(o):o,_e.memoizedState=_e.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},_e.queue=i,i=i.dispatch=Gi.bind(null,N,i),[_e.memoizedState,i]},useRef:function(i){var o=ci();return i={current:i},o.memoizedState=i},useState:qi,useDebugValue:Ai,useDeferredValue:function(i){return ci().memoizedState=i},useTransition:function(){var i=qi(!1),o=i[0];return i=Ei.bind(null,i[1]),ci().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,s){var _e=N,_n=ci();if(I){if(s===void 0)throw Error(p$1(407));s=s()}else{if(s=o(),R===null)throw Error(p$1(349));Rh&30||ni(_e,o,s)}_n.memoizedState=s;var _o={value:s,getSnapshot:o};return _n.queue=_o,vi(ki.bind(null,_e,_o,i),[i]),_e.flags|=2048,li(9,mi.bind(null,_e,_o,s,o),void 0,null),s},useId:function(){var i=ci(),o=R.identifierPrefix;if(I){var s=sg,_e=rg;s=(_e&~(1<<32-oc(_e)-1)).toString(32)+s,o=":"+o+"R"+s,s=Uh++,0<s&&(o+="H"+s.toString(32)),o+=":"}else s=Vh++,o=":"+o+"r"+s.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(i){var o=di();return Di(o,O.memoizedState,i)},useTransition:function(){var i=fi(ei)[0],o=di().memoizedState;return[i,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(i){var o=di();return O===null?o.memoizedState=i:Di(o,O.memoizedState,i)},useTransition:function(){var i=gi(ei)[0],o=di().memoizedState;return[i,o]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(i,o){try{var s="",_e=o;do s+=Pa(_e),_e=_e.return;while(_e);var _n=s}catch(_o){_n=`
Error generating stack: `+_o.message+`
`+_o.stack}return{value:i,source:o,stack:_n,digest:null}}function Li(i,o,s){return{value:i,source:null,stack:s??null,digest:o??null}}function Mi(i,o){try{console.error(o.value)}catch(s){setTimeout(function(){throw s})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(i,o,s){s=ch(-1,s),s.tag=3,s.payload={element:null};var _e=o.value;return s.callback=function(){Pi||(Pi=!0,Qi=_e),Mi(i,o)},s}function Ri(i,o,s){s=ch(-1,s),s.tag=3;var _e=i.type.getDerivedStateFromError;if(typeof _e=="function"){var _n=o.value;s.payload=function(){return _e(_n)},s.callback=function(){Mi(i,o)}}var _o=i.stateNode;return _o!==null&&typeof _o.componentDidCatch=="function"&&(s.callback=function(){Mi(i,o),typeof _e!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var _a=o.stack;this.componentDidCatch(o.value,{componentStack:_a!==null?_a:""})}),s}function Ti(i,o,s){var _e=i.pingCache;if(_e===null){_e=i.pingCache=new Ni;var _n=new Set;_e.set(o,_n)}else _n=_e.get(o),_n===void 0&&(_n=new Set,_e.set(o,_n));_n.has(s)||(_n.add(s),i=Ui.bind(null,i,o,s),o.then(i,i))}function Vi(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Wi(i,o,s,_e,_n){return i.mode&1?(i.flags|=65536,i.lanes=_n,i):(i===o?i.flags|=65536:(i.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(o=ch(-1,1),o.tag=2,dh(s,o,1))),s.lanes|=1),i)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(i,o,s,_e){o.child=i===null?Ch(o,null,s,_e):Bh(o,i.child,s,_e)}function Zi(i,o,s,_e,_n){s=s.render;var _o=o.ref;return Tg(o,_n),_e=Xh(i,o,s,_e,_o,_n),s=bi(),i!==null&&!Ug?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~_n,$i(i,o,_n)):(I&&s&&vg(o),o.flags|=1,Yi(i,o,_e,_n),o.child)}function aj(i,o,s,_e,_n){if(i===null){var _o=s.type;return typeof _o=="function"&&!bj(_o)&&_o.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(o.tag=15,o.type=_o,cj(i,o,_o,_e,_n)):(i=yh(s.type,null,_e,o,o.mode,_n),i.ref=o.ref,i.return=o,o.child=i)}if(_o=i.child,!(i.lanes&_n)){var _a=_o.memoizedProps;if(s=s.compare,s=s!==null?s:Ie,s(_a,_e)&&i.ref===o.ref)return $i(i,o,_n)}return o.flags|=1,i=wh(_o,_e),i.ref=o.ref,i.return=o,o.child=i}function cj(i,o,s,_e,_n){if(i!==null){var _o=i.memoizedProps;if(Ie(_o,_e)&&i.ref===o.ref)if(Ug=!1,o.pendingProps=_e=_o,(i.lanes&_n)!==0)i.flags&131072&&(Ug=!0);else return o.lanes=i.lanes,$i(i,o,_n)}return dj(i,o,s,_e,_n)}function ej(i,o,s){var _e=o.pendingProps,_n=_e.children,_o=i!==null?i.memoizedState:null;if(_e.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=s;else{if(!(s&1073741824))return i=_o!==null?_o.baseLanes|s:s,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,G(fj,gj),gj|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e=_o!==null?_o.baseLanes:s,G(fj,gj),gj|=_e}else _o!==null?(_e=_o.baseLanes|s,o.memoizedState=null):_e=s,G(fj,gj),gj|=_e;return Yi(i,o,_n,s),o.child}function hj(i,o){var s=o.ref;(i===null&&s!==null||i!==null&&i.ref!==s)&&(o.flags|=512,o.flags|=2097152)}function dj(i,o,s,_e,_n){var _o=Zf(s)?Xf:H$2.current;return _o=Yf(o,_o),Tg(o,_n),s=Xh(i,o,s,_e,_o,_n),_e=bi(),i!==null&&!Ug?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~_n,$i(i,o,_n)):(I&&_e&&vg(o),o.flags|=1,Yi(i,o,s,_n),o.child)}function ij(i,o,s,_e,_n){if(Zf(s)){var _o=!0;cg(o)}else _o=!1;if(Tg(o,_n),o.stateNode===null)jj(i,o),ph(o,s,_e),rh(o,s,_e,_n),_e=!0;else if(i===null){var _a=o.stateNode,_u=o.memoizedProps;_a.props=_u;var _h=_a.context,ty=s.contextType;typeof ty=="object"&&ty!==null?ty=Vg(ty):(ty=Zf(s)?Xf:H$2.current,ty=Yf(o,ty));var oy=s.getDerivedStateFromProps,hy=typeof oy=="function"||typeof _a.getSnapshotBeforeUpdate=="function";hy||typeof _a.UNSAFE_componentWillReceiveProps!="function"&&typeof _a.componentWillReceiveProps!="function"||(_u!==_e||_h!==ty)&&qh(o,_a,_e,ty),$g=!1;var fy=o.memoizedState;_a.state=fy,gh(o,_e,_a,_n),_h=o.memoizedState,_u!==_e||fy!==_h||Wf.current||$g?(typeof oy=="function"&&(kh(o,s,oy,_e),_h=o.memoizedState),(_u=$g||oh(o,s,_u,_e,fy,_h,ty))?(hy||typeof _a.UNSAFE_componentWillMount!="function"&&typeof _a.componentWillMount!="function"||(typeof _a.componentWillMount=="function"&&_a.componentWillMount(),typeof _a.UNSAFE_componentWillMount=="function"&&_a.UNSAFE_componentWillMount()),typeof _a.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _a.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=_e,o.memoizedState=_h),_a.props=_e,_a.state=_h,_a.context=ty,_e=_u):(typeof _a.componentDidMount=="function"&&(o.flags|=4194308),_e=!1)}else{_a=o.stateNode,bh(i,o),_u=o.memoizedProps,ty=o.type===o.elementType?_u:Lg(o.type,_u),_a.props=ty,hy=o.pendingProps,fy=_a.context,_h=s.contextType,typeof _h=="object"&&_h!==null?_h=Vg(_h):(_h=Zf(s)?Xf:H$2.current,_h=Yf(o,_h));var vy=s.getDerivedStateFromProps;(oy=typeof vy=="function"||typeof _a.getSnapshotBeforeUpdate=="function")||typeof _a.UNSAFE_componentWillReceiveProps!="function"&&typeof _a.componentWillReceiveProps!="function"||(_u!==hy||fy!==_h)&&qh(o,_a,_e,_h),$g=!1,fy=o.memoizedState,_a.state=fy,gh(o,_e,_a,_n);var xy=o.memoizedState;_u!==hy||fy!==xy||Wf.current||$g?(typeof vy=="function"&&(kh(o,s,vy,_e),xy=o.memoizedState),(ty=$g||oh(o,s,ty,_e,fy,xy,_h)||!1)?(oy||typeof _a.UNSAFE_componentWillUpdate!="function"&&typeof _a.componentWillUpdate!="function"||(typeof _a.componentWillUpdate=="function"&&_a.componentWillUpdate(_e,xy,_h),typeof _a.UNSAFE_componentWillUpdate=="function"&&_a.UNSAFE_componentWillUpdate(_e,xy,_h)),typeof _a.componentDidUpdate=="function"&&(o.flags|=4),typeof _a.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _a.componentDidUpdate!="function"||_u===i.memoizedProps&&fy===i.memoizedState||(o.flags|=4),typeof _a.getSnapshotBeforeUpdate!="function"||_u===i.memoizedProps&&fy===i.memoizedState||(o.flags|=1024),o.memoizedProps=_e,o.memoizedState=xy),_a.props=_e,_a.state=xy,_a.context=_h,_e=ty):(typeof _a.componentDidUpdate!="function"||_u===i.memoizedProps&&fy===i.memoizedState||(o.flags|=4),typeof _a.getSnapshotBeforeUpdate!="function"||_u===i.memoizedProps&&fy===i.memoizedState||(o.flags|=1024),_e=!1)}return kj(i,o,s,_e,_o,_n)}function kj(i,o,s,_e,_n,_o){hj(i,o);var _a=(o.flags&128)!==0;if(!_e&&!_a)return _n&&dg(o,s,!1),$i(i,o,_o);_e=o.stateNode,Xi.current=o;var _u=_a&&typeof s.getDerivedStateFromError!="function"?null:_e.render();return o.flags|=1,i!==null&&_a?(o.child=Bh(o,i.child,null,_o),o.child=Bh(o,null,_u,_o)):Yi(i,o,_u,_o),o.memoizedState=_e.state,_n&&dg(o,s,!0),o.child}function lj(i){var o=i.stateNode;o.pendingContext?ag(i,o.pendingContext,o.pendingContext!==o.context):o.context&&ag(i,o.context,!1),Ih(i,o.containerInfo)}function mj(i,o,s,_e,_n){return Ig(),Jg(_n),o.flags|=256,Yi(i,o,s,_e),o.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(i){return{baseLanes:i,cachePool:null,transitions:null}}function pj(i,o,s){var _e=o.pendingProps,_n=M.current,_o=!1,_a=(o.flags&128)!==0,_u;if((_u=_a)||(_u=i!==null&&i.memoizedState===null?!1:(_n&2)!==0),_u?(_o=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(_n|=1),G(M,_n&1),i===null)return Eg(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(_a=_e.children,i=_e.fallback,_o?(_e=o.mode,_o=o.child,_a={mode:"hidden",children:_a},!(_e&1)&&_o!==null?(_o.childLanes=0,_o.pendingProps=_a):_o=qj(_a,_e,0,null),i=Ah(i,_e,s,null),_o.return=o,i.return=o,_o.sibling=i,o.child=_o,o.child.memoizedState=oj(s),o.memoizedState=nj,i):rj(o,_a));if(_n=i.memoizedState,_n!==null&&(_u=_n.dehydrated,_u!==null))return sj(i,o,_a,_e,_u,_n,s);if(_o){_o=_e.fallback,_a=o.mode,_n=i.child,_u=_n.sibling;var _h={mode:"hidden",children:_e.children};return!(_a&1)&&o.child!==_n?(_e=o.child,_e.childLanes=0,_e.pendingProps=_h,o.deletions=null):(_e=wh(_n,_h),_e.subtreeFlags=_n.subtreeFlags&14680064),_u!==null?_o=wh(_u,_o):(_o=Ah(_o,_a,s,null),_o.flags|=2),_o.return=o,_e.return=o,_e.sibling=_o,o.child=_e,_e=_o,_o=o.child,_a=i.child.memoizedState,_a=_a===null?oj(s):{baseLanes:_a.baseLanes|s,cachePool:null,transitions:_a.transitions},_o.memoizedState=_a,_o.childLanes=i.childLanes&~s,o.memoizedState=nj,_e}return _o=i.child,i=_o.sibling,_e=wh(_o,{mode:"visible",children:_e.children}),!(o.mode&1)&&(_e.lanes=s),_e.return=o,_e.sibling=null,i!==null&&(s=o.deletions,s===null?(o.deletions=[i],o.flags|=16):s.push(i)),o.child=_e,o.memoizedState=null,_e}function rj(i,o){return o=qj({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function tj(i,o,s,_e){return _e!==null&&Jg(_e),Bh(o,i.child,null,s),i=rj(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function sj(i,o,s,_e,_n,_o,_a){if(s)return o.flags&256?(o.flags&=-257,_e=Li(Error(p$1(422))),tj(i,o,_a,_e)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(_o=_e.fallback,_n=o.mode,_e=qj({mode:"visible",children:_e.children},_n,0,null),_o=Ah(_o,_n,_a,null),_o.flags|=2,_e.return=o,_o.return=o,_e.sibling=_o,o.child=_e,o.mode&1&&Bh(o,i.child,null,_a),o.child.memoizedState=oj(_a),o.memoizedState=nj,_o);if(!(o.mode&1))return tj(i,o,_a,null);if(_n.data==="$!"){if(_e=_n.nextSibling&&_n.nextSibling.dataset,_e)var _u=_e.dgst;return _e=_u,_o=Error(p$1(419)),_e=Li(_o,_e,void 0),tj(i,o,_a,_e)}if(_u=(_a&i.childLanes)!==0,Ug||_u){if(_e=R,_e!==null){switch(_a&-_a){case 4:_n=2;break;case 16:_n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_n=32;break;case 536870912:_n=268435456;break;default:_n=0}_n=_n&(_e.suspendedLanes|_a)?0:_n,_n!==0&&_n!==_o.retryLane&&(_o.retryLane=_n,Zg(i,_n),mh(_e,i,_n,-1))}return uj(),_e=Li(Error(p$1(421))),tj(i,o,_a,_e)}return _n.data==="$?"?(o.flags|=128,o.child=i.child,o=vj.bind(null,i),_n._reactRetry=o,null):(i=_o.treeContext,yg=Lf(_n.nextSibling),xg=o,I=!0,zg=null,i!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=i.id,sg=i.overflow,qg=o),o=rj(o,_e.children),o.flags|=4096,o)}function wj(i,o,s){i.lanes|=o;var _e=i.alternate;_e!==null&&(_e.lanes|=o),Sg(i.return,o,s)}function xj(i,o,s,_e,_n){var _o=i.memoizedState;_o===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:_e,tail:s,tailMode:_n}:(_o.isBackwards=o,_o.rendering=null,_o.renderingStartTime=0,_o.last=_e,_o.tail=s,_o.tailMode=_n)}function yj(i,o,s){var _e=o.pendingProps,_n=_e.revealOrder,_o=_e.tail;if(Yi(i,o,_e.children,s),_e=M.current,_e&2)_e=_e&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)t:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&wj(i,s,o);else if(i.tag===19)wj(i,s,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break t;for(;i.sibling===null;){if(i.return===null||i.return===o)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}_e&=1}if(G(M,_e),!(o.mode&1))o.memoizedState=null;else switch(_n){case"forwards":for(s=o.child,_n=null;s!==null;)i=s.alternate,i!==null&&Mh(i)===null&&(_n=s),s=s.sibling;s=_n,s===null?(_n=o.child,o.child=null):(_n=s.sibling,s.sibling=null),xj(o,!1,_n,s,_o);break;case"backwards":for(s=null,_n=o.child,o.child=null;_n!==null;){if(i=_n.alternate,i!==null&&Mh(i)===null){o.child=_n;break}i=_n.sibling,_n.sibling=s,s=_n,_n=i}xj(o,!0,s,null,_o);break;case"together":xj(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function jj(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function $i(i,o,s){if(i!==null&&(o.dependencies=i.dependencies),hh|=o.lanes,!(s&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(p$1(153));if(o.child!==null){for(i=o.child,s=wh(i,i.pendingProps),o.child=s,s.return=o;i.sibling!==null;)i=i.sibling,s=s.sibling=wh(i,i.pendingProps),s.return=o;s.sibling=null}return o.child}function zj(i,o,s){switch(o.tag){case 3:lj(o),Ig();break;case 5:Kh(o);break;case 1:Zf(o.type)&&cg(o);break;case 4:Ih(o,o.stateNode.containerInfo);break;case 10:var _e=o.type._context,_n=o.memoizedProps.value;G(Mg,_e._currentValue),_e._currentValue=_n;break;case 13:if(_e=o.memoizedState,_e!==null)return _e.dehydrated!==null?(G(M,M.current&1),o.flags|=128,null):s&o.child.childLanes?pj(i,o,s):(G(M,M.current&1),i=$i(i,o,s),i!==null?i.sibling:null);G(M,M.current&1);break;case 19:if(_e=(s&o.childLanes)!==0,i.flags&128){if(_e)return yj(i,o,s);o.flags|=128}if(_n=o.memoizedState,_n!==null&&(_n.rendering=null,_n.tail=null,_n.lastEffect=null),G(M,M.current),_e)break;return null;case 22:case 23:return o.lanes=0,ej(i,o,s)}return $i(i,o,s)}var Aj,Bj,Cj,Dj;Aj=function(i,o){for(var s=o.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Bj=function(){};Cj=function(i,o,s,_e){var _n=i.memoizedProps;if(_n!==_e){i=o.stateNode,Hh(Eh.current);var _o=null;switch(s){case"input":_n=Ya(i,_n),_e=Ya(i,_e),_o=[];break;case"select":_n=A$1({},_n,{value:void 0}),_e=A$1({},_e,{value:void 0}),_o=[];break;case"textarea":_n=gb(i,_n),_e=gb(i,_e),_o=[];break;default:typeof _n.onClick!="function"&&typeof _e.onClick=="function"&&(i.onclick=Bf)}ub(s,_e);var _a;s=null;for(ty in _n)if(!_e.hasOwnProperty(ty)&&_n.hasOwnProperty(ty)&&_n[ty]!=null)if(ty==="style"){var _u=_n[ty];for(_a in _u)_u.hasOwnProperty(_a)&&(s||(s={}),s[_a]="")}else ty!=="dangerouslySetInnerHTML"&&ty!=="children"&&ty!=="suppressContentEditableWarning"&&ty!=="suppressHydrationWarning"&&ty!=="autoFocus"&&(ea.hasOwnProperty(ty)?_o||(_o=[]):(_o=_o||[]).push(ty,null));for(ty in _e){var _h=_e[ty];if(_u=_n!=null?_n[ty]:void 0,_e.hasOwnProperty(ty)&&_h!==_u&&(_h!=null||_u!=null))if(ty==="style")if(_u){for(_a in _u)!_u.hasOwnProperty(_a)||_h&&_h.hasOwnProperty(_a)||(s||(s={}),s[_a]="");for(_a in _h)_h.hasOwnProperty(_a)&&_u[_a]!==_h[_a]&&(s||(s={}),s[_a]=_h[_a])}else s||(_o||(_o=[]),_o.push(ty,s)),s=_h;else ty==="dangerouslySetInnerHTML"?(_h=_h?_h.__html:void 0,_u=_u?_u.__html:void 0,_h!=null&&_u!==_h&&(_o=_o||[]).push(ty,_h)):ty==="children"?typeof _h!="string"&&typeof _h!="number"||(_o=_o||[]).push(ty,""+_h):ty!=="suppressContentEditableWarning"&&ty!=="suppressHydrationWarning"&&(ea.hasOwnProperty(ty)?(_h!=null&&ty==="onScroll"&&D("scroll",i),_o||_u===_h||(_o=[])):(_o=_o||[]).push(ty,_h))}s&&(_o=_o||[]).push("style",s);var ty=_o;(o.updateQueue=ty)&&(o.flags|=4)}};Dj=function(i,o,s,_e){s!==_e&&(o.flags|=4)};function Ej(i,o){if(!I)switch(i.tailMode){case"hidden":o=i.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?i.tail=null:s.sibling=null;break;case"collapsed":s=i.tail;for(var _e=null;s!==null;)s.alternate!==null&&(_e=s),s=s.sibling;_e===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:_e.sibling=null}}function S(i){var o=i.alternate!==null&&i.alternate.child===i.child,s=0,_e=0;if(o)for(var _n=i.child;_n!==null;)s|=_n.lanes|_n.childLanes,_e|=_n.subtreeFlags&14680064,_e|=_n.flags&14680064,_n.return=i,_n=_n.sibling;else for(_n=i.child;_n!==null;)s|=_n.lanes|_n.childLanes,_e|=_n.subtreeFlags,_e|=_n.flags,_n.return=i,_n=_n.sibling;return i.subtreeFlags|=_e,i.childLanes=s,o}function Fj(i,o,s){var _e=o.pendingProps;switch(wg(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(o),null;case 1:return Zf(o.type)&&$f(),S(o),null;case 3:return _e=o.stateNode,Jh(),E(Wf),E(H$2),Oh(),_e.pendingContext&&(_e.context=_e.pendingContext,_e.pendingContext=null),(i===null||i.child===null)&&(Gg(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(i,o),S(o),null;case 5:Lh(o);var _n=Hh(Gh.current);if(s=o.type,i!==null&&o.stateNode!=null)Cj(i,o,s,_e,_n),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!_e){if(o.stateNode===null)throw Error(p$1(166));return S(o),null}if(i=Hh(Eh.current),Gg(o)){_e=o.stateNode,s=o.type;var _o=o.memoizedProps;switch(_e[Of]=o,_e[Pf]=_o,i=(o.mode&1)!==0,s){case"dialog":D("cancel",_e),D("close",_e);break;case"iframe":case"object":case"embed":D("load",_e);break;case"video":case"audio":for(_n=0;_n<lf.length;_n++)D(lf[_n],_e);break;case"source":D("error",_e);break;case"img":case"image":case"link":D("error",_e),D("load",_e);break;case"details":D("toggle",_e);break;case"input":Za(_e,_o),D("invalid",_e);break;case"select":_e._wrapperState={wasMultiple:!!_o.multiple},D("invalid",_e);break;case"textarea":hb(_e,_o),D("invalid",_e)}ub(s,_o),_n=null;for(var _a in _o)if(_o.hasOwnProperty(_a)){var _u=_o[_a];_a==="children"?typeof _u=="string"?_e.textContent!==_u&&(_o.suppressHydrationWarning!==!0&&Af(_e.textContent,_u,i),_n=["children",_u]):typeof _u=="number"&&_e.textContent!==""+_u&&(_o.suppressHydrationWarning!==!0&&Af(_e.textContent,_u,i),_n=["children",""+_u]):ea.hasOwnProperty(_a)&&_u!=null&&_a==="onScroll"&&D("scroll",_e)}switch(s){case"input":Va(_e),db(_e,_o,!0);break;case"textarea":Va(_e),jb(_e);break;case"select":case"option":break;default:typeof _o.onClick=="function"&&(_e.onclick=Bf)}_e=_n,o.updateQueue=_e,_e!==null&&(o.flags|=4)}else{_a=_n.nodeType===9?_n:_n.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=kb(s)),i==="http://www.w3.org/1999/xhtml"?s==="script"?(i=_a.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof _e.is=="string"?i=_a.createElement(s,{is:_e.is}):(i=_a.createElement(s),s==="select"&&(_a=i,_e.multiple?_a.multiple=!0:_e.size&&(_a.size=_e.size))):i=_a.createElementNS(i,s),i[Of]=o,i[Pf]=_e,Aj(i,o,!1,!1),o.stateNode=i;t:{switch(_a=vb(s,_e),s){case"dialog":D("cancel",i),D("close",i),_n=_e;break;case"iframe":case"object":case"embed":D("load",i),_n=_e;break;case"video":case"audio":for(_n=0;_n<lf.length;_n++)D(lf[_n],i);_n=_e;break;case"source":D("error",i),_n=_e;break;case"img":case"image":case"link":D("error",i),D("load",i),_n=_e;break;case"details":D("toggle",i),_n=_e;break;case"input":Za(i,_e),_n=Ya(i,_e),D("invalid",i);break;case"option":_n=_e;break;case"select":i._wrapperState={wasMultiple:!!_e.multiple},_n=A$1({},_e,{value:void 0}),D("invalid",i);break;case"textarea":hb(i,_e),_n=gb(i,_e),D("invalid",i);break;default:_n=_e}ub(s,_n),_u=_n;for(_o in _u)if(_u.hasOwnProperty(_o)){var _h=_u[_o];_o==="style"?sb(i,_h):_o==="dangerouslySetInnerHTML"?(_h=_h?_h.__html:void 0,_h!=null&&nb(i,_h)):_o==="children"?typeof _h=="string"?(s!=="textarea"||_h!=="")&&ob(i,_h):typeof _h=="number"&&ob(i,""+_h):_o!=="suppressContentEditableWarning"&&_o!=="suppressHydrationWarning"&&_o!=="autoFocus"&&(ea.hasOwnProperty(_o)?_h!=null&&_o==="onScroll"&&D("scroll",i):_h!=null&&ta(i,_o,_h,_a))}switch(s){case"input":Va(i),db(i,_e,!1);break;case"textarea":Va(i),jb(i);break;case"option":_e.value!=null&&i.setAttribute("value",""+Sa(_e.value));break;case"select":i.multiple=!!_e.multiple,_o=_e.value,_o!=null?fb(i,!!_e.multiple,_o,!1):_e.defaultValue!=null&&fb(i,!!_e.multiple,_e.defaultValue,!0);break;default:typeof _n.onClick=="function"&&(i.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":_e=!!_e.autoFocus;break t;case"img":_e=!0;break t;default:_e=!1}}_e&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return S(o),null;case 6:if(i&&o.stateNode!=null)Dj(i,o,i.memoizedProps,_e);else{if(typeof _e!="string"&&o.stateNode===null)throw Error(p$1(166));if(s=Hh(Gh.current),Hh(Eh.current),Gg(o)){if(_e=o.stateNode,s=o.memoizedProps,_e[Of]=o,(_o=_e.nodeValue!==s)&&(i=xg,i!==null))switch(i.tag){case 3:Af(_e.nodeValue,s,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Af(_e.nodeValue,s,(i.mode&1)!==0)}_o&&(o.flags|=4)}else _e=(s.nodeType===9?s:s.ownerDocument).createTextNode(_e),_e[Of]=o,o.stateNode=_e}return S(o),null;case 13:if(E(M),_e=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(I&&yg!==null&&o.mode&1&&!(o.flags&128))Hg(),Ig(),o.flags|=98560,_o=!1;else if(_o=Gg(o),_e!==null&&_e.dehydrated!==null){if(i===null){if(!_o)throw Error(p$1(318));if(_o=o.memoizedState,_o=_o!==null?_o.dehydrated:null,!_o)throw Error(p$1(317));_o[Of]=o}else Ig(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;S(o),_o=!1}else zg!==null&&(Gj(zg),zg=null),_o=!0;if(!_o)return o.flags&65536?o:null}return o.flags&128?(o.lanes=s,o):(_e=_e!==null,_e!==(i!==null&&i.memoizedState!==null)&&_e&&(o.child.flags|=8192,o.mode&1&&(i===null||M.current&1?T===0&&(T=3):uj())),o.updateQueue!==null&&(o.flags|=4),S(o),null);case 4:return Jh(),Bj(i,o),i===null&&sf(o.stateNode.containerInfo),S(o),null;case 10:return Rg(o.type._context),S(o),null;case 17:return Zf(o.type)&&$f(),S(o),null;case 19:if(E(M),_o=o.memoizedState,_o===null)return S(o),null;if(_e=(o.flags&128)!==0,_a=_o.rendering,_a===null)if(_e)Ej(_o,!1);else{if(T!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(_a=Mh(i),_a!==null){for(o.flags|=128,Ej(_o,!1),_e=_a.updateQueue,_e!==null&&(o.updateQueue=_e,o.flags|=4),o.subtreeFlags=0,_e=s,s=o.child;s!==null;)_o=s,i=_e,_o.flags&=14680066,_a=_o.alternate,_a===null?(_o.childLanes=0,_o.lanes=i,_o.child=null,_o.subtreeFlags=0,_o.memoizedProps=null,_o.memoizedState=null,_o.updateQueue=null,_o.dependencies=null,_o.stateNode=null):(_o.childLanes=_a.childLanes,_o.lanes=_a.lanes,_o.child=_a.child,_o.subtreeFlags=0,_o.deletions=null,_o.memoizedProps=_a.memoizedProps,_o.memoizedState=_a.memoizedState,_o.updateQueue=_a.updateQueue,_o.type=_a.type,i=_a.dependencies,_o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s=s.sibling;return G(M,M.current&1|2),o.child}i=i.sibling}_o.tail!==null&&B()>Hj&&(o.flags|=128,_e=!0,Ej(_o,!1),o.lanes=4194304)}else{if(!_e)if(i=Mh(_a),i!==null){if(o.flags|=128,_e=!0,s=i.updateQueue,s!==null&&(o.updateQueue=s,o.flags|=4),Ej(_o,!0),_o.tail===null&&_o.tailMode==="hidden"&&!_a.alternate&&!I)return S(o),null}else 2*B()-_o.renderingStartTime>Hj&&s!==1073741824&&(o.flags|=128,_e=!0,Ej(_o,!1),o.lanes=4194304);_o.isBackwards?(_a.sibling=o.child,o.child=_a):(s=_o.last,s!==null?s.sibling=_a:o.child=_a,_o.last=_a)}return _o.tail!==null?(o=_o.tail,_o.rendering=o,_o.tail=o.sibling,_o.renderingStartTime=B(),o.sibling=null,s=M.current,G(M,_e?s&1|2:s&1),o):(S(o),null);case 22:case 23:return Ij(),_e=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==_e&&(o.flags|=8192),_e&&o.mode&1?gj&1073741824&&(S(o),o.subtreeFlags&6&&(o.flags|=8192)):S(o),null;case 24:return null;case 25:return null}throw Error(p$1(156,o.tag))}function Jj(i,o){switch(wg(o),o.tag){case 1:return Zf(o.type)&&$f(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Jh(),E(Wf),E(H$2),Oh(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return Lh(o),null;case 13:if(E(M),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(p$1(340));Ig()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(o.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(i,o){var s=i.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(_e){W(i,o,_e)}else s.current=null}function Nj(i,o,s){try{s()}catch(_e){W(i,o,_e)}}var Oj=!1;function Pj(i,o){if(Cf=dd,i=Me(),Ne(i)){if("selectionStart"in i)var s={start:i.selectionStart,end:i.selectionEnd};else t:{s=(s=i.ownerDocument)&&s.defaultView||window;var _e=s.getSelection&&s.getSelection();if(_e&&_e.rangeCount!==0){s=_e.anchorNode;var _n=_e.anchorOffset,_o=_e.focusNode;_e=_e.focusOffset;try{s.nodeType,_o.nodeType}catch{s=null;break t}var _a=0,_u=-1,_h=-1,ty=0,oy=0,hy=i,fy=null;e:for(;;){for(var vy;hy!==s||_n!==0&&hy.nodeType!==3||(_u=_a+_n),hy!==_o||_e!==0&&hy.nodeType!==3||(_h=_a+_e),hy.nodeType===3&&(_a+=hy.nodeValue.length),(vy=hy.firstChild)!==null;)fy=hy,hy=vy;for(;;){if(hy===i)break e;if(fy===s&&++ty===_n&&(_u=_a),fy===_o&&++oy===_e&&(_h=_a),(vy=hy.nextSibling)!==null)break;hy=fy,fy=hy.parentNode}hy=vy}s=_u===-1||_h===-1?null:{start:_u,end:_h}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:i,selectionRange:s},dd=!1,V=o;V!==null;)if(o=V,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,V=i;else for(;V!==null;){o=V;try{var xy=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(xy!==null){var wy=xy.memoizedProps,By=xy.memoizedState,Sy=o.stateNode,Ay=Sy.getSnapshotBeforeUpdate(o.elementType===o.type?wy:Lg(o.type,wy),By);Sy.__reactInternalSnapshotBeforeUpdate=Ay}break;case 3:var Py=o.stateNode.containerInfo;Py.nodeType===1?Py.textContent="":Py.nodeType===9&&Py.documentElement&&Py.removeChild(Py.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(Iy){W(o,o.return,Iy)}if(i=o.sibling,i!==null){i.return=o.return,V=i;break}V=o.return}return xy=Oj,Oj=!1,xy}function Qj(i,o,s){var _e=o.updateQueue;if(_e=_e!==null?_e.lastEffect:null,_e!==null){var _n=_e=_e.next;do{if((_n.tag&i)===i){var _o=_n.destroy;_n.destroy=void 0,_o!==void 0&&Nj(o,s,_o)}_n=_n.next}while(_n!==_e)}}function Rj(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var s=o=o.next;do{if((s.tag&i)===i){var _e=s.create;s.destroy=_e()}s=s.next}while(s!==o)}}function Sj(i){var o=i.ref;if(o!==null){var s=i.stateNode;switch(i.tag){case 5:i=s;break;default:i=s}typeof o=="function"?o(i):o.current=i}}function Tj(i){var o=i.alternate;o!==null&&(i.alternate=null,Tj(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Of],delete o[Pf],delete o[of],delete o[Qf],delete o[Rf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Uj(i){return i.tag===5||i.tag===3||i.tag===4}function Vj(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Uj(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wj(i,o,s){var _e=i.tag;if(_e===5||_e===6)i=i.stateNode,o?s.nodeType===8?s.parentNode.insertBefore(i,o):s.insertBefore(i,o):(s.nodeType===8?(o=s.parentNode,o.insertBefore(i,s)):(o=s,o.appendChild(i)),s=s._reactRootContainer,s!=null||o.onclick!==null||(o.onclick=Bf));else if(_e!==4&&(i=i.child,i!==null))for(Wj(i,o,s),i=i.sibling;i!==null;)Wj(i,o,s),i=i.sibling}function Xj(i,o,s){var _e=i.tag;if(_e===5||_e===6)i=i.stateNode,o?s.insertBefore(i,o):s.appendChild(i);else if(_e!==4&&(i=i.child,i!==null))for(Xj(i,o,s),i=i.sibling;i!==null;)Xj(i,o,s),i=i.sibling}var X=null,Yj=!1;function Zj(i,o,s){for(s=s.child;s!==null;)ak(i,o,s),s=s.sibling}function ak(i,o,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch{}switch(s.tag){case 5:U||Mj(s,o);case 6:var _e=X,_n=Yj;X=null,Zj(i,o,s),X=_e,Yj=_n,X!==null&&(Yj?(i=X,s=s.stateNode,i.nodeType===8?i.parentNode.removeChild(s):i.removeChild(s)):X.removeChild(s.stateNode));break;case 18:X!==null&&(Yj?(i=X,s=s.stateNode,i.nodeType===8?Kf(i.parentNode,s):i.nodeType===1&&Kf(i,s),bd(i)):Kf(X,s.stateNode));break;case 4:_e=X,_n=Yj,X=s.stateNode.containerInfo,Yj=!0,Zj(i,o,s),X=_e,Yj=_n;break;case 0:case 11:case 14:case 15:if(!U&&(_e=s.updateQueue,_e!==null&&(_e=_e.lastEffect,_e!==null))){_n=_e=_e.next;do{var _o=_n,_a=_o.destroy;_o=_o.tag,_a!==void 0&&(_o&2||_o&4)&&Nj(s,o,_a),_n=_n.next}while(_n!==_e)}Zj(i,o,s);break;case 1:if(!U&&(Mj(s,o),_e=s.stateNode,typeof _e.componentWillUnmount=="function"))try{_e.props=s.memoizedProps,_e.state=s.memoizedState,_e.componentWillUnmount()}catch(_u){W(s,o,_u)}Zj(i,o,s);break;case 21:Zj(i,o,s);break;case 22:s.mode&1?(U=(_e=U)||s.memoizedState!==null,Zj(i,o,s),U=_e):Zj(i,o,s);break;default:Zj(i,o,s)}}function bk(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var s=i.stateNode;s===null&&(s=i.stateNode=new Lj),o.forEach(function(_e){var _n=ck.bind(null,i,_e);s.has(_e)||(s.add(_e),_e.then(_n,_n))})}}function dk(i,o){var s=o.deletions;if(s!==null)for(var _e=0;_e<s.length;_e++){var _n=s[_e];try{var _o=i,_a=o,_u=_a;t:for(;_u!==null;){switch(_u.tag){case 5:X=_u.stateNode,Yj=!1;break t;case 3:X=_u.stateNode.containerInfo,Yj=!0;break t;case 4:X=_u.stateNode.containerInfo,Yj=!0;break t}_u=_u.return}if(X===null)throw Error(p$1(160));ak(_o,_a,_n),X=null,Yj=!1;var _h=_n.alternate;_h!==null&&(_h.return=null),_n.return=null}catch(ty){W(_n,o,ty)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)ek(o,i),o=o.sibling}function ek(i,o){var s=i.alternate,_e=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(dk(o,i),fk(i),_e&4){try{Qj(3,i,i.return),Rj(3,i)}catch(wy){W(i,i.return,wy)}try{Qj(5,i,i.return)}catch(wy){W(i,i.return,wy)}}break;case 1:dk(o,i),fk(i),_e&512&&s!==null&&Mj(s,s.return);break;case 5:if(dk(o,i),fk(i),_e&512&&s!==null&&Mj(s,s.return),i.flags&32){var _n=i.stateNode;try{ob(_n,"")}catch(wy){W(i,i.return,wy)}}if(_e&4&&(_n=i.stateNode,_n!=null)){var _o=i.memoizedProps,_a=s!==null?s.memoizedProps:_o,_u=i.type,_h=i.updateQueue;if(i.updateQueue=null,_h!==null)try{_u==="input"&&_o.type==="radio"&&_o.name!=null&&ab(_n,_o),vb(_u,_a);var ty=vb(_u,_o);for(_a=0;_a<_h.length;_a+=2){var oy=_h[_a],hy=_h[_a+1];oy==="style"?sb(_n,hy):oy==="dangerouslySetInnerHTML"?nb(_n,hy):oy==="children"?ob(_n,hy):ta(_n,oy,hy,ty)}switch(_u){case"input":bb(_n,_o);break;case"textarea":ib(_n,_o);break;case"select":var fy=_n._wrapperState.wasMultiple;_n._wrapperState.wasMultiple=!!_o.multiple;var vy=_o.value;vy!=null?fb(_n,!!_o.multiple,vy,!1):fy!==!!_o.multiple&&(_o.defaultValue!=null?fb(_n,!!_o.multiple,_o.defaultValue,!0):fb(_n,!!_o.multiple,_o.multiple?[]:"",!1))}_n[Pf]=_o}catch(wy){W(i,i.return,wy)}}break;case 6:if(dk(o,i),fk(i),_e&4){if(i.stateNode===null)throw Error(p$1(162));_n=i.stateNode,_o=i.memoizedProps;try{_n.nodeValue=_o}catch(wy){W(i,i.return,wy)}}break;case 3:if(dk(o,i),fk(i),_e&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(o.containerInfo)}catch(wy){W(i,i.return,wy)}break;case 4:dk(o,i),fk(i);break;case 13:dk(o,i),fk(i),_n=i.child,_n.flags&8192&&(_o=_n.memoizedState!==null,_n.stateNode.isHidden=_o,!_o||_n.alternate!==null&&_n.alternate.memoizedState!==null||(gk=B())),_e&4&&bk(i);break;case 22:if(oy=s!==null&&s.memoizedState!==null,i.mode&1?(U=(ty=U)||oy,dk(o,i),U=ty):dk(o,i),fk(i),_e&8192){if(ty=i.memoizedState!==null,(i.stateNode.isHidden=ty)&&!oy&&i.mode&1)for(V=i,oy=i.child;oy!==null;){for(hy=V=oy;V!==null;){switch(fy=V,vy=fy.child,fy.tag){case 0:case 11:case 14:case 15:Qj(4,fy,fy.return);break;case 1:Mj(fy,fy.return);var xy=fy.stateNode;if(typeof xy.componentWillUnmount=="function"){_e=fy,s=fy.return;try{o=_e,xy.props=o.memoizedProps,xy.state=o.memoizedState,xy.componentWillUnmount()}catch(wy){W(_e,s,wy)}}break;case 5:Mj(fy,fy.return);break;case 22:if(fy.memoizedState!==null){hk(hy);continue}}vy!==null?(vy.return=fy,V=vy):hk(hy)}oy=oy.sibling}t:for(oy=null,hy=i;;){if(hy.tag===5){if(oy===null){oy=hy;try{_n=hy.stateNode,ty?(_o=_n.style,typeof _o.setProperty=="function"?_o.setProperty("display","none","important"):_o.display="none"):(_u=hy.stateNode,_h=hy.memoizedProps.style,_a=_h!=null&&_h.hasOwnProperty("display")?_h.display:null,_u.style.display=rb("display",_a))}catch(wy){W(i,i.return,wy)}}}else if(hy.tag===6){if(oy===null)try{hy.stateNode.nodeValue=ty?"":hy.memoizedProps}catch(wy){W(i,i.return,wy)}}else if((hy.tag!==22&&hy.tag!==23||hy.memoizedState===null||hy===i)&&hy.child!==null){hy.child.return=hy,hy=hy.child;continue}if(hy===i)break t;for(;hy.sibling===null;){if(hy.return===null||hy.return===i)break t;oy===hy&&(oy=null),hy=hy.return}oy===hy&&(oy=null),hy.sibling.return=hy.return,hy=hy.sibling}}break;case 19:dk(o,i),fk(i),_e&4&&bk(i);break;case 21:break;default:dk(o,i),fk(i)}}function fk(i){var o=i.flags;if(o&2){try{t:{for(var s=i.return;s!==null;){if(Uj(s)){var _e=s;break t}s=s.return}throw Error(p$1(160))}switch(_e.tag){case 5:var _n=_e.stateNode;_e.flags&32&&(ob(_n,""),_e.flags&=-33);var _o=Vj(i);Xj(i,_o,_n);break;case 3:case 4:var _a=_e.stateNode.containerInfo,_u=Vj(i);Wj(i,_u,_a);break;default:throw Error(p$1(161))}}catch(_h){W(i,i.return,_h)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function ik(i,o,s){V=i,jk(i)}function jk(i,o,s){for(var _e=(i.mode&1)!==0;V!==null;){var _n=V,_o=_n.child;if(_n.tag===22&&_e){var _a=_n.memoizedState!==null||Kj;if(!_a){var _u=_n.alternate,_h=_u!==null&&_u.memoizedState!==null||U;_u=Kj;var ty=U;if(Kj=_a,(U=_h)&&!ty)for(V=_n;V!==null;)_a=V,_h=_a.child,_a.tag===22&&_a.memoizedState!==null?kk(_n):_h!==null?(_h.return=_a,V=_h):kk(_n);for(;_o!==null;)V=_o,jk(_o),_o=_o.sibling;V=_n,Kj=_u,U=ty}lk(i)}else _n.subtreeFlags&8772&&_o!==null?(_o.return=_n,V=_o):lk(i)}}function lk(i){for(;V!==null;){var o=V;if(o.flags&8772){var s=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:U||Rj(5,o);break;case 1:var _e=o.stateNode;if(o.flags&4&&!U)if(s===null)_e.componentDidMount();else{var _n=o.elementType===o.type?s.memoizedProps:Lg(o.type,s.memoizedProps);_e.componentDidUpdate(_n,s.memoizedState,_e.__reactInternalSnapshotBeforeUpdate)}var _o=o.updateQueue;_o!==null&&ih(o,_o,_e);break;case 3:var _a=o.updateQueue;if(_a!==null){if(s=null,o.child!==null)switch(o.child.tag){case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}ih(o,_a,s)}break;case 5:var _u=o.stateNode;if(s===null&&o.flags&4){s=_u;var _h=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":_h.autoFocus&&s.focus();break;case"img":_h.src&&(s.src=_h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var ty=o.alternate;if(ty!==null){var oy=ty.memoizedState;if(oy!==null){var hy=oy.dehydrated;hy!==null&&bd(hy)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U||o.flags&512&&Sj(o)}catch(fy){W(o,o.return,fy)}}if(o===i){V=null;break}if(s=o.sibling,s!==null){s.return=o.return,V=s;break}V=o.return}}function hk(i){for(;V!==null;){var o=V;if(o===i){V=null;break}var s=o.sibling;if(s!==null){s.return=o.return,V=s;break}V=o.return}}function kk(i){for(;V!==null;){var o=V;try{switch(o.tag){case 0:case 11:case 15:var s=o.return;try{Rj(4,o)}catch(_h){W(o,s,_h)}break;case 1:var _e=o.stateNode;if(typeof _e.componentDidMount=="function"){var _n=o.return;try{_e.componentDidMount()}catch(_h){W(o,_n,_h)}}var _o=o.return;try{Sj(o)}catch(_h){W(o,_o,_h)}break;case 5:var _a=o.return;try{Sj(o)}catch(_h){W(o,_a,_h)}}}catch(_h){W(o,o.return,_h)}if(o===i){V=null;break}var _u=o.sibling;if(_u!==null){_u.return=o.return,V=_u;break}V=o.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K&6?B():Bk!==-1?Bk:Bk=B()}function lh(i){return i.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(i=C,i!==0||(i=window.event,i=i===void 0?16:jd(i.type)),i):1}function mh(i,o,s,_e){if(50<zk)throw zk=0,Ak=null,Error(p$1(185));Ac(i,s,_e),(!(K&2)||i!==R)&&(i===R&&(!(K&2)&&(rk|=s),T===4&&Dk(i,Z)),Ek(i,_e),s===1&&K===0&&!(o.mode&1)&&(Hj=B()+500,fg&&jg()))}function Ek(i,o){var s=i.callbackNode;wc(i,o);var _e=uc(i,i===R?Z:0);if(_e===0)s!==null&&bc(s),i.callbackNode=null,i.callbackPriority=0;else if(o=_e&-_e,i.callbackPriority!==o){if(s!=null&&bc(s),o===1)i.tag===0?ig(Fk.bind(null,i)):hg(Fk.bind(null,i)),Jf(function(){!(K&6)&&jg()}),s=null;else{switch(Dc(_e)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Gk(s,Hk.bind(null,i))}i.callbackPriority=o,i.callbackNode=s}}function Hk(i,o){if(Bk=-1,Ck=0,K&6)throw Error(p$1(327));var s=i.callbackNode;if(Ik()&&i.callbackNode!==s)return null;var _e=uc(i,i===R?Z:0);if(_e===0)return null;if(_e&30||_e&i.expiredLanes||o)o=Jk(i,_e);else{o=_e;var _n=K;K|=2;var _o=Kk();(R!==i||Z!==o)&&(vk=null,Hj=B()+500,Lk(i,o));do try{Mk();break}catch(_u){Nk(i,_u)}while(!0);Qg(),nk.current=_o,K=_n,Y!==null?o=0:(R=null,Z=0,o=T)}if(o!==0){if(o===2&&(_n=xc(i),_n!==0&&(_e=_n,o=Ok(i,_n))),o===1)throw s=qk,Lk(i,0),Dk(i,_e),Ek(i,B()),s;if(o===6)Dk(i,_e);else{if(_n=i.current.alternate,!(_e&30)&&!Pk(_n)&&(o=Jk(i,_e),o===2&&(_o=xc(i),_o!==0&&(_e=_o,o=Ok(i,_o))),o===1))throw s=qk,Lk(i,0),Dk(i,_e),Ek(i,B()),s;switch(i.finishedWork=_n,i.finishedLanes=_e,o){case 0:case 1:throw Error(p$1(345));case 2:Qk(i,uk,vk);break;case 3:if(Dk(i,_e),(_e&130023424)===_e&&(o=gk+500-B(),10<o)){if(uc(i,0)!==0)break;if(_n=i.suspendedLanes,(_n&_e)!==_e){L(),i.pingedLanes|=i.suspendedLanes&_n;break}i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),o);break}Qk(i,uk,vk);break;case 4:if(Dk(i,_e),(_e&4194240)===_e)break;for(o=i.eventTimes,_n=-1;0<_e;){var _a=31-oc(_e);_o=1<<_a,_a=o[_a],_a>_n&&(_n=_a),_e&=~_o}if(_e=_n,_e=B()-_e,_e=(120>_e?120:480>_e?480:1080>_e?1080:1920>_e?1920:3e3>_e?3e3:4320>_e?4320:1960*mk(_e/1960))-_e,10<_e){i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),_e);break}Qk(i,uk,vk);break;case 5:Qk(i,uk,vk);break;default:throw Error(p$1(329))}}}return Ek(i,B()),i.callbackNode===s?Hk.bind(null,i):null}function Ok(i,o){var s=tk;return i.current.memoizedState.isDehydrated&&(Lk(i,o).flags|=256),i=Jk(i,o),i!==2&&(o=uk,uk=s,o!==null&&Gj(o)),i}function Gj(i){uk===null?uk=i:uk.push.apply(uk,i)}function Pk(i){for(var o=i;;){if(o.flags&16384){var s=o.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var _e=0;_e<s.length;_e++){var _n=s[_e],_o=_n.getSnapshot;_n=_n.value;try{if(!He(_o(),_n))return!1}catch{return!1}}}if(s=o.child,o.subtreeFlags&16384&&s!==null)s.return=o,o=s;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Dk(i,o){for(o&=~sk,o&=~rk,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var s=31-oc(o),_e=1<<s;i[s]=-1,o&=~_e}}function Fk(i){if(K&6)throw Error(p$1(327));Ik();var o=uc(i,0);if(!(o&1))return Ek(i,B()),null;var s=Jk(i,o);if(i.tag!==0&&s===2){var _e=xc(i);_e!==0&&(o=_e,s=Ok(i,_e))}if(s===1)throw s=qk,Lk(i,0),Dk(i,o),Ek(i,B()),s;if(s===6)throw Error(p$1(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Qk(i,uk,vk),Ek(i,B()),null}function Rk(i,o){var s=K;K|=1;try{return i(o)}finally{K=s,K===0&&(Hj=B()+500,fg&&jg())}}function Sk(i){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var o=K;K|=1;var s=pk.transition,_e=C;try{if(pk.transition=null,C=1,i)return i()}finally{C=_e,pk.transition=s,K=o,!(K&6)&&jg()}}function Ij(){gj=fj.current,E(fj)}function Lk(i,o){i.finishedWork=null,i.finishedLanes=0;var s=i.timeoutHandle;if(s!==-1&&(i.timeoutHandle=-1,Gf(s)),Y!==null)for(s=Y.return;s!==null;){var _e=s;switch(wg(_e),_e.tag){case 1:_e=_e.type.childContextTypes,_e!=null&&$f();break;case 3:Jh(),E(Wf),E(H$2),Oh();break;case 5:Lh(_e);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg(_e.type._context);break;case 22:case 23:Ij()}s=s.return}if(R=i,Y=i=wh(i.current,null),Z=gj=o,T=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(o=0;o<Wg.length;o++)if(s=Wg[o],_e=s.interleaved,_e!==null){s.interleaved=null;var _n=_e.next,_o=s.pending;if(_o!==null){var _a=_o.next;_o.next=_n,_e.next=_a}s.pending=_e}Wg=null}return i}function Nk(i,o){do{var s=Y;try{if(Qg(),Ph.current=ai,Sh){for(var _e=N.memoizedState;_e!==null;){var _n=_e.queue;_n!==null&&(_n.pending=null),_e=_e.next}Sh=!1}if(Rh=0,P=O=N=null,Th=!1,Uh=0,ok.current=null,s===null||s.return===null){T=1,qk=o,Y=null;break}t:{var _o=i,_a=s.return,_u=s,_h=o;if(o=Z,_u.flags|=32768,_h!==null&&typeof _h=="object"&&typeof _h.then=="function"){var ty=_h,oy=_u,hy=oy.tag;if(!(oy.mode&1)&&(hy===0||hy===11||hy===15)){var fy=oy.alternate;fy?(oy.updateQueue=fy.updateQueue,oy.memoizedState=fy.memoizedState,oy.lanes=fy.lanes):(oy.updateQueue=null,oy.memoizedState=null)}var vy=Vi(_a);if(vy!==null){vy.flags&=-257,Wi(vy,_a,_u,_o,o),vy.mode&1&&Ti(_o,ty,o),o=vy,_h=ty;var xy=o.updateQueue;if(xy===null){var wy=new Set;wy.add(_h),o.updateQueue=wy}else xy.add(_h);break t}else{if(!(o&1)){Ti(_o,ty,o),uj();break t}_h=Error(p$1(426))}}else if(I&&_u.mode&1){var By=Vi(_a);if(By!==null){!(By.flags&65536)&&(By.flags|=256),Wi(By,_a,_u,_o,o),Jg(Ki(_h,_u));break t}}_o=_h=Ki(_h,_u),T!==4&&(T=2),tk===null?tk=[_o]:tk.push(_o),_o=_a;do{switch(_o.tag){case 3:_o.flags|=65536,o&=-o,_o.lanes|=o;var Sy=Oi(_o,_h,o);fh(_o,Sy);break t;case 1:_u=_h;var Ay=_o.type,Py=_o.stateNode;if(!(_o.flags&128)&&(typeof Ay.getDerivedStateFromError=="function"||Py!==null&&typeof Py.componentDidCatch=="function"&&(Si===null||!Si.has(Py)))){_o.flags|=65536,o&=-o,_o.lanes|=o;var Iy=Ri(_o,_u,o);fh(_o,Iy);break t}}_o=_o.return}while(_o!==null)}Tk(s)}catch($y){o=$y,Y===s&&s!==null&&(Y=s=s.return);continue}break}while(!0)}function Kk(){var i=nk.current;return nk.current=ai,i===null?ai:i}function uj(){(T===0||T===3||T===2)&&(T=4),R===null||!(hh&268435455)&&!(rk&268435455)||Dk(R,Z)}function Jk(i,o){var s=K;K|=2;var _e=Kk();(R!==i||Z!==o)&&(vk=null,Lk(i,o));do try{Uk();break}catch(_n){Nk(i,_n)}while(!0);if(Qg(),K=s,nk.current=_e,Y!==null)throw Error(p$1(261));return R=null,Z=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk(i){var o=Wk(i.alternate,i,gj);i.memoizedProps=i.pendingProps,o===null?Tk(i):Y=o,ok.current=null}function Tk(i){var o=i;do{var s=o.alternate;if(i=o.return,o.flags&32768){if(s=Jj(s,o),s!==null){s.flags&=32767,Y=s;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{T=6,Y=null;return}}else if(s=Fj(s,o,gj),s!==null){Y=s;return}if(o=o.sibling,o!==null){Y=o;return}Y=o=i}while(o!==null);T===0&&(T=5)}function Qk(i,o,s){var _e=C,_n=pk.transition;try{pk.transition=null,C=1,Xk(i,o,s,_e)}finally{pk.transition=_n,C=_e}return null}function Xk(i,o,s,_e){do Ik();while(xk!==null);if(K&6)throw Error(p$1(327));s=i.finishedWork;var _n=i.finishedLanes;if(s===null)return null;if(i.finishedWork=null,i.finishedLanes=0,s===i.current)throw Error(p$1(177));i.callbackNode=null,i.callbackPriority=0;var _o=s.lanes|s.childLanes;if(Bc(i,_o),i===R&&(Y=R=null,Z=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),_o=(s.flags&15990)!==0,s.subtreeFlags&15990||_o){_o=pk.transition,pk.transition=null;var _a=C;C=1;var _u=K;K|=4,ok.current=null,Pj(i,s),ek(s,i),Oe(Df),dd=!!Cf,Df=Cf=null,i.current=s,ik(s),dc(),K=_u,C=_a,pk.transition=_o}else i.current=s;if(wk&&(wk=!1,xk=i,yk=_n),_o=i.pendingLanes,_o===0&&(Si=null),mc(s.stateNode),Ek(i,B()),o!==null)for(_e=i.onRecoverableError,s=0;s<o.length;s++)_n=o[s],_e(_n.value,{componentStack:_n.stack,digest:_n.digest});if(Pi)throw Pi=!1,i=Qi,Qi=null,i;return yk&1&&i.tag!==0&&Ik(),_o=i.pendingLanes,_o&1?i===Ak?zk++:(zk=0,Ak=i):zk=0,jg(),null}function Ik(){if(xk!==null){var i=Dc(yk),o=pk.transition,s=C;try{if(pk.transition=null,C=16>i?16:i,xk===null)var _e=!1;else{if(i=xk,xk=null,yk=0,K&6)throw Error(p$1(331));var _n=K;for(K|=4,V=i.current;V!==null;){var _o=V,_a=_o.child;if(V.flags&16){var _u=_o.deletions;if(_u!==null){for(var _h=0;_h<_u.length;_h++){var ty=_u[_h];for(V=ty;V!==null;){var oy=V;switch(oy.tag){case 0:case 11:case 15:Qj(8,oy,_o)}var hy=oy.child;if(hy!==null)hy.return=oy,V=hy;else for(;V!==null;){oy=V;var fy=oy.sibling,vy=oy.return;if(Tj(oy),oy===ty){V=null;break}if(fy!==null){fy.return=vy,V=fy;break}V=vy}}}var xy=_o.alternate;if(xy!==null){var wy=xy.child;if(wy!==null){xy.child=null;do{var By=wy.sibling;wy.sibling=null,wy=By}while(wy!==null)}}V=_o}}if(_o.subtreeFlags&2064&&_a!==null)_a.return=_o,V=_a;else t:for(;V!==null;){if(_o=V,_o.flags&2048)switch(_o.tag){case 0:case 11:case 15:Qj(9,_o,_o.return)}var Sy=_o.sibling;if(Sy!==null){Sy.return=_o.return,V=Sy;break t}V=_o.return}}var Ay=i.current;for(V=Ay;V!==null;){_a=V;var Py=_a.child;if(_a.subtreeFlags&2064&&Py!==null)Py.return=_a,V=Py;else t:for(_a=Ay;V!==null;){if(_u=V,_u.flags&2048)try{switch(_u.tag){case 0:case 11:case 15:Rj(9,_u)}}catch($y){W(_u,_u.return,$y)}if(_u===_a){V=null;break t}var Iy=_u.sibling;if(Iy!==null){Iy.return=_u.return,V=Iy;break t}V=_u.return}}if(K=_n,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,i)}catch{}_e=!0}return _e}finally{C=s,pk.transition=o}}return!1}function Yk(i,o,s){o=Ki(s,o),o=Oi(i,o,1),i=dh(i,o,1),o=L(),i!==null&&(Ac(i,1,o),Ek(i,o))}function W(i,o,s){if(i.tag===3)Yk(i,i,s);else for(;o!==null;){if(o.tag===3){Yk(o,i,s);break}else if(o.tag===1){var _e=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof _e.componentDidCatch=="function"&&(Si===null||!Si.has(_e))){i=Ki(s,i),i=Ri(o,i,1),o=dh(o,i,1),i=L(),o!==null&&(Ac(o,1,i),Ek(o,i));break}}o=o.return}}function Ui(i,o,s){var _e=i.pingCache;_e!==null&&_e.delete(o),o=L(),i.pingedLanes|=i.suspendedLanes&s,R===i&&(Z&s)===s&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-gk?Lk(i,0):sk|=s),Ek(i,o)}function Zk(i,o){o===0&&(i.mode&1?(o=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):o=1);var s=L();i=Zg(i,o),i!==null&&(Ac(i,o,s),Ek(i,s))}function vj(i){var o=i.memoizedState,s=0;o!==null&&(s=o.retryLane),Zk(i,s)}function ck(i,o){var s=0;switch(i.tag){case 13:var _e=i.stateNode,_n=i.memoizedState;_n!==null&&(s=_n.retryLane);break;case 19:_e=i.stateNode;break;default:throw Error(p$1(314))}_e!==null&&_e.delete(o),Zk(i,s)}var Wk;Wk=function(i,o,s){if(i!==null)if(i.memoizedProps!==o.pendingProps||Wf.current)Ug=!0;else{if(!(i.lanes&s)&&!(o.flags&128))return Ug=!1,zj(i,o,s);Ug=!!(i.flags&131072)}else Ug=!1,I&&o.flags&1048576&&ug(o,ng,o.index);switch(o.lanes=0,o.tag){case 2:var _e=o.type;jj(i,o),i=o.pendingProps;var _n=Yf(o,H$2.current);Tg(o,s),_n=Xh(null,o,_e,i,_n,s);var _o=bi();return o.flags|=1,typeof _n=="object"&&_n!==null&&typeof _n.render=="function"&&_n.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Zf(_e)?(_o=!0,cg(o)):_o=!1,o.memoizedState=_n.state!==null&&_n.state!==void 0?_n.state:null,ah(o),_n.updater=nh,o.stateNode=_n,_n._reactInternals=o,rh(o,_e,i,s),o=kj(null,o,_e,!0,_o,s)):(o.tag=0,I&&_o&&vg(o),Yi(null,o,_n,s),o=o.child),o;case 16:_e=o.elementType;t:{switch(jj(i,o),i=o.pendingProps,_n=_e._init,_e=_n(_e._payload),o.type=_e,_n=o.tag=$k(_e),i=Lg(_e,i),_n){case 0:o=dj(null,o,_e,i,s);break t;case 1:o=ij(null,o,_e,i,s);break t;case 11:o=Zi(null,o,_e,i,s);break t;case 14:o=aj(null,o,_e,Lg(_e.type,i),s);break t}throw Error(p$1(306,_e,""))}return o;case 0:return _e=o.type,_n=o.pendingProps,_n=o.elementType===_e?_n:Lg(_e,_n),dj(i,o,_e,_n,s);case 1:return _e=o.type,_n=o.pendingProps,_n=o.elementType===_e?_n:Lg(_e,_n),ij(i,o,_e,_n,s);case 3:t:{if(lj(o),i===null)throw Error(p$1(387));_e=o.pendingProps,_o=o.memoizedState,_n=_o.element,bh(i,o),gh(o,_e,null,s);var _a=o.memoizedState;if(_e=_a.element,_o.isDehydrated)if(_o={element:_e,isDehydrated:!1,cache:_a.cache,pendingSuspenseBoundaries:_a.pendingSuspenseBoundaries,transitions:_a.transitions},o.updateQueue.baseState=_o,o.memoizedState=_o,o.flags&256){_n=Ki(Error(p$1(423)),o),o=mj(i,o,_e,s,_n);break t}else if(_e!==_n){_n=Ki(Error(p$1(424)),o),o=mj(i,o,_e,s,_n);break t}else for(yg=Lf(o.stateNode.containerInfo.firstChild),xg=o,I=!0,zg=null,s=Ch(o,null,_e,s),o.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),_e===_n){o=$i(i,o,s);break t}Yi(i,o,_e,s)}o=o.child}return o;case 5:return Kh(o),i===null&&Eg(o),_e=o.type,_n=o.pendingProps,_o=i!==null?i.memoizedProps:null,_a=_n.children,Ef(_e,_n)?_a=null:_o!==null&&Ef(_e,_o)&&(o.flags|=32),hj(i,o),Yi(i,o,_a,s),o.child;case 6:return i===null&&Eg(o),null;case 13:return pj(i,o,s);case 4:return Ih(o,o.stateNode.containerInfo),_e=o.pendingProps,i===null?o.child=Bh(o,null,_e,s):Yi(i,o,_e,s),o.child;case 11:return _e=o.type,_n=o.pendingProps,_n=o.elementType===_e?_n:Lg(_e,_n),Zi(i,o,_e,_n,s);case 7:return Yi(i,o,o.pendingProps,s),o.child;case 8:return Yi(i,o,o.pendingProps.children,s),o.child;case 12:return Yi(i,o,o.pendingProps.children,s),o.child;case 10:t:{if(_e=o.type._context,_n=o.pendingProps,_o=o.memoizedProps,_a=_n.value,G(Mg,_e._currentValue),_e._currentValue=_a,_o!==null)if(He(_o.value,_a)){if(_o.children===_n.children&&!Wf.current){o=$i(i,o,s);break t}}else for(_o=o.child,_o!==null&&(_o.return=o);_o!==null;){var _u=_o.dependencies;if(_u!==null){_a=_o.child;for(var _h=_u.firstContext;_h!==null;){if(_h.context===_e){if(_o.tag===1){_h=ch(-1,s&-s),_h.tag=2;var ty=_o.updateQueue;if(ty!==null){ty=ty.shared;var oy=ty.pending;oy===null?_h.next=_h:(_h.next=oy.next,oy.next=_h),ty.pending=_h}}_o.lanes|=s,_h=_o.alternate,_h!==null&&(_h.lanes|=s),Sg(_o.return,s,o),_u.lanes|=s;break}_h=_h.next}}else if(_o.tag===10)_a=_o.type===o.type?null:_o.child;else if(_o.tag===18){if(_a=_o.return,_a===null)throw Error(p$1(341));_a.lanes|=s,_u=_a.alternate,_u!==null&&(_u.lanes|=s),Sg(_a,s,o),_a=_o.sibling}else _a=_o.child;if(_a!==null)_a.return=_o;else for(_a=_o;_a!==null;){if(_a===o){_a=null;break}if(_o=_a.sibling,_o!==null){_o.return=_a.return,_a=_o;break}_a=_a.return}_o=_a}Yi(i,o,_n.children,s),o=o.child}return o;case 9:return _n=o.type,_e=o.pendingProps.children,Tg(o,s),_n=Vg(_n),_e=_e(_n),o.flags|=1,Yi(i,o,_e,s),o.child;case 14:return _e=o.type,_n=Lg(_e,o.pendingProps),_n=Lg(_e.type,_n),aj(i,o,_e,_n,s);case 15:return cj(i,o,o.type,o.pendingProps,s);case 17:return _e=o.type,_n=o.pendingProps,_n=o.elementType===_e?_n:Lg(_e,_n),jj(i,o),o.tag=1,Zf(_e)?(i=!0,cg(o)):i=!1,Tg(o,s),ph(o,_e,_n),rh(o,_e,_n,s),kj(null,o,_e,!0,i,s);case 19:return yj(i,o,s);case 22:return ej(i,o,s)}throw Error(p$1(156,o.tag))};function Gk(i,o){return ac(i,o)}function al(i,o,s,_e){this.tag=i,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_e,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(i,o,s,_e){return new al(i,o,s,_e)}function bj(i){return i=i.prototype,!(!i||!i.isReactComponent)}function $k(i){if(typeof i=="function")return bj(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Da)return 11;if(i===Ga)return 14}return 2}function wh(i,o){var s=i.alternate;return s===null?(s=Bg(i.tag,o,i.key,i.mode),s.elementType=i.elementType,s.type=i.type,s.stateNode=i.stateNode,s.alternate=i,i.alternate=s):(s.pendingProps=o,s.type=i.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=i.flags&14680064,s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,o=i.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},s.sibling=i.sibling,s.index=i.index,s.ref=i.ref,s}function yh(i,o,s,_e,_n,_o){var _a=2;if(_e=i,typeof i=="function")bj(i)&&(_a=1);else if(typeof i=="string")_a=5;else t:switch(i){case ya:return Ah(s.children,_n,_o,o);case za:_a=8,_n|=8;break;case Aa:return i=Bg(12,s,o,_n|2),i.elementType=Aa,i.lanes=_o,i;case Ea:return i=Bg(13,s,o,_n),i.elementType=Ea,i.lanes=_o,i;case Fa:return i=Bg(19,s,o,_n),i.elementType=Fa,i.lanes=_o,i;case Ia:return qj(s,_n,_o,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ba:_a=10;break t;case Ca:_a=9;break t;case Da:_a=11;break t;case Ga:_a=14;break t;case Ha:_a=16,_e=null;break t}throw Error(p$1(130,i==null?i:typeof i,""))}return o=Bg(_a,s,o,_n),o.elementType=i,o.type=_e,o.lanes=_o,o}function Ah(i,o,s,_e){return i=Bg(7,i,_e,o),i.lanes=s,i}function qj(i,o,s,_e){return i=Bg(22,i,_e,o),i.elementType=Ia,i.lanes=s,i.stateNode={isHidden:!1},i}function xh(i,o,s){return i=Bg(6,i,null,o),i.lanes=s,i}function zh(i,o,s){return o=Bg(4,i.children!==null?i.children:[],i.key,o),o.lanes=s,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function bl(i,o,s,_e,_n){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=_e,this.onRecoverableError=_n,this.mutableSourceEagerHydrationData=null}function cl(i,o,s,_e,_n,_o,_a,_u,_h){return i=new bl(i,o,s,_u,_h),o===1?(o=1,_o===!0&&(o|=8)):o=0,_o=Bg(3,null,null,o),i.current=_o,_o.stateNode=i,_o.memoizedState={element:_e,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(_o),i}function dl(i,o,s){var _e=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:_e==null?null:""+_e,children:i,containerInfo:o,implementation:s}}function el(i){if(!i)return Vf;i=i._reactInternals;t:{if(Vb(i)!==i||i.tag!==1)throw Error(p$1(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(Zf(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error(p$1(171))}if(i.tag===1){var s=i.type;if(Zf(s))return bg(i,s,o)}return o}function fl(i,o,s,_e,_n,_o,_a,_u,_h){return i=cl(s,_e,!0,i,_n,_o,_a,_u,_h),i.context=el(null),s=i.current,_e=L(),_n=lh(s),_o=ch(_e,_n),_o.callback=o??null,dh(s,_o,_n),i.current.lanes=_n,Ac(i,_n,_e),Ek(i,_e),i}function gl(i,o,s,_e){var _n=o.current,_o=L(),_a=lh(_n);return s=el(s),o.context===null?o.context=s:o.pendingContext=s,o=ch(_o,_a),o.payload={element:i},_e=_e===void 0?null:_e,_e!==null&&(o.callback=_e),i=dh(_n,o,_a),i!==null&&(mh(i,_n,_a,_o),eh(i,_n,_a)),_a}function hl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function il(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var s=i.retryLane;i.retryLane=s!==0&&s<o?s:o}}function jl(i,o){il(i,o),(i=i.alternate)&&il(i,o)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(i){console.error(i)};function ml(i){this._internalRoot=i}nl.prototype.render=ml.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(p$1(409));gl(i,o,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Sk(function(){gl(null,i,null,null)}),o[uf]=null}};function nl(i){this._internalRoot=i}nl.prototype.unstable_scheduleHydration=function(i){if(i){var o=Hc();i={blockedOn:null,target:i,priority:o};for(var s=0;s<Qc.length&&o!==0&&o<Qc[s].priority;s++);Qc.splice(s,0,i),s===0&&Vc(i)}};function ol(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function pl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(i,o,s,_e,_n){if(_n){if(typeof _e=="function"){var _o=_e;_e=function(){var ty=hl(_a);_o.call(ty)}}var _a=fl(o,_e,i,0,null,!1,!1,"",ql);return i._reactRootContainer=_a,i[uf]=_a.current,sf(i.nodeType===8?i.parentNode:i),Sk(),_a}for(;_n=i.lastChild;)i.removeChild(_n);if(typeof _e=="function"){var _u=_e;_e=function(){var ty=hl(_h);_u.call(ty)}}var _h=cl(i,0,!1,null,null,!1,!1,"",ql);return i._reactRootContainer=_h,i[uf]=_h.current,sf(i.nodeType===8?i.parentNode:i),Sk(function(){gl(o,_h,s,_e)}),_h}function sl(i,o,s,_e,_n){var _o=s._reactRootContainer;if(_o){var _a=_o;if(typeof _n=="function"){var _u=_n;_n=function(){var _h=hl(_a);_u.call(_h)}}gl(o,_a,i,_n)}else _a=rl(s,o,i,_n,_e);return hl(_a)}Ec=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var s=tc(o.pendingLanes);s!==0&&(Cc(o,s|1),Ek(o,B()),!(K&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var _e=Zg(i,1);if(_e!==null){var _n=L();mh(_e,i,1,_n)}}),jl(i,1)}};Fc=function(i){if(i.tag===13){var o=Zg(i,134217728);if(o!==null){var s=L();mh(o,i,134217728,s)}jl(i,134217728)}};Gc=function(i){if(i.tag===13){var o=lh(i),s=Zg(i,o);if(s!==null){var _e=L();mh(s,i,o,_e)}jl(i,o)}};Hc=function(){return C};Ic=function(i,o){var s=C;try{return C=i,o()}finally{C=s}};yb=function(i,o,s){switch(o){case"input":if(bb(i,s),o=s.name,s.type==="radio"&&o!=null){for(s=i;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<s.length;o++){var _e=s[o];if(_e!==i&&_e.form===i.form){var _n=Db(_e);if(!_n)throw Error(p$1(90));Wa(_e),bb(_e,_n)}}}break;case"textarea":ib(i,s);break;case"select":o=s.value,o!=null&&fb(i,!!s.multiple,o,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zb(i),i===null?null:i.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(i,o){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(o))throw Error(p$1(200));return dl(i,o,null,s)};reactDom_production_min.createRoot=function(i,o){if(!ol(i))throw Error(p$1(299));var s=!1,_e="",_n=ll;return o!=null&&(o.unstable_strictMode===!0&&(s=!0),o.identifierPrefix!==void 0&&(_e=o.identifierPrefix),o.onRecoverableError!==void 0&&(_n=o.onRecoverableError)),o=cl(i,1,!1,null,null,s,!1,_e,_n),i[uf]=o.current,sf(i.nodeType===8?i.parentNode:i),new ml(o)};reactDom_production_min.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(p$1(188)):(i=Object.keys(i).join(","),Error(p$1(268,i)));return i=Zb(o),i=i===null?null:i.stateNode,i};reactDom_production_min.flushSync=function(i){return Sk(i)};reactDom_production_min.hydrate=function(i,o,s){if(!pl(o))throw Error(p$1(200));return sl(null,i,o,!0,s)};reactDom_production_min.hydrateRoot=function(i,o,s){if(!ol(i))throw Error(p$1(405));var _e=s!=null&&s.hydratedSources||null,_n=!1,_o="",_a=ll;if(s!=null&&(s.unstable_strictMode===!0&&(_n=!0),s.identifierPrefix!==void 0&&(_o=s.identifierPrefix),s.onRecoverableError!==void 0&&(_a=s.onRecoverableError)),o=fl(o,null,i,1,s??null,_n,!1,_o,_a),i[uf]=o.current,sf(i),_e)for(i=0;i<_e.length;i++)s=_e[i],_n=s._getVersion,_n=_n(s._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[s,_n]:o.mutableSourceEagerHydrationData.push(s,_n);return new nl(o)};reactDom_production_min.render=function(i,o,s){if(!pl(o))throw Error(p$1(200));return sl(null,i,o,!1,s)};reactDom_production_min.unmountComponentAtNode=function(i){if(!pl(i))throw Error(p$1(40));return i._reactRootContainer?(Sk(function(){sl(null,null,i,!1,function(){i._reactRootContainer=null,i[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(i,o,s,_e){if(!pl(s))throw Error(p$1(200));if(i==null||i._reactInternals===void 0)throw Error(p$1(38));return sl(i,o,s,!1,_e)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(i){console.error(i)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;const common={black:"#000",white:"#fff"},common$1=common,red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},red$1=red,purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},purple$1=purple,blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},blue$1=blue,lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lightBlue$1=lightBlue,green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},green$1=green,orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},orange$1=orange,grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},grey$1=grey;function _extends(){return _extends=Object.assign?Object.assign.bind():function(i){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var _e in s)Object.prototype.hasOwnProperty.call(s,_e)&&(i[_e]=s[_e])}return i},_extends.apply(this,arguments)}function isPlainObject(i){return i!==null&&typeof i=="object"&&i.constructor===Object}function deepClone(i){if(!isPlainObject(i))return i;const o={};return Object.keys(i).forEach(s=>{o[s]=deepClone(i[s])}),o}function deepmerge(i,o,s={clone:!0}){const _e=s.clone?_extends({},i):i;return isPlainObject(i)&&isPlainObject(o)&&Object.keys(o).forEach(_n=>{_n!=="__proto__"&&(isPlainObject(o[_n])&&_n in i&&isPlainObject(i[_n])?_e[_n]=deepmerge(i[_n],o[_n],s):s.clone?_e[_n]=isPlainObject(o[_n])?deepClone(o[_n]):o[_n]:_e[_n]=o[_n])}),_e}function formatMuiErrorMessage(i){let o="https://mui.com/production-error/?code="+i;for(let s=1;s<arguments.length;s+=1)o+="&args[]="+encodeURIComponent(arguments[s]);return"Minified MUI error #"+i+"; visit "+o+" for the full message."}function capitalize(i){if(typeof i!="string")throw new Error(formatMuiErrorMessage(7));return i.charAt(0).toUpperCase()+i.slice(1)}function createChainedFunction(...i){return i.reduce((o,s)=>s==null?o:function(..._n){o.apply(this,_n),s.apply(this,_n)},()=>{})}function debounce(i,o=166){let s;function _e(..._n){const _o=()=>{i.apply(this,_n)};clearTimeout(s),s=setTimeout(_o,o)}return _e.clear=()=>{clearTimeout(s)},_e}function deprecatedPropType(i,o){return()=>null}function isMuiElement(i,o){return reactExports.isValidElement(i)&&o.indexOf(i.type.muiName)!==-1}function ownerDocument(i){return i&&i.ownerDocument||document}function ownerWindow(i){return ownerDocument(i).defaultView||window}function requirePropFactory(i,o){return()=>null}function setRef(i,o){typeof i=="function"?i(o):i&&(i.current=o)}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;let globalId=0;function useGlobalId(i){const[o,s]=reactExports.useState(i),_e=i||o;return reactExports.useEffect(()=>{o==null&&(globalId+=1,s(`mui-${globalId}`))},[o]),_e}const maybeReactUseId=React$1.useId;function useId(i){if(maybeReactUseId!==void 0){const o=maybeReactUseId();return i??o}return useGlobalId(i)}function unsupportedProp(i,o,s,_e,_n){return null}function useControlled({controlled:i,default:o,name:s,state:_e="value"}){const{current:_n}=reactExports.useRef(i!==void 0),[_o,_a]=reactExports.useState(o),_u=_n?i:_o,_h=reactExports.useCallback(ty=>{_n||_a(ty)},[]);return[_u,_h]}function useEventCallback(i){const o=reactExports.useRef(i);return useEnhancedEffect(()=>{o.current=i}),reactExports.useCallback((...s)=>(0,o.current)(...s),[])}function useForkRef(...i){return reactExports.useMemo(()=>i.every(o=>o==null)?null:o=>{i.forEach(s=>{setRef(s,o)})},i)}let hadKeyboardEvent=!0,hadFocusVisibleRecently=!1,hadFocusVisibleRecentlyTimeout;const inputTypesWhitelist={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function focusTriggersKeyboardModality(i){const{type:o,tagName:s}=i;return!!(s==="INPUT"&&inputTypesWhitelist[o]&&!i.readOnly||s==="TEXTAREA"&&!i.readOnly||i.isContentEditable)}function handleKeyDown(i){i.metaKey||i.altKey||i.ctrlKey||(hadKeyboardEvent=!0)}function handlePointerDown(){hadKeyboardEvent=!1}function handleVisibilityChange(){this.visibilityState==="hidden"&&hadFocusVisibleRecently&&(hadKeyboardEvent=!0)}function prepare(i){i.addEventListener("keydown",handleKeyDown,!0),i.addEventListener("mousedown",handlePointerDown,!0),i.addEventListener("pointerdown",handlePointerDown,!0),i.addEventListener("touchstart",handlePointerDown,!0),i.addEventListener("visibilitychange",handleVisibilityChange,!0)}function isFocusVisible(i){const{target:o}=i;try{return o.matches(":focus-visible")}catch{}return hadKeyboardEvent||focusTriggersKeyboardModality(o)}function useIsFocusVisible(){const i=reactExports.useCallback(_n=>{_n!=null&&prepare(_n.ownerDocument)},[]),o=reactExports.useRef(!1);function s(){return o.current?(hadFocusVisibleRecently=!0,window.clearTimeout(hadFocusVisibleRecentlyTimeout),hadFocusVisibleRecentlyTimeout=window.setTimeout(()=>{hadFocusVisibleRecently=!1},100),o.current=!1,!0):!1}function _e(_n){return isFocusVisible(_n)?(o.current=!0,!0):!1}return{isFocusVisibleRef:o,onFocus:_e,onBlur:s,ref:i}}function resolveProps(i,o){const s=_extends({},o);return Object.keys(i).forEach(_e=>{if(_e.toString().match(/^(components|slots)$/))s[_e]=_extends({},i[_e],s[_e]);else if(_e.toString().match(/^(componentsProps|slotProps)$/)){const _n=i[_e]||{},_o=o[_e];s[_e]={},!_o||!Object.keys(_o)?s[_e]=_n:!_n||!Object.keys(_n)?s[_e]=_o:(s[_e]=_extends({},_o),Object.keys(_n).forEach(_a=>{s[_e][_a]=resolveProps(_n[_a],_o[_a])}))}else s[_e]===void 0&&(s[_e]=i[_e])}),s}function composeClasses(i,o,s){const _e={};return Object.keys(i).forEach(_n=>{_e[_n]=i[_n].reduce((_o,_a)=>(_a&&(_o.push(o(_a)),s&&s[_a]&&_o.push(s[_a])),_o),[]).join(" ")}),_e}const defaultGenerator=i=>i,createClassNameGenerator=()=>{let i=defaultGenerator;return{configure(o){i=o},generate(o){return i(o)},reset(){i=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator(),ClassNameGenerator$1=ClassNameGenerator,globalStateClassesMapping={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function generateUtilityClass(i,o,s="Mui"){const _e=globalStateClassesMapping[o];return _e?`${s}-${_e}`:`${ClassNameGenerator$1.generate(i)}-${o}`}function generateUtilityClasses(i,o,s="Mui"){const _e={};return o.forEach(_n=>{_e[_n]=generateUtilityClass(i,_n,s)}),_e}function _objectWithoutPropertiesLoose(i,o){if(i==null)return{};var s={},_e=Object.keys(i),_n,_o;for(_o=0;_o<_e.length;_o++)_n=_e[_o],!(o.indexOf(_n)>=0)&&(s[_n]=i[_n]);return s}function memoize$1(i){var o=Object.create(null);return function(s){return o[s]===void 0&&(o[s]=i(s)),o[s]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(i){return reactPropsRegex.test(i)||i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)<91});function sheetForTag(i){if(i.sheet)return i.sheet;for(var o=0;o<document.styleSheets.length;o++)if(document.styleSheets[o].ownerNode===i)return document.styleSheets[o]}function createStyleElement(i){var o=document.createElement("style");return o.setAttribute("data-emotion",i.key),i.nonce!==void 0&&o.setAttribute("nonce",i.nonce),o.appendChild(document.createTextNode("")),o.setAttribute("data-s",""),o}var StyleSheet=function(){function i(s){var _e=this;this._insertTag=function(_n){var _o;_e.tags.length===0?_e.insertionPoint?_o=_e.insertionPoint.nextSibling:_e.prepend?_o=_e.container.firstChild:_o=_e.before:_o=_e.tags[_e.tags.length-1].nextSibling,_e.container.insertBefore(_n,_o),_e.tags.push(_n)},this.isSpeedy=s.speedy===void 0?!0:s.speedy,this.tags=[],this.ctr=0,this.nonce=s.nonce,this.key=s.key,this.container=s.container,this.prepend=s.prepend,this.insertionPoint=s.insertionPoint,this.before=null}var o=i.prototype;return o.hydrate=function(_e){_e.forEach(this._insertTag)},o.insert=function(_e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var _n=this.tags[this.tags.length-1];if(this.isSpeedy){var _o=sheetForTag(_n);try{_o.insertRule(_e,_o.cssRules.length)}catch{}}else _n.appendChild(document.createTextNode(_e));this.ctr++},o.flush=function(){this.tags.forEach(function(_e){return _e.parentNode&&_e.parentNode.removeChild(_e)}),this.tags=[],this.ctr=0},i}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(i,o){return charat(i,0)^45?(((o<<2^charat(i,0))<<2^charat(i,1))<<2^charat(i,2))<<2^charat(i,3):0}function trim(i){return i.trim()}function match(i,o){return(i=o.exec(i))?i[0]:i}function replace(i,o,s){return i.replace(o,s)}function indexof(i,o){return i.indexOf(o)}function charat(i,o){return i.charCodeAt(o)|0}function substr(i,o,s){return i.slice(o,s)}function strlen(i){return i.length}function sizeof(i){return i.length}function append(i,o){return o.push(i),i}function combine(i,o){return i.map(o).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(i,o,s,_e,_n,_o,_a){return{value:i,root:o,parent:s,type:_e,props:_n,children:_o,line,column,length:_a,return:""}}function copy(i,o){return assign(node("",null,null,"",null,null,0),i,{length:-i.length},o)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(i,o){return substr(characters,i,o)}function token(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(i){return line=column=1,length=strlen(characters=i),position=0,[]}function dealloc(i){return characters="",i}function delimit(i){return trim(slice(position-1,delimiter(i===91?i+2:i===40?i+1:i)))}function whitespace(i){for(;(character=peek())&&character<33;)next();return token(i)>2||token(character)>3?"":" "}function escaping(i,o){for(;--o&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(i,caret()+(o<6&&peek()==32&&next()==32))}function delimiter(i){for(;next();)switch(character){case i:return position;case 34:case 39:i!==34&&i!==39&&delimiter(character);break;case 40:i===41&&delimiter(i);break;case 92:next();break}return position}function commenter(i,o){for(;next()&&i+character!==57;)if(i+character===84&&peek()===47)break;return"/*"+slice(o,position-1)+"*"+from(i===47?i:next())}function identifier(i){for(;!token(peek());)next();return slice(i,position)}function compile(i){return dealloc(parse("",null,null,null,[""],i=alloc(i),0,[0],i))}function parse(i,o,s,_e,_n,_o,_a,_u,_h){for(var ty=0,oy=0,hy=_a,fy=0,vy=0,xy=0,wy=1,By=1,Sy=1,Ay=0,Py="",Iy=_n,$y=_o,Ky=_e,Jy=Py;By;)switch(xy=Ay,Ay=next()){case 40:if(xy!=108&&charat(Jy,hy-1)==58){indexof(Jy+=replace(delimit(Ay),"&","&\f"),"&\f")!=-1&&(Sy=-1);break}case 34:case 39:case 91:Jy+=delimit(Ay);break;case 9:case 10:case 13:case 32:Jy+=whitespace(xy);break;case 92:Jy+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),o,s),_h);break;default:Jy+="/"}break;case 123*wy:_u[ty++]=strlen(Jy)*Sy;case 125*wy:case 59:case 0:switch(Ay){case 0:case 125:By=0;case 59+oy:vy>0&&strlen(Jy)-hy&&append(vy>32?declaration(Jy+";",_e,s,hy-1):declaration(replace(Jy," ","")+";",_e,s,hy-2),_h);break;case 59:Jy+=";";default:if(append(Ky=ruleset(Jy,o,s,ty,oy,_n,_u,Py,Iy=[],$y=[],hy),_o),Ay===123)if(oy===0)parse(Jy,o,Ky,Ky,Iy,_o,hy,_u,$y);else switch(fy===99&&charat(Jy,3)===110?100:fy){case 100:case 109:case 115:parse(i,Ky,Ky,_e&&append(ruleset(i,Ky,Ky,0,0,_n,_u,Py,_n,Iy=[],hy),$y),_n,$y,hy,_u,_e?Iy:$y);break;default:parse(Jy,Ky,Ky,Ky,[""],$y,0,_u,$y)}}ty=oy=vy=0,wy=Sy=1,Py=Jy="",hy=_a;break;case 58:hy=1+strlen(Jy),vy=xy;default:if(wy<1){if(Ay==123)--wy;else if(Ay==125&&wy++==0&&prev()==125)continue}switch(Jy+=from(Ay),Ay*wy){case 38:Sy=oy>0?1:(Jy+="\f",-1);break;case 44:_u[ty++]=(strlen(Jy)-1)*Sy,Sy=1;break;case 64:peek()===45&&(Jy+=delimit(next())),fy=peek(),oy=hy=strlen(Py=Jy+=identifier(caret())),Ay++;break;case 45:xy===45&&strlen(Jy)==2&&(wy=0)}}return _o}function ruleset(i,o,s,_e,_n,_o,_a,_u,_h,ty,oy){for(var hy=_n-1,fy=_n===0?_o:[""],vy=sizeof(fy),xy=0,wy=0,By=0;xy<_e;++xy)for(var Sy=0,Ay=substr(i,hy+1,hy=abs(wy=_a[xy])),Py=i;Sy<vy;++Sy)(Py=trim(wy>0?fy[Sy]+" "+Ay:replace(Ay,/&\f/g,fy[Sy])))&&(_h[By++]=Py);return node(i,o,s,_n===0?RULESET:_u,_h,ty,oy)}function comment(i,o,s){return node(i,o,s,COMMENT,from(char()),substr(i,2,-2),0)}function declaration(i,o,s,_e){return node(i,o,s,DECLARATION,substr(i,0,_e),substr(i,_e+1,-1),_e)}function serialize(i,o){for(var s="",_e=sizeof(i),_n=0;_n<_e;_n++)s+=o(i[_n],_n,i,o)||"";return s}function stringify(i,o,s,_e){switch(i.type){case IMPORT:case DECLARATION:return i.return=i.return||i.value;case COMMENT:return"";case KEYFRAMES:return i.return=i.value+"{"+serialize(i.children,_e)+"}";case RULESET:i.value=i.props.join(",")}return strlen(s=serialize(i.children,_e))?i.return=i.value+"{"+s+"}":""}function middleware(i){var o=sizeof(i);return function(s,_e,_n,_o){for(var _a="",_u=0;_u<o;_u++)_a+=i[_u](s,_e,_n,_o)||"";return _a}}function rulesheet(i){return function(o){o.root||(o=o.return)&&i(o)}}var identifierWithPointTracking=function(o,s,_e){for(var _n=0,_o=0;_n=_o,_o=peek(),_n===38&&_o===12&&(s[_e]=1),!token(_o);)next();return slice(o,position)},toRules=function(o,s){var _e=-1,_n=44;do switch(token(_n)){case 0:_n===38&&peek()===12&&(s[_e]=1),o[_e]+=identifierWithPointTracking(position-1,s,_e);break;case 2:o[_e]+=delimit(_n);break;case 4:if(_n===44){o[++_e]=peek()===58?"&\f":"",s[_e]=o[_e].length;break}default:o[_e]+=from(_n)}while(_n=next());return o},getRules=function(o,s){return dealloc(toRules(alloc(o),s))},fixedElements=new WeakMap,compat=function(o){if(!(o.type!=="rule"||!o.parent||o.length<1)){for(var s=o.value,_e=o.parent,_n=o.column===_e.column&&o.line===_e.line;_e.type!=="rule";)if(_e=_e.parent,!_e)return;if(!(o.props.length===1&&s.charCodeAt(0)!==58&&!fixedElements.get(_e))&&!_n){fixedElements.set(o,!0);for(var _o=[],_a=getRules(s,_o),_u=_e.props,_h=0,ty=0;_h<_a.length;_h++)for(var oy=0;oy<_u.length;oy++,ty++)o.props[ty]=_o[_h]?_a[_h].replace(/&\f/g,_u[oy]):_u[oy]+" "+_a[_h]}}},removeLabel=function(o){if(o.type==="decl"){var s=o.value;s.charCodeAt(0)===108&&s.charCodeAt(2)===98&&(o.return="",o.value="")}};function prefix(i,o){switch(hash(i,o)){case 5103:return WEBKIT+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+i+MOZ+i+MS+i+i;case 6828:case 4268:return WEBKIT+i+MS+i+i;case 6165:return WEBKIT+i+MS+"flex-"+i+i;case 5187:return WEBKIT+i+replace(i,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+i;case 5443:return WEBKIT+i+MS+"flex-item-"+replace(i,/flex-|-self/,"")+i;case 4675:return WEBKIT+i+MS+"flex-line-pack"+replace(i,/align-content|flex-|-self/,"")+i;case 5548:return WEBKIT+i+MS+replace(i,"shrink","negative")+i;case 5292:return WEBKIT+i+MS+replace(i,"basis","preferred-size")+i;case 6060:return WEBKIT+"box-"+replace(i,"-grow","")+WEBKIT+i+MS+replace(i,"grow","positive")+i;case 4554:return WEBKIT+replace(i,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+i;case 6187:return replace(replace(replace(i,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),i,"")+i;case 5495:case 3959:return replace(i,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(i,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+i+i;case 4095:case 3583:case 4068:case 2532:return replace(i,/(.+)-inline(.+)/,WEBKIT+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(i)-1-o>6)switch(charat(i,o+1)){case 109:if(charat(i,o+4)!==45)break;case 102:return replace(i,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(i,o+3)==108?"$3":"$2-$3"))+i;case 115:return~indexof(i,"stretch")?prefix(replace(i,"stretch","fill-available"),o)+i:i}break;case 4949:if(charat(i,o+1)!==115)break;case 6444:switch(charat(i,strlen(i)-3-(~indexof(i,"!important")&&10))){case 107:return replace(i,":",":"+WEBKIT)+i;case 101:return replace(i,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(i,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+i}break;case 5936:switch(charat(i,o+11)){case 114:return WEBKIT+i+MS+replace(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return WEBKIT+i+MS+replace(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return WEBKIT+i+MS+replace(i,/[svh]\w+-[tblr]{2}/,"lr")+i}return WEBKIT+i+MS+i+i}return i}var prefixer=function(o,s,_e,_n){if(o.length>-1&&!o.return)switch(o.type){case DECLARATION:o.return=prefix(o.value,o.length);break;case KEYFRAMES:return serialize([copy(o,{value:replace(o.value,"@","@"+WEBKIT)})],_n);case RULESET:if(o.length)return combine(o.props,function(_o){switch(match(_o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(o,{props:[replace(_o,/:(read-\w+)/,":"+MOZ+"$1")]})],_n);case"::placeholder":return serialize([copy(o,{props:[replace(_o,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(o,{props:[replace(_o,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(o,{props:[replace(_o,/:(plac\w+)/,MS+"input-$1")]})],_n)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(o){var s=o.key;if(s==="css"){var _e=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(_e,function(wy){var By=wy.getAttribute("data-emotion");By.indexOf(" ")!==-1&&(document.head.appendChild(wy),wy.setAttribute("data-s",""))})}var _n=o.stylisPlugins||defaultStylisPlugins,_o={},_a,_u=[];_a=o.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+s+' "]'),function(wy){for(var By=wy.getAttribute("data-emotion").split(" "),Sy=1;Sy<By.length;Sy++)_o[By[Sy]]=!0;_u.push(wy)});var _h,ty=[compat,removeLabel];{var oy,hy=[stringify,rulesheet(function(wy){oy.insert(wy)})],fy=middleware(ty.concat(_n,hy)),vy=function(By){return serialize(compile(By),fy)};_h=function(By,Sy,Ay,Py){oy=Ay,vy(By?By+"{"+Sy.styles+"}":Sy.styles),Py&&(xy.inserted[Sy.name]=!0)}}var xy={key:s,sheet:new StyleSheet({key:s,container:_a,nonce:o.nonce,speedy:o.speedy,prepend:o.prepend,insertionPoint:o.insertionPoint}),nonce:o.nonce,inserted:_o,registered:{},insert:_h};return xy.sheet.hydrate(_u),xy},reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=typeof Symbol=="function"&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r$1=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.block"):60121,w=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y=b?Symbol.for("react.scope"):60119;function z(i){if(typeof i=="object"&&i!==null){var o=i.$$typeof;switch(o){case c:switch(i=i.type,i){case l:case m:case e:case g:case f:case p:return i;default:switch(i=i&&i.$$typeof,i){case k:case n:case t:case r$1:case h:return i;default:return o}}case d:return o}}}function A(i){return z(i)===m}reactIs_production_min.AsyncMode=l;reactIs_production_min.ConcurrentMode=m;reactIs_production_min.ContextConsumer=k;reactIs_production_min.ContextProvider=h;reactIs_production_min.Element=c;reactIs_production_min.ForwardRef=n;reactIs_production_min.Fragment=e;reactIs_production_min.Lazy=t;reactIs_production_min.Memo=r$1;reactIs_production_min.Portal=d;reactIs_production_min.Profiler=g;reactIs_production_min.StrictMode=f;reactIs_production_min.Suspense=p;reactIs_production_min.isAsyncMode=function(i){return A(i)||z(i)===l};reactIs_production_min.isConcurrentMode=A;reactIs_production_min.isContextConsumer=function(i){return z(i)===k};reactIs_production_min.isContextProvider=function(i){return z(i)===h};reactIs_production_min.isElement=function(i){return typeof i=="object"&&i!==null&&i.$$typeof===c};reactIs_production_min.isForwardRef=function(i){return z(i)===n};reactIs_production_min.isFragment=function(i){return z(i)===e};reactIs_production_min.isLazy=function(i){return z(i)===t};reactIs_production_min.isMemo=function(i){return z(i)===r$1};reactIs_production_min.isPortal=function(i){return z(i)===d};reactIs_production_min.isProfiler=function(i){return z(i)===g};reactIs_production_min.isStrictMode=function(i){return z(i)===f};reactIs_production_min.isSuspense=function(i){return z(i)===p};reactIs_production_min.isValidElementType=function(i){return typeof i=="string"||typeof i=="function"||i===e||i===m||i===g||i===f||i===p||i===q||typeof i=="object"&&i!==null&&(i.$$typeof===t||i.$$typeof===r$1||i.$$typeof===h||i.$$typeof===k||i.$$typeof===n||i.$$typeof===w||i.$$typeof===x||i.$$typeof===y||i.$$typeof===v)};reactIs_production_min.typeOf=z;reactIs$1.exports=reactIs_production_min;var reactIsExports=reactIs$1.exports,reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser=!0;function getRegisteredStyles(i,o,s){var _e="";return s.split(" ").forEach(function(_n){i[_n]!==void 0?o.push(i[_n]+";"):_e+=_n+" "}),_e}var registerStyles=function(o,s,_e){var _n=o.key+"-"+s.name;(_e===!1||isBrowser===!1)&&o.registered[_n]===void 0&&(o.registered[_n]=s.styles)},insertStyles=function(o,s,_e){registerStyles(o,s,_e);var _n=o.key+"-"+s.name;if(o.inserted[s.name]===void 0){var _o=s;do o.insert(s===_o?"."+_n:"",_o,o.sheet,!0),_o=_o.next;while(_o!==void 0)}};function murmur2(i){for(var o=0,s,_e=0,_n=i.length;_n>=4;++_e,_n-=4)s=i.charCodeAt(_e)&255|(i.charCodeAt(++_e)&255)<<8|(i.charCodeAt(++_e)&255)<<16|(i.charCodeAt(++_e)&255)<<24,s=(s&65535)*1540483477+((s>>>16)*59797<<16),s^=s>>>24,o=(s&65535)*1540483477+((s>>>16)*59797<<16)^(o&65535)*1540483477+((o>>>16)*59797<<16);switch(_n){case 3:o^=(i.charCodeAt(_e+2)&255)<<16;case 2:o^=(i.charCodeAt(_e+1)&255)<<8;case 1:o^=i.charCodeAt(_e)&255,o=(o&65535)*1540483477+((o>>>16)*59797<<16)}return o^=o>>>13,o=(o&65535)*1540483477+((o>>>16)*59797<<16),((o^o>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(o){return o.charCodeAt(1)===45},isProcessableValue=function(o){return o!=null&&typeof o!="boolean"},processStyleName=memoize$1(function(i){return isCustomProperty(i)?i:i.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(o,s){switch(o){case"animation":case"animationName":if(typeof s=="string")return s.replace(animationRegex,function(_e,_n,_o){return cursor={name:_n,styles:_o,next:cursor},_n})}return unitlessKeys[o]!==1&&!isCustomProperty(o)&&typeof s=="number"&&s!==0?s+"px":s},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(i,o,s){if(s==null)return"";if(s.__emotion_styles!==void 0)return s;switch(typeof s){case"boolean":return"";case"object":{if(s.anim===1)return cursor={name:s.name,styles:s.styles,next:cursor},s.name;if(s.styles!==void 0){var _e=s.next;if(_e!==void 0)for(;_e!==void 0;)cursor={name:_e.name,styles:_e.styles,next:cursor},_e=_e.next;var _n=s.styles+";";return _n}return createStringFromObject(i,o,s)}case"function":{if(i!==void 0){var _o=cursor,_a=s(i);return cursor=_o,handleInterpolation(i,o,_a)}break}}if(o==null)return s;var _u=o[s];return _u!==void 0?_u:s}function createStringFromObject(i,o,s){var _e="";if(Array.isArray(s))for(var _n=0;_n<s.length;_n++)_e+=handleInterpolation(i,o,s[_n])+";";else for(var _o in s){var _a=s[_o];if(typeof _a!="object")o!=null&&o[_a]!==void 0?_e+=_o+"{"+o[_a]+"}":isProcessableValue(_a)&&(_e+=processStyleName(_o)+":"+processStyleValue(_o,_a)+";");else if(Array.isArray(_a)&&typeof _a[0]=="string"&&(o==null||o[_a[0]]===void 0))for(var _u=0;_u<_a.length;_u++)isProcessableValue(_a[_u])&&(_e+=processStyleName(_o)+":"+processStyleValue(_o,_a[_u])+";");else{var _h=handleInterpolation(i,o,_a);switch(_o){case"animation":case"animationName":{_e+=processStyleName(_o)+":"+_h+";";break}default:_e+=_o+"{"+_h+"}"}}}return _e}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function(o,s,_e){if(o.length===1&&typeof o[0]=="object"&&o[0]!==null&&o[0].styles!==void 0)return o[0];var _n=!0,_o="";cursor=void 0;var _a=o[0];_a==null||_a.raw===void 0?(_n=!1,_o+=handleInterpolation(_e,s,_a)):_o+=_a[0];for(var _u=1;_u<o.length;_u++)_o+=handleInterpolation(_e,s,o[_u]),_n&&(_o+=_a[_u]);labelPattern.lastIndex=0;for(var _h="",ty;(ty=labelPattern.exec(_o))!==null;)_h+="-"+ty[1];var oy=murmur2(_o)+_h;return{name:oy,styles:_o,next:cursor}},syncFallback=function(o){return o()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(o){return reactExports.forwardRef(function(s,_e){var _n=reactExports.useContext(EmotionCacheContext);return o(s,_n,_e)})},ThemeContext$2=reactExports.createContext({});function css(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return serializeStyles(o)}var keyframes=function(){var o=css.apply(void 0,arguments),s="animation-"+o.name;return{name:s,styles:"@keyframes "+s+"{"+o.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(o){return o!=="theme"},getDefaultShouldForwardProp=function(o){return typeof o=="string"&&o.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(o,s,_e){var _n;if(s){var _o=s.shouldForwardProp;_n=o.__emotion_forwardProp&&_o?function(_a){return o.__emotion_forwardProp(_a)&&_o(_a)}:_o}return typeof _n!="function"&&_e&&(_n=o.__emotion_forwardProp),_n},Insertion=function(o){var s=o.cache,_e=o.serialized,_n=o.isStringTag;return registerStyles(s,_e,_n),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(s,_e,_n)}),null},createStyled$1=function i(o,s){var _e=o.__emotion_real===o,_n=_e&&o.__emotion_base||o,_o,_a;s!==void 0&&(_o=s.label,_a=s.target);var _u=composeShouldForwardProps(o,s,_e),_h=_u||getDefaultShouldForwardProp(_n),ty=!_h("as");return function(){var oy=arguments,hy=_e&&o.__emotion_styles!==void 0?o.__emotion_styles.slice(0):[];if(_o!==void 0&&hy.push("label:"+_o+";"),oy[0]==null||oy[0].raw===void 0)hy.push.apply(hy,oy);else{hy.push(oy[0][0]);for(var fy=oy.length,vy=1;vy<fy;vy++)hy.push(oy[vy],oy[0][vy])}var xy=withEmotionCache(function(wy,By,Sy){var Ay=ty&&wy.as||_n,Py="",Iy=[],$y=wy;if(wy.theme==null){$y={};for(var Ky in wy)$y[Ky]=wy[Ky];$y.theme=reactExports.useContext(ThemeContext$2)}typeof wy.className=="string"?Py=getRegisteredStyles(By.registered,Iy,wy.className):wy.className!=null&&(Py=wy.className+" ");var Jy=serializeStyles(hy.concat(Iy),By.registered,$y);Py+=By.key+"-"+Jy.name,_a!==void 0&&(Py+=" "+_a);var i0=ty&&_u===void 0?getDefaultShouldForwardProp(Ay):_h,k0={};for(var g0 in wy)ty&&g0==="as"||i0(g0)&&(k0[g0]=wy[g0]);return k0.className=Py,k0.ref=Sy,reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:By,serialized:Jy,isStringTag:typeof Ay=="string"}),reactExports.createElement(Ay,k0))});return xy.displayName=_o!==void 0?_o:"Styled("+(typeof _n=="string"?_n:_n.displayName||_n.name||"Component")+")",xy.defaultProps=o.defaultProps,xy.__emotion_real=xy,xy.__emotion_base=_n,xy.__emotion_styles=hy,xy.__emotion_forwardProp=_u,Object.defineProperty(xy,"toString",{value:function(){return"."+_a}}),xy.withComponent=function(wy,By){return i(wy,_extends({},s,By,{shouldForwardProp:composeShouldForwardProps(xy,By,!0)})).apply(void 0,hy)},xy}};const createStyled$2=createStyled$1;var tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$2.bind();tags.forEach(function(i){newStyled[i]=newStyled(i)});const emStyled=newStyled;/**
 * @mui/styled-engine v5.11.11
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function styled$2(i,o){return emStyled(i,o)}const internal_processStyles=(i,o)=>{Array.isArray(i.__emotion_styles)&&(i.__emotion_styles=o(i.__emotion_styles))};function merge(i,o){return o?deepmerge(i,o,{clone:!1}):i}const values$1={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:i=>`@media (min-width:${values$1[i]}px)`};function handleBreakpoints(i,o,s){const _e=i.theme||{};if(Array.isArray(o)){const _o=_e.breakpoints||defaultBreakpoints;return o.reduce((_a,_u,_h)=>(_a[_o.up(_o.keys[_h])]=s(o[_h]),_a),{})}if(typeof o=="object"){const _o=_e.breakpoints||defaultBreakpoints;return Object.keys(o).reduce((_a,_u)=>{if(Object.keys(_o.values||values$1).indexOf(_u)!==-1){const _h=_o.up(_u);_a[_h]=s(o[_u],_u)}else{const _h=_u;_a[_h]=o[_h]}return _a},{})}return s(o)}function createEmptyBreakpointObject(i={}){var o;return((o=i.keys)==null?void 0:o.reduce((_e,_n)=>{const _o=i.up(_n);return _e[_o]={},_e},{}))||{}}function removeUnusedBreakpoints(i,o){return i.reduce((s,_e)=>{const _n=s[_e];return(!_n||Object.keys(_n).length===0)&&delete s[_e],s},o)}function computeBreakpointsBase(i,o){if(typeof i!="object")return{};const s={},_e=Object.keys(o);return Array.isArray(i)?_e.forEach((_n,_o)=>{_o<i.length&&(s[_n]=!0)}):_e.forEach(_n=>{i[_n]!=null&&(s[_n]=!0)}),s}function resolveBreakpointValues({values:i,breakpoints:o,base:s}){const _e=s||computeBreakpointsBase(i,o),_n=Object.keys(_e);if(_n.length===0)return i;let _o;return _n.reduce((_a,_u,_h)=>(Array.isArray(i)?(_a[_u]=i[_h]!=null?i[_h]:i[_o],_o=_h):typeof i=="object"?(_a[_u]=i[_u]!=null?i[_u]:i[_o],_o=_u):_a[_u]=i,_a),{})}function getPath(i,o,s=!0){if(!o||typeof o!="string")return null;if(i&&i.vars&&s){const _e=`vars.${o}`.split(".").reduce((_n,_o)=>_n&&_n[_o]?_n[_o]:null,i);if(_e!=null)return _e}return o.split(".").reduce((_e,_n)=>_e&&_e[_n]!=null?_e[_n]:null,i)}function getStyleValue(i,o,s,_e=s){let _n;return typeof i=="function"?_n=i(s):Array.isArray(i)?_n=i[s]||_e:_n=getPath(i,s)||_e,o&&(_n=o(_n,_e,i)),_n}function style$1(i){const{prop:o,cssProperty:s=i.prop,themeKey:_e,transform:_n}=i,_o=_a=>{if(_a[o]==null)return null;const _u=_a[o],_h=_a.theme,ty=getPath(_h,_e)||{};return handleBreakpoints(_a,_u,hy=>{let fy=getStyleValue(ty,_n,hy);return hy===fy&&typeof hy=="string"&&(fy=getStyleValue(ty,_n,`${o}${hy==="default"?"":capitalize(hy)}`,hy)),s===!1?fy:{[s]:fy}})};return _o.propTypes={},_o.filterProps=[o],_o}function compose(...i){const o=i.reduce((_e,_n)=>(_n.filterProps.forEach(_o=>{_e[_o]=_n}),_e),{}),s=_e=>Object.keys(_e).reduce((_n,_o)=>o[_o]?merge(_n,o[_o](_e)):_n,{});return s.propTypes={},s.filterProps=i.reduce((_e,_n)=>_e.concat(_n.filterProps),[]),s}function memoize(i){const o={};return s=>(o[s]===void 0&&(o[s]=i(s)),o[s])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(i=>{if(i.length>2)if(aliases[i])i=aliases[i];else return[i];const[o,s]=i.split(""),_e=properties[o],_n=directions[s]||"";return Array.isArray(_n)?_n.map(_o=>_e+_o):[_e+_n]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(i,o,s,_e){var _n;const _o=(_n=getPath(i,o,!1))!=null?_n:s;return typeof _o=="number"?_a=>typeof _a=="string"?_a:_o*_a:Array.isArray(_o)?_a=>typeof _a=="string"?_a:_o[_a]:typeof _o=="function"?_o:()=>{}}function createUnarySpacing(i){return createUnaryUnit(i,"spacing",8)}function getValue(i,o){if(typeof o=="string"||o==null)return o;const s=Math.abs(o),_e=i(s);return o>=0?_e:typeof _e=="number"?-_e:`-${_e}`}function getStyleFromPropValue(i,o){return s=>i.reduce((_e,_n)=>(_e[_n]=getValue(o,s),_e),{})}function resolveCssProperty(i,o,s,_e){if(o.indexOf(s)===-1)return null;const _n=getCssProperties(s),_o=getStyleFromPropValue(_n,_e),_a=i[s];return handleBreakpoints(i,_a,_o)}function style(i,o){const s=createUnarySpacing(i.theme);return Object.keys(i).map(_e=>resolveCssProperty(i,o,_e,s)).reduce(merge,{})}function margin(i){return style(i,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(i){return style(i,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function borderTransform(i){return typeof i!="number"?i:`${i}px solid`}const border=style$1({prop:"border",themeKey:"borders",transform:borderTransform}),borderTop=style$1({prop:"borderTop",themeKey:"borders",transform:borderTransform}),borderRight=style$1({prop:"borderRight",themeKey:"borders",transform:borderTransform}),borderBottom=style$1({prop:"borderBottom",themeKey:"borders",transform:borderTransform}),borderLeft=style$1({prop:"borderLeft",themeKey:"borders",transform:borderTransform}),borderColor=style$1({prop:"borderColor",themeKey:"palette"}),borderTopColor=style$1({prop:"borderTopColor",themeKey:"palette"}),borderRightColor=style$1({prop:"borderRightColor",themeKey:"palette"}),borderBottomColor=style$1({prop:"borderBottomColor",themeKey:"palette"}),borderLeftColor=style$1({prop:"borderLeftColor",themeKey:"palette"}),borderRadius=i=>{if(i.borderRadius!==void 0&&i.borderRadius!==null){const o=createUnaryUnit(i.theme,"shape.borderRadius",4),s=_e=>({borderRadius:getValue(o,_e)});return handleBreakpoints(i,i.borderRadius,s)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius);const gap=i=>{if(i.gap!==void 0&&i.gap!==null){const o=createUnaryUnit(i.theme,"spacing",8),s=_e=>({gap:getValue(o,_e)});return handleBreakpoints(i,i.gap,s)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=i=>{if(i.columnGap!==void 0&&i.columnGap!==null){const o=createUnaryUnit(i.theme,"spacing",8),s=_e=>({columnGap:getValue(o,_e)});return handleBreakpoints(i,i.columnGap,s)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=i=>{if(i.rowGap!==void 0&&i.rowGap!==null){const o=createUnaryUnit(i.theme,"spacing",8),s=_e=>({rowGap:getValue(o,_e)});return handleBreakpoints(i,i.rowGap,s)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$1({prop:"gridColumn"}),gridRow=style$1({prop:"gridRow"}),gridAutoFlow=style$1({prop:"gridAutoFlow"}),gridAutoColumns=style$1({prop:"gridAutoColumns"}),gridAutoRows=style$1({prop:"gridAutoRows"}),gridTemplateColumns=style$1({prop:"gridTemplateColumns"}),gridTemplateRows=style$1({prop:"gridTemplateRows"}),gridTemplateAreas=style$1({prop:"gridTemplateAreas"}),gridArea=style$1({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(i,o){return o==="grey"?o:i}const color=style$1({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$1({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$1({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color,bgcolor,backgroundColor);function sizingTransform(i){return i<=1&&i!==0?`${i*100}%`:i}const width=style$1({prop:"width",transform:sizingTransform}),maxWidth=i=>{if(i.maxWidth!==void 0&&i.maxWidth!==null){const o=s=>{var _e,_n,_o;return{maxWidth:((_e=i.theme)==null||(_n=_e.breakpoints)==null||(_o=_n.values)==null?void 0:_o[s])||values$1[s]||sizingTransform(s)}};return handleBreakpoints(i,i.maxWidth,o)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$1({prop:"minWidth",transform:sizingTransform}),height=style$1({prop:"height",transform:sizingTransform}),maxHeight=style$1({prop:"maxHeight",transform:sizingTransform}),minHeight=style$1({prop:"minHeight",transform:sizingTransform});style$1({prop:"size",cssProperty:"width",transform:sizingTransform});style$1({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$1({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:i=>({"@media print":{display:i}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},defaultSxConfig$1=defaultSxConfig;function objectsHaveSameKeys(...i){const o=i.reduce((_e,_n)=>_e.concat(Object.keys(_n)),[]),s=new Set(o);return i.every(_e=>s.size===Object.keys(_e).length)}function callIfFn(i,o){return typeof i=="function"?i(o):i}function unstable_createStyleFunctionSx(){function i(s,_e,_n,_o){const _a={[s]:_e,theme:_n},_u=_o[s];if(!_u)return{[s]:_e};const{cssProperty:_h=s,themeKey:ty,transform:oy,style:hy}=_u;if(_e==null)return null;const fy=getPath(_n,ty)||{};return hy?hy(_a):handleBreakpoints(_a,_e,xy=>{let wy=getStyleValue(fy,oy,xy);return xy===wy&&typeof xy=="string"&&(wy=getStyleValue(fy,oy,`${s}${xy==="default"?"":capitalize(xy)}`,xy)),_h===!1?wy:{[_h]:wy}})}function o(s){var _e;const{sx:_n,theme:_o={}}=s||{};if(!_n)return null;const _a=(_e=_o.unstable_sxConfig)!=null?_e:defaultSxConfig$1;function _u(_h){let ty=_h;if(typeof _h=="function")ty=_h(_o);else if(typeof _h!="object")return _h;if(!ty)return null;const oy=createEmptyBreakpointObject(_o.breakpoints),hy=Object.keys(oy);let fy=oy;return Object.keys(ty).forEach(vy=>{const xy=callIfFn(ty[vy],_o);if(xy!=null)if(typeof xy=="object")if(_a[vy])fy=merge(fy,i(vy,xy,_o,_a));else{const wy=handleBreakpoints({theme:_o},xy,By=>({[vy]:By}));objectsHaveSameKeys(wy,xy)?fy[vy]=o({sx:xy,theme:_o}):fy=merge(fy,wy)}else fy=merge(fy,i(vy,xy,_o,_a))}),removeUnusedBreakpoints(hy,fy)}return Array.isArray(_n)?_n.map(_u):_u(_n)}return o}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const styleFunctionSx$1=styleFunctionSx,_excluded$l=["sx"],splitProps=i=>{var o,s;const _e={systemProps:{},otherProps:{}},_n=(o=i==null||(s=i.theme)==null?void 0:s.unstable_sxConfig)!=null?o:defaultSxConfig$1;return Object.keys(i).forEach(_o=>{_n[_o]?_e.systemProps[_o]=i[_o]:_e.otherProps[_o]=i[_o]}),_e};function extendSxProp(i){const{sx:o}=i,s=_objectWithoutPropertiesLoose(i,_excluded$l),{systemProps:_e,otherProps:_n}=splitProps(s);let _o;return Array.isArray(o)?_o=[_e,...o]:typeof o=="function"?_o=(..._a)=>{const _u=o(..._a);return isPlainObject(_u)?_extends({},_e,_u):_e}:_o=_extends({},_e,o),_extends({},_n,{sx:_o})}function r(i){var o,s,_e="";if(typeof i=="string"||typeof i=="number")_e+=i;else if(typeof i=="object")if(Array.isArray(i))for(o=0;o<i.length;o++)i[o]&&(s=r(i[o]))&&(_e&&(_e+=" "),_e+=s);else for(o in i)i[o]&&(_e&&(_e+=" "),_e+=o);return _e}function clsx(){for(var i,o,s=0,_e="";s<arguments.length;)(i=arguments[s++])&&(o=r(i))&&(_e&&(_e+=" "),_e+=o);return _e}const _excluded$k=["values","unit","step"],sortBreakpointsValues=i=>{const o=Object.keys(i).map(s=>({key:s,val:i[s]}))||[];return o.sort((s,_e)=>s.val-_e.val),o.reduce((s,_e)=>_extends({},s,{[_e.key]:_e.val}),{})};function createBreakpoints(i){const{values:o={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:s="px",step:_e=5}=i,_n=_objectWithoutPropertiesLoose(i,_excluded$k),_o=sortBreakpointsValues(o),_a=Object.keys(_o);function _u(fy){return`@media (min-width:${typeof o[fy]=="number"?o[fy]:fy}${s})`}function _h(fy){return`@media (max-width:${(typeof o[fy]=="number"?o[fy]:fy)-_e/100}${s})`}function ty(fy,vy){const xy=_a.indexOf(vy);return`@media (min-width:${typeof o[fy]=="number"?o[fy]:fy}${s}) and (max-width:${(xy!==-1&&typeof o[_a[xy]]=="number"?o[_a[xy]]:vy)-_e/100}${s})`}function oy(fy){return _a.indexOf(fy)+1<_a.length?ty(fy,_a[_a.indexOf(fy)+1]):_u(fy)}function hy(fy){const vy=_a.indexOf(fy);return vy===0?_u(_a[1]):vy===_a.length-1?_h(_a[vy]):ty(fy,_a[_a.indexOf(fy)+1]).replace("@media","@media not all and")}return _extends({keys:_a,values:_o,up:_u,down:_h,between:ty,only:oy,not:hy,unit:s},_n)}const shape={borderRadius:4},shape$1=shape;function createSpacing(i=8){if(i.mui)return i;const o=createUnarySpacing({spacing:i}),s=(..._e)=>(_e.length===0?[1]:_e).map(_o=>{const _a=o(_o);return typeof _a=="number"?`${_a}px`:_a}).join(" ");return s.mui=!0,s}const _excluded$j=["breakpoints","palette","spacing","shape"];function createTheme$1(i={},...o){const{breakpoints:s={},palette:_e={},spacing:_n,shape:_o={}}=i,_a=_objectWithoutPropertiesLoose(i,_excluded$j),_u=createBreakpoints(s),_h=createSpacing(_n);let ty=deepmerge({breakpoints:_u,direction:"ltr",components:{},palette:_extends({mode:"light"},_e),spacing:_h,shape:_extends({},shape$1,_o)},_a);return ty=o.reduce((oy,hy)=>deepmerge(oy,hy),ty),ty.unstable_sxConfig=_extends({},defaultSxConfig$1,_a==null?void 0:_a.unstable_sxConfig),ty.unstable_sx=function(hy){return styleFunctionSx$1({sx:hy,theme:this})},ty}const ThemeContext=reactExports.createContext(null),ThemeContext$1=ThemeContext;function useTheme$3(){return reactExports.useContext(ThemeContext$1)}function isObjectEmpty(i){return Object.keys(i).length===0}function useTheme$2(i=null){const o=useTheme$3();return!o||isObjectEmpty(o)?i:o}const systemDefaultTheme$1=createTheme$1();function useTheme$1(i=systemDefaultTheme$1){return useTheme$2(i)}const _excluded$i=["className","component"];function createBox(i={}){const{defaultTheme:o,defaultClassName:s="MuiBox-root",generateClassName:_e}=i,_n=styled$2("div",{shouldForwardProp:_a=>_a!=="theme"&&_a!=="sx"&&_a!=="as"})(styleFunctionSx$1);return reactExports.forwardRef(function(_u,_h){const ty=useTheme$1(o),oy=extendSxProp(_u),{className:hy,component:fy="div"}=oy,vy=_objectWithoutPropertiesLoose(oy,_excluded$i);return jsxRuntimeExports.jsx(_n,_extends({as:fy,ref:_h,className:clsx(hy,_e?_e(s):s),theme:ty},vy))})}const _excluded$h=["variant"];function isEmpty$1(i){return i.length===0}function propsToClassKey(i){const{variant:o}=i,s=_objectWithoutPropertiesLoose(i,_excluded$h);let _e=o||"";return Object.keys(s).sort().forEach(_n=>{_n==="color"?_e+=isEmpty$1(_e)?i[_n]:capitalize(i[_n]):_e+=`${isEmpty$1(_e)?_n:capitalize(_n)}${capitalize(i[_n].toString())}`}),_e}const _excluded$g=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],_excluded2=["theme"],_excluded3=["theme"];function isEmpty(i){return Object.keys(i).length===0}function isStringTag(i){return typeof i=="string"&&i.charCodeAt(0)>96}const getStyleOverrides=(i,o)=>o.components&&o.components[i]&&o.components[i].styleOverrides?o.components[i].styleOverrides:null,getVariantStyles=(i,o)=>{let s=[];o&&o.components&&o.components[i]&&o.components[i].variants&&(s=o.components[i].variants);const _e={};return s.forEach(_n=>{const _o=propsToClassKey(_n.props);_e[_o]=_n.style}),_e},variantsResolver=(i,o,s,_e)=>{var _n,_o;const{ownerState:_a={}}=i,_u=[],_h=s==null||(_n=s.components)==null||(_o=_n[_e])==null?void 0:_o.variants;return _h&&_h.forEach(ty=>{let oy=!0;Object.keys(ty.props).forEach(hy=>{_a[hy]!==ty.props[hy]&&i[hy]!==ty.props[hy]&&(oy=!1)}),oy&&_u.push(o[propsToClassKey(ty.props)])}),_u};function shouldForwardProp(i){return i!=="ownerState"&&i!=="theme"&&i!=="sx"&&i!=="as"}const systemDefaultTheme=createTheme$1();function createStyled(i={}){const{defaultTheme:o=systemDefaultTheme,rootShouldForwardProp:s=shouldForwardProp,slotShouldForwardProp:_e=shouldForwardProp}=i,_n=_o=>{const _a=isEmpty(_o.theme)?o:_o.theme;return styleFunctionSx$1(_extends({},_o,{theme:_a}))};return _n.__mui_systemSx=!0,(_o,_a={})=>{internal_processStyles(_o,Py=>Py.filter(Iy=>!(Iy!=null&&Iy.__mui_systemSx)));const{name:_u,slot:_h,skipVariantsResolver:ty,skipSx:oy,overridesResolver:hy}=_a,fy=_objectWithoutPropertiesLoose(_a,_excluded$g),vy=ty!==void 0?ty:_h&&_h!=="Root"||!1,xy=oy||!1;let wy,By=shouldForwardProp;_h==="Root"?By=s:_h?By=_e:isStringTag(_o)&&(By=void 0);const Sy=styled$2(_o,_extends({shouldForwardProp:By,label:wy},fy)),Ay=(Py,...Iy)=>{const $y=Iy?Iy.map(k0=>typeof k0=="function"&&k0.__emotion_real!==k0?g0=>{let{theme:j0}=g0,V0=_objectWithoutPropertiesLoose(g0,_excluded2);return k0(_extends({theme:isEmpty(j0)?o:j0},V0))}:k0):[];let Ky=Py;_u&&hy&&$y.push(k0=>{const g0=isEmpty(k0.theme)?o:k0.theme,j0=getStyleOverrides(_u,g0);if(j0){const V0={};return Object.entries(j0).forEach(([k1,h1])=>{V0[k1]=typeof h1=="function"?h1(_extends({},k0,{theme:g0})):h1}),hy(k0,V0)}return null}),_u&&!vy&&$y.push(k0=>{const g0=isEmpty(k0.theme)?o:k0.theme;return variantsResolver(k0,getVariantStyles(_u,g0),g0,_u)}),xy||$y.push(_n);const Jy=$y.length-Iy.length;if(Array.isArray(Py)&&Jy>0){const k0=new Array(Jy).fill("");Ky=[...Py,...k0],Ky.raw=[...Py.raw,...k0]}else typeof Py=="function"&&Py.__emotion_real!==Py&&(Ky=k0=>{let{theme:g0}=k0,j0=_objectWithoutPropertiesLoose(k0,_excluded3);return Py(_extends({theme:isEmpty(g0)?o:g0},j0))});return Sy(Ky,...$y)};return Sy.withConfig&&(Ay.withConfig=Sy.withConfig),Ay}}const styled$1=createStyled();function getThemeProps(i){const{theme:o,name:s,props:_e}=i;return!o||!o.components||!o.components[s]||!o.components[s].defaultProps?_e:resolveProps(o.components[s].defaultProps,_e)}function useThemeProps$1({props:i,name:o,defaultTheme:s}){const _e=useTheme$1(s);return getThemeProps({theme:_e,name:o,props:i})}function clamp(i,o=0,s=1){return Math.min(Math.max(o,i),s)}function hexToRgb(i){i=i.slice(1);const o=new RegExp(`.{1,${i.length>=6?2:1}}`,"g");let s=i.match(o);return s&&s[0].length===1&&(s=s.map(_e=>_e+_e)),s?`rgb${s.length===4?"a":""}(${s.map((_e,_n)=>_n<3?parseInt(_e,16):Math.round(parseInt(_e,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(i){if(i.type)return i;if(i.charAt(0)==="#")return decomposeColor(hexToRgb(i));const o=i.indexOf("("),s=i.substring(0,o);if(["rgb","rgba","hsl","hsla","color"].indexOf(s)===-1)throw new Error(formatMuiErrorMessage(9,i));let _e=i.substring(o+1,i.length-1),_n;if(s==="color"){if(_e=_e.split(" "),_n=_e.shift(),_e.length===4&&_e[3].charAt(0)==="/"&&(_e[3]=_e[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(_n)===-1)throw new Error(formatMuiErrorMessage(10,_n))}else _e=_e.split(",");return _e=_e.map(_o=>parseFloat(_o)),{type:s,values:_e,colorSpace:_n}}function recomposeColor(i){const{type:o,colorSpace:s}=i;let{values:_e}=i;return o.indexOf("rgb")!==-1?_e=_e.map((_n,_o)=>_o<3?parseInt(_n,10):_n):o.indexOf("hsl")!==-1&&(_e[1]=`${_e[1]}%`,_e[2]=`${_e[2]}%`),o.indexOf("color")!==-1?_e=`${s} ${_e.join(" ")}`:_e=`${_e.join(", ")}`,`${o}(${_e})`}function hslToRgb(i){i=decomposeColor(i);const{values:o}=i,s=o[0],_e=o[1]/100,_n=o[2]/100,_o=_e*Math.min(_n,1-_n),_a=(ty,oy=(ty+s/30)%12)=>_n-_o*Math.max(Math.min(oy-3,9-oy,1),-1);let _u="rgb";const _h=[Math.round(_a(0)*255),Math.round(_a(8)*255),Math.round(_a(4)*255)];return i.type==="hsla"&&(_u+="a",_h.push(o[3])),recomposeColor({type:_u,values:_h})}function getLuminance(i){i=decomposeColor(i);let o=i.type==="hsl"||i.type==="hsla"?decomposeColor(hslToRgb(i)).values:i.values;return o=o.map(s=>(i.type!=="color"&&(s/=255),s<=.03928?s/12.92:((s+.055)/1.055)**2.4)),Number((.2126*o[0]+.7152*o[1]+.0722*o[2]).toFixed(3))}function getContrastRatio(i,o){const s=getLuminance(i),_e=getLuminance(o);return(Math.max(s,_e)+.05)/(Math.min(s,_e)+.05)}function alpha(i,o){return i=decomposeColor(i),o=clamp(o),(i.type==="rgb"||i.type==="hsl")&&(i.type+="a"),i.type==="color"?i.values[3]=`/${o}`:i.values[3]=o,recomposeColor(i)}function darken(i,o){if(i=decomposeColor(i),o=clamp(o),i.type.indexOf("hsl")!==-1)i.values[2]*=1-o;else if(i.type.indexOf("rgb")!==-1||i.type.indexOf("color")!==-1)for(let s=0;s<3;s+=1)i.values[s]*=1-o;return recomposeColor(i)}function lighten(i,o){if(i=decomposeColor(i),o=clamp(o),i.type.indexOf("hsl")!==-1)i.values[2]+=(100-i.values[2])*o;else if(i.type.indexOf("rgb")!==-1)for(let s=0;s<3;s+=1)i.values[s]+=(255-i.values[s])*o;else if(i.type.indexOf("color")!==-1)for(let s=0;s<3;s+=1)i.values[s]+=(1-i.values[s])*o;return recomposeColor(i)}const _excluded$f=["className","component","disableGutters","fixed","maxWidth","classes"],defaultTheme$3=createTheme$1(),defaultCreateStyledComponent=styled$1("div",{name:"MuiContainer",slot:"Root",overridesResolver:(i,o)=>{const{ownerState:s}=i;return[o.root,o[`maxWidth${capitalize(String(s.maxWidth))}`],s.fixed&&o.fixed,s.disableGutters&&o.disableGutters]}}),useThemePropsDefault=i=>useThemeProps$1({props:i,name:"MuiContainer",defaultTheme:defaultTheme$3}),useUtilityClasses$a=(i,o)=>{const s=_h=>generateUtilityClass(o,_h),{classes:_e,fixed:_n,disableGutters:_o,maxWidth:_a}=i,_u={root:["root",_a&&`maxWidth${capitalize(String(_a))}`,_n&&"fixed",_o&&"disableGutters"]};return composeClasses(_u,s,_e)};function createContainer(i={}){const{createStyledComponent:o=defaultCreateStyledComponent,useThemeProps:s=useThemePropsDefault,componentName:_e="MuiContainer"}=i,_n=o(({theme:_a,ownerState:_u})=>_extends({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!_u.disableGutters&&{paddingLeft:_a.spacing(2),paddingRight:_a.spacing(2),[_a.breakpoints.up("sm")]:{paddingLeft:_a.spacing(3),paddingRight:_a.spacing(3)}}),({theme:_a,ownerState:_u})=>_u.fixed&&Object.keys(_a.breakpoints.values).reduce((_h,ty)=>{const oy=ty,hy=_a.breakpoints.values[oy];return hy!==0&&(_h[_a.breakpoints.up(oy)]={maxWidth:`${hy}${_a.breakpoints.unit}`}),_h},{}),({theme:_a,ownerState:_u})=>_extends({},_u.maxWidth==="xs"&&{[_a.breakpoints.up("xs")]:{maxWidth:Math.max(_a.breakpoints.values.xs,444)}},_u.maxWidth&&_u.maxWidth!=="xs"&&{[_a.breakpoints.up(_u.maxWidth)]:{maxWidth:`${_a.breakpoints.values[_u.maxWidth]}${_a.breakpoints.unit}`}}));return reactExports.forwardRef(function(_u,_h){const ty=s(_u),{className:oy,component:hy="div",disableGutters:fy=!1,fixed:vy=!1,maxWidth:xy="lg"}=ty,wy=_objectWithoutPropertiesLoose(ty,_excluded$f),By=_extends({},ty,{component:hy,disableGutters:fy,fixed:vy,maxWidth:xy}),Sy=useUtilityClasses$a(By,_e);return jsxRuntimeExports.jsx(_n,_extends({as:hy,ownerState:By,className:clsx(Sy.root,oy),ref:_h},wy))})}function createMixins(i,o){return _extends({toolbar:{minHeight:56,[i.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[i.up("sm")]:{minHeight:64}}},o)}const _excluded$e=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$1.white,default:common$1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(i,o,s,_e){const _n=_e.light||_e,_o=_e.dark||_e*1.5;i[o]||(i.hasOwnProperty(s)?i[o]=i[s]:o==="light"?i.light=lighten(i.main,_n):o==="dark"&&(i.dark=darken(i.main,_o)))}function getDefaultPrimary(i="light"){return i==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(i="light"){return i==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(i="light"){return i==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(i="light"){return i==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(i="light"){return i==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(i="light"){return i==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(i){const{mode:o="light",contrastThreshold:s=3,tonalOffset:_e=.2}=i,_n=_objectWithoutPropertiesLoose(i,_excluded$e),_o=i.primary||getDefaultPrimary(o),_a=i.secondary||getDefaultSecondary(o),_u=i.error||getDefaultError(o),_h=i.info||getDefaultInfo(o),ty=i.success||getDefaultSuccess(o),oy=i.warning||getDefaultWarning(o);function hy(wy){return getContrastRatio(wy,dark.text.primary)>=s?dark.text.primary:light.text.primary}const fy=({color:wy,name:By,mainShade:Sy=500,lightShade:Ay=300,darkShade:Py=700})=>{if(wy=_extends({},wy),!wy.main&&wy[Sy]&&(wy.main=wy[Sy]),!wy.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,By?` (${By})`:"",Sy));if(typeof wy.main!="string")throw new Error(formatMuiErrorMessage(12,By?` (${By})`:"",JSON.stringify(wy.main)));return addLightOrDark(wy,"light",Ay,_e),addLightOrDark(wy,"dark",Py,_e),wy.contrastText||(wy.contrastText=hy(wy.main)),wy},vy={dark,light};return deepmerge(_extends({common:_extends({},common$1),mode:o,primary:fy({color:_o,name:"primary"}),secondary:fy({color:_a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:fy({color:_u,name:"error"}),warning:fy({color:oy,name:"warning"}),info:fy({color:_h,name:"info"}),success:fy({color:ty,name:"success"}),grey:grey$1,contrastThreshold:s,getContrastText:hy,augmentColor:fy,tonalOffset:_e},vy[o]),_n)}const _excluded$d=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round(i){return Math.round(i*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(i,o){const s=typeof o=="function"?o(i):o,{fontFamily:_e=defaultFontFamily,fontSize:_n=14,fontWeightLight:_o=300,fontWeightRegular:_a=400,fontWeightMedium:_u=500,fontWeightBold:_h=700,htmlFontSize:ty=16,allVariants:oy,pxToRem:hy}=s,fy=_objectWithoutPropertiesLoose(s,_excluded$d),vy=_n/14,xy=hy||(Sy=>`${Sy/ty*vy}rem`),wy=(Sy,Ay,Py,Iy,$y)=>_extends({fontFamily:_e,fontWeight:Sy,fontSize:xy(Ay),lineHeight:Py},_e===defaultFontFamily?{letterSpacing:`${round(Iy/Ay)}em`}:{},$y,oy),By={h1:wy(_o,96,1.167,-1.5),h2:wy(_o,60,1.2,-.5),h3:wy(_a,48,1.167,0),h4:wy(_a,34,1.235,.25),h5:wy(_a,24,1.334,0),h6:wy(_u,20,1.6,.15),subtitle1:wy(_a,16,1.75,.15),subtitle2:wy(_u,14,1.57,.1),body1:wy(_a,16,1.5,.15),body2:wy(_a,14,1.43,.15),button:wy(_u,14,1.75,.4,caseAllCaps),caption:wy(_a,12,1.66,.4),overline:wy(_a,12,2.66,1,caseAllCaps)};return deepmerge(_extends({htmlFontSize:ty,pxToRem:xy,fontFamily:_e,fontSize:_n,fontWeightLight:_o,fontWeightRegular:_a,fontWeightMedium:_u,fontWeightBold:_h},By),fy,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...i){return[`${i[0]}px ${i[1]}px ${i[2]}px ${i[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${i[4]}px ${i[5]}px ${i[6]}px ${i[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${i[8]}px ${i[9]}px ${i[10]}px ${i[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],_excluded$c=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(i){return`${Math.round(i)}ms`}function getAutoHeightDuration(i){if(!i)return 0;const o=i/36;return Math.round((4+15*o**.25+o/5)*10)}function createTransitions(i){const o=_extends({},easing,i.easing),s=_extends({},duration,i.duration);return _extends({getAutoHeightDuration,create:(_n=["all"],_o={})=>{const{duration:_a=s.standard,easing:_u=o.easeInOut,delay:_h=0}=_o;return _objectWithoutPropertiesLoose(_o,_excluded$c),(Array.isArray(_n)?_n:[_n]).map(ty=>`${ty} ${typeof _a=="string"?_a:formatMs(_a)} ${_u} ${typeof _h=="string"?_h:formatMs(_h)}`).join(",")}},i,{easing:o,duration:s})}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},zIndex$1=zIndex,_excluded$b=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(i={},...o){const{mixins:s={},palette:_e={},transitions:_n={},typography:_o={}}=i,_a=_objectWithoutPropertiesLoose(i,_excluded$b);if(i.vars)throw new Error(formatMuiErrorMessage(18));const _u=createPalette(_e),_h=createTheme$1(i);let ty=deepmerge(_h,{mixins:createMixins(_h.breakpoints,s),palette:_u,shadows:shadows.slice(),typography:createTypography(_u,_o),transitions:createTransitions(_n),zIndex:_extends({},zIndex$1)});return ty=deepmerge(ty,_a),ty=o.reduce((oy,hy)=>deepmerge(oy,hy),ty),ty.unstable_sxConfig=_extends({},defaultSxConfig$1,_a==null?void 0:_a.unstable_sxConfig),ty.unstable_sx=function(hy){return styleFunctionSx$1({sx:hy,theme:this})},ty}const defaultTheme$1=createTheme(),defaultTheme$2=defaultTheme$1;function useTheme(){return useTheme$1(defaultTheme$2)}function useThemeProps({props:i,name:o}){return useThemeProps$1({props:i,name:o,defaultTheme:defaultTheme$2})}const rootShouldForwardProp=i=>shouldForwardProp(i)&&i!=="classes",styled=createStyled({defaultTheme:defaultTheme$2,rootShouldForwardProp}),getOverlayAlpha=i=>{let o;return i<1?o=5.11916*i**2:o=4.5*Math.log(i+1)+2,(o/100).toFixed(2)};function getSvgIconUtilityClass(i){return generateUtilityClass("MuiSvgIcon",i)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded$a=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],useUtilityClasses$9=i=>{const{color:o,fontSize:s,classes:_e}=i,_n={root:["root",o!=="inherit"&&`color${capitalize(o)}`,`fontSize${capitalize(s)}`]};return composeClasses(_n,getSvgIconUtilityClass,_e)},SvgIconRoot=styled("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(i,o)=>{const{ownerState:s}=i;return[o.root,s.color!=="inherit"&&o[`color${capitalize(s.color)}`],o[`fontSize${capitalize(s.fontSize)}`]]}})(({theme:i,ownerState:o})=>{var s,_e,_n,_o,_a,_u,_h,ty,oy,hy,fy,vy,xy,wy,By,Sy,Ay;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(s=i.transitions)==null||(_e=s.create)==null?void 0:_e.call(s,"fill",{duration:(_n=i.transitions)==null||(_o=_n.duration)==null?void 0:_o.shorter}),fontSize:{inherit:"inherit",small:((_a=i.typography)==null||(_u=_a.pxToRem)==null?void 0:_u.call(_a,20))||"1.25rem",medium:((_h=i.typography)==null||(ty=_h.pxToRem)==null?void 0:ty.call(_h,24))||"1.5rem",large:((oy=i.typography)==null||(hy=oy.pxToRem)==null?void 0:hy.call(oy,35))||"2.1875rem"}[o.fontSize],color:(fy=(vy=(i.vars||i).palette)==null||(xy=vy[o.color])==null?void 0:xy.main)!=null?fy:{action:(wy=(i.vars||i).palette)==null||(By=wy.action)==null?void 0:By.active,disabled:(Sy=(i.vars||i).palette)==null||(Ay=Sy.action)==null?void 0:Ay.disabled,inherit:void 0}[o.color]}}),SvgIcon=reactExports.forwardRef(function(o,s){const _e=useThemeProps({props:o,name:"MuiSvgIcon"}),{children:_n,className:_o,color:_a="inherit",component:_u="svg",fontSize:_h="medium",htmlColor:ty,inheritViewBox:oy=!1,titleAccess:hy,viewBox:fy="0 0 24 24"}=_e,vy=_objectWithoutPropertiesLoose(_e,_excluded$a),xy=_extends({},_e,{color:_a,component:_u,fontSize:_h,instanceFontSize:o.fontSize,inheritViewBox:oy,viewBox:fy}),wy={};oy||(wy.viewBox=fy);const By=useUtilityClasses$9(xy);return jsxRuntimeExports.jsxs(SvgIconRoot,_extends({as:_u,className:clsx(By.root,_o),focusable:"false",color:ty,"aria-hidden":hy?void 0:!0,role:hy?"img":void 0,ref:s},wy,vy,{ownerState:xy,children:[_n,hy?jsxRuntimeExports.jsx("title",{children:hy}):null]}))});SvgIcon.muiName="SvgIcon";function createSvgIcon$1(i,o){function s(_e,_n){return jsxRuntimeExports.jsx(SvgIcon,_extends({"data-testid":`${o}Icon`,ref:_n},_e,{children:i}))}return s.muiName=SvgIcon.muiName,reactExports.memo(reactExports.forwardRef(s))}const unstable_ClassNameGenerator={configure:i=>{ClassNameGenerator$1.configure(i)}},utils=Object.freeze(Object.defineProperty({__proto__:null,capitalize,createChainedFunction,createSvgIcon:createSvgIcon$1,debounce,deprecatedPropType,isMuiElement,ownerDocument,ownerWindow,requirePropFactory,setRef,unstable_ClassNameGenerator,unstable_useEnhancedEffect:useEnhancedEffect,unstable_useId:useId,unsupportedProp,useControlled,useEventCallback,useForkRef,useIsFocusVisible},Symbol.toStringTag,{value:"Module"}));function _setPrototypeOf(i,o){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_e,_n){return _e.__proto__=_n,_e},_setPrototypeOf(i,o)}function _inheritsLoose(i,o){i.prototype=Object.create(o.prototype),i.prototype.constructor=i,_setPrototypeOf(i,o)}const TransitionGroupContext=React.createContext(null);function _assertThisInitialized(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function getChildMapping(i,o){var s=function(_o){return o&&reactExports.isValidElement(_o)?o(_o):_o},_e=Object.create(null);return i&&reactExports.Children.map(i,function(_n){return _n}).forEach(function(_n){_e[_n.key]=s(_n)}),_e}function mergeChildMappings(i,o){i=i||{},o=o||{};function s(oy){return oy in o?o[oy]:i[oy]}var _e=Object.create(null),_n=[];for(var _o in i)_o in o?_n.length&&(_e[_o]=_n,_n=[]):_n.push(_o);var _a,_u={};for(var _h in o){if(_e[_h])for(_a=0;_a<_e[_h].length;_a++){var ty=_e[_h][_a];_u[_e[_h][_a]]=s(ty)}_u[_h]=s(_h)}for(_a=0;_a<_n.length;_a++)_u[_n[_a]]=s(_n[_a]);return _u}function getProp(i,o,s){return s[o]!=null?s[o]:i.props[o]}function getInitialChildMapping(i,o){return getChildMapping(i.children,function(s){return reactExports.cloneElement(s,{onExited:o.bind(null,s),in:!0,appear:getProp(s,"appear",i),enter:getProp(s,"enter",i),exit:getProp(s,"exit",i)})})}function getNextChildMapping(i,o,s){var _e=getChildMapping(i.children),_n=mergeChildMappings(o,_e);return Object.keys(_n).forEach(function(_o){var _a=_n[_o];if(reactExports.isValidElement(_a)){var _u=_o in o,_h=_o in _e,ty=o[_o],oy=reactExports.isValidElement(ty)&&!ty.props.in;_h&&(!_u||oy)?_n[_o]=reactExports.cloneElement(_a,{onExited:s.bind(null,_a),in:!0,exit:getProp(_a,"exit",i),enter:getProp(_a,"enter",i)}):!_h&&_u&&!oy?_n[_o]=reactExports.cloneElement(_a,{in:!1}):_h&&_u&&reactExports.isValidElement(ty)&&(_n[_o]=reactExports.cloneElement(_a,{onExited:s.bind(null,_a),in:ty.props.in,exit:getProp(_a,"exit",i),enter:getProp(_a,"enter",i)}))}}),_n}var values=Object.values||function(i){return Object.keys(i).map(function(o){return i[o]})},defaultProps={component:"div",childFactory:function(o){return o}},TransitionGroup=function(i){_inheritsLoose(o,i);function o(_e,_n){var _o;_o=i.call(this,_e,_n)||this;var _a=_o.handleExited.bind(_assertThisInitialized(_o));return _o.state={contextValue:{isMounting:!0},handleExited:_a,firstRender:!0},_o}var s=o.prototype;return s.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},s.componentWillUnmount=function(){this.mounted=!1},o.getDerivedStateFromProps=function(_n,_o){var _a=_o.children,_u=_o.handleExited,_h=_o.firstRender;return{children:_h?getInitialChildMapping(_n,_u):getNextChildMapping(_n,_a,_u),firstRender:!1}},s.handleExited=function(_n,_o){var _a=getChildMapping(this.props.children);_n.key in _a||(_n.props.onExited&&_n.props.onExited(_o),this.mounted&&this.setState(function(_u){var _h=_extends({},_u.children);return delete _h[_n.key],{children:_h}}))},s.render=function(){var _n=this.props,_o=_n.component,_a=_n.childFactory,_u=_objectWithoutPropertiesLoose(_n,["component","childFactory"]),_h=this.state.contextValue,ty=values(this.state.children).map(_a);return delete _u.appear,delete _u.enter,delete _u.exit,_o===null?React.createElement(TransitionGroupContext.Provider,{value:_h},ty):React.createElement(TransitionGroupContext.Provider,{value:_h},React.createElement(_o,_u,ty))},o}(React.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;const TransitionGroup$1=TransitionGroup;function getPaperUtilityClass(i){return generateUtilityClass("MuiPaper",i)}generateUtilityClasses("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const _excluded$9=["className","component","elevation","square","variant"],useUtilityClasses$8=i=>{const{square:o,elevation:s,variant:_e,classes:_n}=i,_o={root:["root",_e,!o&&"rounded",_e==="elevation"&&`elevation${s}`]};return composeClasses(_o,getPaperUtilityClass,_n)},PaperRoot=styled("div",{name:"MuiPaper",slot:"Root",overridesResolver:(i,o)=>{const{ownerState:s}=i;return[o.root,o[s.variant],!s.square&&o.rounded,s.variant==="elevation"&&o[`elevation${s.elevation}`]]}})(({theme:i,ownerState:o})=>{var s;return _extends({backgroundColor:(i.vars||i).palette.background.paper,color:(i.vars||i).palette.text.primary,transition:i.transitions.create("box-shadow")},!o.square&&{borderRadius:i.shape.borderRadius},o.variant==="outlined"&&{border:`1px solid ${(i.vars||i).palette.divider}`},o.variant==="elevation"&&_extends({boxShadow:(i.vars||i).shadows[o.elevation]},!i.vars&&i.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${alpha("#fff",getOverlayAlpha(o.elevation))}, ${alpha("#fff",getOverlayAlpha(o.elevation))})`},i.vars&&{backgroundImage:(s=i.vars.overlays)==null?void 0:s[o.elevation]}))}),Paper=reactExports.forwardRef(function(o,s){const _e=useThemeProps({props:o,name:"MuiPaper"}),{className:_n,component:_o="div",elevation:_a=1,square:_u=!1,variant:_h="elevation"}=_e,ty=_objectWithoutPropertiesLoose(_e,_excluded$9),oy=_extends({},_e,{component:_o,elevation:_a,square:_u,variant:_h}),hy=useUtilityClasses$8(oy);return jsxRuntimeExports.jsx(PaperRoot,_extends({as:_o,ownerState:oy,className:clsx(hy.root,_n),ref:s},ty))}),Paper$1=Paper;function Ripple(i){const{className:o,classes:s,pulsate:_e=!1,rippleX:_n,rippleY:_o,rippleSize:_a,in:_u,onExited:_h,timeout:ty}=i,[oy,hy]=reactExports.useState(!1),fy=clsx(o,s.ripple,s.rippleVisible,_e&&s.ripplePulsate),vy={width:_a,height:_a,top:-(_a/2)+_o,left:-(_a/2)+_n},xy=clsx(s.child,oy&&s.childLeaving,_e&&s.childPulsate);return!_u&&!oy&&hy(!0),reactExports.useEffect(()=>{if(!_u&&_h!=null){const wy=setTimeout(_h,ty);return()=>{clearTimeout(wy)}}},[_h,_u,ty]),jsxRuntimeExports.jsx("span",{className:fy,style:vy,children:jsxRuntimeExports.jsx("span",{className:xy})})}const touchRippleClasses=generateUtilityClasses("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),_excluded$8=["center","classes","className"];let _=i=>i,_t,_t2,_t3,_t4;const DURATION=550,DELAY_RIPPLE=80,enterKeyframe=keyframes(_t||(_t=_`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),exitKeyframe=keyframes(_t2||(_t2=_`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),pulsateKeyframe=keyframes(_t3||(_t3=_`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),TouchRippleRoot=styled("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TouchRippleRipple=styled(Ripple,{name:"MuiTouchRipple",slot:"Ripple"})(_t4||(_t4=_`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),touchRippleClasses.rippleVisible,enterKeyframe,DURATION,({theme:i})=>i.transitions.easing.easeInOut,touchRippleClasses.ripplePulsate,({theme:i})=>i.transitions.duration.shorter,touchRippleClasses.child,touchRippleClasses.childLeaving,exitKeyframe,DURATION,({theme:i})=>i.transitions.easing.easeInOut,touchRippleClasses.childPulsate,pulsateKeyframe,({theme:i})=>i.transitions.easing.easeInOut),TouchRipple=reactExports.forwardRef(function(o,s){const _e=useThemeProps({props:o,name:"MuiTouchRipple"}),{center:_n=!1,classes:_o={},className:_a}=_e,_u=_objectWithoutPropertiesLoose(_e,_excluded$8),[_h,ty]=reactExports.useState([]),oy=reactExports.useRef(0),hy=reactExports.useRef(null);reactExports.useEffect(()=>{hy.current&&(hy.current(),hy.current=null)},[_h]);const fy=reactExports.useRef(!1),vy=reactExports.useRef(null),xy=reactExports.useRef(null),wy=reactExports.useRef(null);reactExports.useEffect(()=>()=>{clearTimeout(vy.current)},[]);const By=reactExports.useCallback(Iy=>{const{pulsate:$y,rippleX:Ky,rippleY:Jy,rippleSize:i0,cb:k0}=Iy;ty(g0=>[...g0,jsxRuntimeExports.jsx(TouchRippleRipple,{classes:{ripple:clsx(_o.ripple,touchRippleClasses.ripple),rippleVisible:clsx(_o.rippleVisible,touchRippleClasses.rippleVisible),ripplePulsate:clsx(_o.ripplePulsate,touchRippleClasses.ripplePulsate),child:clsx(_o.child,touchRippleClasses.child),childLeaving:clsx(_o.childLeaving,touchRippleClasses.childLeaving),childPulsate:clsx(_o.childPulsate,touchRippleClasses.childPulsate)},timeout:DURATION,pulsate:$y,rippleX:Ky,rippleY:Jy,rippleSize:i0},oy.current)]),oy.current+=1,hy.current=k0},[_o]),Sy=reactExports.useCallback((Iy={},$y={},Ky=()=>{})=>{const{pulsate:Jy=!1,center:i0=_n||$y.pulsate,fakeElement:k0=!1}=$y;if((Iy==null?void 0:Iy.type)==="mousedown"&&fy.current){fy.current=!1;return}(Iy==null?void 0:Iy.type)==="touchstart"&&(fy.current=!0);const g0=k0?null:wy.current,j0=g0?g0.getBoundingClientRect():{width:0,height:0,left:0,top:0};let V0,k1,h1;if(i0||Iy===void 0||Iy.clientX===0&&Iy.clientY===0||!Iy.clientX&&!Iy.touches)V0=Math.round(j0.width/2),k1=Math.round(j0.height/2);else{const{clientX:r_,clientY:K1}=Iy.touches&&Iy.touches.length>0?Iy.touches[0]:Iy;V0=Math.round(r_-j0.left),k1=Math.round(K1-j0.top)}if(i0)h1=Math.sqrt((2*j0.width**2+j0.height**2)/3),h1%2===0&&(h1+=1);else{const r_=Math.max(Math.abs((g0?g0.clientWidth:0)-V0),V0)*2+2,K1=Math.max(Math.abs((g0?g0.clientHeight:0)-k1),k1)*2+2;h1=Math.sqrt(r_**2+K1**2)}Iy!=null&&Iy.touches?xy.current===null&&(xy.current=()=>{By({pulsate:Jy,rippleX:V0,rippleY:k1,rippleSize:h1,cb:Ky})},vy.current=setTimeout(()=>{xy.current&&(xy.current(),xy.current=null)},DELAY_RIPPLE)):By({pulsate:Jy,rippleX:V0,rippleY:k1,rippleSize:h1,cb:Ky})},[_n,By]),Ay=reactExports.useCallback(()=>{Sy({},{pulsate:!0})},[Sy]),Py=reactExports.useCallback((Iy,$y)=>{if(clearTimeout(vy.current),(Iy==null?void 0:Iy.type)==="touchend"&&xy.current){xy.current(),xy.current=null,vy.current=setTimeout(()=>{Py(Iy,$y)});return}xy.current=null,ty(Ky=>Ky.length>0?Ky.slice(1):Ky),hy.current=$y},[]);return reactExports.useImperativeHandle(s,()=>({pulsate:Ay,start:Sy,stop:Py}),[Ay,Sy,Py]),jsxRuntimeExports.jsx(TouchRippleRoot,_extends({className:clsx(touchRippleClasses.root,_o.root,_a),ref:wy},_u,{children:jsxRuntimeExports.jsx(TransitionGroup$1,{component:null,exit:!0,children:_h})}))}),TouchRipple$1=TouchRipple;function getButtonBaseUtilityClass(i){return generateUtilityClass("MuiButtonBase",i)}const buttonBaseClasses=generateUtilityClasses("MuiButtonBase",["root","disabled","focusVisible"]),_excluded$7=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],useUtilityClasses$7=i=>{const{disabled:o,focusVisible:s,focusVisibleClassName:_e,classes:_n}=i,_a=composeClasses({root:["root",o&&"disabled",s&&"focusVisible"]},getButtonBaseUtilityClass,_n);return s&&_e&&(_a.root+=` ${_e}`),_a},ButtonBaseRoot=styled("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(i,o)=>o.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${buttonBaseClasses.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ButtonBase=reactExports.forwardRef(function(o,s){const _e=useThemeProps({props:o,name:"MuiButtonBase"}),{action:_n,centerRipple:_o=!1,children:_a,className:_u,component:_h="button",disabled:ty=!1,disableRipple:oy=!1,disableTouchRipple:hy=!1,focusRipple:fy=!1,LinkComponent:vy="a",onBlur:xy,onClick:wy,onContextMenu:By,onDragLeave:Sy,onFocus:Ay,onFocusVisible:Py,onKeyDown:Iy,onKeyUp:$y,onMouseDown:Ky,onMouseLeave:Jy,onMouseUp:i0,onTouchEnd:k0,onTouchMove:g0,onTouchStart:j0,tabIndex:V0=0,TouchRippleProps:k1,touchRippleRef:h1,type:r_}=_e,K1=_objectWithoutPropertiesLoose(_e,_excluded$7),h_=reactExports.useRef(null),_0=reactExports.useRef(null),Y0=useForkRef(_0,h1),{isFocusVisibleRef:N0,onFocus:a1,onBlur:C1,ref:n_}=useIsFocusVisible(),[G1,G_]=reactExports.useState(!1);ty&&G1&&G_(!1),reactExports.useImperativeHandle(_n,()=>({focusVisible:()=>{G_(!0),h_.current.focus()}}),[]);const[p_,M_]=reactExports.useState(!1);reactExports.useEffect(()=>{M_(!0)},[]);const ex=p_&&!oy&&!ty;reactExports.useEffect(()=>{G1&&fy&&!oy&&p_&&_0.current.pulsate()},[oy,fy,G1,p_]);function f_(K0,ix,D2=hy){return useEventCallback(i2=>(ix&&ix(i2),!D2&&_0.current&&_0.current[K0](i2),!0))}const rx=f_("start",Ky),N2=f_("stop",By),t2=f_("stop",Sy),nx=f_("stop",i0),qx=f_("stop",K0=>{G1&&K0.preventDefault(),Jy&&Jy(K0)}),kE=f_("start",j0),e2=f_("stop",k0),a_=f_("stop",g0),TE=f_("stop",K0=>{C1(K0),N0.current===!1&&G_(!1),xy&&xy(K0)},!1),I_=useEventCallback(K0=>{h_.current||(h_.current=K0.currentTarget),a1(K0),N0.current===!0&&(G_(!0),Py&&Py(K0)),Ay&&Ay(K0)}),hx=()=>{const K0=h_.current;return _h&&_h!=="button"&&!(K0.tagName==="A"&&K0.href)},Ix=reactExports.useRef(!1),r2=useEventCallback(K0=>{fy&&!Ix.current&&G1&&_0.current&&K0.key===" "&&(Ix.current=!0,_0.current.stop(K0,()=>{_0.current.start(K0)})),K0.target===K0.currentTarget&&hx()&&K0.key===" "&&K0.preventDefault(),Iy&&Iy(K0),K0.target===K0.currentTarget&&hx()&&K0.key==="Enter"&&!ty&&(K0.preventDefault(),wy&&wy(K0))}),n2=useEventCallback(K0=>{fy&&K0.key===" "&&_0.current&&G1&&!K0.defaultPrevented&&(Ix.current=!1,_0.current.stop(K0,()=>{_0.current.pulsate(K0)})),$y&&$y(K0),wy&&K0.target===K0.currentTarget&&hx()&&K0.key===" "&&!K0.defaultPrevented&&wy(K0)});let v1=_h;v1==="button"&&(K1.href||K1.to)&&(v1=vy);const px={};v1==="button"?(px.type=r_===void 0?"button":r_,px.disabled=ty):(!K1.href&&!K1.to&&(px.role="button"),ty&&(px["aria-disabled"]=ty));const j2=useForkRef(s,n_,h_),fx=_extends({},_e,{centerRipple:_o,component:_h,disabled:ty,disableRipple:oy,disableTouchRipple:hy,focusRipple:fy,tabIndex:V0,focusVisible:G1}),W_=useUtilityClasses$7(fx);return jsxRuntimeExports.jsxs(ButtonBaseRoot,_extends({as:v1,className:clsx(W_.root,_u),ownerState:fx,onBlur:TE,onClick:wy,onContextMenu:N2,onFocus:I_,onKeyDown:r2,onKeyUp:n2,onMouseDown:rx,onMouseLeave:qx,onMouseUp:nx,onDragLeave:t2,onTouchEnd:e2,onTouchMove:a_,onTouchStart:kE,ref:j2,tabIndex:ty?-1:V0,type:r_},px,K1,{children:[_a,ex?jsxRuntimeExports.jsx(TouchRipple$1,_extends({ref:Y0,center:_o},k1)):null]}))}),ButtonBase$1=ButtonBase;function getTypographyUtilityClass(i){return generateUtilityClass("MuiTypography",i)}generateUtilityClasses("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const _excluded$6=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],useUtilityClasses$6=i=>{const{align:o,gutterBottom:s,noWrap:_e,paragraph:_n,variant:_o,classes:_a}=i,_u={root:["root",_o,i.align!=="inherit"&&`align${capitalize(o)}`,s&&"gutterBottom",_e&&"noWrap",_n&&"paragraph"]};return composeClasses(_u,getTypographyUtilityClass,_a)},TypographyRoot=styled("span",{name:"MuiTypography",slot:"Root",overridesResolver:(i,o)=>{const{ownerState:s}=i;return[o.root,s.variant&&o[s.variant],s.align!=="inherit"&&o[`align${capitalize(s.align)}`],s.noWrap&&o.noWrap,s.gutterBottom&&o.gutterBottom,s.paragraph&&o.paragraph]}})(({theme:i,ownerState:o})=>_extends({margin:0},o.variant&&i.typography[o.variant],o.align!=="inherit"&&{textAlign:o.align},o.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},o.gutterBottom&&{marginBottom:"0.35em"},o.paragraph&&{marginBottom:16})),defaultVariantMapping={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},colorTransformations={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},transformDeprecatedColors=i=>colorTransformations[i]||i,Typography=reactExports.forwardRef(function(o,s){const _e=useThemeProps({props:o,name:"MuiTypography"}),_n=transformDeprecatedColors(_e.color),_o=extendSxProp(_extends({},_e,{color:_n})),{align:_a="inherit",className:_u,component:_h,gutterBottom:ty=!1,noWrap:oy=!1,paragraph:hy=!1,variant:fy="body1",variantMapping:vy=defaultVariantMapping}=_o,xy=_objectWithoutPropertiesLoose(_o,_excluded$6),wy=_extends({},_o,{align:_a,color:_n,className:_u,component:_h,gutterBottom:ty,noWrap:oy,paragraph:hy,variant:fy,variantMapping:vy}),By=_h||(hy?"p":vy[fy]||defaultVariantMapping[fy])||"span",Sy=useUtilityClasses$6(wy);return jsxRuntimeExports.jsx(TypographyRoot,_extends({as:By,ref:s,ownerState:wy,className:clsx(Sy.root,_u)},xy))}),Typography$1=Typography,defaultTheme=createTheme(),Box=createBox({defaultTheme,defaultClassName:"MuiBox-root",generateClassName:ClassNameGenerator$1.generate}),Box$1=Box;function getButtonUtilityClass(i){return generateUtilityClass("MuiButton",i)}const buttonClasses=generateUtilityClasses("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),buttonClasses$1=buttonClasses,ButtonGroupContext=reactExports.createContext({}),ButtonGroupContext$1=ButtonGroupContext,_excluded$5=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],useUtilityClasses$5=i=>{const{color:o,disableElevation:s,fullWidth:_e,size:_n,variant:_o,classes:_a}=i,_u={root:["root",_o,`${_o}${capitalize(o)}`,`size${capitalize(_n)}`,`${_o}Size${capitalize(_n)}`,o==="inherit"&&"colorInherit",s&&"disableElevation",_e&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${capitalize(_n)}`],endIcon:["endIcon",`iconSize${capitalize(_n)}`]},_h=composeClasses(_u,getButtonUtilityClass,_a);return _extends({},_a,_h)},commonIconStyles=i=>_extends({},i.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},i.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},i.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),ButtonRoot=styled(ButtonBase$1,{shouldForwardProp:i=>rootShouldForwardProp(i)||i==="classes",name:"MuiButton",slot:"Root",overridesResolver:(i,o)=>{const{ownerState:s}=i;return[o.root,o[s.variant],o[`${s.variant}${capitalize(s.color)}`],o[`size${capitalize(s.size)}`],o[`${s.variant}Size${capitalize(s.size)}`],s.color==="inherit"&&o.colorInherit,s.disableElevation&&o.disableElevation,s.fullWidth&&o.fullWidth]}})(({theme:i,ownerState:o})=>{var s,_e;return _extends({},i.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),"&:hover":_extends({textDecoration:"none",backgroundColor:i.vars?`rgba(${i.vars.palette.text.primaryChannel} / ${i.vars.palette.action.hoverOpacity})`:alpha(i.palette.text.primary,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},o.variant==="text"&&o.color!=="inherit"&&{backgroundColor:i.vars?`rgba(${i.vars.palette[o.color].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:alpha(i.palette[o.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},o.variant==="outlined"&&o.color!=="inherit"&&{border:`1px solid ${(i.vars||i).palette[o.color].main}`,backgroundColor:i.vars?`rgba(${i.vars.palette[o.color].mainChannel} / ${i.vars.palette.action.hoverOpacity})`:alpha(i.palette[o.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},o.variant==="contained"&&{backgroundColor:(i.vars||i).palette.grey.A100,boxShadow:(i.vars||i).shadows[4],"@media (hover: none)":{boxShadow:(i.vars||i).shadows[2],backgroundColor:(i.vars||i).palette.grey[300]}},o.variant==="contained"&&o.color!=="inherit"&&{backgroundColor:(i.vars||i).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(i.vars||i).palette[o.color].main}}),"&:active":_extends({},o.variant==="contained"&&{boxShadow:(i.vars||i).shadows[8]}),[`&.${buttonClasses$1.focusVisible}`]:_extends({},o.variant==="contained"&&{boxShadow:(i.vars||i).shadows[6]}),[`&.${buttonClasses$1.disabled}`]:_extends({color:(i.vars||i).palette.action.disabled},o.variant==="outlined"&&{border:`1px solid ${(i.vars||i).palette.action.disabledBackground}`},o.variant==="contained"&&{color:(i.vars||i).palette.action.disabled,boxShadow:(i.vars||i).shadows[0],backgroundColor:(i.vars||i).palette.action.disabledBackground})},o.variant==="text"&&{padding:"6px 8px"},o.variant==="text"&&o.color!=="inherit"&&{color:(i.vars||i).palette[o.color].main},o.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},o.variant==="outlined"&&o.color!=="inherit"&&{color:(i.vars||i).palette[o.color].main,border:i.vars?`1px solid rgba(${i.vars.palette[o.color].mainChannel} / 0.5)`:`1px solid ${alpha(i.palette[o.color].main,.5)}`},o.variant==="contained"&&{color:i.vars?i.vars.palette.text.primary:(s=(_e=i.palette).getContrastText)==null?void 0:s.call(_e,i.palette.grey[300]),backgroundColor:(i.vars||i).palette.grey[300],boxShadow:(i.vars||i).shadows[2]},o.variant==="contained"&&o.color!=="inherit"&&{color:(i.vars||i).palette[o.color].contrastText,backgroundColor:(i.vars||i).palette[o.color].main},o.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},o.size==="small"&&o.variant==="text"&&{padding:"4px 5px",fontSize:i.typography.pxToRem(13)},o.size==="large"&&o.variant==="text"&&{padding:"8px 11px",fontSize:i.typography.pxToRem(15)},o.size==="small"&&o.variant==="outlined"&&{padding:"3px 9px",fontSize:i.typography.pxToRem(13)},o.size==="large"&&o.variant==="outlined"&&{padding:"7px 21px",fontSize:i.typography.pxToRem(15)},o.size==="small"&&o.variant==="contained"&&{padding:"4px 10px",fontSize:i.typography.pxToRem(13)},o.size==="large"&&o.variant==="contained"&&{padding:"8px 22px",fontSize:i.typography.pxToRem(15)},o.fullWidth&&{width:"100%"})},({ownerState:i})=>i.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${buttonClasses$1.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${buttonClasses$1.disabled}`]:{boxShadow:"none"}}),ButtonStartIcon=styled("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(i,o)=>{const{ownerState:s}=i;return[o.startIcon,o[`iconSize${capitalize(s.size)}`]]}})(({ownerState:i})=>_extends({display:"inherit",marginRight:8,marginLeft:-4},i.size==="small"&&{marginLeft:-2},commonIconStyles(i))),ButtonEndIcon=styled("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(i,o)=>{const{ownerState:s}=i;return[o.endIcon,o[`iconSize${capitalize(s.size)}`]]}})(({ownerState:i})=>_extends({display:"inherit",marginRight:-4,marginLeft:8},i.size==="small"&&{marginRight:-2},commonIconStyles(i))),Button=reactExports.forwardRef(function(o,s){const _e=reactExports.useContext(ButtonGroupContext$1),_n=resolveProps(_e,o),_o=useThemeProps({props:_n,name:"MuiButton"}),{children:_a,color:_u="primary",component:_h="button",className:ty,disabled:oy=!1,disableElevation:hy=!1,disableFocusRipple:fy=!1,endIcon:vy,focusVisibleClassName:xy,fullWidth:wy=!1,size:By="medium",startIcon:Sy,type:Ay,variant:Py="text"}=_o,Iy=_objectWithoutPropertiesLoose(_o,_excluded$5),$y=_extends({},_o,{color:_u,component:_h,disabled:oy,disableElevation:hy,disableFocusRipple:fy,fullWidth:wy,size:By,type:Ay,variant:Py}),Ky=useUtilityClasses$5($y),Jy=Sy&&jsxRuntimeExports.jsx(ButtonStartIcon,{className:Ky.startIcon,ownerState:$y,children:Sy}),i0=vy&&jsxRuntimeExports.jsx(ButtonEndIcon,{className:Ky.endIcon,ownerState:$y,children:vy});return jsxRuntimeExports.jsxs(ButtonRoot,_extends({ownerState:$y,className:clsx(_e.className,Ky.root,ty),component:_h,disabled:oy,focusRipple:!fy,focusVisibleClassName:clsx(Ky.focusVisible,xy),ref:s,type:Ay},Iy,{classes:Ky,children:[Jy,_a,i0]}))}),Button$1=Button;function getCardUtilityClass(i){return generateUtilityClass("MuiCard",i)}generateUtilityClasses("MuiCard",["root"]);const _excluded$4=["className","raised"],useUtilityClasses$4=i=>{const{classes:o}=i;return composeClasses({root:["root"]},getCardUtilityClass,o)},CardRoot=styled(Paper$1,{name:"MuiCard",slot:"Root",overridesResolver:(i,o)=>o.root})(()=>({overflow:"hidden"})),Card=reactExports.forwardRef(function(o,s){const _e=useThemeProps({props:o,name:"MuiCard"}),{className:_n,raised:_o=!1}=_e,_a=_objectWithoutPropertiesLoose(_e,_excluded$4),_u=_extends({},_e,{raised:_o}),_h=useUtilityClasses$4(_u);return jsxRuntimeExports.jsx(CardRoot,_extends({className:clsx(_h.root,_n),elevation:_o?8:void 0,ref:s,ownerState:_u},_a))}),Card$1=Card;function getCardActionAreaUtilityClass(i){return generateUtilityClass("MuiCardActionArea",i)}const cardActionAreaClasses=generateUtilityClasses("MuiCardActionArea",["root","focusVisible","focusHighlight"]),cardActionAreaClasses$1=cardActionAreaClasses,_excluded$3=["children","className","focusVisibleClassName"],useUtilityClasses$3=i=>{const{classes:o}=i;return composeClasses({root:["root"],focusHighlight:["focusHighlight"]},getCardActionAreaUtilityClass,o)},CardActionAreaRoot=styled(ButtonBase$1,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(i,o)=>o.root})(({theme:i})=>({display:"block",textAlign:"inherit",width:"100%",[`&:hover .${cardActionAreaClasses$1.focusHighlight}`]:{opacity:(i.vars||i).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${cardActionAreaClasses$1.focusVisible} .${cardActionAreaClasses$1.focusHighlight}`]:{opacity:(i.vars||i).palette.action.focusOpacity}})),CardActionAreaFocusHighlight=styled("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(i,o)=>o.focusHighlight})(({theme:i})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:i.transitions.create("opacity",{duration:i.transitions.duration.short})})),CardActionArea=reactExports.forwardRef(function(o,s){const _e=useThemeProps({props:o,name:"MuiCardActionArea"}),{children:_n,className:_o,focusVisibleClassName:_a}=_e,_u=_objectWithoutPropertiesLoose(_e,_excluded$3),_h=_e,ty=useUtilityClasses$3(_h);return jsxRuntimeExports.jsxs(CardActionAreaRoot,_extends({className:clsx(ty.root,_o),focusVisibleClassName:clsx(_a,ty.focusVisible),ref:s,ownerState:_h},_u,{children:[_n,jsxRuntimeExports.jsx(CardActionAreaFocusHighlight,{className:ty.focusHighlight,ownerState:_h})]}))}),CardActionArea$1=CardActionArea;function getCardContentUtilityClass(i){return generateUtilityClass("MuiCardContent",i)}generateUtilityClasses("MuiCardContent",["root"]);const _excluded$2=["className","component"],useUtilityClasses$2=i=>{const{classes:o}=i;return composeClasses({root:["root"]},getCardContentUtilityClass,o)},CardContentRoot=styled("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(i,o)=>o.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),CardContent=reactExports.forwardRef(function(o,s){const _e=useThemeProps({props:o,name:"MuiCardContent"}),{className:_n,component:_o="div"}=_e,_a=_objectWithoutPropertiesLoose(_e,_excluded$2),_u=_extends({},_e,{component:_o}),_h=useUtilityClasses$2(_u);return jsxRuntimeExports.jsx(CardContentRoot,_extends({as:_o,className:clsx(_h.root,_n),ownerState:_u,ref:s},_a))}),CardContent$1=CardContent;function getCardMediaUtilityClass(i){return generateUtilityClass("MuiCardMedia",i)}generateUtilityClasses("MuiCardMedia",["root","media","img"]);const _excluded$1=["children","className","component","image","src","style"],useUtilityClasses$1=i=>{const{classes:o,isMediaComponent:s,isImageComponent:_e}=i;return composeClasses({root:["root",s&&"media",_e&&"img"]},getCardMediaUtilityClass,o)},CardMediaRoot=styled("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(i,o)=>{const{ownerState:s}=i,{isMediaComponent:_e,isImageComponent:_n}=s;return[o.root,_e&&o.media,_n&&o.img]}})(({ownerState:i})=>_extends({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},i.isMediaComponent&&{width:"100%"},i.isImageComponent&&{objectFit:"cover"})),MEDIA_COMPONENTS=["video","audio","picture","iframe","img"],IMAGE_COMPONENTS=["picture","img"],CardMedia=reactExports.forwardRef(function(o,s){const _e=useThemeProps({props:o,name:"MuiCardMedia"}),{children:_n,className:_o,component:_a="div",image:_u,src:_h,style:ty}=_e,oy=_objectWithoutPropertiesLoose(_e,_excluded$1),hy=MEDIA_COMPONENTS.indexOf(_a)!==-1,fy=!hy&&_u?_extends({backgroundImage:`url("${_u}")`},ty):ty,vy=_extends({},_e,{component:_a,isMediaComponent:hy,isImageComponent:IMAGE_COMPONENTS.indexOf(_a)!==-1}),xy=useUtilityClasses$1(vy);return jsxRuntimeExports.jsx(CardMediaRoot,_extends({className:clsx(xy.root,_o),as:_a,role:!hy&&_u?"img":void 0,ref:s,style:fy,ownerState:vy,src:hy?_u||_h:void 0},oy,{children:_n}))}),CardMedia$1=CardMedia,Container=createContainer({createStyledComponent:styled("div",{name:"MuiContainer",slot:"Root",overridesResolver:(i,o)=>{const{ownerState:s}=i;return[o.root,o[`maxWidth${capitalize(String(s.maxWidth))}`],s.fixed&&o.fixed,s.disableGutters&&o.disableGutters]}}),useThemeProps:i=>useThemeProps({props:i,name:"MuiContainer"})}),Container$1=Container,GridContext=reactExports.createContext(),GridContext$1=GridContext;function getGridUtilityClass(i){return generateUtilityClass("MuiGrid",i)}const SPACINGS=[0,1,2,3,4,5,6,7,8,9,10],DIRECTIONS=["column-reverse","column","row-reverse","row"],WRAPS=["nowrap","wrap-reverse","wrap"],GRID_SIZES=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],gridClasses=generateUtilityClasses("MuiGrid",["root","container","item","zeroMinWidth",...SPACINGS.map(i=>`spacing-xs-${i}`),...DIRECTIONS.map(i=>`direction-xs-${i}`),...WRAPS.map(i=>`wrap-xs-${i}`),...GRID_SIZES.map(i=>`grid-xs-${i}`),...GRID_SIZES.map(i=>`grid-sm-${i}`),...GRID_SIZES.map(i=>`grid-md-${i}`),...GRID_SIZES.map(i=>`grid-lg-${i}`),...GRID_SIZES.map(i=>`grid-xl-${i}`)]),_excluded=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function getOffset(i){const o=parseFloat(i);return`${o}${String(i).replace(String(o),"")||"px"}`}function generateGrid({theme:i,ownerState:o}){let s;return i.breakpoints.keys.reduce((_e,_n)=>{let _o={};if(o[_n]&&(s=o[_n]),!s)return _e;if(s===!0)_o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(s==="auto")_o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const _a=resolveBreakpointValues({values:o.columns,breakpoints:i.breakpoints.values}),_u=typeof _a=="object"?_a[_n]:_a;if(_u==null)return _e;const _h=`${Math.round(s/_u*1e8)/1e6}%`;let ty={};if(o.container&&o.item&&o.columnSpacing!==0){const oy=i.spacing(o.columnSpacing);if(oy!=="0px"){const hy=`calc(${_h} + ${getOffset(oy)})`;ty={flexBasis:hy,maxWidth:hy}}}_o=_extends({flexBasis:_h,flexGrow:0,maxWidth:_h},ty)}return i.breakpoints.values[_n]===0?Object.assign(_e,_o):_e[i.breakpoints.up(_n)]=_o,_e},{})}function generateDirection({theme:i,ownerState:o}){const s=resolveBreakpointValues({values:o.direction,breakpoints:i.breakpoints.values});return handleBreakpoints({theme:i},s,_e=>{const _n={flexDirection:_e};return _e.indexOf("column")===0&&(_n[`& > .${gridClasses.item}`]={maxWidth:"none"}),_n})}function extractZeroValueBreakpointKeys({breakpoints:i,values:o}){let s="";Object.keys(o).forEach(_n=>{s===""&&o[_n]!==0&&(s=_n)});const _e=Object.keys(i).sort((_n,_o)=>i[_n]-i[_o]);return _e.slice(0,_e.indexOf(s))}function generateRowGap({theme:i,ownerState:o}){const{container:s,rowSpacing:_e}=o;let _n={};if(s&&_e!==0){const _o=resolveBreakpointValues({values:_e,breakpoints:i.breakpoints.values});let _a;typeof _o=="object"&&(_a=extractZeroValueBreakpointKeys({breakpoints:i.breakpoints.values,values:_o})),_n=handleBreakpoints({theme:i},_o,(_u,_h)=>{var ty;const oy=i.spacing(_u);return oy!=="0px"?{marginTop:`-${getOffset(oy)}`,[`& > .${gridClasses.item}`]:{paddingTop:getOffset(oy)}}:(ty=_a)!=null&&ty.includes(_h)?{}:{marginTop:0,[`& > .${gridClasses.item}`]:{paddingTop:0}}})}return _n}function generateColumnGap({theme:i,ownerState:o}){const{container:s,columnSpacing:_e}=o;let _n={};if(s&&_e!==0){const _o=resolveBreakpointValues({values:_e,breakpoints:i.breakpoints.values});let _a;typeof _o=="object"&&(_a=extractZeroValueBreakpointKeys({breakpoints:i.breakpoints.values,values:_o})),_n=handleBreakpoints({theme:i},_o,(_u,_h)=>{var ty;const oy=i.spacing(_u);return oy!=="0px"?{width:`calc(100% + ${getOffset(oy)})`,marginLeft:`-${getOffset(oy)}`,[`& > .${gridClasses.item}`]:{paddingLeft:getOffset(oy)}}:(ty=_a)!=null&&ty.includes(_h)?{}:{width:"100%",marginLeft:0,[`& > .${gridClasses.item}`]:{paddingLeft:0}}})}return _n}function resolveSpacingStyles(i,o,s={}){if(!i||i<=0)return[];if(typeof i=="string"&&!Number.isNaN(Number(i))||typeof i=="number")return[s[`spacing-xs-${String(i)}`]];const _e=[];return o.forEach(_n=>{const _o=i[_n];Number(_o)>0&&_e.push(s[`spacing-${_n}-${String(_o)}`])}),_e}const GridRoot=styled("div",{name:"MuiGrid",slot:"Root",overridesResolver:(i,o)=>{const{ownerState:s}=i,{container:_e,direction:_n,item:_o,spacing:_a,wrap:_u,zeroMinWidth:_h,breakpoints:ty}=s;let oy=[];_e&&(oy=resolveSpacingStyles(_a,ty,o));const hy=[];return ty.forEach(fy=>{const vy=s[fy];vy&&hy.push(o[`grid-${fy}-${String(vy)}`])}),[o.root,_e&&o.container,_o&&o.item,_h&&o.zeroMinWidth,...oy,_n!=="row"&&o[`direction-xs-${String(_n)}`],_u!=="wrap"&&o[`wrap-xs-${String(_u)}`],...hy]}})(({ownerState:i})=>_extends({boxSizing:"border-box"},i.container&&{display:"flex",flexWrap:"wrap",width:"100%"},i.item&&{margin:0},i.zeroMinWidth&&{minWidth:0},i.wrap!=="wrap"&&{flexWrap:i.wrap}),generateDirection,generateRowGap,generateColumnGap,generateGrid);function resolveSpacingClasses(i,o){if(!i||i<=0)return[];if(typeof i=="string"&&!Number.isNaN(Number(i))||typeof i=="number")return[`spacing-xs-${String(i)}`];const s=[];return o.forEach(_e=>{const _n=i[_e];if(Number(_n)>0){const _o=`spacing-${_e}-${String(_n)}`;s.push(_o)}}),s}const useUtilityClasses=i=>{const{classes:o,container:s,direction:_e,item:_n,spacing:_o,wrap:_a,zeroMinWidth:_u,breakpoints:_h}=i;let ty=[];s&&(ty=resolveSpacingClasses(_o,_h));const oy=[];_h.forEach(fy=>{const vy=i[fy];vy&&oy.push(`grid-${fy}-${String(vy)}`)});const hy={root:["root",s&&"container",_n&&"item",_u&&"zeroMinWidth",...ty,_e!=="row"&&`direction-xs-${String(_e)}`,_a!=="wrap"&&`wrap-xs-${String(_a)}`,...oy]};return composeClasses(hy,getGridUtilityClass,o)},Grid=reactExports.forwardRef(function(o,s){const _e=useThemeProps({props:o,name:"MuiGrid"}),{breakpoints:_n}=useTheme(),_o=extendSxProp(_e),{className:_a,columns:_u,columnSpacing:_h,component:ty="div",container:oy=!1,direction:hy="row",item:fy=!1,rowSpacing:vy,spacing:xy=0,wrap:wy="wrap",zeroMinWidth:By=!1}=_o,Sy=_objectWithoutPropertiesLoose(_o,_excluded),Ay=vy||xy,Py=_h||xy,Iy=reactExports.useContext(GridContext$1),$y=oy?_u||12:Iy,Ky={},Jy=_extends({},Sy);_n.keys.forEach(g0=>{Sy[g0]!=null&&(Ky[g0]=Sy[g0],delete Jy[g0])});const i0=_extends({},_o,{columns:$y,container:oy,direction:hy,item:fy,rowSpacing:Ay,columnSpacing:Py,wrap:wy,zeroMinWidth:By,spacing:xy},Ky,{breakpoints:_n.keys}),k0=useUtilityClasses(i0);return jsxRuntimeExports.jsx(GridContext$1.Provider,{value:$y,children:jsxRuntimeExports.jsx(GridRoot,_extends({ownerState:i0,className:clsx(k0.root,_a),as:ty,ref:s},Jy))})}),Grid$1=Grid;function useMediaQueryOld(i,o,s,_e,_n){const[_o,_a]=reactExports.useState(()=>_n&&s?s(i).matches:_e?_e(i).matches:o);return useEnhancedEffect(()=>{let _u=!0;if(!s)return;const _h=s(i),ty=()=>{_u&&_a(_h.matches)};return ty(),_h.addListener(ty),()=>{_u=!1,_h.removeListener(ty)}},[i,s]),_o}const maybeReactUseSyncExternalStore=reactExports.useSyncExternalStore;function useMediaQueryNew(i,o,s,_e,_n){const _o=reactExports.useCallback(()=>o,[o]),_a=reactExports.useMemo(()=>{if(_n&&s)return()=>s(i).matches;if(_e!==null){const{matches:oy}=_e(i);return()=>oy}return _o},[_o,i,_e,_n,s]),[_u,_h]=reactExports.useMemo(()=>{if(s===null)return[_o,()=>()=>{}];const oy=s(i);return[()=>oy.matches,hy=>(oy.addListener(hy),()=>{oy.removeListener(hy)})]},[_o,s,i]);return maybeReactUseSyncExternalStore(_h,_u,_a)}function useMediaQuery(i,o={}){const s=useTheme$2(),_e=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:_n=!1,matchMedia:_o=_e?window.matchMedia:null,ssrMatchMedia:_a=null,noSsr:_u=!1}=getThemeProps({name:"MuiUseMediaQuery",props:o,theme:s});let _h=typeof i=="function"?i(s):i;return _h=_h.replace(/^@media( ?)/m,""),(maybeReactUseSyncExternalStore!==void 0?useMediaQueryNew:useMediaQueryOld)(_h,_n,_o,_a,_u)}const GMGROUPE="/assets/GUYANEMAT-k-z8Zlaa.png",LogoBox=styled$1(Box$1)(({theme:i})=>({height:"100%",width:"90%",display:"flex",justifyContent:"center",alignItems:"center",margin:i.spacing(2,0)})),LogoText=styled$1(Typography$1)(({theme:i})=>({textAlign:"center",color:"#003A96",marginBottom:i.spacing(2),[i.breakpoints.down("md")]:{fontSize:"1.2rem"}})),Header=()=>{const[i,o]=reactExports.useState(!1),s=useTheme(),_e=useMediaQuery(s.breakpoints.down("sm")),_n=`Présent depuis plus de trente ans sur le marché guyanais, Guyane Matériels commercialise à travers les magasins Matériels et Services les marques internationales telles que Hitachi Construction, Bell, Ammann, Putzmeister, pour la gamme lourde, Hikoki, Metabo, Facom, Benza, pour la gamme industrie, Wolf et Etesia pour les espaces verts.
    Bolt&Ladder est le spécialiste de la fixation et des moyens d’accès en hauteur.
    Prestations et Services et MS Loc Guyane nous permettent d'offrir à nos clients une prise en charge totale de leurs besoins, de l'achat à la maintenance.
    Notre service pièces détachées dispose de 12 000 références en stock permanent, répondant ainsi aux besoins les plus urgents de nos clients.`,_o=`${_n.substring(0,200)}...`;return jsxRuntimeExports.jsxs(Container$1,{children:[jsxRuntimeExports.jsx(LogoBox,{children:jsxRuntimeExports.jsx(Box$1,{component:"img",alt:"Logo Guyane Matériels",src:GMGROUPE,sx:{maxHeight:_e?233:167,maxWidth:_e?350:250}})}),jsxRuntimeExports.jsx(LogoText,{variant:"subtitle1",children:i?_n:_o}),jsxRuntimeExports.jsx(Button$1,{onClick:()=>o(!i),children:i?"Voir moins":"Voir plus"})]})};function LogoGallery({updateShopInfo:i,shops:o}){const s=useTheme(),_e=useMediaQuery(s.breakpoints.down("sm"));return o?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Typography$1,{sx:{mt:3},fontSize:20,children:"Choisir un magasin pour voir les informations qui le concernent"}),jsxRuntimeExports.jsx(Grid$1,{sx:{mb:3},container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:o.map((_n,_o)=>jsxRuntimeExports.jsx(Grid$1,{item:!0,xs:12,sm:6,md:4,children:jsxRuntimeExports.jsx(Card$1,{"data-id":_o,children:jsxRuntimeExports.jsxs(CardActionArea$1,{onClick:_a=>i(_a,_o),"data-id":_o,children:[jsxRuntimeExports.jsx(CardMedia$1,{component:"img",image:window.location.origin+"/img/"+_n.Title+".png",title:_n.Title}),jsxRuntimeExports.jsx(Box$1,{className:"cityText",sx:{position:"absolute",bottom:"1em",right:"5px",fontSize:"90%","& p":{backgroundImage:"linear-gradient(#FFAA00, #FFFF00)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontWeight:"bold"}},children:jsxRuntimeExports.jsx(Typography$1,{variant:"h6",children:_n.Title.includes("BOLT AND LADDER ")?_n.Title.replace("BOLT AND LADDER ",""):""})}),jsxRuntimeExports.jsx(CardContent$1,{children:_e&&jsxRuntimeExports.jsx(Typography$1,{variant:"caption",children:"Cliquer pour voir les informations"})}),!_e&&jsxRuntimeExports.jsx(Box$1,{sx:{position:"absolute",bottom:"10%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(0,0,0,0.7)",color:"#fff",padding:"1rem",borderRadius:"5px",opacity:0,transition:"opacity 0.3s","&:hover":{opacity:1}},children:"Cliquer pour voir les informations"})]})})},_o))})]}):jsxRuntimeExports.jsx("div",{})}var Facebook={},interopRequireDefault={exports:{}};(function(i){function o(s){return s&&s.__esModule?s:{default:s}}i.exports=o,i.exports.__esModule=!0,i.exports.default=i.exports})(interopRequireDefault);var interopRequireDefaultExports=interopRequireDefault.exports,createSvgIcon={};const require$$0=getAugmentedNamespace(utils);var hasRequiredCreateSvgIcon;function requireCreateSvgIcon(){return hasRequiredCreateSvgIcon||(hasRequiredCreateSvgIcon=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"default",{enumerable:!0,get:function(){return o.createSvgIcon}});var o=require$$0}(createSvgIcon)),createSvgIcon}var _interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(Facebook,"__esModule",{value:!0});var default_1=Facebook.default=void 0;_interopRequireWildcard(reactExports);var _createSvgIcon=_interopRequireDefault(requireCreateSvgIcon()),_jsxRuntime=jsxRuntimeExports;function _getRequireWildcardCache(i){if(typeof WeakMap!="function")return null;var o=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache=function(_e){return _e?s:o})(i)}function _interopRequireWildcard(i,o){if(!o&&i&&i.__esModule)return i;if(i===null||typeof i!="object"&&typeof i!="function")return{default:i};var s=_getRequireWildcardCache(o);if(s&&s.has(i))return s.get(i);var _e={},_n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _o in i)if(_o!=="default"&&Object.prototype.hasOwnProperty.call(i,_o)){var _a=_n?Object.getOwnPropertyDescriptor(i,_o):null;_a&&(_a.get||_a.set)?Object.defineProperty(_e,_o,_a):_e[_o]=i[_o]}return _e.default=i,s&&s.set(i,_e),_e}var _default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5A3.5 3.5 0 0 0 12 8.5V11h-2v3h2v7h3v-7h3v-3h-3V9a1 1 0 0 1 1-1h2V5z"}),"Facebook");default_1=Facebook.default=_default;function ShopTabs({shop:i}){return console.log(i),i?jsxRuntimeExports.jsxs(Container$1,{maxWidth:"lg",sx:{mb:2},children:[jsxRuntimeExports.jsxs(Container$1,{sx:{mb:6},children:[jsxRuntimeExports.jsx(Typography$1,{variant:"h4",gutterBottom:!0,children:i.Title}),jsxRuntimeExports.jsx(Typography$1,{variant:"body1",gutterBottom:!0,children:i.Descriptif}),jsxRuntimeExports.jsx(Typography$1,{variant:"h6",gutterBottom:!0,children:i.Horaires}),jsxRuntimeExports.jsx(Typography$1,{variant:"body1",children:i.Street})]}),jsxRuntimeExports.jsxs(Grid$1,{container:!0,spacing:3,direction:"column",alignItems:"center",children:[jsxRuntimeExports.jsx(Grid$1,{item:!0,xs:12,sm:8,md:6,children:jsxRuntimeExports.jsxs(Button$1,{fullWidth:!0,variant:"contained",href:"tel:".concat(String(i.T_x00e9_l_x00e9_phone)),children:["Appeler ",i.Title]})}),jsxRuntimeExports.jsx(Grid$1,{item:!0,xs:12,sm:8,md:6,children:jsxRuntimeExports.jsxs(Button$1,{fullWidth:!0,variant:"contained",href:"mailto:commercial@matservgf.com",children:["Envoyer un email à ",i.Title]})}),jsxRuntimeExports.jsx(Grid$1,{item:!0,xs:12,sm:8,md:6,children:jsxRuntimeExports.jsxs(Button$1,{fullWidth:!0,variant:"contained",href:"https://www.facebook.com/profile.php?id=100090642260998",target:"_blank",children:[jsxRuntimeExports.jsx(default_1,{sx:{mr:1}})," Nous rejoindre sur Facebook"]})})]})]}):jsxRuntimeExports.jsx("div",{})}(function(){var p,aa=[];function ba(i){return function(){return aa[i].apply(this,arguments)}}function ca(i,o){return aa[i]=o}function da(i){var o=0;return function(){return o<i.length?{done:!1,value:i[o++]}:{done:!0}}}function fa(i){var o=typeof Symbol<"u"&&Symbol.iterator&&i[Symbol.iterator];return o?o.call(i):{next:da(i)}}function ha(i){for(var o,s=[];!(o=i.next()).done;)s.push(o.value);return s}var ia=typeof Object.defineProperties=="function"?Object.defineProperty:function(i,o,s){i!=Array.prototype&&i!=Object.prototype&&(i[o]=s.value)},ja=typeof window<"u"&&window===this?this:typeof global<"u"&&global!=null?global:this;function ka(i,o){if(o){var s=ja;i=i.split(".");for(var _e=0;_e<i.length-1;_e++){var _n=i[_e];_n in s||(s[_n]={}),s=s[_n]}i=i[i.length-1],_e=s[i],o=o(_e),o!=_e&&o!=null&&ia(s,i,{configurable:!0,writable:!0,value:o})}}ka("Array.prototype.find",function(i){return i||function(o,s){t:{var _e=this;_e instanceof String&&(_e=String(_e));for(var _n=_e.length,_o=0;_o<_n;_o++){var _a=_e[_o];if(o.call(s,_a,_o,_e)){o=_a;break t}}o=void 0}return o}});function ma(){ma=function(){},ja.Symbol||(ja.Symbol=na)}function oa(i,o){this.a=i,ia(this,"description",{configurable:!0,writable:!0,value:o})}oa.prototype.toString=function(){return this.a};var na=function(){function i(s){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return new oa("jscomp_symbol_"+(s||"")+"_"+o++,s)}var o=0;return i}();function pa(){ma();var i=ja.Symbol.iterator;i||(i=ja.Symbol.iterator=ja.Symbol("Symbol.iterator")),typeof Array.prototype[i]!="function"&&ia(Array.prototype,i,{configurable:!0,writable:!0,value:function(){return qa(da(this))}}),pa=function(){}}function qa(i){return pa(),i={next:i},i[ja.Symbol.iterator]=function(){return this},i}function ra(i,o){pa(),i instanceof String&&(i+="");var s=0,_e={next:function(){if(s<i.length){var _n=s++;return{value:o(_n,i[_n]),done:!1}}return _e.next=function(){return{done:!0,value:void 0}},_e.next()}};return _e[Symbol.iterator]=function(){return _e},_e}ka("Array.prototype.keys",function(i){return i||function(){return ra(this,function(o){return o})}});var sa;if(typeof Object.setPrototypeOf=="function")sa=Object.setPrototypeOf;else{var ta;t:{var ua={zg:!0},va={};try{va.__proto__=ua,ta=va.zg;break t}catch{}ta=!1}sa=ta?function(i,o){if(i.__proto__=o,i.__proto__!==o)throw new TypeError(i+" is not extensible");return i}:null}var wa=sa;ka("Object.setPrototypeOf",function(i){return i||wa}),ka("Promise",function(i){function o(_a){this.b=0,this.c=void 0,this.a=[];var _u=this.f();try{_a(_u.resolve,_u.reject)}catch(_h){_u.reject(_h)}}function s(){this.a=null}function _e(_a){return _a instanceof o?_a:new o(function(_u){_u(_a)})}if(i)return i;s.prototype.b=function(_a){if(this.a==null){this.a=[];var _u=this;this.c(function(){_u.g()})}this.a.push(_a)};var _n=ja.setTimeout;s.prototype.c=function(_a){_n(_a,0)},s.prototype.g=function(){for(;this.a&&this.a.length;){var _a=this.a;this.a=[];for(var _u=0;_u<_a.length;++_u){var _h=_a[_u];_a[_u]=null;try{_h()}catch(ty){this.f(ty)}}}this.a=null},s.prototype.f=function(_a){this.c(function(){throw _a})},o.prototype.f=function(){function _a(ty){return function(oy){_h||(_h=!0,ty.call(_u,oy))}}var _u=this,_h=!1;return{resolve:_a(this.R),reject:_a(this.g)}},o.prototype.R=function(_a){if(_a===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(_a instanceof o)this.u(_a);else{t:switch(typeof _a){case"object":var _u=_a!=null;break t;case"function":_u=!0;break t;default:_u=!1}_u?this.s(_a):this.i(_a)}},o.prototype.s=function(_a){var _u=void 0;try{_u=_a.then}catch(_h){this.g(_h);return}typeof _u=="function"?this.Xa(_u,_a):this.i(_a)},o.prototype.g=function(_a){this.j(2,_a)},o.prototype.i=function(_a){this.j(1,_a)},o.prototype.j=function(_a,_u){if(this.b!=0)throw Error("Cannot settle("+_a+", "+_u+"): Promise already settled in state"+this.b);this.b=_a,this.c=_u,this.m()},o.prototype.m=function(){if(this.a!=null){for(var _a=0;_a<this.a.length;++_a)_o.b(this.a[_a]);this.a=null}};var _o=new s;return o.prototype.u=function(_a){var _u=this.f();_a.mf(_u.resolve,_u.reject)},o.prototype.Xa=function(_a,_u){var _h=this.f();try{_a.call(_u,_h.resolve,_h.reject)}catch(ty){_h.reject(ty)}},o.prototype.then=function(_a,_u){function _h(fy,vy){return typeof fy=="function"?function(xy){try{ty(fy(xy))}catch(wy){oy(wy)}}:vy}var ty,oy,hy=new o(function(fy,vy){ty=fy,oy=vy});return this.mf(_h(_a,ty),_h(_u,oy)),hy},o.prototype.catch=function(_a){return this.then(void 0,_a)},o.prototype.mf=function(_a,_u){function _h(){switch(ty.b){case 1:_a(ty.c);break;case 2:_u(ty.c);break;default:throw Error("Unexpected state: "+ty.b)}}var ty=this;this.a==null?_o.b(_h):this.a.push(_h)},o.resolve=_e,o.reject=function(_a){return new o(function(_u,_h){_h(_a)})},o.race=function(_a){return new o(function(_u,_h){for(var ty=fa(_a),oy=ty.next();!oy.done;oy=ty.next())_e(oy.value).mf(_u,_h)})},o.all=function(_a){var _u=fa(_a),_h=_u.next();return _h.done?_e([]):new o(function(ty,oy){function hy(xy){return function(wy){fy[xy]=wy,vy--,vy==0&&ty(fy)}}var fy=[],vy=0;do fy.push(void 0),vy++,_e(_h.value).mf(hy(fy.length-1),oy),_h=_u.next();while(!_h.done)})},o}),ka("Object.entries",function(i){return i||function(o){var s=[],_e;for(_e in o)Object.prototype.hasOwnProperty.call(o,_e)&&s.push([_e,o[_e]]);return s}});var xa=typeof Object.assign=="function"?Object.assign:function(i,o){for(var s=1;s<arguments.length;s++){var _e=arguments[s];if(_e)for(var _n in _e)Object.prototype.hasOwnProperty.call(_e,_n)&&(i[_n]=_e[_n])}return i};ka("Object.assign",function(i){return i||xa}),ka("Math.log2",function(i){return i||function(o){return Math.log(o)/Math.LN2}});var ya=this||self;function za(i,o,s){i=i.split("."),s=s||ya,i[0]in s||typeof s.execScript>"u"||s.execScript("var "+i[0]);for(var _e;i.length&&(_e=i.shift());)i.length||o===void 0?s[_e]&&s[_e]!==Object.prototype[_e]?s=s[_e]:s=s[_e]={}:s[_e]=o}function Aa(){}function Ba(i){var o=typeof i;if(o=="object")if(i){if(i instanceof Array)return"array";if(i instanceof Object)return o;var s=Object.prototype.toString.call(i);if(s=="[object Window]")return"object";if(s=="[object Array]"||typeof i.length=="number"&&typeof i.splice<"u"&&typeof i.propertyIsEnumerable<"u"&&!i.propertyIsEnumerable("splice"))return"array";if(s=="[object Function]"||typeof i.call<"u"&&typeof i.propertyIsEnumerable<"u"&&!i.propertyIsEnumerable("call"))return"function"}else return"null";else if(o=="function"&&typeof i.call>"u")return"object";return o}function Ca(i){var o=Ba(i);return o=="array"||o=="object"&&typeof i.length=="number"}function Da(i){return Ba(i)=="function"}function Ea(i){var o=typeof i;return o=="object"&&i!=null||o=="function"}var Fa="closure_uid_"+(1e9*Math.random()>>>0),Ga=0;function Ha(i,o,s){return i.call.apply(i.bind,arguments)}function Ia(i,o,s){if(!i)throw Error();if(2<arguments.length){var _e=Array.prototype.slice.call(arguments,2);return function(){var _n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_n,_e),i.apply(o,_n)}}return function(){return i.apply(o,arguments)}}function Ja(i,o,s){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ja=Ha:Ja=Ia,Ja.apply(null,arguments)}function Ka(i,o){var s=Array.prototype.slice.call(arguments,1);return function(){var _e=s.slice();return _e.push.apply(_e,arguments),i.apply(this,_e)}}function t(i,o){za(i,o,void 0)}function u(i,o){function s(){}s.prototype=o.prototype,i.l=o.prototype,i.prototype=new s,i.prototype.constructor=i,i.Ko=function(_e,_n,_o){for(var _a=Array(arguments.length-2),_u=2;_u<arguments.length;_u++)_a[_u-2]=arguments[_u];return o.prototype[_n].apply(_e,_a)}}function La(i){if(Error.captureStackTrace)Error.captureStackTrace(this,La);else{var o=Error().stack;o&&(this.stack=o)}i&&(this.message=String(i))}u(La,Error),La.prototype.name="CustomError";function Ma(i,o){this.c=i,this.f=o,this.b=0,this.a=null}Ma.prototype.get=function(){if(0<this.b){this.b--;var i=this.a;this.a=i.next,i.next=null}else i=this.c();return i},Ma.prototype.put=function(i){this.f(i),100>this.b&&(this.b++,i.next=this.a,this.a=i)};function Na(){this.b=this.a=null}var Qa=new Ma(function(){return new Pa},function(i){i.reset()});Na.prototype.add=function(i,o){var s=Qa.get();s.set(i,o),this.b?this.b.next=s:this.a=s,this.b=s},Na.prototype.remove=function(){var i=null;return this.a&&(i=this.a,this.a=this.a.next,this.a||(this.b=null),i.next=null),i};function Pa(){this.next=this.b=this.a=null}Pa.prototype.set=function(i,o){this.a=i,this.b=o,this.next=null},Pa.prototype.reset=function(){this.next=this.b=this.a=null};var Ra=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Sa(i,o){return i.indexOf(o)!=-1}function Ta(i,o){return i<o?-1:i>o?1:0}function Ua(i,o){for(var s in i)if(o.call(void 0,i[s],s,i))return!0;return!1}function Va(i){for(var o in i)return!1;return!0}function Wa(i){var o={},s;for(s in i)o[s]=i[s];return o}var Xa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ya(i,o){for(var s,_e,_n=1;_n<arguments.length;_n++){_e=arguments[_n];for(s in _e)i[s]=_e[s];for(var _o=0;_o<Xa.length;_o++)s=Xa[_o],Object.prototype.hasOwnProperty.call(_e,s)&&(i[s]=_e[s])}}var $a;t:{var ab=ya.navigator;if(ab){var bb=ab.userAgent;if(bb){$a=bb;break t}}$a=""}function cb(i){return Sa($a,i)}var db=Array.prototype.indexOf?function(i,o){return Array.prototype.indexOf.call(i,o,void 0)}:function(i,o){if(typeof i=="string")return typeof o!="string"||o.length!=1?-1:i.indexOf(o,0);for(var s=0;s<i.length;s++)if(s in i&&i[s]===o)return s;return-1};function eb(i,o){this.b=i===fb&&o||"",this.a=gb}var gb={},fb={},hb=new eb(fb,"");function ib(i,o){this.b=i===jb&&o||"",this.a=kb}ib.prototype.mc=function(){return 1};var kb={},jb={};function lb(){this.b="",this.c=mb,this.a=null}lb.prototype.mc=function(){return this.a};function nb(){var i=ob;return i instanceof lb&&i.constructor===lb&&i.c===mb?i.b:(Ba(i),"type_error:SafeHtml")}var mb={};function pb(i){var o=new lb;return o.b=i,o.a=0,o}pb("<!DOCTYPE html>");var ob=pb("");pb("<br>");function qb(i){var o=new ib(jb,hb instanceof eb&&hb.constructor===eb&&hb.a===gb?hb.b:"type_error:Const");o instanceof ib&&o.constructor===ib&&o.a===kb?o=o.b:(Ba(o),o="type_error:TrustedResourceUrl"),i.src=o.toString()}function rb(i){return rb[" "](i),i}rb[" "]=Aa;function sb(i,o){var s=tb;return Object.prototype.hasOwnProperty.call(s,i)?s[i]:s[i]=o(i)}var ub=cb("Opera"),vb=cb("Trident")||cb("MSIE"),wb=cb("Edge"),xb=cb("Gecko")&&!(Sa($a.toLowerCase(),"webkit")&&!cb("Edge"))&&!(cb("Trident")||cb("MSIE"))&&!cb("Edge"),yb=Sa($a.toLowerCase(),"webkit")&&!cb("Edge");function zb(){var i=ya.document;return i?i.documentMode:void 0}var Ab;t:{var Bb="",Cb=function(){var i=$a;if(xb)return/rv:([^\);]+)(\)|;)/.exec(i);if(wb)return/Edge\/([\d\.]+)/.exec(i);if(vb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i);if(yb)return/WebKit\/(\S+)/.exec(i);if(ub)return/(?:Version)[ \/]?(\S+)/.exec(i)}();if(Cb&&(Bb=Cb?Cb[1]:""),vb){var Db=zb();if(Db!=null&&Db>parseFloat(Bb)){Ab=String(Db);break t}}Ab=Bb}var tb={};function Eb(i){return sb(i,function(){for(var o=0,s=Ra(String(Ab)).split("."),_e=Ra(String(i)).split("."),_n=Math.max(s.length,_e.length),_o=0;o==0&&_o<_n;_o++){var _a=s[_o]||"",_u=_e[_o]||"";do{if(_a=/(\d*)(\D*)(.*)/.exec(_a)||["","","",""],_u=/(\d*)(\D*)(.*)/.exec(_u)||["","","",""],_a[0].length==0&&_u[0].length==0)break;o=_a[1].length==0?0:parseInt(_a[1],10);var _h=_u[1].length==0?0:parseInt(_u[1],10);o=Ta(o,_h)||Ta(_a[2].length==0,_u[2].length==0)||Ta(_a[2],_u[2]),_a=_a[3],_u=_u[3]}while(o==0)}return 0<=o})}var Fb;Fb=ya.document&&vb?zb():void 0,!xb&&!vb||vb&&9<=Number(Fb)||xb&&Eb("1.9.1"),vb&&Eb("9");function Gb(i){var o=document;return i=String(i),o.contentType==="application/xhtml+xml"&&(i=i.toLowerCase()),o.createElement(i)}function Hb(i){ya.setTimeout(function(){throw i},0)}var Ib;function Jb(){var i=ya.MessageChannel;if(typeof i>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!cb("Presto")&&(i=function(){var _n=Gb("IFRAME");_n.style.display="none",qb(_n),document.documentElement.appendChild(_n);var _o=_n.contentWindow;_n=_o.document,_n.open(),_n.write(nb()),_n.close();var _a="callImmediate"+Math.random(),_u=_o.location.protocol=="file:"?"*":_o.location.protocol+"//"+_o.location.host;_n=Ja(function(_h){(_u=="*"||_h.origin==_u)&&_h.data==_a&&this.port1.onmessage()},this),_o.addEventListener("message",_n,!1),this.port1={},this.port2={postMessage:function(){_o.postMessage(_a,_u)}}}),typeof i<"u"&&!cb("Trident")&&!cb("MSIE")){var o=new i,s={},_e=s;return o.port1.onmessage=function(){if(s.next!==void 0){s=s.next;var _n=s.Vi;s.Vi=null,_n()}},function(_n){_e.next={Vi:_n},_e=_e.next,o.port2.postMessage(0)}}return typeof document<"u"&&"onreadystatechange"in Gb("SCRIPT")?function(_n){var _o=Gb("SCRIPT");_o.onreadystatechange=function(){_o.onreadystatechange=null,_o.parentNode.removeChild(_o),_o=null,_n(),_n=null},document.documentElement.appendChild(_o)}:function(_n){ya.setTimeout(_n,0)}}function Kb(i,o){Lb||Mb(),Nb||(Lb(),Nb=!0),Ob.add(i,o)}var Lb;function Mb(){if(ya.Promise&&ya.Promise.resolve){var i=ya.Promise.resolve(void 0);Lb=function(){i.then(Pb)}}else Lb=function(){var o=Pb;!Da(ya.setImmediate)||ya.Window&&ya.Window.prototype&&!cb("Edge")&&ya.Window.prototype.setImmediate==ya.setImmediate?(Ib||(Ib=Jb()),Ib(o)):ya.setImmediate(o)}}var Nb=!1,Ob=new Na;function Pb(){for(var i;i=Ob.remove();){try{i.a.call(i.b)}catch(o){Hb(o)}Qa.put(i)}Nb=!1}function Qb(i){if(this.a=Rb,this.j=void 0,this.f=this.b=this.c=null,this.g=this.i=!1,i!=Aa)try{var o=this;i.call(void 0,function(s){Sb(o,Tb,s)},function(s){Sb(o,Ub,s)})}catch(s){Sb(this,Ub,s)}}var Rb=0,Tb=2,Ub=3;function Vb(){this.next=this.c=this.b=this.f=this.a=null,this.g=!1}Vb.prototype.reset=function(){this.c=this.b=this.f=this.a=null,this.g=!1};var Wb=new Ma(function(){return new Vb},function(i){i.reset()});function Xb(i,o,s){var _e=Wb.get();return _e.f=i,_e.b=o,_e.c=s,_e}function Zb(i){if(i instanceof Qb)return i;var o=new Qb(Aa);return Sb(o,Tb,i),o}function $b(i){return new Qb(function(o,s){s(i)})}function ac(){var i,o,s=new Qb(function(_e,_n){i=_e,o=_n});return new bc(s,i,o)}Qb.prototype.then=function(i,o,s){return cc(this,Da(i)?i:null,Da(o)?o:null,s)},Qb.prototype.$goog_Thenable=!0,Qb.prototype.cancel=function(i){if(this.a==Rb){var o=new dc(i);Kb(function(){ec(this,o)},this)}};function ec(i,o){if(i.a==Rb)if(i.c){var s=i.c;if(s.b){for(var _e=0,_n=null,_o=null,_a=s.b;_a&&(_a.g||(_e++,_a.a==i&&(_n=_a),!(_n&&1<_e)));_a=_a.next)_n||(_o=_a);_n&&(s.a==Rb&&_e==1?ec(s,o):(_o?(_e=_o,_e.next==s.f&&(s.f=_e),_e.next=_e.next.next):fc(s),gc(s,_n,Ub,o)))}i.c=null}else Sb(i,Ub,o)}function hc(i,o){i.b||i.a!=Tb&&i.a!=Ub||ic(i),i.f?i.f.next=o:i.b=o,i.f=o}function cc(i,o,s,_e){var _n=Xb(null,null,null);return _n.a=new Qb(function(_o,_a){_n.f=o?function(_u){try{var _h=o.call(_e,_u);_o(_h)}catch(ty){_a(ty)}}:_o,_n.b=s?function(_u){try{var _h=s.call(_e,_u);_h===void 0&&_u instanceof dc?_a(_u):_o(_h)}catch(ty){_a(ty)}}:_a}),_n.a.c=i,hc(i,_n),_n.a}Qb.prototype.s=function(i){this.a=Rb,Sb(this,Tb,i)},Qb.prototype.R=function(i){this.a=Rb,Sb(this,Ub,i)};function Sb(i,o,s){if(i.a==Rb){i===s&&(o=Ub,s=new TypeError("Promise cannot resolve to itself")),i.a=1;t:{var _e=s,_n=i.s,_o=i.R;if(_e instanceof Qb){hc(_e,Xb(_n||Aa,_o||null,i));var _a=!0}else{if(_e)try{var _u=!!_e.$goog_Thenable}catch{_u=!1}else _u=!1;if(_u)_e.then(_n,_o,i),_a=!0;else{if(Ea(_e))try{var _h=_e.then;if(Da(_h)){jc(_e,_h,_n,_o,i),_a=!0;break t}}catch(ty){_o.call(i,ty),_a=!0;break t}_a=!1}}}_a||(i.j=s,i.a=o,i.c=null,ic(i),o!=Ub||s instanceof dc||kc(i,s))}}function jc(i,o,s,_e,_n){function _o(_h){_u||(_u=!0,_e.call(_n,_h))}function _a(_h){_u||(_u=!0,s.call(_n,_h))}var _u=!1;try{o.call(i,_a,_o)}catch(_h){_o(_h)}}function ic(i){i.i||(i.i=!0,Kb(i.m,i))}function fc(i){var o=null;return i.b&&(o=i.b,i.b=o.next,o.next=null),i.b||(i.f=null),o}Qb.prototype.m=function(){for(var i;i=fc(this);)gc(this,i,this.a,this.j);this.i=!1};function gc(i,o,s,_e){if(s==Ub&&o.b&&!o.g)for(;i&&i.g;i=i.c)i.g=!1;if(o.a)o.a.c=null,lc(o,s,_e);else try{o.g?o.f.call(o.c):lc(o,s,_e)}catch(_n){mc.call(null,_n)}Wb.put(o)}function lc(i,o,s){o==Tb?i.f.call(i.c,s):i.b&&i.b.call(i.c,s)}function kc(i,o){i.g=!0,Kb(function(){i.g&&mc.call(null,o)})}var mc=Hb;function dc(i){La.call(this,i)}u(dc,La),dc.prototype.name="cancel";function bc(i,o,s){this.Ck=i,this.resolve=o,this.reject=s}var x=this;function nc(){return Object.create(y,void 0)}var A=Ja,oc=String,pc=x.Object.freeze||function(i){return i};function qc(i){for(var o=Object.keys(i),s=o.length,_e;s--;)_e=i[o[s]],Ea(_e)&&qc(_e);return pc(i)}function rc(i){var o=Ba(i);if(o=="object"||o=="array"){if(Da(i.clone))return i.clone();o=o=="array"?[]:{};for(var s in i)i.hasOwnProperty(s)&&(o[s]=rc(i[s]));return o}return i}var B=[].pop(),y=/x/.exec("");function sc(i,o){return oc(i).split(o!==B?o:" ")}var tc="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(i,o,s,_e,_n){if(!(o=i instanceof o)&&s)throw new D(s,_e,uc(_n)?_n:i);return o}function vc(i,o){if((C(i,o)&&i.constructor===o)===!0)throw new TypeError("Illegal constructor "+wc(o))}function xc(i,o,s,_e,_n){if(!(o=yc(i)===o)&&s)throw new D(s,_e,uc(_n)?_n:i);return o}function zc(i,o,s,_e){return xc(i,"Array",o,s,_e)}t("H.lang.isArray",zc);function uc(i){return i!==B}function Ac(i){return typeof i=="string"}t("H.lang.isString",Ac);var Bc=parseInt,Cc=parseFloat,E=isNaN;function Dc(i){return i===+i}t("H.lang.isNumber",Dc),t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(i){return typeof i=="number"&&i%1===0});function Ec(i){return!E(+i)}function yc(i){var o=Object[tc[0]][tc[6]].call(i).match(/^\[object (\w+)\]$/);return o?o[1]:typeof i}var Fc=[];function Gc(i){0>Fc.indexOf(i)&&Fc.push(i)}Gc(Fc);function wc(i,o,s,_e){var _n="",_o=2>arguments.length,_a;return _o&&(o={H:x.H},s="",_e=Fc.slice()),Hc(o,!0,function(_u,_h){try{if(_a=_u[_h],_h=Ic(_u,_a),!(Ea(_a)&&_a.window===_a&&_a.self===_a||Ea(_a)&&0<_a.nodeType&&Da(_a.cloneNode))&&Ea(_a)){if(_a===i)return _n=s+"."+_h,!0;if(0>_e.indexOf(_a)&&(_e.push(_a),_n=wc(i,_a,s+"."+_h,_e)))return!0}}catch{}}),_o&&(_n=_n?_n.substr(1).replace("."+tc[0]+".","#"):"~"+(Da(i)?Jc(i)+"()":yc(i))),_n}function Ic(i,o){var s=[];return Hc(i,!1,function(_e,_n){_e[_n]===o&&s.push(_n)}),s.sort(Kc)[0]}function Kc(i,o){return o.length-i.length}var Lc=Object[tc[0]][tc[2]];function Hc(i,o,s){var _e;if(i){for(_n in i)if((!o||Lc.call(i,_n))&&s(i,_n,!0))return;for(_e=tc.length;_e--;){var _n=tc[_e];if((!o||Lc.call(i,_n))&&s(i,_n,!1))break}}}function Jc(i){return(i=/^\s*function ([^\( ]+)/.exec(i))?i[1]:"anonymous"}function Mc(i,o,s){s[o]="#"+o}var Nc=!!x.__karma__;function Oc(){throw Error("unimplemented method")}function Pc(i,o){o=o||{},"status"in o&&(this.status=+o.status),"statusText"in o&&(this.statusText=o.statusText),this.ok=200<=this.status&&300>this.status,this.f=!1,i?typeof i=="string"?this.c=i:(o=x.ArrayBuffer)&&o.prototype.isPrototypeOf(i)?this.a=i:o&&i.buffer?this.a=i.buffer:x.Blob.prototype.isPrototypeOf(i)&&(this.b=i):this.c=""}t("H.net.Response",Pc),Pc.prototype.type="default",Pc.prototype.type=Pc.prototype.type,Pc.prototype.status=200,Pc.prototype.status=Pc.prototype.status,Pc.prototype.statusText="OK",Pc.prototype.statusText=Pc.prototype.statusText;function Qc(i){if(i.f)return $b(new TypeError("Already read"));i.f=!0}Pc.error=function(){return Pc.a||(Pc.a=new Pc(null,{status:0,statusText:""}),Pc.a.type="error"),Pc.a},Pc.error=Pc.error,Pc.prototype.text=function(){var i=Qc(this);if(!i)if(this.c)i=Zb(this.c);else if(this.a){i=new Uint8Array(this.a);var o=i.length,s=Array(o),_e;for(_e=0;_e<o;_e++)s[_e]=String.fromCharCode(i[_e]);i=Zb(s.join(""))}else this.b?i=Rc(this.b):i=$b("Unsupported response body");return i},Pc.prototype.json=function(){return this.text().then(x.JSON.parse)},Pc.prototype.blob=function(){var i,o=Qc(this);return o||(this.b?i=this.b:this.a&&(i=new Blob([this.a],{type:"application/octet-stream"}))),o||Zb(i)},Pc.prototype.arrayBuffer=function(){return this.a?Qc(this)||Zb(this.a.slice(0)):this.blob().then(Pc.b)},Pc.b=function(i){var o=new FileReader;return o.readAsArrayBuffer(i),new Qb(function(s,_e){o.onload=function(){s(o.result)},o.onerror=function(){_e(o.error)}})};function Rc(i){var o=new FileReader;return o.readAsText(i),new Qb(function(s,_e){o.onload=function(){s(o.result)},o.onerror=function(){_e(o.error)}})}!Nc&&x.Response&&x.Response.error&&(Pc=x.Response,Gc(Pc.prototype));function D(i,o,s){var _e=arguments.length;if(o=o!==B?+o:o,o!==B){var _n=(_n=/^.*?\(([^\)]+)/.exec((""+i).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?sc(_n[1].replace(/\s+/g,""),","):[];_n.forEach(Mc),_n=_n[o]||"#"+o}var _o=i?wc(i):"";return _e=2<_e?oc(s):"",(_n||_e)&&(_o+=" (Argument "+(_n||"")+(_e?" "+_e:"")+")"),_e=Error(_o),Object.setPrototypeOf(_e,D.prototype),_e}u(D,Error),t("H.lang.InvalidArgumentError",D),D.prototype.name="InvalidArgumentError";function Sc(i,o,s){function _e(){var oy=A(ty.b,ty),hy=+_h.timeout||0;Tc?(Uc(ty,"timeout",oy),_n.timeout=hy):hy&&(ty.f=setTimeout(function(){_n.abort(),ty.b({type:"timeout"})},hy)),Uc(ty,"error",oy),Uc(ty,"load",oy),_n.send(_h.data)}var _n,_o,_a,_u=s&&s.headers||{},_h={},ty=this;if(!Da(o))throw new D(Sc,1,"function required");Ya(_u,Vc.headers,_u),Ya(_h,Vc,s||{}),_h.headers=_u,this.c=o,this.a=_n=new XMLHttpRequest,o=_h.method;try{_n.open(o,i,!0);for(_o in _u)_u.hasOwnProperty(_o)&&(_a=_u[_o])&&_n.setRequestHeader(_o,_a);_n.withCredentials=!!_h.withCredentials,_e()}catch{this.b({type:"cors"})}}t("H.net.Xhr",Sc);var Vc={method:"GET",headers:{},data:null},Wc="withCredentials"in new XMLHttpRequest,Tc="timeout"in new XMLHttpRequest;function Uc(i,o,s){Wc?i.a.addEventListener(o,s):i.a["on"+o]=s}function Xc(i,o,s){Wc?i.a.removeEventListener(o,s):i.a["on"+o]=null}Sc.prototype.abort=function(){this.a&&(this.a.abort(),this.a&&this.b({type:"abort"}))},Sc.prototype.abort=Sc.prototype.abort,Sc.prototype.b=function(i){var o=i.type;i=this.a;var s;this.f&&clearTimeout(this.f),o==="load"?i instanceof XMLHttpRequest&&i.status!==200&&(s="network"):s=i.readyState===4&&i.status===0&&o=="error"?"cors":o!="error"?o:"network",o=this.b,Xc(this,"timeout",o),Xc(this,"error",o),Xc(this,"load",o),i=i.status===0||s&&s!=="network"?Pc.error():new Pc(i.responseText||null,i),s=this.c,delete this.b,delete this.c,delete this.a,s(i)};function Yc(i,o){var s=[];return i&&s.push(wc(i)),1<arguments.length&&s.push(""+o),s=Error(s.join(" ")),Object.setPrototypeOf(s,Yc.prototype),s}u(Yc,Error),t("H.lang.IllegalOperationError",Yc),Yc.prototype.name="IllegalOperationError";var Zc,$c,ad;function bd(){if(this.constructor=this.constructor,!Ac("STATIC_DB"))throw new D(this.constructor,0);if(this.g=cd(),!this.g)throw new Yc(this.constructor,"This browser does not support IndexedDB");this.a=[],this.c=[],this.Sh=A(this.Sh,this)}var dd,ed;p=bd.prototype,p.put=function(i,o,s,_e){if(!Ac(i)&&!Dc(i))throw new D(this.put,0);if(!fd(o))throw new D(this.put,1);gd(this,function(_n){id(_n.put(o,i),s,_e)},_e)},p.get=function(i,o,s){var _e;if(!Ac(i)&&!Dc(i))throw new D(this.get,0);if(!Da(o))throw new D(this.get,1);return gd(this,function(_n){_e=_n.get(i),id(_e,o,s)},s),{cancel:function(){_e&&(_e.onsuccess=jd)}}},p.remove=function(i,o,s){if(!Ac(i)&&!Dc(i))throw new D(this.remove,0);gd(this,function(_e){id(_e.delete(i),o,s)},s)},p.clear=function(i,o){gd(this,function(s){id(s.clear(),i,o)},o)},p.Sh=function(){var i=this.b.result;i.objectStoreNames.contains("data")||i.createObjectStore("data")};function kd(i,o,s){if(i.b)i.a?(i.a.push(o),s&&i.c.push(s)):i.f?s&&s(i.f):o(i.b.result);else{i.b=i.g.open("H_STATIC_DB",1),i.b.onupgradeneeded=i.Sh;var _e=i.b.onerror=function(){clearTimeout(i.i),i.f=this.error,i.c.forEach(function(_n){_n(i.f)}),delete i.a,delete i.c};i.i=setTimeout(function(){_e.call({error:Error("DbOpenTimeoutError")})},500),i.b.onsuccess=function(){clearTimeout(i.i),i.a?(i.a.forEach(function(_n){_n(this.result)},this),delete i.a,delete i.c):(delete i.b,delete i.f,i.a=[],i.c=[])},i.a.push(o),s&&i.c.push(s)}}function gd(i,o,s){kd(i,function(_e){_e=_e.transaction(["data"],"readwrite"),o(_e.objectStore("data"))},s)}function id(i,o,s){o&&(i.onsuccess=function(){o(this.result)}),s&&(i.onerror=function(){s(this.error)})}function fd(i){var o=Object.prototype.toString.call(i);return o==="[object Blob]"||o==="[object ArrayBuffer]"||Ac(i)||Ea(i)}function ld(){return dd||(dd=new bd),dd}t("H.util.IndexedDBStorage.getInstance",ld);function cd(){return x.indexedDB||x.webkitIndexedDB||x.mozIndexedDB||x.msIndexedDB}function md(){var i="";if(!uc(ed))if(window.location.protocol==="file:"&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)ed=!1;else{try{var o=cd();i="H_TEST_DB";var s=o&&o.open(i,1)}catch{}ed=!!s&&s.onupgradeneeded===null,s&&o.deleteDatabase&&o.deleteDatabase(i)}return ed}t("H.util.IndexedDBStorage.isSupported",md);function nd(){this.wd=this.wd,this.Xa=this.Xa}var od=0;nd.prototype.wd=!1,nd.prototype.D=function(){!this.wd&&(this.wd=!0,this.o(),od!=0)&&(this[Fa]||(this[Fa]=++Ga))},nd.prototype.ob=function(i,o){this.wd?o!==void 0?i.call(o):i():(this.Xa||(this.Xa=[]),this.Xa.push(o!==void 0?Ja(i,o):i))},nd.prototype.o=function(){if(this.Xa)for(;this.Xa.length;)this.Xa.shift()()};function rd(i){i&&typeof i.D=="function"&&i.D()}function sd(i,o){this.type=i,this.currentTarget=this.target=o,this.c=this.a=!1,this.Kk=!0}sd.prototype.stopPropagation=function(){this.a=!0},sd.prototype.preventDefault=function(){this.c=!0,this.Kk=!1},t("H.util.Event",sd),sd.prototype.stopPropagation=sd.prototype.stopPropagation,sd.prototype.stopPropagation=sd.prototype.stopPropagation,sd.prototype.CAPTURING_PHASE=1,sd.prototype.CAPTURING_PHASE=sd.prototype.CAPTURING_PHASE,sd.prototype.AT_TARGET=2,sd.prototype.AT_TARGET=sd.prototype.AT_TARGET,sd.prototype.BUBBLING_PHASE=3,sd.prototype.BUBBLING_PHASE=sd.prototype.BUBBLING_PHASE,sd.prototype.eventPhase=0,sd.prototype.eventPhase=sd.prototype.eventPhase;function td(i,o,s){td.l.constructor.call(this,i,s),this.data=o}u(td,sd),t("H.util.DataEvent",td);function ud(i,o,s){ud.l.constructor.call(this,i,s),this.message=o}u(ud,sd),t("H.util.ErrorEvent",ud);var vd=Math,wd=vd.min,xd=vd.max,yd=vd.round,zd=vd.floor,Ad=vd.ceil,Bd=vd.abs,Cd=vd.log,Dd=vd.sqrt,Ed=vd.pow,Fd=vd.exp,Gd=vd.sin,Hd=vd.asin,Id=vd.cos,Jd=vd.tan,Kd=vd.atan,Ld=vd.atan2,Md=vd.LN2,Nd=vd.PI,Od=Nd/2,Pd=Nd/4,Qd=2*Nd,Rd=3*Nd,Sd=Nd/180,Td=180/Nd,Ud=1/0,Vd=Ed(-2,53),Wd=Wd||function(i){return Cd(i)/Md};function Xd(i,o){var s;return 0>(s=i%o)==0>o?s:s+o}function Yd(i,o,s){return o-=s=s||0,i-=s,i-zd(i/o)*o+s}t("H.math.normalize",Yd);function Zd(i,o,s){return i>s?s:i<o?o:i}t("H.math.clamp",Zd);function $d(i,o,s,_e){return _e||(_e=0),o<s?i>=o-_e&&i<=s+_e:i>=s-_e&&i<=o+_e}function ae(i,o,s,_e,_n,_o){return Dd(Ed((i-_n)*(_e-_o)-(o-_o)*(s-_n),2)/(Ed(s-_n,2)+Ed(_e-_o,2)))}var be={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};t("H.math.CoverType",be);function ce(i,o,s,_e,_n,_o){var _a=s.length,_u=_a,_h=s[0],ty=0,oy=0,hy=0;_e=_e/2||0;var fy=_o||2;_o=fy*(_n?0:1)+1;for(var vy=fy-2;ty!=1&&_u>_o;){_u-=vy;var xy=s[--_u];fy=s[--_u];var wy=s[_u?_u-vy-1:(_a+(_u-vy-1))%_a],By=s[_u?_u-vy-2:(_a+(_u-vy-2))%_a];fy>=i-_e&&fy<=i+_e&&xy>=o-_e&&xy<=o+_e||By>=i-_e&&By<=i+_e&&wy>=o-_e&&wy<=o+_e?ty=1:!ty&&fy===i?(By===i&&(xy<o&&wy>o||xy>o&&wy<o)||(_h<=i&&By>i||_h>=i&&By<i)&&(xy>=o?++oy:++hy),ty=$d(o,xy,wy,_e)&&ae(i,o,fy,xy,By,wy)<=_e?2:0):!ty&&$d(i,fy,By,_e)&&((fy<i&&By>i||fy>i&&By<i)&&(_h=xy+(i-fy)/(By-fy)*(wy-xy),oy+=_h>o,hy+=_h<o),ty=$d(o,xy,wy,_e)&&ae(i,o,fy,xy,By,wy)<=_e?2:0),_h=fy}return!ty&&_n&&hy!==0&&oy%2!==0&&(ty=3),ty}function de(i,o){return ce(i.x,i.y,o,0,!0)!==be.NONE}t("H.math.isPointInsidePolygon",de);function ee(i){for(var o=i.length,s=new Float64Array(2*o),_e=o&&uc(i[0].x);o--;){var _n=i[o],_o=o<<1;s[_o]=_e?_n.x:_n[0],s[_o+1]=_e?_n.y:_n[1]}return s}t("H.math.flatten",ee);function fe(){}t("H.util.ICancelable",fe),fe.prototype.cancel=function(){},fe.prototype.cancel=fe.prototype.cancel;function ge(i,o,s){this.type=i,this.data=o,this.c=ac(),this.resolve=A(this.resolve,this),this.reject=A(this.reject,this),this.priority=he,s!==B&&(this.priority=s),this.Zg().add(this)}var he=1,ie={Eo:0,Ho:he,Co:2};p=ge.prototype,p.then=function(i,o,s){return this.c.Ck.then(i,o,s)},p.resolve=function(i){this.Wd=3,this.c.resolve(i)},p.reject=function(i){this.Wd=5,this.c.reject(i)},p.Wd=0,p.cancel=function(){3>this.Wd&&(this.ke(),this.Zg().remove(this),this.Wd=4)},ge.prototype.cancel=ge.prototype.cancel;function je(i){var o;this.a={};for(o in ie)this.a[ie[o]]=[];this.We=i,this.We.addEventListener("allocatable",A(this.b,this))}t("H.util.JobManager",je);var ke=Object.keys(ie).map(function(i){return ie[i]}).sort().reverse();je.prototype.add=function(i){C(i,ge,this.add,0),this.a[i.priority].push(i),this.b()},je.prototype.contains=function(i){return-1<this.a[i.priority].indexOf(i)},je.prototype.remove=function(i){var o=i.priority,s=this.a[o].indexOf(i);return-1<s?(this.a[o].splice(s,1),!0):(i.Ei&&this.We.tf(i.Ei),!1)},je.prototype.b=function(){ke.forEach(function(i){this.a[i]=this.a[i].filter(function(o){var s;if((s=this.We.Eg(o))!==y){var _e=A(this.We.tf,this.We,s,o);o.Ei=s,o.then(_e,_e),o.Wd=o.jj(s)?1:5}else return!0},this)},this)};function le(i,o,s){var _e=[],_n=arguments.length;return i&&_e.push(wc(i)),1<_n&&(_n=2<_n&&zc(s)?" out of ["+s[0]+"..."+s[1]+"]":"",_e.push("("+o+_n+")")),_e=Error(_e.join(" ")),Object.setPrototypeOf(_e,le.prototype),_e}u(le,Error),t("H.lang.OutOfRangeError",le),le.prototype.name="OutOfRangeError";var me="closure_listenable_"+(1e6*Math.random()|0);function ne(i){return!(!i||!i[me])}var oe=0;function pe(i,o,s,_e,_n){this.listener=i,this.proxy=null,this.src=o,this.type=s,this.capture=!!_e,this.Hf=_n,this.key=++oe,this.Zd=this.lf=!1}function qe(i){i.Zd=!0,i.listener=null,i.proxy=null,i.src=null,i.Hf=null}function re(i){this.src=i,this.a={},this.b=0}re.prototype.add=function(i,o,s,_e,_n){var _o=i.toString();i=this.a[_o],i||(i=this.a[_o]=[],this.b++);var _a=se(i,o,_e,_n);return-1<_a?(o=i[_a],s||(o.lf=!1)):(o=new pe(o,this.src,_o,!!_e,_n),o.lf=s,i.push(o)),o},re.prototype.remove=function(i,o,s,_e){if(i=i.toString(),!(i in this.a))return!1;var _n=this.a[i];return o=se(_n,o,s,_e),-1<o?(qe(_n[o]),Array.prototype.splice.call(_n,o,1),_n.length==0&&(delete this.a[i],this.b--),!0):!1};function te(i,o){var s=o.type;if(!(s in i.a))return!1;var _e=i.a[s],_n=db(_e,o),_o;return(_o=0<=_n)&&Array.prototype.splice.call(_e,_n,1),_o&&(qe(o),i.a[s].length==0&&(delete i.a[s],i.b--)),_o}re.prototype.ma=function(i){i=i&&i.toString();var o=0,s;for(s in this.a)if(!i||s==i){for(var _e=this.a[s],_n=0;_n<_e.length;_n++)++o,qe(_e[_n]);delete this.a[s],this.b--}return o};function ue(i,o){var s=o!==void 0,_e=s?o.toString():"";return Ua(i.a,function(_n){for(var _o=0;_o<_n.length;++_o)if(!s||_n[_o].type==_e)return!0;return!1})}function se(i,o,s,_e){for(var _n=0;_n<i.length;++_n){var _o=i[_n];if(!_o.Zd&&_o.listener==o&&_o.capture==!!s&&_o.Hf==_e)return _n}return-1}var ve=!vb||9<=Number(Fb),we=vb&&!Eb("9");!yb||Eb("528"),xb&&Eb("1.9b")||vb&&Eb("8")||ub&&Eb("9.5")||yb&&Eb("528"),xb&&!Eb("8")||vb&&Eb("9");var xe=function(){if(!ya.addEventListener||!Object.defineProperty)return!1;var i=!1,o=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ya.addEventListener("test",Aa,o),ya.removeEventListener("test",Aa,o)}catch{}return i}();function ye(i,o){if(sd.call(this,i?i.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.b=null,i){var s=this.type=i.type,_e=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.currentTarget=o,o=i.relatedTarget){if(xb){t:{try{rb(o.nodeName);var _n=!0;break t}catch{}_n=!1}_n||(o=null)}}else s=="mouseover"?o=i.fromElement:s=="mouseout"&&(o=i.toElement);this.relatedTarget=o,_e?(this.clientX=_e.clientX!==void 0?_e.clientX:_e.pageX,this.clientY=_e.clientY!==void 0?_e.clientY:_e.pageY,this.screenX=_e.screenX||0,this.screenY=_e.screenY||0):(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType=typeof i.pointerType=="string"?i.pointerType:ze[i.pointerType]||"",this.b=i,i.defaultPrevented&&this.preventDefault()}}u(ye,sd);var ze={2:"touch",3:"pen",4:"mouse"};ye.prototype.stopPropagation=function(){ye.l.stopPropagation.call(this),this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0},ye.prototype.preventDefault=function(){ye.l.preventDefault.call(this);var i=this.b;if(i.preventDefault)i.preventDefault();else if(i.returnValue=!1,we)try{(i.ctrlKey||112<=i.keyCode&&123>=i.keyCode)&&(i.keyCode=-1)}catch{}};var Ae="closure_lm_"+(1e6*Math.random()|0),Be={};function De(i,o,s,_e,_n){if(_e&&_e.once)return Ee(i,o,s,_e,_n);if(Ba(o)=="array"){for(var _o=0;_o<o.length;_o++)De(i,o[_o],s,_e,_n);return null}return s=Fe(s),ne(i)?i.R.add(String(o),s,!1,Ea(_e)?!!_e.capture:!!_e,_n):Ge(i,o,s,!1,_e,_n)}function Ge(i,o,s,_e,_n,_o){if(!o)throw Error("Invalid event type");var _a=Ea(_n)?!!_n.capture:!!_n,_u=He(i);if(_u||(i[Ae]=_u=new re(i)),s=_u.add(o,s,_e,_a,_o),s.proxy)return s;if(_e=Ie(),s.proxy=_e,_e.src=i,_e.listener=s,i.addEventListener)xe||(_n=_a),_n===void 0&&(_n=!1),i.addEventListener(o.toString(),_e,_n);else if(i.attachEvent)i.attachEvent(Je(o.toString()),_e);else if(i.addListener&&i.removeListener)i.addListener(_e);else throw Error("addEventListener and attachEvent are unavailable.");return s}function Ie(){var i=Ke,o=ve?function(s){return i.call(o.src,o.listener,s)}:function(s){if(s=i.call(o.src,o.listener,s),!s)return s};return o}function Ee(i,o,s,_e,_n){if(Ba(o)=="array"){for(var _o=0;_o<o.length;_o++)Ee(i,o[_o],s,_e,_n);return null}return s=Fe(s),ne(i)?i.R.add(String(o),s,!0,Ea(_e)?!!_e.capture:!!_e,_n):Ge(i,o,s,!0,_e,_n)}function Le(i,o,s,_e,_n){if(Ba(o)=="array"){for(var _o=0;_o<o.length;_o++)Le(i,o[_o],s,_e,_n);return null}return _e=Ea(_e)?!!_e.capture:!!_e,s=Fe(s),ne(i)?i.R.remove(String(o),s,_e,_n):i&&(i=He(i))&&(o=i.a[o.toString()],i=-1,o&&(i=se(o,s,_e,_n)),s=-1<i?o[i]:null)?Me(s):!1}function Me(i){if(typeof i=="number"||!i||i.Zd)return!1;var o=i.src;if(ne(o))return te(o.R,i);var s=i.type,_e=i.proxy;return o.removeEventListener?o.removeEventListener(s,_e,i.capture):o.detachEvent?o.detachEvent(Je(s),_e):o.addListener&&o.removeListener&&o.removeListener(_e),(s=He(o))?(te(s,i),s.b==0&&(s.src=null,o[Ae]=null)):qe(i),!0}function Je(i){return i in Be?Be[i]:Be[i]="on"+i}function Ne(i,o,s,_e){var _n=!0;if((i=He(i))&&(o=i.a[o.toString()]))for(o=o.concat(),i=0;i<o.length;i++){var _o=o[i];_o&&_o.capture==s&&!_o.Zd&&(_o=Oe(_o,_e),_n=_n&&_o!==!1)}return _n}function Oe(i,o){var s=i.listener,_e=i.Hf||i.src;return i.lf&&Me(i),s.call(_e,o)}function Ke(i,o){if(i.Zd)return!0;if(!ve){if(!o)t:{o=["window","event"];for(var s=ya,_e=0;_e<o.length;_e++)if(s=s[o[_e]],s==null){o=null;break t}o=s}if(_e=o,o=new ye(_e,this),s=!0,!(0>_e.keyCode||_e.returnValue!=null)){t:{var _n=!1;if(_e.keyCode==0)try{_e.keyCode=-1;break t}catch{_n=!0}(_n||_e.returnValue==null)&&(_e.returnValue=!0)}for(_e=[],_n=o.currentTarget;_n;_n=_n.parentNode)_e.push(_n);for(i=i.type,_n=_e.length-1;!o.a&&0<=_n;_n--){o.currentTarget=_e[_n];var _o=Ne(_e[_n],i,!0,o);s=s&&_o}for(_n=0;!o.a&&_n<_e.length;_n++)o.currentTarget=_e[_n],_o=Ne(_e[_n],i,!1,o),s=s&&_o}return s}return Oe(i,new ye(o,this))}function He(i){return i=i[Ae],i instanceof re?i:null}var Pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fe(i){return Da(i)?i:(i[Pe]||(i[Pe]=function(o){return i.handleEvent(o)}),i[Pe])}function F(){nd.call(this),this.R=new re(this),this.on=this,this.Mg=null}u(F,nd),F.prototype[me]=!0,p=F.prototype,p.Hb=function(){return this.Mg},p.ia=function(i){this.Mg=i},p.addEventListener=function(i,o,s,_e){De(this,i,o,s,_e)},p.removeEventListener=function(i,o,s,_e){Le(this,i,o,s,_e)},p.dispatchEvent=function(i){var o,s=this.Hb();if(s)for(o=[];s;s=s.Hb())o.push(s);s=this.on;var _e=i.type||i;if(typeof i=="string")i=new sd(i,s);else if(i instanceof sd)i.target=i.target||s;else{var _n=i;i=new sd(_e,s),Ya(i,_n)}if(_n=!0,o)for(var _o=o.length-1;!i.a&&0<=_o;_o--){var _a=i.currentTarget=o[_o];_n=_a.ed(_e,!0,i)&&_n}if(i.a||(_a=i.currentTarget=s,_n=_a.ed(_e,!0,i)&&_n,i.a||(_n=_a.ed(_e,!1,i)&&_n)),o)for(_o=0;!i.a&&_o<o.length;_o++)_a=i.currentTarget=o[_o],_n=_a.ed(_e,!1,i)&&_n;return _n},p.o=function(){F.l.o.call(this),this.R&&this.R.ma(void 0),this.Mg=null},p.ed=function(i,o,s){if(i=this.R.a[String(i)],!i)return!0;i=i.concat();for(var _e=!0,_n=0;_n<i.length;++_n){var _o=i[_n];if(_o&&!_o.Zd&&_o.capture==o){var _a=_o.listener,_u=_o.Hf||_o.src;_o.lf&&te(this.R,_o),_e=_a.call(_u,s)!==!1&&_e}}return _e&&s.Kk!=0},t("H.util.EventTarget",F),F.prototype.ia=F.prototype.ia,F.prototype.setParentEventTarget=F.prototype.ia,F.prototype.Hb=F.prototype.Hb,F.prototype.getParentEventTarget=F.prototype.Hb,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.D=F.prototype.D,F.prototype.dispose=F.prototype.D,F.prototype.ob=F.prototype.ob,F.prototype.addOnDisposeCallback=F.prototype.ob,F.prototype.pn=F.prototype.ed,F.prototype.ed=function(i,o,s){var _e,_n,_o=!0,_a=s[s.currentTarget===s.target?"AT_TARGET":o?"CAPTURING_PHASE":(_e=!0,"BUBBLING_PHASE")];return(!_e||(_n=s.type)!=="pointerenter"&&_n!=="pointerleave")&&(s.eventPhase=_a,_o=F.prototype.pn.apply(this,arguments),_e&&this.Hb&&this.Hb()===null&&delete s.eventPhase),_o},F.prototype.Vk=function(i){for(var o,s=this;s&&(o=s.Hb())&&o!==i;)s=o;o||s.ia(i)},F.prototype.setRootParentEventTarget=F.prototype.Vk;function Qe(i){i=i||{};var o=i.callback;this.b=i.label,Da(o)&&(this.callback=o),this.a=!!i.disabled,Qe.l.constructor.call(this)}u(Qe,F),t("H.util.ContextItem",Qe),Qe.prototype.Ce=function(){return this.b},Qe.prototype.getLabel=Qe.prototype.Ce,Qe.prototype.Dc=function(i){return this.b!==i&&(this.b=i,this.dispatchEvent("update")),this},Qe.prototype.setLabel=Qe.prototype.Dc,Qe.prototype.Zb=function(){return this.a},Qe.prototype.isDisabled=Qe.prototype.Zb,Qe.prototype.ta=function(i){return i!==this.a&&(this.a=i,this.dispatchEvent("update")),this},Qe.prototype.setDisabled=Qe.prototype.ta;var Re=new Qe;Qe.SEPARATOR=Re;function Se(i){if(x.document){var o=document.createElement("canvas");return o.width=o.height=1,o.getContext("2d",{Oo:i})}return null}function Te(){return window.devicePixelRatio||1}t("H.util.getPixelRatio",Te);var Ue=/^rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)$/;function Ve(i){var o=We[i],s=x.RegExp;return o||(x.Uint8ClampedArray||(x.Uint8ClampedArray=function(_e){return _e instanceof Number?Array(_e):_e.map(function(_n){return Zd(yd(_n),0,255)})}),i==="none"?o=new Uint8ClampedArray([0,0,0,0]):(Xe.fillStyle="black",Xe.fillStyle=i,Ue.test(Xe.fillStyle)?o=new Uint8ClampedArray([s.$1,s.$2,s.$3,255*s.$4]):(Xe.clearRect(0,0,1,1),Xe.fillRect(0,0,1,1),o=Xe.getImageData(0,0,1,1).data)),We[i]=o),o}function Ye(i){return i!=="none"&&0<Ve(i)[3]}var We=nc(),$e=!!x.VBArray;t("H.util.eval",function(a){return eval(a)});function af(i,o){return i!==B?i:o}function bf(i){return/^<svg/.test(i)?"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(i):i}t("H.util.provide",function(i){var o=ya.$jscomp;if(o&&(typeof o.Wl=="function"&&o.Wl()))throw Error("goog.provide cannot be used within a module.");za(i,void 0)});function cf(i){this.ac=0<+i?vd.round(i):0}cf.prototype.next=function(i){if(this.ac===9007199254740992)throw new le(i,this.ac,[0,9007199254740991]);return this.ac++};var df=new cf,ef=A(df.next,df);function ff(){return!0}function gf(){return!1}function jd(){}var hf=pc([]),jf=pc({});function kf(i){return i.tagName==="CANVAS"?[i]:i.getElementsByTagName("CANVAS")}function lf(i,o,s){var _e;if(o=i.ownerDocument===o?i.cloneNode(!0):o.importNode(i,!0),s)for(i=kf(i),s=kf(o),_e=s.length;_e--;)s[_e].getContext("2d").drawImage(i[_e],0,0);return o}var Xe=Se(!0),mf=Se(!1);function nf(i){var o=i.complete,s=0<i.naturalWidth;if(o&&!s&&$e)try{mf.drawImage(i,0,0),s=!0}catch{}return o&&s}var of=x.BlobBuilder||x.WebKitBlobBuilder||x.MozBlobBuilder;function pf(i,o){if(o=o||"",of){var s=new of;s.append(i),i=s.getBlob(o)}else i=new Blob([i],{type:o});return i}var qf=x.navigator;$c=/Edge\/\d+/.test(qf.appVersion),ad=/(A|a)ndroid/.test(qf.appVersion);function rf(){var i=rf.a;return i||(i=this,rf.a=i,Gc(rf.a),F.call(i),sf(this)),i}u(rf,F),rf.prototype.o=function(){rf.l.o.call(this),sf(this)};function sf(i){i.g=10,i.i=6,i.a=nc(),i.b=nc(),i.c=0}rf.prototype.Eg=function(i){i=i.type;var o=this.a[i]||0;if(this.c<this.g&&o<this.i){var s=++this.f;return this.c++,this.a[i]=o+1,this.b[s+""]=i,s}return y},rf.prototype.tf=function(i){var o=this.b[i];if(!uc(o)||!this.a[o])throw new Yc(this.tf,"Unknown requestId");this.c--,this.a[o]--,this.a[o]||delete this.a[o],delete this.b[i],this.dispatchEvent("allocatable")},rf.prototype.f=-1;function tf(i,o,s,_e){if(!uf[i])throw new D(tf,0,"Mime type is not supported");this.f=i,i=_e?Wa(_e):{},"crossOrigin"in i||(i.crossOrigin="anonymous"),this.a=i,vf.href=o.toString(),ge.call(this,vf.protocol+"//"+vf.hostname,o,s)}u(tf,ge),tf.prototype.jj=function(){return this.b=uf[this.f].call(this),!0},tf.prototype.ke=function(){this.b&&(this.b.abort(),delete this.b)};var uf={"application/json":function(){var i=this,o=wf(this.a),s=o.headers;return o.headers=s=s?Wa(s):{},s.Accept="application/json",new Sc(this.data,function(_e){200<=_e.status&&300>_e.status?i.resolve(_e.json()):i.reject(_e)},o)},"text/plain":function(){var i=this;return new Sc(this.data,function(o){200<=o.status&&300>o.status?i.resolve(o.text()):i.reject(o)},wf(this.a))},image:function(){var i=x.document.createElement("img"),o=this,s=this.data;return i.onload=A(this.resolve,this,i),i.onerror=function(){o.reject(Pc.error())},i.crossOrigin=this.a.crossOrigin,i.src=s,{abort:function(){i.onerror=i.onload=null,$e&&nf(i)||i.removeAttribute("src")}}}};(function(){try{var i=new XMLHttpRequest;i.open("get","/",!0)}catch{i={}}"response"in i&&(uf.arraybuffer=function(){var o=new XMLHttpRequest,s=this,_e=this.a,_n=_e.headers,_o;if(o.open("GET",this.data),xf(o,_e),o.responseType="arraybuffer",_n)for(_o in _n)o.setRequestHeader(_o,_n[_o]);return o.onerror=o.ontimeout=function(){s.reject(Pc.error())},o.onload=function(){s.resolve(new Pc(o.response))},o.send(),o})})();var yf=new je(new rf);tf.prototype.Zg=function(){return yf};var vf=x.document.createElement("a");function wf(i){var o=Wa(i);return delete o.crossOrigin,xf(o,i),o}function xf(i,o){i.withCredentials=o.crossOrigin==="use-credentials"}function G(i,o){this.x=+i,this.y=+o}t("H.math.Point",G),G.prototype.set=G,G.prototype.set=G.prototype.set,G.prototype.clone=function(i){return i?(i.x=this.x,i.y=this.y):i=new G(this.x,this.y),i},G.prototype.clone=G.prototype.clone,G.prototype.add=function(i){return this.x+=i.x,this.y+=i.y,this},G.prototype.add=G.prototype.add,G.prototype.sub=function(i){return this.x-=i.x,this.y-=i.y,this},G.prototype.sub=G.prototype.sub,G.prototype.scale=function(i,o){return this.x*=i,this.y*=o===void 0?i:o,this},G.prototype.scale=G.prototype.scale,G.prototype.round=function(){return this.x=yd(this.x),this.y=yd(this.y),this},G.prototype.round=G.prototype.round,G.prototype.floor=function(){return this.x=zd(this.x),this.y=zd(this.y),this},G.prototype.floor=G.prototype.floor,G.prototype.ceil=function(){return this.x=Ad(this.x),this.y=Ad(this.y),this},G.prototype.ceil=G.prototype.ceil,G.prototype.ga=function(i){return!(!i||this.x!==i.x||this.y!==i.y)},G.prototype.equals=G.prototype.ga,G.prototype.yj=function(i,o){var s=o.x-i.x,_e=o.y-i.y,_n=i;if(s||_e){var _o=((this.x-i.x)*s+(this.y-i.y)*_e)/(s*s+_e*_e);0>=_o?_n=i:1<=_o?_n=o:_n=new G(i.x+_o*s,i.y+_o*_e)}return _n},G.prototype.getNearest=G.prototype.yj,G.prototype.Ta=function(i){return Dd(Ed(this.x-i.x,2)+Ed(this.y-i.y,2))},G.prototype.distance=G.prototype.Ta;function zf(i){if(!i)throw Error("invalid argument");return i instanceof G?i:new G(i.x,i.y)}G.fromIPoint=zf;function Af(i){var o=Bf[i];if(!o)if(i in Cf)o=Bf[i]=i;else{o=Df.length;var s="",_e=i.charAt(0).toUpperCase()+i.substr(1),_n="",_o=!1;for(Ef&&(_n=Ef+_e,_o=_n in Cf);o--&&!_o;)s=Df[o],_n=s+_e,_o=_n in Cf;if(_o&&(Ef=s),o=_o?_n:null)Bf[i]=o;else throw Error("Could not find any variant of CSS property ["+i+"]")}return o}t("H.dom.cssPrefixer.prefix",Af);var Df=["O","Ms","ms","Moz","Webkit"],Bf={},Ef="",Cf=document.createElement("span").style;function Ff(i,o,s,_e){if(!i||!o||!s)throw new D(Ff,B,"Must specify name, version and revision parameter");this.name=i,this.version=o,this.revision=s,_e&&Ya(this,_e)}t("H.util.BuildInfo",Ff),Ff.prototype.toString=function(){var i,o=[];for(i in this)Ac(this[i])&&o.push(this[i]);return o.join(";")};var Gf={};function Hf(i,o,s,_e){if(!i)throw new D(Hf,1,"Must specify a name parameter");return Gf[i]||(Gf[i]=new Ff(i,o,s,_e))}Ff.get=Hf;function If(){If.l.constructor.call(this),this.a=Jf(this),this.f=nc(),this.c=A(this.c,this),this.a.addEventListener("message",this.c),this.b={}}u(If,F),If.prototype.o=function(){this.a.terminate()},If.prototype.g=function(i){var o=i.type,s=!!this.f[o],_e=i.data,_n=Kf++,_o=_e&&_e.vo?_e.vo:B,_a=!0;return s?(this.b[_n]=i,Lf(this,o,_n,_e&&_e.message,_o)):(i.reject(new D(this.g,0,"processor_not_found")),_a=!1),_a},If.prototype.c=function(i){i=i.data;var o=this.b[i.taskId],s=i.taskId,_e=i.data,_n=this;if(i.type===2)new tf("arraybuffer",_e).then(function(_o){return _o.arrayBuffer()}).then(function(_o){_n.a.postMessage(["3",s,[_o]],[_o])},function(){_n.a.postMessage(["3",s,[null,"ERROR"]])});else{if(o){switch(i.type){case 1:o.resolve(_e);break;case 0:o.reject(_e)}delete this.b[s]}this.dispatchEvent(new sd(this.A.IDLE))}};var Kf=0;function Mf(i,o,s){var _e=Kf++,_n;return i.b[_e]=_n=ac(),Lf(i,o,_e,s),_n.Ck}function Lf(i,o,s,_e,_n){_e===B||Ca(_e)||(_e=[_e]);try{i.a.postMessage([o,s,_e],_n)}catch(_o){i=i.b[s],i.reject(_o.message)}}If.prototype.A={IDLE:"idle",Gi:"error"},If.prototype.i=function(i,o){var s=this.j||(this.j=new sd(this.A.Gi));s.data=o,delete this.f[i],this.dispatchEvent(s)};function Jf(a){var b=x.H.__bootstrap__;if(b=Da(b)?(""+b).replace(/^[^{]+{((.|[\r\n])+?)}\s*$/,"$1"):""+b,x.Worker&&x.URL)try{var c=new x.Worker(x.URL.createObjectURL(pf(b,"application/javascript")))}catch{}return c||(a=new Nf(a),function(){eval("var self = arguments[0];"+b)}(),c=new Of(a)),c}function Of(i){F.call(this),this.a=i}u(Of,F),Of.prototype.postMessage=function(i){x.setTimeout(A(this.b,this,i),0)},Of.prototype.b=function(i){var o=new sd("message");o.data=i,this.a.dispatchEvent(o)},Of.prototype.terminate=function(){this.a.D(),this.D()};function Nf(i){F.call(this),this.a=i,this.addEventListener=A(this.addEventListener,this),this.removeEventListener=A(this.removeEventListener,this),this.postMessage=A(this.postMessage,this),this.eval=A(eval,this)}u(Nf,F),Nf.prototype.postMessage=function(i){var o=new sd("message");o.data=i,x.setTimeout(A(this.a.c,this.a,o),0)};function Pf(){var i=Qf;return i||(i=Qf=this,F.call(i),Rf(this)),i}var Qf;u(Pf,F),Pf.prototype.o=function(){Pf.l.o.call(this),Rf(this)};function Rf(i){var o=i.b,s;if(o)for(s=o.length;s--;)o[s].D();i.b=[],Gc(i.b),i.c={},i.f=nc()}Pf.prototype.Eg=function(i){var o;if(i=i.type,o=this.f[i]){var s=this.b,_e=s[0];_e||(_e=s[0]=new If,this.ob(Ka(rd,_e)),Va(this.c)||(s=x.Object.keys(this.c),Mf(_e,"0",s))),s=_e,s.f[i]||(s.f[i]=o,Mf(s,"1",[i,Da(o)?o+"":o]).then(jd,A(s.i,s,i)))}else throw new Yc(this.Eg,'Unknown type "'+i+'"');return _e},Pf.prototype.tf=function(){},Pf.prototype.a=function(i,o){var s=this.f,_e=s[i];if(_e){if(o!==_e)throw new Yc(this.a,'Type "'+i+'" is already registered')}else s[i]=o};function Sf(i,o,s){ge.call(this,i,o,s)}var Tf;u(Sf,ge),Sf.prototype.Zg=function(){return Tf||(Tf=new je(new Pf)),Tf},Sf.prototype.ke=function(){},Sf.prototype.jj=function(i){return i.g(this)};function Uf(i,o,s,_e,_n,_o){var _a,_u,_h=i.length,ty,oy;if(_h)for(_a=[];_h--;){var hy=i[_h],fy=hy.length,vy=0;for(ty=1;ty<fy;ty++)if(oy=Vf(hy[ty-1],hy[ty],s,o,_e,_n)){var xy=oy[0],wy=oy[1];vy&&vy.ga(xy)?_u.push(wy):_a.push(_u=oy),vy=wy,_o&&(ty=fy,_h=0)}}else _a=i;return _a}t("H.math.clipping.clipStrips",Uf);function Vf(i,o,s,_e,_n,_o){var _a=i.x;i=-i.y;var _u=o.x;if(o=-o.y,s=-s,_o=-_o,_a>_u){if(_u>_n||_a<_e)return;var _h=_a,ty=i;_a=_u,i=o,_u=_h,o=ty,_h=1}else if(_a>_n||_u<_e)return;if(i>o){if(o>s||i<_o)return;var oy=1;i=-i,o=-o,ty=_o,_o=-s,s=-ty}else if(i>s||o<_o)return;if(_a<_e){if((i+=(_e-_a)*(o-i)/(_u-_a))>s)return;_a=_e}if(i<_o){if((_a+=(_o-i)*(_u-_a)/(o-i))>_n)return;i=_o}return _u>_n&&(o=i+(_n-_a)*(o-i)/(_u-_a),_u=_n),o>s&&(_u=_a+(s-i)*(_u-_a)/(o-i),o=s),oy&&(i=-i,o=-o),_h?[new G(_u,-o),new G(_a,-i)]:[new G(_a,-i),new G(_u,-o)]}function Wf(i,o,s){i=Xf(i,!0),o=Xf(o,!1);var _e,_n,_o={},_a=_e=1;switch(~~(s||0)){case 1:_a=_e=0;break;case 2:_e=0,_a=1;break;case 3:_e=1,_a=0}s=_e;var _u=_a;if(o&&i){for(o.oe=new Yf(o.x,o.y,null,Zf(o)),i.oe=new Yf(i.x,i.y,null,Zf(i)),_a=o;_a.next;_a=_a.next)if(!_a.Va){for(_e=i;_e.next;_e=_e.next)if(!_e.Va){var _h=$f(_a.next),ty=$f(_e.next);if(_n=ag(_a,_h,_e,ty,_o)){_n=_o.ql;var oy=_o.rl,hy=_o.yo,fy=_o.zo;_n=new Yf(hy,fy,null,null,null,null,!0,0,0,_n),bg(_n,_a,_h),_h=new Yf(hy,fy,null,null,null,null,!0,0,0,oy),bg(_h,_e,ty),_n.Mh=_h,_h.Mh=_n}}}for(_o=de(o,cg(i)),s&&(_o=!_o),_a=o;_a;_a=_a.next)_a.Va&&(_a.oh=_o,_o=!_o);for(_o=de(i,cg(o)),_u&&(_o=!_o),_e=i;_e.next;_e=_e.next)_e.Va&&(_e.oh=_o,_o=!_o);for(dg(o),dg(i);(i=eg(o))!=o;){for(s=null;!i.rg;i=i.Mh){for(_o=i.oh;s=new Yf(i.x,i.y,s),s.artificial=i.Va||i.Sj,i.rg=1,i=_o?i.next:i.bc,!!i;)if(i.Va){i.rg=1;break}if(!i)break}s.Nh=vy||null;var vy=s}return vy}}t("H.math.clipping.clipPolygon",Wf);function Yf(i,o,s,_e,_n,_o,_a,_u,_h,ty){this.x=i,this.y=o,this.next=s||null,this.bc=_e||null,this.Nh=_n||null,this.Mh=_o||null,this.Va=!!_a,this.oh=!!_u,this.rg=_h||0,this.alpha=ty||0,_e&&(_e.next=this),s&&(s.bc=this),this.Sj=!1,this.oe=null}function $f(i){for(;i&&i.Va;)i=i.next;return i}function Zf(i){if(i)for(;i.next;)i=i.next;return i}function eg(i){var o=i;if(o)do o=o.next;while(o!=i&&(!o.Va||o.Va&&o.rg));return o}function dg(i){var o=Zf(i);o.bc.next=i,i.bc=o.bc}function ag(i,o,s,_e,_n,_o){var _a,_u=o.x-i.x,_h=o.y-i.y,ty=_e.x-s.x,oy=_e.y-s.y,hy=_u*oy-_h*ty;return!hy||(ty=((s.x-i.x)*oy-(s.y-i.y)*ty)/hy,hy=(_h*(s.x-i.x)-_u*(s.y-i.y))/hy,0>ty||1<ty||0>hy||1<hy)?0:(ty===0?_a=i:ty===1?_a=o:hy===0?_a=s:hy===1&&(_a=_e),_a&&!_o?(_a.x+=2480549651603763e-20,_a.y+=7321997314118067e-20,_a.oe&&(_a.oe.x=_a.x,_a.oe.y=_a.y),ag(i,o,s,_e,_n)):(_n.yo=i.x+ty*_u,_n.zo=i.y+ty*_h,_n.ql=ty,_n.rl=hy,1))}function cg(i){for(var o=[];i;)o.push(i.x,i.y),i=i.next;return o}function bg(i,o,s){for(o=o.next;o!==s&&o.alpha<=i.alpha;)o=o.next;i.next=o,i.bc=o.bc,i.next.bc=i,i.bc.next=i}function Xf(i,o){for(var s,_e=null,_n=0,_o=i.length;_n<_o;_n++)s=new Yf(i[_n].x,i[_n].y,_e),s.Sj=o,(s.next=_e)&&(_e.bc=s),_e=s;return _e}function fg(i,o,s){var _e=Zd(+i,-90,90);if(o&&E(_e))throw new D(o,s,i);return _e}function gg(i,o,s){var _e=+i;if((-180>_e||180<_e)&&(_e=Xd(_e+180,360)-180),o&&E(_e))throw new D(o,s,i);return _e}function ig(i,o,s){var _e;if(i!==B&&E(_e=+i)&&o)throw new D(o,s,i);return _e}function jg(i,o){return 0>i!=0>o&&180<Bd(o-i)}t("H.geo.isDBC",jg);function kg(){vc(this,kg)}t("H.geo.AbstractGeometry",kg),kg.prototype.getBoundingBox=kg.prototype.J,kg.prototype.equals=kg.prototype.ga,kg.prototype.nb="",kg.prototype.Cb="",kg.prototype.toString=function(){return this.Yc([this.nb.toUpperCase()," "]).join("")},kg.prototype.toString=kg.prototype.toString,kg.prototype.Ec=function(){return{type:this.Cb,coordinates:this.Xc()}},kg.prototype.toGeoJSON=kg.prototype.Ec,kg.prototype.W=function(){return{type:this.nb,coordinates:this.kc(),boundingBox:this.J().W()}},kg.prototype.forWorkerMessage=kg.prototype.W;function lg(i,o,s){this.lat=fg(i,lg,0),this.lng=gg(o,lg,1),s!==B&&(this.alt=ig(s,lg,2))}u(lg,kg),t("H.geo.Point",lg),lg.prototype.ga=function(i){return this===i||!!i&&this.lat===i.lat&&this.lng===i.lng&&(this.alt||0)===(i.alt||0)},lg.prototype.equals=lg.prototype.ga,lg.prototype.Ta=function(i){if(this===i||this.lat===i.lat&&this.lng===i.lng)i=0;else{var o=this.lat*Sd,s=i.lat*Sd;i=1274200158e-2*Hd(wd(1,Dd(Ed(Gd((o-s)/2),2)+Id(o)*Id(s)*Ed(Gd((this.lng*Sd-i.lng*Sd)/2),2))))}return i},lg.prototype.distance=lg.prototype.Ta,lg.prototype.sg=function(i,o,s){var _e;if(s){if(_e=o/637100079e-2){o=i*Sd,i=Sd*this.lat;var _n=Gd(i);s=Gd(_e);var _o=Id(_e);_e=Sd*this.lng;var _a=Id(i);i=Hd(_a*Id(o)*s+_n*_o),o=Ld(Gd(o)*_a*s,_o-_n*Gd(i)),o=(_e+o+Nd)%(2*Nd)-Nd,o*=Td,_n=new lg(i*Td,(o+540)%360-180)}return _n||this}return i=(i%360+360)%360,(i+90)%180===0?(i=this.lng+o/(637100079e-2*Qd*Id(this.lat*Sd))*(i===270?-360:360),new lg(this.lat,(i+540)%360-180)):((o/=637100079e-2)&&(i*=Sd,_n=this.lat*Sd,s=this.lng*Sd,_e=_n+o*Id(i),_o=_e-_n,_a=Cd(Jd(_e/2+Pd)/Jd(_n/2+Pd)),_a=E(_o/_a)?Id(_n):_o/_a,i=o*Gd(i)/_a,Bd(_e)>Od&&(_e=0<_e?Nd-_e:-(Nd+_e)),_e=new lg(_e*Td,((s+i+Rd+(Bd(_n+_o)>Od?Nd:0))%Qd-Nd)*Td)),_e||this)},lg.prototype.walk=lg.prototype.sg,lg.prototype.J=function(){return new K(this.lat,this.lng,this.lat,this.lng)},lg.prototype.getBoundingBox=lg.prototype.J;function mg(i,o,s){var _e=Ea(i)&&!(E(i.lat=fg(i.lat))||E(i.lng=gg(i.lng))||i.alt!==B&&E(i.alt=ig(i.alt)));if(!_e&&o)throw new D(o,s,i);return _e}lg.validate=mg;function ng(i){if(!i)throw new D(ng,0,i);return new lg(i.lat,i.lng,i.alt)}lg.fromIPoint=ng,p=lg.prototype,p.nb="Point",p.Yc=function(i){return i.push("(",this.lng," ",this.lat,")"),i},p.Cb="Point",p.Xc=function(){return[this.lng,this.lat,this.alt||0]},p.kc=function(){return[this.lat,this.lng,this.alt||0]};function K(i,o,s,_e){og(this,fg(i,K,0),gg(o,K,1),fg(s,K,2),gg(_e,K,3))}u(K,kg),t("H.geo.Rect",K),K.prototype.nb="Polygon",K.prototype.Yc=function(i){var o=this.c,s=this.a,_e=this.f,_n=this.b;return i.push("(","(",s," ",o,",",_n," ",o,",",_n," ",_e,",",s," ",_e,",",s," ",o,")",")"),i},K.prototype.ga=function(i){var o=this===i;return!o&&C(i,K)&&(o=this.c===i.c&&this.a===i.a&&this.f===i.f&&this.b===i.b),o},K.prototype.equals=K.prototype.ga,K.prototype.clone=function(){return new K(this.c,this.a,this.f,this.b)},K.prototype.clone=K.prototype.clone;function og(i,o,s,_e,_n){return i.a=s,i.b=_n,o<_e&&(s=o,o=_e,_e=s),i.c=o,i.f=_e,i.j=i.g=i.i=null,i}K.prototype.Ib=function(){return this.j||(this.j=new lg(this.c,this.a)),this.j},K.prototype.getTopLeft=K.prototype.Ib,K.prototype.Eb=function(){return this.g||(this.g=new lg(this.f,this.b)),this.g},K.prototype.getBottomRight=K.prototype.Eb,K.prototype.Vm=function(){return this.c},K.prototype.getTop=K.prototype.Vm,K.prototype.Ql=function(){return this.f},K.prototype.getBottom=K.prototype.Ql,K.prototype.sm=function(){return this.a},K.prototype.getLeft=K.prototype.sm,K.prototype.Lm=function(){return this.b},K.prototype.getRight=K.prototype.Lm,K.prototype.Za=function(){return this.i||(this.i=new lg(this.f+(this.c-this.f)/2,pg(this.a,this.ub()))),this.i},K.prototype.getCenter=K.prototype.Za,K.prototype.ub=function(){return qg(this.a,this.b)},K.prototype.getWidth=K.prototype.ub,K.prototype.Jd=function(){return this.c-this.f},K.prototype.getHeight=K.prototype.Jd,K.prototype.vb=function(){return this.a>this.b},K.prototype.isCDB=K.prototype.vb,K.prototype.Kf=function(){return!this.ub()&&!this.Jd()},K.prototype.isEmpty=K.prototype.Kf,K.prototype.J=function(){return new K(this.c,this.a,this.f,this.b)},K.prototype.getBoundingBox=K.prototype.J,K.prototype.pf=function(i,o,s){var _e=this.Za();return s||(i=fg(i,this.pf,0),o=gg(o,this.pf,1)),o=this.Sc(i,o,s),i=o.Za(),i.lat===_e.lat&&i.lng===_e.lng&&this.Jd()===o.Jd()&&this.ub()===o.ub()},K.prototype.containsLatLng=K.prototype.pf,K.prototype.bd=function(i,o){return o||mg(i,this.bd,0),this.pf(i.lat,i.lng,o)},K.prototype.containsPoint=K.prototype.bd,K.prototype.Kg=function(i,o){var s=this.Za();if(!o&&!C(i,K))throw new D(this.Kg,0,i);return o=this.$b(i,o),i=o.Za(),i.lat===s.lat&&i.lng===s.lng&&this.Jd()===o.Jd()&&this.ub()===o.ub()},K.prototype.containsRect=K.prototype.Kg,K.prototype.Sc=function(i,o,s,_e){if(!s){if(E(i=fg(i)))throw new D(this.Sc,0,i);if(E(o=gg(o)))throw new D(this.Sc,1,o)}return rg(this.c,this.a,this.f,this.b,i,o,i,o,_e)},K.prototype.mergeLatLng=K.prototype.Sc,K.prototype.lk=function(i,o,s){return o||mg(i,this.lk,0),this.Sc(i.lat,i.lng,o,s)},K.prototype.mergePoint=K.prototype.lk,K.prototype.$b=function(i,o,s){if(!o&&!C(i,K))throw new D(this.$b,0,i);return rg(this.c,this.a,this.f,this.b,i.c,i.a,i.f,i.b,s)},K.prototype.mergeRect=K.prototype.$b,K.prototype.vc=function(i,o,s,_e,_n,_o){return _n||(i=fg(i,this.vc,0),o=gg(o,this.vc,1),s=fg(s,this.vc,2),_e=gg(_e,this.vc,3)),rg(this.c,this.a,this.f,this.b,i,o,s,_e,_o)},K.prototype.mergeTopLeftBottomRight=K.prototype.vc,K.prototype.jd=function(i,o){var s=this.a<=this.b,_e=i.a<=i.b,_n=this.a<i.b,_o=i.a<this.b;if(!o&&!C(i,K))throw new D(this.jd,0,i);return this.f<=i.c&&i.f<=this.c&&(!s&&(!_e||_n||_o)||!_e&&(_n||_o)||_n&&_o)},K.prototype.intersects=K.prototype.jd;function qg(i,o){return i=o-i,i+(0>i?360:0)}function pg(i,o){return i+=o/2,i-(180<i?360:0)}function rg(i,o,s,_e,_n,_o,_a,_u,_h){s=wd(s,_a),i=xd(i,_n),_n=qg(o,_e);var ty=pg(o,_n);_a=qg(_o,_u);var oy=pg(_o,_a)-ty;if(oy+=0>oy-1e-6?360:0,180>oy-1e-6){ty=o;var hy=_u}else oy=360-oy,ty=_o,hy=_e;return oy=oy+_n/2+_a/2,360<=oy+5e-7?(ty=-180,hy=180):oy-5e-7<_n?(ty=o,hy=_e):oy-5e-7<_a&&(ty=_o,hy=_u),_h?og(_h,i,ty,s,hy):new K(i,ty,s,hy)}K.merge=rg;function sg(i,o,s){return s||(mg(i,sg,0),mg(o,sg,1)),new K(i.lat,i.lng,o.lat,o.lng)}K.fromPoints=sg;function tg(i,o){var s=1,_e=i.length,_n=null;if(!Ca(i))throw new D(tg,0,i);if(0<_e){var _o=i[0];for(_n=sg(_o,_o,o);s<_e;s++)_o=i[s],_n.Sc(_o.lat,_o.lng,o,_n)}return _n}K.coverPoints=tg;function ug(i,o){var s=3,_e=i.length,_n;if(!(o||i&&i.length!=null))throw new D(ug,0,i);if(0<_e)for(_n=new K(i[0],i[1],i[0],i[1]);s<_e;s+=3)_n.Sc(i[s],i[s+1],o,_n);return _n}K.coverLatLngAlts=ug;function vg(i,o){var s=1,_e=i.length,_n;if(o&&(!i||i.length==null))throw new D(vg,0,i);if(0<_e)for(_n=new K(i[0].c,i[0].a,i[0].f,i[0].b);s<_e;s++)_n.$b(i[s],o,_n);return _n}K.coverRects=vg,K.prototype.Jk=function(i,o){var s=this.a,_e=this.c,_n=this.b,_o=this.f,_a=this.Za().lng;mg(i,this.Jk,0);var _u=i.lat-_o-(_e-_o)/2,_h=i.lng-_a;return _h=180<_h||-180>_h?-(_a+i.lng):_h,i=s+(0>_h?2*_h:0),i=-180>i?360+i:i,_n+=0<_h?2*_h:0,_n=180<_n?_n-360:_n,_e=0<_u?_e+2*_u:_e,90<=_e&&(_e=90),_o=0>_u?_o+2*_u:_o,-90>=_o&&(_o=-90),o?og(o,_e,i,_o,_n):new K(_e,i,_o,_n)},K.prototype.resizeToCenter=K.prototype.Jk,K.prototype.Cb="Polygon",K.prototype.Xc=function(){return[[this.a,this.c,0],[this.b,this.c,0],[this.b,this.f,0],[this.a,this.f,0],[this.a,this.c,0]]},K.prototype.W=function(){return this.kc()},K.prototype.kc=function(){return[this.c,this.a,this.f,this.b]};function wg(i,o,s,_e,_n,_o){vc(this,wg),this.c=i||10,this.b=null,this.f=_e||0,this.g=_n||0,this.i=o||1,this.j=s||1,this.s=!!_o,this.flush()}function xg(i){var o=i.b;if(i.s&&!o){var s=i.head;(s.entries||s[0]||s[1]||s[2]||s[3])&&(o=[s],o=yg([o,o,o,o],[s[6],s[7],s[4],s[5]]),i.b=o)}return o}function yg(i,o){var s,_e,_n,_o,_a=0;for(s=3;0<=s;s--){var _u=s+4,_h=0<s%3,ty=[],oy=o[s],hy=i[s];for(_e=hy.length;_e--;){var fy=hy[_e];if(_n=fy.entries)for(_o=_n.length;_o--;){var vy=_n[_o].a(s);(_h?vy>oy:vy<oy)&&(oy=vy)}for(_o=4;_o--;)(_n=fy[_o])&&(_h?_n[_u]>oy:_n[_u]<oy)&&ty.push(_n)}_a+=ty.length,o[s]=oy,i[s]=ty}return _a&&(o=yg(i,o)),o}function zg(i,o,s){var _e,_n;if(i.s&&(_e=i.b))for(_n=3;0<=_n;_n--){var _o=o.a(_n);if(_n%3?_o>=_e[_n]:_o<=_e[_n])if(s)_e[_n]=_o;else{i.b=null;break}}}wg.prototype.remove=function(i){var o,s,_e,_n=!1;return i&&(o=i.node)&&o.b===this&&(s=o.entries)&&0<=(_e=s.indexOf(i))&&(s.splice(_e,1),this.m(o),zg(this,i,!1),_n=!0),_n},wg.prototype.flush=function(){var i=new Ag(B,NaN,this.f-this.i,this.g-this.j,this.f+this.i,this.g+this.j);i.b=this,this.head=this.a=i,this.b=null};function Bg(i,o){var s=i.head,_e;if(o){var _n=o;if(_n!==s)for(s=_n;_n=_n.parent;)(_n.entries||1<_n.a)&&(s=_n)}else for(;!s.entries&&2>(_e=s.a)&&_e;)s=_n;i.head=s}wg.prototype.Va=function(i,o,s,_e,_n,_o){var _a=[],_u=this.head,_h=this.a;return i<=_u[5]&&o<=_u[6]&&(_n?s>=_u[7]:s>_u[7])&&(_o?_e>=_u[4]:_e>_u[4])&&Cg(this,_u,_a,i,o,s,_e,_o||_e>=_h[6],_n||s>=_h[5]),_a};function Cg(i,o,s,_e,_n,_o,_a,_u,_h){var ty=o.entries,oy=o[7],hy=o[4],fy=o[5],vy=o[6],xy=o[8],wy=o[9],By;if(ty){var Sy=ty.length;if(_n>hy||_e>oy||_a<vy||_o<fy)for(;Sy--;){oy=ty[Sy],hy=oy.a(3),fy=oy.a(0),vy=oy.a(1);var Ay=oy.a(2);Ay>=_n&&vy>=_e&&(fy<_a||_u&&fy==_a)&&(hy<_o||_h&&hy==_o)&&s.push(oy)}else for(;Sy--;)s.push(ty[Sy])}(_o>xy||_h&&_o==xy)&&(_n<wy&&(By=o[1])&&Cg(i,By,s,_e,_n,_o,_a,_u,_h),(_a>wy||_u&&_a==wy)&&(By=o[3])&&Cg(i,By,s,_e,_n,_o,_a,_u,_h)),_e<xy&&(_n<wy&&(By=o[0])&&Cg(i,By,s,_e,_n,_o,_a,_u,_h),(_a>wy||_u&&_a==wy)&&(By=o[2])&&Cg(i,By,s,_e,_n,_o,_a,_u,_h))}wg.prototype.Fc=ba(1);var Dg=0;function Ag(i,o,s,_e,_n,_o){this.c=o,i&&(this.parent=i,this.b=i.b,o&1?(s=i[8],_n=i[5]):(s=i[7],_n=i[8]),o&2?(_e=i[9],_o=i[6]):(_e=i[4],_o=i[9])),this[7]=s,this[5]=_n,this[8]=(s+_n)/2,this[4]=_e,this[6]=_o,this[9]=(_e+_o)/2}Ag.prototype.a=0;function Eg(i,o){return i[o]||(++i.a,i[o]=new Ag(i,o))}Ag.prototype.removeChild=function(i){var o=i.c;this[o]===i&&(delete this[o],delete i.parent,--this.a)},Ag.prototype.Fc=ba(0);function Fg(i,o){(i.entries||(i.entries=[])).push(o),o.node=i}function Gg(i,o,s,_e,_n){var _o=i[5],_a=i[6];return i[7]<=o&&i[4]<=s&&(_o>_e||_o===_e&&_o===i.b.a[5])&&(_a>_n||_a===_n&&_a===i.b.a[6])}function Hg(i,o,s,_e,_n,_o){Hg.l.constructor.apply(this,arguments)}u(Hg,wg),Hg.prototype.m=function(i){for(var o,s,_e=this.head;i;){if((!(o=i.entries)||!o.length)&&(o&&delete i.entries,!i.a&&(s=i.parent))){s.removeChild(i),_e===i&&(_e=s),i=s;continue}break}this.head!==_e&&(this.head=_e,Bg(this))};function Ig(i,o,s,_e,_n){if(Gg(i.a,o,s,_e,_n))return Jg(i,i.a,o,s,_e,_n,i.c);throw Error("Coordinates out of bounds")}Hg.prototype.sc=function(i,o){return Ig(this,i,o,i,o)};function Jg(i,o,s,_e,_n,_o,_a){var _u=o[8],_h=o[9],ty=0,oy=0;return _a&&(_n<_u||(ty=+(s>=_u)))&&(_o<_h||(oy=+(_e>=_h)))?s=Jg(i,Eg(o,ty|oy<<1),s,_e,_n,_o,_a-1):(Fg(o,s=new Kg(s,_e,_n,_o)),zg(i,s,!0),Bg(i,o)),s}function Kg(i,o,s,_e){this.id=Dg++,this[0]=o,this[1]=s,this[2]=_e,this[3]=i}Kg.prototype.a=function(i){return this[i]};function Lg(i){this.g=new Hg(+i||10,180,90,0,0,!0),this.f=[],this.i=!1,this.a=this.b=this.c=null}t("H.geo.QuadTree",Lg),p=Lg.prototype,p.xh=0,p.Mc=function(){return this.xh},p.vb=function(){return this.i},p.J=function(){var i,o;if(!this.c){var s=[];!this.b&&(i=xg(this.g))&&(this.b=new K(-i[0],i[3],-i[2],i[1])),(o=this.b)&&s.push(o);var _e,_n,_o;if(!this.a&&(_o=(_n=this.f).length)){i=90;var _a=360,_u=-90;for(_e=0;_o--;){var _h=_n[_o];i=wd(i,_h[0]),_a=wd(_a,_h[3]),_u=xd(_u,_h[2]),_e=xd(_e,_h[1])}this.a=new K(-i,_a,-_u,_e-360)}(o=this.a)&&s.push(o),(o=s[0])&&(s[1]&&(o=o.$b(s[1],!0)),this.c=o)}return this.c};function Mg(i,o,s,_e,_n,_o){return _o?(_o=new Kg(_n,-o,s+360,-_e),i.f.push(_o),i.i=!0,i.a&&i.a.vc(o,s,_e,_n,!0,i.a)):(_o=Ig(i.g,s,-o,_n,-_e),i.b&&i.b.vc(o,s,_e,_n,!0,i.b)),++i.xh,i.c=null,_o}p.sc=function(i){var o=i.lng;return i=i.lat,Mg(this,i,o,i,o,!1)},p.Pj=function(i){var o=i.Ib(),s=i.Eb();return(i=i.vb())?Mg(this,o.lat,s.lng,s.lat,o.lng,i):Mg(this,o.lat,o.lng,s.lat,s.lng,i)},Lg.prototype.insertBoundingBox=Lg.prototype.Pj,Lg.prototype.remove=function(i){var o;if(i.node){var s=this.g.remove(i);this.b=null}else i=(o=this.f).indexOf(i),(s=0<=i)&&(o.splice(i,1),this.i=0<o.length,this.a=null);return s&&(--this.xh,this.c=null),s},Lg.prototype.remove=Lg.prototype.remove;function Ng(i,o,s,_e,_n,_o,_a){i=i.f;var _u=i.length,_h=[],ty;if(_u){var oy=s+360;for(ty=_n+360;_u--;){var hy=i[_u];(Og(hy,o,s,_e,_n,_o,_a)||Og(hy,o,oy,_e,ty,_o,_a))&&_h.push(hy)}}return _h}function Og(i,o,s,_e,_n,_o,_a){var _u=i[3],_h=i[0],ty=i[1];return i=i[2],(_o?_h<=_e:_h<_e)&&(_a?_u<=_n:_u<_n)&&i>=o&&ty>=s}function Pg(i,o){var s,_e,_n;if(s=o.length){var _o=i.length;for(_e={};_o--;)_e[i[_o].id]=1;for(;s--;)(_n=o[s]).id in _e||i.push(_n)}}Lg.prototype.Jf=function(i,o,s){var _e=this.g,_n=i.Ib(),_o=i.Eb(),_a=-_n.lat;_n=_n.lng;var _u=-_o.lat;return _o=_o.lng,!o&&_a===_u||!s&&_n===_o?i=[]:i.vb()?(i=_e.Va(-180,_a,_o,_u,s,o),Pg(i,_e.Va(_n,_a,180,_u,!1,o)),Pg(i,Ng(this,_a,_o,_u,_n+360,o,s))):(i=_e.Va(_n,_a,_o,_u,s,o),Pg(i,Ng(this,_a,_n,_u,_o,o,s))),i},Lg.prototype.intersectBoundingBox=Lg.prototype.Jf;var Qg=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Rg=typeof BigInt<"u"?BigInt:Number;function Sg(i){var o=Rg(0),s=Rg(0),_e=[];if(i.split("").forEach(function(_n){_n=Rg(Qg[_n.charCodeAt(0)-45]),o|=(_n&Rg(31))<<s,(_n&Rg(32))===Rg(0)?(_e.push(o),o=Rg(0),s=Rg(0)):s+=Rg(5)}),0<s)throw Error("Invalid encoding");return _e}function Tg(i){return i&Rg(1)&&(i=~i),i>>=Rg(1),+i.toString()}function Ug(i){var o=i.precision===void 0?5:i.precision,s=i.df===void 0?0:i.df,_e=i.ef===void 0?0:i.ef;i=i.Wh;var _n=Math.pow(10,o),_o=Math.pow(10,_e);o=Vg(o,s,_e);var _a=[],_u=Rg(0),_h=Rg(0),ty=Rg(0);return i.forEach(function(oy){var hy=Rg(Math.round(oy[0]*_n));_a.push(Wg(hy-_u)),_u=hy,hy=Rg(Math.round(oy[1]*_n)),_a.push(Wg(hy-_h)),_h=hy,s&&(oy=Rg(Math.round(oy[2]*_o)),_a.push(Wg(oy-ty)),ty=oy)}),(o instanceof Array?o:ha(fa(o))).concat(_a instanceof Array?_a:ha(fa(_a))).join("")}function Vg(i,o,s){if(0>i||15<i)throw Error("precision out of range. Should be between 0 and 15");if(0>s||15<s)throw Error("thirdDimPrecision out of range. Should be between 0 and 15");if(0>o||7<o||o===4||o===5)throw Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");return i|=s<<7|o<<4,Xg(1)+Xg(i)}function Xg(i){var o="";for(i=Rg(i);31<i;){var s=i&Rg(31)|Rg(32);o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[s],i>>=Rg(5)}return o+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[i]}function Wg(i){i=Rg(i);var o=0>i;return i<<=Rg(1),o&&(i=~i),Xg(i)}function Yg(i){return Ug({Wh:i.polyline,precision:i.precision,df:i.thirdDim,ef:i.thirdDimPrecision})}t("H.util.flexiblePolyline.encode",Yg);function Zg(i){if(i=Sg(i),+i[0].toString()!=1)throw Error("Invalid format version");var o=+i[1].toString();o={precision:o&15,df:o>>4&7,ef:o>>7&15};for(var s=Math.pow(10,o.precision),_e=Math.pow(10,o.ef),_n=o.df,_o=0,_a=0,_u=0,_h=[],ty=2;ty<i.length;){var oy=Tg(i[ty])/s,hy=Tg(i[ty+1])/s;_o+=oy,_a+=hy,_n?(oy=Tg(i[ty+2])/_e,_u+=oy,_h.push([_o,_a,_u]),ty+=3):(_h.push([_o,_a]),ty+=2)}if(ty!==i.length)throw Error("Invalid encoding. Premature ending reached");return i=Object.assign({},o,{Wh:_h}),{polyline:i.Wh,precision:i.precision,thirdDim:i.df,thirdDimPrecision:i.ef}}t("H.util.flexiblePolyline.decode",Zg);function L(i){L.l.constructor.call(this),i&&$g(i,L,0),this.X=i||[],this.a=ah(this,0,this.X.length)}u(L,kg),t("H.geo.LineString",L);function ah(i,o,s){i=i.X;var _e=0;for(o=xd(o,0),s=wd(s,i.length),s-=2,o+=1;o<s;)_e+=jg(i[o],i[o+=3]);return _e}L.prototype.$h=function(i,o,s){bh(this,i,o,s,this.$h)},L.prototype.pushLatLngAlt=L.prototype.$h;function bh(i,o,s,_e,_n){var _o=i.X.length;o=fg(o,_n),s=gg(s,_n),i.X.push(fg(o,_n),gg(s,_n),_e===B?0:ig(_e,_n)),_o&&(i.a+=jg(i.X[_o-2],s)),delete i.b,delete i.c}L.prototype.bf=function(i,o,s){s&&$g(s,this.bf,2),o===void 0&&(o=this.X.length),o&&(this.a-=ah(this,i-3,i+o+3));var _e=s?this.X.splice.apply(this.X,[i,o].concat(s)):this.X.splice(i,o);return s&&(this.a+=ah(this,i-3,i+s.length+3)),o&&!s&&(this.a+=ah(this,i-3,i-3)),delete this.b,delete this.c,_e},L.prototype.spliceLatLngAlts=L.prototype.bf,L.prototype.Qj=function(i,o,s,_e){this.bf(i,0,[o,s,_e])},L.prototype.insertLatLngAlt=L.prototype.Qj,L.prototype.Fk=function(i){this.bf(i,3)},L.prototype.removeLatLngAlt=L.prototype.Fk,L.prototype.nd=function(i){bh(this,i.lat,i.lng,i.alt,this.nd)},L.prototype.pushPoint=L.prototype.nd,L.prototype.sc=function(i,o){this.Qj(3*i,o.lat,o.lng,o.alt)},L.prototype.insertPoint=L.prototype.sc,L.prototype.Ue=function(i){this.Fk(3*i)},L.prototype.removePoint=L.prototype.Ue,L.prototype.te=function(i,o){var s=this.X,_e=3*i;i=s[_e];var _n=s[_e+1];return s=s[_e+2],o&&(o.lat=i,o.lng=_n,o.alt=s),o||new lg(i,_n,s)},L.prototype.extractPoint=L.prototype.te,L.prototype.Fl=function(i,o,s){var _e=this.X;o=o||0,s=af(s,_e.length/3);for(var _n=3*o;o<s;)i(_e[_n++],_e[_n++],_e[_n++],o++)},L.prototype.eachLatLngAlt=L.prototype.Fl,L.isDBC=jg,L.prototype.Yg=function(i){var o=this.a;return i&&(i=this.X,o+=jg(i[i.length-2],i[1])),o},L.prototype.getDBCs=L.prototype.Yg,L.prototype.Ee=function(){return this.X.length/3},L.prototype.getPointCount=L.prototype.Ee,L.prototype.qm=function(){return this.X},L.prototype.getLatLngAltArray=L.prototype.qm,L.prototype.b=y,L.prototype.J=function(){var i;if(!(i=this.b)){i=this.X;var o=i.length,s=3,_e,_n,_o=y;if(3<=o){var _a=_e=i[0],_u=_n=i[1];for(_o=new K(_a,_u,_e,_n);s<o;s+=3){if(_a=i[s-3],_u=i[s-2],_e=i[s],_n=i[s+1],_u>_n&&180<_n-_u||_u<_n&&-180>_u-_n||_n<_u&&180>Bd(_n-_u)){var _h=_u;_u=_n,_n=_h}_a<_e&&(_h=_a,_a=_e,_e=_h),rg(_o.c,_o.a,_o.f,_o.b,_a,_u,_e,_n,_o)}}i=this.b=_o}return i},L.prototype.getBoundingBox=L.prototype.J,L.prototype.en=function(){return this.b!==y},L.prototype.hasBoundingBox=L.prototype.en;function $g(i,o,s){for(var _e=i.length,_n=!(_e%3),_o;_n&&_e;)_n=!(E(i[--_e]=ig((_o=i[_e])===B?0:_o))||E(i[--_e]=gg(i[_e]))||E(i[--_e]=fg(i[_e])));if(!_n&&o)throw new D(o,s,i)}function ch(i){var o=new L,s=0,_e=i.length;if(_e%2)throw new D(ch,0,i);for(;s<_e;)bh(o,i[s++],i[s++],0,ch);return o}L.fromLatLngArray=ch,L.prototype.ga=function(i){var o=this===i,s;if(!o&&(o=C(i,L))){var _e=this.X;for(i=i.X,o=(s=_e.length)===i.length;o&&s--;)o=_e[s]==i[s]}return o},L.prototype.equals=L.prototype.ga;function dh(i,o){return i.b-o.b}function eh(i,o){var s=i.X,_e=-2,_n=[],_o,_a=i.c;if(!_a){_a=i.c=new Lg;var _u=0,_h=i.X,ty=_h.length;for(_o=0;_o<ty;_o+=3){var oy=_h[_o],hy=_h[_o+1];if(_o){if(vy<hy)var fy=vy,vy=hy;else fy=hy;if(wy<oy)var xy=oy;else{xy=wy;var wy=oy}fy=Mg(_a,xy,fy,wy,vy,180<vy-fy),fy.b=_u++}wy=oy,vy=hy}}for(_a=_a.Jf(o).sort(dh),_h=_a.length,o=0;o<_h;o++){if(_u=_a[o],_u=_u.b,ty=3*_u,_u>_e+1){var By=[s[ty],s[ty+1]];_n.push(By)}_e=_u,By.push(s[ty+3],s[ty+4])}if(i.a){for(s=[],_e=_n.length,o=0;o<_e;o++)if(By=_n[o],_a=By.length){for(_h=[],i=0;i<_a;i+=2)_u=By[i],ty=By[i+1],_h.push(_u,ty),_o=By[i-1],i&&jg(ty,_o)&&(s.push(_h),_h=[],_o+=0>_o?360:-360,_h.push(By[i-2],_o,_u,ty));s.push(_h)}_n=s}return _n}p=L.prototype,p.nb="LineString",p.Yc=function(i,o){var s=this.X,_e=s.length,_n;if(_e){for(i.push("("),_n=0;_n<_e;_n+=3)_n&&i.push(","),i.push(s[_n+1]," ",s[_n]);o&&(s[0]!==s[_e-3]||s[1]!==s[_e-2])&&i.push(",",s[1]," ",s[0]),i.push(")")}else i.push("EMPTY");return i},p.Cb="LineString",p.Xc=function(){var i=[],o=this.X,s=o.length,_e;for(_e=0;_e<s;_e+=3)i.push([o[_e+1],o[_e],o[_e+2]]);return i},p.kc=function(){var i=this.X,o;if(this.J().vb()){i=i.slice();var s=1;for(o=i.length;s<o;s+=3)0>i[s]&&(i[s]+=360)}return i},p.to=function(i){i=i===void 0?5:i;for(var o=this.X,s=o.length,_e=[],_n=0;_n<s;_n+=3)_e.push([o[_n],o[_n+1],o[_n+2]]);return Yg({polyline:_e,precision:i,thirdDim:2,thirdDimPrecision:i})},L.prototype.toFlexiblePolyline=L.prototype.to;function fh(i){var o=Zg(i);i=o.polyline;var s=o.thirdDim;if(o=s===2||s===3,s=s===0,!i)throw new D(fh,0,"data");if(o||s){s=i.length;for(var _e=Array(3*s),_n=0,_o=0;_n<s;_n++){var _a=i[_n];_e[_o++]=_a[0],_e[_o++]=_a[1],_e[_o++]=o?_a[2]:0}}if(!_e)throw new D(fh,0,"only ABSENT, ALTITUDE or ELEVATION are supported as type of the 3rd dimension");return new L(_e)}L.fromFlexiblePolyline=fh;function gh(i){vc(this,gh),gh.l.constructor.call(this),this.ja=hh(this,i,this.constructor,0)}u(gh,kg),t("H.geo.MultiGeometry",gh),gh.prototype.splice=function(i,o,s){return i=[i],o!==B&&i.push(o),s&&(o=hh(this,s,this.splice,2),i=i.concat(o)),this.a=y,this.ja.splice.apply(this.ja,i)},gh.prototype.splice=gh.prototype.splice,gh.prototype.cc=function(i){var o=this.ja.length;if(!(0<=i&&i<o))throw new le(this.cc,i,[0,o-1]);return this.a=y,this.ja.splice(i,1)[0]},gh.prototype.removeAt=gh.prototype.cc,gh.prototype.remove=function(i){if(i=this.ja.indexOf(i),0<=i){var o=this.ja.splice(i,1)[0];this.a=y}return o||y},gh.prototype.remove=gh.prototype.remove,gh.prototype.im=function(){return this.ja},gh.prototype.getGeometries=gh.prototype.im,gh.prototype.push=function(i){var o=hh(this,[i],this.push,0)[0];this.a&&(this.a=this.a.$b(i.J())),this.ja.push(o)},gh.prototype.push=gh.prototype.push,gh.prototype.J=function(){var i;if(!(i=this.a)){i=y;var o,s;if(this.ja.length)for(i=this.ja[0].J(),s=1;s<this.ja.length;s++)(o=this.ja[s].J())&&(i=i?i.$b(o):o)}return this.a=i},gh.prototype.getBoundingBox=gh.prototype.J,gh.prototype.a=y;function hh(i,o,s,_e){var _n,_o=[];if(!zc(o))throw new D(s,_e);for(_n=0;_n<o.length;_n++)if(i.b(o[_n]))_o.push(i.c(o[_n]));else throw new D(s,_e);return _o}gh.prototype.c=function(i){return i},gh.prototype.ga=function(i){var o=this===i,s;if(!o&&(o=C(i,this.constructor))){var _e=this.ja;for(i=i.ja,o=(s=_e.length)===i.length;o&&s--;)o=_e[s].ga(i[s])}return o},gh.prototype.equals=gh.prototype.ga,gh.prototype.Yc=function(i){var o=this.ja,s=o.length,_e,_n,_o=!1;if(s){for(i.push("("),_e=0;_e<s;_e++)(_n=0<_e&&_o)&&i.push(","),o[_e].Yc(i),i[i.length-1]==="EMPTY"?i.splice(-1-+_n,1+ +_n):_o=!0;_o?i.push(")"):i.splice(-1,1,"EMPTY")}else i.push("EMPTY");return i},gh.prototype.kc=function(){for(var i=[],o=this.ja,s=o.length;s--;)i[s]=o[s].kc();return i},gh.prototype.W=function(){var i=gh.l.W.call(this);return i.type=this.nb,i},gh.prototype.Xc=function(){for(var i=[],o=this.ja,s=o.length;s--;)i[s]=o[s].Xc();return i};function ih(i){ih.l.constructor.call(this,i)}u(ih,gh),t("H.geo.MultiLineString",ih),ih.prototype.b=function(i){return C(i,L)},ih.prototype.nb="Multi"+L.prototype.nb,ih.prototype.Cb="Multi"+L.prototype.Cb;function jh(){}t("H.map.provider.Invalidations",jh),jh.MARK_INITIAL=Vd,jh.prototype.update=function(i,o){o!==kh.NONE&&(this.a=i,o&kh.SPATIAL&&(this.f=i),o&kh.VISUAL&&(this.g=i),o&kh.ADD&&(this.b=i),o&kh.REMOVE&&(this.c=i),o&kh.Z_ORDER&&(this.j=i),o&kh.VOLATILITY&&(this.i=i))},jh.prototype.update=jh.prototype.update,jh.prototype.wm=function(){return this.a},jh.prototype.getMark=jh.prototype.wm,jh.prototype.a=Vd,jh.prototype.jn=function(i){return this.a>i},jh.prototype.isAny=jh.prototype.jn,jh.prototype.g=Vd,jh.prototype.Td=function(i){return this.g>i},jh.prototype.isVisual=jh.prototype.Td,jh.prototype.f=Vd,jh.prototype.rh=function(i){return this.f>i},jh.prototype.isSpatial=jh.prototype.rh,jh.prototype.b=Vd,jh.prototype.Rj=function(i){return this.b>i},jh.prototype.isAdd=jh.prototype.Rj,jh.prototype.c=Vd,jh.prototype.Lf=function(i){return this.c>i},jh.prototype.isRemove=jh.prototype.Lf,jh.prototype.j=Vd,jh.prototype.sh=function(i){return this.j>i},jh.prototype.isZOrder=jh.prototype.sh,jh.prototype.i=Vd,jh.prototype.nn=function(i){return this.i>i},jh.prototype.isVolatility=jh.prototype.nn;var kh={NONE:0,VISUAL:1,SPATIAL:2,ADD:4,REMOVE:8,Z_ORDER:16,VOLATILITY:32};jh.Flag=kh;function lh(i){lh.l.constructor.call(this),i!==void 0&&(this.data=i)}u(lh,F),t("H.map.Feature",lh),lh.prototype.getData=function(){return this.data},lh.prototype.getData=lh.prototype.getData,lh.prototype.o=function(){lh.l.o.call(this),delete this.data};function M(i){if(vc(this,M),M.l.constructor.call(this,i?i.data:B),this.Y=mh.next(),i){var o="min";Dc(i[o])&&(this.s=i[o]),o="max",Dc(i[o])&&(this.m=i[o]),o="visibility",o in i&&(this.u=!!i[o]),o="volatility",o in i&&(this.S=!!i[o]),o="zIndex",o in i&&(this.j=+i[o]||0),o="provider",o in i&&!C(i[o],N)&&(this.la=i[o],this.pa(kh.ADD))}}u(M,lh),t("H.map.Object",M);var mh=new cf(1),nh={ANY:31,OVERLAY:1,SPATIAL:2,MARKER:4,DOM_MARKER:8,GROUP:16};M.Type=nh,M.prototype.$a=function(){return this.Y},M.prototype.getId=M.prototype.$a,M.prototype.ti=function(i){if(!Dc(i)&&!Ac(i))throw new D(this.ti,0,"id must be a number or a string");return this.i=i,this},M.prototype.setRemoteId=M.prototype.ti,M.prototype.Km=function(){return this.i},M.prototype.getRemoteId=M.prototype.Km,M.prototype.s=-1/0,M.prototype.m=1/0,M.prototype.vj=function(i){var o=this.m;if(i)for(i=this;i=i.Ca;)o=wd(o,i.m);return o},M.prototype.getMax=M.prototype.vj,M.prototype.xj=function(i){var o=this.s;if(i)for(i=this;i=i.Ca;)o=xd(o,i.s);return o},M.prototype.getMin=M.prototype.xj,M.prototype.u=!0,M.prototype.mb=function(i){var o=this.u;return(i=!!i)!==o&&(this.u=i,this.invalidate(kh.VISUAL)),this},M.prototype.setVisibility=M.prototype.mb,M.prototype.qc=function(i){for(var o=this,s;(s=o.u)&&i&&(o=o.Ca););return s},M.prototype.getVisibility=M.prototype.qc,M.prototype.S=!1,M.prototype.Gf=function(i){for(var o=this,s;!(s=o.S)&&i&&(o=o.Ca););return s},M.prototype.getVolatility=M.prototype.Gf,M.prototype.Xk=function(i){var o=this.S;return o!==!!i&&(this.S=!o,this.invalidate(kh.VOLATILITY)),this},M.prototype.setVolatility=M.prototype.Xk,M.prototype.j=B,M.prototype.Ij=function(){return this.j},M.prototype.getZIndex=M.prototype.Ij,M.prototype.ce=function(i){return i!==this.j&&(this.Ve(),this.j=i,this.invalidate(kh.Z_ORDER)),this},M.prototype.setZIndex=M.prototype.ce,M.prototype.K=B,M.prototype.Pc=function(){var i=this.K,o,s;if(!i){var _e=+((o=this.j)!==B);(i=this.Ca)?(i=i.Pc().slice(),i[0]|=_e):i=[_e],i.push(o||0,0>(s=this.wi)?this.Y:s),this.K=i}return i},M.prototype.getZInfo=M.prototype.Pc,M.prototype.Ve=function(){this.K=B};function oh(i,o,s){var _e,_n;if(!s||i[0]|o[0]){var _o=i.length,_a=o.length,_u=wd(_o,_a),_h=1;for(_n=1+ +s;_h<_u;_h+=_n)if(_e=i[_h]-o[_h])return _e}return s?0:_o-_a}M.compareZInfo=oh;function ph(i,o){return i.Wi(o)}M.compareZOrder=ph,M.prototype.Wi=function(i){return this.ea-i.ea||oh(this.Pc(),i.Pc(),!1)},M.prototype.compareZOrder=M.prototype.Wi,p=M.prototype,p.previousSibling=y,p.nextSibling=y,p.wi=-1,p.Ca=y,p.Am=function(){return this.Ca},M.prototype.getParentGroup=M.prototype.Am,M.prototype.Xb=function(){for(var i=this,o;o=i.Ca;)i=o;return i},M.prototype.getRootGroup=M.prototype.Xb,M.prototype.contains=function(i){return this===i},M.prototype.contains=M.prototype.contains,M.prototype.ia=function(i){if(this.Ca)throw new Yc(this.ia,"Not allowed for a child of a group");M.l.ia.call(this,i)},M.prototype.setParentEventTarget=M.prototype.ia,M.prototype.draggable=!1,M.prototype.la=y,M.prototype.ka=function(){return this.la},M.prototype.getProvider=M.prototype.ka,M.prototype.be=function(i,o){var s=this.la,_e;if(_e=s!==i){if(o&&(s&&!C(s,N)||i&&!C(i,N)))throw new Yc(o,"Only LocalObjectProvider allows an object transfers");o=this.type!==nh.GROUP,s&&(this.invalidate(kh.REMOVE),o&&s.Da(this)),(this.la=i)&&(o&&i.ba(this),this.ra=y,this.invalidate(kh.ADD))}return _e},M.prototype.ra=y,M.prototype.Gb=function(){return this.ra||(this.ra=new jh)},M.prototype.getInvalidations=M.prototype.Gb,M.prototype.pa=function(i){var o=this.ka(),s;return(s=!!o)&&o.invalidateObject(this,i),s},M.prototype.invalidate=M.prototype.pa,M.prototype.o=function(){this.Ca&&this.Ca.Da(this),M.l.o.call(this)},M.prototype.setData=function(i){return this.data=i,this},M.prototype.setData=M.prototype.setData,M.prototype.Ec=function(i){var o;if(i&&!Da(i))throw new D(M.prototype.Ec,0,"opt_callback must be a function");return i=qh(this,i?i(this.data):this.data,!!i),this instanceof rh||this instanceof sh||this instanceof th||this instanceof uh?o={type:"Feature",properties:i,geometry:this.da().Ec()}:o={type:"FeatureCollection",features:hf},this.i&&(o.id=this.i),o},M.prototype.toGeoJSON=M.prototype.Ec;function qh(i,o,s){if(o===null||o===B)return null;if(0<=Object.keys(o).length&&Object.prototype.toString.call(o)!=="[object Object]")throw Error(vh(i,s));try{return JSON.stringify(o),o}catch{throw Error(vh(i,s))}}function vh(i,o){return"Object Remote-Id: "+i.i+" - "+(o?"The value returned by the callback is not a valid JSON object and cannot be set as Feature properties.":"The given object data is not a valid JSON object and cannot be set as Feature properties.")}M.prototype.W=function(){return{id:this.Y,properties:{min:this.xj(),max:this.vj(),zIdx:this.j,sIdx:this.wi,parent:this.Ca?this.Ca.$a():0,visible:this.qc(),volatile:this.Gf()},type:"Feature"}},M.prototype.forWorkerMessage=M.prototype.W;function wh(i){var o;if(i){var s=xh;for(o=C(i,wh);s--;){var _e=yh[s];if(i.hasOwnProperty(_e)){var _n=i[_e];if(o)this[_e]=_n;else{if((_n=zh[s](_n))===Ah)throw new D(wh,0,_e+": "+i[_e]);_n!==this[_e]&&_n!==B&&(this[_e]=_n)}}}s=o?i.b:this.lineWidth&&Ye(this.strokeColor),s||(this.b=s),s=o?i.Jb:Ye(this.fillColor),s||(this.Jb=s),s=o?i.a:this.strokeColor!=="none"&&this.lineWidth,s||(this.a=s)}pc(this)}t("H.map.SpatialStyle",wh),wh.prototype.Jb=!0,wh.prototype.b=!0,wh.prototype.a=!0;var yh="strokeColor fillColor lineWidth lineCap lineJoin miterLimit lineDash lineDashOffset lineHeadCap lineTailCap".split(" ");wh.prototype.strokeColor="rgba(0,85,170,.6)",wh.prototype.strokeColor=wh.prototype.strokeColor,wh.prototype.fillColor="rgba(0,85,170,.4)",wh.prototype.fillColor=wh.prototype.fillColor,wh.prototype.lineWidth=2,wh.prototype.lineWidth=wh.prototype.lineWidth,wh.prototype.lineCap="round",wh.prototype.lineCap=wh.prototype.lineCap,wh.prototype.lineJoin="miter",wh.prototype.lineJoin=wh.prototype.lineJoin,wh.prototype.miterLimit=1,wh.prototype.miterLimit=wh.prototype.miterLimit,wh.prototype.sn=hf,wh.prototype.lineDash=wh.prototype.sn,wh.prototype.lineDashOffset=0,wh.prototype.lineDashOffset=wh.prototype.lineDashOffset,wh.prototype.tn=B,wh.prototype.lineHeadCap=wh.prototype.tn,wh.prototype.un=B,wh.prototype.lineTailCap=wh.prototype.un;var xh=yh.length;wh.prototype.ga=function(i){var o=this===i;if(!o&&i){for(o=0;o<xh;o++){var s=yh[o];if(this[s]!==i[s])break}o=o===xh}return o},wh.prototype.equals=wh.prototype.ga,wh.prototype.nj=function(i){if(i){var o={};Ya(o,this,i)}else o=this;return new wh(o)},wh.prototype.getCopy=wh.prototype.nj;var Ah=pc({}),zh=[function(i){return i?oc(i):Ah},function(i){return i?oc(i):Ah},function(i){return 0<=i&&100>=i?+i:Ah},function(i){return i=oc(i),i==="butt"||i==="square"||i==="round"||i==="arrow-head"||i==="arrow-tail"?i:Ah},function(i){return i==="round"||i==="bevel"||i==="miter"?i:Ah},function(i){return 0<i&&100>=i?+i:Ah},function(i){return i&&i.every&&i.every(Ec)?i:Ah},function(i){return E(+i)?Ah:+i},function(i){return uc(i)?zh[3](i):B},function(i){return uc(i)?zh[3](i):B}];wh.MAX_LINE_WIDTH=100;var Bh=new wh;wh.DEFAULT_STYLE=Bh;var Ch="fillColor strokeColor lineWidth lineCap lineJoin miterLimit lineDashOffset lineDash lineTailCap lineHeadCap".split(" ");wh.prototype.W=function(){for(var i={},o=Ch.length,s;o--;)s=Ch[o],i[s]=this[s];return i},wh.prototype.forWorkerMessage=wh.prototype.W;function Dh(i){var o;if(i){var s=C(i,Dh);for(o in i)if(o in this){var _e=i[o];_e!==this[o]&&(o==="fillColor"||0<(_e=+_e))&&(this[o]=_e)}i=s?i.Jb:!!(Ye(this.fillColor)&&this.width&&this.width),i||(this.Jb=i)}pc(this)}t("H.map.ArrowStyle",Dh),Dh.prototype.Jb=!0,Dh.prototype.fillColor="rgba(255,255,255,.75)",Dh.prototype.width=1.2,Dh.prototype.length=1.6,Dh.prototype.frequency=5,Dh.prototype.mj=function(){return new Dh(this)},Dh.prototype.ga=function(i){var o=this===i;return!o&&i&&(o=i.width===this.width&&i.fillColor===this.fillColor&&i.length===this.length&&i.frequency===this.frequency),o},Dh.prototype.equals=Dh.prototype.ga;function Eh(i,o){var s;Eh.l.constructor.call(this,o),o&&this.xb(o.style),i&&(this.g=!0),o&&(s=o.arrows)&&this.Ok(s)}u(Eh,M),t("H.map.Spatial",Eh),Eh.prototype.type=nh.SPATIAL,Eh.prototype.ea=0,Eh.prototype.style=Bh,Eh.prototype.$=function(){return this.style},Eh.prototype.getStyle=Eh.prototype.$,Eh.prototype.xb=function(i){var o=!0;return i?this.style=C(i,wh)?i:new wh(i):this.style?delete this.style:o=!1,o&&this.invalidate(kh.VISUAL),this},Eh.prototype.setStyle=Eh.prototype.xb,Eh.prototype.Nl=function(){return this.c},Eh.prototype.getArrows=Eh.prototype.Nl,Eh.prototype.Ok=function(i){var o=this.c,s=!1;return!i&&o?(delete this.c,s=!0):!i||o&&o.ga(i)||(this.c=new Dh(i),s=!0),s&&this.style.strokeColor!=="none"&&this.pa(1),this},Eh.prototype.setArrows=Eh.prototype.Ok;function Fh(i,o){var s=!1,_e=!1,_n;if(o.length){for(s=0;s<o.length;s++)if(o[s]!==Gh){_e=!0;break}o=i.style,s=_e?o.b||o.Jb&&i.g||(_n=i.c||!1)&&o.a&&_n.Jb:o.Jb}return s&&i.qc(!0)}Eh.prototype.g=!1,Eh.prototype.kn=function(){return this.g},Eh.prototype.isClosed=Eh.prototype.kn,Eh.prototype.getGeometriesForTile=Eh.prototype.Id,Eh.prototype.$g=function(){return B},Eh.prototype.getLabels=Eh.prototype.$g;function Hh(i,o){Hh.l.constructor.call(this,i,o)}u(Hh,Eh),t("H.map.GeoShape",Hh),Hh.prototype.getBoundingBox=Hh.prototype.J;function Ih(i,o,s,_e){var _n=[],_o=o.length,_a;for(_a=0;_a<_o;_a++){var _u=o[_a];_u.length&&_n.push(Jh(i,_u,s,_e))}return _n}function Jh(i,o,s,_e){var _n,_o=[],_a=o.length,_u=0;for(i.ya=0,_n=_n||0;_u<_a;)_o.push(Kh(i,o[_u++],o[_u++],_n,_e));return s&&_o.push(Kh(i,o[0],o[1],_n,_e)),_o}function Kh(i,o,s,_e,_n){var _o=i.ya;return _o&&180<Bd(_o-s)&&(s+=0>_o?-360:360),i.ya=s,_n.th(o,s+_e)}function Lh(i,o,s){for(var _e=o,_n,_o=i.length+o,_a,_u;_e--;){for(o=i[_e],_a=o.length,_n=Array(_a);_a--;)_u=o[_a],_n[_a]=new G(_u.x+s,_u.y);i[--_o]=_n}}function Mh(i,o,s){this.paths=this.a=i,o!==B&&(this.interiorsIndex=this.b=o),s!==B&&(this.outlinesIndex=this.c=s)}Mh.prototype.b=Ud,Mh.prototype.interiorsIndex=Mh.prototype.b,Mh.prototype.c=Ud,Mh.prototype.outlinesIndex=Mh.prototype.c;var Gh=qc(new Mh([])),Nh=pc([]);function th(i,o){th.l.constructor.call(this,!1,o),this.aa(i)}u(th,Hh),t("H.map.Polyline",th),th.prototype.J=function(){return this.a.J()},th.prototype.getBoundingBox=th.prototype.J,th.prototype.aa=function(i){var o=this.aa,s,_e;if(C(i,ih)){var _n=i.ja;if(s=_n.length)for(_e=0;_e<s;_e++)Oh(_n[_e],o);else throw new D(o,0)}else Oh(i,o);return this.b=!!_n,this.a=i,this.pa(kh.SPATIAL),this},th.prototype.setGeometry=th.prototype.aa,th.prototype.da=function(){return this.a},th.prototype.getGeometry=th.prototype.da,th.prototype.clip=function(i){var o=this.a;return eh(this.b?o.ja[0]:o,i)},th.prototype.clip=th.prototype.clip,th.prototype.Id=function(i){var o=this.a,s,_e=[];if(this.b)for(o=o.ja,s=o.length;s--;)Ph(this,o[s],i,_e);else Ph(this,o,i,_e);return _e.length?_e:B},th.prototype.getGeometriesForTile=th.prototype.Id;function Oh(i,o){if(!C(i,L)||2>i.Ee())throw new D(o,0)}function Ph(i,o,s,_e){var _n=eh(o,s.Cf());if(_n.length&&(o=s.Ef(),i=Ih(i,_n,!1,o),_n=i.length)){var _o=s.He();o=o.w,s.x||Lh(i,_n,-o),s.x===(1<<s.z)-1&&Lh(i,_n,o),s=Uf(i,_o.left,_o.top,_o.right,_o.bottom,!1),s.length&&_e.push(new Mh(s))}}th.prototype.W=function(){var i=th.l.W.call(this),o=i.properties;return i.geometry=this.da().W(),o.style=this.$().W(),o.height=0,i},th.prototype.forWorkerMessage=th.prototype.W;var Qh;function Rh(i,o){if(x.URL)return new x.URL(i,o).toString();if(!i||!Sh(i))return i;if(!o||Sh(o))throw new TypeError("Failed to construct 'URL': Invalid base URL");Qh||(Qh=document.createElement("a"),Gc(Qh));var s=Qh;return s.href=o,i[0]!=="/"?i=s.href.replace(/\/[^\/]*$/,"/")+i:((o=s.origin)||(o=s.protocol+"//"+s.host),i=o+i),i}function Sh(i){var o=!1;return typeof i=="string"&&(o=!(-1<i.search(/^(http|https|data|blob):/)||i.substr(0,2)==="//")),o}function Th(i,o){if(Th.l.constructor.call(this),o&&Sh(o))throw new D(Th,1,"Base URL must be absolute");this.i=Uh.INIT,this.a=null,this.m=o}u(Th,F),t("H.map.render.Style",Th),Th.prototype.load=Th.prototype.load,Th.prototype.getState=function(){return this.i},Th.prototype.getState=Th.prototype.getState,Th.prototype.O=function(i){this.i=i},Th.prototype.setState=Th.prototype.O,Th.prototype.Db=function(){return this.m},Th.prototype.getBaseUrl=Th.prototype.Db,Th.prototype.lc=function(){return rc(this.a)},Th.prototype.getConfig=Th.prototype.lc,Th.prototype.Ul=function(){return this.a},Th.prototype.getConfigReference=Th.prototype.Ul,Th.prototype.sd=function(i){this.a=i},Th.prototype.setConfig=Th.prototype.sd,Th.prototype.Bb=function(i){this.a=null,this.O(Uh.ERROR);var o=Vh;ue(this.R,String(o))?this.dispatchEvent(new ud(Vh,i,this)):console.error(i)},Th.prototype.dispatchError=Th.prototype.Bb,Th.prototype.o=function(){Th.l.o.call(this),this.a=null};var Vh="error",Wh={$c:"change",Gi:Vh},Uh={ERROR:-1,INIT:0,LOADING:1,READY:2};Th.State=Uh;function Xh(i,o){var s,_e=arguments.length,_n,_o;for(s=1;s<_e;s++)if((_n=arguments[s])&&_n!==i&&_n!==_a){var _a=_n;for(_o in _n){var _u=_n[_o];i[_o]!==_u&&(Yh(_u)?Yh(i[_o])?i[_o]=Xh(i[_o],_u):i[_o]=rc(_u):_u!==void 0&&(i[_o]=rc(_u)))}}return i}t("H.util.webgl.mergeObjects",Xh);var Zh=nc();function $h(i,o,s){var _e=s[i];return o&&_e in o&&0>tc.indexOf(_e)?(o=o[_e],++i<s.length?$h(i,o,s):o):Zh}var ai=$h.bind(null,0),bi={polygons:1,lines:1,"pattern-lines":1,points:1,text:1,raster:1,custom_icons:1,overlays:1},ci={data:1,draw:1,enabled:1,filter:1,properties:1},di=Object.keys(ci);function ei(i,o,s,_e,_n,_o){var _a=_e[i],_u=s[_a];if(++i<_e.length){var _h=o[_a]||{};for(s=di.length;s--;){var ty=di[s];if(ty!=="draw"||!_o){var oy=_u[ty];oy!==B&&(_h[ty]=rc(oy))}}ei(i,_h,_u,_e,_n,_o)}else _n?_h=rc(_u):(_h=_u,delete s[_a]);o[_a]=o[_a]?Xh(o[_a],_h):_h}var fi=ei.bind(null,0);function gi(i,o){i in bi&&(o[i]=1)}function hi(i,o,s){var _e,_n,_o;for(_e in i)if(ci[_e]){if(_e==="draw"){var _a=i[_e];for(_n in _a){var _u=_a[_n];(_o=_u.style)?(_u.style=o+_o,gi(_o,s)):(delete _a[_n],_a[o+_n]=_u,gi(_n,s))}}}else hi(i[_e],o,s)}function ii(i,o){var s={},_e,_n,_o,_a;if(o+="_",i=Xh({},i),_e=i.styles)for(_n in _e){var _u=_e[_n];if(delete _e[_n],_e[o+_n]=_u,_o=_u.mix)for(Ac(_o)&&(_o=[_o]),_a=_o.length;_a--;)gi(_o[_a],s),_o[_a]=o+_o[_a];(_a=_u.base)&&(_o||(_o=_u.mix=[]),_o.unshift(o+_a),delete _u.base,gi(_a,s)),gi(_n,s)}else _e=i.styles={};if(_u=i.layers)for(_n in _u)_o=_u[_n],delete _u[_n],(_a=_o.data)&&!_a.layer&&(_a.layer=_n),_u[o+_n]=_o,hi(_o,o,s);for(_n in s)_e[o+_n]={base:_n};return i}function ji(i,o){var s=i.sources,_e=Object.keys(s)[0],_n=Xh(s[_e],{uid:o});s=i.layers;var _o;i.sources={},i.sources[o]=_n;for(_o in s)i=s[_o],i.data?i.data.source===_e&&(i.data.source=o):i.data={source:o}}function ki(i,o){var s,_e=i.textures;i=i.fonts;for(s in _e){var _n=_e[s];_n.url&&(_n.url=Rh(_n.url,o))}for(s in i)if(_n=i[s],zc(_n))for(_e=0;_e<_n.length;_e++){var _o=_n[_e];_o.url=_o.url&&Rh(_o.url,o)}else _o=_n,_o.url=_o.url&&Rh(_o.url,o)}function li(i,o){return"function(){return "+("feature."+i+(o||""))+";}"}function mi(i){return li("style."+i,void 0)}function ni(i,o,s,_e){return i={base:i,blend:o,blend_order:s},_e&&(i.clean_depth=!!_e),i}function oi(i){var o={};return o["translucent-"+(i?"extruded-":"")+"polygons"]={color:mi("fillColor"),order:1,interactive:!0,extrude:i},o}function pi(i,o,s,_e){return i={data:{source:i,layer:o}},s&&(i.draw=s),_e&&(i.filter=_e),i}function Yh(i){return Ea(i)&&!zc(i)}function qi(i,o){if(qi.l.constructor.call(this,i,o),Ac(i))ri.test(i)&&i.indexOf("import:")===-1?(this.c=i,o||(this.j=Sh(this.c)?B:this.c)):this.f=i;else if(Ea(i))this.sd(rc(i));else throw new D(qi,0,"invalid style configuration")}u(qi,Th),t("H.map.render.webgl.Style",qi),qi.prototype.load=function(){var i=this,o=this.Db();this.c?(this.O(Uh.LOADING),new tf("text/plain",this.c).then(function(s){var _e={};return si(s,o,!1,(_e[o]=!0,_e))}).then(function(s){return i.sd(s)},function(s){return i.Bb(s.message)}),delete this.c):this.f&&(this.O(Uh.LOADING),si(this.f,o).then(function(s){return i.sd(s)},function(s){return i.Bb(s.message)}),delete this.f)},qi.prototype.load=qi.prototype.load,qi.prototype.Tk=function(i,o,s){var _e;for(ti(this),i=ui(this,i,this.Tk,s),s=0;s<i.length;s++){var _n=i[s].bb.draw;for(_e in _n){var _o=_n[_e];Yh(_o)&&(_o.interactive=!!o)}}vi(this)},qi.prototype.setInteractive=qi.prototype.Tk,qi.prototype.setProperty=function(i,o,s){var _e,_n=i.split("."),_o=0,_a=_n.length;if(ti(this),!uc(o))throw new D(this.setProperty,1,"value");if(_e=wi(this.a,_n)){if(!(_e.parent instanceof Object)||_e.parent instanceof Array)if(s)_n.pop(),_n=wi(this.a,_n),_e.parent=_n.parent[_n.Yf]={};else throw new D(this.setProperty,0,i+" property is not primitive type");_e.parent[_e.Yf]=o}else{for(_e=this.a;_o!==_a-1;)_e[_n[_o]]={},_e=_e[_n[_o++]];_e[_n[_o]]=o}xi(this)&&vi(this)},qi.prototype.setProperty=qi.prototype.setProperty,qi.prototype.fh=function(i){return ti(this),(i=wi(this.a,i.split(".")))?rc(i.node):void 0},qi.prototype.getProperty=qi.prototype.fh,qi.prototype.removeProperty=function(i){ti(this),(i=wi(this.a,i.split(".")))&&i.parent&&i.parent.hasOwnProperty(i.Yf)&&(delete i.parent[i.Yf],xi(this)&&vi(this))},qi.prototype.removeProperty=qi.prototype.removeProperty,qi.prototype.se=function(i,o,s){var _e;ti(this);var _n=this.a,_o=_n.layers,_a=ui(this,i,this.se,!1);for(i=_a.length,_e={};i--;)fi(_e,_o,_a[i].id,!!o,!!s);for(s={},_a=Object.keys(_n),i=_a.length;i--;){var _u=_a[i],_h=_n[_u];s[_u]=_h===_o?_e:rc(_h)}return o||vi(this),s},qi.prototype.extractConfig=qi.prototype.se,qi.prototype.Ke=function(i){if(ti(this),!Ea(i))throw new D(this.Ke,0,"config");this.sd(Xh(this.a,i))},qi.prototype.mergeConfig=qi.prototype.Ke,qi.prototype.b=ba(2),qi.prototype.toString=function(){return this.getState()===Uh.READY?x.H.gl.yaml.safeDump(this.a,{lineWidth:120}):""},qi.prototype.o=function(){qi.l.o.call(this),delete this.f,delete this.c};function xi(i){var o=i.a,s;if(Ea(o)){var _e;if(_e=i.g){o=o&&o.sources,_e=!1;for(var _n in o)if(o[_n].type===i.g){_e=!0;break}_e=!(!o||_e)}_e&&(s="invalid source, the only valid type is "+i.g)}else s="invalid style configuration";return s&&i.Bb(s),!s}function vi(i){i.dispatchEvent(new sd("change",i))}function ti(i){if(i.getState()!==Uh.READY)throw new Yc(i.Ke,"style is not ready yet")}function ui(i,o,s,_e){var _n=[],_o=zc(o)?o:[o],_a,_u;for(_e===void 0&&(_e=!0),_o=_o.sort().reverse();_a=_o.pop();){o=String(_a).split(".");t:{for(var _h=i.a,ty=o.length;ty--&&!ci[o[ty]];);if(_h&&0>ty&&(_h=ai(_h.layers,o),Yh(_h)))break t;_h=Zh}if(_h===Zh)throw new D(s,0,'Unresolvable layer ID "'+_a+'"');if(_n.push({id:o,bb:_h}),_e)for(_u in _h)!ci[_u]&&Yh(_h[_u])&&_o.push(_a+"."+_u)}return _n}function wi(i,o){var s=0,_e;for(_e=o.length;s!==_e;){var _n=o[s++],_o=i;if(i=_o[_n],!i)break}return s===_e?{node:i,parent:_o,Yf:_n}:void 0}var ri=/^(http[s]?)?.*\.ya?ml/i;function si(i,o,s,_e){s=s===void 0?!1:s,_e=_e===void 0?{}:_e;try{var _n=x.H.gl.yaml.safeLoad(i,{json:!0})}catch(_o){return Promise.reject(_o)}return _n&&(i=_n.import,Ac(i)&&(i=[i]),s&&o&&yi(_n,o),delete _n.import,zc(i)&&i.length)?(s=i.reduce(function(_o,_a){var _u=o?Rh(_a,o):_a;return _e[_u]||(_e[_u]=!0,_o.push(new tf("text/plain",_u).then(function(_h){return si(_h,_u,!0,_e)}))),_o},[]),Promise.all(s).then(function(_o){var _a={};return _o.forEach(function(_u){return _u&&Xh(_a,_u)}),Xh(_a,_n),_a})):Promise.resolve(_n)}function yi(i,o){function s(_a){_a.url&&(_a.url=Rh(_a.url,o))}var _e=i&&i.fonts;if(_e)for(var _n in _e)zc(_e[_n])?_e[_n].forEach(s):s(_e[_n]);if(i=i&&i.textures)for(var _o in i)s(i[_o])}qi.normalize=yi,qi.prototype.sd=function(i){qi.l.sd.call(this,i),xi(this)&&(this.O(Uh.READY),vi(this))},qi.prototype.lc=function(){return qi.l.lc.call(this)},qi.prototype.getConfig=qi.prototype.lc,qi.prototype.Db=function(){return this.j||qi.l.Db.call(this)},qi.prototype.getBaseUrl=qi.prototype.Db,t("H.map.Style",qi),qi.State=Uh;function O(i,o){var s;if(O.l.constructor.call(this),C(i,L,O,0),o!==B&&zc(o,O,1)){for(s=0;s<o.length;s++)C(o[s],L,O,1,"index "+s);this.a=o}else this.a=[];this.b=i,this.c=[]}u(O,kg),t("H.geo.Polygon",O);function zi(i){var o=O,s=L,_e=i.c,_n=i.a,_o=i.f,_a=i.b;return _n=[_e,_n,B,_e,_a,B,_o,_a,B,_o,_n,B],180<=i.ub()&&(_n.splice(9,0,_o,i=i.Za().lng,B),_n.splice(3,0,_e,i,B)),new o(new s(_n))}O.fromRect=zi;var Ai={NORTH:90,SOUTH:-90};O.Direction=Ai,O.prototype.ld=Ai.NORTH,O.prototype.Uk=function(i){return this.ld!==i&&(this.f=y,this.c.length=0,this.ld=i),this},O.prototype.setPoleCovering=O.prototype.Uk,O.prototype.Dm=function(){return this.ld},O.prototype.getPoleCovering=O.prototype.Dm,O.prototype.dm=function(){return this.b},O.prototype.getExterior=O.prototype.dm,O.prototype.Rk=function(i){if(!C(i,L))throw new D(this.Rk,0,i);this.b=i,this.f=y},O.prototype.setExterior=O.prototype.Rk,O.prototype.nm=function(){return this.a},O.prototype.getInteriors=O.prototype.nm,O.prototype.qg=function(i,o,s){var _e=arguments.length,_n;for(_n=2;_n<_e;_n++)C(arguments[_n],L,this.qg,_n);var _o=this.a.splice.apply(this.a,arguments);for(_n=2;_n<_e;_n++)arguments[_n]=B;return this.c.splice.apply(this.c,arguments),_o},O.prototype.spliceInteriors=O.prototype.qg,O.prototype.$n=function(i){return this.qg(i,1)[0]},O.prototype.removeInteriorAt=O.prototype.$n,O.prototype.Zn=function(i){return i=this.a.indexOf(i),0>i?B:this.qg(i,1)[0]},O.prototype.removeInterior=O.prototype.Zn,O.prototype.Dk=function(i){if(!C(i,L))throw new D(this.Dk,0,i);this.a.push(i)},O.prototype.pushInterior=O.prototype.Dk,O.prototype.J=function(){var i=this.f;return i||(this.f=i=Bi(this.b,this.ld)),i},O.prototype.getBoundingBox=O.prototype.J,p=O.prototype,p.lj=function(i){var o=this.a.length;if(0>i||i>=o)throw new le(this.lj,i,[0,o-1]);return(o=this.c[i])||(this.c[i]=o=Bi(this.a[i],this.ld)),o};function Bi(i,o){var s,_e,_n;return(_n=i.J())&&((s=i.Yg(!0))&&(_e=i.Ee())&&(_n=_n.$b(tg([i.te(0),i.te(_e-1)],!0),!0)),_n.ub()===360&&s%2===1&&(_n=_n.Sc(o,0))),_n}p.nb="Polygon",p.Yc=function(i){var o=this.a,s=o.length,_e;if(this.b.Ee()){for(i.push("("),this.b.Yc(i,!0),_e=0;_e<s;_e++)o[_e].Ee()&&(i.push(","),o[_e].Yc(i,!0));i.push(")")}else i.push("EMPTY");return i},p.Cb="Polygon",p.Xc=function(){var i,o=[],s=this.a,_e=this.b.Xc();for(_e[0].toString()!==_e[_e.length-1].toString()&&_e.push(_e[0]),o.push(_e),i=0;i<s.length;i++)_e=s[i].Xc(),_e[0].toString()!==_e[_e.length-1].toString()&&_e.push(_e[0]),o.push(_e);return o},p.W=function(){var i=O.l.W.call(this);return this.J().vb()&&(i.type="Multi"+i.type),i},p.kc=function(){var i=[],o=this.a,s=o.length;for(i.push(this.b.kc());s--;)i[s+1]=o[s].kc();return this.J().vb()?[i]:i},p.ga=function(i){var o=!1;if(C(i,O)){var s=i.a,_e=this.a.length;o=s.length;var _n=0;for(o=this.b.ga(i.b)&&_e===o;o&&_n<_e;)o=o&&this.a[_n].ga(s[_n]),_n++}return o},O.prototype.equals=O.prototype.ga;function Ci(i,o,s,_e){_e=_e===void 0?!0:_e;var _n=i.a,_o=Di.bind(null,o,s);return ce(o,s,i.b.X,0,!0,3)!==be.NONE?_e?!_n.some(_o):!0:!1}function Di(i,o,s){return ce(i,o,s.X,0,!0,3)===be.SURFACE}function Ei(i,o){o=o.X,i=i.b.X;var s,_e,_n=o.length-3,_o=i.length-3,_a={};for(s=0;s<_n;s+=3){var _u=o[s],_h=o[s+1],ty=o[s+3],oy=o[s+4];for(_e=0;_e<_o;_e+=3){var hy=i[_e],fy=i[_e+1],vy=i[_e+3],xy=i[_e+4];if(ag(new Yf(_h,_u),new Yf(oy,ty),new Yf(fy,hy),new Yf(xy,vy),_a,!0))return!0}}return!1}function Fi(i,o){var s=o.b,_e=o.a,_n=_e.length,_o=s.X,_a=_o.length,_u=i.b.X,_h=_u.length;if(Ei(i,s))return!0;for(s=0;s<_a;s+=3)if(Ci(i,_o[s],_o[s+1]))return!0;for(s=0;s<_h;s+=3)if(Ci(o,_u[s],_u[s+1]))return!0;for(s=0;s<_n;s++)if(Ei(i,_e[s]))return!0;return!1}function Gi(i){Gi.l.constructor.call(this,i)}u(Gi,gh),t("H.geo.MultiPolygon",Gi),Gi.prototype.b=function(i){return C(i,O)},Gi.prototype.nb="Multi"+O.prototype.nb,Gi.prototype.Cb="Multi"+O.prototype.Cb;function uh(i,o){var s=o&&(+o.extrusion||+o.extrude)||0,_e=o&&+o.elevation||0,_n=0;if(uh.l.constructor.call(this,!0,o),0<_e&&(_n+=_e,this.b=_e),0<s&&(_n+=s,this.f=s),2047<_n)throw new le(uh,_n,[0,2047]);C(i,L)?this.aa(new O(i)):this.aa(i)}u(uh,Hh),t("H.map.Polygon",uh);var Hi=new O(new L([0,0,0,0,0,0,0,0,0]));uh.prototype.f=0,uh.prototype.b=0,uh.prototype.a=Hi,uh.MAX_EXTRUDE_HEIGHT=2047,uh.prototype.ii=function(i){var o=+i;if(o!==i)throw new D(this.ii,0,i);if(0>o||2047<this.b+o)throw new le(this.ii,this.b+o,[0,2047]);this.f=o,this.pa(kh.SPATIAL)},uh.prototype.setExtrusion=uh.prototype.ii,uh.prototype.em=function(){return this.f},uh.prototype.getExtrusion=uh.prototype.em,uh.prototype.hi=function(i){var o=+i;if(o!==i)throw new D(this.hi,0,i);if(0>o||2047<this.f+o)throw new le(this.hi,this.f+o,[0,2047]);this.b=o,this.pa(kh.SPATIAL)},uh.prototype.setElevation=uh.prototype.hi,uh.prototype.am=function(){return this.b},uh.prototype.getElevation=uh.prototype.am,uh.prototype.da=function(){return this.a},uh.prototype.getGeometry=uh.prototype.da,uh.prototype.aa=function(i){if(C(i,O))var o=!1;else C(i,Gi,this.aa,0),o=!0;return this.v=o,o=this.a,this.a=i,o!==Hi&&this.pa(kh.SPATIAL),this},uh.prototype.setGeometry=uh.prototype.aa,uh.prototype.J=function(){return this.da().J()},uh.prototype.getBoundingBox=uh.prototype.J,uh.prototype.Id=function(i){var o,s=this.da(),_e,_n;if(this.v){s=s.ja;var _o=0;for(_n=s.length;_o<_n;_o++)(_e=Ii(this,s[_o],i,s[_o].ld))&&(o||(o=[]),o.push(_e))}else _e=this.Ya,_e===B&&(_e=this.v?Ai.NORTH:this.da().ld),(_e=Ii(this,s,i,_e))&&(o=[_e]);return o},uh.prototype.getGeometriesForTile=uh.prototype.Id;function Ii(i,o,s,_e){var _n,_o,_a=0,_u=!0;if(_n=Ji(i,o.b,s,_e,o.J())){var _h=new Mh(_n),ty=o.a;if(_o=ty.length)for(_h.b=_h.a.length;_a<_o;_a++)(_n=Ji(i,ty[_a],s,_e,o.lj(_a)))&&(_h.a=_h.a.concat(_n));for(_o=_h.a.length,_a=0;_a<_o;_a++)if(_h.a[_a]!==Nh){_u=!1;break}_u&&(_h=_a%2?Gh:B)}return _h}function Ji(i,o,s,_e,_n){var _o=s.He(),_a=_n,_u=_a.ub(),_h=[[]],ty=o.X,oy=[],hy=ty.length,fy,vy=!1;for(fy=0;fy<hy;fy+=3){var xy=ty[fy],wy=ty[fy+1];vy||Bd(wy)!=180||(oy.push(xy),oy.push(wy),oy.push(xy),oy.push(-wy),vy=!0),oy.push(xy),oy.push(wy)}if(ty=oy,360>_u&&_a.a==-180&&(_a=new K(_a.c,180,_a.f,_a.b)),360>_u&&_a.b==180&&(_a=new K(_a.c,_a.a,_a.f,-180)),_a.vb()){for(_u=ty,xy=_u.length,ty=-1,oy=0;oy<xy-2;oy+=2)if(jg(_u[oy+1],_u[oy+3])){ty=oy+2;break}ty===-1&&jg(_u[xy-1],_u[1])&&(ty=xy),ty!==-1&&(hy=_u[ty-2],oy=_u[ty-1],fy=_u[ty%xy],vy=_u[(ty+1)%xy],Bd(hy)!==180&&Bd(fy)!==180&&(wy=Bd(fy-hy),xy=Bd(vy-oy),xy+=180<xy?-360:0,vy=Bd(180-vy),vy+=180<vy?-360:0,xy&&vy&&(wy/=Bd(xy)/Bd(vy),hy=fy+(fy>hy?-wy:wy),oy=0<oy?180:-180,_u.splice(ty,0,hy,oy,hy,-oy)))),ty=_u}if(_h[0]=Ki(ty.concat(),_a.a),360>_a.ub()&&_a.bd(new lg(_a.c,180))&&(ty=Ki(ty.concat(),_a.b),_h.push(ty)),_a=s.Ef(),i=Ih(i,_h,!0,_a),_n.ub()===360&&o.Yg(!0)%2===1){for(o=i,i=s.He(),o[0][1].x>o[0][o[0].length-1].x&&(o[0]=o[0].reverse()),ty=[],_u=o[0].length-1,_h=0;_h<_u;_h++)oy=o[0][_h],ty[_h]=new G(oy.x-2*_a.w,oy.y),ty[_h+_u]=new G(oy.x-_a.w,oy.y),ty[_h+2*_u]=new G(oy.x,oy.y),ty[_h+3*_u]=new G(oy.x+_a.w,oy.y),ty[_h+4*_u]=new G(oy.x+2*_a.w,oy.y);o[0]=ty,_h=_a.th(_e,0),_h.y=2*i[_e===Ai.NORTH?"top":"bottom"],_e=_h.clone(),_h.x=o[0][o[0].length-1].x+1,_e.x=o[0][0].x-1,o[0].push(_h,_e),i=o}if(_e=_o.left,o=_o.top,_h=_o.right,_o=_o.bottom,Uf(i,_e,o,_h,_o,!0).length){if(!s.Cf().Kg(_n)){for(s=i,_n=[new G(_e,o),new G(_h,o),new G(_h,_o),new G(_e,_o)],_o=[],i=s.length;i--;)if(_e=Wf(_n,s[i]))for(o=Li(_e),_o.push(o);_e.Nh;)_e=_e.Nh,o=Li(_e),_o.push(o);i=_o}}else s=Ni(_e,o,i[0]),i[1]&&(s=s!==Ni(_e,o,i[1])),i=s?[Nh]:B;return i}function Ni(i,o,s){var _e,_n,_o,_a=_e=s[0].x,_u=_n=s[0].y,_h=1;for(_o=s.length;_h<_o;_h++){var ty=s[_h].x,oy=s[_h].y;ty>_e?_e=ty:ty<_a&&(_a=ty),oy>_n?_n=oy:oy<_u&&(_u=oy)}return _a<=i&&i<=_e&&_u<=o&&o<=_n&&de({x:i,y:o},ee(s.concat(s[0])))}function Li(i){var o=[],s=i;do{var _e=yd(100*(s.Rn?s.Rn:s.x))/100,_n=yd(100*(s.Sn?s.Sn:s.y))/100;if(!_o||.01<Dd(Ed(_o.x-_e,2)+Ed(_o.y-_n,2))){var _o=new G(_e,_n);o.push(_o)}s=s.next}while(s&&s!==i);return o}uh.prototype.oa=y;function Ki(i,o){var s,_e=Number.POSITIVE_INFINITY,_n=-1,_o=i.length;for(s=0;s<_o;s+=2){var _a=Bd(i[s+1]-o);_a+=180<_a?360-_a:_a,_a<_e&&(_e=_a,_n=s)}return 0<s?(o=i.splice(_n,i.length-_n),o.concat(i)):i}uh.prototype.W=function(){var i=uh.l.W.call(this),o=this.da(),s=this.v?o.ja:[o],_e,_n=i.properties,_o=i.geometry=o.W();if(_n.style=this.$().W(),_n.height=this.f+this.b,_n.min_height=this.b,this.J().vb()&&(_o.type="MultiPolygon",this.v)){var _a=[];s.forEach(function(_u,_h){_e=_o.coordinates[_h],_u.J().vb()?_a=_a.concat(_e):_a.push(_e)}),_o.coordinates=_a}return i},uh.prototype.forWorkerMessage=uh.prototype.W;function Oi(i,o,s){Oi.l.constructor.call(this,Hi,s),this.kg(i),this.si(o),s&&"precision"in s&&this.ri(s.precision)}u(Oi,uh),t("H.map.Circle",Oi),Oi.prototype.kg=function(i){(i=ng(i)).ga(this.N)||(this.N=i,Pi(this))},Oi.prototype.setCenter=Oi.prototype.kg,Oi.prototype.Za=function(){return this.N},Oi.prototype.getCenter=Oi.prototype.Za,Oi.prototype.si=function(i){if(E(i=Zd(i,0,637100079e-2*Nd/2)))throw new D(this.si,0,i);this.V!==i&&(this.V=i,Pi(this))},Oi.prototype.setRadius=Oi.prototype.si,Oi.prototype.Jm=function(){return this.V},Oi.prototype.getRadius=Oi.prototype.Jm,Oi.prototype.B=60,Oi.prototype.ri=function(i){if(!Dc(i))throw new D(this.ri,0,i);this.B!==(i=Zd(yd(i),4,360))&&(this.B=i,Pi(this))},Oi.prototype.setPrecision=Oi.prototype.ri,Oi.prototype.Gm=function(){return this.B},Oi.prototype.getPrecision=Oi.prototype.Gm,Oi.prototype.aa=function(){return this},Oi.prototype.setGeometry=Oi.prototype.aa,Oi.prototype.da=function(){return this.a===Hi&&Oi.l.aa.call(this,Qi(this)),this.a},Oi.prototype.getGeometry=Oi.prototype.da;function Pi(i){i.a!==y&&Oi.l.aa.call(i,Qi(i))}function Qi(i){var o=i.N,s=o.lat,_e=i.V,_n=0,_o=new L;if(Bd(s)===90)for(s=o.sg(0,_e,!0).lat;360>_n;_n+=120)_o.$h(s,_n-180,B);else for(i=i.B,i=360/i;360>_n;_n+=i)_o.nd(o.sg(_n,_e,!0));return o=new O(_o),0>s&&o.Uk(Ai.SOUTH),o}function Ri(i,o){if(!C(i,Element)){if(Si.innerHTML=i,i=Si.firstElementChild,!i)throw new D(Ri,0,"No element data");Si.removeChild(i);var s=!0;Si.innerHTML=""}this.a=kf(i).length!==0,this.f=s?i:lf(i,x.document,this.a),o&&(s="onAttach",s in o&&xc(i=o[s],"Function",Ri,1,s)&&(this.Oh=i),s="onDetach",s in o&&xc(i=o[s],"Function",Ri,1,s)&&(this.b=i))}t("H.map.DomIcon",Ri);var Si=document.createElement("DIV");Ri.prototype.Oh=null,Ri.prototype.b=null,Ri.prototype.mj=function(i){return lf(this.f,i,this.a)},Ri.prototype.a=!1;function Ti(i){Ti.l.constructor.call(this,i)}u(Ti,gh),t("H.geo.MultiPoint",Ti),Ti.prototype.b=function(i){return mg(i)},Ti.prototype.c=function(i){return C(i,lg)?i:ng(i)},Ti.prototype.nb="Multi"+lg.prototype.nb,Ti.prototype.Cb="Multi"+lg.prototype.Cb;function Ui(i,o){this.w=+i,this.h=+o}t("H.math.Size",Ui);function Vi(i,o){var s,_e=i,_n=o||[];if(i!==Wi.NONE){if(o=s=_n.length,Xi.indexOf(_e)===-1)throw new D(Vi,0,i);if(!_n)throw new D(Vi,1,_n);for(;s--;)if(E(_n[s]))throw new D(Vi,1,_n);if(_e===Wi.RECT&&3<o&&(_n=[_n[0],_n[1],_n[2],_n[1],_n[2],_n[3],_n[0],_n[3]],_e=Wi.POLYGON),_e===Wi.CIRCLE&&2<o&&(i=_n[2],0<i)){_e=_n[0];var _o=_n[1];s=wd(2*Ad(i),40);var _a=360/s;for(_n=[];s--;){var _u=_a*s*Sd;_n.push(_e+Gd(_u)*i,_o+Id(_u)*i)}_e=Wi.POLYGON}if(_e!==Wi.POLYGON||!o||_n.length%2)throw new D(Vi,1,_n);this.a=_n}}t("H.map.HitArea",Vi);var Wi={NONE:0,RECT:1,CIRCLE:2,POLYGON:3};Vi.ShapeType=Wi;var Xi=[Wi.RECT,Wi.CIRCLE,Wi.POLYGON];Vi.prototype.If=function(i,o,s){return this.a?ce(i,o,this.a,s,!0):be.NONE},Vi.prototype.hitTest=Vi.prototype.If;function rh(i,o){var s;vc(this,rh),rh.l.constructor.call(this,o),this.aa(i),o&&"icon"in o&&(s=o.icon),this.Cc(s||Yi(this))}u(rh,M),t("H.map.AbstractMarker",rh),rh.prototype.da=function(){return this.a},rh.prototype.getGeometry=rh.prototype.da,rh.prototype.aa=function(i){var o=this.a;return C(i,lg)||C(i,Ti)?this.a=i:(mg(i,this.aa,0),this.a=ng(i)),o&&this.pa(kh.SPATIAL),this},rh.prototype.setGeometry=rh.prototype.aa,rh.prototype.J=function(){return this.a.J()},rh.prototype.rb=function(){return this.icon},rh.prototype.getIcon=rh.prototype.rb,rh.prototype.Cc=function(i){var o=this.icon,s=!o;if(o!==i){if(!this.Vj(i))throw s?new D(this.constructor,1,i):new D(this.Cc,0,i);this.icon=i,s||this.pa(kh.VISUAL)}return this},rh.prototype.setIcon=rh.prototype.Cc;function Yi(i){var o=i.c;return o||(o=i.constructor.prototype.c=i.b(Zi)),o}var Zi={svg:'<svg xmlns="http://www.w3.org/2000/svg" width="38" height="47" viewBox="0 0 38 47"><g fill="none"><path fill="#0F1621" fill-opacity=".4" d="M15 46c0 .317 1.79.574 4 .574s4-.257 4-.574c0-.317-1.79-.574-4-.574s-4 .257-4 .574z"></path><path fill="#01b6b2" d="M33.25 31.652A19.015 19.015 0 0 0 38 19.06C38 8.549 29.478 0 19 0S0 8.55 0 19.059c0 4.823 1.795 9.233 4.75 12.593L18.975 46 33.25 31.652z"></path><path fill="#6A6D74" fill-opacity=".5" d="M26.862 37.5l4.714-4.77c3.822-3.576 5.924-8.411 5.924-13.62C37.5 8.847 29.2.5 19 .5S.5 8.848.5 19.11c0 5.209 2.102 10.044 5.919 13.614l4.719 4.776h15.724zM19 0c10.493 0 19 8.525 19 19.041 0 5.507-2.348 10.454-6.079 13.932L19 46 6.079 32.973C2.348 29.495 0 24.548 0 19.04 0 8.525 8.507 0 19 0z"></path></g></svg>',size:new Ui(38,47),anchor:new G(19,45),hitArea:new Vi(Wi.POLYGON,[19,46,2,27,0,18,5,6,19,0,32,5,38,15,36,27,19,47])};rh.prototype.W=function(){var i=rh.l.W.call(this),o=this.rb(),s=o.sb(),_e=o.fd();return i.geometry=this.da().W(),s&&(o=i.properties.icon={id:o.uid},o.size={w:s.w,h:s.h},o.offset=[s.w/2-(_e?_e.x:0),s.h/2-(_e?_e.y:0)]),i},rh.prototype.forWorkerMessage=rh.prototype.W;function $i(i,o){$i.l.constructor.call(this,i,o)}u($i,rh),t("H.map.DomMarker",$i),$i.prototype.type=nh.DOM_MARKER,$i.prototype.ea=2,$i.prototype.b=function(i){var o=new Ri(i.svg,i);return i=i.anchor,o.f.style.margin=-i.y+"px 0 0 -"+i.x+"px",o},$i.prototype.Vj=function(i){return C(i,Ri)};function aj(i,o,s){aj.l.constructor.call(this,i),this.oldValue=s,this.newValue=o}u(aj,sd),t("H.util.ChangeEvent",aj);function bj(i,o,s,_e){bj.l.constructor.call(this,i,o,s),this.modifiers=_e}u(bj,aj),t("H.map.ChangeEvent",bj);var cj={SIZE:1,POSITION:2,HEADING:4,TILT:8,INCLINE:16,ZOOM:32,BOUNDS:64};bj.Type=cj,bj.prototype.ml=cj.SIZE,bj.prototype.SIZE=bj.prototype.ml,bj.prototype.Ni=cj.POSITION,bj.prototype.POSITION=bj.prototype.Ni,bj.prototype.Hi=cj.HEADING,bj.prototype.HEADING=bj.prototype.Hi,bj.prototype.Pi=cj.TILT,bj.prototype.TILT=bj.prototype.Pi,bj.prototype.Ii=cj.INCLINE,bj.prototype.INCLINE=bj.prototype.Ii,bj.prototype.Qi=cj.ZOOM,bj.prototype.ZOOM=bj.prototype.Qi,bj.prototype.Fi=cj.BOUNDS,bj.prototype.BOUNDS=bj.prototype.Fi;function dj(){this.a=[],dj.l.constructor.call(this)}u(dj,F),t("H.util.OList",dj);function ej(i,o,s){if(i=i.a.length,s)var _e=i;else if(E(_e=0>(_e=+o)?xd(0,i+_e):wd(i,_e)))throw new le(dj,o,[0,i-1]);return _e}dj.prototype.add=function(i,o){o=ej(this,o,E(o)),this.a.splice(o,0,i),this.dispatchEvent(new fj(this,this.A.ee,o,i,null,null))},dj.prototype.add=dj.prototype.add;function gj(i,o){var s=i.a.splice(o,1)[0];return i.dispatchEvent(new fj(i,i.A.ge,o,null,s,null)),s}dj.prototype.cc=function(i){return this.get(i),gj(this,i)},dj.prototype.removeAt=dj.prototype.cc,dj.prototype.remove=function(i){return i=this.indexOf(i),0<=i?(gj(this,i),!0):!1},dj.prototype.remove=dj.prototype.remove,dj.prototype.set=function(i,o){if(this.a.length!==0||i!==0){this.get(i),i=ej(this,i,!1);var s=this.a[i]}return this.a[i]=o,this.dispatchEvent(new fj(this,this.A.he,i,o,s,null)),s},dj.prototype.set=dj.prototype.set,dj.prototype.indexOf=function(i){return this.a.indexOf(i)},dj.prototype.indexOf=dj.prototype.indexOf,dj.prototype.get=function(i){var o=ej(this,i,!1),s=this.a;if(o>=s.length)throw new le(this.get,i,[0,s.length-1]);return s[o]},dj.prototype.get=dj.prototype.get,dj.prototype.tm=function(){return this.a.length},dj.prototype.getLength=dj.prototype.tm,dj.prototype.Ha=function(){return this.a.concat()},dj.prototype.asArray=dj.prototype.Ha,dj.prototype.flush=function(){for(var i=this.a.length;i--;)gj(this,i)},dj.prototype.flush=dj.prototype.flush,dj.prototype.o=function(){this.flush(),dj.l.o.call(this)},dj.prototype.A={ee:"add",ge:"remove",he:"set",Go:"move"};function fj(i,o,s,_e,_n,_o){fj.l.constructor.call(this,o,i),this.idx=s,this.added=_e,this.removed=_n,this.moved=_o}u(fj,sd),dj.Event=fj;function hj(){}function ij(i){return wd(1,xd(0,.5-Cd(Jd(Pd+Od*i/180))/Nd/2))}hj.prototype.Mf=function(i,o,s){return s?(s.x=o/360+.5,s.y=ij(i)):s=new G(o/360+.5,ij(i)),s},hj.prototype.latLngToPoint=hj.prototype.Mf,hj.prototype.Kc=function(i,o){return this.Mf(i.lat,i.lng,o)},hj.prototype.geoToPoint=hj.prototype.Kc;function jj(i){return 0>=i?90:1<=i?-90:Td*(2*Kd(Fd(Nd*(1-2*i)))-Od)}hj.prototype.La=function(i,o,s){return s?(s.lat=jj(o),s.lng=360*(i===1?1:Xd(i,1))-180):s=new lg(jj(o),360*(i===1?1:Xd(i,1))-180),s},hj.prototype.xyToGeo=hj.prototype.La,hj.prototype.Wf=function(i,o){return this.La(i.x,i.y,o)},hj.prototype.pointToGeo=hj.prototype.Wf;var kj=new hj;t("H.geo.mercator",kj),t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0),t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22);function lj(i,o){this.projection=i||kj,this.b=0,this.a=this.exp=Cd(o||256)/Md,mj(this),this.y=this.x=0}t("H.geo.PixelProjection",lj);var nj=Bd(24)+Bd(-8);lj.prototype.Xf=kj,lj.prototype.projection=lj.prototype.Xf,lj.prototype.x=0,lj.prototype.x=lj.prototype.x,lj.prototype.y=0,lj.prototype.y=lj.prototype.y,lj.prototype.xo=Ed(2,nj),lj.prototype.w=lj.prototype.xo,lj.prototype.cn=Ed(2,nj),lj.prototype.h=lj.prototype.cn,lj.prototype.Ka=function(i){if(E(i))throw new D(this.Ka,0,i);var o=this.x/this.w,s=this.y/this.h;this.b=i,this.a=this.exp+i,mj(this),this.x=o*this.w,this.y=s*this.h},lj.prototype.rescale=lj.prototype.Ka;function mj(i){i.a>nj&&(i.a=nj),i.w=Ed(2,i.a),i.h=Ed(2,i.a)}lj.prototype.Jj=function(){return this.b||0},lj.prototype.getZoomScale=lj.prototype.Jj,lj.prototype.fb=function(i,o){return i=this.projection.Mf(i.lat,i.lng,o),i.x=i.x*this.w-this.x,i.y=i.y*this.h-this.y,i},lj.prototype.geoToPixel=lj.prototype.fb,lj.prototype.Ne=function(i,o){return this.projection.La((i.x+this.x)/this.w,(i.y+this.y)/this.h,o)},lj.prototype.pixelToGeo=lj.prototype.Ne,lj.prototype.La=function(i,o,s){return this.projection.La((i+this.x)/this.w,(o+this.y)/this.h,s)},lj.prototype.xyToGeo=lj.prototype.La,lj.prototype.th=function(i,o,s){return i=this.projection.Mf(i,o,s),i.x=i.x*this.w-this.x,i.y=i.y*this.h-this.y,i},lj.prototype.latLngToPixel=lj.prototype.th,lj.prototype.Xd=function(i){return new G(i.x*this.w-this.x,i.y*this.h-this.y)},lj.prototype.pointToPixel=lj.prototype.Xd;function oj(i){i=i||{},oj.l.constructor.call(this),this.min=0,this.max=22,this.zl=this.dark=!!i.dark,i.min&&this.mi(i.min),i.max&&this.ki(i.max),this.pixelProjection=new lj(i.projection,i.minWorldSize),i.provider&&(this.la=i.provider,this.Sa=A(this.Sa,this),this.la.addEventListener(P.prototype.A.xa,this.Sa,!1,this),this.eb=A(this.eb,this),this.la.addEventListener(P.prototype.A.fe,this.eb,!1,this))}u(oj,F),t("H.map.layer.Layer",oj),oj.prototype.min=0,oj.prototype.min=oj.prototype.min,oj.prototype.max=22,oj.prototype.max=oj.prototype.max,oj.prototype.A={xa:"update",fe:"configchange",Mi:"minchange",Li:"maxchange"},oj.prototype.ka=function(){return this.la},oj.prototype.getProvider=oj.prototype.ka,oj.prototype.mn=function(i){return this.min<=i&&i<=this.max},oj.prototype.isValid=oj.prototype.mn;function pj(i,o,s){var _e=i[o],_n=o==="min",_o=_n?i.mi:i.ki;if(s!==_e)if(_n?s<=i.max:s>=i.min)i[o]=s,i.Sa(),i.eb(),i.dispatchEvent(new aj(_n?i.A.Mi:i.A.Li,s,_e));else throw new D(_o,0,"Invalid condition min <= max");return i}oj.prototype.mi=function(i){return pj(this,"min",+i)},oj.prototype.setMin=oj.prototype.mi,oj.prototype.ki=function(i){return pj(this,"max",+i)},oj.prototype.setMax=oj.prototype.ki,oj.prototype.Sa=function(){this.dispatchEvent(this.A.xa)},oj.prototype.eb=function(){this.dispatchEvent(this.A.fe)},oj.prototype.o=function(){oj.l.o.call(this)},oj.prototype.ca=function(){return null},oj.prototype.getCopyrights=oj.prototype.ca;function qj(i){var o;if(qj.l.constructor.call(this),this.dispatchEvent=A(this.dispatchEvent,this),i){var s=i.length;for(o=0;o<s;o++)this.add(i[o])}}u(qj,dj),t("H.map.DataModel",qj);function rj(i,o){var s=o.getProvider&&o.getProvider();s&&(sj[s.uid]=s),o.ia(i)}function tj(i){var o=i.getProvider&&i.getProvider();o&&delete sj[o.uid],i.ia(null)}qj.prototype.add=function(i,o){C(i,oj,this.add,0),rj(this,i),qj.l.add.call(this,i,o)},qj.prototype.add=qj.prototype.add,qj.prototype.set=function(i,o){return C(o,oj,this.set,0),rj(this,o),(i=qj.l.set.call(this,i,o))&&tj(i),i},qj.prototype.set=qj.prototype.set,qj.prototype.cc=function(i){var o;return(o=qj.l.cc.call(this,i))&&tj(o),o},qj.prototype.removeAt=qj.prototype.cc,qj.prototype.remove=function(i){var o;return(o=qj.l.remove.call(this,i))&&tj(i),o},qj.prototype.remove=qj.prototype.remove,qj.prototype.flush=function(){for(var i=this.a.length;i--;)this.cc(i);qj.l.flush.call(this)},qj.prototype.flush=qj.prototype.flush;var sj={};Gc(sj);function uj(i,o,s){if(i=sj[i])return C(i[o],Function,uj,1,"invalid method"),i[o].apply(i,s)}qj.invoke=uj;function vj(i,o){Da(i)&&(this.j=i),Dc(o)&&(this.b=o)}t("H.util.Request",vj),vj.State={PENDING:0,PROCESSING:1,COMPLETE:2,CANCELLED:3,ERROR:4};var wj=[0,1,2,3,4];vj.prototype.a=0,vj.prototype.getState=function(){return this.a},vj.prototype.getState=vj.prototype.getState,vj.prototype.O=function(i){if(0>wj.indexOf(i))throw new D(this.O,0,i);(this.a!==i||i===1&&1<this.b)&&(this.a=i,this.j&&this.j(this))},vj.prototype.b=1,vj.prototype.Wm=function(){return this.b},vj.prototype.getTotal=vj.prototype.Wm,vj.prototype.c=0,vj.prototype.Hm=function(){return this.c},vj.prototype.getProcessed=vj.prototype.Hm,vj.prototype.i=0,vj.prototype.fm=function(){return this.i},vj.prototype.getFailed=vj.prototype.fm;function xj(i,o){i.c<i.b&&(uc(o)||(o=2),o===0||o===1||i.a!==0&&i.a!==1||(i.c++,o!==2&&i.i++,i.O(i.c<i.b?1:2)))}vj.prototype.ke=function(){},vj.prototype.cancel=function(){this.a!==3&&(this.ke(),this.O(3))},vj.prototype.cancel=vj.prototype.cancel;function yj(){}t("H.util.ICapturable",yj),yj.prototype.capture=function(){},yj.prototype.capture=yj.prototype.capture,t("H.util.Disposable",nd),nd.prototype.ob=nd.prototype.ob,nd.prototype.addOnDisposeCallback=nd.prototype.ob,t("H.util.dispose",rd),nd.prototype.D=nd.prototype.D,nd.prototype.dispose=nd.prototype.D,nd.prototype.o=nd.prototype.o,nd.prototype.disposeInternal=nd.prototype.o;function zj(i,o){var s=i.L(),_e=s.ownerDocument;zj.l.constructor.call(this),this.a=i,this.P=s=s.appendChild(Aj(_e,"DIV","position:absolute;bottom:0;right:0;left:0px;z-index:1;direction:ltr;pointer-events:none;height:40px-webkit-touch-callout: none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select:none;",null,"H_imprint")),this.kf=Aj(_e,"DIV","margin: 0 0 16px 16px;display:inline-block;",'<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>',"H_logo"),s.appendChild(this.kf),s=s.appendChild(Aj(_e,"DIV","right:0;bottom:0;position:absolute;background-color:rgba(255,255,255,.8);color:#0F1621;padding:2px 16px",null,"H_copyright")),this.i=s.appendChild(Aj(_e,"A","color:inherit; margin:0px 8px; text-decoration:none; pointer-events:all;","Terms of use")),this.i.target="_blank",this.g=s.appendChild(Aj(_e,"SPAN","margin:0px 8px")),this.c=s.appendChild(Aj(_e,"SPAN")),this.m=Wa(Bj),this.ni(o),this.f=A(this.f,this),this.b=A(this.b,this),this.a.addEventListener(this.a.A.Ki,this.f),this.a.a.addEventListener("add",this.b),this.a.a.addEventListener("remove",this.b),this.a.a.addEventListener("set",this.b),this.b()}var Cj;u(zj,nd),t("H.map.Imprint",zj);var Bj={font:'11px "Lucida Grande", Arial, Helvetica, sans-serif',href:"https://legal.here.com/{LN}/terms/serviceterms/{CN}",invert:!1,reportHref:"https://wego.here.com/",locale:"en-US",mark:""};zj.prototype.ni=function(i){var o,s=this.kf.firstElementChild.firstElementChild.children;i||(this.m=Wa(Bj));var _e=this.m;for(o in _e)i&&o in i&&(_e[o]=i[o]);i=(this.ph=i=_e.invert)?Dj:Ej,s[0].style.fill=i.Yk,s[0].style.fillOpacity=""+i.Zk,s[1].style.fill=i.cl,s[1].style.fillOpacity=""+i.dl,i=_e.locale,Fj[i]||(i="en-US",_e.locale=i),this.i.innerHTML=Fj[i],i=i.split("-"),this.i.href=_e.href.replace("{LN}",i[0]).replace("{CN}",i[1].toLowerCase()),_e.mark?(this.c.innerHTML=_e.mark,this.c.style.margin="0px 8px"):(this.c.innerHTML="",this.c.style.margin="0px"),this.P.style.font=_e.font},zj.prototype.setOptions=zj.prototype.ni;function Aj(i,o,s,_e,_n){return i=i.createElement(o),s&&(i.style.cssText=s),_e&&(i.innerHTML=_e),_n&&(i.className=_n),i}zj.prototype.L=function(){return this.P},zj.prototype.f=function(){this.g.innerHTML=this.j+" "+this.ca()},zj.prototype.b=function(){this.f(),setTimeout(this.f,5e3)};var Ej={cl:"#0F1621",dl:.3,Yk:"#fff",Zk:.6},Dj={cl:"#fff",dl:1,Yk:"#0F1621",Zk:.7},Gj="1987&ndash;"+xd(2015,new Date().getFullYear())+" HERE";zj.prototype.ca=function(){var i=this.a,o=i.kb(),s=i.c.gb().bounds;i=i.a;var _e=i.a.length,_n={},_o=0,_a,_u,_h,ty=[Gj];if(s){for(;_o<_e;_o++)if(_u=i.get(_o).getCopyrights(s.J(),o))for(_a=0;_a<_u.length;_a++)_n[_h=_u[_a].label]||(ty.push(_h),_n[_h]=1)}return ty.join(", ")},zj.prototype.getCopyrights=zj.prototype.ca,zj.prototype.$=function(){return this.P.style},zj.prototype.j="©",zj.prototype.o=function(){if(this.a.removeEventListener(this.a.A.Ki,this.f),this.a.a.removeEventListener("add",this.b),this.a.a.removeEventListener("remove",this.b),this.a.a.removeEventListener("set",this.b),this.P.parentNode){var i=this.P;i.parentNode.removeChild(i)}},zj.prototype.disposeInternal=zj.prototype.o,zj.prototype.capture=function(i,o,s,_e){var _n=i.getContext("2d"),_o=window.getComputedStyle(this.g.parentElement),_a=2*Bc(_o.paddingLeft,10),_u=(this.g.offsetWidth+2*_a)*o,_h=this.g.offsetHeight*o,ty=this.c.innerHTML.length!==0?this.c.offsetWidth*o:0,oy=Cc(_o.getPropertyValue("font-size")),hy=this.P.ownerDocument,fy=+i.width,vy=+i.height,xy=16*o,wy=this.kf.childNodes[0].getBoundingClientRect(),By=wy.width*o,Sy=wy.height*o,Ay=jd;Da(_e)&&(Ay=function(){_e("capture_error")}),_n.fillStyle=_o.backgroundColor,_n.fillRect(fy-_u-ty,vy-_h,_u+ty,_h),_u=this.c.innerHTML,_u=this.j+" "+function(Py){return Py=Aj(hy,"div",null,Py),Py.textContent||Py.innerText||""}(this.ca())+(_u?" "+_u:""),_n.font=oy*o+"px "+_o.getPropertyValue("font-family"),_n.fillStyle=_o.getPropertyValue("color"),_n.textBaseline="bottom",_n.textAlign="right",_n.fillText(_u,fy-_a*o,vy),Hj(this,_n.font,function(Py){new tf("image",Py).then(function(Iy){_n.drawImage(Iy,xy,vy-(Sy+xy),By,Sy),s(i)},Ay)},Ay)},zj.prototype.capture=zj.prototype.capture;function Hj(i,o,s,_e){Ij(A(function(_n){_n?this.ph?s("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAADNklEQVRYR82XW6hVVRSGv7+rmJfSMKSnSkMEfY7EogcJC7tilGRopBAiSaI+SBARQSCIIqgFISih2YW0oAgLCsKXojA0RB+81VugZEFZv/yHuWTt7d7Hfc4+6+h4OWefNfcc3xlj/v+YS1zjoab5bE8DZgGngB8keSg5GwO0PQ54F3i2BnQIWCLpx14hGwG0fT3wOfBwB5DzwOOSDvQC2RTgM8Ae4D/gaeA3YDdwN5AWvyxp+6gD2r4OmAq8AbwInAMmA/OAT4CbgBWStvYClzUjWkHbrwHLgF8LVHJ8DDxah7P9JHCil7M40oA/A7OBC8ANtSqlrQOVs30/8CWQat8r6cxg1RwRQNvPA88Bk4D7gJzBV4A5teSp5MlS4VuA/ZIeu1Kr+wa0/QTwIRDlRhT5eTswBvi2CKOd42AULilndNAYCcA7gK+BmbVMiyXtsh3Qt4FFBTgW8w6wXtLfV4LrSyS2FwAvAWOBX+JtwF0laUDmS/oun23fDNwJnJb0Ty9g1ZphVdB2qrK2LdFfBbb685/AIxXkUKDqa4cMaDs2kjalRe8Fola57J3qRQSJviGHA3gMuAdYI2lDUfDOArQLWAd8VTuTOW9vjUoFy6TIGYpS9wKfAjuK5wVuSfn91iKcvZJeHy5ci0hsZwzNk5Qh3xIFbLyks7aPAtPLgv+L4VZwDwLvA6uKz6XdfcVAi22PBz4q4+lVSRurXW2vKYKIZfwEHCmmXC35HngAyITYD0ys2t8XWflyBfhmvKm24QCk7aVFCPVc7WMszzKucknI+NoHPCUppt13VICZm2nNwjoksByY0SXL72Vi3FieZ97mgrpyqF432H9xScW2O0H+W6oSE/4D2FYuA9kzlUzVTwO3Ad9IOtx3ydo2aLGZLpABm5KW2Z4AfAbMLfsEcpGkKLqRuMwHu0CukrSpCCrvGlF6hBEVL5MUw24kOhp1B8gc+FTqgxpkFLuzSbjk6jpJOkC2tDPeKCkVbDRkO67fDTTC2VK7vgfyBUlfNEpV2zyAK4HNXRLmZfshScdHC6g9T+WDGU2XpkdZdNXhWs6g7dXAhmsJ7jKR2M77bG4kV7Wt9TZfBLgYEC7PSpcIAAAAAElFTkSuQmCC"):s("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIMSURBVFiFzdZPiE1RGADwXzPTTPIMQoodVpbKgpoUG5qExUi8DSVJQv4slJJsbNjYWFhNETWLUUosRDRLUVLCYhIiojFojHkW997uvefNGIuZc99Xp/fOO6/Or++c75xDi0d7hDlWYQNqeB9hvv+OGq6jUWjPsKZKVBbtuKOMy9p3bKqOlsROCWYc27AWr9PfJnCgKlgbluNqivmGDmzBrxR3sCocnMEw7sqXdEAzboeK9uLTFPVbed8VcesxglFJtqNEHbcxlIL68ChADuCSpEgauBULt11SDI3C5yJJdrLCCNsQumMBl+J5AKinY4slBfNTfsRcxJwYsK0YxD3J0r1RPut6Cv/twgp0xoDBBc3LNhr0RwJktNifAn7gsnLmsuxVinyVTn4i7dcLoH4sU96Tp2Pi2uSVehN75Gdev+QO7pIXztmZnLwTvf+AzU+/v5Rn50+A24gP2IW5M4mbJ7+ejgVjJ/EpHXuCa8p77nGK68FX5eWfsTgfTJoh92qu1vAaa+CtPJuDZuEh3CHZUyHyxSSYrL3DWKE/gStm8aybDDkmKYperJM/BrJMnsJuHMLq2YJNh/wsX7JuPAyQfTFg0yGPFMZreCCv4n2xgTQjxyXP+CxquK8iXBYhMlzOtliQBVg4RVuCG/iSto/YHAuWxWFTHyXDWBkbNFkc1cK4LI5rYVwW57QY7i/pZeJv8QQJRQAAAABJRU5ErkJggg=="):(_n=this.kf.cloneNode(!0),_n.firstChild.setAttribute("style","font:"+o),s(bf(_n.innerHTML)))},i),_e)}zj.prototype.ph=!1;function Ij(i,o){var s="data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>'),_e=Cj;uc(_e)?i(_e):new tf("image",s).then(function(_n){Xe.drawImage(_n,0,0);try{Xe.getImageData(0,0,1,1),_e=!1}catch(_o){_e=_o.code===18}finally{Cj=_e,i(_e)}},o)}zj.prototype.ol=function(i,o){Fj[i]=o},zj.prototype.addL11NString=zj.prototype.ol;var Fj={"de-DE":"Nutzungsbedingungen","en-US":"Terms of use","en-GB":"Terms of use","es-ES":"Condiciones de uso","fi-FI":"Palveluehdot","fr-FR":"Conditions d'utilisation","it-IT":"Condizioni di utilizzo","nl-NL":"Dienstvoorwaarden","pl-PL":"Warunki świadczenia usługi","pt-BR":"Termos de serviço","pt-PT":"Termos do serviço","ru-RU":"Условия использования","tr-TR":"Servis Koşulları","zh-CN":"使用条款"};function R(i){var o={};this.f=o.previousSibling=o.nextSibling=o,this.g=new cf,R.l.constructor.call(this,i),i&&"objects"in i&&this.Sb(i.objects)}u(R,M),t("H.map.Group",R),R.prototype.type=nh.GROUP,R.prototype.be=function(i,o){return this.b=!0,i=R.l.be.call(this,i,o),this.b=!1,i&&this.forEach(Jj,!0),i},R.prototype.setProvider=R.prototype.be;function Jj(i,o,s){i.be(s.la)}R.prototype.contains=function(i){var o=this===i;if(!o&&this.a&&C(i,M))for(;!o&&i;)i===this?o=!0:i=i.Ca;return o},R.prototype.contains=R.prototype.contains,R.prototype.Ve=function(){this.K=B,this.forEach(Kj,!0)},R.prototype.resetZInfo=R.prototype.Ve;function Kj(i){i.Ve()}R.prototype.b=!1,R.prototype.pa=function(i){var o=R.l.pa.call(this,i);return o&&!this.b&&(this.c=i,this.forEach(Lj,!0),delete this.c),o},R.prototype.invalidate=R.prototype.pa;function Lj(i,o,s){i.pa(s.c)}R.prototype.forEach=function(i,o,s){var _e;if(this.a){var _n=this.f,_o=_n.nextSibling;for(_e=0;_o!==_n;){var _a=_o.nextSibling;i.call(s,_o,_e++,this),o&&C(_o,R)&&_o.forEach(i,o,s),_o=_a}}},R.prototype.forEach=R.prototype.forEach,R.prototype.Pa=function(i){var o=[];return this.forEach(Mj,i,o),o},R.prototype.getObjects=R.prototype.Pa,R.prototype.J=function(){var i=null;return this.a&&this.forEach(function(o){o.J&&(o=o.J())&&(i?i=i.$b(o):i=o)}),i},R.prototype.getBoundingBox=R.prototype.J;function Mj(i){this.push(i)}R.prototype.a=0,R.prototype.Sl=function(){return this.a},R.prototype.getChildCount=R.prototype.Sl,R.prototype.ba=function(i){var o=this.f,s=o.previousSibling;if(C(i,M,this.ba,0),i.contains(this))throw new Yc(this.ba,"The new object contains the parent group");var _e=i.Gf(!0),_n=i.Ca;if(_n!==this){if(_n){_n=i.previousSibling;var _o=i.nextSibling;_n.nextSibling=_o,_o.previousSibling=_n}i.Ca=this,M.l.ia.call(i,this),s.nextSibling=i,i.previousSibling=s,i.nextSibling=o,o.previousSibling=i,this.a++}return i.wi=this.g.next(),i.Ve(),o=i.be(this.la,this.ba),i.Gf(!0)!==_e&&i.pa(kh.VOLATILITY),o||i.pa(kh.Z_ORDER),i},R.prototype.addObject=R.prototype.ba,R.prototype.Sb=function(i){var o;zc(i,this.Sb,0);var s=i.length;for(o=0;o<s;o++)this.ba(i[o])},R.prototype.addObjects=R.prototype.Sb,R.prototype.Da=function(i){if(!i||i.Ca!==this)throw new Yc(this.Da,"object not found");var o=i.previousSibling,s=i.nextSibling;return o.nextSibling=s,s.previousSibling=o,i.Ca=null,M.l.ia.call(i,null),delete i.previousSibling,delete i.nextSibling,C(i.la,N)&&i.be(null,this.Da),this.a--,i},R.prototype.removeObject=R.prototype.Da,R.prototype.od=function(i){var o;zc(i,this.od,0);var s=i.length;for(o=0;o<s;o++)this.Da(i[o])},R.prototype.removeObjects=R.prototype.od,R.prototype.ma=function(){var i=this.Pa();this.od(i)},R.prototype.removeAll=R.prototype.ma,R.prototype.Ec=function(i){for(var o=this.Pa(),s=0,_e=o.length,_n=[],_o,_a,_u;s<_e;s++)_u=o[s],_u instanceof R?(_o=i?i(_u.getData()):_u.getData(),_a=qh(this,_o,!!i),_o={type:"Feature"},_o.properties=_a,_u.i&&(_o.id=_u.i),_o.geometry={},_o.geometry.type="GeometryCollection",_o.geometry.geometries=Nj(this,_u.Pa()),_n.push(_o)):_n.push(_u.Ec(i));return{type:"FeatureCollection",features:_n}},R.prototype.toGeoJSON=R.prototype.Ec;function Nj(i,o){for(var s=0,_e=o.length,_n,_o,_a=[];s<_e;s++)_n=o[s],_n instanceof R?_o={type:"GeometryCollection",geometries:Nj(i,_n.Pa())}:_n instanceof rh||_n instanceof sh||_n instanceof th||_n instanceof uh?_o=_n.da().Ec():_o={type:"FeatureCollection",features:hf},_a.push(_o);return _a}R.prototype.W=function(){var i=R.l.W.call(this);return i.type="Group",i},R.prototype.forWorkerMessage=R.prototype.W;var Oj={PROVIDES_BY_VIEWPORT:1,PROVIDES_RASTERS:2,PROVIDES_SPATIALS:4,PROVIDES_OVERLAYS:8,PROVIDES_MARKERS:16,PROVIDES_DOM_MARKERS:32,PROVIDES_GEOJSON:64,PROVIDES_OMV:128,CROP_LINES_BY_TILE:256,CROP_POLYGONS_BY_TILE:512,HAS_VOLATILE_DATA:1024};t("H.map.provider.Capabilities",Oj),Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS=Oj.PROVIDES_SPATIALS|Oj.PROVIDES_OVERLAYS|Oj.PROVIDES_MARKERS;function Pj(i,o,s,_e,_n){switch(o&&(this.g=o),uc(s)&&(this.c=!!s),this.c&&_e&&(this.Fg=new Ui(_e.w,_e.h)),uc(_n)&&(this.i={crossOrigin:_n}),Qj[yc(i)]){case 2:this.a=i,Rj(this,1);break;case 1:if(nf(i)){this.a=i,Sj(this),Rj(this,1);break}i=i.src;case 0:if(i){i=bf(i),this.b=new tf("image",i,B,this.i),this.b.then(A(this.On,this),A(this.Nn,this));break}default:throw Rj(this,-1),new D(Pj,0,"No image data")}}Pj.prototype.f=0,Pj.prototype.getState=function(){return this.f};function Rj(i,o){i.f=o,delete i.b,i.g&&i.g(o,i)}Pj.prototype.c=!0;function Sj(i){if(i.c){var o=i.a,s=Tj(i),_e=s&&s.w||+o.width,_n=s&&s.h||+o.height,_o=Te();if(C(o,x.HTMLCanvasElement))s=o;else{s=o.ownerDocument.createElement("canvas"),s.width=Ad(_e*_o),s.height=Ad(_n*_o);var _a=s.getContext("2d");_a.scale(_o,_o),_a.drawImage(o,0,0,_e,_n),$c&&(_a.clearRect(0,0,_e,_n),_a.drawImage(o,0,0,_e,_n))}i.a=s}}Pj.prototype.getData=function(){return this.a||y};var Qj={String:0,HTMLImageElement:1,HTMLCanvasElement:2};p=Pj.prototype,p.Fg=y,p.sb=function(){return this.f===1?Tj(this):y};function Tj(i){var o=i.Fg,s;if(!o){var _e=i.a;if(o=_e.naturalWidth||_e.width,o===0&&$e&&Qj[yc(_e)]===1){var _n=!0;if(s=_e.parentNode)var _o=_e.nextSibling;document.body.appendChild(_e)}i.Fg=o=new Ui(_e.naturalWidth||_e.width,_e.naturalHeight||_e.height),_n&&(s?s.insertBefore(_e,_o):document.body.removeChild(_e))}return o}p.On=function(i){this.a=i,Sj(this),Rj(this,1)},p.Nn=function(){Rj(this,-1)},p.cancel=function(){this.b&&this.b.cancel()};function Uj(i,o){var s,_e="anonymous";if(this.uid=Vj.next(),Uj.l.constructor.call(this),o){var _n="size";if(_n in o){var _o=o[_n];if(!_o||isNaN(_o.w)||isNaN(_o.h))throw new D(Uj,1,_n);this.g=new Ui(_o.w,_o.h)}if(_n="anchor",_n in o){if(_o=o[_n],!_o||isNaN(_o.x)||isNaN(_o.y))throw new D(Uj,1,_n);this.f=new G(_o.x,_o.y)}_n="hitArea",_n in o&&(_o=o[_n],C(_o,Vi,Uj,1),this.c=o[_n]),_n="asCanvas",_n in o&&(s=o[_n]),_n="crossOrigin",_n in o&&(_e=o[_n]),_o=o.stickHeight,_o===+_o&&0<_o&&(this.oo=_o),_n="stickColor",_o=o[_n],_n in o&&Ac(_o)&&(this.no=_o)}i=new Pj(i,A(this.i,this),s,this.g,_e),o=this.j=i.getState(),o!==0?this.i(o,i):this.b=i}u(Uj,F),t("H.map.Icon",Uj);var Vj=new cf;Uj.State={ERROR:-1,LOADING:0,READY:1},Uj.prototype.getState=function(){return this.j},Uj.prototype.getState=Uj.prototype.getState,Uj.prototype.i=function(i,o){if(this.a=o.getData(),i===1){var s=this.g;s||(s=this.g=o.sb()),this.f||(this.f=new G(s.w/2|0,s.h))}this.b&&(this.j=i,delete this.b,this.dispatchEvent("statechange"))},Uj.prototype.a=y,Uj.prototype.Lc=function(){return this.a},Uj.prototype.getBitmap=Uj.prototype.Lc,Uj.prototype.sb=function(){return this.g||y},Uj.prototype.getSize=Uj.prototype.sb,Uj.prototype.f=y,Uj.prototype.fd=function(){return this.f},Uj.prototype.getAnchor=Uj.prototype.fd,Uj.prototype.c=y,Uj.prototype.jm=function(){return this.c},Uj.prototype.getHitArea=Uj.prototype.jm,Uj.prototype.o=function(){Uj.l.o.call(this),this.a?(this.a.removeAttribute("src"),delete this.a):(this.b.cancel(),delete this.b)};function Wj(i,o,s,_e,_n,_o){Wj.l.constructor.call(this,isNaN(i)?15:i,o,s,_e,_n,_o)}u(Wj,wg),Wj.prototype.m=function(i){for(var o,s,_e=this.head,_n=i;_n;){if(i=_n.entries){if(o=i.length){if(2>o&&(s=_n.parent)&&s.a===1){s.removeChild(_n),_e===_n&&(_e=s),s.entries=i,_n=i[0].node=s;continue}}else if(delete _n.entries,(s=_n.parent)&&(s.removeChild(_n),_e===_n&&(_e=s),s.a===1)){_n=s.a?s[0]||s[1]||s[2]||s[3]:null;continue}}break}this.head!==_e&&(this.head=_e,Bg(this))},Wj.prototype.sc=function(i,o){if(Gg(this.a,i,o,i,o))return Xj(this,this.a,i,o,this.c);throw Error("Coordinates out of bounds")};function Xj(i,o,s,_e,_n){var _o=o.entries;if(_n)if(o.a)_o=Yj(i,o,s,_e,_n);else if(_o){_o=_o[0];var _a=Eg(o,+(_o[1]>=o[8])|+(_o[0]>=o[9])<<1);_a.entries=o.entries,delete o.entries,_o.node=_a,Bg(i,_a),_o=Yj(i,o,s,_e,_n)}else Fg(o,_o=new Zj(s,_e)),Bg(i,o),zg(i,_o,!0);else _o||Bg(i,o),Fg(o,_o=new Zj(s,_e)),zg(i,_o,!0);return _o}function Yj(i,o,s,_e,_n){return Xj(i,Eg(o,+(s>=o[8])|+(_e>=o[9])<<1),s,_e,_n-1)}function Zj(i,o){this.id=Dg++,this[0]=o,this[1]=i}Zj.prototype.a=function(i){return this[i%2]};function ak(){this.a=new Wj(10,180,90,0,0,!0)}p=ak.prototype,p.wh=0,p.Mc=function(){return this.wh},p.Nf=null,p.J=function(){var i=this.Nf,o;return!i&&(o=xg(this.a))&&(this.Nf=i=new K(-o[0],o[3],-o[2],o[1])),i},p.sc=function(i){return++this.wh,this.Nf=null,this.a.sc(i.lng,-i.lat)},p.remove=function(i){return(i=this.a.remove(i))&&(--this.wh,this.Nf=null),i},p.Jf=function(i,o,s){var _e=this.a,_n=i.Ib(),_o=i.Eb(),_a=-_n.lat;_n=_n.lng;var _u=-_o.lat;_o=_o.lng;var _h;return i.vb()?_h=_e.Va(-180,_a,_o,_u,s,o).concat(_e.Va(_n,_a,180,_u,s,o)):_h=_e.Va(_n,_a,_o,_u,s,o),_h};function bk(i){this.a=i}function ck(i,o,s){this.c=i,this.a=o,this.g=s,this.f=this.c&Oj.PROVIDES_BY_VIEWPORT?"function(){return sources[$source].isInMinMaxRange(feature, $zoom) && feature.ref.effectiveVisibility;}":B,this.b={}}function dk(i,o,s,_e){this.a=i,this.b=o,this.c=s,this.ff=_e}function ek(i,o,s,_e){return i={type:o,uid:i.b,tiled:s,max_zoom:i.c},_e&&Ya(i,_e),i}function fk(i,o,s,_e,_n){this.a=i,this.b=o,this.c=s,this.f=_e,this.ff=_n}function gk(i){if(i.a&Oj.PROVIDES_DOM_MARKERS&&!(i.a&Oj.PROVIDES_MARKERS))return{};var o=new dk(i.a,i.b,i.c,i.ff),s=new bk(i.a);i=new ck(i.a,i.b,i.f);var _e={},_n=o.b;if(o=o.a&Oj.PROVIDES_BY_VIEWPORT?ek(o,"ObjectSource",!1,{progressiveUpdate:!0,has_volatile_data:!!(o.a&Oj.HAS_VOLATILE_DATA)}):o.a&Oj.PROVIDES_RASTERS?ek(o,"RemoteRasterTileSource",!0,{url:""}):ek(o,"ObjectTileSource",!0,{tile_size:o.ff}),_e[_n]=o,o={},s.a&Oj.PROVIDES_RASTERS&&(o={"translucent-raster":ni("raster","inlay",1)}),s.a&Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS){_n=!!(s.a&Oj.CROP_LINES_BY_TILE);var _o={"translucent-polygons":ni("polygons","inlay",2),"translucent-extruded-polygons":ni("polygons","translucent",3),"translucent-pattern-lines":ni("pattern-lines","translucent",4),"translucent-overlays":ni("overlays","inlay",5),markers:ni("custom_icons","overlay",6,!1)};_o["translucent-polygons"].crop_by_tile=!!(s.a&Oj.CROP_POLYGONS_BY_TILE),_o["translucent-pattern-lines"].crop_by_tile=_n,_o.markers.suppress_fade=!0,_o.markers.stick=!0,Ya(o,_o)}if(i.c&Oj.PROVIDES_RASTERS&&(i.b["tile_layer_"+i.a]=pi(i.a,"_default",{"translucent-raster":{color:[1,1,1,i.g],order:0}})),i.c&Oj.PROVIDES_SPATIALS){s={"translucent-pattern-lines":{color:mi("strokeColor"),width:mi("lineWidth * $meters_per_pixel"),join:mi("lineJoin"),cap:mi("lineCap"),tail_cap:mi("lineTailCap"),head_cap:mi("lineHeadCap"),miter_limit:mi("miterLimit"),order:"function() { return 2 + feature.effectiveZIdx / 2; }",interactive:!0,dash:mi("lineDash"),extrude:!0,dash_phase:mi("lineDashOffset")}},_n=i.b,_o="polygon_layer_"+i.a;var _a=pi(i.a,"polygons",void 0,i.f);_a.flat={filter:"function(){return !feature.height && !feature.min_height;}",draw:oi(!1)},_a.extruded={filter:"function(){return feature.height || feature.min_height;}",draw:oi(!0)},_n[_o]=_a,i.b["outline_layer_"+i.a]=pi(i.a,"outlines",s,i.f),i.b["polyline_layer_"+i.a]=pi(i.a,"polylines",s,i.f)}return i.c&Oj.PROVIDES_OVERLAYS&&(i.b["overlay_layer_"+i.a]=pi(i.a,"overlays",{"translucent-overlays":{color:[1,1,1,i.g],order:8190,interactive:!0}})),i.c&Oj.PROVIDES_MARKERS&&(i.b["marker_layer_"+i.a]=pi(i.a,"markers",{markers:{sprite:li("icon.id"),offset:li("icon.offset"),collide:!1,priority:8191,elevate_by_altitude:!0,interactive:!0,stick:{color:li("icon.stick_color"),height:li("icon.stick_height")}}},i.f)),{sources:_e,styles:o,layers:i.b}}function P(i){var o=""+ef(),s;if(P.l.constructor.call(this),i=i||{},this.min=i.min||0,this.max=i.max||22,s=i.uri){if(/_/.test(s))throw new D(P,0,"uri "+s)}else s=o;if(this.uri=s||o,this.uid=o,i.getCopyrights&&xc(i.getCopyrights,"Function",P)&&(this.getCopyrights=i.getCopyrights),this.eb=this.eb.bind(this),this.ra=!0,this.a=i.engineType||hk,this.a===ik.HARP&&!H.map.render.harp)throw new D(P,0,"HARP engine is not supported, module not found")}u(P,F),t("H.map.provider.Provider",P),p=P.prototype,p.A={fe:"configchange",xa:"update"},p.Sa=function(i,o){this.dispatchEvent(new td(this.A.xa,o,i))},p.eb=function(){this.dispatchEvent(this.A.fe)},p.o=function(){F.prototype.o.call(this),this.b&&(this.b.removeEventListener("change",this.eb),delete this.b)},p.ca=function(){return null},P.prototype.getCopyrights=P.prototype.ca,P.prototype.getCapabilities=function(){var i=0;return this.Xh()&&(i|=Oj.PROVIDES_BY_VIEWPORT),this.providesRasters()&&(i|=Oj.PROVIDES_RASTERS),this.providesSpatials()&&(i|=Oj.PROVIDES_SPATIALS),this.providesOverlays()&&(i|=Oj.PROVIDES_OVERLAYS),this.providesMarkers()&&(i|=Oj.PROVIDES_MARKERS),this.providesDomMarkers()&&(i|=Oj.PROVIDES_DOM_MARKERS),this.providesGeoJSON()&&(i|=Oj.PROVIDES_GEOJSON),this.providesOMV()&&(i|=Oj.PROVIDES_OMV),i},P.prototype.getCapabilities=P.prototype.getCapabilities,P.prototype.Xh=gf,P.prototype.Re=gf,P.prototype.providesRasters=P.prototype.Re,P.prototype.wc=gf,P.prototype.providesSpatials=P.prototype.wc,P.prototype.Zh=gf,P.prototype.providesOverlays=P.prototype.Zh,P.prototype.Mb=gf,P.prototype.providesMarkers=P.prototype.Mb,P.prototype.Lb=gf,P.prototype.providesDomMarkers=P.prototype.Lb,P.prototype.Yh=gf,P.prototype.providesGeoJSON=P.prototype.Yh,P.prototype.md=gf,P.prototype.providesOMV=P.prototype.md,P.prototype.cm=function(){return this.a},P.prototype.getEngineType=P.prototype.cm,P.prototype.Qe=jd,P.prototype.preprocessData=P.prototype.Qe,P.prototype.g=1;function jk(i,o){o=Zd(o,0,1),E(o)&&(o=1),i.g!==o&&(i.g=o,i.ra&&kk(i),i.eb(),i.Sa())}P.prototype.zm=function(){return this.g},P.prototype.getOpacityInternal=P.prototype.zm,P.prototype.lb=function(i,o){var s=this;if(this.a===ik.WEBGL&&!C(i,qi)||this.a===ik.HARP&&!C(i,H.map.render.harp.Style))throw i=Object.entries(ik).find(function(_e){return _e[1]===s.a}),new D(this.lb,0,"Invalid style for engineType "+i);this.b&&(this.b.removeEventListener("change",this.eb),this.b.removeEventListener(Vh,this.eb)),this.b=i,this.b.addEventListener("change",this.eb),this.b.addEventListener(Vh,this.eb),o||this.eb(),this.ra=!1},P.prototype.setStyleInternal=P.prototype.lb,P.prototype.ab=function(){return this.b||kk(this),this.b},P.prototype.getStyleInternal=P.prototype.ab;function kk(i){if(i.a===ik.WEBGL){var o=new fk(i.getCapabilities(),i.uid,i.max,i.g,i.tileSize);i.b=new qi(gk(o))}else i.a===ik.HARP&&H.map.render.harp&&(i.b=new H.map.render.harp.Style({}));i.ra=!0}P.prototype.Aj=function(){var i=this.getCapabilities(),o=lk.FEATURE;return i&Oj.PROVIDES_BY_VIEWPORT?o=lk.SOURCE:i&Oj.PROVIDES_RASTERS?o=null:i&Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS&&(o=lk.PROVIDER),o},P.prototype.getPickingMode=P.prototype.Aj,P.prototype.gm=function(){return!1},P.prototype.getFeatureProxy=P.prototype.gm;function mk(i){var o;vc(this,mk),mk.l.constructor.call(this,i),this.V=i=[];for(o in nh)i[nh[o]]=new jh}u(mk,P),t("H.map.provider.ObjectProvider",mk),mk.prototype.Xh=ff,mk.prototype.providesByViewport=mk.prototype.Xh,mk.prototype.Gb=function(i){return this.V[i||nh.ANY]},mk.prototype.getInvalidations=mk.prototype.Gb,mk.prototype.Rd=function(i,o){if(o!==kh.NONE){var s=this.V[nh.ANY],_e=s.a+1;s.update(_e,o),s=this.V[i.type],s.update(_e,o),i.Gb().update(_e,o),this.Sa(i)}},mk.prototype.invalidateObject=mk.prototype.Rd,mk.prototype.requestOverlays=mk.prototype.pd,mk.prototype.requestSpatials=mk.prototype.cg,mk.prototype.requestSpatialsByTile=mk.prototype.dg,mk.prototype.ua=!1,mk.prototype.requestMarkers=mk.prototype.yc,mk.prototype.requestDomMarkers=mk.prototype.xc;function N(i){i=i||{},N.l.constructor.call(this,i),this.f=i=new R({min:i.min,max:i.max}),i.la=this,i.ia(this),i.pa(kh.ADD),this.u=new Lg,this.i=new Lg,this.m=new ak,this.s=new Lg,this.S=new ak,this.ea=new Lg}u(N,mk),t("H.map.provider.LocalObjectProvider",N),N.prototype.getCapabilities=function(){return Oj.PROVIDES_BY_VIEWPORT|Oj.PROVIDES_WEBGL_RENDERABLE_OBJECTS|Oj.PROVIDES_DOM_MARKERS|Oj.CROP_LINES_BY_TILE},N.prototype.ab=function(){if(!this.B&&(this.B=N.l.ab.call(this),this.B instanceof qi)){var i=new fk(this.getCapabilities()|Oj.HAS_VOLATILE_DATA,this.uid+"_vol",this.max,this.g,this.tileSize);this.B.Ke(gk(i))}return this.B},N.prototype.getStyleInternal=N.prototype.ab,N.prototype.Xb=function(){return this.f},N.prototype.getRootGroup=N.prototype.Xb,N.prototype.Rd=function(i,o){o&kh.SPATIAL&&this.ba(i),N.l.Rd.call(this,i,o)},N.prototype.invalidateObject=N.prototype.Rd,N.prototype.ba=function(i){var o;if(C(i,M,this.ba,0),i.la!==this)throw new Yc(this.ba,"foreign object");this.Da(i);var s=i.type;if(s===nh.MARKER)if((o=i.da())instanceof lg){var _e=!0;s=this.m}else s=this.s;else s===nh.DOM_MARKER?(o=i.da())instanceof lg?(_e=!0,s=this.S):s=this.ea:s=s===nh.OVERLAY?this.u:this.i;_e=_e?s.sc(o):s.Pj(i.J()),_e.c=i,i.ua=_e},N.prototype.Da=function(i){var o;if(i){if(i.la!==this){if(C(i,M))throw new Yc(this.Da,"foreign object")}else if(o=i.ua){var s=i.type;s===nh.MARKER?this.m.remove(o)||this.s.remove(o):s===nh.DOM_MARKER?this.S.remove(o)||this.ea.remove(o):s===nh.OVERLAY?this.u.remove(o):this.i.remove(o),delete o.c,delete i.ua}}},N.prototype.removeObject=N.prototype.Da;function nk(i,o,s,_e,_n,_o,_a){if(_a=_a||[],o.Mc())for(i=o!==i.m&&o!==i.s,_n=!_n,o=o.Jf(s,_o,_o),s=o.length,_o=0;_o<s;_o++){var _u=o[_o].c,_h;if(_h=_e!==void 0){for(var ty=zd(_e),oy=_u;(_h=oy.s<=ty&&oy.m>=ty)&&(oy=oy.Ca););_h=!_h}_h||!_n&&!_u.qc(!0)||(i||_u.rb().getState()===1)&&_a.push(_u)}return _a}N.prototype.Zh=function(){return 0<this.u.Mc()},N.prototype.providesOverlays=N.prototype.Zh,N.prototype.pd=function(i,o,s){return nk(this,this.u,i,o,s,!1).filter(function(_e){return _e.Lc()})},N.prototype.requestOverlays=N.prototype.pd,N.prototype.wc=function(){return 0<this.i.Mc()},N.prototype.providesSpatials=N.prototype.wc,N.prototype.cg=function(i,o,s){return nk(this,this.i,i,o,s,!1)},N.prototype.requestSpatials=N.prototype.cg,N.prototype.dg=function(i,o){return nk(this,this.i,i.Cf(),i.zL,o,!1)},N.prototype.requestSpatialsByTile=N.prototype.dg,N.prototype.Mb=function(){return 0<this.m.Mc()+this.s.Mc()},N.prototype.providesMarkers=N.prototype.Mb,N.prototype.yc=function(i,o,s){return ok(this,i,o,s,!1)},N.prototype.requestMarkers=N.prototype.yc;function ok(i,o,s,_e,_n){var _o=nk(i,i.m,o,s,_e,_n);return nk(i,i.s,o,s,_e,_n,_o),_o}N.prototype.Lb=function(){return 0<this.S.Mc()+this.ea.Mc()},N.prototype.providesDomMarkers=N.prototype.Lb,N.prototype.xc=function(i,o,s){return pk(this,i,o,s,!1)},N.prototype.requestDomMarkers=N.prototype.xc;function pk(i,o,s,_e,_n){var _o=nk(i,i.S,o,s,_e,_n);return nk(i,i.ea,o,s,_e,_n,_o),_o}function qk(i,o,s){var _e=s.da(),_n,_o=rk.bind(null,i);i=sk.bind(null,i),C(s,th)?_n=C(_e,L)?_o(_e):_e.ja.some(_o):C(s,uh)?_n=C(_e,O)?i(_e):_e.ja.some(i):C(s,sh)&&(_n=i(zi(_e))),_n&&o.push(s)}function rk(i,o){t:{var s=o.X,_e=Ei(i,o);if(!_e){o=o.X.length;for(var _n=0;_n<o;_n+=3)if(Ci(i,s[_n],s[_n+1])){i=!0;break t}}i=_e}return i}function sk(i,o){return Fi(i,o)}function tk(i,o,s){for(var _e=i.length;_e--;){var _n=i[_e],_o=_n.da();if(C(_o,Ti)){_o=_o.ja;for(var _a=_o.length,_u;_a--;)if(_u=_o[_a],Ci(o,_u.lat,_u.lng)){s.push(_n);break}}else Ci(o,_o.lat,_o.lng)&&s.push(_n)}}N.prototype.Pa=function(i,o,s,_e,_n){var _o=this,_a=i.J(),_u=[],_h=Zb(),ty=1;if(_a)for(;ty&nh.ANY;){if(ty&_e)switch(ty){case nh.MARKER:_h=_h.then(function(){return ok(_o,_a,s,o,!0)}).then(function(oy){return tk(oy,i,_u)});break;case nh.DOM_MARKER:_h=_h.then(function(){return pk(_o,_a,s,o,!0)}).then(function(oy){return tk(oy,i,_u)});break;case nh.SPATIAL:_h=_h.then(function(){return nk(_o,_o.i,_a,s,o,!0)}).then(function(oy){oy.forEach(qk.bind(null,i,_u))});break;case nh.OVERLAY:_h=_h.then(function(){return nk(_o,_o.u,_a,s,o,!0)}).then(function(oy){oy.forEach(qk.bind(null,i,_u))})}ty<<=1}_h.then(function(){return _n(_u)})},N.prototype.o=function(){N.l.o.call(this),this.f.ma()};var uk={PENDING:0,ACTIVE:1,DONE:2};t("H.map.render.RenderState",uk);function vk(i,o){o=o||{};var s;if(!C(i,Element))throw new D(vk,0,i);var _e=i.ownerDocument.createElement("div");this.P=i,vk.l.constructor.call(this),this.padding=new wk(0,0,0,0),this.center=new G(0,0),this.margin=0,this.element=_e,_e.style.zIndex=0,_e.style.height=_e.style.width="100%",_e.style.direction="ltr",_e.style.position=i.style.position==="relative"?"absolute":"relative",this.resize(),i.appendChild(_e),(s=o.padding)!==B&&this.oi(s.top,s.right,s.bottom,s.left),this.ji((s=o.margin)!==B?s:0)}u(vk,F),t("H.map.ViewPort",vk),vk.prototype.A={xa:"update",ie:"sync"},vk.prototype.ji=function(i){if(this.margin!==+i){if(E(this.margin=+i))throw new D(this.ji,0,i);xk(this),this.dispatchEvent(this.A.xa)}},vk.prototype.setMargin=vk.prototype.ji,vk.prototype.oi=function(i,o,s,_e){var _n=this.padding;if(_n.top!==i||_n.right!==o||_n.bottom!==s||_n.left!==_e){if(E(i+o+s+_e))throw new D(this.oi);_n.top=i,_n.right=o,_n.bottom=s,_n.left=_e,xk(this),this.dispatchEvent(this.A.xa)}},vk.prototype.setPadding=vk.prototype.oi;function xk(i){var o=i.padding;i.center.set((i.width+o.left-o.right)/2<<0,(i.height+o.top-o.bottom)/2<<0)}vk.prototype.resize=function(){var i=this.P.offsetWidth,o=this.P.offsetHeight;(this.width!==i||this.height!==o)&&(this.a=new Ui(this.width,this.height),this.width=i,this.height=o,xk(this),this.dispatchEvent(this.A.xa))},vk.prototype.resize=vk.prototype.resize,vk.prototype.Wa=function(i){this.dispatchEvent(new bj(this.A.ie,this.a,i,cj.SIZE))},vk.prototype.synchronize=vk.prototype.Wa,vk.prototype.o=function(){this.P.removeChild(this.element),delete this.P,delete this.element,vk.l.o.call(this)},vk.prototype.gc=Oc,vk.prototype.startInteraction=vk.prototype.gc,vk.prototype.Yb=Oc,vk.prototype.interaction=vk.prototype.Yb,vk.prototype.qb=Oc,vk.prototype.endInteraction=vk.prototype.qb;function yk(i,o,s,_e,_n,_o){var _a;for(_a=[];_e<=_n;_e++)_a=_a.concat(zk(i,s,_e));for(i=_a.length,vj.call(this,_o,i),this.m=s=[],this.g=A(this.g,this),this.f=A(this.f,this),this.O(1);i--;)_o=_a[i],s.push(Ak(o,_o[0],_o[1],_o[2],this.g,this.f))}u(yk,vj),yk.prototype.g=function(){xj(this,2)},yk.prototype.f=function(){xj(this,4)},yk.prototype.ke=function(){for(var i=this.m,o=i.length;o--;)i[o].cancel();delete this.m};function Bk(i,o){var s=this;if(!Da(o))throw new D(Ck,1,o);if(!Da(i.next||Da(i.cycle)))throw new D(Bk,2,'Argument "mode" must implement H.util.AsyncQueue.Mode');this.b=[],this.c=[],this.g=i,this.i=o,this.j=function(){Dk(s)},this.a=null,this.f=function(){s.a||(s.a=x.setTimeout(s.j,1))}}t("H.util.AsyncQueue",Bk),Bk.prototype.push=function(i,o){if(!Da(o))throw new D(this.push,1,o);return i=Ek(new Fk,i,this.f,o),this.b.push(i),this.f(),i},Bk.prototype.push=Bk.prototype.push;function Dk(i){var o=i.c,s=0,_e=i.g;for(_e.a(),i.a=null;s<o.length;){var _n=o[s];_n.Uj?o.splice(s,1):s++}for(;_n=_e.next(i.b,i.c);)_n.cancelled?_n.done(null,"cancelled"):(o.push(_n),i.i(_n,_n.data))}function Fk(){Ek(this,null,null,null)}Bk.Task=Fk;function Ek(i,o,s,_e){return i.data=o,i.cancelled=!1,i.Uj=!1,i.b=s,i.c=_e,i.a=null,i}Fk.prototype.done=function(i,o){this.Uj=!0,this.b(),this.c(this,i,o)},Fk.prototype.done=Fk.prototype.done,Fk.prototype.cancel=function(){this.a&&this.a(),this.cancelled=!0},Fk.prototype.cancel=Fk.prototype.cancel,Fk.prototype.fo=function(i){return this.a=i,this},Fk.prototype.setCancelFn=Fk.prototype.fo;function Gk(){}Bk.Mode=Gk,Gk.prototype.next=function(){},Gk.prototype.a=function(){};var Hk,Ik=function(){function i(){}for(var o,s,_e,_n=sc("o ms moz webkit "),_o=5;_o--&&!o;)o=_n[_o],o=(s=x[o+(o?"R":"r")+"equestAnimationFrame"])&&!E(s.call(window,i))&&(_e=x[o+(o?"C":"c")+"ancelAnimationFrame"]);return Hk=o?function(_a){return s.call(x,_a)}:function(_a){return x.setTimeout(_a,25)},o?function(_a){return _e.call(x,_a)}:function(_a){return x.clearTimeout(_a)}}(),Jk=x.performance&&x.performance.now?function(){return x.performance.now()}:function(){return x.Date.now()};function Kk(i,o){Kk.l.constructor.call(this,new Lk(i),o)}u(Kk,Bk),t("H.util.SequentialQueue",Kk);function Lk(i){if(isNaN(i)||0>i)throw new D(Kk,1,'Argument "maxTime" must be a positive number');this.c=i,this.b=Jk()}Lk.prototype.next=function(i){return i.length&&Jk()-this.b<this.c?i=i.shift():null},Lk.prototype.a=function(){this.b=Jk()};function Mk(i){if(vc(this,Mk),Mk.l.constructor.call(this,i),i&&"tileSize"in i){var o=Cd(+i.tileSize)/Md;if(isNaN(o)||o%1||0>o||30<o)throw new D(Mk,0,"tileSize: "+i.tileSize);this.tileSize=+i.tileSize}}u(Mk,P),t("H.map.provider.TileProvider",Mk);function Nk(i,o){return Wd(i)-8-yd(Wd(o))}Mk.getZoomLevelOffset=Nk,Mk.prototype.requestTile=Mk.prototype.Qa,Mk.prototype.cancelTile=Mk.prototype.hc,Mk.prototype.cancelTileByKey=Mk.prototype.le,Mk.prototype.createTileInternal=Mk.prototype.Vb,Mk.prototype.hd=function(i,o,s){return this.uri.concat("_",i,"_",o,"_",s)},Mk.prototype.getTileKey=Mk.prototype.hd,Mk.prototype.ff=256,Mk.prototype.tileSize=Mk.prototype.ff;function Ok(){}t("H.util.ICache",Ok),Ok.prototype.add=function(){},Ok.prototype.add=Ok.prototype.add,Ok.prototype.get=function(){},Ok.prototype.get=Ok.prototype.get,Ok.prototype.uf=function(){},Ok.prototype.drop=Ok.prototype.uf,Ok.prototype.forEach=function(){},Ok.prototype.forEach=Ok.prototype.forEach,Ok.prototype.ma=function(){},Ok.prototype.removeAll=Ok.prototype.ma,Ok.prototype.Yd=function(){},Ok.prototype.registerOnDrop=Ok.prototype.Yd,Ok.prototype.Og=function(){},Ok.prototype.deRegisterOnDrop=Ok.prototype.Og;function Pk(i,o,s){if(this.g=[],o&&this.Yd(o),s&&!Da(s))throw new D(Pk,2,s);this.b=0,this.filter=s,this.a={},this.f=this.c=null,this.li(i)}t("H.util.Cache",Pk),Pk.prototype.add=function(i,o,s){var _e,_n;if(s=+s,!Dc(s)||0>s)throw new D(this.add,2,s);return i=String(i),(_n=this.filter?this.filter(i,o,s):!0)&&((_e=this.a[i])?(_e.data!==o&&Qk(this,_e),this.b+=s-_e.size,_e.size=s,_e.data=o,Rk(this,_e)):this.a[i]=Sk(this,{id:i,data:o,size:s,ac:null,Uc:null},this.c),Tk(this)),_n},Pk.prototype.add=Pk.prototype.add,Pk.prototype.Yd=function(i){if(!Da(i))throw new D(this.Yd,0,i);this.g.push(i)},Pk.prototype.registerOnDrop=Pk.prototype.Yd,Pk.prototype.Og=function(i){this.g=this.g.filter(function(o){return o!==i})},Pk.prototype.deRegisterOnDrop=Pk.prototype.Og,Pk.prototype.get=function(i,o){return(i=o?this.a[i]:Rk(this,this.a[i]))&&i.data},Pk.prototype.get=Pk.prototype.get,Pk.prototype.uf=function(i){var o;(o=this.a[i])&&Uk(this,o,!0)},Pk.prototype.drop=Pk.prototype.uf,Pk.prototype.forEach=function(i,o,s){var _e;for(_e in this.a){var _n=this.a[_e];(!s||s(_e,_n.data,_n.size))&&i.call(o,_e,_n.data,_n.size)}},Pk.prototype.forEach=Pk.prototype.forEach,Pk.prototype.ma=function(i){var o;for(o in this.a){var s=this.a[o];(!i||i(o,s.data,s.size))&&Uk(this,this.a[o],!0)}},Pk.prototype.removeAll=Pk.prototype.ma,Pk.prototype.li=function(i){if(!(0<+i))throw new D(Pk.prototype.li,0,i);return this.i=+i,Tk(this),this},Pk.prototype.setMaxSize=Pk.prototype.li,Pk.prototype.xm=function(){return this.i},Pk.prototype.getMaxSize=Pk.prototype.xm,Pk.prototype.Yl=function(){return this.b},Pk.prototype.getCurrentSize=Pk.prototype.Yl;function Rk(i,o){return o&&(i.c=Sk(i,o,i.c)),o}function Tk(i){for(;i.b>i.i&&i.f;)Uk(i,i.f,!0)}function Sk(i,o,s){return s!==o&&((o.ac||o.Uc)&&Uk(i,o,!1),(o.ac=s)&&(o.Uc=s.Uc,s.Uc=o),o.Uc||(i.c=o),o.ac||(i.f=o),i.b+=o.size),o}function Uk(i,o,s){var _e=o.Uc,_n=o.ac;(_e||_n||o==i.c&&o==i.f)&&(_e?_e.ac=_n:i.c=_n,_n?_n.Uc=_e:i.f=_e,i.b-=o.size,s&&(delete i.a[o.id],Qk(i,o))),o.ac=o.Uc=null}function Qk(i,o){for(var s=i.g.length;s--;)i.g[s].call(i,o.id,o.data,o.size)}function Vk(i,o,s,_e){this.key="",this.x=i,this.y=o,this.z=s,this.data=_e,this.valid=!0}t("H.map.provider.Tile",Vk);function Wk(i,o,s,_e){return i-=s,o-=_e,i*i+o*o}function Xk(i,o,s){return Yk(i,o*o,s||0,0,i.length-1)}t("H.math.simplifyDP",Xk);function Yk(i,o,s,_e,_n){var _o=0,_a=_e,_u=i[_e].x,_h=i[_e].y,ty=i[_n].x,oy=i[_n].y,hy=_e+1,fy=Wk(_u,_h,ty,oy);if(fy)for(;hy<_n;){var vy=i[hy++],xy=vy.x;vy=vy.y;var wy=((xy-_u)*(ty-_u)+(vy-_h)*(oy-_h))/fy;xy=0>wy?Wk(xy,vy,_u,_h):1<wy?Wk(xy,vy,ty,oy):Wk(xy,vy,_u+wy*(ty-_u),_h+wy*(oy-_h)),xy>_o&&(_o=xy,_a=hy-1)}else for(;hy<_n;)vy=i[hy++],xy=vy.x,vy=vy.y,xy=Wk(xy,vy,_u,_h),xy>_o&&(_o=xy,_a=hy-1);return _o>=o||0<s&&_a-_e?(--s,1<_a-_e?(_e=Yk(i,o,s,_e,_a),_e.splice(_e.length-1,1)):_e=[i[_e]],_e=1<_n-_a?_e.concat(Yk(i,o,s,_a,_n)):_e.concat(i.slice(_a,_n+1))):_e=[i[_e],i[_n]],_e}function Zk(i,o,s,_e,_n,_o,_a,_u){Zk.l.constructor.call(this,o,s,_e,null),this.key=i,this.R=_u,this.a=_n,this.g=_o,this.i={},this.zL=_a,this.s=Ad(wh.MAX_LINE_WIDTH/2*this.g+1)}u(Zk,Vk),t("H.map.provider.SpatialTile",Zk),Zk.prototype.c=Vd,Zk.prototype.u=Vd,Zk.prototype.b=Vd;function $k(i){return i.R.getInvalidations(nh.SPATIAL)}function al(i){var o=$k(i),s=o.a,_e=i.c,_n=_e===s,_o;if(!(_n||o.Rj(_e)||o.rh(_e))){_n=i.f;var _a=i.i;if(o.Lf(_e))for(_o=_n.length;_o--;){var _u=_n[_o];if(_u.Gb().Lf(_e)){_n.splice(_o,1);var _h=_h||bl(i,_u.$a())}}if(o.sh(_e)){for(_o=_n.length;_o--;)if(_u=_n[_o],_u.Gb().sh(_e)){var ty=1;if((_u=_a[_u.$a()])&&_u.a){_h=1;break}}ty&&_n.sort(cl)}if(!_h&&o.Td(_e)){for(_o=_n.length;_o--;)if(_n[_o].Gb().Td(_e)){var oy=1;break}}i.u!==_e||oy||(i.u=s,i.b!==_e||_h||(i.b=s)),i.c=s,_n=!0}return _n}Zk.prototype.Sd=function(){var i=$k(this),o=i.a,s=this.b,_e=s===o;return _e||(this.R.ua&&!i.Td(s)?_e=!0:al(this)&&(_e=this.b===o)),_e},Zk.prototype.isCanvasValid=Zk.prototype.Sd,Object.defineProperty(Zk.prototype,"valid",{get:function(){return this.Sd()},set:jd,configurable:!0});function dl(i,o){this.b=i,this.a=o}function bl(i,o){i=i.i;var s=i[o];if(s)return delete i[o],s.a}Zk.prototype.f=hf;function el(i){var o=$k(i),s=i.c,_e=i.f,_n;if(!al(i)){for(_n=_e.length;_n--;){var _o=_e[_n],_a=_o.Gb();(_a.Lf(s)||_a.rh(s))&&bl(i,_o.$a())}i.f=i.R.requestSpatialsByTile(i,!1,!1).sort(cl),i.c=o.a}}function cl(i,o){return oh(i.Pc(),o.Pc(),!1)}Zk.prototype.Pa=function(){return this.f},Zk.prototype.getObjects=Zk.prototype.Pa,Zk.prototype.Tm=function(){return this.a},Zk.prototype.getTileSize=Zk.prototype.Tm;var fl={};Zk.prototype.He=function(){var i=this.a+"_"+this.g,o=fl[i];if(!o){o=-this.s;var s=this.a-o;o=fl[i]=new wk(o,o,s,s)}return o},Zk.prototype.getPxClipRect=Zk.prototype.He,Zk.prototype.Cf=function(){var i=this.Xa;if(!i){var o=this.Ef();i=0;var s=this.a;this.z&&(s-=i+=this.He().top),i=this.Xa=sg(o.Ne(new G(i,i)),o.Ne(new G(s,s)))}return i},Zk.prototype.getGeoClipRect=Zk.prototype.Cf,Zk.prototype.Ef=function(){var i=this.v;if(!i){var o=this.a;i=this.v=new lj(B,o),i.Ka(this.z),i.x=this.x*o,i.y=this.y*o}return i},Zk.prototype.getPxProj=Zk.prototype.Ef,Zk.prototype.Ua=function(){return this.g},Zk.prototype.getPixelRatio=Zk.prototype.Ua,Zk.prototype.Zf=function(){var i=this.data;return i&&(this.data=null,this.b=Vd),i},Zk.prototype.releaseCanvas=Zk.prototype.Zf,Zk.prototype.$f=function(){this.i={},delete this.f,this.c=Vd},Zk.prototype.releaseData=Zk.prototype.$f,Zk.prototype.T=function(i){var o=i.getContext("2d"),s,_e,_n,_o,_a=0;if(el(this),this.b<this.c){var _u=this.f;if(s=_u.length){i.width=i.height=this.a,o.clearRect(0,0,this.a,this.a);var _h=this.i;for(_e=0;_e<s;_e++){var ty=_u[_e],oy=ty.$a();if(_o=(_n=_h[oy])?_n.b:ty.getGeometriesForTile(this)){if(_n)ty.Gb().Td(this.b)&&(_n.a=Fh(ty,_o)),_n=_n.a;else{_n=Fh(ty,_o);for(var hy,fy=_o,vy=ty.g?2:0,xy=fy.length;xy--;){var wy=fy[xy];if(wy!==Gh){var By=wy.a;for(hy=By.length;hy--;)wy=By[hy],4<wy.length&&(By[hy]=Xk(wy,.6,vy))}}this.i[oy]=new dl(_o,_n)}if(_n){for(o.save(),fy=ty.g?this.B:this.S,oy=0;oy<_o.length;oy++)fy.call(this,ty,_o[oy],ty.$(),o);if(_o=ty.getLabels(this))for(ty=o,oy=_o.length;oy--;)for(vy=_o[oy],fy=vy.size,ty.font=fy+"px "+vy.font,ty.fillStyle=vy.color,ty.textAlign="center",ty.translate(vy.x,vy.y),ty.rotate(vy.angle),fy=vy.lineHeight||1.375*fy,xy=vy.lines,vy=xy.length;vy--;)ty.fillText(xy[vy],0,vy*fy);o.restore()}_a|=+_n}}}this.data=_a?i:null,this.u=this.b=this.c}else this.data&&(_a=1);return 0<_a},Zk.prototype.render=Zk.prototype.T,Zk.prototype.data=null,Zk.prototype.S=function(i,o,s,_e){var _n;s.b&&(gl(_e,s,this.g),hl(o,_e,!1,!0,!1,this.a,this.s)),s.a&&(_n=i.c)&&_n.Jb&&(il(_e,_n),jl(this,_e,o,_n,s.lineWidth))},Zk.prototype.B=function(i,o,s,_e){var _n=s.Jb,_o=s.b,_a,_u=this.a,_h=this.s;if(o===Gh)_n&&(il(_e,s),_e.fillRect(0,0,_u,_u));else{if(_o&&gl(_e,s,this.g),s.a&&(_a=i.c)){var ty=s.lineWidth;_a.Jb||(_a=null)}i=o.c,i===Ud?((_o||_n)&&(il(_e,s),hl(o,_e,!0,_o,_n,_u,this.s)),_a&&(il(_e,_a),jl(this,_e,o,_a,ty,0))):(_n&&(il(_e,s),hl(o,_e,!0,!1,_n,_u,_h,0,i)),_o&&hl(o,_e,!1,_o,!1,_u,_h,i),_a&&(il(_e,_a),jl(this,_e,o,_a,ty,i)))}};function hl(i,o,s,_e,_n,_o,_a,_u,_h){var ty=i.a,oy=-_a;if(_a=_o+_a,_u=_u||0,_h===B&&(_h=ty.length),_n&&i===Gh)o.fillRect(0,0,_o,_o);else if(_h>_u){for(o.beginPath(),_o=_u;_o<_h;_o++){var hy=ty[_o],fy=hy.length;if(hy===Nh)o.moveTo(oy,oy),o.lineTo(oy,_a),o.lineTo(_a,_a),o.lineTo(_a,oy);else{var vy=hy[0];for(o.moveTo(vy.x,vy.y),_u=1;_u<fy;_u++)vy=hy[_u],o.lineTo(vy.x,vy.y)}s&&o.closePath()}s&&_n&&o.fill(i.b!==Ud?"evenodd":"nonzero"),_e&&o.stroke()}}function gl(i,o,s){var _e;i.strokeStyle=o.strokeColor,i.lineWidth=o.lineWidth*s,i.lineCap=o.lineCap,i.lineJoin=o.lineJoin,i.miterLimit=o.miterLimit,i.setLineDash&&(_e=o.lineDash)!==hf&&(i.setLineDash(_e),i.lineDashOffset=o.lineDashOffset)}function il(i,o){i.fillStyle=o.fillColor}function jl(i,o,s,_e,_n,_o){var _a=_n*_e.width/2;_n=_n*_e.length/2;var _u=_n/2;_e=2*_n*_e.frequency;var _h=Dd(Ed(_n,2)+Ed(_a,2));i=i.a-_h,i=new wk(_h,_h,i,i),s=s.a;var ty,oy,hy,fy,vy,xy,wy,By=Nd/2;for(_o=_o||0,_h=s.length;_h-- >_o;){var Sy=0,Ay=s[_h];if(oy=ty=Ay.length){var Py=Ay;for(oy=Py.length,hy=0;--oy;)hy+=Py[oy].Ta(Py[oy-1]);oy=(Py=hy)>=_e}if(oy)for(oy=wd(zd(Py/_e),1e3),oy=Py/(oy+1),hy=oy/2;--ty;){for(fy=(vy=Ay[ty]).Ta(xy=Ay[ty-1]);hy<=Sy+fy;){var Iy=vy.x+(xy.x-vy.x)*(wy=(hy-Sy)/fy);wy=vy.y+(xy.y-vy.y)*wy,i.qf(Iy,wy)&&(o.save(),o.translate(Iy,wy),o.rotate(-Kd((xy.y-vy.y)/(vy.x-xy.x))+(vy.x<xy.x?By:-By)),o.beginPath(),o.moveTo(-_a,-_n),o.lineTo(0,_n),o.lineTo(_a,-_n),o.lineTo(0,-_u),o.closePath(),o.fill(),o.restore()),hy+=oy}Sy+=fy}}}var kl=[];Zk.prototype.Ba=function(i,o,s){for(var _e=this.f,_n=_e.length,_o,_a,_u,_h,ty,oy,hy=hf,fy,vy=this.g;_n--;)if(_a=_e[_n],_a.qc(!0)&&(_u=this.i[_a.$a()])&&(_h=_u.b)){for(_o=_a.$(),oy=_o.fillColor!=="none"&&_a.g,fy=_o.strokeColor==="none"?0:_o.lineWidth*vy,_o=_h.length;_o--;){ty=_h[_o];var xy;if(!(xy=oy&&ty===Gh)&&(xy=oy||fy)){var wy;xy=i;var By=o,Sy=oy,Ay=fy,Py=ty.b,Iy=ty.c,$y=Iy!==Ud,Ky=ty.a,Jy=Ky.length,i0=0,k0=0,g0=!1;for(ty=0;ty<Jy;ty++){var j0=Ky[ty],V0=ty>=Iy,k1=!V0&&ty>=Py;if(j0===Nh&&Sy)k1?i0++:k0++;else{var h1=j0.length;for(kl.length=2*h1,wy=0;wy<h1;wy++){var r_=j0[wy];kl[2*wy]=r_.x,kl[2*wy+1]=r_.y}if(wy=Sy&&!V0,V0=$y&&!V0?0:Ay,wy||V0){if(V0=ce(xy,By,kl,V0,wy),V0===be.EDGE||V0===be.VERTEX){g0=!0;break}else if(V0===be.SURFACE){if(k1)i0++;else if(k0++,Py===Ud)break}}}}xy=g0||0<k0&&!(i0%2)}if(xy){hy===hf&&(hy=[]),hy.push(_a);break}}if(s&&hy.length)break}return hy};function ll(i,o){var s;ll.l.constructor.call(this,o),this.v=i,this.S=i=o.pixelRatio,this.tileSize=s=1<<yd(Wd((o.tileSize||256)*i)),this.K=Nk(s,i),this.zh=A(this.zh,this),this.Ph=A(this.Ph,this),this.Ah=A(this.Ah,this),this.yh=A(this.yh,this),this.s=A(this.s,this),this.v.addEventListener(P.prototype.A.xa,this.s,!1,this),this.f=[],this.i=new Pk(o.tileCacheSize||256,this.zh),this.m=new Pk(o.dataCacheSize||512,this.Ph),this.B=new Kk(20,this.Ah),this.c={},this.u=Jk()}u(ll,Mk),ll.prototype.s=function(i){i=i.target,i.type===nh.SPATIAL&&this.Sa(i)},ll.prototype.Qa=function(i,o,s,_e){var _n=this.getTileKey(i,o,s),_o;if(_o=this.i.get(_n,_e)){if(_e||_o.Sd())return _o;_e||this.i.uf(_n)}if((_o=this.m.get(_n,_e))&&(_e||al(_o)))return i=this.f.pop()||document.createElement("canvas"),_o.T(i)||this.f.push(i),this.i.add(_n,_o,1),_o;_e||((_o=this.c[_n])?_o.count++:(_o=this.B.push([_n,i,o,s],this.yh),_o.count=1,this.c[_n]=_o))},ll.prototype.requestTile=ll.prototype.Qa,ll.prototype.Vb=function(){},ll.prototype.createTileInternal=ll.prototype.Vb,ll.prototype.hc=function(i,o,s){this.le(this.getTileKey(i,o,s))},ll.prototype.cancelTile=ll.prototype.hc,ll.prototype.le=function(i){var o;(o=this.c[i])&&(o.count--,o.count||(o.cancel(),delete this.c[i]))},ll.prototype.cancelTileByKey=ll.prototype.le,p=ll.prototype,p.Ah=function(i,o){var s=o[0],_e=o[1],_n=o[2],_o=o[3];s=this.i.get(s)||new Zk(s,_e,_n,_o,this.tileSize,this.S,_o+this.K,this.v),_e=s.data||this.f.pop()||document.createElement("canvas"),s.T(_e)||this.f.push(_e),o.push(s),i.done(s)},p.yh=function(i,o){i=i.data[0],o&&this.i.add(i,o,1),delete this.c[i],this.Sa()},p.zh=function(i,o){o.data&&this.f.push(o.Zf()),this.m.add(i,o,1)},p.Ph=function(i,o){o.$f()},p.o=function(){for(var i in this.c)this.c[i].cancel();this.i.ma(),this.m.ma(),this.f.length=0,ll.l.o.call(this)};function wk(i,o,s,_e){this.left=+i,this.top=+o,this.right=+s,this.bottom=+_e}t("H.math.Rect",wk),wk.prototype.set=wk,wk.prototype.set=wk.prototype.set,wk.prototype.Ib=function(){return this.b||(this.b=new G(this.left,this.top))},wk.prototype.getTopLeft=wk.prototype.Ib,wk.prototype.Eb=function(){return this.a||(this.a=new G(this.right,this.bottom))},wk.prototype.getBottomRight=wk.prototype.Eb,wk.prototype.qf=function(i,o){return this.left<=i&&this.right>=i&&this.top<=o&&this.bottom>=o},wk.prototype.containsXY=wk.prototype.qf;function ml(i,o){return new wk(i.x,i.y,o.x,o.y)}wk.fromPoints=ml,wk.prototype.clone=function(){return new wk(this.left,this.top,this.right,this.bottom)},wk.prototype.clone=wk.prototype.clone;function nl(i,o){if(o=o||{},!i)throw new D(nl,0,i);this.tileSize=i.tileSize,this.a={},oj.call(this,{min:o.min!==void 0?o.min:i.min,max:o.max!==void 0?o.max:i.max,minWorldSize:this.tileSize,projection:o.Xf,dark:o.dark,provider:i})}u(nl,oj),t("H.map.layer.BaseTileLayer",nl),nl.prototype.we=function(i,o){var s=this.pixelProjection;if(!C(i,K))throw new D(this.we,0,i);if(!E(o)){var _e=s.Jj();s.Ka(o)}return i=ml(s.fb(i.Ib()),s.fb(i.Eb())),!E(_e)&&s.Ka(_e),i},nl.prototype.geoRectToRect=nl.prototype.we,nl.prototype.Qd=function(i,o){var s=Ed(2,zd(o)),_e=this.tileSize;if(!C(i,wk))throw new D(this.Qd,0,i);if(E(o=+o))throw new D(this.Qd,1,o);o=zd(i.left/_e),o===s&&--o;var _n=zd(i.right/_e);return _n===s&&--_n,new wk(o,Zd(zd(i.top/_e),0,s-1),_n,Zd(zd(i.bottom/_e),0,s-1))},nl.prototype.getTileBounds=nl.prototype.Qd,nl.prototype.Qa=function(i,o,s,_e){return this.la.requestTile(i,o,s,_e)},nl.prototype.requestTile=nl.prototype.Qa,nl.prototype.hc=function(i,o,s){this.la.cancelTile(i,o,s)},nl.prototype.cancelTile=nl.prototype.hc,nl.prototype.ca=function(i,o){return this.la.getCopyrights?this.la.getCopyrights(i,o):null},nl.prototype.getCopyrights=nl.prototype.ca;function ol(i,o,s,_e,_n){_e=zd(_e);var _o=Ed(2,_e),_a=o.left,_u=o.top,_h=o.right;s=_h+(s?_o+(_h===o.left?0:1):1);var ty=o.bottom,oy=[];if(_n)var hy=_a+(1+_h-_a)/2+_n.x/i.tileSize-.5,fy=_u+(1+ty-_u)/2+_n.y/i.tileSize-.5;for(;_a<s;){for(_u=o.top;_u<=ty;)i=_a%_o,oy.push([i,_u,_e,_n?Bd(hy-_a)+Bd(fy-_u):0]),_u++;_a++}return oy}function zk(i,o,s){s=zd(s),i.pixelProjection.Ka(s),o=i.we(o);var _e=i.Qd(o,s);return ol(i,_e,o.left>o.right,s)}nl.prototype.Ge=function(i,o,s,_e,_n,_o){var _a,_u=[],_h,ty=this.la;_o=_o??"__default__";var oy=ty.requestTile;if(!C(i,wk))throw new D(this.Ge,0,i);if(E(s=+s))throw new D(this.Ge,1,s);if(_e||(_a={}),o=ol(this,i,o,s,_n),i=o.length)for(_e||o.sort(pl),s=i;s--;)_n=o[s],_e||(_a[ty.hd.apply(ty,_n)]=!0),_n[3]=+_e,(_h=oy.apply(ty,_n))&&_u.push(_h);if(!_e){_e=_a;var hy;_a=this.a[_o]||{};for(hy in _a)_a.hasOwnProperty(hy)&&_a[hy]&&!_e[hy]&&this.la.cancelTileByKey(hy);this.a[_o]=_e}return{total:i,tiles:_u}},nl.prototype.getProviderTiles=nl.prototype.Ge;function pl(i,o){return o[3]-i[3]}function ql(i,o){nl.call(this,i,o)}u(ql,nl),t("H.map.layer.TileLayer",ql),ql.prototype.qd=function(i,o,s,_e,_n){if(!C(i,K))throw new D(this.qd,0,i);if(E(o=+o))throw new D(this.qd,1,o);o=zd(o),this.pixelProjection.Ka(o),i=this.we(i);var _o=this.Qd(i,o);return this.Ge(_o,i.left>i.right,o,s,_e,_n)},ql.prototype.requestTiles=ql.prototype.qd;function rl(i,o){o=o?Wa(o):{},o.tileSize=o.tileSize||256,o.pixelRatio=o.pixelRatio||Te(),o.max=24,this.a=new ll(i,o),this.b=new ql(this.a),o.minWorldSize=this.a.tileSize,o.provider=i,rl.l.constructor.call(this,o),this.tileSize=this.b.tileSize,this.c=A(this.c,this),this.a.addEventListener(this.a.A.xa,this.c),i.addEventListener(i.A.xa,this.c)}u(rl,oj),t("H.map.layer.ObjectLayer",rl),rl.prototype.c=function(i){i.currentTarget!==this.a&&i.target.type===nh.SPATIAL||this.Sa()};var sl={markers:hf,total:0};rl.prototype.yc=function(i,o,s){var _e=this.la,_n;return _e.providesMarkers()&&(_n=_e.requestMarkers(i,o,!0,s)).length?{markers:_n,total:_n.length}:sl},rl.prototype.requestMarkers=rl.prototype.yc,rl.prototype.xc=function(i,o,s){var _e=this.la,_n;return _e.providesDomMarkers()&&(_n=_e.requestDomMarkers(i,o,!0,s)).length?{markers:_n,total:_n.length}:sl},rl.prototype.requestDomMarkers=rl.prototype.xc;var tl={tiles:hf,total:0};rl.prototype.qd=function(i,o,s,_e){if(this.la.providesSpatials()){var _n=this.b.qd(i,o,s,_e);s||(s=this.a,_n=Jk(),33<_n-s.u&&(Dk(s.B),s.u=_n),_n=this.b.qd(i,o,!0,_e))}else _n=tl;return _n},rl.prototype.requestTiles=rl.prototype.qd,rl.prototype.Qa=function(i,o,s,_e){return this.b.Qa(i,o,s,_e)},rl.prototype.requestTile=rl.prototype.Qa,rl.prototype.hc=function(i,o,s){this.b.hc(i,o,s)},rl.prototype.cancelTile=rl.prototype.hc;var ul={overlays:hf,total:0};rl.prototype.pd=function(i,o,s){var _e=this.la,_n=ul;return _e.providesOverlays&&_e.providesOverlays()&&(i=_e.requestOverlays(i,o,!0,s),o=i.length)&&(_n={overlays:i,total:o}),_n},rl.prototype.requestOverlays=rl.prototype.pd,rl.prototype.o=function(){this.a.D(),this.b.D(),this.la.dispose(),rl.l.o.call(this)};function T(i){vc(this,T),T.l.constructor.call(this,i),this.Rb=new vl,this.Tb=A(this.Tb,this),this.S=wl,this.createTileInternal=this.Vb.bind(this)}u(T,Mk),t("H.map.provider.RemoteTileProvider",T),T.prototype.Gd=function(){return 1},T.prototype.getEntryWeight=T.prototype.Gd;var wl=new Pk(65536),xl={},yl={};T.prototype.Fb=function(){return this.S},T.prototype.getCache=T.prototype.Fb,T.prototype.s=ba(3),T.prototype.Tb=function(i){var o=this.uri;return!i.indexOf(o)&&i.charAt(o.length)==="_"},T.prototype.cacheFilter=T.prototype.Tb,T.prototype.oa=function(i,o){o.valid=!1},T.prototype.reload=function(i){var o=this.getCache();i?o.ma(this.Tb):o.forEach(this.oa,this,this.Tb),zl(this),this.Sa(this,{isReload:!0})},T.prototype.reload=T.prototype.reload,T.prototype.m=function(){return!1},T.prototype.MAX_STORE_TIME=1/0,T.prototype.f=function(){return this.Rb},T.prototype.ea=function(i,o){o(i)};function Ak(i,o,s,_e,_n,_o){return _e=~~_e,i.requestInternal(o,s,_e,function(_a,_u){i.f().put(i.hd(o,s,_e),{raw:_u&&_u.raw||_a,timestamp:x.Date.now()},_n,_o)},_o,0)}T.prototype.requestInternal=T.prototype.G,T.prototype.Qa=function(i,o,s,_e){var _n=this,_o=this.getCache();if(E(i=+i))throw new D(this.Qa,0,i);if(E(o=+o))throw new D(this.Qa,0,o);if(E(s=+s))throw new D(this.Qa,0,s);s=~~s;var _a=this.getTileKey(i,o,s);return _o=_o.get(_a),_o&&_o.valid||_e||xl[_a]||(_o=B,this.requestTileAsPromise(i,o,s,_e).then(function(_u){_n.Sa(_u)},jd)),_o},T.prototype.requestTile=T.prototype.Qa,T.prototype.Ik=function(i,o,s,_e){var _n=this,_o=this.getCache(),_a=this.getTileKey(i,o,s),_u,_h,ty=this.f();return yl[_a]?yl[_a]:(yl[_a]=_u=new Qb(function(oy,hy){function fy(vy){var xy=0,wy,By=function(Sy,Ay){wy=_n.createTileInternal(i,o,s,Sy,Ay),wy.key=_a,_o.add(_a,wy,_n.Gd(Sy)),oy(wy),Al(_a)};vy&&(xy=x.Date.now()-vy.timestamp),vy&&xy<_n.MAX_STORE_TIME?_n.ea(vy.raw,By):(0<xy&&ty.remove(_a),(wy=_o.get(_a))&&wy.valid||_e?oy(wy||null):xl[_a]=_n.requestInternal(i,o,s,By,hy))}_h=ty.get(_a,fy,fy)}),xl[_a]||(xl[_a]=_h),_u.then(function(){Al(_a)},function(){Al(_a)}),_u)},T.prototype.requestTileAsPromise=T.prototype.Ik,T.prototype.Hk=function(i,o){var s=this,_e=i.id,_n=i.tile.coords;return new Qb(function(_o,_a){s.Ik(_n.x,_n.y,_n.z,o).then(function(_u){var _h=y;_u=_u.Pa?_u.Pa():_u.data;for(var ty=_u.length,oy;ty--;)if(oy=_u[ty],oy.$a()===_e){_h=oy;break}_o(_h)},_a)})},T.prototype.requestObjectAsPromise=T.prototype.Hk;function Al(i){delete xl[i],delete yl[i]}function zl(i){for(var o in xl)i.Tb(o)&&i.cancelTileByKey(o)}var Bl={cancel:jd};T.prototype.Vb=function(i,o,s,_e){return new Vk(i,o,s,_e)},T.prototype.createTileInternal=T.prototype.Vb,T.prototype.le=function(i){var o=xl[i];o&&(o.cancel(),Al(i))},T.prototype.cancelTileByKey=T.prototype.le,T.prototype.hc=function(i,o,s){this.cancelTileByKey(this.getTileKey(i,o,s))},T.prototype.cancelTile=T.prototype.hc,T.prototype.o=function(){T.l.o.call(this),this.getCache().ma(this.Tb),zl(this)};function vl(){}T.NullStorage=vl,vl.prototype.get=function(i,o){return o(),Bl},vl.prototype.get=vl.prototype.get,vl.prototype.put=function(i,o,s){s&&s()},vl.prototype.put=vl.prototype.put,vl.prototype.clear=function(i){i&&i()},vl.prototype.clear=vl.prototype.clear,vl.prototype.remove=function(i,o){o&&o()},vl.prototype.remove=vl.prototype.remove;function Ck(i){if(Ck.l.constructor.call(this,i),i&&(this.v={crossOrigin:i.crossOrigin||"anonymous",headers:i.headers||{}},this.u=i.getURL),this.a===ik.HARP&&H.map.render.harp){var o;i&&i.style&&i.style instanceof H.map.render.harp.Style?o=i.style:o=new H.map.render.harp.Style({styles:[{technique:"raster",attr:{gamma:1,brightness:1}}]}),this.lb(o)}if(!Da(this.u))throw new D(Ck,0,"getURL");if(jk(this,i.opacity),this.c=x.URL||x.webkitURL,i=this.v.crossOrigin,!(i=i==="anonymous"||i==="use-credentials")){i=this.u(0,0,0),o=window.location;var s=document.createElement("a");s.href=i,i=s.hostname===o.hostname&&s.port===o.port&&s.protocol===o.protocol}(this.K=i&&!!uf.arraybuffer&&!!this.c)&&this.Fb().Yd(A(this.Y,this))}u(Ck,T),t("H.map.provider.ImageTileProvider",Ck),Ck.prototype.dc=function(i){jk(this,i)},Ck.prototype.setOpacity=Ck.prototype.dc,Ck.prototype.Oc=function(){return this.g},Ck.prototype.getOpacity=Ck.prototype.Oc,Ck.prototype.Re=ff,Ck.prototype.providesRasters=Ck.prototype.Re,Ck.prototype.Gd=function(){return this.tileSize},Ck.prototype.getEntryWeight=Ck.prototype.Gd,Ck.prototype.G=function(i,o,s,_e,_n,_o){var _a=this,_u=this.u(i,o,s),_h;if(i=Bl,_u){var ty=x.setTimeout(function(){_a.K?(_h=new tf("arraybuffer",_u,_o,_a.v),_h.then(function(oy){return oy.blob()}).then(function(oy){var hy=new Image;hy.onload=A(_e,null,hy,{raw:oy}),hy.onerror=A(_n,null,"bad url");try{hy.src=_a.c.createObjectURL(oy)}catch{}},_n)):(_h=new tf("image",_u,_o,_a.v),_h.then(_e,_n))},150);i={cancel:function(){_h?_h.cancel():x.clearTimeout(ty)}}}else _e(null);return i},Ck.prototype.requestInternal=Ck.prototype.G,Ck.prototype.ea=function(i,o){var s=new Image;s.onload=function(){o(this)},s.src=this.c.createObjectURL(i)},Ck.prototype.Y=function(i,o){(i=o.data)&&i instanceof HTMLImageElement&&this.c.revokeObjectURL(i.src)},Ck.prototype.$=function(){return this.ab()},Ck.prototype.getStyle=Ck.prototype.$,Ck.prototype.xb=function(i){H.map.render.harp&&this.a===ik.HARP&&i instanceof H.map.render.harp.Style&&this.lb(i)},Ck.prototype.setStyle=Ck.prototype.xb,t("H.util.events.listenOnce",Ee),t("H.util.events.dispatchEvent",function(i,o){return i.dispatchEvent(o)}),t("H.util.events.fireListeners",function(i,o,s,_e){return ne(i)?i.ed(o,s,_e):Ne(i,o,s,_e)}),t("H.util.events.listen",De),t("H.util.events.unlisten",Le);var Cl=Oe;Oe=function(i,o){var s,_e,_n=!0,_o=o[o.currentTarget===o.target?"AT_TARGET":i.capture?"CAPTURING_PHASE":(s=!0,"BUBBLING_PHASE")];return(!s||(_e=o.type)!=="pointerenter"&&_e!=="pointerleave")&&(o.eventPhase=_o,_n=Cl(i,o),s&&i.src&&i.src.Hb&&i.src.Hb()===null&&delete o.eventPhase),_n};function Dl(i,o,s,_e){var _n=new wk(0,0,0,0);if(Dl.l.constructor.call(this),!i)throw new D(Dl,0,i);if(!o)throw new D(Dl,1,o);if(!s)throw new D(Dl,2,s);if(typeof _e!="object")throw new D(Dl,3,_e+" is not an object");if(typeof _e.pixelRatio!="number")throw new D(Dl,3,_e.pixelRatio+" is not a number");this.na=_e.pixelRatio,this.zoom=0,this.cb=Cd(this.na)/Md,this.b=new lj,this.ua={1:_n.clone(),2:_n.clone(),4:_n.clone()},this.m=new G(.5,.5),this.f=i,El(this,this.na),this.gc=A(this.gc,this),this.Yb=A(this.Yb,this),this.qb=A(this.qb,this),i.startInteraction=this.gc,i.interaction=this.Yb,i.endInteraction=this.qb,i.addEventListener(i.A.xa,this.ea,!1,this),this.getCapabilities=this.getCapabilities,this.capture=this.capture,this.zoomAt=this.ud,this.relaunch=this.fa,this.dispose=this.D,this.screenToGeo=this.Ra,this.geoToScreen=this.Aa,this.screenToLookAtData=this.hg,this.v=o,this.fc=A(this.fc,this),this.control=A(this.control,this),this.pb=A(this.pb,this),o.startControl=this.fc,o.control=this.control,o.endControl=this.pb,o.addEventListener(o.A.xa,this.Gg,!1,this),this.c=s,this.Rf=A(this.Rf,this),this.Ie=A(this.Ie,this),this.Je=A(this.Je,this),this.Qf=A(this.Qf,this),s.addEventListener(oj.prototype.A.xa,this.Rf,!1,this),s.addEventListener(s.A.ee,this.Ie,!1,this),s.addEventListener(s.A.ge,this.Je,!1,this),s.addEventListener(s.A.he,this.Qf,!1,this)}u(Dl,F),t("H.map.render.RenderEngine",Dl),Dl.prototype.ud=function(){};function El(i,o){var s=i.f,_e=s.width,_n=s.height,_o=s.padding,_a=_o.top,_u=_o.left,_h=_o.bottom;_o=_o.right,s=s.margin;var ty=-(_e+_u-_o)/2<<0,oy=-(_n+_a-_h)/2<<0;_e+=ty,_n+=oy,i=i.ua,i[1].set((ty-s)*o,(oy-s)*o,(_e+s)*o,(_n+s)*o),i[2].set(ty*o,oy*o,_e*o,_n*o),i[4].set((ty+_u)*o,(oy+_a)*o,(_e-_o)*o,(_n-_h)*o)}Dl.prototype.ea=function(){El(this,this.na)},Dl.prototype.o=function(){var i=this.f,o=this.v,s=this.c;i.removeEventListener(i.A.xa,this.ea,!1,this),i.startInteraction===this.gc&&(i.startInteraction=vk.prototype.gc),i.interaction===this.Yb&&(i.interaction=vk.prototype.Yb),i.endInteraction===this.qb&&(i.endInteraction=vk.prototype.qb),o.removeEventListener(o.A.xa,this.Gg,!1,this),o.startControl===this.fc&&(o.startControl=Fl.prototype.fc),o.control===this.control&&(o.control=Fl.prototype.control),o.endControl===this.pb&&(o.endControl=Fl.prototype.pb),s.removeEventListener(oj.prototype.A.xa,this.Rf,!1,this),s.removeEventListener(s.A.ee,this.Ie,!1,this),s.removeEventListener(s.A.ge,this.Je,!1,this),s.removeEventListener(s.A.he,this.Qf,!1,this)},Dl.prototype.fi=function(i){this.wg=i},Dl.prototype.setAnimationCallback=Dl.prototype.fi,Dl.prototype.ai=function(){this.wg=void 0},Dl.prototype.resetAnimationCallback=Dl.prototype.ai,Dl.prototype.control=function(){},Dl.prototype.capture=function(){return $b(Error("not implemented"))};function Gl(i,o){i.style.transition="opacity 1.5s",Ee(i,"transitionend",o,!1),i.style.opacity=0}var Hl={ZOOM:1,HEADING:2,TILT:4,INCLINE:8,COORD:16};Dl.InteractionModifiers=Hl,p=Dl.prototype,p.A={Oi:"render"},p.Rf=function(i){this.qk(i),this.fa()},p.Ie=function(i){this.Le(i.idx,i.added)},p.Je=function(i){this.Qh(i.idx,i.removed,i.type===this.c.A.he)},p.Qf=function(i){i.removed&&this.Je(i),this.Ie(i)},p.qk=jd,p.Le=function(i,o){this.mh(i,o),i===0&&this.zb(),C(o,oj)&&Il(this,o,!0),this.$d(),this.fa()},p.zb=function(){var i=this.c.Ha();if(0<i.length){var o=i[0].max;this.yg=i[0].min,this.xg=o}else i=this.getCapabilities().lookAt.zoom,o=i.max,this.yg=i.min,this.xg=o;i=Jl(this,this.zoom),i!==this.zoom&&(this.zoom=i,this.b.Ka(i),this.Wa())},p.Wa=function(i){this.S=this.gb(),i&&(this.S.position=i),this.S.zoom=this.zoom-this.cb,this.S.position.alt=0},p.fl=0,p.heading=180,p.gb=function(){return Kl(this,{position:this.b.projection.Wf(this.m),zoom:this.zoom,tilt:this.fl,heading:this.heading})};function Kl(i,o){return o.tilt=Ll(i,o.tilt),o.heading=Ml(i,o.heading),o.incline=i.getCapabilities().lookAt.incline.min,o}function Jl(i,o){var s=i.getCapabilities().lookAt.zoom;return Zd(o,xd(s.min,i.yg),wd(s.max,i.xg))}function Ll(i,o){return i=i.getCapabilities().lookAt.tilt,Zd(o,i.min,i.max)}function Ml(i,o){return i=i.getCapabilities().lookAt.heading,Zd((o%360+360)%360,i.min,i.max)}function Il(i,o,s){s=s?o.addEventListener:o.removeEventListener,s.call(o,o.A.Mi,i.Rh,!1,i),s.call(o,o.A.Li,i.Rh,!1,i)}p.mh=jd,p.Qh=jd,p.ho=function(i,o){this.B={before:i,after:o}},Dl.prototype.setOnRenderCallbacks=Dl.prototype.ho;var Nl={P2D:0,WEBGL:1,HARP:2};Dl.EngineType=Nl;var Ol={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:85},incline:{min:0,max:0},heading:{min:0,max:360}},interaction:{ZOOM:Hl.ZOOM,COORD:Hl.COORD},capture:!0};t("H.map.render.webgl.capabilities",Ol);function Pl(i){var o,s=this,_e=x.H.gl;Pl.l.constructor.call(this),this.a=o=_e.Scene.create(x.URL.createObjectURL(pf(JSON.stringify(Ql))),{viewport:i.viewport,container:i.Ub,disableRenderLoop:!0,devicePixelRatio:i.devicePixelRatio,logLevel:"error"}),i.Pn&&o.subscribe({load:i.Pn}),o.subscribe({view_complete:function(){s.ci=!0,i.sk()}});var _n=o.requestRedraw;o.requestRedraw=function(){_n.apply(o),i.sk()},this.di=A(this.di,this),this.bg=A(this.bg,this),this.f=0,this.c={},this.b={}}u(Pl,nd),p=Pl.prototype,p.ci=!1;function Rl(i){i=i.a.sources;var o;for(o in i){var s=i[o];if(s.hasPendingCommands&&s.hasPendingCommands())return!0}return x.H.gl.Task.hasPendingTasks()}p.T=function(){var i=x.H.gl.Task;return this.a.immediateRedraw(),i.setState({user_moving_view:this.a.view.user_input_active}),i.processAll(),this.ci&&!this.a.dirty&&!this.a.building&&!Rl(this)&&!Object.keys(this.b).length};function Sl(i){i.ci=!1,i.a.resetViewComplete()}function Tl(i){return i.a.view}function Ul(i,o){function s(){var _n=o.Ha(),_o={},_a={},_u,_h,ty,oy=++i.f,hy,fy;for(Xh(_a,Ql),_h=0;_h<_n.length;_h++){var vy=_n[_h];if(_u=vy.ka()){var xy=_u.ab();if(xy.getState()===Uh.READY){var wy=xy.lc();if(!Va(wy)){delete wy.cameras,delete wy.camera,_o[_h]=wy=ii(wy,_h),!C(vy,rl)&&wy.sources&&ji(wy,_u.uid);for(ty in wy.sources){var By=wy.sources[ty];By.max_zoom=wd(_u.max,Ol.lookAt.zoom.max),By.max_display_zoom=vy.max,By.min_display_zoom=vy.min,(fy=_u.tileSize)&&(2<=_e&&256<fy&&_u instanceof Ck&&(fy/=2),By.tile_size=fy)}(hy=xy.Db())&&ki(wy,hy),Xh(_a,wy)}}}}return Xh(_a.layers.skybox.draw.skybox.color,_a.scene.sky),i.a.config=_a,i.a.updateConfig().then(function(){var Sy={},Ay,Py;if(oy!==i.f)return!1;i.f=0;for(Py in _o){vy=_n[+Py];var Iy=_o[Py].sources;for(Ay in Iy)(Iy=i.a.sources[Ay])&&(Sy[Ay]=Iy,Iy.initialize&&vy.getProvider()&&Iy.initialize(vy.getProvider(),i.di,i.a.getWorkers().length,Iy.tiled?B:i.a.tile_manager.getWorkerForTile(y,Iy)))}for(Ay in i.c)!Sy[Ay]&&i.c[Ay].dispose&&i.c[Ay].dispose();return i.c=Sy,!0})}var _e=i.a.pixelRatio();i.a.initialized?s():i.a.load(y,{blocking:!1}).then(s)}p.di=function(i,o,s){var _e=this,_n=this.a.sources[i],_o=s&&s.isReload;o?this.b[i]!==!0&&(this.b[i]||(this.b[i]={el:{},Ui:[]}),C(o,Vk)?this.b[i].el[o.x+"/"+o.y+"/"+o.z]=!0:(o=o.boundingBox,this.b[i].Ui.push(new K(o[0],o[1],o[2],o[3])))):this.b[i]=!0,_n&&_n.has_volatile_data?Vl(this,_o):(x.clearTimeout(this.g),this.g=x.setTimeout(function(){return Vl(_e,_o)},100))},p.bg=function(i){var o=!1,s=this.b[i.source.name],_e=x.H.gl;if(s)if(s===!0)o=!0;else{var _n=_e.Tile.coord(_e.Geo.wrapTile(i.coords));if(o=!!s.el[_n.key],!o){var _o=_e.Geo.getTileBoundingBox(_n,i.source.tile_size,wh.MAX_LINE_WIDTH/2);_o=sg(_o.getTopLeft(),_o.getBottomRight()),o=s.Ui.some(function(_a){return _a.jd(_o,!0)||_o.bd(_a.Za(),!0)})}}return o};function Vl(i,o){var s=i.a.tile_manager;s.removeTiles(i.bg),s.updateTilesForView(),o&&s.removeCachedTiles(i.bg),Sl(i),i.b={}}p.lc=function(){return this.a.config};function Wl(i,o,s,_e){i.a.getFeatureAt(o,s,_e),i.a.update()}function Xl(i){return i.a.screenshot(void 0).then(function(o){return new Qb(function(s,_e){new Pj(URL.createObjectURL(o.blob),function(_n,_o){_n===1?s(_o.getData()):_e()},!1)})})}p.Ua=function(){return this.a.pixelRatio()},p.o=function(){var i=this.c;Pl.l.o.call(this),this.a.destroy(),this.b={},i&&Object.keys(i).forEach(function(o){i[o].dispose()}),x.clearTimeout(this.g),delete this.c,delete this.a},Pl.prototype.disposeInternal=Pl.prototype.o;var Ql={scene:{background:{color:"#FFFFFF"},sky:{zenith:"#347BC0",horizon:"#EDF2F9",fog:"#FFFFFF"}},lights:{default_light:{type:"directional",name:"default_light",visible:!0}},camera:{type:"perspective"},styles:{},fonts:{},sources:{skybox:{type:"SkyBox"}},layers:{skybox:{data:{source:"skybox"},draw:{skybox:{color:{}}}}},global:{}},lk={FEATURE:1,SOURCE:2,PROVIDER:3};t("H.map.provider.PickingMode",lk);function Yl(i){return i}t("H.util.animation.ease.LINEAR",Yl),t("H.util.animation.ease.EASE_IN_QUAD",function(i){return i*i});function Zl(i){return-i*(i-2)}t("H.util.animation.ease.EASE_OUT_QUAD",Zl),t("H.util.animation.ease.EASE_IN_OUT_QUINT",function(i){return i*=2,1>i?Ed(i,5)/2:(i-=2,Ed(i,5)/2+1)});function $l(i){return 1-Math.sqrt(1-i*i)}function am(i){return Dd(2*i-i*i)}t("H.util.animation.ease.EASE_OUT_CIRC",am);function bm(i){return 1-Math.cos(i*Math.PI/2)}function cm(i){return Math.sin(i*Math.PI/2)}function dm(i,o){this.a={tilt:em(i.tilt,o.tilt),heading:em(i.heading,o.heading),zoom:o.zoom-i.zoom};var s=this.b=ng(i.position),_e=o.position;i=_e.lat*Sd;var _n=s.lat*Sd;_e=_e.lng*Sd-s.lng*Sd,s=Gd(_e)*Id(i),i=Id(_n)*Gd(i)-Gd(_n)*Id(i)*Id(_e),i=Math.atan2(s,i),this.i=(0<=i?i:Qd+i)*Td,this.c=this.b.Ta(o.position),o=this.a.zoom,this.g=o===0?fm:Object.assign({},fm,{zoom:0>o?am:$l,position:0>o?bm:cm}),this.f=Object.assign({},{tilt:0,heading:0,zoom:0})}function em(i,o){return i=o-i,-180<i&&180>=i?i:180<i?i-360:i+360}var fm={tilt:Yl,heading:Yl,zoom:Yl,position:Yl};function gm(i,o){if(E(this.x=+i))throw new D(gm,0,i);if(E(this.y=+o))throw new D(gm,1,o)}gm.prototype.add=function(i){return new gm(this.x+i.x,this.y+i.y)},gm.prototype.a=function(i){if(!C(i,gm))throw new D(this.a,0,i);return i=this.b(i),i.x+i.y},gm.prototype.b=function(i){if(!C(i,gm))throw new D(this.b,0,i);return new gm(this.x*i.x,this.y*i.y)},gm.prototype.Ka=function(i){return new gm(this.x*i,this.y*i)};function hm(i){return Dd(i.a(i))}function im(i){i=i||jf,this.Xa=uc(i.Kn)?i.Kn:3,this.R=uc(i.In)?i.In:300,this.u=uc(i.wo)?i.wo:3,this.v=uc(i.ro)?i.ro:50,this.c=[],this.clear()}t("H.map.render.InteractionUtils",im),im.prototype.ln=function(){return this.b},im.prototype.isGestureDetected=im.prototype.ln,im.prototype.start=function(i,o){var s=Hl.HEADING,_e=Hl.TILT;this.m&&this.clear(),this.g=i,this.j=!!o,this.m=!0,this.b=!(i&(s|_e))||i===s||i===_e},im.prototype.start=im.prototype.start,im.prototype.store=function(i,o,s,_e,_n){var _o=!1;if(this.m){if(i=new jm(i,o,s,_e,_n),_o=i.c,this.s=this.a,this.a=i,this.f){if(this.i=!0,_o){o=this.g;var _a=this.b;if(!_a&&this.i){_n=Hl.HEADING;var _u=Hl.TILT;s=Hl.COORD,_e=Hl.ZOOM;var _h=o&(s|_u)?this.Ld(!0):km,ty=o&_e?this.xf(!0):1,oy=o&_n?Bd(this.Wg(!0)):0,hy=Bd(_h.x),fy=Bd(_h.y);_h=10<hy||10<fy,hy=10<fy&&fy>3*hy,ty=.8>ty||1.2<ty,oy=7<oy,o&_u&&(oy||ty||_h&&!hy?lm(this,_u):hy&&(lm(this,~_u>>>0),_a=!0)),!_a&&o&_n&&o&(s|_e)&&(ty||_h?(lm(this,_n),_a=!0):oy&&(lm(this,_u),_a=!0)),this.b=_a}}}else this.f=i,_o||(this.b=!0);this.j&&this.c.push(i)}return _o},im.prototype.store=im.prototype.store,im.prototype.clear=function(){this.c.length=0,this.m=this.j=this.i=this.b=!1,this.f=this.s=this.a=void 0},im.prototype.clear=im.prototype.clear,im.prototype.uc=function(i){return 0<(this.g&i)},im.prototype.isModifierEnabled=im.prototype.uc;function lm(i,o){i.g^=i.g&o}im.prototype.qa=function(){return this.m},im.prototype.isRunning=im.prototype.qa;var km=pc(new gm(0,0));im.prototype.mc=function(){var i;if(this.j){var o=this.c,s=o.length,_e=0;for(i=new gm(0,0);--s&&_e<this.u;)i=i.add(mm(o[s-1],o[s])),_e++}else i=this.Ld();return o=i,s=hm(o),s!==0?new gm(o.x/s,o.y/s):o},im.prototype.getDirection=im.prototype.mc,im.prototype.tb=function(i){i=i||Jk();var o,s;if(this.j){var _e=this.c,_n=this.c.length,_o=this.c[_n-1];for(s=o=0;--_n&&o<this.u;)s+=hm(mm(_e[_n],_e[_n-1])),o++;_e=s/o}else _o=this.a,_e=hm(this.Ld());return _e=_e>=this.Xa&&i-_o.timestamp<=this.v?_e>this.R?this.R:_e:0},im.prototype.getSpeed=im.prototype.tb,im.prototype.wf=function(){return this.a?nm(this.a):B},im.prototype.getBifocalCenter=im.prototype.wf,im.prototype.Ld=function(i){return(i=i?this.f:this.s)?mm(i,this.a):new gm(0,0)},im.prototype.getMoveVector=im.prototype.Ld,im.prototype.xf=function(i){var o=1;if(this.i){var s=this.a;i=i?this.f:this.s,(i=om(i))&&(s=om(s))&&(o=s/i)}return o},im.prototype.getBifocalScaling=im.prototype.xf,im.prototype.Wg=function(i){if(this.i){var o=i?this.f:this.s,s=this.a;i=o.b;var _e=s.b,_n=0;i&&_e&&(o=o.a,s=s.a,_n-=Ld(_e.y-s.y,_e.x-s.x)*Td-Ld(i.y-o.y,i.x-o.x)*Td),i=_n}else i=0;return i},im.prototype.getBifocalRotation=im.prototype.Wg;function jm(i,o,s,_e,_n){this.a=new G(i,o),s!==B&&(this.b=new G(s,_e),this.c=!0),this.timestamp=_n!==B?_n:Jk()}jm.prototype.c=!1;function nm(i){var o=i.a;return(i=i.b)?new G(o.x-(o.x-i.x)/2,o.y-(o.y-i.y)/2):B}function pm(i,o){var s=i.a;return(i=i.b)&&i.Ta(o)<s.Ta(o)?i:s}function mm(i,o){var s=i.b,_e=o.b;return _e&&s?(o=nm(o),i=nm(i)):s?(o=o.a,i=pm(i,o)):_e?(i=i.a,o=pm(o,i)):(o=o.a,i=i.a),new gm(o.x-i.x,o.y-i.y)}function om(i){var o=i.b;return o?i.a.Ta(o):0}function qm(){F.call(this),this.reset()}u(qm,F),qm.prototype.start=function(i,o){this.c&&this.reset(),E(i-o)||(this.a=+i,this.b=+o),this.c=!0},qm.prototype.reset=function(){this.c=!1,this.a=this.b=B,this.f=new rm(0,0,0,0,0,0)},qm.prototype.qa=function(){return this.c},qm.prototype.A={vg:"animationupdate"};function sm(i){sm.l.constructor.call(this,qm.prototype.A.vg),this.b=i}u(sm,sd),qm.prototype.set=function(i,o,s,_e,_n,_o){var _a=this.f;this.c&&(i=new rm(i/1e3,o/1e3,s/1e3,_e/1e3,_n/1e3,_o/1e3),_a.ga(i)||(this.f=i,this.dispatchEvent(new sm(tm(this)))))};function tm(i){return x.Object.create(i.f)}qm.prototype.tb=function(){return tm(this).tb()},qm.prototype.mc=function(){var i=tm(this),o=this.tb()||1;return new rm(i.a/o,i.b/o,i.c/o,i.f,i.g,i.i)},qm.prototype.o=function(){this.reset(),qm.l.o.call(this)};function rm(i,o,s,_e,_n,_o){this.a=i,this.b=o,this.c=s,this.f=_e,this.g=_n,this.i=_o}rm.prototype.tb=function(){return Dd(this.a*this.a+this.b*this.b+this.c*this.c)},rm.prototype.mc=function(){var i=this.tb()||1;return new rm(this.a/i,this.b/i,this.c/i,this.f,this.g,this.i)},rm.prototype.ga=function(i){var o=i===this;return!o&&(o=C(i,rm))&&(o=this.a===i.a&&this.b===i.b&&this.c===i.c&&this.f===i.f&&this.g===i.g&&this.i===i.i),o};function um(i,o,s,_e){um.l.constructor.call(this),this.Ub=i,this.na=_e,this.a=i.appendChild(this.createElement(i.ownerDocument)),this.Ze(o,s)}u(um,nd),um.prototype.L=function(){return this.a},um.prototype.Ze=function(i,o){this.size?(this.size.w=i,this.size.h=o):this.size=new Ui(i,o),this.Wk(this.a,this.a.style,i,o,this.na)},um.prototype.setSize=um.prototype.Ze,p=um.prototype,p.sb=function(){return this.size},p.Ua=function(){return this.na},p.Wj=!0,p.mb=function(i){i!==this.Wj&&(this.a.style.display=i?"block":"none",this.Wj=i)},p.Bh=1,p.dc=function(i){this.Bh!==i&&(this.$j(i),this.Bh=i)},p.Oc=function(){return this.Bh},p.ce=function(i){this.a.style.zIndex=i},um.prototype.setZIndex=um.prototype.ce,um.prototype.Ij=function(){return+this.a.style.zIndex},um.prototype.Jc=function(){},um.prototype.clear=function(){},um.prototype.o=function(){this.clear(),this.Ub.removeChild(this.a),this.Ze(0,0),delete this.a,delete this.Ub,um.l.o.call(this)},um.prototype.disposeInternal=um.prototype.o,um.prototype.f=0,um.prototype.gg=function(){++this.f},um.prototype.release=function(){--this.f||this.D()};function vm(i,o,s,_e,_n,_o){var _a=_n||"2d";vm.l.constructor.apply(this,arguments),this.b=this.a.getContext(_a,_o),this.c=_a==="2d",this.g=_a,this.yn=_o}u(vm,um),p=vm.prototype,p.createElement=function(i){i=i.createElement("canvas");var o=i.style;return o.position="absolute",o.top=o.left="0",i},p.Wk=function(i,o,s,_e,_n){i.width=xd(s,1),i.height=xd(_e,1),o.width=yd(s/_n)+"px",o.height=yd(_e/_n)+"px"},p.$j=function(i){this.b.globalAlpha=i},p.Jc=function(i,o,s,_e,_n){this.c&&this.b.drawImage(i,o,s,_e,_n)},p.Fd=function(){return this.g},p.clear=function(i){var o,s;this.c&&(i?this.b.clearRect(o=i.left,s=i.top,i.right-o,i.bottom-s):this.a.width=this.size.w)},p.o=function(){var i=this.a;i.width=i.height=0,delete this.b,vm.l.o.call(this)},vm.prototype.disposeInternal=vm.prototype.o;function wm(i){this.bb=i}u(wm,nd),wm.prototype.jb=function(){return this.bb},wm.prototype.getLayer=wm.prototype.jb,wm.prototype.Rm=function(){return this.ib},wm.prototype.getSurface=wm.prototype.Rm,wm.prototype.Wc=function(i){var o=this.ib;i!==o&&(this.ib=i,i.gg(),o&&o.release())},wm.prototype.setSurface=wm.prototype.Wc,wm.prototype.o=function(){this.ib.release()},wm.prototype.disposeInternal=wm.prototype.o,wm.prototype.Pd=function(){},wm.prototype.render=wm.prototype.T;function xm(i){var o="dom";xm.l.constructor.call(this,i),C(this.bb,ym)&&(o=i.Fd()==="2d"?"2d":"webgl"),this.a=o}u(xm,wm),xm.prototype.T=function(i,o,s,_e,_n,_o,_a,_u){_a=this.bb;var _h=this.ib,ty=!(C(_h,vm)&&_h.Fd()==="2d");return _e>=_a.min&&_e<=_a.max?(ty&&_h.mb(!0),_a.T(_h.L(),{boundingBox:i,zoom:_e,screenCenter:o,priorityCenter:_o,projection:s,cacheOnly:_n,size:_h.sb(),pixelRatio:_h.Ua(),cameraMatrix:_u})):(ty&&_h.mb(!1),uk.DONE)},xm.prototype.Pd=function(){return this.a};function zm(i,o,s,_e,_n){if(!Da(i.fi)||!Da(i.ai))throw new D(zm,0,i);if(this.b=i,!Da(this.j=o))throw new D(zm,1,o);if(E(this.i=+s))throw new D(zm,2,s);if(!Da(this.g=_e)&&_e!=null)throw new D(zm,3,_e);if(!Da(this.c=_n)&&_n!=null)throw new D(zm,4,_n);this.id=new cf().next(),this.a=!1}t("H.util.animation.Animation",zm),zm.prototype.start=function(){var i=this;this.f=Jk(),this.a=!0;var o=this.f;this.b.fi(function(){if(i.a){var s=Jk(),_e=s-i.f,_n=_e/i.i,_o=!1;1<=_n&&(_n=1,_o=!0),i.j(i.c?i.c(_n):_n,_e,s-o,s),o=s,_o&&i.stop()}else i.stop()})},zm.prototype.start=zm.prototype.start,zm.prototype.stop=function(i){this.a=!1,this.b.ai(),i||this.g&&this.g(this)},zm.prototype.stop=zm.prototype.stop,zm.prototype.qa=function(){return this.a},zm.prototype.isRunning=zm.prototype.qa;function Am(i,o){Am.l.constructor.call(this,i),this.jc=!(!o||!o.jc),this.f={}}u(Am,wm),Am.prototype.Wc=function(i){Am.l.Wc.call(this,i),this.j=i.Ub.ownerDocument},Am.prototype.setSurface=Am.prototype.Wc;var Bm=(function(i,o){return o=o.da(),C(o,gh)?o.ja:(i[0]=o,i)}).bind(null,[]);Am.prototype.T=function(i,o,s,_e,_n,_o,_a){var _u=this.bb,_h,ty,oy,hy;if(this.m=o=this.f,this.f=s={},_e>=_u.min&&_e<=_u.max){var fy=this.kj(i,_e,_n,_o),vy=fy.markers;if(i=vy.length){for(_e=[],_n=this.ib,_o=0;_o<i;_o++){_u=vy[_o];var xy=Bm(_u);for(_h=xy.length;_h--;)(ty=_a(xy[_h]))&&((hy=o[oy=_u.$a()+"_"+_h])?delete o[oy]:hy={kk:_u},s[oy]=hy,_e.push([hy,_u,_u.rb(),_n,ty.x,ty.y]))}for(_e.sort(Cm),i=_e.length,_o=0;_o<i;_o++)this.Gk.apply(this,_e[_o])}}return!fy||fy.requested&&fy.requested===fy.total||!fy.requested&&vy.length===fy.total?uk.DONE:uk.PENDING},Am.prototype.render=Am.prototype.T;function Cm(i,o){var s=i[1].Pc(),_e=o[1].Pc();return oh(s,_e,!0)||i[5]-o[5]||oh(s,_e,!1)}Am.prototype.Ba=function(){},Am.prototype.getObjectsAt=Am.prototype.Ba;function Dm(i,o){Dm.l.constructor.apply(this,arguments),this.c=0,this.a=[],this.b=A(this.b,this)}u(Dm,Am),t("H.map.render.dom.MarkerRenderer",Dm),Dm.prototype.kj=function(){return this.bb.xc.apply(this.bb,arguments)},Dm.prototype.T=function(i,o,s,_e,_n,_o,_a){this.b(),this.i=0;var _u=Dm.l.T.apply(this,arguments),_h=this.ib,ty=this.m,oy;for(oy in ty)Em(this,_h,ty[oy]);return this.a.length===0&&_u?uk.DONE:uk.PENDING},Dm.prototype.render=Dm.prototype.T,Dm.prototype.Wc=function(i){Dm.l.Wc.call(this,i),this.g=i.Ua()},Dm.prototype.setSurface=Dm.prototype.Wc,Dm.prototype.b=function(){for(var i=this.a.length,o,s,_e;i--;)_e=this.a[i],o=_e.tg,s=o.rb(),s.Oh(_e,s,o);this.a.length=0},Dm.prototype.Gk=function(i,o,s,_e,_n,_o){var _a,_u=_e.Ua(),_h=o.Gb();_n*=_u,_o*=_u,this.jc||(_n=yd(_n),_o=yd(_o)),i.detail&&(_h.Td(i.hn)?Em(this,_e,i):_a=i.detail),_a||(i.detail=_a=s.mj(this.j),this.c++,Da(s.Oh)&&this.a.push(_a)),i.hn=_h.a,_a.style.zIndex=this.i++,_a.tg=o,_e.Jc(_a,_n,_o,0,0)};var Fm,Gm="pointer-events",Hm;if($e){var Im;$e&&Zc!==y&&(Zc=(Im=/(MSIE\s+|rv:)([^\);]+)(\)|;)/.exec(navigator.userAgent))?+Im[2]:y),Hm=Zc,Hm===9?Gm="display":Hm===10&&(Gm="visibility")}Fm=Gm,Dm.prototype.Ba=function(i,o,s){var _e=this.g,_n=hf,_o,_a,_u,_h,ty;if(this.c){i/=_e,o/=_e,_e=this.ib.Ub.getRootNode();var oy=_e.documentElement,hy=this.ib.L(),fy=hy.getBoundingClientRect();for(i+=fy.left,o+=fy.top;(_a=_u=_e.elementFromPoint(i,o))&&_a!==hy&&_a!==oy&&_a!==_e.host&&_u!==vy;){for(;(_h=_a.parentNode)&&(!Da(_h.contains)||!_h.contains(hy));)_a=_h;if(_h===hy&&(_a!==_u||_a.nodeName!=="svg")&&0>_n.indexOf(ty=_a.tg)&&(_n===hf&&(_n=[]),_n.push(ty),s))break;_o||(_o=[]);var vy=_a.style;_o.push({Zi:vy.getPropertyValue(Fm),gn:vy.getPropertyPriority(Fm),style:vy}),vy.setProperty(Fm,Fm==="visibility"?"hidden":"none","important"),vy=_u}if(_o)for(o=_o.length;o--;)i=_o[o],i.style.removeProperty(Fm),Ac(i.Zi)&&i.style.setProperty(Fm,i.Zi,i.gn)}return _n},Dm.prototype.getObjectsAt=Dm.prototype.Ba,Dm.prototype.Pd=function(){return"dom"};function Em(i,o,s){o.clear(o=s.detail),delete o.tg,i.c--,s=(i=s.kk).rb(),s.b&&s.b(o,s,i)}Dm.prototype.o=function(){this.a.length=0;var i=this.ib,o=this.f,s;for(s in o)Em(this,i,o[s]);this.ib.D(),Dm.l.o.call(this)},Dm.prototype.disposeInternal=Dm.prototype.o;function ym(i,o){var s=o||{},_e=s.contextType;if(s=s.contextAttributes,ym.l.constructor.call(this,o),xc(i,"Function",ym,0,"invalid render callback"),_e){if(Jm.indexOf(_e)===-1)throw new D(ym,1,"invalid context type");this.b=_e}s&&(this.c=s),this.f=i}u(ym,oj),t("H.map.layer.CanvasLayer",ym);var Jm=["2d","webgl","webgl2","experimental-webgl"];ym.prototype.b="2d",ym.prototype.Fd=function(){return this.b},ym.prototype.T=function(i,o){return this.a&&this.a.canvas===i||(this.a=i.getContext(this.b,this.c)),this.f(this.a,o)},ym.prototype.o=function(){ym.l.o.call(this),delete this.a};function Km(i,o){Km.l.constructor.call(this,o),xc(i,"Function",Km,0,"invalid render callback"),this.a=i}u(Km,oj),t("H.map.layer.DomLayer",Km),Km.prototype.T=function(i,o){return this.a(i,o)};function Lm(i,o){if(E(this.b=+i))throw new D(Lm,0,i);this.a=0,o&&this.Sk(o)}t("H.util.kinetics.KineticMove",Lm),Lm.prototype.Sk=function(i){return this.a=i,this},Lm.prototype.setInitialSpeed=Lm.prototype.Sk,Lm.prototype.$l=function(){return Math.abs(this.a/this.b)},Lm.prototype.getDuration=Lm.prototype.$l,Lm.prototype.ze=function(i){return this.a+this.b*i},Lm.prototype.getCurrentSpeed=Lm.prototype.ze,Lm.prototype.Xl=function(i){return this.a*i+this.b*i*i/2},Lm.prototype.getCurrentPath=Lm.prototype.Xl;function Mm(i,o,s,_e){Mm.l.constructor.apply(this,arguments)}u(Mm,um),t("H.map.render.dom.Surface",Mm),p=Mm.prototype,p.Fd=function(){return"dom"},p.createElement=function(i){return i=i.createElement("DIV"),i.style.position="absolute",i.style.pointerEvents="none",i},p.Wk=function(i,o,s,_e){o.width=s+"px",o.height=_e+"px"},p.$j=function(i){this.a.style.opacity=i},p.Jc=function(i,o,s){var _e=this.na,_n=i.style;_n[Af("transform")]="matrix(1,0,0,1,"+o/_e+","+s/_e+")",i.parentNode!==this.a&&(_n.position="absolute",this.a.appendChild(i),this.a.style.pointerEvents="auto",getComputedStyle(i).pointerEvents==="auto"&&(i.style.pointerEvents="all"),this.a.style.pointerEvents="none")},p.clear=function(i){i?this.a.removeChild(i):this.a.innerHTML=""};function Nm(i,o){this.a=i,this.b=o}function Om(i,o,s){var _e=[],_n={Ub:i.a,width:o.w,height:o.h,na:i.b};for(i=0;i<s.length;i++){o=s[i];var _o=o.Pd(),_a={};Ya(_a,_n);var _u=o.ib;switch(_o){case"2d":if(C(o.jb(),ym)&&(_a.Lg=o.jb().c),_o=oy&&oy.Fd()==="2d"){_o=_a.Lg;var _h=oy.yn;_o=_h===_o?!0:_h&&!_o?!_h.alpha&&!_h.willReadFrequently:_o&&!_h?!_o.alpha&&!_o.willReadFrequently:!_o.alpha==!_o.alpha&&!_h.willReadFrequently==!_o.willReadFrequently}if(_o)var ty=!1;else if(_u&&!ty){var oy=_u;ty=!1}else oy=new vm(_a.Ub,_a.width,_a.height,_a.na,"2d",_a.Lg),ty=!0;break;case"dom":oy=_u||new Mm(_a.Ub,_a.width,_a.height,_a.na),ty=!_u;break;default:oy=_u||new vm(_a.Ub,_a.width,_a.height,_a.na,o.jb().Fd(),_a.Lg),ty=!_u}_e[_e.length-1]!==oy&&(oy.ce(_e.length),_e.push(oy)),o.Wc(oy)}return _e}function Fl(){Fl.l.constructor.call(this),this.b={},this.a={position:new lg(0,0),zoom:0,heading:180,incline:0,tilt:0,bounds:new O(ch([90,-180,90,0,90,180,-90,180,-90,-180]))}}u(Fl,F),t("H.map.ViewModel",Fl),Fl.prototype.A={xa:"update",ie:"sync"},Fl.prototype.Qb=function(i,o){if(!i)throw new D(this.Qb,0,i);var s=i[Pm];if(uc(s)&&!mg(s))throw new D(this.Qb,0,Pm);if(s=i[Qm],uc(s)&&E(+s))throw new D(this.Qb,0,Qm);if(s=i[Rm],uc(s)&&!C(s,kg))throw new D(this.Qb,0,Rm);return i=x.Object.assign({},i),s=Sm(i,this.b,this.a),Tm(this,this.b,i),this.dispatchEvent(new Um(this.b,s,o)),this},Fl.prototype.setLookAtData=Fl.prototype.Qb,Fl.prototype.gb=function(){var i={};return i[Pm]=ng(this.a[Pm]),Tm(this,i,this.a,!0),i},Fl.prototype.getLookAtData=Fl.prototype.gb;var Pm="position",Qm="zoom",Rm="bounds",Vm={Ni:Pm,Qi:Qm,Hi:"heading",Pi:"tilt",Ii:"incline",Fi:Rm},Wm=Object.keys(Vm).map(function(i){return Vm[i]});function Tm(i,o,s,_e){i.g={},i.f={},i.c=[];for(var _n=i.j,_o=i.i,_a=Wm.length,_u,_h,ty;_a--;)if(_u=Wm[_a],ty=s[_u],_h=o[_u],_h==null||!_e)if(ty!=null){uc(_n)&&_n.call(i,_u,_h,ty);var oy=_u,hy;if((hy=_u!=="position")||(hy=ty,hy=!(!hy||E(hy.lat)||E(hy.lng))),o[oy]=hy?ty:ng(ty),uc(_o)){switch(_u){case"position":_h=ty&&_h&&(ty.lat!==_h.lat||ty.lng!==_h.lng);break;case"bounds":_h=ty&&_h&&!ty.ga(_h);break;default:_h=ty!==_h}_h&&_o.call(i,_u)}}else delete o[_u]}Fl.prototype.j=function(i,o,s){this.g[i]=o,this.f[i]=s},Fl.prototype.i=function(i){this.c.push(Xm[i])};var Xm=Wm.reduce(function(i,o){return i[o]=cj[o.toUpperCase()],i},{});function Sm(i,o,s){var _e=0;return["tilt","incline","heading",Qm].forEach(function(_n){if(E(i[_n])){var _o=E(o[_n])?s[_n]:o[_n];i[_n]=_o}else _e|=Xm[_n]}),[Pm,Rm].forEach(function(_n){i[_n]?_e|=Xm[_n]:i[_n]=o[_n]||s[_n]}),_e}Fl.prototype.Wa=function(i){var o={},s={};Tm(this,this.a,i),this.b={},o.lookAt=this.f,s.lookAt=this.g,i=this.c,i=i.length?i.reduce(Ym):0,this.dispatchEvent(new bj(this.A.ie,o,s,i))},Fl.prototype.synchronize=Fl.prototype.Wa;function Ym(i,o){return i|o}Fl.prototype.$e=function(i,o){if(E(i=+i))throw new D(this.$e,0,Qm);this.Qb({zoom:i},o)},Fl.prototype.kb=function(){return this.a.zoom},Fl.prototype.fc=Oc,Fl.prototype.startControl=Fl.prototype.fc,Fl.prototype.control=Oc,Fl.prototype.control=Fl.prototype.control,Fl.prototype.pb=Oc,Fl.prototype.endControl=Fl.prototype.pb;function Um(i,o,s){Um.l.constructor.call(this,Fl.prototype.A.xa,i,null,o),this.b=this.animate=!!s}u(Um,bj);function U(i,o,s,_e){if(U.l.constructor.call(this,i,o,s,_e),this.ya=new Pk(100),this.N=new G(0,0),this.vf=!!_e.enableSubpixelRendering,this.Rb=Zm,this.s=new im,this.g=_e=new qm,this.Gc=A(this.Gc,this),_e.addEventListener(_e.A.vg,this.Gc),_e=i.element,this.K=i=_e.ownerDocument.createElement("div"),i.style.position="absolute",i.style.width=i.style.height="100%",i.style.zIndex=0,_e.insertBefore(i,_e.firstChild),this.yd=new Nm(this.K,this.na),this.oa=o.gb().position,o=x.H.gl,!o)throw new Yc(U,'"H-webgl" module is missing');for(this.a=new Pl({viewport:this.f,Ub:this.K,devicePixelRatio:this.na,sk:A(this.fa,this)}),o.WorkerBroker.addTarget("model",qj),o=this.c.Ha(),i=0,_e=o.length,this.j={Ic:[],ha:[]},this.Ya=o;i<_e;i++){var _n=o[i];this.Le(i,_n),Il(this,_n,!0)}this.zb(),this.Zc=A(this.Zc,this),this.Dh=A(this.Dh,this),this.Aa=A(this.Aa,this),s.addEventListener(oj.prototype.A.fe,this.Zc),this.Y=$m,this.zoom=Jl(this,this.v.kb()),this.zb(),this.ea()}u(U,Dl),t("H.map.render.webgl.RenderEngine",U),U.prototype.gb=function(){var i=this.oa;return Kl(this,{position:{rn:i.rn,vn:i.vn},zoom:this.zoom,tilt:this.fl,heading:this.heading})},U.prototype.Zc=function(i){i=(i=i.target.ka())&&i.ab(),(i&&i.getState())===Uh.INIT?i.load():(Sl(this.a),Ul(this.a,this.c),this.fa())},U.prototype.type=Nl.WEBGL;var $m=2;U.prototype.getState=function(){return this.Y},U.prototype.getState=U.prototype.getState;function an(i,o,s){return o=s-o,i=Ed(2,8+i.zoom),o<i/2?o:o-i*s/Bd(s)}function bn(i,o,s){function _e(_u){return _n[_u]+em(_n[_u],o[_u])/2}if(!(s&cj.POSITION||s&cj.BOUNDS))return null;var _n=Tl(i.a).getLookAtData();s=_n.position;var _o=o.position,_a=o.bounds;return Ci(_n.bounds,_o.lat,_o.lng,!1)||_a&&Ci(_a,s.lat,s.lng,!1)?null:(s=cn(i,{tilt:_e("tilt"),heading:_e("heading"),incline:0,bounds:tg([s,_o])}),s.zoom=Jl(i,s.zoom-.5),delete s.bounds,s)}U.prototype.ad=!1;function dn(i,o,s,_e){return i=i.getCapabilities().lookAt[_e],i=i.max-i.min,Bd(_e==="zoom"?s[_e]-o[_e]:em(o[_e],s[_e]))/i||0}function en(i,o,s){return i=xd(8*dn(i,o,s,"zoom"),dn(i,o,s,"heading"),dn(i,o,s,"tilt")/2),Zd(3e3*i,300,4e3)}U.prototype.Gg=function(i){var o=this,s=i.newValue,_e=i.modifiers,_n=Tl(this.a);fn(this),this.N.set(0,0);var _o=gn(this,s);if(Wm.forEach(function(ty){_e&i[ty.toUpperCase()]||delete _o[ty]}),i.b){_n=Tl(this.a).getLookAtData();var _a=cn(this,_o);s=bn(this,_a,_e);var _u=function(){return o.ad=!1};if(delete _a.bounds,this.ad=!0,s){_n=en(this,_n,s);var _h=en(this,s,_a);hn(this,s,_n,function(){return hn(o,_a,_h,_u)})}else s=en(this,_n,_a),hn(this,_a,s,_u)}else jn(_o),_n.setLookAtData(_o);kn(this),Sl(this.a),this.fa()};function cn(i,o){return jn(o),Tl(i.a).getBestLookAtData(o)}function jn(i){var o=i.bounds;!o||o instanceof O||(i.bounds=zi(o.J()))}function ln(i,o,s){Tl(i.a).setLookAtData(o),Sl(i.a),kn(i),i.fa(),s&&setTimeout(s,0)}function hn(i,o,s,_e){var _n=Tl(i.a).getLookAtData(),_o=new dm(_n,o);_o.a.tilt+_o.a.heading+_o.a.zoom+_o.c!==0?mn(i,function(_a){for(var _u in _o.a)if(_o.a[_u]!==0){var _h=_o.g[_u](_a);_n[_u]+=_o.a[_u]*(_h-_o.f[_u]),_o.f[_u]=_h}return _o.c!==0&&(_n.position=_o.b.sg(_o.i,_o.c*_o.g.position(_a),!0)),ln(i,_n)},s,function(){return ln(i,o,_e)}):ln(i,o,_e)}U.prototype.ig=function(){},U.prototype.setAnimationDuration=U.prototype.ig,U.prototype.Ug=function(){},U.prototype.getAnimationDuration=U.prototype.Ug,U.prototype.jg=function(){},U.prototype.setAnimationEase=U.prototype.jg,U.prototype.Vg=function(){},U.prototype.getAnimationEase=U.prototype.Vg,U.prototype.eg=function(){},U.prototype.resetAnimationDefaults=U.prototype.eg;function nn(i,o){i.ya.ma(function(s,_e){return _e.Hb()===o})}p=U.prototype,p.qk=function(i){nn(this,i.target.ka()),Sl(this.a),this.fa()},p.Le=function(i,o){U.l.Le.call(this,i,o),on(o)&&(Sl(this.a),(i=(i=o.ka())&&i.ab())&&i.getState()===Uh.INIT&&i.load())},p.Qh=function(i,o,s){var _e;if(this.ue=Jk(),nn(this,o.ka()),o.requestDomMarkers||C(o,ym)||C(o,Km)){var _n=this.j.ha;for(_e=_n.length;_e--;){var _o=_n[_e];if(_o.jb()===o){_n.splice(_e,1),_o.D();break}}}on(o)&&Ul(this.a,this.c),this.Ya=this.c.Ha(),i===0&&(Il(this,o,!1),this.zb()),Om(this.yd,pn(this),this.j.ha.filter(uc)),this.$d(),s||this.fa()};function on(i){return!(C(i,Km)||C(i,ym))}p.Rh=function(){this.zb()},p.zb=function(){U.l.zb.call(this);var i=this.getCapabilities().lookAt.zoom;Tl(this.a).setZoomConstraints(xd(i.min,this.yg),wd(i.max,this.xg))},p.mh=function(i,o){var s;if(o){if(i={jc:this.vf,cb:this.cb},o.T?C(o,ym)?s=new xm(o):C(o,Km)&&(s=new xm(o)):o.requestDomMarkers&&(s=new Dm(o,i)),s){this.j.ha.push(s);var _e=this.c.Ha();this.j.ha.sort(function(_n,_o){return _e.indexOf(_n.bb)-_e.indexOf(_o.bb)}),Om(this.yd,pn(this),this.j.ha.filter(uc))}on(o)&&Ul(this.a,this.c)}this.Ya=this.c.Ha()};function gn(i,o){var s=o.position;return Kl(i,{zoom:Jl(i,o.zoom),position:new lg(s.lat,s.lng),tilt:o.tilt,heading:o.heading,bounds:o.bounds})}function kn(i){var o=Tl(i.a).getLookAtData();i.zoom=o.zoom,i.oa=o.position}function qn(i,o){return i=Tl(i.a).geoToMeters(o),new G(i.x/4007501668557849e-8+.5,1-(i.y/4007501668557849e-8+.5))}function rn(i,o){return o.sub(qn(i,i.oa)).scale(Ed(2,8+i.zoom))}p.Aa=function(i){return Tl(this.a).geoToPixel(i)},U.prototype.geoToScreen=U.prototype.Aa,U.prototype.Ra=function(i,o){return Tl(this.a).xyToGeo(i,o)},U.prototype.screenToGeo=U.prototype.Ra,U.prototype.hg=function(i,o){return i=this.Ra(i,o),o=this.v.gb(),o.position=i,o};function sn(i,o,s,_e,_n,_o,_a,_u){var _h,ty,oy=0,hy,fy=function(){--oy===0&&_o(_n)};if(_u&&_u.features)for(oy=ty=_u.features.length,hy=0;hy<ty;hy++){var vy=_u.features[hy],xy=vy.id;if(_h=i.a.a.sources[vy.source_name]){var wy=_h.provider,By=wy.Aj();if(By===lk.SOURCE){var Sy=vy.source_layer;if(Sy==="overlays")tn(i,o,s,_e,_n,_h,vy.properties.overlays_config);else if(_h=_h.getMapObjectById(xy)){if(Sy!=="markers")_n.push(_h);else if(un(i,o,s,_h))_n.push(_h);else if(_e&&!_a){var Ay=!0;Wl(i.a,{x:o,y:s},{radius:3.5,top_most_only:!1},function(Py){sn(i,o,s,_e,_n,_o,!0,Py)})}}oy--}else By===lk.FEATURE?(Sy=vy.tile.coords,Ay=wy.getFeatureProxy(vy.properties,Sy,function(Py){Py&&(Py.Vk(wy),_n.push(Py)),fy()}),Ay||(_h=i.ya.get(xy),_h||(_h=new lh(vy),_h.ia(wy),i.ya.add(xy,_h,1)),_n.push(_h),oy--)):By===lk.PROVIDER&&(Ay=!0,wy.Hk(vy,!1).then(function(Py){Py&&(!(Py instanceof rh)||un(this,o,s,Py))&&_n.push(Py),fy()},function(){fy()},i))}}By&&(Ay||oy!==0)||_o(_n)}function tn(i,o,s,_e,_n,_o,_a){var _u;for(i=i.Ra(o,s),o=_a.length;o--&&(!(_u=_o.getMapObjectById(_a[o].id))||0<=_n.indexOf(_u)||!_u.da().bd(i)||(_n.push(_u),!_e)););}function un(i,o,s,_e){var _n=_e.rb(),_o=_n.c,_a,_u=!_o;if(_o)if(_n=_n.fd(),o+=_n.x,s+=_n.y,_n=_e.da(),C(_n,Ti))for(_e=_n.ja,_a=_e.length;_a--&&!_u;)_n=i.Aa(_e[_a]),_u=_o.If(o-_n.x,s-_n.y,0)!==be.NONE;else _n=i.Aa(_n),_u=_o.If(o-_n.x,s-_n.y,0)!==be.NONE;return _u}U.prototype.Ba=function(i,o,s,_e){var _n=this,_o=[];_o=vn(_o,this.j.ha,i*this.na,o*this.na,s),s&&_o.length?_e(_o):this.a.a.initialized?Wl(this.a,{x:i,y:o},{radius:3.5,top_most_only:s},function(_a){sn(_n,i,o,s,_o,_e,!1,_a)}):_e(_o)},U.prototype.getObjectsAt=U.prototype.Ba;function vn(i,o,s,_e,_n){for(var _o=o.length,_a;_o--&&!((_a=o[_o])&&_a.Ba&&(i=i.concat(_a.Ba(s,_e,_n)),i.length&&_n)););return i}U.prototype.V=y;function pn(i){return i=i.ua[2],{w:i.right-i.left,h:i.bottom-i.top}}U.prototype.ea=function(){var i=this.j.ha.length;El(this,this.na),this.N.set(0,0);var o=pn(this),s=o.w,_e=o.h;for(this.a.a.handleViewportUpdate();i--;){o=this.j.ha[i].ib;var _n=o.sb();_n.w===s&&_n.h===_e||o.Ze(s,_e)}this.V=new Ui(s,_e),Sl(this.a),this.fa()},U.prototype.getCapabilities=function(){return Ol},U.prototype.getCapabilities=U.prototype.getCapabilities;function wn(i){i.i&&i.i.qa()||(Rl(i.a)||Jk()-i.ue<i.Rb)&&!i.ra?i.Of||(i.Of=Hk(i.Dh)):(i.ra&&(i.$d(),xn(i)),i.Y=$m)}p=U.prototype,p.Of=0,p.$d=function(){this.j.Ic.length=0},p.Dh=function(){this.Of=0,this.B&&this.B.before();var i=Tl(this.a),o=i.getLookAtData(!1),s=i.getLookAtData(!0);i=this.f.center.clone(),s=s.bounds.J();var _e=this.zoom,_n=this.N,_o=this.Ya,_a=_o.length;for(this.Rb=Zm;_a--;){var _u=_o[_a];C(_u,oj)&&_u.ka()&&_u.ka().Qe(s,_e)}this.ra=this.a.T(),this.v.Wa(o),o=this.j,_o=o.ha.length;var _h=!0,ty;for(ty=0;ty<_o;ty++){_a=o.ha[ty];var oy=o.Ic;_a&&(_u=_a.T(s,i,void 0,_e,!1,_n,this.Aa,this.a.a.getCameraMatrix()),_u===uk.ACTIVE&&(this.Rb=1/0),_u!==uk.DONE||oy[ty]||(xn(this,_a.jb()),oy[ty]=!0),oy[ty]||(_h=!1))}this.ra=_h&&this.ra,this.V&&(this.f.Wa(this.V),this.V=y),this.i&&this.i.qa()&&this.wg(),this.B&&this.B.after(),wn(this)};function xn(i,o){i.ad||setTimeout(A(i.dispatchEvent,i,{type:i.A.Oi,target:o||i}),1)}p.o=function(){var i=this.c.Ha()[0],o=this.f;Ik(this.Of),yn(this),i&&Il(this,i,!1),this.j.ha.filter(uc).forEach(function(s){s.D()}),o.element&&o.element.removeChild(this.K),delete this.K,this.Y=3,this.a.D(),U.l.o.call(this)},p.fa=function(){this.ue=Jk(),this.Y===$m&&(this.ra=!1,this.Y=1,wn(this))};function zn(i,o,s){Tl(i.a).applyPxOffset([o,s]),kn(i),i.N.set(0,0),Sl(i.a),i.fa()}p.ud=function(i,o,s){i=Jl(this,Jl(this,i)),An(this,i,o,s)},U.prototype.zoomAt=U.prototype.ud;function An(i,o,s,_e){Tl(i.a).setLookAtData({zoom:o},Dc(s)&&Dc(s)?[s,_e]:B),kn(i),Sl(i.a),i.fa()}function fn(i){yn(i),i.g.qa()&&i.pb(!0),i.s.qa()&&i.qb(!0)}function Bn(i,o){if(o){var s={};s.Pe=o.power,s.re=o.ease,s.duration=o.duration,i.u=s}}U.prototype.gc=function(i,o){var s=!!(o||i&(Hl.HEADING|Hl.TILT));fn(this),Bn(this,o),this.s.start(i,s),Tl(this.a).setPanning(!0)},U.prototype.startInteraction=U.prototype.gc,U.prototype.Yb=function(i,o,s,_e,_n){var _o=this.s,_a=!1;if(_o.qa()){var _u=Tl(this.a),_h=_u.getLookAtData(),ty=this.f.center;ty=[ty.x,ty.y],o=_o.store(i,o,s,_e,_n),s=_o.wf(),i=_o.Ld(),_n=this.s.xf(),_e=this.s.Wg(),_o.b&&(_o.uc(Hl.TILT)&&(_u.setLookAtData({tilt:Ll(this,_h.tilt+i.y/this.f.height*-180)},ty),_a=!0),o&&_n!==1&&_o.uc(Hl.ZOOM)&&(_a=_o.wf(),_n=Cd(Ed(2,this.zoom)*_n)/Md,An(this,Jl(this,_n),_a.x,_a.y),_a=!0),_o.uc(Hl.COORD)&&0<hm(i)&&(zn(this,-i.x,-i.y),_a=!0),_o.uc(Hl.HEADING)&&(o?_u.setLookAtData({heading:_h.heading+Ml(this,_e)},[s.x,s.y]):i.x&&_u.setLookAtData({heading:Ml(this,_h.heading+i.x/this.f.width*360)},ty),_a=!0),_a&&(Sl(this.a),this.fa()))}},U.prototype.interaction=U.prototype.Yb,U.prototype.qb=function(i){var o=this;if(this.s.qa()&&!i){if(this.u){i=this.s.tb();var s=this.s.mc(),_e=this.u.duration,_n=(this.u.Pe||1)*i,_o=new Lm(-_n/(0<_e?_e:1),_n);!E(s.x)&&!E(s.y)&&0<_n&&o.s.uc(Hl.COORD)&&mn(this,function(_a){_n=_o.ze(_a*_e),E(_n)||zn(o,yd(-s.x*_n),yd(-s.y*_n))},_e,void 0,this.u.re)}delete this.u,this.s.clear()}Tl(this.a).setPanning(!1),this.fa()},U.prototype.endInteraction=U.prototype.qb,U.prototype.fc=function(i,o,s){fn(this),this.g.start(o,s),Bn(this,i),Tl(this.a).setPanning(!0)},U.prototype.startControl=U.prototype.fc,U.prototype.control=function(i,o,s,_e,_n,_o){for(var _a=0,_u;_a<arguments.length;_a++)if(_u=+arguments[_a],_u!==_u)throw new D(this.control,_a,_u);this.g.qa()&&this.g.set(i,o,s,_e,_n,_o)},U.prototype.control=U.prototype.control,U.prototype.pb=function(i,o){var s=this,_e;if(this.g.qa()){yn(this);var _n=Jk(),_o=_n-this.Cd;if(1<=_o){var _a=tm(this.g);Cn(this,_a,_o)}if(!this.u||i||o)typeof o=="function"&&(i=Tl(this.a),i=i.getLookAtData(),o(i),Dn(this,i));else{o=this.g.tb();var _u=this.g.mc(),_h=this.u.duration,ty=(this.u.Pe||1)*o,oy=new Lm(-ty/(0<_h?_h:1),ty);!E(_u.a)&&!E(_u.b)&&0<ty&&mn(this,function(hy,fy,vy,xy){_n&&(vy=xy-_n,_n=0),ty=oy.ze(hy*_h)*vy,E(ty)||((_e=_u.c*ty)&&An(s,Jl(s,s.zoom+_e),s.g.a,s.g.b),zn(s,yd(_u.a*ty),yd(_u.b*ty)))},_h,void 0,this.u.re)}this.g.reset(),Tl(this.a).setPanning(!1),this.fa()}},U.prototype.endControl=U.prototype.pb;function Dn(i,o){var s=rn(i,qn(i,o.position)),_e=s.y;s=s.x;var _n=o.zoom,_o=rn(i,qn(i,i.oa));o=_o.y;var _a=_o.x;_o=i.zoom;var _u=i.g.tb(),_h=i.g.a,ty=i.g.b,oy=0;if(s=an(i,_a,s),s-=_a,_e-=o,_o=_n-_o,o=Dd(s*s+_e*_e+_o*_o),_u!==0&&o!==0){var hy=s/o,fy=_e/o,vy=_o/o,xy=_u*_u/(2*o);mn(i,function(wy,By){var Sy;wy!==1?(wy=_u*By-xy*By*By/2,By=wy-oy,(Sy=vy*By)&&(Sy=Jl(i,i.zoom+Sy),An(i,Sy,_h,ty)),zn(i,yd(hy*By),yd(fy*By)),oy=wy):(An(i,Jl(i,_n),_h,ty),i.fa())},2*o/_u)}}U.prototype.Gc=function(i){var o=this,s=i.b;this.N.set(0,0),s.a||s.b||s.c||s.f||s.g||s.i?(this.Cd=Jk(),mn(this,function(_e,_n,_o,_a){o.Cd=_a,Cn(o,s,_o)},Ud),this.fa()):yn(this)};function Cn(i,o,s){s=s||0;var _e=i.g,_n=Tl(i.a),_o=_n.getLookAtData();o.c&&An(i,Jl(i,_o.zoom+o.c*s),_e.a,_e.b),_n.setLookAtData({heading:Ml(i,_o.heading+o.g*s),tilt:Ll(i,_o.tilt+o.f*s)}),kn(i),zn(i,o.a*s,o.b*s)}function mn(i,o,s,_e,_n){i.i&&i.i.qa()&&i.i.stop(!0),i.i=new zm(i,o,s,_e,_n),i.i.start()}function yn(i){i.i&&i.i.qa()&&i.i.stop(!0)}U.prototype.Qg=function(){},U.prototype.enter=U.prototype.Qg,U.prototype.Rg=function(i){Gl(this.K,i)},U.prototype.exit=U.prototype.Rg,U.prototype.capture=function(i,o,s,_e){var _n=this;return Xl(_n.a).then(function(_o){var _a=_n.K.ownerDocument.createElement("canvas"),_u=_n.na,_h=_a.getContext("2d"),ty=_n.a.Ua()/_u,oy=(s-i)*_u;return _u*=_e-o,_a.width=oy,_a.height=_u,_h.drawImage(_o,i*ty,o*ty,oy*ty,_u*ty,0,0,oy,_u),_a})},U.prototype.Jl=function(i){return Tl(this.a).geoToMeters(i)},U.prototype.geoToMeters=U.prototype.Jl,U.prototype.Jn=function(i){return Tl(this.a).metersToGeo(i)},U.prototype.metersToGeo=U.prototype.Jn;var Zm=5e3;function V(i,o,s){var _e={};if(!(i instanceof HTMLElement))throw new D(V,0);if(V.l.constructor.call(this),this.i=En(s,V),this.c=s=new Fl,this.B=!1,s.addEventListener(s.A.ie,this.N,!1,this),!C(i,Element))throw new D(V,0,i);s=this.P=i.ownerDocument.createElement("div");var _n=s.style;if(_n.position="relative",_n.height=s.style.width="100%",_n.overflow="hidden",_n.webkitTapHighlightColor="transparent",_n.webkitTapHighlightColor!=="transparent"&&(_n.webkitTapHighlightColor="rgba(0,0,0,0)"),i.appendChild(s),this.b=new vk(this.P,this.i),this.b.addEventListener(this.b.A.ie,this.N,!1,this),i=this.a=new qj(this.i.layers),i.addEventListener(i.A.he,this.S,!1,this),i.addEventListener(i.A.ee,this.S,!1,this),i.addEventListener(i.A.ge,this.S,!1,this),!this.j&&Fn(this),this.g=null,this.a.add(o,0),this.f=this.u(this.i.engineType!=null?this.i.engineType:hk,this.i),this.v=A(this.v,this),o=this.i.imprint,o!==B&&typeof o!="object")throw new D(V,1,"imprint");Gn&&(o||(o={}),o.mark=o.mark||"GS (2022) 5659"),this.m=o===null?o:new zj(this,o),o=this.i.autoColor,this.K=o===B||!!o,Hn(this),(o=this.i.zoom)&&(_e.zoom=o),(o=this.i.bounds)&&(_e.bounds=o),(o=this.i.center)&&(_e.position=o),this.c.Qb(_e)}u(V,F),t("H.Map",V),V.prototype.draggable=!1;function En(i,o){if(i){var s=i.pixelRatio;if(s===B)i.pixelRatio=Te();else if(!(0<s))throw new D(o,0,"pixelRatio: "+s)}else i={},i.pixelRatio=Te();return i.renderBaseBackground||(i.renderBaseBackground={lower:3,higher:2}),i}V.prototype.o=function(){this.K=!1,this.m&&this.m.D(),this.f.dispose(),this.c.D(),this.b.D(),this.j.D(),this.s.D(),this.a.D();var i=this.P;i.parentNode.removeChild(i),delete this.P,F.prototype.o.call(this)},V.prototype.L=function(){return this.P},V.prototype.getElement=V.prototype.L,V.prototype.Ua=function(){return this.i.pixelRatio},V.prototype.getPixelRatio=V.prototype.Ua;function Hn(i){i.m&&i.K&&i.m.ni({invert:i.g&&i.g.zl})}V.prototype.S=function(i){var o=i.added,s=i.removed;o&&o.ka()&&o.ka().ia(this),s&&s.ka()&&s.ka().ia(null),s===this.j&&(delete this.j,delete this.s),s===this.g&&(this.g=null),i.idx===0&&(this.dispatchEvent(new aj(this.A.gf,this.g=i.type!==this.a.A.ge?o:0<this.a.a.length?this.a.get(0):y,i.type!==this.a.A.ee?s:1<this.a.a.length?this.a.get(1):y)),Hn(this))},V.prototype.N=function(i){i.modifiers&&(this.B||(In(this,"start"),this.B=!0),In(this,"",i),this.ea&&x.clearTimeout(this.ea),this.ea=x.setTimeout(this.v,333))};function In(i,o,s){i.dispatchEvent(s?new bj(i.A.Ji,s.newValue,s.oldValue,s.modifiers):i.A.Ji+o)}V.prototype.v=function(){In(this,"end"),this.B=!1},V.prototype.kg=function(i,o){return this.f.getCapabilities().lookAt&&this.c.Qb({position:i},!!o),this},V.prototype.setCenter=V.prototype.kg,V.prototype.Za=function(){var i=this.c.gb();return i?i.position:y},V.prototype.getCenter=V.prototype.Za,V.prototype.$e=function(i,o){return this.c.$e(i,!!o),this},V.prototype.setZoom=V.prototype.$e,V.prototype.kb=function(){return this.c.kb()},V.prototype.getZoom=V.prototype.kb,V.prototype.ud=function(i,o,s){this.f.zoomAt(i,o,s)},V.prototype.zoomAt=V.prototype.ud,V.prototype.an=function(){return this.b},V.prototype.getViewPort=V.prototype.an,V.prototype.$m=function(){return this.c},V.prototype.getViewModel=V.prototype.$m,V.prototype.rm=function(){return this.a},V.prototype.getLayers=V.prototype.rm,V.prototype.mm=function(){return this.m},V.prototype.getImprint=V.prototype.mm,V.prototype.capture=function(i,o,s,_e,_n,_o){function _a(Ay,Py){fy?Ay.cancel():(wy.save(),Py.capture(xy,oy,function(Iy){wy.restore(),Ay.done(Iy)},function(Iy){Ay.done(null,Iy),_u(null)}))}function _u(Ay){fy||(fy=!0,i(Ay))}var _h=this.f,ty=_h.getCapabilities(),oy=this.i.pixelRatio,hy=this.b,fy=!1,vy=this,xy,wy;if(!Da(i))throw new D(this.capture,0,i);s=s||0,_e=_e||0,_n=_n||hy.width,_o=_o||hy.height;var By=xd(0,wd(s,_n)),Sy=xd(0,wd(_e,_o));s=wd(hy.width,xd(s,_n)),_e=wd(hy.height,xd(_e,_o)),ty.capture?_h.capture(By,Sy,s,_e).then(function(Ay){var Py=vy.m,Iy=o||[];xy=Ay,wy=xy.getContext("2d"),xy.style.width=xy.width/oy+"px",xy.style.height=xy.height/oy+"px";var $y=new Kk(10,_a);Iy=Iy.concat(Py).filter(function(Ky){return Da(Ky&&Ky.capture)}),Iy.length?(Ay=Iy.pop(),Iy.forEach(function(Ky){$y.push(Ky,jd)}),$y.push(Ay,A(_u,vy,xy)),Dk($y)):_u(xy)},function(){_u(y)}):i(null)},V.prototype.capture=V.prototype.capture,V.prototype.bm=function(){return this.f},V.prototype.getEngine=V.prototype.bm,V.prototype.u=function(i,o){if(o=o?En(o,this.u):this.i,Hn(this),i===ik.P2D)return new x.H.map.render.p2d.RenderEngine(this.b,this.c,this.a,o);if(i===ik.WEBGL)return new U(this.b,this.c,this.a,o);if(i===ik.HARP)return new x.H.map.render.harp.RenderEngine(this.b,this.c,this.a,o);throw new D(this.u,0,i)},V.prototype.cf=function(i,o,s,_e,_n){if(o=uc(o)?C(o,K,this.cf,1,o)&&o:this.c.gb().bounds.J(),_n=_n||this.g,!C(_n,nl))throw new D(this.cf,4);var _o=_n.ka(),_a=this.Ua(),_u=_n.tileSize;if(2<=_a&&256<_u&&_o instanceof Ck&&(_u/=2),_a=this.kb(),_u=Math.log2(_u)-8,s=uc(s)?+s:_a,_e=uc(_e)?+_e:_a,!(s<=_e))throw new D(this.cf,B,"!(min <= max)");_a=_o.min;var _h=_o.max,ty=this.f.type===ik.WEBGL?zd:yd;if(s=Zd(ty(s)-_u,_a,_h),_e=Zd(ty(_e)-_u,_a,_h),!(_o&&C(_o,T)&&md()&&_o.m()))throw new Yc(this.cf,"Storing is not supported");return new yk(_n,_o,o,s,_e,i)},V.prototype.storeContent=V.prototype.cf;function Jn(i){vj.call(this,i)}u(Jn,vj),Jn.prototype.g=function(){xj(this,2)},Jn.prototype.f=function(){xj(this,4)},V.prototype.yl=function(i){return i=new Jn(i),ld().clear(A(i.g,i),A(i.f,i)),i},V.prototype.clearContent=V.prototype.yl,V.prototype.Cg=function(i,o){var s=this.a,_e=s.indexOf(i),_n=o!==+o;return o=_n?s.a.length-1:o,0>_e?s.add(i,o):_e-o&&(s.cc(_e),s.add(i,_n?o-1:o)),this},V.prototype.addLayer=V.prototype.Cg,V.prototype.Te=function(i){var o=this.a.indexOf(i);return i!==this.g&&i!==this.j&&o!==-1&&this.a.cc(o),this},V.prototype.removeLayer=V.prototype.Te,V.prototype.rd=function(i){return this.g!==i&&(this.a.a.length&&this.a.get(0)!==this.j?this.a.set(0,i):this.a.add(i,0),this.g=i),this},V.prototype.setBaseLayer=V.prototype.rd,V.prototype.Pl=function(){return this.g},V.prototype.getBaseLayer=V.prototype.Pl,V.prototype.Aa=function(i){if(!mg(i))throw new D(this.Aa,0,i);return(i=this.f.geoToScreen(i))?zf(i):y},V.prototype.geoToScreen=V.prototype.Aa,V.prototype.Ra=function(i,o){var s;if(s=+E(i)||2*+E(o))throw new D(this.Ra,s-1,arguments[s-1]);return(s=this.f.screenToGeo(i,o))?ng(s):y},V.prototype.screenToGeo=V.prototype.Ra,V.prototype.hg=function(i,o){return this.f.screenToLookAtData(i,o)},V.prototype.screenToLookAtData=V.prototype.hg,V.prototype.ba=function(i){if(!C(i,M))throw new D(this.ba,0,i);return!this.j&&Fn(this),this.s.Xb().ba(i),i},V.prototype.addObject=V.prototype.ba,V.prototype.Da=function(i){if(!C(i,M))throw new D(this.Da,0,i);return!this.j&&Fn(this),this.s.Xb().Da(i),i},V.prototype.removeObject=V.prototype.Da,V.prototype.Pa=function(i){return!this.j&&Fn(this),this.s.Xb().Pa(i)},V.prototype.getObjects=V.prototype.Pa,V.prototype.Sb=function(i){var o;zc(i,this.Sb,0,i),!this.j&&Fn(this);var s=i.length;for(o=0;o<s;o++)this.ba(i[o]);return this},V.prototype.addObjects=V.prototype.Sb,V.prototype.od=function(i){var o;zc(i,this.od,0,i),!this.j&&Fn(this);var s=i.length;for(o=0;o<s;o++)this.Da(i[o]);return this},V.prototype.removeObjects=V.prototype.od,V.prototype.Md=function(i,o,s){var _e;if(_e=+E(i)||2*+E(o))throw new D(this.Md,_e-1,arguments[_e-1]);this.f.getObjectsAt(i,o,!0,function(_n){s(_n[0])})},V.prototype.getObjectAt=V.prototype.Md,V.prototype.Ba=function(i,o,s,_e){var _n;if(_n=+E(i)||2*+E(o))throw new D(this.Md,_n-1,arguments[_n-1]);this.f.getObjectsAt(i,o,!1,s,!!_e)},V.prototype.getObjectsAt=V.prototype.Ba,V.prototype.dh=function(i,o,s){var _e=s||jf;s=_e.visiblesOnly;var _n=_e.zoom;_e=_e.types;var _o=nh.ANY;C(i,O,this.dh,0,"area"),xc(o,"Function",this.dh,1,"callback"),this.s.Pa(i,uc(s)?!!s:!0,uc(_n)?+_n:this.c.kb(),uc(_e)?_e&_o:_o,o)},V.prototype.getObjectsWithin=V.prototype.dh;function Fn(i){i.s=new N({max:24,engineType:i.i.engineType}),i.j=new rl(i.s,i.i),i.a.add(i.j)}var Kn=Nl.HARP,ik={P2D:Nl.P2D,WEBGL:Nl.WEBGL,HARP:Kn};V.EngineType=ik,V.prototype.A={Fo:"mapviewchangestart",Ji:"mapviewchange",Ki:"mapviewchangeend",gf:"baselayerchange"};function Ln(i,o){Ln.l.constructor.call(this,i,o)}u(Ln,rh),t("H.map.Marker",Ln),Ln.prototype.type=nh.MARKER,Ln.prototype.ea=1,Ln.prototype.pa=function(i){if(i!==kh.VISUAL||this.Bk===1||this.icon.getState()===1)var o=Ln.l.pa.call(this,i);return o||!1},Ln.prototype.invalidate=Ln.prototype.pa,p=Ln.prototype,p.Bk=0,p.Vj=function(i){return C(i,Uj)},p.qh=!1,p.pk=function(){this.pa(kh.VISUAL)},p.Cc=function(i){var o=this.icon;return this.qh&&(o.removeEventListener("statechange",this.pk,!1,this),delete this.qh),o&&(this.Bk=o.getState()),Ln.l.Cc.call(this,i),i.getState()===0&&(this.qh=!0,Ee(i,"statechange",this.pk,!1,this)),this},Ln.prototype.setIcon=Ln.prototype.Cc,Ln.prototype.b=function(i){return new Uj(i.svg,i)},Ln.prototype.W=function(){var i=this.getIcon(),o=i.oo||0,s=Ln.l.forWorkerMessage.call(this),_e=s.properties.icon;return _e&&0<o&&Ya(_e,{stick_color:i.no,stick_height:o}),s},Ln.prototype.forWorkerMessage=Ln.prototype.W;function sh(i,o,s){var _e="anonymous",_n=1;this.c=A(this.c,this),M.call(this,s),this.aa(i),s&&(i="crossOrigin",i in s&&(_e=s[i]),i="opacity",i in s&&(_n=s[i])),this.Qk(o,_e),this.dc(_n)}u(sh,M),t("H.map.Overlay",sh),sh.prototype.type=nh.OVERLAY,sh.prototype.J=function(){return this.a},sh.prototype.getBoundingBox=sh.prototype.J,sh.prototype.ae=function(i){return C(i,K,this.ae,0,i),this.aa(i)},sh.prototype.setBoundingBox=sh.prototype.ae,sh.prototype.da=function(){return this.a},sh.prototype.getGeometry=sh.prototype.da,sh.prototype.aa=function(i){var o=this.a,s=!o;return C(i,K,this.aa,0,i),(s||!o.ga(i))&&(this.a=i,s||this.pa(kh.SPATIAL)),this},sh.prototype.setGeometry=sh.prototype.aa,sh.prototype.Lc=function(){return this.b.getData()},sh.prototype.getBitmap=sh.prototype.Lc,sh.prototype.Qk=function(i,o){var s=this.b;return s&&s.getState()!==1&&s.cancel(),this.b=new Pj(i,this.c,!0,B,o),this},sh.prototype.setBitmap=sh.prototype.Qk,sh.prototype.c=function(i,o){this.b=o,i===1&&this.pa(kh.VISUAL)},sh.prototype.Oc=function(){return this.f},sh.prototype.getOpacity=sh.prototype.Oc,sh.prototype.dc=function(i){var o=this.f,s=2>o;if(0<=i&&1>=i)i!==o&&(this.f=i,s&&this.pa(kh.VISUAL));else throw new D(this.dc,0);return this},sh.prototype.setOpacity=sh.prototype.dc,sh.prototype.W=function(){var i=sh.l.W.call(this);return i.geometry=zi(this.a).W(),i.properties.overlay=!0,i},sh.prototype.forWorkerMessage=sh.prototype.W;function Mn(i,o){Mn.l.constructor.call(this,i,o)}u(Mn,nl),t("H.map.layer.MarkerTileLayer",Mn);var Nn={markers:[],total:0,requested:0};function On(i,o,s,_e,_n){var _o=zd(s);i.pixelProjection.Ka(_o),o=i.Qd(i.we(o),_o),s=i.Ge(o,o.left>o.right,~~s,_e,_n),i=s.tiles,s=s.total,_e=i.length,_n=[];var _a;for(_a=0;_a<_e;_a++)for(o=i[_a],_o=o.data.length;_o--;)_n.push(o.data[_o]);return{markers:_n,total:i.length,requested:s}}Mn.prototype.yc=function(i,o,s,_e){return this.la.providesDomMarkers()?Nn:On(this,i,o,s,_e)},Mn.prototype.requestMarkers=Mn.prototype.yc,Mn.prototype.xc=function(i,o,s,_e){return this.la.providesDomMarkers()?On(this,i,o,s,_e):Nn},Mn.prototype.requestDomMarkers=Mn.prototype.xc;function Pn(i,o,s){var _e,_n=6;if(o){for(_e=' expected close to: "'+o;_n--;)o=i.a.next(),o!==-1&&(_e+=String.fromCharCode(o));_e+='"'}throw new D(Qn,0,"- Malformed WKT: "+(_e?s+_e:"unexpected end of stream"))}function Rn(i,o){var s=i.next();o=o?")":"(",s!==o&&Pn(i,s,'"'+o+'"')}function Sn(i){return Tn(i)===","?(i.next(),!0):!1}function Un(i,o,s,_e,_n){var _o,_a,_u=2+o+s;for(_a=1;_a<=_u;_a++)(s=i.next())?(_o=+s)!==_o?Pn(i,s,"number"):_a===1?_e[_n+1]=_o:_a===2?_e[_n]=_o:_a===3&&(_e[_n+2]=_o):Pn(i,s);o||(_e[_n+2]=0)}var Vn=[];function Wn(i,o,s,_e){return _e||Rn(i,0),Un(i,o,s,Vn,0),_e||Rn(i,1),new lg(Vn[0],Vn[1],o?Vn[2]:B)}function Xn(i,o,s){var _e=[];Rn(i,0);do Un(i,o,s,_e,_e.length);while(Sn(i));return Rn(i,1),new L(_e)}function Yn(i,o,s){Rn(i,0);var _e=Xn(i,o,s);if(Sn(i)){var _n=[];do _n.push(Xn(i,o,s));while(Sn(i))}return Rn(i,1),new O(_e,_n)}var Zn=[],$n=[Yn],ao=[Wn],bo={POINT:ao,LINESTRING:[Xn],POLYGON:$n,MULTIPOINT:[Wn,Ti],MULTILINESTRING:[Xn,ih],MULTIPOLYGON:[Yn,Gi],GEOMETRY:Zn,GEOMETRYCOLLECTION:Zn,CIRCULARSTRING:Zn,COMPOUNDCURVE:Zn,CURVEPOLYGON:Zn,MULTICURVE:Zn,MULTISURFACE:Zn,CURVE:Zn,SURFACE:Zn,POLYHEDRALSURFACE:Zn,TIN:Zn,TRIANGLE:Zn},co={Z:1,M:2,ZM:3};function Qn(i){i=new eo(i);var o,s=i.next();if((o=bo[s.toUpperCase()])||Pn(i,s,"type name"),o!==Zn){s=Tn(i),s=co[s.toUpperCase()];var _e=s&1,_n=s>>1;if(_e|_n&&i.next(),s=Tn(i),s==="EMPTY")if(i.next(),_e=o[1])var _o=new _e([]);else o!==ao&&(_o=new L([]),o===$n&&(_o=new O(_o)));else if(s==="("){if(_o=o[0],o=o[1],o){var _a=[];if(Rn(i,0),_o===Wn){var _u=Tn(i)!=="(";do _a.push(_o(i,_e,_n,_u));while(Sn(i))}else do _a.push(_o(i,_e,_n));while(Sn(i));Rn(i,1),_e=new o(_a)}else _e=_o(i,_e,_n);_o=_e}else Pn(i,s,'"Z", "M", "ZM", "(" or "EMPTY"');i.next()&&Pn(i,s,"end of stream")}return _o||y}function eo(i){this.a=i}function Tn(i){var o=i.b;if(o===B){for(o=i.a;o.Kb()===fo;)o.next();if(go[o.Kb()])o=o.next(),o=o===ho?"":String.fromCharCode(o);else{o.de();do o.next();while(!go[o.Kb()]);o=String.fromCharCode.apply(null,o.Dd())}i.b=o}return o}eo.prototype.next=function(){var i=Tn(this);return i!==""&&delete this.b,i};var fo=32,ho=-1,io={Jo:fo,Do:40,Io:41,Ao:44,Bo:ho},go=Object.keys(io).reduce(function(i,o){return i[io[o]]=!0,i},nc());function jo(){}t("H.util.ICharStream",jo),jo.prototype.next=function(){},jo.prototype.de=function(){},jo.prototype.Dd=function(){},jo.prototype.Kb=function(){};function ko(i){this.c=String(i),this.f=0,this.a=[],this.b=!1}t("H.util.CharStream",ko),ko.prototype.next=function(){var i=this.c.charCodeAt(this.f++);return i=isNaN(i)?-1:i,this.b&&this.a.push(i),i},ko.prototype.de=function(){this.b=!0,this.a=[]},ko.prototype.Dd=function(){var i=this.a.slice();return this.b=!1,this.a=[],i},ko.prototype.Kb=function(){var i=this.c.charCodeAt(this.f);return isNaN(i)?-1:i},t("H.util.wkt.toGeometry",function(i){return Qn(new ko(i))});function lo(i,o){lo.l.constructor.call(this,Hi,o),this.ae(i)}u(lo,uh),t("H.map.Rect",lo),lo.prototype.ae=function(i){if(!C(i,K))throw new D(this.ae,0,i);i.ga(this.oa)||(this.oa=this.B=i,this.a!==y&&lo.l.aa.call(this,zi(i)))},lo.prototype.setBoundingBox=lo.prototype.ae,lo.prototype.J=function(){return this.B},lo.prototype.getBoundingBox=lo.prototype.J,lo.prototype.aa=function(){return this},lo.prototype.setGeometry=lo.prototype.aa,lo.prototype.da=function(){return this.a===Hi&&lo.l.aa.call(this,zi(this.oa)),this.a},lo.prototype.getGeometry=lo.prototype.da;function mo(){return Hf("H-core","1.38.0","8be3148",{region:"row"})}t("H.buildInfo",mo);var Gn=mo().region==="cn",hk=ik[Gn?"HARP":"WEBGL"],no,oo="maps".concat("js-"),po,qo,ro,so,to;if(po=x.document.querySelector('script[src*="'+oo+'"]'),!po){for(qo=x.document.getElementsByTagName("script"),so=new RegExp("^.*"+oo),to=0,ro=qo.length;to<ro;to++)if(so.test(qo[to].src)){po=qo[to];break}}no=po?po.src.replace(/\/[^\/]*$/,"/"):"",t("H.getScriptPath",function(){return no});function uo(){var i=decodeURIComponent(no);if(i){i=i[i.length-1]==="/"?i.substring(0,i.length-1):i;var o=x.document,s="";o?(o=o.createElement("a"),o.href=i,s=o.href):/[\w]+:\/\//.test(i)&&(s=i),i=new URL(s),i.pathname+=i.pathname[i.pathname.length-1]==="/"?"styles":"/styles",i=i.toString()}else i="https://js.api.here.com/v3/3.1.38.0/styles";return i}t("H.getStylePath",uo);function vo(i){var o=i.ownerDocument;o=o.documentElement||o.body.parentNode||o.body;try{var s=i.getBoundingClientRect()}catch{s={top:0,right:0,bottom:0,left:0,height:0,width:0}}return{x:s.left+(typeof window.pageXOffset=="number"?window.pageXOffset:o.scrollLeft),y:s.top+(typeof window.pageYOffset=="number"?window.pageYOffset:o.scrollTop)}}var wo=(function(){return this}).apply(null);function xo(i,o,s,_e,_n,_o){if(isNaN(i))throw Error("x needs to be a number");if(isNaN(o))throw Error("y needs to be a number");if(isNaN(s))throw Error("pointer must have an id");this.viewportX=i,this.viewportY=o,this.target=null,this.id=s,this.type=_e,this.dragTarget=null,this.button=uc(_n)?_n:-1,this.buttons=uc(_o)?_o:0,this.a=this.button}t("H.mapevents.Pointer",xo);function yo(i,o,s){if(isNaN(o))throw Error("x needs to be a number");if(isNaN(s))throw Error("y needs to be a number");i.viewportX=o,i.viewportY=s}xo.prototype.pm=function(){return this.a},xo.prototype.getLastChangedButton=xo.prototype.pm;function zo(i,o){i.a=o,i.buttons|=Ao[+o]||0}function Bo(i,o){i.a=o,i.buttons&=~(Ao[+o]||0)}var Ao=[1,4,2],Co={NONE:-1,LEFT:0,MIDDLE:1,RIGHT:2};xo.Button=Co;function Do(i,o,s,_e,_n,_o,_a){Do.l.constructor.call(this,i),this.pointers=o,this.changedPointers=s,this.targetPointers=_e,this.currentPointer=_n,this.originalEvent=_a,this.target=_o}u(Do,sd),t("H.mapevents.Event",Do);function Eo(i){this.a=i instanceof Array?i.slice(0):[]}p=Eo.prototype,p.clear=function(){this.a.splice(0,this.a.length)},p.length=function(){return this.a.length},p.indexOf=function(i){for(var o=this.a.length;o--;)if(this.a[o].id===i)return o;return-1};function Fo(i,o){return o=i.indexOf(o),o!==-1?i.a[o]:null}p.remove=function(i){return i=this.indexOf(i),i!==-1?this.a.splice(i,1)[0]:null};function Go(i,o){for(var s=i.a.length,_e=[];s--;)i.a[s].type!==o&&_e.push(i.a[s]);i.a=_e}function Ho(i,o){for(var s=i.a.length;s--;)if(i.a[s].dragTarget===o)return!0;return!1}p.push=function(i){if(i instanceof xo)return this.a.push(i);throw Error("list needs a pointer")},p.Ha=function(){return this.a},p.clone=function(){return new Eo(this.a)};function Io(i,o,s){if(s=s||{},!(i instanceof V))throw Error("events: map instance required");if(!(o instanceof Array))throw Error("events: map array required");nd.call(this),this.Ng=s.Ng||300,this.$i=s.$i||50,this.al=s.al||50,this.bl=s.bl||500,this.vh=s.vh||900,this.uh=s.uh||8,this.map=i,this.s=this.map.b,this.f=this.s.element,this.B=o,this.a=new Eo,this.b=new Eo,this.j={},this.c=null,this.u=!0,this.R={},this.g={},this.m=null,this.pe=A(this.pe,this),this.S={pointerdown:this.Cl,pointermove:this.Dl,pointerup:this.El,pointercancel:this.Bl},Jo(this)}u(Io,nd);function Jo(i,o){var s,_e=i.B.length;for(s=0;s<_e;s++){var _n=i.B[s],_o=_n.listener;typeof _o=="function"&&(o?(_n.target||i.f).removeEventListener(_n.Na,_o):(_n.target||i.f).addEventListener(_n.Na,_o))}}function Ko(i,o,s){var _e;if(typeof i.S[o]=="function"){o!=="pointermove"&&(i.u=!0);var _n=0;for(_e=i.b.length();_n<_e;_n++){var _o=i.b.a[_n]||null;i.f.contains(s.composedPath()[0])?Lo(i,_o,i.gj.bind(i,s,o,_o)):i.gj(s,o,_o,null)}}i.b.clear()}p=Io.prototype,p.gj=function(i,o,s,_e){Mo(s.id,this.R),this.S[o].call(this,s,_e,i)};function Lo(i,o,s){if(i.c===o)s(o.target);else{var _e=i.s,_n=o.viewportX;if(o=o.viewportY,0>_n||0>o||_n>=_e.width||o>=_e.height)s(y);else{var _o=i.map;_o.Md(_n,o,function(_a){s(_a||_o)})}}}p.El=function(i,o,s){var _e=i.id;i.target=o,No(this,i,s),Oo(this,o,"pointerup",s,i),i.type!=="mouse"&&Oo(this,o,"pointerleave",s,i),o=this.j[i.id];var _n={x:i.viewportX,y:i.viewportY},_o=s.timeStamp,_a=i.target,_u=this.m;o&&o.target===_a&&o.Oe.Ta(_n)<this.al&&_o-o.Ai<this.bl?(Oo(this,_a,"tap",s,i),_u&&_u.target===_a&&_o-_u.Ai<this.Ng?_u.Oe.Ta({x:i.viewportX,y:i.viewportY})<this.$i&&(Oo(this,_a,"dbltap",s,i),this.m=null):this.m={target:_a,Oe:new G(i.viewportX,i.viewportY),Ai:s.timeStamp}):this.m=null,this.j={},Mo(_e,this.g)};function No(i,o,s){o===i.c&&(Oo(i,o.dragTarget,"dragend",s,o),i.c=null,Mo(o.id,i.R)),o.dragTarget=null}p.pe=function(i,o){var s=this;Oo(this,i.dragTarget,"drag",o,i),Mo(i.id,this.R),this.R[i.id]=setTimeout(function(){s.pe(i,o)},150)};function Mo(i,o){o[i]&&(o[i].timeout?clearTimeout(o[i].timeout):clearTimeout(o[i]),delete o[i])}function Po(i,o,s){var _e=o.target,_n=new G(o.viewportX,o.viewportY),_o=o.id;Mo(_o,i.g);var _a=setTimeout(function(){_e&&_e===o.target&&_n.Ta({x:o.viewportX,y:o.viewportY})<i.uh&&(Oo(i,_e,"longpress",s,o),delete i.j[o.id])},i.vh);i.g[_o]={timeout:_a,Oe:_n}}p.Dl=function(i,o,s){var _e=i.dragTarget,_n=i.id,_o=i.target;i.target=o,_o!==o&&(Oo(this,_o,"pointerleave",s,i),Oo(this,o,"pointerenter",s,i)),_e?this.c?(this.pe(i,s),this.g[_n]&&this.g[_n].Oe.Ta({x:i.viewportX,y:i.viewportY})>this.uh&&Mo(_n,this.g)):this.u?this.u=!1:(this.c=i,Oo(this,_e,"dragstart",s,i),this.pe(i,s),delete this.j[_n],this.u=!0):(!this.c||this.c&&this.c.dragTarget!==o&&this.c.dragTarget!==this.map)&&Oo(this,o,"pointermove",s,i)},p.Cl=function(i,o,s){var _e=!(/^(?:mouse|pen)$/.test(i.type)&&s.button!==0);if(o){i.target=o,this.j[i.id]={Oe:new G(i.viewportX,i.viewportY),target:i.target,Ai:s.timeStamp},i.type!=="mouse"&&Oo(this,o,"pointerenter",s,i);var _n=Oo(this,o,"pointerdown",s,i);!this.c&&_e&&(o.draggable&&!Ho(this.a,o)?i.dragTarget=o:!this.map.draggable||_n.defaultPrevented||Ho(this.a,this.map)||(i.dragTarget=this.map)),Po(this,i,s)}},p.Bl=function(i,o,s){var _e=i.id;i.target=null,o?(Oo(this,o,"pointerleave",s,i),Oo(this,o,"pointercancel",s,i)):Oo(this,this.map,"pointercancel",s,i),No(this,i,s),this.j={},Mo(_e,this.g)};function Oo(i,o,s,_e,_n){if(o&&typeof o.dispatchEvent=="function"){var _o=Do,_a=i.a.Ha(),_u=i.b.Ha();i=i.a;var _h,ty=i.a.length,oy=[];for(_h=0;_h<ty;_h++)i.a[_h].target===o&&oy.push(i.a[_h]);_o=new _o(s,_a,_u,oy,_n,o,_e),_n.button=/^(?:longpress|(?:dbl)?tap|pointer(?:down|up))$/.test(s)?_n.a:Co.NONE,o.dispatchEvent(_o)}return _o}p.o=function(){Jo(this,!0),this.a.clear(),this.b.clear();var i=this.R,o;for(o in i)Mo(o,i);i=this.g;for(var s in i)Mo(s,i);delete this.f,delete this.B,delete this.a,delete this.b,delete this.map,this.m=null,delete this.j,this.c=null,nd.prototype.o.call(this)};function Qo(i){this.i=A(this.i,this),Io.call(this,i,[{Na:"touchstart",listener:this.i},{Na:"touchmove",listener:this.i},{Na:"touchend",listener:this.i},{Na:"touchcancel",listener:this.i}]),this.K={touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",touchcancel:"pointercancel"},this.v=(i=(i=i.m)?i.L():null)?Array.prototype.slice.call(i.querySelectorAll("a"),0):[]}u(Qo,Io),Qo.prototype.i=function(i){var o=i.touches,s=this.a.length(),_e;if(i.type==="touchstart"&&s>=o.length){for(s=this.a.clone(),_e=o.length;_e--;)s.remove(o[_e].identifier);for(_e=s.length();_e--;)this.a.remove((s.a[_e]||null).id);this.b=s,Ko(this,"pointercancel",i),this.b.clear()}if(this.K[i.type]){o=vo(this.s.element),s=i.type,_e=i.changedTouches;var _n=_e.length,_o;for(this.b.clear(),_o=0;_o<_n;_o++){var _a=_e[_o],_u=Fo(this.a,_a.identifier),_h=_a.pageX-o.x,ty=_a.pageY-o.y;if(_u)if(s==="touchmove"){_a=Math.abs(_u.viewportX-_h);var oy=Math.abs(_u.viewportY-ty);(1<_a||1<oy||_a===1&&oy===1)&&(yo(_u,_h,ty),this.b.push(_u))}else s==="touchend"&&(this.a.remove(_u.id),this.b.push(_u),Bo(_u,Co.LEFT));else _u=new xo(_h,ty,_a.identifier,"touch",Co.LEFT,1),this.a.push(_u),this.b.push(_u)}Ko(this,this.K[i.type],i),this.v.indexOf(i.target)===-1&&i.preventDefault()}},Qo.prototype.o=function(){this.v=null,Io.prototype.o.call(this)};function Ro(i){var o=So(this);(window.PointerEvent||window.MSPointerEvent)&&o.push({Na:"MSHoldVisual",listener:"prevent"}),Io.call(this,i,o)}u(Ro,Io);function So(i){var o=!!window.PointerEvent,s,_e,_n=[];return i.i=A(i.i,i),"MSPointerDown MSPointerMove MSPointerUp MSPointerCancel MSPointerOut MSPointerOver".split(" ").forEach(function(_o){s=_o.toLowerCase().replace(/ms/g,""),_e=o?s:_o,_n.push({Na:_e,listener:i.i,target:/^pointer(up|move)$/.test(s)?window:null})}),_n}var To={2:"touch",3:"pen",4:"mouse"};Ro.prototype.i=function(i){var o=window.PointerEvent?i.type:i.type.toLowerCase().replace(/ms/g,""),s=vo(this.f),_e=Fo(this.a,i.pointerId),_n=i.pageX-s.x;s=i.pageY-s.y;var _o=To[i.pointerType]||i.pointerType;if($c&&x.getComputedStyle(this.s.element).direction==="rtl"&&(_n-=(x.devicePixelRatio-1)*this.s.width),!(_e||/^pointer(up|out|cancel)$/.test(o)||_o==="touch"&&o!=="pointerdown")){_e={x:_n,y:s};var _a=i.pointerType;typeof _a=="number"&&(_a=To[_a]),_e=new xo(_e.x,_e.y,i.pointerId,_a,i.button,i.buttons),this.a.push(_e)}_e&&(/^pointer(up|cancel)$/.test(o)?(_o==="touch"&&this.a.remove(_e.id),Bo(_e,i.button)):o==="pointerdown"&&(i.pointerType==="touch"&&(Go(this.a,"mouse"),Go(this.a,"pen")),zo(_e,i.button)),this.b.push(_e),o!=="pointermove"?(yo(_e,_n,s),Ko(this,/^pointer(over|out)$/.test(o)?"pointermove":o,i)):(_e.viewportX!==_n||_e.viewportY!==s)&&(yo(_e,_n,s),Ko(this,o,i))),this.b.clear()};function Uo(i,o,s,_e){Uo.l.constructor.call(this,"contextmenu"),this.items=[],this.viewportX=i,this.viewportY=o,this.target=s,this.originalEvent=_e}u(Uo,sd),t("H.mapevents.ContextMenuEvent",Uo);function Vo(i){this.ih=A(this.ih,this),this.kh=A(this.kh,this),this.jh=A(this.jh,this),this.v=!1,this.i=-1,this.K=0,Vo.l.constructor.call(this,i,[{Na:"contextmenu",listener:this.ih},{target:i,Na:"longpress",listener:this.kh},{target:i,Na:"dbltap",listener:this.jh}])}u(Vo,Io),p=Vo.prototype,p.kh=function(i){var o=i.currentPointer;o.type==="touch"&&i.pointers.length===1&&Wo(this,o.viewportX,o.viewportY,i.originalEvent,i.target)},p.jh=function(i){i.currentPointer.type==="touch"&&(this.K=Date.now())},p.ih=function(i){var o=this;this.i===-1?this.i=setTimeout(function(){var s=vo(o.f),_e=i.pageX-s.x;s=i.pageY-s.y,o.i=-1,Wo(o,_e,s,i)},this.Ng):(clearInterval(this.i),this.i=-1),i.preventDefault()};function Wo(i,o,s,_e,_n){var _o=i.map,_a=Date.now()-i.K;_n?!i.v&&_a>i.vh&&(i.v=!0,_n.dispatchEvent(new Uo(o,s,_n,_e)),Ee(_o.L(),Xo,i.fj,!1,i)):_o.Md(o,s,i.zn.bind(i,o,s,_e))}p.zn=function(i,o,s,_e){_e=_e&&Da(_e.dispatchEvent)?_e:this.map,Wo(this,i,o,s,_e)},p.fj=function(){this.v&&(this.v=!1,this.map.dispatchEvent(new sd("contextmenuclose",this.map)))},p.o=function(){var i=this.map.L();clearInterval(this.i),i&&Le(i,Xo,this.fj,!1,this),Io.prototype.o.call(this)};var Xo=["mousedown","touchstart","pointerdown","wheel"];function Yo(i,o,s,_e,_n){Yo.l.constructor.call(this,"wheel"),this.delta=i,this.viewportX=o,this.viewportY=s,this.target=_e,this.originalEvent=_n}u(Yo,sd),t("H.mapevents.WheelEvent",Yo);function Zo(i){var o="onwheel"in document;this.ea=o,this.K=(o?"d":"wheelD")+"elta",this.i=A(this.i,this),Zo.l.constructor.call(this,i,[{Na:(o?"":"mouse")+"wheel",listener:this.i}]),this.v=this.map.b}u(Zo,Io),Zo.prototype.i=function(i){if(!i.ll){var o=vo(this.f),s=i.pageX-o.x;o=i.pageY-o.y;var _e=this.K,_n=i[_e+(_e+"Y"in i?"Y":"")],_o;if($c&&x.getComputedStyle(this.v.element).direction==="rtl"&&(s-=(x.devicePixelRatio-1)*this.v.width),_n){var _a=Math.abs,_u=_a(_n);_n=(!(_o=i[_e+"X"])||3<=_u/_a(_o))&&(!(_o=i[_e+"Z"])||3<=_u/_a(_o))?(+(0<_n)-+(0>_n))*(this.ea?1:-1):0}s=new Yo(_n,s,o,null,i),s.delta&&(i.stopImmediatePropagation(),i.preventDefault(),this.map.Md(s.viewportX,s.viewportY,this.N.bind(this,s)))}},Zo.prototype.N=function(i,o){var s=i.target=o||this.map,_e,_n;setTimeout(function(){s.dispatchEvent(i),i.c||(_e=i.originalEvent,_n=new x.WheelEvent("wheel",_e),_n.ll=!0,_e.target.dispatchEvent(_n))},0)};function $o(i){this.i=A(this.i,this),Io.call(this,i,[{Na:"mousedown",listener:this.i},{Na:"mousemove",listener:this.i,target:window},{Na:"mouseup",listener:this.i,target:window},{Na:"mouseover",listener:this.i},{Na:"mouseout",listener:this.i},{Na:"dragstart",listener:this.v}])}u($o,Io),$o.prototype.i=function(i){var o=i.type,s=vo(this.f);s={x:i.pageX-s.x,y:i.pageY-s.y};var _e;(_e=this.a.a[0]||null)||(_e=new xo(s.x,s.y,1,"mouse"),this.a.push(_e)),this.b.push(_e),yo(_e,s.x,s.y),/^mouse(?:move|over|out)$/.test(o)?Ko(this,"pointermove",i):(/^mouse(down|up)$/.test(o)&&(s=i.which-1,wo.RegExp.$1==="up"?Bo(_e,s):zo(_e,s)),Ko(this,o.replace("mouse","pointer"),i)),this.b.clear()},$o.prototype.v=function(i){i.preventDefault()};function ap(i){var o=i.b.element.style;if(bp.indexOf(i)!==-1)throw Error("InvalidArgument: map is already in use");this.a=i,bp.push(i),o.msTouchAction=o.touchAction="none",ad||!window.PointerEvent&&!window.MSPointerEvent?(this.c=new Qo(this.a),this.b=new $o(this.a)):this.c=new Ro(this.a),this.g=new Zo(this.a),this.f=new Vo(this.a),this.a.ob(this.D,this),nd.call(this)}u(ap,nd),t("H.mapevents.MapEvents",ap);var bp=[];Gc(bp),ap.prototype.D=function(){delete this.a,this.c.D(),this.g.D(),this.f.D(),this.b&&this.b.D(),bp.splice(bp.indexOf(this.a),1),nd.prototype.D.call(this)},ap.prototype.dispose=ap.prototype.D,ap.prototype.Ol=function(){return this.a},ap.prototype.getAttachedMap=ap.prototype.Ol;function cp(i,o){o=o===void 0?{}:o;var s;if(cp.l.constructor.call(this),dp.indexOf(i)!==-1)throw new D(cp,0,"events are already used");this.b=s=i.a,this.j=i,dp.push(i),s.draggable=!0,this.i=o.kinetics||{duration:600,ease:Zl},this.m=o.modifierKey||"Alt",this.enable(o.enabled),this.c=s.b,this.f=this.c.element,this.g=0,s.addEventListener("dragstart",this.Fh,!1,this),s.addEventListener("drag",this.dk,!1,this),s.addEventListener("dragend",this.Eh,!0,this),s.addEventListener("wheel",this.tk,!1,this),s.addEventListener("dbltap",this.nk,!1,this),s.addEventListener("pointermove",this.ek,!1,this),De(this.f,"contextmenu",this.ck,!1,this),i.ob(this.D,this)}u(cp,nd),t("H.mapevents.Behavior",cp);var dp=[];Gc(dp),cp.prototype.a=0;var ep={PANNING:1,PINCH_ZOOM:2,WHEEL_ZOOM:4,DBL_TAP_ZOOM:8,FRACTIONAL_ZOOM:16,TILT:32,HEADING:64};cp.Feature=ep;var fp=ep.PANNING,gp=ep.PINCH_ZOOM,hp=ep.WHEEL_ZOOM,ip=ep.DBL_TAP_ZOOM,jp=ep.FRACTIONAL_ZOOM,kp=ep.TILT,lp=ep.HEADING,mp=fp|gp|hp|ip|jp|kp|lp;cp.DRAGGING=fp,cp.WHEELZOOM=hp,cp.DBLTAPZOOM=ip,cp.FRACTIONALZOOM=jp;function np(i,o){if(i!==+i||i%1||0>i||2147483647<i)throw new D(o,0,"integer in range [0...0x7FFFFFFF] required")}cp.prototype.disable=function(i){var o=this.a;i!==B?(np(i,this.disable),o^=o&i):o=0,this.c.endInteraction(!0),this.a=o,this.b.draggable=0<(o&(fp|kp|lp|gp))},cp.prototype.disable=cp.prototype.disable,cp.prototype.enable=function(i){var o=this.a;i!==B?(np(i,this.enable),o|=i&mp):o=mp,this.a=o,this.b.draggable=0<(o&(fp|kp|lp|gp))},cp.prototype.enable=cp.prototype.enable,cp.prototype.isEnabled=function(i){return np(i,this.isEnabled),i===(this.a&i)},cp.prototype.isEnabled=cp.prototype.isEnabled;function op(i,o,s){var _e=o.currentPointer.type==="touch",_n=0,_o;if(_o=!_e){_o=i.m;var _a,_u=o.originalEvent;_u.getModifierState?_a=_u.getModifierState(_o):_a=!!_u[_o.replace(/^Control$/,"ctrl").toLowerCase()+"Key"],_o=_a}return _o?_n|=kp|lp:(_n|=fp,_e&&(o=o.pointers,o.length===2&&(_n|=gp|lp,s?55>Bd(o[0].viewportY-o[1].viewportY)&&(_n|=kp):i.nh&Hl.TILT&&(_n|=kp)))),_n&=i.a,(_n&kp?Hl.TILT:0)|(_n&lp?Hl.HEADING:0)|(_n&gp?Hl.ZOOM:0)|(_n&fp?Hl.COORD:0)}function pp(i){var o=i.pointers;return i=o[0],o=o[1],i=[i.viewportX,i.viewportY],o&&i.push(o.viewportX,o.viewportY),i}p=cp.prototype,p.nh=0,p.Fh=function(i){var o=op(this,i,!0);if(this.nh=o){var s=this.c;if(i=pp(i),s.startInteraction(o,this.i),s.interaction.apply(s,i),this.a&hp&&!(this.a&jp)&&(o=i[0],s=i[1],this.g)){i=this.b.kb();var _e=(0>this.g?Ad:zd)(i);i!==_e&&(this.g=0,qp(this,i,_e,o,s))}}},p.dk=function(i){var o=op(this,i,!1);if(o!==this.nh)i.originalEvent.type!=="pointerout"&&i.originalEvent.type!=="pointerover"&&(this.Eh(i),this.Fh(i));else if(o){o=this.c;var s=pp(i);o.interaction.apply(o,s),i.originalEvent.preventDefault()}},p.Eh=function(i){op(this,i,!1)&&this.c.endInteraction(!this.i)};function qp(i,o,s,_e,_n){var _o=+s-+o;if(i=i.b.c,isNaN(+o))throw Error("start zoom needs to be a number");if(isNaN(+s))throw Error("to zoom needs to be a number");_o!==0&&(i.startControl(null,_e,_n),i.control(0,0,6,0,0,0),i.endControl(!0,function(_a){_a.zoom=s}))}p.tk=function(i){if(!i.defaultPrevented&&this.a&hp){var o=i.delta,s=this.b.kb(),_e=this.b,_n=_e.f.type;_e=this.a&jp?s-o:(0>-o?Ad:zd)(s)-o,(_n===ik.P2D||_n===ik.WEBGL||_n===ik.HARP)&&(qp(this,s,_e,i.viewportX,i.viewportY),this.g=o),i.preventDefault()}},p.ek=function(){},p.nk=function(i){var o=i.currentPointer,s=this.b.kb(),_e=i.currentPointer.type,_n=this.b.f.type;(_n===ik.P2D||_n===ik.WEBGL||_n===ik.HARP)&&this.a&ip&&(i=_e==="mouse"?i.originalEvent.button===0?-1:1:0<i.pointers.length?1:-1,i=this.a&jp?s-i:(0>-i?Ad:zd)(s)-i,qp(this,s,i,o.viewportX,o.viewportY))},p.ck=function(i){return this.a&ip?(i.preventDefault(),!1):!0},p.D=function(){var i=this.b;i&&(i.draggable=!1,i.removeEventListener("dragstart",this.Fh,!1,this),i.removeEventListener("drag",this.dk,!1,this),i.removeEventListener("dragend",this.Eh,!0,this),i.removeEventListener("wheel",this.tk,!1,this),i.removeEventListener("dbltap",this.nk,!1,this),i.removeEventListener("pointermove",this.ek,!1,this),delete this.b),this.f&&(this.f.style.msTouchAction="",Le(this.f,"contextmenu",this.ck,!1,this),delete this.f),delete this.c,delete this.i,dp.splice(dp.indexOf(this.j),1),delete this.j,nd.prototype.D.call(this)},cp.prototype.dispose=cp.prototype.D,t("H.mapevents.buildInfo",function(){return Hf("H-mapevents","1.38.0","8be3148",{region:"row"})}),T.prototype.s=ca(3,function(i){var o=this.getCache(),s=this;if(i!==y){C(i,Pk,T.prototype.s,0);var _e=i}else _e=wl;_e!==o&&o.ma(function(_n,_o,_a){return s.Tb(_n)?(_e.add(_n,_o,_a),!0):!1}),this.S=_e}),qi.prototype.b=ca(2,function(i){this.g=i,i=this.getState(),i!==Uh.INIT&&i!==Uh.LOADING&&xi(this)});function rp(i,o){return Ya.apply(null,arguments),i}function sp(i,o){var s=x.console;s&&s.warn&&(i=wc(i)+" is deprecated and will be removed soon. ",o&&(i+=o),s.warn(i))}var tp=globalThis;sc("monospace serif");function up(){}up.prototype.pop=function(i){return this[i]||(this[i]=[]),this[i].pop()||document.createElement("canvas")},up.prototype.push=function(i,o){this[o]||(this[o]=[]),this[o].push(i)};var vp=new up;t("H.service.util.eval",function(a){return eval(a)});function W(i,o,s,_e,_n,_o){if(i&&o)this.ui(i),this.Ye(o),this.td(s),this.pi(_n),this.Nk(_o),this.ng(_e);else throw new D(W,B,'Parameters "scheme" and "host" must be specified')}t("H.service.Url",W);function wp(i,o){var s=x.document,_e,_n="";if(s){if(_n=s.createElement("a"),o){var _o=(_e=s.getElementsByTagName("base")[0])&&_e.href,_a=s.head,_u=_e||_a.appendChild(s.createElement("base"));_u.href=o}_n.href=i,_n=_n.href,o&&(_e?_e.href=_o:_a.removeChild(_u))}else/[\w]+:\/\//.test(i)&&(_n=i);_o=/(?:(\w+):\/\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\/[^?#]*)?(\?[^#]+)?(#.*)?/.exec(_n),i=_o[1],_a=_o[4],o=_o[5],_u=_o[6],s=_o[7],_e=_o[8],!_o[2]&&_a&&/@/.test(_a)&&(_a=_a.split("@")[1]),_o=W,_u=_u&&0<_u.length?_u.substr(1):"",_n={};var _h,ty;if(s)for(_h=/([?&]?([^=&+]+))(=([^&]+))?/g;ty=_h.exec(s);)_n[decodeURIComponent(ty[2])]=ty[4]?decodeURIComponent(ty[4]):void 0;return new _o(i,_a,_u,_n,isNaN(+o)?void 0:+o,_e&&0<_e.length?_e.substr(1):"")}W.parse=wp,W.prototype.clone=function(){var i={},o;for(o in this.a)i[o]=this.a[o];return new W(this.i,this.g,this.b,i,this.f,this.c)},W.prototype.clone=W.prototype.clone,W.prototype.ui=function(i){if(!i||typeof i!="string")throw new D(this.ui,0,'The "scheme" parameter must be a non-empty string.');return this.i=i,this},W.prototype.setScheme=W.prototype.ui,W.prototype.Om=function(){return this.i},W.prototype.getScheme=W.prototype.Om,W.prototype.Ye=function(i){if(!i||typeof i!="string"||i.charAt(0)==="-"||i.charAt(0)==="."||i.charAt(i.length-1)===".")throw new D(this.Ye,0,'The "host" parameter is not a valid host name.');return this.g=i,this},W.prototype.setHost=W.prototype.Ye,W.prototype.km=function(){return this.g},W.prototype.getHost=W.prototype.km,W.prototype.td=function(i){return this.b=i||void 0,this},W.prototype.setPath=W.prototype.td,W.prototype.Cm=function(){return this.b},W.prototype.getPath=W.prototype.Cm,W.prototype.ng=function(i){if(i)if(typeof i=="object")this.a=i;else throw new D(this.ng,0,'Parameter "params" must be an object.');else this.a={};return this},W.prototype.setQuery=W.prototype.ng,W.prototype.Mj=function(){return!xp(this)},W.prototype.hasQuery=W.prototype.Mj,W.prototype.getQuery=function(){return this.a},W.prototype.getQuery=W.prototype.getQuery,W.prototype.pi=function(i){if(i===void 0)this.f=i;else{var o=Zd(+i<<0,0,65535);if(o!=i)throw new D(this.pi,0,'Parameter "port" must be an integer in range [0...65535]');this.f=o}return this},W.prototype.setPort=W.prototype.pi,W.prototype.Fm=function(){return this.f},W.prototype.getPort=W.prototype.Fm,W.prototype.Nk=function(i){return this.c=i||void 0,this},W.prototype.setAnchor=W.prototype.Nk,W.prototype.fd=function(){return this.c},W.prototype.getAnchor=W.prototype.fd,W.prototype.I=function(i){if(typeof i!="object")throw new D(this.I,0,'Parameter "other" must be an object.');var o=this.a,s;for(s in i)i.hasOwnProperty(s)&&typeof i[s]!="function"&&(o[s]=i[s]);return this},W.prototype.mergeQuery=W.prototype.I,W.prototype.za=function(i){if(!i||typeof i!="string")throw new D(this.za,0,'Parameter "subDomain" must be a non-empty string');return i.substr(i.length-1)==="."&&(i=i.substr(0,i.length-1)),this.Ye(i+"."+this.g)},W.prototype.addSubDomain=W.prototype.za,W.prototype.F=function(i){if(!i||typeof i!="string")throw new D(this.F,0,'Parameter "subPath" must be a non-empty string');return this.td((this.b?this.b+"/":"")+i)},W.prototype.addSubPath=W.prototype.F,W.prototype.toString=function(){return[this.i+"://",this.g,this.f?":"+this.f:"",this.b||!xp(this)||this.c?"/":"",this.b?encodeURI(this.b):"",yp(this),this.c?"#"+encodeURIComponent(this.c):""].join("")},W.prototype.toString=W.prototype.toString;function zp(i){return encodeURIComponent(i).replace(/[!'()*]/g,function(o){return"%"+o.charCodeAt(0).toString(16)})}function yp(i){var o=[],s=i.a,_e={},_n;for(_n in s){if(s.hasOwnProperty(_n)&&typeof s[_n]!="function"){var _o=i.a[_n];_e.vd=zp(_n),C(_o,Ap)?_o.a.forEach(function(_a){return function(_u){o.push(_a.vd+"="+zp(_u))}}(_e)):C(_o,Bp)?o.push(_e.vd+"="+_o.b.map(function(_a){return zp(_a)}).join(_o.a)):o.push(_o===void 0?_e.vd:_e.vd+"="+zp(_o))}_e={vd:_e.vd}}return 0<o.length?"?"+o.join("&"):""}function Cp(i){var o=Hf("H-service","1.38.0","8be3148",{region:"row"});return i.a.xnlp="CL_JSMv3."+o.version,i}function xp(i){var o,s=0;for(o in i.a)if(i.a.hasOwnProperty(o)&&typeof i.a[o]!="function"&&(s++,0<s))break;return!s}function Dp(i,o){if(zc(i))for(var s=0;s<i.length;s++){var _e=i[s];if(!Ac(_e)&&!Dc(_e)){var _n="The Array does not contain only strings and numbers";break}}else _n="Not an Array";if(_n)throw new D(o,0,i);return i}function Ap(i){this.a=Dp(i,Ap)}W.MultiValueQueryParameter=Ap,Ap.prototype.Zm=function(){return this.a},Ap.prototype.getValues=Ap.prototype.Zm;function Bp(i,o){if(this.b=Dp(i,Bp),!/^[!\$\(\)\*\+,;]$/.test(o))throw new D(Bp,1,'Invalid delimiter "'+o+'"');this.a=o}W.DelimitedQuerySubValues=Bp;function Ep(i,o){C(i,Fp,Ep,0);var s={};Object.assign(s,o),s.min=s.min||0,s.max=s.max||20,s.tileSize=s.tileSize||512,s.getURL=function(_e,_n,_o){return i.C().clone().F(i.b.fg+"/"+(i.b.Xf+"/")+(_o+"/"+_e+"/"+_n+"/")+i.b.format).I(i.f).clone().I({size:s.tileSize})},Ck.call(this,s),this.i=i}u(Ep,Ck),t("H.service.rasterTile.Provider",Ep),Ep.prototype.ca=function(i,o){var s=this.i;return Gp(s.ca(),s.b.fg+"."+s.$(),o,i)},Ep.prototype.getCopyrights=Ep.prototype.ca,Ep.prototype.m=function(){return md()},Ep.prototype.f=function(){return md()?ld():Ep.l.f.call(this)};function X(i){i=rp({},this.c,i);var o=i.apikey||i.apiKey,s=i.baseUrl;if(s=o?s?0:"baseUrl":"apikey")throw new D(X,0,'"'+s+'" must be specified');this.Pk(i.baseUrl),this.b=o,this.a.I({apikey:o}),this.f=i.headers||{},this.g=Wa(i.servicesConfig||{})}t("H.service.Platform",X),X.prototype.c={apikey:null,baseUrl:new W("https","hereapi"+(Gn?".cn":".com"))},X.prototype.Pk=function(i){this.a=Cp(i.clone()),this.b=i=this.b,this.a.I({apikey:i})},X.prototype.setBaseUrl=X.prototype.Pk,X.prototype.Db=function(){return this.a},X.prototype.getBaseUrl=X.prototype.Db,X.prototype.Ma=function(i,o){try{return i.Tj=!0,new i(rp({platformBaseUrl:this.Db(),headers:this.f},this.g[i.CONFIG_KEY]||{},o||{}))}finally{i.Tj=!1}},X.prototype.createService=X.prototype.Ma,X.prototype.sf=function(i,o,s){var _e=this;if(!H.map.render.harp)throw Error("HARP engine module not found");if(!Ea(i)&&!Ac(i))throw new D(this.sf,0,"is invalid: must be either a configuration object or a URL");if(!Da(o))throw new D(this.sf,1,"is invalid: must be a Function");if(!Da(s))throw new D(this.sf,2,"is invalid: must be a Function");var _n=new H.map.render.harp.Style(i);_n.addEventListener("change",function(){var _o=_n.getState();if(_o===-1)s(Error("H.service.platform#createHybridLayers method failed to load style configuration"));else if(_o===2){_o={dark:!0};var _a=_e.gh({resource:"background",queryParams:{style:"satellite.day"}}),_u=_n.lc(),_h={styles:[{technique:"raster",attr:{gamma:1,brightness:1}}]};_u.definitions&&(_u.definitions["Satellite.Texture.Gamma"]!==void 0&&(_h.styles[0].attr.gamma=_u.definitions["Satellite.Texture.Gamma"]),_u.definitions["Satellite.Texture.Brightness"]!==void 0&&(_h.styles[0].attr.brightness=_u.definitions["Satellite.Texture.Brightness"])),_a=new Ep(_a,{engineType:Kn,style:new H.map.render.harp.Style(_h)}),o({raster:new ql(_a,_o),vector:_e.De().cd(_n,{engineType:Kn},_o)})}}),_n.load()},X.prototype.createHybridLayers=X.prototype.sf,X.prototype.rf=function(i,o,s,_e,_n,_o){function _a(Iy,$y,Ky){$y=uo()+"/"+$y,$y=ty===ik.WEBGL?new qi($y):new H.map.render.harp.Style($y);var Jy={engineType:ty};hy&&hy.politicalView&&(Jy.politicalView=hy.politicalView),s&&(Jy.lg=s),_e&&(Jy.lg2=_e),_o&&(Jy.pois=_o);var i0;return Ky&&(i0={dark:Ky}),Iy.cd($y,Jy,i0)}function _u(Iy,$y,Ky,Jy,i0){return Iy.ic($y,Ky,fy,Jy,vy,1,i0,oy)}var _h=this,ty=hk,oy={crossOrigin:"anonymous"};if(Ea(i)){var hy=i;"crossOrigin"in hy&&(oy.crossOrigin=hy.crossOrigin),i=hy.tileSize,o=hy.ppi,s=hy.lg,_e=hy.lg2,_n=hy.style,_o=hy.pois,hy.engineType!==void 0&&(ty=hy.engineType,oy.engineType=ty)}var fy=i||512,vy={};if(0>[72,250,320,500].indexOf(+o)){if(o!==B)throw new D(this.rf,1,o)}else vy.ppi=+o;if(s&&(vy.lg=s),_e&&(vy.lg2=_e),_n&&(vy.style=_n),_o&&(vy.pois=!!_o),ty===ik.HARP&&!H.map.render.harp)throw new D(this.rf,0,"HARP engine is not supported, module not found");if(i={},Gn)rp(i,{vector:{normal:{map:_a(this.De(),"harp/oslo/normal.day.json")}}});else{_n=this.bh();var xy=this.bh({type:"aerial"}),wy=this.Fj(),By=wy.Yi(vy.lg?{lg:vy.lg,i18n:!0,engineType:ty}:{engineType:ty});if(rp(i,{raster:{normal:{xbase:_u(_n,"xbasetile","normal.day","png8",!1),xbasenight:_u(_n,"xbasetile","normal.night","png8",!0),base:_u(_n,"basetile","normal.day","png8",!1),basenight:_u(_n,"basetile","normal.night","png8",!0),map:_u(_n,"maptile","normal.day","png8",!1),mapnight:_u(_n,"maptile","normal.night","png8",!0),trafficincidents:By,transit:_u(_n,"maptile","normal.day.transit","png8",!1),labels:_u(_n,"labeltile","normal.day","png",!1)},satellite:{xbase:_u(xy,"xbasetile","hybrid.day","jpg",!0),base:_u(xy,"basetile","hybrid.day","jpg",!0),map:_u(xy,"maptile","hybrid.day","jpg",!0),labels:_u(xy,"labeltile","hybrid.day","png",!0)},terrain:{xbase:_u(xy,"xbasetile","terrain.day","jpg",!1),base:_u(xy,"basetile","terrain.day","jpg",!1),map:_u(xy,"maptile","terrain.day","jpg",!1),labels:_u(xy,"labeltile","terrain.day","png",!1)}}}),ty!==ik.P2D&&(rp(i,{vector:{normal:{traffic:wy.Xi(void 0,ty),trafficincidents:By}}}),_n=this.De(),ty===ik.WEBGL?(i.vector.normal.map=_a(_n,"omv/miami/normal.day.yaml"),i.vector.normal.truck=_a(_n,"omv/miami/truck.day.yaml")):ty===ik.HARP&&(i.vector.normal.map=_a(_n,"harp/oslo/normal.day.json"),i.vector.normal.truck=_a(_n,"harp/oslo/normal.day.json"))),ty===ik.HARP){var Sy={ppi:72<o?400:100,size:256<fy?512:256,features:"pois:"+(_o===!0||Ac(_o)&&/[^0]/.test(_o)?"all":"disabled")};if(s&&(Sy.lang=s),_e&&(Sy.lang2=_e),hy&&hy.politicalView&&(Sy.pview=hy.politicalView),o={dark:!0},_n=function(Iy,$y,Ky,Jy){var i0=rp({},Sy);return/^explore\./.test($y)||delete i0.features,Iy=_h.gh({resource:Iy,queryParams:rp({style:$y},i0)}),Jy=new Ep(Iy,{engineType:ty,style:Jy}),new ql(Jy,Ky)},rp(i.raster.normal,{base:_n("background","explore.day"),basenight:_n("background","explore.night",o),map:_n("base","explore.day"),mapnight:_n("base","explore.night",o),labels:_n("label","explore.day")}),rp(i.raster.satellite,{xbase:_n("background","satellite.day",o),base:_n("background","explore.satellite.day",o),map:_n("base","explore.satellite.day",o),labels:_n("label","explore.satellite.day")}),ty===ik.HARP){xy=this.De(),rp(i.vector.normal,{mapnight:_a(xy,"harp/oslo/normal.night.json",!0),lite:_a(xy,"harp/oslo/lite.day.json"),litenight:_a(xy,"harp/oslo/lite.night.json",!0),ism:_a(xy,"harp/oslo/ism.day.json"),ismnight:_a(xy,"harp/oslo/ism.night.json",!0)}),wy={styles:[{technique:"raster",attr:{gamma:["interpolate",["linear"],["zoom"],0,1,13,1.2,17,1.3],brightness:["interpolate",["linear"],["zoom"],0,.7,13,.9,17,1]}}]},By=[];for(var Ay=0;4>Ay;Ay++){var Py=new H.map.render.harp.Style(JSON.parse(JSON.stringify(wy)));Py=_n("background","satellite.day",o,Py),By.push(Py)}i.hybrid={day:{raster:By[0],vector:_a(xy,"harp/oslo/hybrid.day.json",!0)},night:{raster:By[1],vector:_a(xy,"harp/oslo/hybrid.night.json",!0)},liteday:{raster:By[2],vector:_a(xy,"harp/oslo/lite.hybrid.day.json",!0)},litenight:{raster:By[3],vector:_a(xy,"harp/oslo/lite.hybrid.night.json",!0)}}}}}return i},X.prototype.createDefaultLayers=X.prototype.rf;function Hp(i){if(!i||!Da(i.requestData))throw new D(Hp,0,"options.requestData");Hp.l.constructor.call(this,i),this.K=i.requestData,this.B=!!i.providesDomMarkers}u(Hp,T),t("H.map.provider.MarkerTileProvider",Hp),Hp.prototype.Gd=function(i){return i?i.length+1:1},Hp.prototype.getEntryWeight=Hp.prototype.Gd,Hp.prototype.G=function(i,o,s,_e,_n){var _o=this;return this.K(i,o,s,function(_a){for(var _u=[],_h,ty,oy=_a.length;oy--;)ty=_a[oy],ty.qo=_o.getTileKey(i,o,s),ty.ia(_o),_h=ty.rb(),(C(ty,$i)||_h.getState()===1)&&_u.push(_a[oy]);_e(_u)},_n)},Hp.prototype.requestInternal=Hp.prototype.G,Hp.prototype.Rd=function(i,o){o===kh.VISUAL&&(i=this.Fb().get(i.qo))&&(i.valid=!1,this.Sa(i))},Hp.prototype.invalidateObject=Hp.prototype.Rd,Hp.prototype.Lb=function(){return this.B},Hp.prototype.providesDomMarkers=Hp.prototype.Lb,Hp.prototype.Mb=ff,Hp.prototype.providesMarkers=Hp.prototype.Mb;function Ip(){this.a={}}Ip.prototype.rb=function(i,o){var s=i+o,_e;return(_e=this.a[s])?_e:(i=Jp.MARKER.replace("{{icon}}",Kp[i]||Kp.OTHER),i=i.replace("{{color}}",Lp[o]||Lp.BLOCKING),o={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Vi(Wi.POLYGON,Mp.MARKER)},this.a[s]=_e=new Uj(i,o))};var Jp={MARKER:'<svg width="26" height="33" enable-background="new 0 0 26 33" viewBox="0 0 26 33" xmlns="http://www.w3.org/2000/svg"><path d="m26 33h-26v-33h26z" fill="#8c8c8c" opacity="0"/><path d="m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026" fill="#878787" opacity=".6"/><path d="m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z" fill="{{color}}"/>{{icon}}</svg>'},Kp={CONGESTION:'<path style="fill:#FFFFFF;" d="M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z"/>',ROADWORKS:'<path d="m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z" fill="#fff"/>',ACCIDENT:'<path style="fill:#FFFFFF;" d="M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z"/>',OTHER:'<path style="fill:#FFFFFF;" d="M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z"/>'},Lp={BLOCKING:"#323232",VERYHIGH:"#d5232f",HIGH:"#ffa100"},Mp={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function Np(i,o,s){s=s||{},s.criticality||(s.criticality="major,critical"),C(i,Op,Np,0),Hp.call(this,{max:20,min:8,requestData:A(this.N,this),engineType:s.engineType}),this.c=new Ip,this.v=i,this.i=s,this.reload=A(this.reload,this),this.u=setInterval(this.reload,o||18e4)}u(Np,Hp),t("H.service.traffic.incidents.Provider",Np);var Pp={minor:"HIGH","low impact":"HIGH",major:"VERYHIGH",critical:"BLOCKING"};Np.prototype.N=function(i,o,s,_e,_n){var _o=this,_a=this.c;return this.v.requestIncidentsByTile(i,o,s,function(_u){var _h=[];_u=_u.TRAFFIC_ITEMS;var ty;if(_u)for(_u=_u.TRAFFIC_ITEM,ty=_u.length;ty--;){var oy=_u[ty],hy=oy.TRAFFIC_ITEM_TYPE_DESC;switch(hy){case"ACCIDENT":case"CONGESTION":var fy=hy;break;case"CONSTRUCTION":fy="ROADWORKS";break;default:fy="OTHER"}fy=_a.rb(fy,Pp[oy.CRITICALITY.DESCRIPTION]),hy=oy.LOCATION.GEOLOC.ORIGIN,hy=new Ln({lat:hy.LATITUDE,lng:hy.LONGITUDE},{provider:_o,icon:fy}),hy.setData(oy),_h.push(hy)}_e(_h)},_n,this.i)},Np.prototype.D=function(){Hp.prototype.D.call(this),clearInterval(this.u)},Np.prototype.dispose=Np.prototype.D;var Qp="A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A".split(" ");function Rp(i,o,s,_e){Rp.l.constructor.call(this,{min:10,max:21,engineType:_e}),C(i,Op,Rp,0),this.u=i,this.c=s||Sp,this.c.responseattributes="sh,fc",this.i=setInterval(A(this.reload,this),o||18e4),this.a===ik.WEBGL?this.lb(new qi(uo()+"/traffic/flow.yaml"),!0):this.lb(new H.map.render.harp.Style({styles:[{when:["==",["geometry-type"],"LineString"],technique:"solid-line",renderOrder:10002,attr:{color:["case",[">=",["get","JF"],10],"black",[">=",["get","JF"],8],"red",[">=",["get","JF"],4],"yellow","green"],lineWidth:3,metricUnit:"Pixel"}}]}))}u(Rp,T),t("H.service.traffic.flow.Provider",Rp),Rp.prototype.Yh=ff,Rp.prototype.providesGeoJSON=Rp.prototype.Yh,Rp.prototype.$=function(){return this.ab()},Rp.prototype.getStyle=Rp.prototype.$,Rp.prototype.xb=function(i){i.b&&i.b("GeoJSONTileSource"),this.lb(i)},Rp.prototype.setStyle=Rp.prototype.xb;var Sp={locationreferences:"tmc,shp"};Rp.prototype.o=function(){Rp.l.o.call(this),clearInterval(this.i)},Rp.prototype.G=function(i,o,s,_e,_n){return this.u.requestFlowByTile(i,o,s,function(_o){_o.type&&_o.type.indexOf("Error")!==-1?_n(_o.Details):_e(_o)},_n,this.c)},Rp.prototype.requestInternal=Rp.prototype.G,Rp.prototype.Vb=function(i,o,s,_e,_n){var _o,_a,_u,_h,ty={type:"FeatureCollection",features:[]},oy,hy=_e.RWS.length;for(_o=0;_o<hy;_o++){var fy=_e.RWS[_o],vy=fy.RW,xy=vy.length,wy=Qp.indexOf(fy.EXTENDED_COUNTRY_CODE+fy.EBU_COUNTRY_CODE)!==-1;for(fy=0;fy<xy;fy++){var By=vy[fy].FIS,Sy=By.length;for(By=0;By<Sy;By++){var Ay=vy[fy].FIS[By].FI,Py=Ay.length;for(_a=0;_a<Py;_a++){var Iy=Ay[_a],$y=[],Ky=Iy.CF[0],Jy=!!Ky.SSS,i0={type:"Feature",properties:Ky,geometry:{type:"MultiLineString",coordinates:$y}};for(i0.properties.LHT=wy,Iy.SHP.length&&(i0.properties.FC=Iy.SHP[0].FC),Jy&&(oy=[]),Ky=0;Ky<Iy.SHP.length;Ky++){var k0=Iy.SHP[Ky].value,g0=k0.length;for(_u=0;_u<g0;_u++){var j0=Jy?oy:void 0,V0=new ko(k0[_u].trim()),k1=[],h1={};for(V0.de();(_h=V0.Kb())!==-1;)_h===Tp?(h1.lat=+String.fromCharCode.apply(Rp,V0.Dd()),V0.next(),V0.de()):_h===Up?(h1.lng=+String.fromCharCode.apply(Rp,V0.Dd()),k1.push([h1.lng,h1.lat]),j0&&j0.push(ng(h1)),h1=[],V0.next(),V0.de()):V0.next();h1.lng=+String.fromCharCode.apply(Rp,V0.Dd()),k1.push([h1.lng,h1.lat]),j0&&j0.push(ng(h1)),_h=k1,$y.push(_h)}}ty.features.push(i0)}}}}return Rp.l.Vb.call(this,i,o,s,ty,_n)},Rp.prototype.createTileInternal=Rp.prototype.Vb;var Up=32,Tp=44;function Vp(i,o){if(o=o===void 0?{}:o,!i.Tj)throw new Yc(i);Vp.l.constructor.call(this);var s=Wp(this,o);if(!s.baseUrl&&!s.platformBaseUrl)throw new D(i,0,'either "baseUrl" or "platformBaseUrl" must be specified');this.i=(s.baseUrl?s.baseUrl:s.platformBaseUrl).clone(),i=s.baseUrl?o:s,i.host&&this.i.Ye(i.host),i.subDomain&&this.i.za(i.subDomain),i.path&&this.i.td(i.path),Cp(this.i),this.g=s.headers||{}}u(Vp,F),t("H.service.Service",Vp);function Wp(i,o){return i=i.Ia(),o?rp({},i,o):i}Vp.prototype.Ia=function(){return{}},Vp.prototype.C=function(){return this.i},Vp.prototype.getUrl=Vp.prototype.C,Vp.prototype.G=function(i,o,s,_e){return _e=new tf(_e===void 0?"application/json":_e,i.toString(),he,{headers:this.g}),_e.then(o,Xp(this,i,s)),_e};function Xp(i,o,s){return function(_e){return typeof _e.json!="function"?Promise.reject(s(Yp(o,_e))):_e.json().then(function(_n){return s(i.a(_n))},function(){return s(Yp(o,_e))})}}Vp.prototype.a=function(i){return Error(i.message)};function Yp(i,o){return Error((o.statusText?"["+o.statusText+"] ":"")+i+" request failed")}function Zp(i){function o(oy){_e.contains(_n)&&_e.removeChild(_n),ty&&clearTimeout(ty),delete Zp.a[_o],oy&&i.ij&&i.ij.call(_h,oy)}if(!i.url||!i.Ig)throw Error('Parameter "options" must specify at least a URL and a callback.');if(typeof i.Ig!="function")throw Error("Parameters options.callback must be a function");var s=i.Mo||document,_e=s.getElementsByTagName("head")[0],_n=s.createElement("script");s=i.url instanceof W?i.url:wp(i.url,i.Lo);var _o=Zp.b++,_a=i.wl||"callback",_u=i.Ig,_h={},ty=null;return _h.id=_o,_h.cancel=function(){o("cancelled")},i.timeout!==0&&(ty=x.setTimeout(function(){o("timeout")},i.timeout||3e4)),Zp.a[_o]=function(oy){o(),_u.call(_h,oy)},_n.type="text/javascript",_n.src=s.toString()+(s.Mj()?"&":"?")+_a+"="+(i.No?"H.service.jsonp.handleResponse("+_o+")":encodeURI("H.service.jsonp.handleResponse("+_o+")")),_e.appendChild(_n),_h}t("H.service.jsonp",Zp),Zp.dn=function(i){return(i=Zp.a[i])?i:function(){}},Zp.handleResponse=Zp.dn,Zp.b=0,Zp.a={};function Op(i){Op.l.constructor.call(this,Op,i),this.b=Wp(this,i).callbackKey}u(Op,Vp),t("H.service.traffic.Service",Op),Op.prototype.Ia=function(){return{subDomain:"traffic.ls",path:"traffic/6.1",callbackKey:"jsoncallback"}},Op.CONFIG_KEY="traffic",Op.prototype.Xi=function(i,o){return new ql(new Rp(this,void 0,i,o),{max:22})},Op.prototype.createFlowLayer=Op.prototype.Xi,Op.prototype.Yi=function(i){return new Mn(new Np(this,void 0,i))},Op.prototype.createIncidentsLayer=Op.prototype.Yi;function $p(i,o,s,_e){return Zp({url:o,Ig:s,ij:function(_n){_e(Error("["+_n+"] "+o+" request failed"))},wl:i.b})}Op.prototype.bo=function(i,o,s){return i=this.C().clone().F("incidents.json").I(i),$p(this,i,o,s)},Op.prototype.requestIncidents=Op.prototype.bo,Op.prototype.ao=function(i,o,s,_e,_n,_o){return i=this.C().clone().F(["flow/json",s,i,o].join("/")).I(_o||{}),$p(this,i,_e,_n)},Op.prototype.requestFlowByTile=Op.prototype.ao,Op.prototype.co=function(i,o,s,_e,_n,_o){return i=this.C().clone().F(["incidents/json",s,i,o].join("/")).I(_o||{}),$p(this,i,_e,_n)},Op.prototype.requestIncidentsByTile=Op.prototype.co,X.prototype.Fj=function(i){return this.Ma(Op,i)},X.prototype.getTrafficService=X.prototype.Fj;function aq(i){aq.l.constructor.call(this,aq,i),this.b=Wp(this,i).reverseSubDomain}u(aq,Vp),t("H.service.GeocodingService",aq),aq.prototype.Ia=function(){return{subDomain:"geocoder.ls",reverseSubDomain:"reverse",path:"6.2"}},aq.CONFIG_KEY="geocoding",aq.prototype.a=function(i){return Error(i.Details||i.message||i.error)},aq.prototype.Tg=function(i,o,s){return i=this.C().clone().F("geocode.json").I(i),this.G(i,o,s)},aq.prototype.geocode=aq.prototype.Tg,aq.prototype.bi=function(i,o,s){return i=this.C().clone().F("reversegeocode.json").I(i),this.b&&i.za(this.b),this.G(i,o,s)},aq.prototype.reverseGeocode=aq.prototype.bi,aq.prototype.search=function(i,o,s){return i=this.C().clone().F("search.json").I(i),this.G(i,o,s)},aq.prototype.search=aq.prototype.search,X.prototype.tj=function(i){return sp(X.prototype.tj,"Use H.service.Platform#getSearchService instead"),this.Ma(aq,i)},X.prototype.getGeocodingService=X.prototype.tj;function bq(i){bq.l.constructor.call(this,bq,i)}u(bq,Vp),t("H.service.PlacesService",bq),bq.prototype.Ia=function(){return{subDomain:"places.ls",path:"places/v1"}},bq.CONFIG_KEY="places",bq.EntryPoint={SEARCH:"discover/search",SUGGEST:"suggest",EXPLORE:"discover/explore",AROUND:"discover/around",HERE:"discover/here",CATEGORIES:"categories/places"},bq.prototype.request=function(i,o,s,_e){return cq(this,i,o,s,_e)},bq.prototype.request=bq.prototype.request;function cq(i,o,s,_e,_n){return o=i.C().clone().F(o).I(s||{}),i.G(o,_e,_n)}bq.prototype.search=function(i,o,s){return cq(this,"discover/search",i,o,s)},bq.prototype.search=bq.prototype.search,bq.prototype.po=function(i,o,s){return cq(this,"suggest",i,o,s)},bq.prototype.suggest=bq.prototype.po,bq.prototype.Gl=function(i,o,s){return cq(this,"discover/explore",i,o,s)},bq.prototype.explore=bq.prototype.Gl,bq.prototype.sl=function(i,o,s){return cq(this,"discover/around",i,o,s)},bq.prototype.around=bq.prototype.sl,bq.prototype.fn=function(i,o,s){return cq(this,"discover/here",i,o,s)},bq.prototype.here=bq.prototype.fn,bq.prototype.xl=function(i,o,s){return cq(this,"categories/places",i,o,s)},bq.prototype.categories=bq.prototype.xl,bq.prototype.Hl=function(i,o,s,_e){return i=wp(i).I(this.C().getQuery()).I(_e||{}),this.G(i,o,s)},bq.prototype.follow=bq.prototype.Hl,X.prototype.Bj=function(i){return sp(X.prototype.Bj,"Use H.service.Platform#getSearchService instead"),this.Ma(bq,i)},X.prototype.getPlacesService=X.prototype.Bj;function dq(){this.a={}}function eq(i,o){for(var s in o)if(o.hasOwnProperty(s)){var _e,_n=o[s],_o=i.a[s]||(i.a[s]=[]),_a=_n.length;for(_e=0;_e<_a;_e++)_o.push(new fq(_n[_e]))}}function Gp(i,o,s,_e){var _n=(i=i.a[o])?i.length:0,_o=[];for(o=0;o<_n;o++)i[o].jd(s,_e)&&_o.push(i[o]);return _o}function fq(i){var o,s=i.boxes;if(this.label=i.label,this.min=i.minLevel,this.max=i.maxLevel,this.b=[],s&&(o=s.length)){var _e=s[0],_n=new K(_e[0],_e[1],_e[2],_e[3]);for(this.b.push(_n),this.a=new K(_e[0],_e[1],_e[2],_e[3]),i=1;i<o;i++)_e=s[i],_n=new K(_e[0],_e[1],_e[2],_e[3]),this.b.push(_n),this.a.$b(_n,!1,this.a)}}fq.prototype.jd=function(i,o){if(i>=this.min&&i<=this.max)if((i=this.b.length)&&this.a){if(this.a.jd(o)){for(;i--;)if(this.b[i].jd(o))return!0}}else return!0;return!1};function gq(i,o,s){var _e=this,_n=s||{},_o=+_n.min,_a=+_n.max;_n.tileSize=_n.tileSize||512,_n.min=_o?Zd(_o,1,17):1,_n.min+=Nk(_n.tileSize,1),_n.max=_a?Zd(_a,1,17):17,gq.l.constructor.call(this,_n),C(i,hq,gq,0),C(o,Th,gq,1),this.j=i,o.b&&o.b("OMV"),this.lb(o,!0),this.c=!1,s&&(s.politicalView&&(this.i=s.politicalView),iq(this,s.lg,s.lg2),this.c=!!s.pois),this.N=function(){jq(_e),_e.reload(!1)},i.addEventListener("versionupdate",this.N),jq(this),gq.prototype.V=function(){var _u=/^v2\/vectortiles\/(.+)\/mc$/.exec(i.C().b);return _u?_u[1]:B+""}()}u(gq,T),t("H.service.omv.Provider",gq),gq.prototype.md=ff,gq.prototype.providesOMV=gq.prototype.md;function jq(i){var o=i.hd("_#-;,:","_#-;,:","_#-;,:");i.Y=new RegExp("^"+o.replace(/[.*+?^${}()|[\]\\\/]/g,"\\$&").replace(/_#-;,:/g,"\\d+")+"$")}gq.prototype.Tb=function(i){return this.Y.test(i)},gq.prototype.cacheFilter=gq.prototype.Tb,gq.prototype.hd=function(i,o,s){return kq(this.j,i,o,s).toString()},gq.prototype.getTileKey=gq.prototype.hd,gq.prototype.Fb=function(){return this.ua},gq.prototype.getCache=gq.prototype.Fb,gq.prototype.Em=function(){return this.i},gq.prototype.getPoliticalView=gq.prototype.Em,gq.prototype.io=function(i){var o=this.i;this.i=i,this.dispatchEvent(new aj("politicalviewchange",this.i,o))},gq.prototype.setPoliticalView=gq.prototype.io,gq.prototype.MAX_STORE_TIME=2592e6,gq.prototype.m=function(){return md()},gq.prototype.f=function(){return md()?ld():gq.l.f.call(this)},gq.prototype.G=function(i,o,s,_e,_n){return this.j.Qa(i,o,s,_e,_n)},gq.prototype.requestInternal=gq.prototype.G,gq.prototype.xb=function(i){i.b&&i.b("OMV"),this.lb(i)},gq.prototype.setStyle=gq.prototype.xb,gq.prototype.$=function(){return gq.l.ab.apply(this)},gq.prototype.getStyle=gq.prototype.$,gq.prototype.ab=function(){var i=gq.l.ab.apply(this),o=i.getState()===Uh.READY,s=i.lc();return o?s&&s.global&&(this.u&&(this.K&&(s.global.ux_language=this.K),this.B&&(s.global.ux_language_fallback=this.B)),this.c&&s.global.poi&&s.global.poi.default&&(s.global.poi.default.visible=this.c),this.u||this.c)&&(i=new qi(s,i.Db())):i.load(),i},gq.prototype.getStyleInternal=gq.prototype.ab;function iq(i,o,s){var _e=Ac(o),_n=Ac(s);_e&&(i.K=o),_n&&(i.B=s),(_e||_n)&&(i.v=[],_e=/^([a-zA-Z]{2})(-|$)/,(o=_e.exec(o))&&i.v.push(o[1]),(o=_e.exec(s))&&i.v.push(o[1]),i.u=!0)}gq.prototype.u=!1;var lq=["en"];gq.prototype.ah=function(){return this.v||lq},gq.prototype.getLanguages=gq.prototype.ah,gq.prototype.o=function(){gq.l.o.call(this),this.j.removeEventListener("versionupdate",this.N)},gq.prototype.ua=new Pk(256),gq.prototype.ca=function(i,o){return Gp(this.j.ca(),this.V,o,i)},gq.prototype.getCopyrights=gq.prototype.ca;function hq(i){hq.l.constructor.call(this,hq,i),i=Wp(this,i).mapVersion,this.b=uc(i)?i:mq[this.C().toString()],uc(this.b)||nq(this)}u(hq,Vp),t("H.service.omv.Service",hq),hq.prototype.Ia=function(){return{subDomain:"vector",path:"v2/vectortiles/base/mc"}},hq.CONFIG_KEY="omv";var mq={};Gc(mq),hq.prototype.vm=function(){return this.b},hq.prototype.getMapVersion=hq.prototype.vm;function nq(i){i.G(i.C().clone().F("../../info"),function(o){o=o.mapVersion;var s=i.C().toString();i.b=o,o!==mq[s]&&(mq[s]=o,i.dispatchEvent("versionupdate"))},function(){})}hq.prototype.cd=function(i,o,s){o=o||{};var _e={min:0,max:22};return Ea(s)&&rp(_e,s),Gn&&(o.min=_e.min=4),new ql(new gq(this,i,o),_e)},hq.prototype.createLayer=hq.prototype.cd,hq.prototype.Qa=function(i,o,s,_e,_n){return this.G(kq(this,i,o,s),function(_o){return _o.arrayBuffer().then(_e,_n)},_n,"arraybuffer")};function kq(i,o,s,_e){return o=i.C().clone().F(_e+"/"+o+"/"+s+"/omv"),uc(i.b)&&o.I({mv:i.b}),o}hq.prototype.Fe=function(i,o){if(!Da(i))throw new D(this.Fe,0,'"onResult" must be a function');if(!Da(o))throw new D(this.Fe,1,'"onError" must be a function');return this.G(this.C().clone().td("v2/vectortiles/pviews"),i,o)},hq.prototype.getPoliticalViews=hq.prototype.Fe,X.prototype.De=function(i){return this.Ma(hq,i)},X.prototype.getOMVService=X.prototype.De,hq.prototype.f=function(i){eq(this.c,i),this.dispatchEvent("copyrightupdate")},hq.prototype.ca=function(){return this.c||(this.c=new dq,this.G(this.C().clone().F("../../copyrights"),A(this.f,this),jd)),this.c},hq.prototype.getCopyrights=hq.prototype.ca;function oq(i){oq.l.constructor.call(this,oq,i),this.b=i.getToken}u(oq,Vp),t("H.service.iml.Service",oq),oq.prototype.Ia=function(){return{host:"interactive.data.api.platform.here.com",path:"interactive/v1/catalogs"}},oq.prototype.a=function(i){function o(){for(var _e=fa(s),_n=_e.next();!_n.done;_n=_e.next()){_n=_n.value;var _o=_n.format;if(_n.keys.every(function(_a){return i[_a]}))return _o()}return JSON.stringify(i)}var s=[{keys:["code","title","cause","action"],format:function(){return i.code+": "+i.title+"; cause: "+i.cause+"; action: "+i.action}},{keys:["error","error_description"],format:function(){return i.error+": "+i.error_description}},{keys:["error","errorMessage"],format:function(){return i.error+": "+i.errorMessage}}];return Error(Ea(i)?o():i)},oq.prototype.Od=function(i,o,s,_e,_n){var _o=this.Od;return pq(_o,0,i,o),qq(_o,2,s,_e),i=this.C().clone().F(i+"/layers/"+o+"/statistics").I(_n||{}),rq(this,i,"GET",s,_e)},oq.prototype.getStatistics=oq.prototype.Od,oq.prototype.Af=function(i,o,s,_e,_n,_o,_a,_u,_h){var ty=_h?"":".mvtf";return i=this.C().clone().F(_e+"/layers/"+_n+"/tile/web/"+s+"_"+i+"_"+o+ty).I(Object.assign({clip:!0},_u)),rq(this,i,"GET",_h?_o:function(oy){return oy.arrayBuffer().then(_o)},_a,void 0,_h?"application/json":"arraybuffer")},oq.prototype.getFeaturesByTile=oq.prototype.Af,oq.prototype.qj=function(i,o,s,_e,_n,_o){var _a=this.qj;return sq(_a,i),pq(_a,1,o,s),qq(_a,3,_e,_n),i=tq(this,i,o,s,_o),rq(this,i,"GET",_e,_n)},oq.prototype.getFeatureById=oq.prototype.qj,oq.prototype.Nc=function(i,o,s,_e,_n,_o){var _a=this.Nc;return vq(_a,i),pq(_a,1,o,s),qq(_a,3,_e,_n),i=wq(this,i,o,s,_o),rq(this,i,"GET",_e,_n)},oq.prototype.getFeaturesById=oq.prototype.Nc,oq.prototype.Hd=function(i,o,s,_e,_n){var _o=this.Hd;if(!Ea(i)||!(i.bbox||i.north&&i.east&&i.south&&i.west))throw new D(_o,0,'must be an object with either "bbox" or a full set of "north", "east", "south" and "west"');return pq(_o,1,o,s),qq(_o,3,_e,_n),i=this.C().clone().F(o+"/layers/"+s+"/bbox").I(i),rq(this,i,"GET",_e,_n)},oq.prototype.getFeaturesByBoundingBox=oq.prototype.Hd,oq.prototype.sj=function(i,o,s,_e,_n){var _o=this.sj;if(!(Ea(i)&&i.radius&&(i.lat&&(i.lng||i.lon)||i.refCatalogHrn&&i.refLayerId&&i.refFeatureId)))throw new D(_o,0,'must be an object with "radius" and a combination of either "lat"+"lng" or "refCatalogHrn"+"refLayerId"+"refFeatureId"');return pq(_o,1,o,s),qq(_o,3,_e,_n),i=this.C().clone().F(o+"/layers/"+s+"/spatial").I(i),rq(this,i,"GET",_e,_n)},oq.prototype.getFeaturesByPointAndRadius=oq.prototype.sj,oq.prototype.rj=function(i,o,s,_e,_n,_o){var _a=this.rj;if(!Ea(i)||!i.radius)throw new D(_a,0,'must be an object with "radius"');return xq(_a,1,o),pq(_a,2,s,_e),qq(_a,4,_n,_o),i=this.C().clone().F(s+"/layers/"+_e+"/spatial").I(i),rq(this,i,"POST",_n,_o,o)},oq.prototype.getFeaturesByGeometryAndRadius=oq.prototype.rj,oq.prototype.Lk=function(i,o,s,_e,_n){var _o=this.Lk;return pq(_o,0,i,o),qq(_o,2,s,_e),i=this.C().clone().F(i+"/layers/"+o+"/search").I(_n||{}),rq(this,i,"GET",s,_e)},oq.prototype.searchFeatures=oq.prototype.Lk,oq.prototype.Xj=function(i,o,s,_e,_n){var _o=this.Xj;return pq(_o,0,i,o),qq(_o,2,s,_e),i=this.C().clone().F(i+"/layers/"+o+"/iterate").I(_n||{}),rq(this,i,"GET",s,_e)},oq.prototype.iterateFeatures=oq.prototype.Xj,oq.prototype.Vc=function(i,o,s,_e,_n,_o){var _a=this.Vc;return xq(_a,0,i),pq(_a,1,o,s),qq(_a,3,_e,_n),o=yq(this,o,s,_o),rq(this,o,"PUT",_e,_n,i)},oq.prototype.putFeatures=oq.prototype.Vc,oq.prototype.Tc=function(i,o,s,_e,_n,_o){var _a=this.Tc;return xq(_a,0,i),pq(_a,1,o,s),qq(_a,3,_e,_n),o=yq(this,o,s,_o),rq(this,o,"POST",_e,_n,i)},oq.prototype.postFeatures=oq.prototype.Tc,oq.prototype.dd=function(i,o,s,_e,_n){var _o=this.dd;return vq(_o,i),pq(_o,1,o,s),qq(_o,3,_e,_n),i=wq(this,i,o,s),rq(this,i,"DELETE",_e,_n)},oq.prototype.deleteFeatures=oq.prototype.dd,oq.prototype.Ek=function(i,o,s,_e,_n,_o,_a){var _u=this.Ek;return sq(_u,i),xq(_u,1,o),pq(_u,2,s,_e),qq(_u,4,_n,_o),i=tq(this,i,s,_e,_a),rq(this,i,"PUT",_n,_o,o)},oq.prototype.putFeature=oq.prototype.Ek,oq.prototype.yk=function(i,o,s,_e,_n,_o,_a){var _u=this.yk;return sq(_u,i),xq(_u,1,o),pq(_u,2,s,_e),qq(_u,4,_n,_o),i=tq(this,i,s,_e,_a),rq(this,i,"PATCH",_n,_o,o)},oq.prototype.patchFeature=oq.prototype.yk,oq.prototype.bj=function(i,o,s,_e,_n){var _o=this.bj;return sq(_o,i),pq(_o,1,o,s),qq(_o,3,_e,_n),i=tq(this,i,o,s),rq(this,i,"DELETE",_e,_n,void 0,"text/plain")},oq.prototype.deleteFeature=oq.prototype.bj;function yq(i,o,s,_e){return i.C().clone().F(o+"/layers/"+s+"/features").I(_e||{})}function wq(i,o,s,_e,_n){return o=Object.assign({},_n,{id:new Ap(o)}),yq(i,s,_e,o)}function tq(i,o,s,_e,_n){return i.C().clone().F(s+"/layers/"+_e+"/features/"+o).I(_n||{})}function rq(i,o,s,_e,_n,_o,_a){return _a=_a===void 0?"application/json":_a,s={method:s,headers:Object.assign({},_o?{"Content-Type":"application/geo+json"}:void 0,typeof i.b=="function"?{Authorization:"Bearer "+i.b()}:void 0,i.g)},_o&&(s.data=JSON.stringify(_o)),_o=new tf(_a,o.toString(),he,s),_o.then(_e,Xp(i,o,_n)),_o}oq.CONFIG_KEY="iml";function pq(i,o,s,_e){xc(s,"String",i,o,"must be a string"),xc(_e,"String",i,o+1,"must be a string")}function sq(i,o){xc(o,"String",i,0,"must be a string")}function vq(i,o){if(!Array.isArray(o)||o.length===0||o.some(function(s){return typeof s!="string"}))throw new D(i,0,"must be a non-empty array of strings")}function xq(i,o,s){if(!Ea(s))throw new D(i,o,"must be a GeoJSON object")}function qq(i,o,s,_e){if(!Da(s))throw new D(i,o,"must be a function");if(!Da(_e))throw new D(i,o+1,"must be a function")}X.prototype.lm=function(i){return this.Ma(oq,i)},X.prototype.getIMLService=X.prototype.lm;function zq(i,o,s,_e){if(zq.l.constructor.call(this,_e?{min:_e.min,max:_e.max,engineType:_e.engineType}:void 0),C(i,oq,zq,0),!Ac(o))throw new D(zq,1,'"catalogHrn" must be a string');if(!Ac(s))throw new D(zq,2,'"layerId" must be a string');this.v=i,this.c=o,this.i=s,this.u=Ea(_e)&&Ea(_e.parameters)?_e.parameters:{},this.lb(this.a===ik.WEBGL?new qi({sources:{iml:{type:"MVT"}},layers:{iml:{data:{source:"iml",layer:this.c+":"+this.i},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#0258AE",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.c+":"+this.i,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.c+":"+this.i,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.c+":"+this.i,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.c+":"+this.i,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#0258AE",lineWidth:"2px",renderOrder:203}]}))}u(zq,T),t("H.service.iml.Provider",zq),zq.prototype.G=function(i,o,s,_e,_n){return this.v.Af(i,o,s,this.c,this.i,_e,_n,this.u)},zq.prototype.requestInternal=zq.prototype.G,zq.prototype.md=ff,zq.prototype.providesOMV=zq.prototype.md,zq.prototype.$=function(){return this.ab()},zq.prototype.getStyle=zq.prototype.$,zq.prototype.xb=function(i){C(i,qi)&&i.b("MVT"),this.lb(i)},zq.prototype.setStyle=zq.prototype.xb;function Fp(i){i=i===void 0?{}:i,Fp.l.constructor.call(this,Fp,i),this.b={fg:i.resource||"base",Xf:i.projection||"mc",format:i.format||"png"},this.f=i.queryParams||{}}u(Fp,Vp),t("H.service.rasterTile.Service",Fp),p=Fp.prototype,p.$=function(){return this.f.style||"explore.day"},p.Ia=function(){return{subDomain:"maps",path:"v3"}},p.ca=function(){return this.c||(this.c=new dq,this.G(this.C().clone().F("copyright"),A(this.An,this),jd)),this.c},p.An=function(i){var o=i.copyrights;i=i.resources;var s={},_e=this.b.fg+"."+this.$();s[_e]=[],i[this.b.fg].styles[this.$()].forEach(function(_n){o[_n].forEach(function(_o){var _a=[];_o.boundingBoxes.forEach(function(_u){_a.push([_u.north,_u.west,_u.south,_u.east])}),s[_e].push({boxes:_a,label:_o.label,alt:_o.alt,minLevel:_o.minLevel,maxLevel:_o.maxLevel})})}),eq(this.c,s)},p.Be=function(i,o){return this.G(this.C().clone().F("info"),i,o)},Fp.prototype.getInfo=Fp.prototype.Be,Fp.prototype.Fe=function(i,o){return this.G(this.C().clone().F("politicalViews"),i,o)},Fp.prototype.getPoliticalViews=Fp.prototype.Fe,Fp.prototype.hm=function(i,o){return this.G(this.C().clone().F("features"),i,o)},Fp.prototype.getFeatures=Fp.prototype.hm,Fp.prototype.ah=function(i,o){return this.G(this.C().clone().F("languages"),i,o)},Fp.prototype.getLanguages=Fp.prototype.ah,Fp.CONFIG_KEY="rasterTile",X.prototype.gh=function(i){return this.Ma(Fp,i)},X.prototype.getRasterTileService=X.prototype.gh;function Aq(i,o,s,_e,_n,_o,_a){var _u=this;_a=_a||{},_o=_o||{};var _h=i.C().clone().F(o+"/"+i.pc()+"/"+s).I(_o),ty=i.c;this.B=i,this.N=_h,Ck.call(this,{tileSize:_e,max:_e===512?19:20,min:_e===512?2:0,getURL:function(oy,hy,fy){var vy=_u.N.clone();return ty&&vy.za(ty[(fy+hy+oy)%ty.length]),vy.F(fy+"/"+oy+"/"+hy+"/"+_e+"/"+_n),vy.toString()},crossOrigin:_a.crossOrigin,headers:_a.headers,uri:_h.toString().replace(/_/g,"")+_e,engineType:_a.engineType}),this.Ya=o,this.ya=s,this.ua=_o,this.V=s.split(".")[0],this.i=A(this.i,this),this.getCopyrights=this.ca,i.addEventListener("versionupdate",this.i)}u(Aq,Ck),Aq.prototype.MAX_STORE_TIME=2592e6,Aq.prototype.o=function(){Ck.prototype.o.call(this),this.B.removeEventListener("versionupdate",this.i)},Aq.prototype.ca=function(i,o){return Gp(this.B.ca(),this.V,o,i)},Aq.prototype.getCopyrights=Aq.prototype.ca,Aq.prototype.i=function(){var i=this.B;this.N=i.C().clone().F(this.Ya+"/"+i.pc()+"/"+this.ya).I(this.ua),this.reload(!1)},Aq.prototype.m=function(){return md()},Aq.prototype.f=function(){return md()?ld():Aq.l.f.call(this)};function Bq(i){Bq.l.constructor.call(this,Bq,i),i=Wp(this,i),this.c=i.shards,(this.f=i.ignoreTypes?null:i.type)&&this.C().za(this.f),this.b=i.version,this.m=new dq,this.s={},this.j=0,this.b==="newest"&&Cq(this)}u(Bq,Vp),t("H.service.MapTileService",Bq),Bq.prototype.Ia=function(){return{subDomain:"maps.ls",path:"maptile/2.1",type:"base",version:"newest",shards:["1","2","3","4"]}},Bq.CONFIG_KEY="maptile";function Dq(i,o){for(var s={},_e=i[o+"s"][o],_n=_e.length;_n--;)s[_e[_n].id]=_e[_n];i[o+"s"]=s}Bq.prototype.Gj=function(){return this.f},Bq.prototype.getType=Bq.prototype.Gj,Bq.prototype.pc=function(){return this.b},Bq.prototype.getVersion=Bq.prototype.pc,Bq.prototype.ca=function(){return this.j||(this.b&&this.b!=="newest"||this.f==="traffic")&&Eq(this),this.m},Bq.prototype.getCopyrights=Bq.prototype.ca;function Cq(i){var o=i.C().clone().F("info").I({output:"json"});i.c&&o.za(i.c[0]),i.G(o,function(s){s=s.response;var _e;if(Dq(s,"map"),Dq(s,"scheme"),Dq(s,"tiletype"),Dq(s,"format"),Dq(s,"resolution"),Dq(s,"language"),i.b==="newest"&&i.f!=="traffic")for(_e in s.maps)s.maps[_e].hash&&s.maps[_e].newest&&(i.b=s.maps[_e].hash,i.dispatchEvent("versionupdate"));i.u=s,i.dispatchEvent("infoupdate")},function(s){throw s})}function Eq(i){var o=i.C().clone().F("copyright").F(i.pc()).I({output:"json"});i.c&&o.za(i.c[0]),i.j=1,i.G(o,function(s){i.j=2,eq(i.m,s),i.dispatchEvent("copyrightupdate")},function(s){throw i.j=-1,s})}Bq.prototype.Be=function(){return this.u},Bq.prototype.getInfo=Bq.prototype.Be,Bq.prototype.qe=function(i,o,s,_e,_n,_o){var _a=this.C().clone().F(i+"/"+this.pc()+"/"+o+"/"+s+"/"+_e).I(_n||{}).toString(),_u=0,_h,ty=_a.length;if(ty!==0)for(_h=0;_h<ty;_h++){var oy=_a.charCodeAt(_h);_u=(_u<<5)-_u+oy,_u|=0}return _a=_u,_u=this.s[_a],_u||(_u=new Aq(this,i,o,s,_e,_n,rp({headers:this.g},_o||{})),this.s[_a]=_u),_u},Bq.prototype.createTileProvider=Bq.prototype.qe,Bq.prototype.ic=function(i,o,s,_e,_n,_o,_a,_u){return i=this.qe(i,o,s,_e,_n,_u),new ql(i,{opacity:_o,dark:!!_a})},Bq.prototype.createTileLayer=Bq.prototype.ic,X.prototype.bh=function(i){return this.Ma(Bq,i)},X.prototype.getMapTileService=X.prototype.bh;function Fq(i){Fq.l.constructor.call(this,Fq,i)}u(Fq,Vp),t("H.service.publicTransit.Service",Fq),Fq.prototype.Ia=function(){return{subDomain:"transit.router",path:"v8"}},Fq.CONFIG_KEY="publicTransit",Fq.prototype.Mm=function(i,o,s){return i=this.C().clone().F("routes").I(i),this.G(i,o,s)},Fq.prototype.getRoutes=Fq.prototype.Mm,Fq.prototype.Zl=function(i,o,s){return i=this.C().clone().F("departures").I(i),this.G(i,o,s)},Fq.prototype.getDepartures=Fq.prototype.Zl,Fq.prototype.Qm=function(i,o,s){return i=this.C().clone().F("stations").I(i),this.G(i,o,s)},Fq.prototype.getStations=Fq.prototype.Qm,Fq.prototype.a=function(i){return Error(JSON.stringify(i))},X.prototype.Im=function(i){return this.Ma(Fq,i)},X.prototype.getPublicTransitService=X.prototype.Im;function Gq(i){Gq.l.constructor.call(this,Gq,i),sp(Gq,"Use HERE Routing API v8 instead.")}u(Gq,Vp),t("H.service.RoutingService",Gq),Gq.prototype.Ia=function(){return{subDomain:"route.ls",path:"routing/7.2"}},Gq.prototype.a=function(i){return Error(i.details)},Gq.CONFIG_KEY="routing",Gq.prototype.zd=function(i,o,s){return i=this.C().clone().F("calculateroute.json").I(i),this.G(i,o,s)},Gq.prototype.calculateRoute=Gq.prototype.zd,Gq.prototype.Hg=function(i,o,s){return i=this.C().clone().za("isoline").F("calculateisoline.json").I(i),this.G(i,o,s)},Gq.prototype.calculateIsoline=Gq.prototype.Hg;function Hq(i){Hq.l.constructor.call(this,Hq,i)}u(Hq,Vp),t("H.service.RoutingService8",Hq),Hq.CONFIG_KEY="routing_v8",Hq.prototype.Ia=function(){return{subDomain:"router",path:"v8/routes"}},Hq.prototype.a=function(i){return Error(i.error)},Hq.prototype.zd=function(i,o,s){return i=this.C().clone().I(i),this.G(i,o,s)},Hq.prototype.calculateRoute=Hq.prototype.zd,Hq.prototype.Hg=function(i,o,s){return i=this.C().clone().za("isoline").td("v8/isolines").I(i),this.G(i,o,s)},Hq.prototype.calculateIsoline=Hq.prototype.Hg,X.prototype.Dj=function(i,o){if(o=Gn?8:+o||7,o===7)o=Gq;else if(o===8)o=Hq;else throw new D(this.Dj,1,"allowed values are 7 and 8");return this.Ma(o,i)},X.prototype.getRoutingService=X.prototype.Dj;function Iq(){}t("H.service.extension.dataView.ITable",Iq),Iq.prototype.Kd=function(){},Iq.prototype.getMeta=Iq.prototype.Kd,Iq.prototype.Nd=function(){},Iq.prototype.getRowCount=Iq.prototype.Nd,Iq.prototype.oc=function(){},Iq.prototype.getRow=Iq.prototype.oc,Iq.prototype.Oa=function(){},Iq.prototype.getColumnNames=Iq.prototype.Oa,Iq.prototype.xe=function(){},Iq.prototype.getColumn=Iq.prototype.xe,Iq.prototype.sa=function(){},Iq.prototype.getCell=Iq.prototype.sa,Iq.prototype.concat=function(){},Iq.prototype.concat=Iq.prototype.concat;function Jq(){}t("H.service.extension.dataView.IRow",Jq),Jq.prototype.Oa=function(){},Jq.prototype.getColumnNames=Jq.prototype.Oa,Jq.prototype.sa=function(){},Jq.prototype.getCell=Jq.prototype.sa,Jq.prototype.gd=function(){},Jq.prototype.getTable=Jq.prototype.gd;function Kq(i,o){this.a=i,this.b=o}t("H.service.extension.dataView.ObjRow",Kq),Kq.prototype.Oa=function(){return this.a.Oa()},Kq.prototype.getColumnNames=Kq.prototype.Oa,Kq.prototype.sa=function(i){return this.a.sa(this.b,i)},Kq.prototype.getCell=Kq.prototype.sa,Kq.prototype.gd=function(){return this.a},Kq.prototype.getTable=Kq.prototype.gd;function Lq(){}t("H.service.extension.dataView.IColumn",Lq),Lq.prototype.sa=function(){},Lq.prototype.getCell=Lq.prototype.sa;function Mq(i,o){this.b=i,this.a=o}t("H.service.extension.dataView.ObjColumn",Mq),Mq.prototype.sa=function(i){return this.b.sa(i,this.a)},Mq.prototype.getCell=Mq.prototype.sa;function Nq(i,o,s){var _e;if(o=o||(i&&i.length?Object.keys(i[0]):B),this.wb=i,o)for(this.Ad=o,this.Jg=i=nc(),_e=o.length;_e--;)i[o[_e]]=!0;s!==B&&(this.Lh=s)}t("H.service.extension.dataView.ObjTable",Nq),p=Nq.prototype,p.Lh=B,p.wb=B,p.Ad=B,p.Jg=B,p.Kd=function(){return this.Lh},Nq.prototype.getMeta=Nq.prototype.Kd,Nq.prototype.Nd=function(){return this.wb?this.wb.length:0},Nq.prototype.getRowCount=Nq.prototype.Nd,Nq.prototype.oc=function(i){var o=this.wb;return o&&o[i]?new Kq(this,i):B},Nq.prototype.getRow=Nq.prototype.oc,Nq.prototype.Oa=function(){return this.Ad||hf},Nq.prototype.getColumnNames=Nq.prototype.Oa,Nq.prototype.xe=function(i){return this.Jg[i]?new Mq(this,i):B},Nq.prototype.getColumn=Nq.prototype.xe,Nq.prototype.sa=function(i,o){var s=this.wb;return(i=s&&this.Jg[o]&&s[i])&&i[o]},Nq.prototype.getCell=Nq.prototype.sa,Nq.prototype.concat=function(){var i=arguments.length,o,s=this.Ad,_e=""+this.Ad,_n=(this.wb||[]).slice();for(o=0;o<i;o++){var _o=arguments[o];if(!(_o instanceof Nq))throw new D(this.concat,o);if(_o.wb){if(s&&""+_o.Ad!==_e)throw new D(this.concat,o,"Incompatible columns!");_n=_n.concat(_o.wb)}}return new Nq(_n,this.Ad,this.Lh)},Nq.prototype.concat=Nq.prototype.concat;function Oq(i,o){return i.wb?i.wb.push(o):i.wb=[o],i.wb.length-1}function Pq(i){var o=Qq;if(!i||!Ac(af(i.layerId,i.layer))||!Dc(i.level)||uc(i.rowFilter)&&!Da(i.rowFilter)||uc(i.rowFilterContext)&&!Ea(i.rowFilterContext))throw new D(o,1,uc("invalid layer config")?"invalid layer config":i)}function Rq(i,o,s,_e){_e=_e||Sq,this.a={},_e.provider=i,this.invalidate=gf,Rq.l.constructor.call(this,o,_e),delete this.invalidate,s&&(this.b=s),this.pa(kh.ADD)}u(Rq,Eh),t("H.service.remote.Spatial",Rq);var Sq={};Rq.prototype.$a=function(){return this.b||Eh.prototype.$a.call(this)},Rq.prototype.getId=Rq.prototype.$a,Rq.prototype.gg=jd,Rq.prototype.retain=Rq.prototype.gg,Rq.prototype.release=ff,Rq.prototype.release=Rq.prototype.release;function Tq(i,o){this.a=i,o&&(this.b=o)}var Uq=new Tq(hf);Rq.prototype.Id=function(i){return(this.a[i.key]||Uq).a},Rq.prototype.getGeometriesForTile=Rq.prototype.Id,Rq.prototype.$g=function(i){return(this.a[i.key]||Uq).b},Rq.prototype.getLabels=Rq.prototype.$g;function Vq(i,o,s){i.a[o.key]=new Tq(s,void 0)}function Wq(i,o,s,_e){if(!Da(s))throw new D(i,o,"has invalid type");if(!Da(_e))throw new D(i,o+1,"has invalid type")}function Xq(i,o,s){var _e=i===8;this.b=o,this.c=s||jd,(this.a=i===4||_e)?this.j=_e:this.g=i===1,this.f=this.a?"$HProjGeometry":"geometry"}Xq.prototype.parse=function(i,o,s){var _e,_n,_o={},_a=[],_u,_h,ty=0;for(_u=s.length;ty<_u;ty++){var oy=s[ty],hy=oy.Rows;if(oy=hy.length){var fy=Object.keys(hy[0]).filter(function(xy){return xy!=="geometry"&&xy!=="$HProjGeometry"});for(fy=new Nq(hy,fy),_h=0;_h<oy;_h++){var vy=hy[_h];if(_n=vy[this.f]){if(delete vy[this.f],vy=fy.oc(_h))try{this.a?_e=Yq(this,i,o,vy,_n):_e=Zq(this,i,vy,_n.path),_e.ia(i),_a.push(_e)}catch(xy){this.c(xy.message)}}else this.c("Layer must contain geometries")}}}return _o[this.a?"spatials":this.g?"markers":"domMarkers"]=_a,_o};function Yq(i,o,s,_e,_n){var _o=[],_a=_n.paths,_u=_a.length,_h=0,ty=i.b&&i.b(_e);for(i=new Rq(o,i.j,B,{style:ty||i.i,data:_e});_h!==_u;)_o.push($q(_a[_h++]));return Vq(i,s,[new Mh(_o,_n.interiorsIndex,_n.outlinesIndex)]),i}function Zq(i,o,s,_e){_e=new lg(_e[0],_e[1]);var _n=i.b&&i.b(s);return i.g?(i={icon:_n,data:s,provider:o},i=new Ln(_e,i)):(i={icon:_n,data:s,provider:o},i=new $i(_e,i)),i}function $q(i){for(var o=0,s=i.length,_e=[];o<s;)_e.push(new G(i[o++],i[o++]));return _e}function ar(i,o){var s={};this.c=i,Ya(s,o||s),mk.call(this,s),this.ag={},i=this.Gb(nh.SPATIAL),i.update(i.a+1,kh.ADD)}u(ar,mk),t("H.service.remote.ObjectProvider",ar),ar.prototype.D=function(){mk.prototype.D.call(this)},ar.prototype.dispose=ar.prototype.D,ar.prototype.yc=function(){return hf},ar.prototype.requestMarkers=ar.prototype.yc,ar.prototype.xc=function(){return hf},ar.prototype.requestDomMarkers=ar.prototype.xc,ar.prototype.pd=function(){return hf},ar.prototype.requestOverlays=ar.prototype.pd,ar.prototype.Mb=ff,ar.prototype.providesMarkers=ar.prototype.Mb,ar.prototype.Lb=ff,ar.prototype.providesDomMarkers=ar.prototype.Lb,ar.prototype.wc=ff,ar.prototype.providesSpatials=ar.prototype.wc,ar.prototype.cg=function(){return hf},ar.prototype.requestSpatials=ar.prototype.cg;function br(i){return i.qc(!0)}ar.prototype.dg=function(i,o){return i=cr(this,i,dr),o&&(i=i.filter(br)),i},ar.prototype.requestSpatialsByTile=ar.prototype.dg;function cr(i,o,s){var _e=o.j&&o.j[s],_n;return!_e&&(_n=o.m)&&(delete o.m,(o.j=i=i.c.parse(i,o,_n))&&(_e=i[s])),_e||hf}ar.prototype.ba=function(i){var o=i.$a();if(this.ag[o])throw new Yc(this.ba,"Remote object "+o+" already added");return this.ag[o]=i},ar.prototype.Da=function(i){delete this.ag[i.$a()]};var dr="spatials";function er(i){i=i||{};var o=i.tileCacheSize||1024,s=i.resultType,_e=i.styleCallback;if(uc(i.min)||(i.min=12),er.l.constructor.call(this,i),fr.indexOf(s)===-1)throw new D(er,2,"invalid resultType");if(this.c=s,_e&&!Da(_e))throw new D(er,2,"invalid style callback");this.V=_e,this.Y=i.pixelRatio||Te(),this.Bb=A(this.Bb,this),this.s(new Pk(o,A(this.Ya,this))),this.createTileInternal=s===4||s===8?A(this.N,this):A(this.K,this)}u(er,T),t("H.service.extension.TileProvider",er),er.prototype.i=!1,er.prototype.getCapabilities=function(){return er.l.getCapabilities.call(this)|Oj.CROP_LINES_BY_TILE|Oj.CROP_POLYGONS_BY_TILE},er.prototype.Qa=function(i,o,s,_e){return this.i?er.l.Qa.call(this,i,o,s,_e):B},er.prototype.requestTile=er.prototype.Qa,er.prototype.Bb=function(i){this.dispatchEvent(new ud("error",Ac(i)?i:i+"",this))},er.prototype.Mb=function(){return this.c===1},er.prototype.providesMarkers=er.prototype.Mb,er.prototype.Lb=function(){return this.c===2},er.prototype.providesDomMarkers=er.prototype.Lb,er.prototype.wc=function(){return this.c===4||this.c===8},er.prototype.providesSpatials=er.prototype.wc;function gr(i){var o=i.ua;return o||(i.v||(i.v=i.u(i.c,i.V,i.Bb)),o=i.ua=new ar(i.v),o.ia(i),o.addEventListener(i.A.xa,A(i.ya,i)),o.ua=!0),o}er.prototype.K=function(i,o,s,_e){var _n=this.getTileKey(i,o,s);_n=this.Fb().get(_n);var _o=this.c==2,_a=[],_u=gr(this);for(_n?_n.valid=!0:(i=_n=new Vk(i,o,s,y),delete i.j,i.m=_e),_e=_o?cr(_u,_n,"domMarkers"):cr(_u,_n,"markers"),o=_e.length;o--;)i=_e[o],i.Bi=_n,(_o||i.rb().getState()===1)&&_a.push(i);return _n.data=_a,_n},er.prototype.ya=function(i){(i=i.target.Bi)&&(i.valid=!1)},er.prototype.ko=function(i){this.B=!!i},er.prototype.setTileCanvasRendering=er.prototype.ko,er.prototype.B=!0,er.prototype.N=function(i,o,s,_e){var _n=gr(this),_o=this.getTileKey(i,o,s),_a=this.tileSize,_u=this.Fb().get(_o);return _u||(i=_u=new Zk(_o,i,o,s,_a,this.Y,s,_n),delete i.j,i.m=_e),this.B?(_e=vp.pop(_a),_u.T(_e)||vp.push(_e,_a)):el(_u),_u},er.prototype.Ya=function(i,o){var s;if(this.c===4||this.c===8){for(i=o.Pa(),s=i.length;s--;)delete i[s].a[o.key];(i=o.Zf())&&(vp.push(i,this.tileSize),o.$f())}else for(i=o.data,s=i.length;s--;)delete i[s].Bi},er.prototype.o=function(){er.l.o.call(this),gr(this).D()};var hr={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};er.ResultType=hr;var fr=[1,2,4,8];function Qq(i,o,s){var _e=this,_n=o&&o.rowFilter,_o=s.resultType;Qq.l.constructor.call(this,s),C(i,ir,Qq,0),Pq(o),_n?(s=Wa(o),s.rowFilter=_n.toString()):s=Wa(o),delete s.layer,s.layerId=af(o.layerId,o.layer),new Pf().a("pde","H.service.extension.worker.processor"),i=i.C().clone().F(jr+"."+kr).I({meta:1}),new Sf("pde",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:_o===4,serverUrl:i.toString(),layerConfigs:[s],horizontalMargin:1}]}).then(function(){_e.i=!0,_e.Sa()},this.Bb)}u(Qq,er),t("H.service.extension.platformData.TileProvider",Qq),Qq.prototype.u=function(i,o,s){return i=new Xq(i,o,s),i.i=lr,i};var lr=new wh({strokeColor:"transparent",fillColor:"transparent",lineWidth:0,lineJoin:"round",lineCap:"round"});Qq.prototype.G=function(i,o,s,_e,_n){var _o=this,_a=this.getTileKey(i,o,s),_u;_a=this.Fb().get(_a);var _h={cancel:jd},ty=!0,oy=this.c;if(_a&&(oy===4||oy===8?_a.Sd()||(_e(vp.pop(this.tileSize),null),ty=!1):(_e(y),ty=!1)),ty){var hy=tp.setTimeout(function(){_u=new Sf("pde",{message:[_o.uid,1,[i,o,s]]}),_u.then(_e,_n)},500);_h.cancel=function(){_u?_u.cancel():tp.clearTimeout(hy)}}return _h},Qq.prototype.requestInternal=Qq.prototype.G,Qq.prototype.o=function(){Qq.l.o.call(this),new Sf("pde",{message:[this.uid,3]})},Qq.ResultType=hr;function mr(i,o,s,_e,_n,_o){Wq(mr,1,o,s),Wq(mr,2,_e,_n),(this.f=i.length)?(this.R=i,this.s=o,this.i=s,this.b=0,this.c=A(this.c,this),this.m=_e,this.j=_n,this.a=nc(),Ya(this.a,nr,_o||{}),this.g={},x.setTimeout(this.c,0)):o(hf,!0)}var nr={duration:100,Ll:"geometry",Kl:"WKT",eo:"searchAttributes",aj:B};mr.prototype.c=function(){for(var i=[],o=!1,s=Jk(),_e;this.b<this.f;){var _n=this.R[this.b];if(o=_n.attributes,_e=_n.layerId||this.a.aj,_n.distance&&(o[this.a.eo]={nearest:new lg(_n.nearestLat,_n.nearestLon),distance:_n.distance}),_n=_n[this.a.Ll]){try{var _o=Qn(new ko(_n))}catch(_a){this.i(new x.Error(_a.message)),o=!0;break}o[this.a.Kl]=_o}if((_n=this.g[_e])||(_n=this.g[_e]=this.m({layerId:_e,columnNames:Object.keys(o)})),o=this.j(_n,o),i.push(o),this.b++,(o=this.b===this.f)||Jk()-s>=this.a.duration){this.s(i,o);break}}o?this.g={}:this.u=x.setTimeout(this.c,0)},mr.prototype.cancel=function(){x.clearTimeout(this.u),this.b<this.f&&this.i(new x.Error("parsing canceled"))},mr.prototype.cancel=mr.prototype.cancel;function or(i){this.a=i}or.prototype.cancel=function(){for(var i=this.a,o=i.length;o--;)i[o].cancel();i.length=0},or.prototype.cancel=or.prototype.cancel;function ir(i){ir.l.constructor.call(this,ir,i)}u(ir,Vp),t("H.service.extension.platformData.Service",ir),ir.prototype.Ia=function(){return{subDomain:"s.fleet.ls",path:"1"}},ir.CONFIG_KEY="platformData",ir.prototype.request=function(i,o,s,_e,_n){var _o="text/plain";if(!i)throw new D(this.request,0,i);if(!o)throw new D(this.request,1,o);if(!_e)throw new D(this.request,3,_e);if(!_n)throw new D(this.request,4,_n);return i=this.C().clone().F(i+"."+o).I(s),o===pr.JSON&&(_o="application/json"),this.G(i,_e,_n,_o)},ir.prototype.request=ir.prototype.request;var jr="tiles";ir.EntryPoint={DOC_ATTRIBUTES:"doc/attributes",DOC_LAYER:"doc/layer",DOC_LAYERS:"doc/layers",DOC_MAPS:"doc/maps",DOC_INDEXES:"doc/indexes",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SERVICE_CONFIGURATION:"serviceconfiguration",STATIC:"static",TILE:"tile",TILES:jr,FILE:"file",INDEX:"index"};var kr="json",pr={TXT:"txt",JSON:kr,HTML:"html",BIN:"bin"};ir.EntryPointType=pr,ir.prototype.ic=function(i,o){var s=o&&o.resultType;i=new Qq(this,i,o);var _e;return s==1||s===2?_e=new Mn(i):_e=new ql(i),_e},ir.prototype.createTileLayer=ir.prototype.ic;function qr(i,o,s,_e,_n){var _o=[],_a,_u=s.layer_id||s.layer_ids;return i=i.request(o,kr,s,function(_h){_a=new mr(_h.geometries,_e,_n,function(ty){return new Nq([],ty.columnNames,ty)},function(ty,oy){return ty.oc(Oq(ty,oy))},{aj:_u}),_o.push(_a)},function(_h){_n(new x.Error(_h))}),_o.push(i),new or(_o)}function rr(i,o,s){if(!zc(i))throw new D(s,0,"has invalid type");if(!zc(o))throw new D(s,1,"has invalid type");if(i.length!==o.length||!i.length)throw new D(s,1,"specify one key attribute for each given layer id in the same order")}ir.prototype.zc=function(i,o,s,_e,_n,_o){function _a(ty,oy){oy&&_u--,_e(ty,!_u)}var _u,_h=[];for(rr(i,o,this.zc),Wq(this.zc,3,_e,_n),C(s,K,this.zc,2),s={bbox:s.c+","+s.a+";"+s.f+","+s.b},_o&&Ya(s,_o),i=s.layer_id?[s.layer_id]:i,_o=0,_u=i.length;_o<_u;_o++)s.layer_id=i[_o],s.key_attribute=o[_o],_h.push(qr(this,"search/bbox",s,_a,_n));return new or(_h)},ir.prototype.searchByBoundingBox=ir.prototype.zc,ir.prototype.Ob=function(i,o,s,_e,_n,_o,_a){if(rr(i,o,this.Ob),C(s,lg,this.Ob,2,"has invalid type"),!Dc(_e))throw new D(this.Ob,3,"has invalid type");return Wq(this.Ob,4,_n,_o),i={layer_ids:i.join(","),key_attributes:o.join(","),proximity:s.lat+","+s.lng+","+_e},_a&&Ya(i,_a),qr(this,"search/proximity",i,_n,_o)},ir.prototype.searchByProximity=ir.prototype.Ob,ir.prototype.Nb=function(i,o,s,_e,_n,_o,_a){var _u="";if(rr(i,o,this.Nb),!Ac(s)&&!C(s,L))throw new D(this.Nb,1,"has invalid type");if(!Dc(_e))throw new D(this.Nb,2,"has invalid type");if(Wq(this.Nb,4,_n,_o),i={layer_ids:i.join(","),key_attributes:o.join(","),radius:_e},Ac(s))i.route_id=s;else{for(_e=s.X,s=0,o=_e.length;s<o;s+=3)_u+=_e[s]+","+_e[s+1],s<o-3&&(_u+=";");i.corridor=_u}return _a&&Ya(i,_a),qr(this,"search/corridor",i,_n,_o)},ir.prototype.searchByCorridor=ir.prototype.Nb,X.prototype.Cj=function(i){return sp(X.prototype.Cj),this.Ma(ir,i)},X.prototype.getPlatformDataService=X.prototype.Cj;function sr(i){sr.l.constructor.call(this,sr,i)}u(sr,Vp),t("H.service.extension.geofencing.Service",sr),sr.prototype.Ia=function(){return{subDomain:"fleet.ls",path:"2"}},sr.CONFIG_KEY="geofencing",sr.prototype.request=function(i,o,s,_e){if(!i)throw new D(this.request,0,i);if(!Da(s))throw new TypeError("onResult must be a function");if(!Da(_e))throw new TypeError("onError must be a function");return i=this.C().clone().F(i+".json").I(o),this.G(i,s,_e)},sr.prototype.request=sr.prototype.request,sr.prototype.a=function(i){return Error(i.issues&&i.issues.length?i.issues.map(function(o){return o.message}).join(". "):i.message||i.response_code)},sr.EntryPoint={SEARCH_PROXIMITY:"search/proximity"},X.prototype.uj=function(i){return sp(X.prototype.uj),this.Ma(sr,i)},X.prototype.getGeofencingService=X.prototype.uj,t("H.service.extension.customLocation.Permission",{READ:"read",WRITE:"write",EXPORT:"export"}),t("H.service.extension.customLocation.Storage",{READONLY:"readonly",UPDATABLE:"updatable"});function tr(i){var o=ur;if(!i||!Ac(i.layerId)||uc(i.rowFilter)&&!Da(i.rowFilter)||uc(i.rowFilterContext)&&!Ea(i.rowFilterContext))throw new D(o,1,uc("invalid layer config")?"invalid layer config":i)}function vr(i){return Ac(i)&&/^[A-Z][A-Z0-9_]*$/.test(i)}function wr(i){for(var o=i&&i.length,s=2<=o&&i[--o]==="WKT"&&i[--o]==="GEOMETRY_ID";s&&o--;)s=vr(i[o]);return s}function xr(i,o){var s="",_e=[];if(o){var _n=i.geometries;if(_n&&_n.length){var _o=Object.keys(_n[0].attributes);for(s=s+("Meta:	"+o+`
`)+_o.join("	"),s+=`	WKT
`,i=0;i<_n.length;i++){var _a=_n[i].attributes,_u=_n[i].geometry;for(o=0;o<_o.length;o++)_e.push(_a[_o[o]]);s+=_e.join("	"),s+="	"+_u+`
`,_e=[]}}}else{if(_u={},_e=[],i.geometries)for(_n=0;_n<i.geometries.length;_n++)o=i.geometries[_n],_u[o.layerId]||(_u[o.layerId]=[]),_u[o.layerId].push(o);for(_o in _u)_e.push({layerId:_o,geometries:_u[_o]});for(i=0;i<_e.length;i++)s+=xr(_e[i],_e[i].layerId)}return s}function ur(i,o,s){var _e=this,_n=o&&o.rowFilter,_o;ur.l.constructor.call(this,s),C(i,yr,ur,0);var _a=s.resultType;if(tr(o),_n){var _u=Wa(o);_u.rowFilter=_n.toString()}else _u=o;new Pf().a("cle","H.service.extension.worker.processor");var _h=o.layerId;i.request(zr,Ar,{detail_level:"all",layer_id:_h},function(ty){ty=ty.layers;var oy;for(oy=0;oy<ty.length;oy++)if(ty[oy].layerId===_h){_u.level=ty[oy].level;break}_o=i.C().clone().F(Br+"."+Ar).I({meta:1}),new Sf("cle",{message:[_e.uid,0,{tileSize:_e.tileSize,projected:!0,onlyOutline:_a===4,serverUrl:_o.toString(),layerConfigs:[_u],batchTiles:!1,horizontalMargin:1}]}).then(function(){_e.i=!0,_e.Sa()},_e.Bb)},function(ty){_e.Bb(ty.message)})}u(ur,er),t("H.service.extension.customLocation.TileProvider",ur),ur.prototype.u=function(i,o,s){return new Xq(i,o,s)},ur.prototype.G=function(i,o,s,_e,_n){var _o=this,_a=this.getTileKey(i,o,s),_u;_a=this.Fb().get(_a);var _h={cancel:jd},ty=!0,oy=this.c;if(_a&&(oy===4||oy===8?_a.Sd()||(_e(vp.pop(this.tileSize),null),ty=!1):(_e(y),ty=!1)),ty){var hy=tp.setTimeout(function(){_u=new Sf("cle",{message:[_o.uid,1,[i,o,s]]}),_u.then(_e,_n)},500);_h.cancel=function(){_u?_u.cancel():tp.clearTimeout(hy)}}return _h},ur.prototype.requestInternal=ur.prototype.G,ur.prototype.o=function(){ur.l.o.call(this),new Sf("cle",{message:[this.uid,3]})};function Cr(){if(Dr)throw new Yc(Cr)}t("H.service.extension.customLocation.Table",Cr);var Dr=!0;function Er(i,o){var s;Dr=!1;var _e=new Cr;Dr=!0,_e.c=qc(x.JSON.parse(x.JSON.stringify(i))),i=i.columnNames;var _n=nc();for(s=i.length;s--;)_n[i[s]]=s;if(_e.f=_n,_e.b=i.length,o){if(o.length%i.length)throw new D(Er,1,"Invalid number of cells")}else o=[];return _e.a=o,_e}Cr.prototype.Kd=function(){return this.c},Cr.prototype.getMeta=Cr.prototype.Kd,Cr.prototype.Nd=function(){return this.a.length/this.b},Cr.prototype.getRowCount=Cr.prototype.Nd,Cr.prototype.oc=function(i){return i<this.a.length/this.b?new Fr(this,i):B},Cr.prototype.getRow=Cr.prototype.oc,Cr.prototype.Nm=function(){var i=this.a.length/this.b,o,s=new x.Array(i);for(o=0;o<i;o++)s[o]=new Fr(this,o);return s},Cr.prototype.getRows=Cr.prototype.Nm,Cr.prototype.Bg=function(i){var o=this.b,s=this.a,_e=s.length/this.b;if(!i||i.length%o)throw new D(this.Bg,0,"Invalid number of cells");return this.a=s.concat(i),_e},Cr.prototype.addCells=Cr.prototype.Bg,Cr.prototype.pl=function(){for(var i=this.b,o=this.a,s=this.a.length/this.b;i--;)o.push(y);return this.oc(s)},Cr.prototype.addRow=Cr.prototype.pl,Cr.prototype.Oa=function(){return this.c.columnNames},Cr.prototype.getColumnNames=Cr.prototype.Oa,Cr.prototype.xe=function(i){return this.f[i]===B?B:new Gr(this,i)},Cr.prototype.getColumn=Cr.prototype.xe,Cr.prototype.sa=function(i,o){return this.a[i*this.b+this.f[o]]},Cr.prototype.getCell=Cr.prototype.sa,Cr.prototype.Ac=function(i,o,s){if(o=this.f[o],i>=this.a.length/this.b)throw new D(this.Ac,0,"Row index out of bounds");if(o===B)throw new D(this.Ac,0,"Column unknown");this.a[i*this.b+o]=s},Cr.prototype.setCell=Cr.prototype.Ac,Cr.prototype.concat=function(i){var o=arguments.length,s,_e=""+this.Oa(),_n=this.a?this.a.slice():[];for(s=0;s<o;s++){var _o=arguments[s];if(!(_o instanceof Cr))throw new D(this.concat,s);if(""+_o.Oa()!==_e)throw new D(this.concat,s,"Incompatible columns!");_o.a&&(_n=_n.concat(_o.a))}return Er(this.c,_n)},Cr.prototype.concat=Cr.prototype.concat;var Hr=/(\n|\t|\r|")/;Cr.prototype.zi=function(i,o){var s,_e=this.b,_n=this.Oa(),_o=[],_a=[],_u=this.a,_h=-1;for(s=0;s<_e;s++)(!i||i.test(_n[s]))&&(_n[s]==="WKT"&&(_h=_o.length),_o.push(s));if(!(i=_o.length))throw new D(this.zi,1,"No columns filtered");if(Ir(this,_a,_n,0,_e,_o,i,_h),o){var ty=o.length;for(s=0;s<ty;s++)_a.push(`
`),_n=o[s],Ir(this,_a,_u,_n,_e,_o,i,_h)}else for(ty=this.Nd(),_n=0;_n<ty;_n++)_a.push(`
`),Ir(this,_a,_u,_n,_e,_o,i,_h);return _a.join("")};function Ir(i,o,s,_e,_n,_o,_a,_u){var _h;for(_h=0;_h<_a;_h++){_h&&o.push("	");var ty=s[_e*_n+_o[_h]];if(_h!==_u){if(ty!==y){if(ty=String(ty),Hr.test(ty))throw new D(i.zi,0,'Invalid character (\\n, \\r, \\t, or ") in row '+_e+" column "+i.c.columnNames[_o[_h]]);o.push(ty)}}else o.push(ty)}}function Gr(i,o){this.b=i,this.a=o}Cr.Column=Gr,Gr.prototype.sa=function(i){return this.b.sa(i,this.a)},Gr.prototype.getCell=Gr.prototype.sa,Gr.prototype.Ac=function(i,o){this.b.Ac(i,this.a,o)},Gr.prototype.setCell=Gr.prototype.Ac;function Fr(i,o){this.a=i,this.Gh=o}Cr.Row=Fr,Fr.prototype.Oa=function(){return this.a.Oa()},Fr.prototype.getColumnNames=Fr.prototype.Oa,Fr.prototype.sa=function(i){return this.a.sa(this.Gh,i)},Fr.prototype.getCell=Fr.prototype.sa,Fr.prototype.Ac=function(i,o){this.a.Ac(this.Gh,i,o)},Fr.prototype.setCell=Fr.prototype.Ac,Fr.prototype.gd=function(){return this.a},Fr.prototype.getTable=Fr.prototype.gd;function Jr(i){if(i===B)i="	";else if(!/^[^"\r\n]$/.test(i))throw new D(Jr,0);this.c=String(i).charCodeAt(0),this.Hh=A(this.Hh,this),this.a=Kr}var Kr=0;p=Jr.prototype,p.getState=function(){return this.a};function Lr(i,o,s){var _e=i.a;if(_e!==o)throw _e===1&&(i.a=Kr),new Yc(s,"Requires state: "+["READY","PARSE","PAUSE"][o]+" but found "+["READY","PARSE","PAUSE"][_e])}p.abort=function(){Lr(this,2,Jr.prototype.abort),this.a=Kr},p.Hh=function(i){throw this.a=Kr,new D(Jr.prototype.parse,0,"Malformed DSV at row "+this.b.j+" column "+this.b.b+": "+i)};function Mr(i,o){var s=[];return i.parse(o,function(_e,_n,_o){return 1>_e&&(s[_n]=_o),0<_e}),i.a=Kr,s}p.parse=function(i,o,s){Lr(this,Kr,Jr.prototype.parse),i=i.trim(),this.b=new Nr(i,this.c,this.Hh),this.f=o,this.mk=s||gf,this.a=2,this.Ih()},p.mk=gf,p.Ih=function(){var i=this.b,o=[];Lr(this,2,Jr.prototype.Ih),this.a=1;do{if(!i.g){this.a=Kr;break}if(_n>i.b){if(s!==void 0&&s!==_n){this.b.a("The number of columns must be the same for all rows");return}var s=_n}var _e=i.j,_n=i.b,_o=i.nf,_a=this.mk(_e,_n,i);if(i.nf>_o)for(;i.next()!==-1;);else{for(;(_o=i.next())!==-1;)o.push(_o);_a=String.fromCharCode.apply(y,o),o.length=0}Or(i),this.f(_e,_n,_a)&&(this.a=i.g?2:Kr)}while(this.a===1);this.a!=2&&s!==void 0&&0<_n&&s!==_n&&this.b.a("The number of columns must be the same for all rows")};function Nr(i,o,s){this.c=new ko(i),this.m=o,this.g=!0,this.nf=this.j=this.b=0,Or(this),this.a=s,this.f=[],this.i=!1}p=Nr.prototype,p.nf=0;function Or(i){var o=i.c.Kb();i.s=!1,(i.R=o===34)&&i.c.next()}function Pr(i,o){var s=i.c;switch(i.s=!0,o){case i.m:i.b++;break;case 13:s.next(),s.Kb()!==10&&i.a("CR without LF");case 10:i.b=0,i.j++;break;case-1:i.g=!1;break;default:i.a("End of field expected")}return s.next(),-1}p.Kb=function(){if(this.s)var i=-1;else{var o=this.c;if(i=o.Kb(),this.R)switch(i){case 34:o.next(),i=o.Kb(),i!==34&&(i=Pr(this,i));break;case-1:this.a("Closing quotation mark expected")}else switch(i){case 34:this.a("Unexpected quotation mark");case this.m:case 13:case 10:case-1:i=Pr(this,i)}}return i},p.de=function(){this.i=!0,this.f=[]},p.Dd=function(){var i=this.f.slice();return this.i=!1,this.f=[],i},p.next=function(){var i=this.Kb();return i!==-1&&this.c.next(),this.i&&this.f.push(i),this.nf++,i};function Qr(i,o,s,_e){if(_e=_e||{},!o)throw new D(Qr,1,"has to be a function");if(!s)throw new D(Qr,2,"has to be a function");for(this.m=o,this.u=s,this.a=[],this.g={},this.f=[],this.b={},this.i={},this.j={},this.s={},this.R=_e.duration||100,this.c=A(this.c,this),i=i.split("Meta:	").slice(1),o=0;o<i.length;o++){_e=i[o].split(`
`),s=_e[0].split("	")[0],_e=_e.slice(1).join(`
`),this.b[s]=new Jr,this.g[s]=Mr(this.b[s],_e);var _n={layerId:s,columnNames:this.g[s]};this.f.push(s),this.s[s]=Er(_n),this.i[s]=Jk(),Rr(this,_e,s),this.c(s)}}function Rr(i,o,s){var _e=[],_n=i.g[s].length-1,_o=i.s[s];try{i.b[s].parse(o,function(_a,_u,_h){var ty=!1;return 0<_a&&(_e[_u]=_h,_u===_n&&(i.a.push(_o.oc(_o.Bg(_e))),Jk()-i.i[s]>i.R&&(ty=!0))),ty},function(_a,_u,_h){if(0<_a&&_u===_n)return Qn(_h)})}catch(_a){i.u(_a)}}Qr.prototype.cancel=function(){for(var i in this.j)x.clearTimeout(this.j[i])},Qr.prototype.cancel=Qr.prototype.cancel,Qr.prototype.c=function(i){var o=this,s,_e;this.j[i]=x.setTimeout(function(){if(o.b[i].getState()===2)o.i[i]=Jk(),o.m(o.a,!1),o.a=[],o.b[i].Ih(),o.c(i);else{for(s=!0,_e=0;_e<o.f.length;_e++)if(o.b[o.f[_e]].getState()!==Kr){s=!1;break}s&&(0<o.a.length&&o.m(o.a,!0),o.a=[])}},0)};function yr(i){yr.l.constructor.call(this,yr,i)}u(yr,Vp),t("H.service.extension.customLocation.Service",yr),yr.prototype.Ia=function(){return{subDomain:"fleet.ls",path:"2"}},yr.CONFIG_KEY="customLocation",yr.prototype.ic=function(i,o){var s=o&&o.resultType;i=new ur(this,i,o);var _e;return s===1||s===2?_e=new Mn(i):_e=new ql(i),_e},yr.prototype.createTileLayer=yr.prototype.ic;function Sr(i,o,s,_e){var _n;i=i===Tr?"changes":"file";var _o=o[i],_a=Ac(_o),_u=!_a&&C(_o,Blob);if(!_a&&!_u)throw new D(_e,0,"Invalid "+i+" parameter");if(Ur)_u?_n=_o:_n=pf(_o,"text/plain"),_e=new x.FormData,_e.append(i,_n,_n.name||i+".wkt"),s.method="POST",s.data=_e,delete o[i];else if(_u)throw new D(_e,0,"Sending Blob data is not supported by the browser")}var Ur=x.FormData&&!!x.FormData.prototype.append;yr.prototype.request=function(i,o,s,_e,_n){return Vr(this,i,o,s,_e,_n)},yr.prototype.request=yr.prototype.request;function Vr(i,o,s,_e,_n,_o){var _a="text/plain",_u=o===Wr.LAYERS_UPLOAD||o===Wr.LAYERS_MODIFY||o===Wr.LAYERS_IMPORT,_h=_e,ty={data:B,method:"GET",headers:i.g};if(!o)throw new D(i.request,0,o);if(!s)throw new D(i.request,1,s);Wq(i.request,3,_n,_o),_u&&(C(_e,Object,i.request,2,"Invalid request parameters"),_h=Wa(_e),Sr(o,_h,ty,i.request));var oy=i.C().clone().F(o+"."+s).I(_h);return s===Xr.JSON&&(_a="application/json"),i=new tf(_a,oy.toString(),he,ty),i.then(function(hy){var fy=hy.issues;fy&&hy.error_id&&hy.response_code?_o(Error(fy[0].message)):_n(hy)},function(hy){hy.type==="error"||hy.status===404?_o(Error(hy.statusText||"Unable to load data")):hy.json().then(function(fy){_o(Error("["+fy.issues[0].message+"] "+oy+" request failed"))},function(){_o(Error("["+hy.statusText+"] "+oy+" request failed"))})}),i}var zr="layers/list",Tr="layers/modify",Br="tiled/tile",Wr={LAYERS_DELETE:"layers/delete",LAYERS_GRANT:"layers/access/grant",LAYERS_LIST:zr,LAYERS_MODIFY:Tr,LAYERS_UPLOAD:"layers/upload",LAYERS_IMPORT:"layers/import",SEARCH_ALL:"search/all",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SEARCH_TILE:Br};yr.EntryPoint=Wr;var Ar="json",Xr={TXT:"txt",JSON:Ar};yr.EntryPointType=Xr,yr.prototype.jb=function(i,o,s){var _e=this;return this.request("search/all","txt",{filter:'WKT==""',layer_id:i},function(_n){var _o=String(_n).replace(/[\r\n]+$/g,"").split("	");_e.request(zr,Ar,{layer_id:i,detail_level:"all"},function(_a){_a=_a.layers[0],_a.columnNames=_o,o(Er(_a))},s)},s)},yr.prototype.getLayer=yr.prototype.jb,yr.prototype.Kj=function(i,o,s,_e){function _n(){return++_a<_o?_u.request("layers/access/grant",Ar,{layer_id:i,granted_app_id:o[_a].grantedAppId,permissions:o[_a].permissions.join(",")},_n,_e):_u.jb(i,s,_e)}var _o=o&&o.length,_a=-1,_u=this;return _n()},yr.prototype.grantAccess=yr.prototype.Kj,yr.prototype.cj=function(i,o,s){return this.request("layers/delete",Ar,{layer_ids:i},o,s)},yr.prototype.deleteLayer=yr.prototype.cj,yr.prototype.cd=function(i,o,s){function _e(){setTimeout(function(){_h.jb(_a,function(fy){setTimeout(_n.bind(null,fy),oy)},function(){64e3>ty?(ty+=oy,_e()):s(x.Error("Timeout"))})},oy),oy*=2}function _n(fy){var vy=JSON.stringify(fy.Oa()),xy=i.grants;if(vy!==JSON.stringify(_u)){var wy="Results into different column names on the backend: "+vy;setTimeout(function(){_h.cj(_a,function(){s(x.Error(wy))},function(By){s(x.Error(wy+". "+By.message))})},oy)}else xy&&xy.length?_h.Kj(_a,xy,o,s):o(fy)}var _o,_a,_u,_h=this,ty=0,oy=1e3,hy=!i||!vr(_a=i.layerId)&&(_o="layerId")||!wr(_u=i.columnNames)&&(_o="columnNames")?0:Da(o)?Da(s)?-1:2:1;if(0<=hy)throw new D(_h.cd,hy,_o||arguments[hy]);return _h.jb(_a,function(){s(x.Error("Layer exists already"))},function(){var fy={layer_id:_a,file:_u.join("	")},vy=i.level,xy=i.storage;vy!==B&&(fy.level=vy),xy!==B&&(fy.storage=xy),_h.request("layers/upload",Ar,fy,_e,s)})},yr.prototype.createLayer=yr.prototype.cd;function Yr(i,o,s,_e,_n){var _o=[],_a;return i=i.request(o,Ar,s,function(_u){_u.geometries.length?(_u=xr(_u,s.layer_id),_a=new Qr(_u,_e,_n),_o.push(_a)):_e(hf,!0)},_n),_o.push(i),new or(_o)}yr.prototype.Ob=function(i,o,s,_e,_n,_o){if(!zc(i))throw new D(this.Ob,0,"has invalid type");if(C(o,lg,this.Ob,1,"has invalid type"),!Dc(s))throw new D(this.Ob,2,"has invalid type");return Wq(this.Ob,3,_e,_n),i={layer_ids:i.join(","),proximity:o.lat+","+o.lng+","+s},_o&&Ya(i,_o),Yr(this,"search/proximity",i,_e,_n)},yr.prototype.searchByProximity=yr.prototype.Ob,yr.prototype.Nb=function(i,o,s,_e,_n,_o){var _a="";if(!zc(i))throw new D(this.Nb,0,"has invalid type");if(!Ac(o)&&!C(o,L))throw new D(this.Nb,1,"has invalid type");if(!Dc(s))throw new D(this.Nb,2,"has invalid type");if(Wq(this.Nb,3,_e,_n),i={layer_ids:i.join(","),radius:s},Ac(o))i.route_id=o;else{var _u=o.X;for(o=0,s=_u.length;o<s;o+=3)_a+=_u[o]+","+_u[o+1],o<s-3&&(_a+=",");i.corridor=_a}return _o&&Ya(i,_o),Yr(this,"search/corridor",i,_e,_n)},yr.prototype.searchByCorridor=yr.prototype.Nb,yr.prototype.zc=function(i,o,s,_e,_n){function _o(_h,ty){ty&&_u--,s(_h,!_u)}var _a=[],_u;if(!zc(i))throw new D(this.zc,0,"has invalid type");for(C(o,K,this.zc,1,"has invalid type"),Wq(this.zc,2,s,_e),o={bbox:o.c+","+o.a+";"+o.f+","+o.b},_n&&Ya(o,_n),i=o.layer_id?[o.layer_id]:i,_n=0,_u=i.length;_n<_u;_n++)o.layer_id=i[_n],_a.push(Yr(this,"search/bbox",o,_o,_e));return new or(_a)},yr.prototype.searchByBoundingBox=yr.prototype.zc,yr.prototype.ei=function(i,o,s,_e){var _n,_o=[];if(!Ac(i))throw new D(this.ei,0,"has invalid type");Wq(this.ei,1,o,s);var _a={layer_id:i};return _e&&Ya(_a,_e),_e=this.request("search/all",Ar,_a,function(_u){_u.geometries.length?(_u=xr(_u,i),_n=new Qr(_u,o,s),_o.push(_n)):o(hf,!0)},s),_o.push(_e),new or(_o)},yr.prototype.searchAll=yr.prototype.ei;var Zr={delete:/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};function $r(i,o,s,_e,_n,_o){function _a(){xy++,_e(this,xy===fy)}function _u(Py){xy++,_n(Py,this,xy===fy)}var _h=o!=="append",ty,oy={},hy=nc(),fy=0,vy=[],xy=0;if(!zc(s))throw new D(_o,0,s);for(Wq(_o,1,_e,_n),ty=s.length;ty--;){var wy=s[ty];if(C(wy,Fr)){var By=wy.gd().Kd().layerId,Sy=wy.sa("GEOMETRY_ID");if(_h){if(Sy===y||String(Sy)==="")var Ay='GEOMETRY_ID must not be null or ""';oy[Sy=By+"_"+Sy]&&(Ay="same GEOMETRY_ID for multiple rows"),oy[Sy]=wy}else Sy!==y&&String(Sy)!==""&&(Ay='GEOMETRY_ID must be null or ""')}else Ay="Invalid type";if(Ay)throw new D(_o,0,"- Invalid row at index "+ty+", "+Ay);Sy=hy[By],Sy||(Sy=hy[By]=[],fy++),Sy.push(wy)}for(By in hy){for(Sy=hy[By],s=[],ty=Sy.length;ty--;)s.push(Sy[ty].Gh);vy.push(i.request(Tr,Ar,{layer_id:By,action:o,changes:Sy[0].gd().zi(Zr[o]||null,s)},A(_a,Sy),A(_u,Sy)))}return new or(vy)}yr.prototype.Ti=function(i,o,s){return $r(this,"append",i,o,s,this.Ti)},yr.prototype.appendRows=yr.prototype.Ti,yr.prototype.jl=function(i,o,s){return $r(this,"update",i,o,s,this.jl)},yr.prototype.updateRows=yr.prototype.jl,yr.prototype.dj=function(i,o,s){return $r(this,"delete",i,o,s,this.dj)},yr.prototype.deleteRows=yr.prototype.dj,X.prototype.oj=function(i){return sp(X.prototype.oj),this.Ma(yr,i)},X.prototype.getCustomLocationService=X.prototype.oj;function as(i){bq.l.constructor.call(this,as,i)}u(as,Vp),t("H.service.extension.customRoute.Service",as),as.prototype.Ia=function(){return{subDomain:"s.fleet.ls",path:"2"}},as.CONFIG_KEY="customRoute",as.prototype.a=function(i){return Error(i.issues&&i.issues.length?i.issues.map(function(o){return o.message}).join(". "):i)},as.prototype.zd=function(i,o,s){return Wq(this.zd,1,o,s),i=this.C().clone().F("calculateroute.json").I(i),this.G(i,o,s)},as.prototype.calculateRoute=as.prototype.zd,X.prototype.pj=function(i){return sp(X.prototype.pj),this.Ma(as,i)},X.prototype.getCustomRoutingService=X.prototype.pj;function bs(i){bs.l.constructor.call(this,bs,i)}u(bs,Vp),t("H.service.SearchService",bs),bs.CONFIG_KEY="search",bs.prototype.Ia=function(){return{subDomain:"search",path:"v1"}},bs.prototype.a=function(i){return i=[i.title,i.action,i.cause].filter(function(o){return o}),Error(i.join(". "))},bs.prototype.Tg=function(i,o,s){return i=this.C().clone().za("geocode").F("geocode").I(i),this.G(i,o,s)},bs.prototype.geocode=bs.prototype.Tg,bs.prototype.bi=function(i,o,s){return i=this.C().clone().za("revgeocode").F("revgeocode").I(i),this.G(i,o,s)},bs.prototype.reverseGeocode=bs.prototype.bi,bs.prototype.tl=function(i,o,s){return i=this.C().clone().za("autosuggest").F("autosuggest").I(i),this.G(i,o,s)},bs.prototype.autosuggest=bs.prototype.tl,bs.prototype.Al=function(i,o,s){return i=this.C().clone().za("discover").F("discover").I(i),this.G(i,o,s)},bs.prototype.discover=bs.prototype.Al,bs.prototype.wn=function(i,o,s){return i=this.C().clone().za("lookup").F("lookup").I(i),this.G(i,o,s)},bs.prototype.lookup=bs.prototype.wn,bs.prototype.vl=function(i,o,s){return i=this.C().clone().za("browse").F("browse").I(i),this.G(i,o,s)},bs.prototype.browse=bs.prototype.vl,X.prototype.Pm=function(i){return this.Ma(bs,i)},X.prototype.getSearchService=X.prototype.Pm;function cs(i){if(this.c=!!i.toBypassToken,!this.c&&!i.token)throw new D(cs,0,'"token" must be specified');cs.l.constructor.call(this,cs,i),this.j=i.token,this.f={},this.b={}}u(cs,Vp),t("H.service.xyz.Service",cs),cs.prototype.Ia=function(){return{host:"xyz.api.here.com",path:"hub/spaces"}},cs.prototype.a=function(i){return Error(i.errorMessage||i.message)},cs.prototype.eh=function(i,o,s){return xc(i,"String",this.eh,0,'"projectId" must be a string'),ds(this.eh,1,o,s),i=es(this.C().clone().td("project-api/projects/"+i)),this.G(i,o,s)},cs.prototype.getProject=cs.prototype.eh,cs.prototype.Ej=function(i,o,s){return ds(this.Ej,0,i,o),s=fs(this,this.C().clone().I(s||{})),this.G(s,i,o)},cs.prototype.getSpaces=cs.prototype.Ej,cs.prototype.Ff=function(i,o,s){return xc(i,"String",this.Ff,0,'"spaceId" must be a string'),ds(this.Ff,1,o,s),i=fs(this,this.C().clone().F(i)),this.G(i,o,s)},cs.prototype.getSpace=cs.prototype.Ff,cs.prototype.Od=function(i,o,s){return xc(i,"String",this.Od,0,'"spaceId" must be a string'),ds(this.Od,1,o,s),i=fs(this,this.C().clone().F(i+"/statistics")),this.G(i,o,s)},cs.prototype.getStatistics=cs.prototype.Od,cs.prototype.Af=function(i,o,s,_e,_n,_o,_a){return i=fs(this,this.C().clone().F(_e+"/tile/web/"+s+"_"+i+"_"+o+".mvtf").I(Object.assign({clip:!0},_a))),this.G(i,function(_u){return _u.arrayBuffer().then(_n)},_o,"arraybuffer")},cs.prototype.search=function(i,o,s,_e){return xc(i,"String",this.search,0,'"spaceId" must be a string'),ds(this.search,1,o,s),i=fs(this,this.C().clone().F(i+"/search").I(_e||{})),this.G(i,o,s)},cs.prototype.search=cs.prototype.search,cs.prototype.Nc=function(i,o,s,_e){if(xc(i,"String",this.Nc,0,'"spaceId" must be a string'),!Ea(o))throw new D(this.Nc,1,'"params" must be an object');return ds(this.Nc,2,s,_e),i=fs(this,this.C().clone().F(i+"/features").I(o)),this.G(i,s,_e)},cs.prototype.getFeaturesById=cs.prototype.Nc,cs.prototype.Hd=function(i,o,s,_e){if(xc(i,"String",this.Hd,0,'"spaceId" must be a string'),!Ea(o))throw new D(this.Nc,1,'"params" must be an object');return ds(this.Hd,2,s,_e),i=fs(this,this.C().clone().F(i+"/bbox").I(o)),this.G(i,s,_e)},cs.prototype.getFeaturesByBoundingBox=cs.prototype.Hd,cs.prototype.ca=function(i){var o=this.f[i];return o||(this.b[i]||gs(this,i),null)},cs.prototype.Vc=function(i,o,s,_e,_n){if(xc(i,"String",this.Vc,0,'"spaceId" must be a string'),!Ea(o))throw new D(this.Vc,1,'"geojsonObject" must be an object');if(ds(this.Vc,2,s,_e),_n&&!Ea(_n))throw new D(this.Vc,4,'"opt_params" must be an object');return hs(this,i,s,_e,"PUT",o,_n)},cs.prototype.putFeatures=cs.prototype.Vc,cs.prototype.Tc=function(i,o,s,_e,_n){if(xc(i,"String",this.Tc,0,'"spaceId" must be a string'),!Ea(o))throw new D(this.Tc,1,'"featureCollection" must be an object');if(ds(this.Tc,2,s,_e),_n&&!Ea(_n))throw new D(this.Tc,4,'"opt_params" must be an object');return hs(this,i,s,_e,"POST",o,_n)},cs.prototype.postFeatures=cs.prototype.Tc,cs.prototype.dd=function(i,o,s,_e){if(xc(i,"String",this.dd,0,'"spaceId" must be a string'),!Ea(o))throw new D(this.dd,1,'"params" must be an object');return ds(this.dd,2,s,_e),hs(this,i,s,_e,"DELETE",B,o)},cs.prototype.deleteFeatures=cs.prototype.dd;function hs(i,o,s,_e,_n,_o,_a){var _u=Object.assign(i.c?{}:{authorization:"Bearer "+i.j},{"Content-Type":"application/geo+json"},i.g);return _n={method:_n,headers:_u},_o&&(_n.data=JSON.stringify(_o)),o=es(i.C().clone().F(o+"/features").I(_a||{})),_o=new tf("application/json",o.toString(),he,_n),_o.then(s,Xp(i,o,_e)),_o}function gs(i,o){i.b[o]=is,i.Ff(o,function(s){i.b[o]=js,i.f[o]=s.copyright,i.dispatchEvent("copyrightupdate")},function(s){throw i.b[o]=ks,s})}function fs(i,o){return i.c?o:es(o).I({access_token:i.j})}function es(i){var o=Object.assign({},i.getQuery());return delete o.apikey,i.ng(o)}cs.CONFIG_KEY="xyz";var is=1,js=2,ks=-1;function ds(i,o,s,_e){if(!Da(s))throw new D(i,o,'"onResult" must be a function');if(!Da(_e))throw new D(i,o+1,'"onError" must be a function')}X.prototype.Hj=function(i){return sp(X.prototype.Hj,"Use HERE IML service instead."),this.Ma(cs,i)},X.prototype.getXYZService=X.prototype.Hj;function ls(i,o,s){var _e;if(ls.l.constructor.call(this,s?{min:s.min,max:s.max,engineType:s.engineType}:void 0),C(i,cs,ls,0),!Ac(o))throw new D(ls,1,'"spaceId" must be a string');if(this.u=i,this.c=o,this.i={},s&&(["limit","simplificationLevel","tags"].forEach(function(_n){_n in s&&(this.i[_n]=s[_n])},this),i=s.parameters))for(_e in i)this.i[_e]=i[_e];this.lb(this.a===ik.WEBGL?new qi({sources:{xyz:{type:"MVT"}},layers:{xyz:{data:{source:"xyz",layer:this.c},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#000000",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.c,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.c,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.c,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.c,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#000000",lineWidth:"2px",renderOrder:203}]}))}u(ls,T),t("H.service.xyz.Provider",ls),ls.prototype.G=function(i,o,s,_e,_n){return this.u.Af(i,o,s,this.c,_e,_n,this.i)},ls.prototype.requestInternal=ls.prototype.G,ls.prototype.ca=function(){return this.u.ca(this.c)},ls.prototype.getCopyrights=ls.prototype.ca,ls.prototype.md=ff,ls.prototype.providesOMV=ls.prototype.md,ls.prototype.$=function(){return this.ab()},ls.prototype.getStyle=ls.prototype.$,ls.prototype.xb=function(i){C(i,qi)&&i.b("MVT"),this.lb(i)},ls.prototype.setStyle=ls.prototype.xb,t("H.service.buildInfo",function(){return Hf("H-service","1.38.0","8be3148",{region:"row"})});function ms(i,o,s,_e,_n){_n&1&&ns(i,i,o,s,_e,0),_n&2&&ns(i,i,o,s,_e,1),_n&4&&ns(i,i,o,s,_e,2),_n&8&&ns(i,i,o,s,_e,3)}function ns(i,o,s,_e,_n,_o){for(var _a=(s+1)*(s+1),_u,_h=4*_e,ty=s+1,oy,hy=[{r:0,Il:0,ul:0,zg:0,next:null}],fy=1,vy=["r","g","b","a"][_o],xy=2*s+1,wy,By;fy<xy;fy++)hy[fy]={r:0,Il:0,ul:0,zg:0,next:null},hy[fy-1].next=hy[fy];hy[2*s].next=hy[0];var Sy=4*(_e-1);for(_u=0;_u<_n;_u++){var Ay=_u*_h,Py=i[Ay+_o],Iy=Py*ty*(s+2)/2;for(xy=Py*ty,fy=0;fy<=s;fy++)hy[fy][vy]=Py;var $y=0;for(fy=1;fy<=s;fy++){var Ky=fy<_e?Ay+4*fy:Ay+Sy;Ky=i[Ky+_o],Iy+=Ky*(ty-fy),$y+=Ky,hy[s+fy][vy]=Ky}Ky=hy[0],wy=hy[ty],fy=Ay,By=4*ty;var Jy=Ay+Sy;for(Py=0;Py<_e;Py++){o[fy+_o]=Iy/_a,Iy-=xy;var i0=Py+ty<_e?fy+By:Jy;if(i0=i[i0+_o],$y+=i0,Iy+=$y,xy-=Ky[vy],xy+=wy[vy],$y-=wy[vy],Ky[vy]=i0,Ky=Ky.next,wy=wy.next,fy+=4,!Iy)for(;(oy=4*(Py+ty))<_h&&i[Ay+_o+oy]===0;)Py++,fy+=4}}for(Ay=(_n-1)*_h,Py=0;Py<_e;Py++){for(i=4*Py,_u=o[i+_o],Iy=_u*ty*(s+2)/2,xy=_u*ty,fy=0;fy<=s;fy++)hy[fy][vy]=_u;for($y=0,fy=1;fy<=s;fy++)Ky=fy<_n?i+fy*_h:i+Ay,Ky=o[Ky+_o],Iy+=Ky*(s-fy+1),$y+=Ky,hy[s+fy][vy]=Ky;for(Ky=hy[0],wy=hy[ty],fy=i,Jy=ty*_h,Sy=i+Ay,_u=0;_u<_n;_u++)if(o[fy+_o]=Iy/_a,Iy-=xy,i0=_u+ty<_n?fy+Jy:Sy,i0=o[i0+_o],$y+=i0,Iy+=$y,xy-=Ky[vy],xy+=wy[vy],$y-=wy[vy],Ky[vy]=i0,Ky=Ky.next,wy=wy.next,fy+=_h,!Iy)for(;(oy=_u+ty)<_n&&o[oy*_h+_o+i]===0;)_u++,fy+=_h}}function os(i,o,s){this.f=o=i>>o,this.j=Math.log(o)*Math.LOG2E,this.i=i=document.createElement("CANVAS"),this.a=i.getContext("2d"),this.b=i.width=i.height=3*o;var _e=document.createElement("canvas");i=s.a;var _n=s.b;o=[];var _o;_e.width=256,_e.height=1,_e=_e.getContext("2d");for(_a in _n)_n.hasOwnProperty(_a)&&o.push({stop:parseFloat(_a),value:_n[_a]});_n=o.length,o.sort(this.m),0<o[0].stop&&o.unshift({stop:0,value:o[0].value}),1>o[_n-1].stop&&o.push({stop:1,value:o[_n-1].value}),_n=o.length;var _a=_e.createLinearGradient(0,0,256,0);for(_o=0;_o<_n;_o++){if(!i&&_h){var _u=_h.stop+(o[_o].stop-_h.stop)/2;_a.addColorStop(_u,_h.value),_a.addColorStop(_u,o[_o].value)}_a.addColorStop(o[_o].stop,o[_o].value);var _h=o[_o]}_e.fillStyle=_a,_e.fillRect(0,0,256,1),this.c=_e.getImageData(0,0,256,1).data,this.g=s.a}os.prototype.m=function(i,o){return i.stop-o.stop};function ps(i,o){this.a=i,this.size=o}function qs(i,o){var s,_e=0;if(!Ea(i)||Va(i))throw new D(qs,0,i);for(s in i){var _n=+s;if(_e++,!(Dc(_n)&&0<=_n&&1>=_n&&Ac(i[s])))throw new D(qs,0,i)}if(2>_e)throw new D(qs,0,"Specify at least 2 stops");this.b=i,this.a=!!o}t("H.data.heatmap.Colors",qs);var rs=new qs({0:"#008","0.2":"#0b0","0.5":"#ff0","0.7":"#f00"},!0);qs.DEFAULT=rs;function ss(i,o,s){this.a=i=Zd(i,0,30),this.u=o,this.i=s,this.m=[],this.b=[];do this.b[i]=[],this.m[i]=new ts;while(i--);o===us?(this.s=vs,this.j=ws):(this.s=xs,this.j=ys),this.c=1/0,this.f=-1/0}var zs=Math.log(.5);function ws(i){return this.g?Math.round((i-this.c)/this.g*255):127}function ys(i){return this.R===void 0?127:Math.round(255*Math.pow(i,this.R))}ss.prototype.yb=function(i){var o,s,_e=i.value;_e===void 0&&(_e=1),_e>this.f&&(this.f=_e,this.g=this.f-this.c),_e<this.c&&(this.c=_e,this.g=this.f-this.c);var _n=kj.Kc(i).scale(1073741823).floor();_e=this.a;var _o=_n.x>>30-_e;for(_n=_n.y>>30-_e,s=this.s;-1<_e;){this.b[_e][_n]||(this.b[_e][_n]=[]),(o=this.b[_e][_n][_o])||(o=this.b[_e][_n][_o]=new s(_o,_n,_e)),o.yb(i,_e);var _a=this.m[_e];_a.f>o.b&&(_a.f=o.b),_a.a<o.b&&(_a.a=o.b),_a.c>o.a&&(_a.c=o.a),_a.b<o.a&&(_a.b=o.a),_e--,_o>>=1,_n>>=1}};function As(i,o,s,_e,_n){var _o=1<<o,_a,_u;return _e=Yd(_e,_o),_o=0<=s&&s<_o&&(_a=i.b[o])&&(_u=_a[s])&&(_o=_u[_e])||null,!_o&&_n&&0<=o&&(_o=As(i,o-1,s>>1,_e>>1,_n)),_o}function Bs(i,o,s,_e,_n,_o){for(var _a,_u=[];s<=_e;s++)for(_a=_n;_a<=_o;_a++)_u.push(As(i,o,s,_a,!1));return _u}function Cs(i,o){var s=0,_e=0,_n=As(i,0,0,0,!1),_o;return o.f||(o.z===i.a?o.c=o.a:(Ds(i,o,function(_a){var _u=Es(i,_a),_h=4-_u.length;if(_a.z!==i.a){for(_o=0;_o<_u.length;_o++)s+=_u[_o].a,_e++;s+=_h*_n.a,_e+=_h}}),o.c=s/_e),o.f=!0),o.c}function Ds(i,o,s){o=[o];for(var _e,_n;0<o.length;)_n=o.shift(),_e=Es(i,_n),s(_n),o.push.apply(o,_e)}function Es(i,o){var s=[],_e,_n,_o;for(_n=0;1>=_n;_n++)for(_o=0;1>=_o;_o++)(_e=As(i,o.z+1,2*o.x+_n,2*o.y+_o,!1))&&s.push(_e);return s}ss.prototype.clear=function(){ss.call(this,this.a,this.u,this.i)};function xs(i,o,s){this.x=i,this.y=o,this.z=s,this.a=this.b=this.g=0,this.f=!1,this.c=0}xs.prototype.yb=function(i,o){this.g++,this.b+=i.value||1,this.a=this.b/Math.pow(2,2*(30-o))};function vs(i,o,s){this.x=i,this.y=o,this.z=s,this.a=this.b=this.g=0,this.f=!1,this.c=0}vs.prototype.yb=function(i){i=i.value,this.b+=i!==void 0?i:1,this.a=this.b/++this.g,this.f=!1};function ts(){this.f=this.c=1/0,this.a=this.b=-1/0}function Fs(i){var o=i||{},s=+o.sampleDepth,_e=o.pointSize;i=+o.coarseness;var _n=o.colors,_o={min:o.min,max:o.max,engineType:o.engineType},_a=o.tileSize,_u=+o.dataMax;if(o.tileSize&&(_o.tileSize=_a),T.call(this,_o),jk(this,o.opacity),this.i=o.type==="value"?us:Gs,this.sampleDepth_=Dc(s)?Zd(Math.round(s),1,8):4,this.K=this.i===Gs?Dc(_e)?Zd(Math.round(7-_e),0,6):2:1,this.B=!!o.assumeValues,o=this.max,this.N=Dc(_u)?Zd(Math.round(_u),this.min,o+this.sampleDepth_):o,i=Dc(i)?Zd(Math.round(i),0,3):1,_n&&!C(_n,qs))throw new D(Fs,0,"colors");this.c=new ss(o+this.sampleDepth_+this.K,this.i,this.N),this.V=new os(this.tileSize,i,_n||rs),this.v=A(this.v,this),this.u=A(this.u,this),this.Y=new Kk(20,this.v)}u(Fs,T),t("H.data.heatmap.Provider",Fs),Fs.prototype.dc=function(i){jk(this,i)},Fs.prototype.setOpacity=Fs.prototype.dc,Fs.prototype.Oc=function(){return this.g},Fs.prototype.getOpacity=Fs.prototype.Oc,Fs.prototype.Re=ff,Fs.prototype.providesRasters=Fs.prototype.Re,Fs.prototype.G=function(i,o,s,_e,_n){var _o=this.B,_a,_u;if(As(this.c,0,0,0,!1)){if(!_o){var _h=Bs(this.c,s,o-1,o+1,i-1,i+1);for(_a=_h.length;_a--&&!_o;)if(_h[_a]!==null){_o=!0;break}}_o&&(_u=this.Y.push([i,o,s,_e,_n],this.u))}return _o||_e(null),_u||Bl},Fs.prototype.requestInternal=Fs.prototype.G;function Hs(i,o,s,_e){var _n=document.createElement("canvas"),_o=i.tileSize,_a=_n.getContext("2d");_n.width=_n.height=_o;var _u=i.V,_h=i.c,ty=i.B,oy=i.i,hy=i.K,fy=_u.f,vy=_u.a,xy,wy,By=oy===Gs?hy===void 0?2:hy:1;hy=By,i=Math.min(i.sampleDepth_+By,_u.j),By=_u.b;var Sy=_h.a;if(ty&&oy===us){for(wy=-1;1>=wy;wy++)for(ty=-1;1>=ty;ty++){var Ay=(Ay=As(_h,_e,s+wy,o+ty,!0))?_h.j(Cs(_h,Ay)):128;vy.fillStyle="rgba("+Ay+",128,0,1)",vy.fillRect((ty+1)*fy,(wy+1)*fy,fy,fy)}ty=fy-Math.floor(fy/10),wy=3,Ay=vy.getImageData(0,0,By,By),ms(Ay.data,ty,By,By,wy),vy.putImageData(Ay,0,0)}else vy.fillStyle=ty?"#080":"#000",vy.fillRect(0,0,By,By);for(;hy<=i&&_e+hy<=Sy;hy++){ty=fy>>hy,wy=fy-ty;var Py=oy===Gs?127+Math.floor(128/(1<<i-hy)):255;Ay=(1<<hy)+2;var Iy=1<<hy,$y=o<<hy,Ky=s<<hy;for(Iy=Bs(_h,_e+hy,Ky-1,Ky+Iy,$y-1,$y+Iy),$y=Iy.length;$y--;){Ky=$y%Ay;var Jy=$y/Ay<<0;(xy=Iy[$y])&&(xy=_h.j(xy.a),vy.fillStyle="rgba("+xy+","+Py+",0,1)",vy.fillRect(Ky*ty+wy,Jy*ty+wy,ty,ty))}Ay=vy,Py=ty,Iy=wy,$y=fy+2*ty,ty=fy+2*ty,Ky=Ky=3,Jy=vy.getImageData(Iy,wy,$y,ty),ms(Jy.data,Py,$y,ty,Ky),Ay.putImageData(Jy,Iy,wy)}for(o=vy.getImageData(0,0,By,By),s=_u.c,_e=_u.g,_h=o.data,i=0,By=_h.length;i<By;i+=4)oy=_h[i],hy=_h[i+1],s.length===4&&(oy=0),_h[i]=s[4*oy],_h[i+1]=s[4*oy+1],_h[i+2]=s[4*oy+2],_h[i+3]=s[4*oy+3]*(_e?hy/255:10>hy?0:1);return vy.putImageData(o,0,0),_u=new ps(_u.i,fy),fy=_u.size,_a.drawImage(_u.a,fy,fy,fy,fy,0,0,_o,_o),_n}Fs.prototype.v=function(i,o){i.done(Hs(this,o[0],o[1],o[2]))},Fs.prototype.u=function(i,o,s){var _e=i.data;i=_e[3],_e=_e[4],s?_e():i(o)},Fs.prototype.Si=function(i,o){var s;if(!zc(i))throw new D(this.Si,0,i);if(s=i.length){for(;s--;)this.c.yb(i[s]);i=this.c;var _e;s=i.m;var _n=i.a,_o=0;if(i.u===Gs){var _a=s[i.a].a;for(_e=i.a;0<=_e&&s[_e].a===_a;_e--)_o=_e;for(_a=s[0].a,_e=0;_e<=_o&&_a===s[_e].a;_e++)_n=_e;_o>i.i&&(_o=i.i),_a=Math.round(_n+(_o-_n)/2),i.R=zs/Math.log(s[_a].b)}this.reload(!!o)}},Fs.prototype.addData=Fs.prototype.Si,Fs.prototype.clear=function(){this.c.clear(),this.reload(!0)},Fs.prototype.clear=Fs.prototype.clear;var Gs=0,us=1;function Is(){}t("H.data.utils.Dom",Is),Is.prototype.Ed=function(i){return!!i&&/^\s*(1|true)\s*$/i.test(this.Ja(i))},Is.prototype.getBoolean=Is.prototype.Ed,Is.prototype.Ja=function(i){var o;try{if(i.nodeType===Node.ATTRIBUTE_NODE)return i.value;var s="",_e=0,_n=i.childNodes;for(o=_n.length;_e<o;_e++)_n[_e].nodeType!==Node.COMMENT_NODE&&(s+=_n[_e].nodeValue.replace(/^\s+|\s+$/g,""))}catch{}return s||""},Is.prototype.getString=Is.prototype.Ja,Is.prototype.Bf=function(i){return parseFloat(this.Ja(i))||0},Is.prototype.getFloat=Is.prototype.Bf,Is.prototype.xk=function(i){var o=i.split(/\s+/),s=o.length,_e=!(o&&s==1),_n=_e?1:3,_o=[],_a;for(_e||(o=i.split(","),s=o.length),_a=0;_a<s;_a+=_n)if(i=this.Th(_e?o[_a]:_a+3>o.length?null:o.slice(_a,_a+3)))_o.push(i);else return[];return _o},Is.prototype.parseCoords=Is.prototype.xk,Is.prototype.Th=function(i){if(!i)return null;var o=i instanceof Array&&0<i.length&&4>i.length?i:i.split(",");i=parseFloat(o[0]);var s=parseFloat(o[1]);return o=parseFloat(o[2]),isNaN(s)||isNaN(i)?null:new lg(s,i,isNaN(o)?void 0:o)},Is.prototype.parseCoord=Is.prototype.Th,Is.prototype.zf=function(i){return i=this.Ja(i),/^[0-9a-fA-F]{8}$/.test(i)?"#"+i.substr(6,2)+i.substr(4,2)+i.substr(2,2)+i.substr(0,2):"#000000ff"},Is.prototype.getColor=Is.prototype.zf;function Js(i){i=i.attributes;for(var o,s=i.length;s--;)switch(o=i[s],o.name){case"x":this.x=parseFloat(o.value);break;case"y":this.y=parseFloat(o.value);break;case"xunits":this.Qc=Is.prototype.Ja(o)==="fraction";break;case"yunits":this.tc=Is.prototype.Ja(o)==="fraction"}}t("H.data.kml.HotSpot",Js);function Ks(i){var o=i.childNodes,s=new Is;for(i=o.length;i--;){var _e=o[i];switch(_e.nodeName){case"href":this.href=s.Ja(_e)}}}t("H.data.kml.Icon",Ks);function Ls(i){var o;if(i){i=i.childNodes;var s=i.length;for(o=new Is;s--;){var _e=i[s];switch(_e.nodeName){case"scale":this.scale=o.Bf(_e);break;case"Icon":this.icon=_e=new Ks(_e);break;case"hotSpot":this.a=_e=new Js(_e)}}}}t("H.data.kml.IconStyle",Ls);function Ms(){this.a={4:function(i){return["#",i.charAt(1),i.charAt(1),i.charAt(2),i.charAt(2),i.charAt(3),i.charAt(3),"ff"].join("")},5:function(i){return["#",i.charAt(1),i.charAt(1),i.charAt(2),i.charAt(2),i.charAt(3),i.charAt(3),i.charAt(4),i.charAt(4)].join("")},7:function(i){return i+"ff"},9:function(i){return i}},this.b={4:function(i){return[Ns(i.charAt(1)),Ns(i.charAt(2)),Ns(i.charAt(3)),255]},5:function(i){return[Ns(i.charAt(1)),Ns(i.charAt(2)),Ns(i.charAt(3)),Ns(i.charAt(4))]},7:function(i){return i=parseInt(i.substring(1),16),[i>>16&255,i>>8&255,i&255,255]},9:function(i){return i=parseInt(i.substring(1),16),[i>>24&255,i>>16&255,i>>8&255,i&255]}}}t("H.data.utils.ColorHelper",Ms);function Ns(i){return i=parseInt(i,16),(i<<4)+i}function Os(i){return 16>i?"0"+Math.round(i).toString(16):Math.round(i).toString(16)}function Ps(i,o,s){return/^(#|rgb).*/.test(o)?(s||(s="",o.charAt(0)==="#"?s=i.a[o.length]?o:"":o.substr(0,3)==="rgb"&&(o=o.match(/\d+(\.\d+)?/g),s=o.length,s=2<s&&5>s?["#",Os(+o[0]),Os(+o[1]),Os(+o[2]),3<s?Os(255*+o[3]):"ff"].join(""):""),o=s),i=i.b[o.length](o),i[3]=Math.round(i[3]/255*100)/100,i):[0,0,0,255]}Ms.prototype.hl=function(i,o){var s="";if(!/^(#|rgb).*/.test(i)){s="";var _e;for(_e=0;6>_e;_e++)s+="ABCDEF0123456789".charAt(Math.floor(16*Math.random()));return s+"ff"}for(i=Ps(this,i,o),o=0;4>o;o++)3>o?_e=Math.floor(Math.random()*(i[o]+1)):_e=255*i[o],s+=Os(_e);return s},Ms.prototype.toRandomRGBA=Ms.prototype.hl;function Qs(i){i=i.childNodes;for(var o,s=i.length,_e=new Is,_n=new Ms;s--;)switch(o=i[s],o.nodeName){case"color":this.a=_e.zf(o);break;case"colorMode":this.b=_e.Ja(o)}this.b==="random"&&(this.a="#"+_n.hl(this.a,!1))}t("H.data.kml.ColorStyle",Qs);function Rs(i){var o=i.childNodes,s=o.length,_e=new Is;for(this.a=this.fill=!0,this.b=new Qs(i);s--;)switch(i=o[s],i.nodeName){case"fill":this.fill=_e.Ed(i);break;case"outline":this.a=_e.Ed(i)}}t("H.data.kml.PolyStyle",Rs);function Ss(i){var o=i.childNodes,s=o.length,_e=new Is;for(this.a=new Qs(i);s--;)i=o[s],i.nodeName==="width"&&(this.width=_e.Bf(i))}t("H.data.kml.LineStyle",Ss);function Ts(i){i=i.childNodes;for(var o,s=i.length,_e=new Is;s--;)switch(o=i[s],o.nodeName){case"bgColor":this.bgColor=_e.zf(o);break;case"textColor":this.textColor=_e.zf(o);break;case"text":this.text=_e.Ja(o);break;case"displayMode":this.displayMode=_e.Ja(o)}}t("H.data.kml.BalloonStyle",Ts);function Us(i){var o=i.childNodes,s=o.length;for(this.id=i.getAttribute("id");s--;)switch(i=o[s],i.nodeName){case"IconStyle":this.Oj=i=new Ls(i);break;case"LineStyle":this.Ud=i=new Ss(i);break;case"PolyStyle":this.Ak=i=new Rs(i);break;case"BalloonStyle":this.jf=i=new Ts(i)}}t("H.data.kml.Style",Us);function Vs(i,o){i=i.childNodes;var s=i.length,_e=new Is;for(this.b=o;s--;)switch(o=i[s],o.nodeName){case"key":this.key=_e.Ja(o);break;case"styleUrl":this.a=_e.Ja(o)}}t("H.data.kml.Pair",Vs),Vs.prototype.$=function(){if(this.a){var i=this.key==="highlight";i=this.b.hh(this.a.substr(1),i)}return i},Vs.prototype.getStyle=Vs.prototype.$;function Ws(i,o){var s=i.childNodes,_e=s.length;for(this.b=o,this.id=i.getAttribute("id"),this.a=[];_e--;)i=s[_e],i.nodeName==="Pair"&&(i=new Vs(i,this.b),this.a.push(i))}t("H.data.kml.StyleMap",Ws),Ws.prototype.$=function(i){var o=null;i=i?"highlight":"normal";for(var s=this.a.length;s--;)this.a[s].key===i&&(o=this.a[s].$());return o},Ws.prototype.getStyle=Ws.prototype.$;function Xs(){this.a={}}t("H.data.kml.StyleContainer",Xs),Xs.prototype.Dg=function(i){i&&i.id&&(this.a["style_"+i.id]=i)},Xs.prototype.addStyle=Xs.prototype.Dg,Xs.prototype.hh=function(i,o){return i=this.a["style_"+i],i instanceof Ws&&(i=i.$(o)),i},Xs.prototype.getStyleById=Xs.prototype.hh;function Ys(i){i=i.childNodes;for(var o,s=i.length,_e=null,_n=new Is;s--;)o=i[s],o.nodeName==="coordinates"&&(_e=_n.Ja(o));this.a=null,_e&&(this.a=_n.Th(_e)||null)}t("H.data.kml.Point",Ys);function Zs(i,o){var s=i&&i.childNodes||[],_e=new Is;if(!i||!o)throw Error("Node or stylesContainer is not defined");for(this.visibility=!0,this.g=i,i=s.length;i--;){var _n=s[i];switch(_n.nodeName){case"name":this.name=_e.Ja(_n);break;case"description":this.b=_e.Ja(_n);break;case"visibility":this.visibility=_e.Ed(_n);break;case"open":this.open=_e.Ed(_n);break;case"styleUrl":(this.c=_e.Ja(_n))&&(_n=this.c.substr(1),this.f=o.hh(_n,!1));break;case"Style":this.a=_n=new Us(_n)}}}t("H.data.kml.Feature",Zs);function $s(i){i=i.childNodes;for(var o,s=i.length,_e=new Is;s--;)if(o=i[s],o.nodeName==="coordinates"){var _n=[],_o=new Is;try{_n=_o.xk(_e.Ja(o))}catch{_n=[]}this.a=2>_n.length?[]:_n}}t("H.data.kml.Line",$s);function at(i){for(var o=new L,s=i.a?i.a.length:0;s--;)o.nd(i.a[s]);return o}function bt(){}bt.prototype.f=0,bt.prototype.b=0;function ct(i){var o=i.childNodes,s=o.length;for(this.a=new L,this.c=[];s--;){var _e=o[s],_n=_e.nodeName;if(_n==="outerBoundaryIs"||_n==="innerBoundaryIs"){var _o=_e.childNodes;for(_e=_o.length;_e--;){var _a=_o[_e];if(_a.nodeName==="LinearRing"){var _u=new $s(_a);if(_n==="outerBoundaryIs"){this.a=at(_u);var _h=void 0,ty=i,oy=_u.a;_u=new Is;var hy=ty.querySelector("altitudeMode");if(hy&&hy.parentNode===ty&&!/^\s*clampTo/.test(_u.Ja(hy))&&oy){hy=oy.length;for(var fy=0;fy<hy&&_h!==0;fy++){var vy=oy[fy].alt;vy?_h?vy!==_h&&(_h=0):_h=vy:_h=0}(oy=ty.querySelector("*|altitudeOffset"))&&oy.parentNode===_a&&oy.namespaceURI==="http://www.google.com/kml/ext/2.2"&&(_a=_u.Bf(oy))&&(_h+=_a),_h&&(_h=wd(2047,_h),(_a=ty.querySelector("extrude"))&&_a.parentNode===ty&&_u.Ed(_a)?this.b=_h:this.f=_h)}}else this.c.push(at(_u))}}}}}u(ct,bt),t("H.data.kml.Polygon",ct);function dt(i,o){var s=document.createElement("CANVAS");s.width=1,s.height=1,this.i=i,this.b={},this.c={},this.f=new Uj(s),this.g=o||""}dt.prototype.create=function(i){return this.a=new Zs(i,this.i),et(this,i)};function et(i,o,s){o=o.childNodes;for(var _e=o.length,_n,_o={},_a;_e--;){var _u=o[_e];switch(_u.nodeName){case"Point":_u=new Ys(_u),_a=ft(i,"Marker"),(_u=_u.a)&&(_n=new Ln(_u,_a),_a.Uh&&Ee(_a.Uh,"statechange",A(i.j,i,_a.Uh,_n,_a),!1));break;case"LineString":_u=new $s(_u),_a=ft(i,"Polyline"),_n=new th(at(_u),_a);break;case"LinearRing":_u=new $s(_u),_a=ft(i,"Polyline"),_n=new th(at(_u),_a);break;case"Polygon":_u=new ct(_u),_a=ft(i,"Polygon"),_a.elevation=_u.f,_a.extrusion=_u.b,_n=new uh(new O(_u.a,_u.c),_a);break;case"MultiGeometry":_n=et(i,_u,new R)}_n&&(i.a.name&&(_o.name=i.a.name),i.a.b&&(_o.description=i.a.b),_a&&_a.jf&&(_o.balloonStyle=_a.jf),_o.kmlNode=i.a.g,_n.setData(_o),s&&s.ba(_n))}return s||_n}dt.prototype.j=function(i,o,s){var _e=s.anchor,_n=s.scale;s=_n+"_"+_e.x+_e.y+_e.Qc+_e.tc+"_"+s.href;var _o={};if(i.getState()===1){var _a=this.b[s];if(!_a){var _u=_e.x,_h=_e.y;(_a=i.sb())&&(_a={w:_a.w*_n,h:_a.h*_n},_o.size=_a),_u=_e.Qc&&_a?_a.w*_u:_u*_n,_h=_e.tc&&_a?_a.h*(1-_h):!_e.tc&&_a?_a.h-_h*_n:_h*_n,_o.anchor={x:_u,y:_h},_a=new Uj(i.Lc(),_o),this.b[s]=_a}o.Cc(_a)}delete this.c[s]};function ft(i,o){var s=i.a,_e={visibility:s.visibility},_n=new Ms,_o=1,_a={x:0,y:0,Qc:!1,tc:!1},_u=gt(i,s.f);switch(s.a&&(_u=gt(i,s.a,_u)),o){case"Marker":if(_u&&_u.Oj){if(_n=_u.Oj,_n.scale&&(_o=_n.scale),_n.a){var _h=_n.a;_a={x:_h.x,y:_h.y,Qc:_h.Qc,tc:_h.tc}}_n.icon&&_n.icon.href?(o=_n.icon.href,ht.test(o)||(o=i.g+o),_n=_o+"_"+_a.x+_a.y+_a.Qc+_a.tc+"_"+o,_h=i.b[_n]||i.c[_n],_h||(_h=new Uj(o),i.c[_n]=_h),_h.getState()===0?(_e.icon=i.f,_e.Uh=_h,_e.href=o,_e.anchor=_a,_e.scale=_o):_h.getState()===1&&(_e.icon=_h)):_o!==1&&(_h||(_a={x:14,y:4,Qc:!1,tc:!1}),i={w:28*_o,h:36*_o},_o={size:new Ui(i.w,i.h),anchor:new G(_a.Qc?i.w*_a.x:_a.x*_o,_a.tc?i.h*(1-_a.y):i.h-_a.y*_o),hitArea:new Vi(Wi.POLYGON,[0*_o,16*_o,0*_o,7*_o,8*_o,0*_o,18*_o,0*_o,26*_o,7*_o,26*_o,16*_o,18*_o,34*_o,8*_o,34*_o])},_e.icon=new Uj('<svg xmlns="http://www.w3.org/2000/svg" width="28px" height="36px"><path d="M 19 31 C 19 32.7 16.3 34 13 34 C 9.7 34 7 32.7 7 31 C 7 29.3 9.7 28 13 28 C 16.3 28 19 29.3 19 31 Z" fill="#000" fill-opacity=".2"/><path d="M 13 0 C 9.5 0 6.3 1.3 3.8 3.8 C 1.4 7.8 0 9.4 0 12.8 C 0 16.3 1.4 19.5 3.8 21.9 L 13 31 L 22.2 21.9 C 24.6 19.5 25.9 16.3 25.9 12.8 C 25.9 9.4 24.6 6.1 22.1 3.8 C 19.7 1.3 16.5 0 13 0 Z" fill="#fff"/><path d="M 13 2.2 C 6 2.2 2.3 7.2 2.1 12.8 C 2.1 16.1 3.1 18.4 5.2 20.5 L 13 28.2 L 20.8 20.5 C 22.9 18.4 23.8 16.2 23.8 12.8 C 23.6 7.07 20 2.2 13 2.2 Z" fill="#18d"/></svg>',_o))}break;case"Polyline":_e.style={},_u&&_u.Ud&&(_o=_u.Ud,_e.style.strokeColor="rgba("+Ps(_n,_o.a.a,!0)+")",0<=_o.width&&(_e.style.lineWidth=_o.width));break;case"Polygon":_e.style={},_u&&(_u.Ud&&(_o=_u.Ud,_e.style.strokeColor="rgba("+Ps(_n,_o.a.a,!0)+")",0<=_o.width&&(_e.style.lineWidth=_o.width)),_u.Ak&&(_o=_u.Ak,_e.style.fillColor=_o.fill?"rgba("+Ps(_n,_o.b.a,!0)+")":"rgba(0,0,0,0)",_o.a||(_e.style.lineWidth=0)))}return _e.jf=_u.jf,_e}function gt(i,o,s){s=s||{};for(var _e in o)o.hasOwnProperty(_e)&&(s[_e]=typeof o[_e]=="object"?gt(i,o[_e],s[_e]):o[_e]);return s}var ht=/^[^:\/]+:/;function it(i){vc(this,it),this.url=i,this.b=[],this.a=y,this.c=A(this.c,this),F.call(this)}u(it,F),t("H.data.AbstractReader",it);var jt={ERROR:-1,LOADING:0,VISIT:1,READY:2};it.State=jt,it.prototype.f=jt.READY,it.prototype.A={nl:"statechange"},it.prototype.jb=function(){if(!this.a){this.a=new N;var i=this.a.Xb();i.Sb(this.b)}return new rl(this.a)},it.prototype.getLayer=it.prototype.jb,it.prototype.Bm=function(){return this.b.concat([])},it.prototype.getParsedObjects=it.prototype.Bm,it.prototype.C=function(){return this.url},it.prototype.getUrl=it.prototype.C,it.prototype.lo=function(i){if(this.f===jt.LOADING||this.f===jt.VISIT)throw Error("InvalidState: state "+this.f);return this.b=[],this.a=y,this.url=i,this},it.prototype.setUrl=it.prototype.lo,it.prototype.getState=function(){return this.f},it.prototype.getState=it.prototype.getState,it.prototype.O=function(i,o,s){this.f=i,this.dispatchEvent(new kt(o||this,this.A.nl,i,s||""))},it.prototype.parse=function(){var i=this;uc(this.url)?(this.O(jt.LOADING),new tf("text/plain",this.url).then(function(o){try{i.c(o)}catch(s){i.O(jt.ERROR,y,s.message)}},function(){i.O(jt.ERROR,y,"Error loading file")})):i.O(jt.ERROR,y,"File url was not set")},it.prototype.parse=it.prototype.parse;function kt(i,o,s,_e){kt.l.constructor.call(this,o,i),this.state=s,this.message=_e}u(kt,sd),it.Event=kt;function lt(i){var o=i?i.lastIndexOf("/"):-1;this.g=[],it.call(this,i),0<=o&&(this.i=i.substr(0,o)+"/")}u(lt,it),t("H.data.kml.Reader",lt),lt.prototype.c=function(i){var o,s=null;if(Ac(i)&&i.trim()!=""){try{var _e=new DOMParser().parseFromString(i,"text/xml")}catch{this.O(jt.ERROR,y,"Error parsing KML document");return}if(_e.getElementsByTagName("parsererror").length)this.O(jt.ERROR,y,"Error parsing KML document");else if((i=_e.childNodes&&_e.childNodes[0].nodeName==="kml"?_e.childNodes[0]:void 0)&&(o=mt(i.childNodes,"Document")[0]),o=o||i){_e=new Xs;for(var _n=mt(o.childNodes,"Style"),_o=mt(o.childNodes,"StyleMap"),_a=_n.length;_a--;)i=new Us(_n[_a]),_e.Dg(i);for(_a=_o.length;_a--;)i=new Ws(_o[_a],_e),_e.Dg(i);for(this.j=new dt(_e,this.i),i=o.childNodes,o=i.length;o--;)_n=i[o],_e=s,_n.nodeName==="Placemark"?(_n=this.j.create(_n))&&nt(this,_n,_e):_n.nodeName==="Folder"&&(_n={group:new R,node:_n},nt(this,_n.group,_e),this.g.push(_n)),!o&&(_e=this.g.shift())&&(i=_e.node.childNodes,s=_e.group,o=i.length);this.O(jt.READY)}else this.O(jt.ERROR,y,"Invalid KML document")}else this.O(jt.ERROR,y,"Unable to create objects from the empty data")};function nt(i,o,s){s?s.ba(o):(i.a&&i.a.Xb().ba(o),i.b.push(o),i.O(jt.VISIT,o))}function mt(i,o){for(var s=i.length,_e,_n=[];s--;)_e=i[s],_e.nodeName===o&&_n.push(_e);return _n}function ot(i,o){this.b=i,this.a=o}ot.prototype.create=function(i,o){var s=i.coordinates;switch(i.type){case"Point":var _e=new Ln(pt(s));break;case"LineString":_e=new th(qt(s));break;case"Polygon":_e=new uh(rt(s));break;case"MultiPoint":var _n=0,_o=s.length;if(_e=[],this.a){for(;_n<_o;_n++)_e.push(pt(s[_n]));s=new Ln(new Ti(_e))}else{for(;_n<_o;_n++)_e.push(new Ln(pt(s[_n])));s=new R,s.Sb(_e)}_e=s,_o="multiPoint";break;case"MultiLineString":if(_n=0,_o=s.length,_e=[],this.a){for(;_n<_o;_n++)_e.push(qt(s[_n]));s=new th(new ih(_e))}else{for(;_n<_o;_n++)_e.push(new th(qt(s[_n])));s=new R,s.Sb(_e)}_e=s,_o="multiLineString";break;case"MultiPolygon":if(_e=[],_n=0,_o=s.length,this.a){for(;_n<_o;_n++)_e.push(rt(s[_n]));s=new uh(new Gi(_e))}else{for(;_n<_o;_n++)_e.push(new uh(rt(s[_n])));s=new R,s.Sb(_e)}_e=s,_o="multiPolygon";break;case"GeometryCollection":s=_e=new R,_n=i.geometries,_o=0;for(var _a=_n.length;_o<_a;_o++)this.create(_n[_o],s);_o="geometryCollection"}return _e&&(s=_e,_n=i.properties,i=i.id,_a={},_n&&(this.a?_a=_n:_a.properties=_n),_o&&!this.a&&(_a[_o]=!0),i&&s.ti(i),s.setData(_a),this.b(_e)),o&&_e&&o.ba(_e),_e},ot.prototype.create=ot.prototype.create;function pt(i){return new lg(i[1],i[0])}function rt(i){for(var o=qt(i[0]),s=[],_e,_n=1,_o=i.length;_n<_o;_n++)_e=qt(i[_n]),s.push(_e);return new O(o,s)}function qt(i){for(var o=0,s=i.length,_e=new L;o<s;o++)_e.nd(pt(i[o]));return _e}function st(i,o){o=o||{},this.i=o.style||this.Bd,(this.g=!!o.disableLegacyMode)||window.console.warn("H.data.geojson.Reader: Legacy parser is enabled in GeoJSON Reader. Features like Multi-Geometries, Polygon interiors and GeoJSON feature properties might not work as expected. To maximise compatibility with the remote services it is recommended to set the `disableLegacyMode` flag to true."),it.call(this,i)}u(st,it),t("H.data.geojson.Reader",st),st.prototype.c=function(i){var o,s;try{var _e=typeof i=="string"?JSON.parse(i):i;if(typeof _e=="object"){var _n=new ot(this.i,this.g);switch(_e.type){case"FeatureCollection":if(o=_e.features){var _o=new R;for(tt(this,_o),s=0;s<o.length;s++){var _a=ut(o[s]);(_a=_n.create(_a))&&_o.ba(_a)}}break;case"Feature":_a=ut(_e),(_a=_n.create(_a))&&tt(this,_a);break;default:(_a=_n.create(_e))&&tt(this,_a)}this.O(jt.READY)}else this.O(jt.ERROR,y,"Invalid syntax")}catch(_u){this.O(jt.ERROR,y,"Parse error. "+_u.message)}},st.prototype.Vn=function(i){this.O(jt.LOADING),this.c(i)},st.prototype.parseData=st.prototype.Vn,st.prototype.Bd=function(){};function ut(i){var o={};if(i.geometry){var s=i.geometry;o.type=s.type,o.properties=i.properties,s.coordinates&&(o.coordinates=s.coordinates),s.geometries&&(o.geometries=s.geometries),i.id&&(o.id=i.id)}return o}function tt(i,o){i.a&&i.a.Xb().ba(o),i.b.push(o),i.O(jt.VISIT,o)}t("H.data.buildInfo",function(){return Hf("H-data","1.38.0","8be3148",{region:"row"})}),wg.prototype.Fc=ca(1,function(i,o){this.a.Fc(i,Dc(o)?o:this.c)}),Ag.prototype.Fc=ca(0,function(i,o){var s=0,_e;if(!i(this)&&o--)for(;3>=s;s++)(_e=this[s])&&_e.Fc(i,o)});function vt(i,o){this.a=i,this.b=o}t("H.clustering.grid.NoisePoint",vt),vt.prototype.wa=function(){return ng(this.a)},vt.prototype.getPosition=vt.prototype.wa,vt.prototype.rc=function(){return this.a.wt},vt.prototype.getWeight=vt.prototype.rc,vt.prototype.kd=gf,vt.prototype.isCluster=vt.prototype.kd,vt.prototype.nc=function(){return this.b},vt.prototype.getMinZoom=vt.prototype.nc,vt.prototype.getData=function(){return this.a.data},vt.prototype.getData=vt.prototype.getData;function wt(i,o,s){this.g=this.b=s,this.Vh=[],this.a=0,this.f=sg(i,o,!0)}t("H.clustering.grid.Cluster",wt),wt.prototype.je=function(i){this.c||(this.c=ng(i)),this.a+=i.wt||1,this.Vh.push(i)},wt.prototype.wa=function(){return this.c},wt.prototype.getPosition=wt.prototype.wa,wt.prototype.rc=function(){return this.a},wt.prototype.getWeight=wt.prototype.rc,wt.prototype.kd=ff,wt.prototype.isCluster=wt.prototype.kd,wt.prototype.nc=function(){return this.b},wt.prototype.getMinZoom=wt.prototype.nc,wt.prototype.Df=function(){return this.g},wt.prototype.getMaxZoom=wt.prototype.Df,wt.prototype.J=function(){return this.f},wt.prototype.getBoundingBox=wt.prototype.J,wt.prototype.Sg=function(i){this.ve(i)},wt.prototype.forEachEntry=wt.prototype.Sg,wt.prototype.ve=function(i){var o=this;if(!Da(i))throw new D(this.ve,0,i);this.Vh.forEach(function(s){i(new vt(s,o.b+1))})},wt.prototype.forEachDataPoint=wt.prototype.ve;function xt(i){nd.call(this),this.a=[];var o;i?Ya(o={},yt,i):o=yt,this.g=o,nd.call(this)}u(xt,nd);var zt={clusters:[],noisePoints:[]},yt={projection:kj,min:0,max:22,eps:32,minWeight:2};p=xt.prototype,p.Bc=function(i){this.a=i,this.b=!0},p.yb=function(i){this.a.push(i),this.b=!0},p.hf=function(i){this.a=this.a.concat(i),this.b=!0},p.Se=function(i){this.a=this.a.filter(function(o){return o!==i}),this.b=!0},p.o=function(){xt.l.o.call(this),delete this.a},xt.prototype.disposeInternal=xt.prototype.o,xt.prototype.R=jd;function At(i){xt.call(this,i)}u(At,xt),At.prototype.xi=function(i){var o=this.g,s=o.min,_e=o.max,_n=[],_o=[],_a;if(this.b){for(_a=this.a;s<=_e;s++){for(var _u,_h=void 0,ty,oy,hy,fy,vy,xy,wy,By=s,Sy=_a,Ay=_n,Py=_o,Iy=o.eps,$y=o.projection,Ky=o.minWeight,Jy=Sy.length,i0=Math.pow(2,By+8),k0=[];wy=Sy[--Jy];)if(!wy.Di){for(oy=$y.Kc(wy).scale(i0).floor(),xy=i0,vy=oy.x,fy=oy.y,ty=k0.length;ty--;)_u=k0[ty],hy=_u.wa(),_u.Ci||(_u.Ci=$y.Kc(hy).scale(i0).floor()),hy=_u.Ci,hy=hy.Ta(oy),hy<xy&&(xy=hy,_h=_u);_h&&_h.J().bd(wy)||(_h=new wt($y.Wf({x:(vy-Iy)/i0,y:(fy-Iy)/i0}),$y.Wf({x:(vy+Iy)/i0,y:(fy+Iy)/i0}),By),k0.push(_h)),_h.je(wy),_h=null}for(Jy=k0.length;Jy--;)if(_u=k0[Jy],ty=_u.rc(),ty<Ky)for(_u=_u.Vh,ty=_u.length;wy=_u[--ty];)Py.push(new vt(wy,By)),wy.Di=!0;else Ay.push(_u)}for(s=0,_e=_a.length;s<_e;s++)delete _a[s].Di;this.b=!1,i({clusters:_n,noisePoints:_o})}};function Bt(i){this.a=i,i=document.createElement("canvas");var o=i.getContext("2d"),s=this.a,_e=14*s;i.width=_e,i.height=_e,o.scale(s,s),o.beginPath(),o.strokeStyle="#FFFFFF",o.fillStyle="#1080DD",o.arc(7,7,6,0,2*Math.PI,!1),o.fill(),o.lineWidth=1,o.stroke(),this.f=new Uj(i,{size:{w:14,h:14},anchor:{x:7,y:7}}),this.b={},this.c={}}t("H.clustering.theme.Circular",Bt);function Ct(i,o,s){var _e,_n=document.createElement("canvas"),_o=_n.getContext("2d"),_a=i.a,_u=o*_a;return _n.width=_u,_n.height=_u,_o.scale(_a,_a),_a=o+":"+s,(_e=i.b[_a])?_o.putImageData(_e,0,0):(o/=2,_o.beginPath(),_o.strokeStyle="rgba("+s+",0.2)",_o.fillStyle="rgba("+s+",1)",_o.arc(o,o,o/5*3,0,2*Math.PI,!1),_o.fill(),_o.lineWidth=o/5*4,_o.stroke(),i.b[_a]=_o.getImageData(0,0,_u,_u)),_n}Bt.prototype.Tl=function(i){var o=i.rc(),s=this.c[o];if(!s){if(10>o){s=Ct(this,28,"118,209,0");var _e={x:11,y:18}}else 25>o?(s=Ct(this,38,"255,105,0"),_e={x:13,y:23}):50>o?(s=Ct(this,38,"240,60,0"),_e={x:13,y:23}):100>o?(s=Ct(this,38,"181,0,21"),_e={x:13,y:23}):1e3>o?(s=Ct(this,48,"181,0,21"),_e={x:15,y:28}):(s=Ct(this,66,"181,0,21"),_e={x:20,y:38});var _n=s.getContext("2d");_n.fillStyle="#FFFFFF",_n.font="bold 11px Arial",_n.fillText(String(o),_e.x,_e.y),_e=s.width/this.a,s=new Uj(s,{size:{w:_e,h:_e},anchor:{x:_e/2,y:_e/2}}),this.c[o]=s}return o=new Ln(i.wa(),{icon:s,min:i.nc(),max:i.Df()}),o.setData(i),o},Bt.prototype.getClusterPresentation=Bt.prototype.Tl,Bt.prototype.ym=function(i){var o=new Ln(i.wa(),{icon:this.f,min:i.nc()});return o.setData(i),o},Bt.prototype.getNoisePresentation=Bt.prototype.ym;function Dt(i){if(xt.call(this,i),i=this.g,i.projection!==kj)throw new D(Dt,0,"Other projection than mercator not supported yet");this.m=i.projection,this.f=i.eps,this.B=i.minWeight,this.s=new lj(this.m),new Pf().a("cluster","H.clustering.dynamicgrid.worker"),this.i=A(this.i,this),this.j=A(this.j,this)}u(Dt,xt),Dt.prototype.R=function(i,o){this.u=i,this.v=zd(o)},Dt.prototype.xi=function(i,o){var s=this.c,_e=this.u,_n=this.v||0,_o=!s||!(s.zoom===_n&&s.b.ga(_e));if(_e&&(this.b||_o)){if(s&&3>s.Wd&&s.cancel(),this.b=!1,s=this.f,s>=128*Ed(2,_n))var _a=Et;else{_o=this.s,_o.Ka(_n);var _u=_o.fb(_e.Ib());_a=_o.fb(_e.Eb()),_u.y-=s,_a.y+=s,_u=_o.Ne(_u);var _h=_o.Ne(_a);_a=new K(_u.lat,_u.lng,_h.lat,_h.lng),s=_o.La(s,0).lng+180,_a=_a.vc(_u.lat,_u.lng-s,_h.lat,_u.lng).vc(_u.lat,_h.lng,_h.lat,_h.lng+s)}for(s=_a,_u=this.a,_a=[],_o=_u.length;_o--;)s.bd(_u[_o])&&_a.push(_u[_o]);0<_a.length?(this.c=new Ft(_e,_n,_a,this.f,this.B,this.m!==kj,i,o),this.c.then(this.i,this.j)):i(zt)}},Dt.prototype.i=function(i){Ca(i)||(i=new x.Uint32Array(i)),this.c.g(Gt(this,i))},Dt.prototype.j=function(i){Ac(i)&&this.c.f(i)};var Et=new K(90,-180,-90,180);function Gt(i,o){for(var s=0,_e=o[s++],_n=Array(_e),_o=0,_a=[],_u=o.length,_h=i.c.a,ty=i.c.zoom;_e--;)_n[_o++]=new vt(_h[o[s++]],ty);for(;s<_u;){_e=o[s++],_o=_h[o[s]];var oy=i.s,hy=i.f;oy.Ka(i.c.zoom);var fy=oy.fb(_o);for(_o=oy.La(fy.x-hy,fy.y-hy),oy=oy.La(fy.x+hy,fy.y+hy),_o=new K(_o.lat,_o.lng,oy.lat,oy.lng),_o=new wt(_o.Ib(),_o.Eb(),ty);_e--;)_o.je(_h[o[s++]]);_a.push(_o)}return{clusters:_a,noisePoints:_n}}Dt.prototype.o=function(){Dt.l.o.call(this)},Dt.prototype.disposeInternal=Dt.prototype.o;function Ft(i,o,s,_e,_n,_o,_a,_u){this.b=i,this.zoom=o,this.a=s,this.g=_a,this.f=_u,i=s.length,_a=3*i,_u=new(x.Float64Array||Array)(_a);for(var _h;i--;)_h=s[i],_u[--_a]=_h.lat,_u[--_a]=_h.lng,_u[--_a]=_h.wt;ge.call(this,"cluster",{message:[_u,_e,_n,o,_o]},void 0)}u(Ft,Sf);function Ht(i,o,s){this.b=i,this.a=o,this.f=s}t("H.clustering.fastgrid.NoisePoint",Ht),Ht.prototype.wa=function(){return this.c||(this.c=this.b.La(this.a[1],this.a[0],1)),this.c},Ht.prototype.getPosition=Ht.prototype.wa,Ht.prototype.rc=function(){return this.a.a},Ht.prototype.getWeight=Ht.prototype.rc,Ht.prototype.kd=gf,Ht.prototype.isCluster=Ht.prototype.kd,Ht.prototype.nc=function(){return this.f-this.b.c},Ht.prototype.getMinZoom=Ht.prototype.nc,Ht.prototype.getData=function(){return this.a.data},Ht.prototype.getData=Ht.prototype.getData;function It(i,o,s,_e){this.b=i,this.a=o,this.j=s,this.R=_e,this.f=Ja(this.f,this),this.c=Ja(this.c,this)}t("H.clustering.fastgrid.Cluster",It),It.prototype.wa=function(){return this.m||(this.m=this.b.La(this.a.me,this.a.ne,this.a.Ab)),this.m},It.prototype.getPosition=It.prototype.wa,It.prototype.rc=function(){return this.a.Ab},It.prototype.getWeight=It.prototype.rc,It.prototype.kd=ff,It.prototype.isCluster=It.prototype.kd,It.prototype.nc=function(){return this.j?this.j-this.b.c:-1/0},It.prototype.getMinZoom=It.prototype.nc,It.prototype.Df=function(){return this.R-this.b.c},It.prototype.getMaxZoom=It.prototype.Df,It.prototype.J=function(){return this.i||(this.i=sg(this.b.La(this.a.a,this.a.f,1),this.b.La(this.a.b,this.a.c,1),!0)),this.i},It.prototype.getBoundingBox=It.prototype.J,It.prototype.Sg=function(i){this.g=i,this.a.Fc(this.f,Ud)},It.prototype.forEachEntry=It.prototype.Sg,It.prototype.f=function(i,o){var s=!1,_e,_n;if(i.Ab>=this.b.m&&i!==this.a&&i.Ab!==this.a.Ab&&(this.g(new It(this.b,i,0,o)),s=!0),!s&&(_e=i.entries))for(i=_e.length,_n=0;_n<i;_n++)this.g(new Ht(this.b,_e[_n],o));return s},It.prototype.ve=function(i){this.s=i,this.a.Fc(this.c,Ud)},It.prototype.forEachDataPoint=It.prototype.ve,It.prototype.c=function(i,o){var s;if(i=i.entries){var _e=i.length;for(s=0;s<_e;s++)this.s(new Ht(this.b,i[s],o))}return!1};function Jt(i,o,s,_e,_n,_o){this.g=o,i&&(this.parent=i,o&1?(s=i[8],_n=i[5]):(s=i[7],_n=i[8]),o&2?(_e=i[9],_o=i[6]):(_e=i[4],_o=i[9])),this[7]=s,this[5]=_n,this[8]=(s+_n)/2,this[4]=_e,this[6]=_o,this[9]=(_e+_o)/2}p=Jt.prototype,p.Vd=0;function Kt(i,o){return i[o]||(++i.Vd,i[o]=new Jt(i,o))}p.removeChild=function(i){var o=i.g;this[o]===i&&(delete this[o],delete i.parent,--this.Vd)},p.Fc=function(i,o){for(var s=0,_e=this;_e=_e.parent;)++s;Lt(this,i,o,s)};function Lt(i,o,s,_e){var _n,_o;if(!o(i,_e)&&s--)for(++_e,_n=0;4>_n;_n++)(_o=i[_n])&&Lt(_o,o,s,_e)}p.me=0,p.ne=0,p.Ab=0;function Mt(i){this.b=i||10,Nt(this)}function Nt(i){i.head=i.a=new Jt(null,NaN,0,0,4294967296,4294967296)}function Ot(i,o){var s,_e;for(s=0;4>s;s++)(_e=o[s])&&(Ot(i,_e),delete o[s]);delete o.parent,delete o.entries}function Pt(i,o){var s=i.head,_e;if(o){var _n=o;if(_n!==s)for(s=_n;_n=_n.parent;)(_n.entries||1<_n.Vd)&&(s=_n)}else for(;!s.entries&&2>(_e=s.Vd)&&_e;)s=_n;i.head=s}Mt.prototype.sc=function(i,o,s,_e){var _n=this.a;if(!(i>=_n[7]&&o>=_n[4]&&i<=_n[5]&&o<=_n[6]))throw Error("Coordinates out of bounds");return Qt(this,this.a,i,o,s,this.b,_e)};function Qt(i,o,s,_e,_n,_o,_a){var _u=o.entries;return _o?o.Vd?_u=Qt(i,Kt(o,+(s>=o[8])|+(_e>=o[9])<<1),s,_e,_n,_o-1,_a):_u?(_u=_u[0],_u=Kt(o,+(_u[1]>=o[8])|+(_u[0]>=o[9])<<1),_u.entries=o.entries,_u.me=o.me,_u.ne=o.ne,_u.Ab=o.Ab,_u.a=o.a,_u.f=o.f,_u.b=o.b,_u.c=o.c,delete o.entries,Pt(i,_u),_u=Qt(i,Kt(o,+(s>=o[8])|+(_e>=o[9])<<1),s,_e,_n,_o-1,_a)):(_o=_u=new Rt(s,_e,_n,_a),(o.entries||(o.entries=[])).push(_o),Pt(i,o)):(_u||Pt(i,o),i=_u=new Rt(s,_e,_n,_a),(o.entries||(o.entries=[])).push(i)),o.me+=s*_n,o.ne+=_e*_n,o.Ab+=_n,o.a===B?(o.a=o.b=s,o.f=o.c=_e):(s<o.a?o.a=s:s>o.b&&(o.b=s),_e<o.f?o.f=_e:_e>o.c&&(o.c=_e)),_u}Mt.prototype.Fc=function(i,o){Lt(this.a,i,o===+o?o:this.b,0)};function Rt(i,o,s,_e){this[0]=o,this[1]=i,this.a=s,this.data=_e}function St(i){xt.call(this,i),i=this.g,this.j=i.projection,this.s=i.min,this.f=i.max,this.m=i.minWeight,this.c=7-yd(Cd(xd(1,i.eps))/Md),this.i=new Mt(xd(this.s,this.f+this.c))}u(St,xt),p=St.prototype,p.Bc=function(i){var o=0,s=i.length,_e,_n=new G(0,0),_o=this.j,_a=this.i;for(St.l.Bc.call(this,i),Ot(_a,_a.a),Nt(_a);o<s;o++)_o.Kc(_e=i[o],_n).scale(4294967296).floor(),_a.sc(_n.x,_n.y,_e.wt,_e.data);this.b=!0},p.yb=function(i){St.l.yb.call(this,i),this.Bc(this.a)},p.hf=function(i){for(var o=i.length,s=St.l.yb;o--;)s.call(this,i[o]);this.Bc(this.a)},p.Se=function(i){St.l.Se.call(this,i),this.Bc(this.a)},p.La=function(i,o,s,_e){return this.j.La(i/s/4294967296,o/s/4294967296,_e)},p.xi=function(i){if(this.b){var o={clusters:[],noisePoints:[]};Tt(this,this.i.a,0,this.f+this.c,-1/0,o,null),this.b=!1,i(o)}};function Tt(i,o,s,_e,_n,_o,_a){var _u=o.Ab,_h;if(_a&&(_a.node.Ab!==_u?(_o.clusters.push(new It(i,_a.node,_a.depth,s-1)),_a=null):_n++),_a||(_u>=i.m?(_a={node:o,depth:s},_n=s):Ut(i,o,_n+1,_o)),o.Vd&&_e--)for(s++,_u=0;4>_u;_u++)(_h=o[_u])&&(Tt(i,_h,s,_e,_n,_o,_a),_a=null);_a&&_o.clusters.push(new It(i,_a.node,_a.depth,i.f+i.c))}function Ut(i,o,s,_e){o=o.entries;var _n;if(o){var _o=o.length;for(_e=_e.noisePoints,_n=0;_n<_o;_n++)_e.push(new Ht(i,o[_n],s))}else for(_n=0;4>_n;_n++)(_o=i[_n])&&Ut(i,_o,s,_e)}p.o=function(){St.l.o.call(this),this.i=null},St.prototype.disposeInternal=St.prototype.o,t("H.clustering.DataPoint",function(i,o,s,_e){this.lat=i,this.lng=o,this.wt=s===+s?s:1,this.data=_e});function Vt(i,o){o=o||{};var s={},_e=o.min||0,_n=xd(_e,o.max||22);switch(_e={min:_e,max:_n},Vt.l.constructor.call(this,_e),this.ya=o.pixelRatio||Te(),Ya(s,yt,_e,o.clusteringOptions||{}),s.minWeight=xd(yt.minWeight,s.minWeight),s.strategy){case Wt.DYNAMICGRID:if(s.projection!==kj)throw new D(Vt,1,"Unsupported projection");this.c=new Dt(s);break;case Wt.GRID:this.c=new At(s);break;default:this.c=new St(s)}this.c.Bc(i),this.v=o.theme||new Bt(this.ya),this.N=A(this.N,this),this.oa=A(this.oa,this),Xt(this)}u(Vt,N),t("H.clustering.Provider",Vt),Vt.prototype.o=function(){Vt.l.o.call(this),this.f.ma(),this.c.D(),delete this.c,delete this.K,delete this.v,x.clearTimeout(this.Y)};var Wt={FASTGRID:0,GRID:1,DYNAMICGRID:2};Vt.Strategy=Wt,Vt.prototype.N=function(){this.dispatchEvent("start"),this.c.xi(this.oa,jd)};function Xt(i,o,s){i.Y&&x.clearTimeout(i.Y),o&&i.c.R(o,s),i.Y=x.setTimeout(i.N,150)}Vt.prototype.oa=function(i){this.dispatchEvent("end"),this.K=i,Yt(this)},Vt.prototype.Bc=function(i){this.c.Bc(i),Xt(this)},Vt.prototype.setDataPoints=Vt.prototype.Bc,Vt.prototype.yb=function(i){this.c.yb(i),Xt(this)},Vt.prototype.addDataPoint=Vt.prototype.yb,Vt.prototype.hf=function(i){this.c.hf(i),Xt(this)},Vt.prototype.addDataPoints=Vt.prototype.hf,Vt.prototype.Se=function(i){this.c.Se(i),Xt(this)},Vt.prototype.removeDataPoint=Vt.prototype.Se,Vt.prototype.Sm=function(){return this.v},Vt.prototype.getTheme=Vt.prototype.Sm,Vt.prototype.jo=function(i){this.v=i,this.K&&(this.f.ma(),Yt(this))},Vt.prototype.setTheme=Vt.prototype.jo;function Yt(i){var o=i.K.clusters,s=i.K.noisePoints,_e=o.length,_n=s.length,_o=0<_e+_n;for(i.f.ma();_n--;){var _a=s[_n];i.f.ba(i.v.getNoisePresentation(_a))}for(;_e--;)s=o[_e],i.f.ba(i.v.getClusterPresentation(s));_o&&i.Sa()}Vt.prototype.Lb=function(){return!0},Vt.prototype.providesDomMarkers=Vt.prototype.Lb,Vt.prototype.Mb=function(){return!0},Vt.prototype.providesMarkers=Vt.prototype.Mb,Vt.prototype.wc=function(){return!0},Vt.prototype.providesSpatials=Vt.prototype.wc,Vt.prototype.Qe=function(i,o){Xt(this,i,o)},Vt.prototype.preprocessData=Vt.prototype.Qe,t("H.clustering.buildInfo",function(){return Hf("H-clustering","1.38.0","8be3148",{region:"row"})});function Zt(i,o){t:{for(var s=i.length,_e=typeof i=="string"?i.split(""):i,_n=0;_n<s;_n++)if(_n in _e&&o.call(void 0,_e[_n],_n,i)){o=_n;break t}o=-1}return 0>o?null:typeof i=="string"?i.charAt(o):i[o]}var $t={};function au(i){var o=i.ownerDocument,s=o.documentElement;o=o.defaultView;var _e=i.getBoundingClientRect();return i=_e.left,_e=_e.top,isNaN(o.pageXOffset)?(i+=s.scrollLeft,_e+=s.scrollTop):(i+=o.pageXOffset,_e+=o.pageYOffset),new G(i,_e)}function bu(i,o,s){o=Dc(o)?o+"px":o,s=Dc(s)?s+"px":s,i.style[Af("transform")]="translate("+o+","+s+")"}var cu,du=navigator.userAgent,eu=-1<du.indexOf("Android")&&-1<du.indexOf("Mozilla/5.0")&&-1<du.indexOf("AppleWebKit"),fu=/AppleWebKit\/([\d.]+)/,gu=fu.exec(du)===null?null:parseFloat(fu.exec(du)[1]);cu=eu&&gu!==null&&537>gu;var hu=globalThis,iu=document.createElement("T");function ju(){this.a=this.ej()}ju.prototype.ej=function(){var i=navigator,o=[];return i&&(i.msPointerEnabled?o.push(ku):i.pointerEnabled&&o.push(lu)),1>o.length&&("TouchEvent"in hu&&o.push(mu),o.push(nu)),o},ju.prototype.detectEventSets=ju.prototype.ej,ju.prototype.addEventListener=function(i,o,s,_e){for(var _n=this.a,_o,_a=_n.length,_u=!1;_a--;)(_o=_n[_a][o])&&(_u=!0,i.addEventListener(_o,s,_e||!1));_u||i.addEventListener(o,s,_e||!1)},ju.prototype.removeEventListener=function(i,o,s,_e){for(var _n=this.a,_o,_a=_n.length,_u=!1;_a--;)(_o=_n[_a][o])&&(_u=!0,i.removeEventListener(_o,s,_e||!1));_u||i.removeEventListener(o,s,_e||!1)};var lu={start:"pointerdown",end:"pointerup",move:"pointermove",cancel:"pointercancel",over:"pointerover",out:"pointerout",hover:"pointerhover"},ku={start:"MSPointerDown",end:"MSPointerUp",move:"MSPointerMove",cancel:"MSPointerCancel",over:"MSPointerOver",out:"MSPointerOut",hover:"MSPointerHover"},mu={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},nu={start:"mousedown",end:"mouseup",move:"mousemove",over:"mouseover",out:"mouseout",hover:"mousehover"};function ou(i,o,s,_e){return i=i.createElement(o),s&&(i.className=s),_e&&(i.innerHTML=_e),i}function pu(i,o){for(var s=1,_e=arguments.length;s<_e;s++)i.appendChild(arguments[s])}var qu=new ju;function ru(i,o,s){qu.addEventListener(i,o,s,void 0)}function su(i,o,s){qu.removeEventListener(i,o,s,void 0)}function Y(i,o){F.call(this),this.ya=i||"div",this.c=o?o.split(" "):[],this.S=!1,this.c.push("H_el")}u(Y,F),t("H.ui.base.Element",Y),Y.prototype.T=function(i){if(!i)throw Error("Wrong document object");return this.P=ou(i,this.ya,this.c.join(" ")),this.renderInternal(this.P,i),this.ta(this.Zb(),!0),this.ec(this.ra),this.mb(this.ea),this.P},Y.prototype.Y=function(){},Y.prototype.K=function(){},Y.prototype.U=function(){},Y.prototype.renderInternal=Y.prototype.U,Y.prototype.Zb=function(){return this.S},Y.prototype.isDisabled=Y.prototype.Zb,Y.prototype.ta=function(i,o){return i=!!i,(i!==this.S||o)&&((this.S=i)?this.Ga("H_disabled"):this.hb("H_disabled")),this},Y.prototype.setDisabled=Y.prototype.ta,Y.prototype.v=null,Y.prototype.getData=function(){return this.v},Y.prototype.getData=Y.prototype.getData,Y.prototype.setData=function(i){this.v=i},Y.prototype.setData=Y.prototype.setData,Y.prototype.ec=function(i){var o=this.L();this.ra=i,o&&(i?o.setAttribute("title",i):o.removeAttribute("title"))},Y.prototype.setTooltip=Y.prototype.ec,Y.prototype.P=null,Y.prototype.L=function(){return this.P},Y.prototype.getElement=Y.prototype.L,Y.prototype.ea=!0,Y.prototype.mb=function(i){var o=this.L();this.ea=i,o&&(o.style.display=i?"":"none")},Y.prototype.setVisibility=Y.prototype.mb,Y.prototype.qc=function(){return this.ea},Y.prototype.getVisibility=Y.prototype.qc,Y.prototype.Ga=function(i){var o=this.L();return 0>this.c.indexOf(i)&&this.c.push(i),o&&(o.className=this.c.join(" ")),this},Y.prototype.addClass=Y.prototype.Ga,Y.prototype.hb=function(i){i=this.c.indexOf(i);var o=this.L();return-1<i&&this.c.splice(i,1),o&&(o.className=this.c.join(" ")),this},Y.prototype.removeClass=Y.prototype.hb;function tu(i){(i=i.L())&&i.parentNode&&i.parentNode.removeChild(i)}Y.prototype.o=function(){Y.l.o.call(this),tu(this),this.v=this.P=null,delete this.ra};function uu(i){i=i||{},Y.call(this,"div","H_btn"),this.Dc(i.label||" "),this.ec(i.tooltip||""),this.setData(i.data),this.ta(!!i.disabled),this.O(vu.UP,!0),i.onStateChange&&this.addEventListener("statechange",i.onStateChange),this.b=A(this.b,this),this.a=A(this.a,this)}u(uu,Y),t("H.ui.base.Button",uu),uu.prototype.ta=function(i,o){return i&&this.hb("H_active"),uu.l.ta.call(this,i,o)},uu.prototype.setDisabled=uu.prototype.ta,uu.prototype.U=function(i){ru(i,"start",this.b),ru(i,"end",this.a),ru(i,"out",this.a),this.Dc(this.Ce(),!0)},uu.prototype.renderInternal=uu.prototype.U,uu.prototype.getState=function(){return this.g},uu.prototype.getState=uu.prototype.getState,uu.prototype.O=function(i,o){return i!==this.g&&(this.g=i,i===vu.DOWN?this.Ga("H_active"):this.hb("H_active"),o||this.dispatchEvent("statechange")),this},uu.prototype.setState=uu.prototype.O,uu.prototype.Ce=function(){return this.f},uu.prototype.getLabel=uu.prototype.Ce,uu.prototype.Dc=function(i,o){return(o||i!==this.f)&&(this.f=i,(o=this.L())&&(o.innerHTML=i)),this},uu.prototype.setLabel=uu.prototype.Dc,uu.prototype.b=function(i){this.Zb()||this.O(vu.DOWN),i.preventDefault()},uu.prototype.a=function(i){this.Zb()||this.O(vu.UP),i.preventDefault()},uu.prototype.o=function(){var i=this.L();i&&(su(i,"start",this.b),su(i,"end",this.a),su(i,"out",this.a)),Y.prototype.o.call(this)};var vu={UP:"up",DOWN:"down"};uu.State=vu;var wu={in:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g><path d="m5 10.6h5.6v-5.6h2.8v5.6h5.6v2.8h-5.6v5.6h-2.8v-5.6h-5.6v-2.8z"></path></g></svg>',out:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path d="m5 10.6h14v2.8h-14z"/></svg>'};function xu(i){i=i||{};var o;this.b=!!i.vertical,this.oa=i.length||"16em",this.a=Dc(o=i.min)?o:0,this.i=xd(this.a,Dc(o=i.max)?o:100),this.V=E(o=i.step)?1:o,this.j=yu(this,Dc(o=i.value)?o:(this.a+this.i)/2),this.Tf=A(this.Tf,this),this.Pf=A(this.Pf,this),this.Vf=A(this.Vf,this),this.Uf=A(this.Uf,this),this.m=i.pointerArea,Y.call(this,"div","H_slider"+(this.b?"":" H_l_horizontal"))}u(xu,Y),t("H.ui.base.Slider",xu),xu.prototype.pg=function(i,o){var s=this.b,_e=s?"top":"left";return(!this.f||o)&&(i=Zd(i,this.a,this.i),this.g&&(o=100*(i-this.a)/(this.i-this.a),s=(s?-1:1)*o,this.g.style[_e]=s+"%",this.ua.style[_e]=100+s+"%"),this.j=yu(this,i)),this.j},xu.prototype.setValue=xu.prototype.pg,xu.prototype.Ym=function(){return this.j},xu.prototype.getValue=xu.prototype.Ym;function zu(i){if(!i.s){ru(i.L(),"start",i.Tf);var o=i.m;ru(o,"move",i.Pf),ru(o,"end",i.Vf),ru(o,"out",i.Uf),i.s=!0}}function Au(i){if(i.s){su(i.L(),"start",i.Tf);var o=i.m;su(o,"move",i.Pf),su(o,"end",i.Vf),su(o,"out",i.Uf),i.s=!1}}function yu(i,o){var s=i.V;return o=Zd(o,i.a,i.i),s?i.a+yd((o-i.a)/s)*s:o}function Bu(i,o){var s=i.B,_e=i.b;i.u||(i.u=s["offset"+(_e?"Height":"Width")]),o-=au(s)[_e?"y":"x"],0>o&&(o=0),o=(i.i-i.a)*o/i.u,o=yu(i,_e?i.i-o:i.a+o),i.j!==o&&(i.pg(o,!0),i.dispatchEvent(new aj(i.A.$c,o,i.j)))}function Cu(i,o){return(o.touches?o.targetTouches[0]:o)["page"+(i.b?"Y":"X")]}function Du(i){var o=!1,s=i.type;return s.indexOf("pointer")!==-1||s.indexOf("touch")!==-1?o=!0:C(i,MouseEvent)&&(o=i.which===1||i.buttons===1),o}function Eu(i){var o=i.touches;return o&&o.length===1||C(i,MouseEvent)}p=xu.prototype,p.Tf=function(i){var o=this.b;if(Du(i)&&Eu(i)){var s=Cu(this,i),_e=i.target;_e===this.g||_e.parentElement===this.g?(this.N=s-au(this.g)[o?"y":"x"]-this.g.offsetWidth/2,this.L().className="H_slider H_slider_active"+(this.b?"":" H_l_horizontal"),this.f=!0):Bu(this,s),i.preventDefault()}},p.Vf=function(){this.f&&(this.L().className="H_slider "+(this.b?"":" H_l_horizontal"),this.f=!1)},p.Uf=function(i){this.f&&i.target===this.m&&(this.f=!1)},p.Pf=function(i){this.f&&Eu(i)&&(Du(i)?(Bu(this,Cu(this,i)-this.N),i.preventDefault()):this.f=!1)},p.A={$c:"change"},p.U=function(i,o){var s=ou(o,"div","H_slider_cont"),_e=ou(o,"div","H_slider_knob_cont"),_n=ou(o,"div","H_slider_knob"),_o=ou(o,"div","H_slider_knob_halo"),_a=ou(o,"div","H_slider_track");o=ou(o,"div","H_slider_track H_slider_track_active"),i.appendChild(s),s.appendChild(_a),_a.appendChild(o),s.appendChild(_e),_e.appendChild(_n),_e.appendChild(_o),this.B=_a,this.ua=o,this.g=_e,this.m||(this.m=i.ownerDocument.body),s.style[this.b?"height":"width"]=this.oa,this.pg(this.j),zu(this)},xu.prototype.renderInternal=xu.prototype.U,xu.prototype.o=function(){Au(this)},xu.prototype.ta=function(i,o){return i?Au(this):this.B&&zu(this),Y.prototype.ta.call(this,i,o)},xu.prototype.setDisabled=xu.prototype.ta;var Fu={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",LEFT_TOP:"left-top",LEFT_MIDDLE:"left-middle",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_MIDDLE:"right-middle",RIGHT_BOTTOM:"right-bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"};t("H.ui.LayoutAlignment",Fu);function Gu(i,o,s){Y.call(this,i,o),this.a=s?s.concat():[]}u(Gu,Y),t("H.ui.base.Container",Gu),Gu.prototype.ta=function(i,o){var s=this.a?this.a.length:0;for(Y.prototype.ta.call(this,i,o);s--;)this.a[s].ta(i,o);return this},Gu.prototype.setDisabled=Gu.prototype.ta,Gu.prototype.Fa=function(i){var o=this.L();return this.a.push(i),o&&(i.T(o.ownerDocument),o.appendChild(i.L())),this},Gu.prototype.addChild=Gu.prototype.Fa,Gu.prototype.Xg=function(){return this.a.concat()},Gu.prototype.getChildren=Gu.prototype.Xg,Gu.prototype.removeChild=function(i){var o=this.a.indexOf(i),s=this.L();0<=o&&(this.a.splice(o,1),s&&s.removeChild(i.L()))},Gu.prototype.removeChild=Gu.prototype.removeChild,Gu.prototype.ma=function(){var i=this.L();i&&this.a.forEach(function(o){i.removeChild(o.L())}),this.a=[]},Gu.prototype.U=function(i,o){for(var s=0,_e=this.a.length;s<_e;s++)i.appendChild(this.a[s].T(o))},Gu.prototype.renderInternal=Gu.prototype.U,Gu.prototype.o=function(){this.ma(),this.a.forEach(this.oa,this),Y.prototype.o.call(this)},Gu.prototype.oa=function(i){i.D()};function Hu(){Gu.call(this,"div","H_ctl"),this.map=null,this.Hc="top-left"}u(Hu,Gu),t("H.ui.Control",Hu),Hu.prototype.Ea=function(i){this.map=i},Hu.prototype.T=function(i){return Gu.prototype.T.call(this,i)},Hu.prototype.U=function(i,o){Gu.prototype.renderInternal.call(this,i,o),this.Pb(this.Hc)},Hu.prototype.renderInternal=Hu.prototype.U,Hu.prototype.Me=function(){},Hu.prototype.onUnitSystemChange=Hu.prototype.Me,Hu.prototype.Wb=function(){return this.map},Hu.prototype.getMap=Hu.prototype.Wb,Hu.prototype.va=function(){return this.ua},Hu.prototype.getLocalization=Hu.prototype.va,Hu.prototype.Ml=function(){return this.Hc},Hu.prototype.getAlignment=Hu.prototype.Ml,Hu.prototype.Pb=function(i){return typeof i=="string"&&Fu[i.replace("-","_").toUpperCase()]===i&&(this.Hc=i,this.dispatchEvent("alignmentchange")),this},Hu.prototype.setAlignment=Hu.prototype.Pb;function Iu(i){i=i||{};var o=i.slider;Hu.call(this),this.m=A(this.m,this),this.g=A(this.g,this),this.b=A(this.b,this),o&&(this.u=A(this.u,this),this.B=o,this.Ya=i.sliderSnaps,this.Ga("H_zoom_slider")),this.i=new uu({label:wu.in,onStateChange:this.m}),this.s=new uu({label:wu.out,onStateChange:this.m}),this.Ga("H_zoom"),this.Ga("H_grp"),this.V=i.fractionalZoom!==!1,this.setZoomSpeed(i.zoomSpeed||4),this.Pb(i.alignment||"right-middle")}u(Iu,Hu),t("H.ui.ZoomControl",Iu),Iu.prototype.bn=function(){return this.N},Iu.prototype.getZoomSpeed=Iu.prototype.bn,Iu.prototype.mo=function(i){this.N=i},Iu.prototype.setZoomSpeed=Iu.prototype.mo,Iu.prototype.Ea=function(i){this.map!==i&&(this.map&&this.map.removeEventListener("mapviewchange",this.g),Ju(this)),Hu.prototype.Ea.apply(this,arguments),this.map&&(this.b(),i.addEventListener("mapviewchange",this.g),i.addEventListener("baselayerchange",this.b))},Iu.prototype.setMap=Iu.prototype.Ea,Iu.prototype.o=function(){Hu.prototype.o.apply(this,arguments),this.map.removeEventListener("baselayerchange",this.b),Ju(this)},Iu.prototype.U=function(i,o){Hu.prototype.renderInternal.call(this,i,o),this.i.ec(this.va().translate("zoom.in")),this.s.ec(this.va().translate("zoom.out"))},Iu.prototype.renderInternal=Iu.prototype.U,Iu.prototype.Pb=function(i){var o=this.Hc;return Hu.prototype.Pb.call(this,i),o!==i&&this.b(),this},Iu.prototype.setAlignment=Iu.prototype.Pb,Iu.prototype.g=function(){var i=this.map,o=i.kb(),s=i.Ua()-1;i=i.g||i.f.getCapabilities().lookAt.zoom,this.B&&this.f.pg(o),this.Zb()||(this.i.ta(o+s>=i.max),this.s.ta(o<=i.min))},Iu.prototype.ta=function(i,o){return Iu.l.ta.call(this,i,o),this.g(),this},Iu.prototype.setDisabled=Iu.prototype.ta;function Ju(i){i.removeChild(i.f),i.f=null,i.j&&(i.j.removeEventListener("minchange",i.b),i.j.removeEventListener("maxchange",i.b),i.j=null)}Iu.prototype.m=function(i){i=i.target;var o=i===this.i?1:-1,s=0<o?Math.ceil:Math.floor,_e=this.map,_n,_o=this;_e&&(i.getState()==="down"?(_e.c.startControl(),_e.c.control(0,0,o*this.N,0,0,0)):_e.c.endControl(!0,function(_a){_n=_o.V?_a.zoom:s(_a.zoom),_a.zoom=_n}))},Iu.prototype.u=function(i){this.map&&this.map.$e(i.newValue)},Iu.prototype.b=function(){var i=this.Hc,o=this.Wb();if(/^top/g.test(i)||/^bottom/g.test(i)){var s=this.s;i=this.i;var _e=!1}else s=this.i,i=this.s,_e=!0;if(this.removeChild(s),this.removeChild(i),this.Fa(s),this.B&&o){Ju(this),o=_e;var _n=(_e=(s=this.map)&&s.g)||s.f.getCapabilities().lookAt.zoom;(this.j=_e)&&(_e.addEventListener("minchange",this.b),_e.addEventListener("maxchange",this.b)),this.f=new xu({step:this.Ya?1:0,vertical:o,min:_n.min,max:_n.max,value:s.kb(),pointerArea:s.L()}),this.f.addEventListener(this.f.A.$c,this.u),this.Fa(this.f)}this.Fa(i)};function Ku(i,o){var s={},_e={};s["top-left"]=ou(o,"div",[Lu,Mu].join(" ")),s["top-center"]=ou(o,"div",[Lu,Nu,Ou,Mu].join(" ")),s["top-right"]=ou(o,"div",[Lu,Mu].join(" ")),s["left-top"]=ou(o,"div",[Lu,Pu].join(" ")),s["left-middle"]=ou(o,"div",[Lu,Qu,Ru,Pu].join(" ")),s["left-bottom"]=ou(o,"div",[Lu,Pu].join(" ")),s["right-top"]=ou(o,"div",[Lu,Pu].join(" ")),s["right-middle"]=ou(o,"div",[Lu,Su,Ru,Pu].join(" ")),s["right-bottom"]=ou(o,"div",[Lu,Pu].join(" ")),s["bottom-left"]=ou(o,"div",[Lu,Mu].join(" ")),s["bottom-center"]=ou(o,"div",[Lu,Tu,Ou,Mu].join(" ")),s["bottom-right"]=ou(o,"div",[Lu,Mu].join(" ")),_e["top-left"]=ou(o,"div",[Nu,Qu].join(" ")),_e["top-right"]=ou(o,"div",[Nu,Su].join(" ")),_e["bottom-left"]=ou(o,"div",[Tu,Qu].join(" ")),_e["bottom-right"]=ou(o,"div",[Tu,Su].join(" ")),pu(_e["top-left"],s["top-left"],s["left-top"]),pu(_e["top-right"],s["top-right"],s["right-top"]),pu(_e["bottom-left"],s["left-bottom"],s["bottom-left"]),pu(_e["bottom-right"],s["right-bottom"],s["bottom-right"]),pu(i,_e["top-left"],_e["top-right"],_e["bottom-left"],_e["bottom-right"],s["top-center"],s["left-middle"],s["right-middle"],s["bottom-center"]),this.a=s}var Nu="H_l_top",Tu="H_l_bottom",Qu="H_l_left",Su="H_l_right",Ou="H_l_center",Ru="H_l_middle",Mu="H_l_horizontal",Pu="H_l_vertical",Lu="H_l_anchor";Ku.prototype.update=function(){var i=this.a;Uu(i["top-center"],!0),Uu(i["bottom-center"],!0),Uu(i["left-middle"],!1),Uu(i["right-middle"],!1)};function Uu(i,o){o?(o=i.offsetWidth,i.style.marginLeft=-Math.round(.5*o)+"px"):(o=i.offsetHeight,i.style.marginTop=-Math.round(.5*o)+"px")}Ku.prototype.put=function(i,o){i=i?i.L():null;var s=o?this.a[o]:null;i&&s&&(i.parentElement&&i.parentElement.removeChild(i),s.insertBefore(i,/(bottom|right)$/.test(o)||/(center|middle)/.test(o)&&s.childNodes.length%2?s.firstChild:null)),this.update()};var Vu={IMPERIAL:"imperial",METRIC:"metric"};t("H.ui.UnitSystem",Vu);var Wu={btn:'<svg class="H_icon" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><g transform="translate(3 2)"><path d="m18 13v7h-18v-7h2v5h2v-2h2v2h2v-3h2v3h2v-2h2v2h2v-5z"></path><path d="m2.3.3c.7 0 1.3.1 1.8.4s.9.6 1.1 1 .4.9.4 1.4c0 .5-.1 1-.3 1.4s-.57 1-1 1.6-1.3 1.3-2.3 2.2h3.9l-.2 1.7h-6.16v-1.6c1.1-1.1 2-2 2.5-2.6s.9-1 1-1.4.3-.8.3-1.2c0-.4-.1-.7-.3-.9s-.5-.3-.9-.3c-.3 0-.6 0-.9.2s-.5.4-.8.7l-1.3-1c.4-.5.9-.9 1.4-1.2s1.2-.4 1.8-.4zm14.4 9.7h-2.3l-.2-3.8c 0-.9-.1-1.7-.1-2.4 0-.5 0-1 0-1.5l-1.5 6.7h-2.2l-1.6-6.7c.1.8.1 1.6.1 2.3 0 .5 0 1.1 0 1.7l-.2 3.8h-2.2l.7-9.7h2.9l1.5 6.6 1.4-6.6h2.9z"></path></g></g></svg>',point:'<svg height="22" viewBox="0 0 12 12" width="22" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m6 12c3.3 0 6-2.7 6-6s-2.7-6-6-6-6 2.7-6 6 2.7 6 6 6z" fill="#fff"></path><path d="m6 10c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4z" fill="#2ed5c9" stroke="#272c36" stroke-width="2"></path></g></svg>'};function Xu(i){uu.call(this,i),this.j=function(o){o.preventDefault()},this.i=A(function(o){this.Zb()||this.toggleState(),o.preventDefault()},this)}u(Xu,uu),t("H.ui.base.PushButton",Xu),Xu.prototype.U=function(i){ru(i,"start",this.i),ru(i,"end",this.j),this.Dc(this.Ce(),!0)},Xu.prototype.renderInternal=Xu.prototype.U,Xu.prototype.uo=function(){var i=vu.DOWN;return this.O(this.getState()===i?vu.UP:i),this},Xu.prototype.toggleState=Xu.prototype.uo,Xu.prototype.o=function(){var i=this.L();i&&su(i,"start",this.i),uu.prototype.o.call(this)};function Yu(i,o,s){$i.call(this,i,{icon:Zu,visibility:s}),$u(this,o)}u(Yu,$i);function $u(i,o){i.qn=o,i.P&&(i.P.textContent=o)}var Zu=new Ri(ou(hu.document,"span","H_dm_label"),{onAttach:function(i,o,s){s.P=i,$u(s,s.qn)},onDetach:function(i,o,s){delete s.P}});function av(i,o){F.call(this),this.b=i,this.f=new Yu(this.so,""),o.push(this.f),this.a=new R({objects:o,data:this}),this.mg=this.mg.bind(this)}u(av,F),p=av.prototype,p.Rc=!1,p.so={lat:0,lng:0},p.Dc=function(i,o){$u(this.f,i),this.f.aa(o)},p.Kh=0,p.mg=function(){this.f.mb(this.s)};function bv(i,o){o&&(i.nextSibling=o,o.previousSibling=i)}function cv(i,o,s,_e){var _n=new L,_o=[];bv(i,this),bv(this,o),_n.nd(i.wa()),_n.nd(o.wa()),this.c=new th(_n,{style:s.Ud}),this.i=new th(_n,{style:{strokeColor:"transparent",lineWidth:Math.min(100,this.c.$().lineWidth+2*(_e||5))}}),s.c&&(this.g=new th(_n,{style:s.c}),_o.push(this.g)),_o.push(this.c,this.i),av.call(this,s,_o),this.m=this.j=-1,i=this.a,i.addEventListener("pointermove",this.v,!0,this),i.addEventListener("pointerleave",this.u,!0,this)}u(cv,av),cv.prototype.Ae=function(){var i=this.c.da();return i.te(0).Ta(i.te(1))};function dv(i,o,s){var _e=i.c.da();_e.bf(3*+s,3,[o.lat,o.lng,0]),i.g&&i.g.aa(_e),i.i.aa(_e),i.c.aa(_e)}cv.prototype.v=function(i){var o=i.currentPointer;i=this.previousSibling.wa();var s=this.nextSibling.wa(),_e=this.b.f,_n=o.viewportX;o=o.viewportY,(this.j!==_n||this.m!==o)&&(this.j=_n,this.m=o,_e.aa(this.b.g(i,s,{x:_n,y:o})),_e.mb(!0))},cv.prototype.u=function(){this.b.f.mb()},cv.prototype.gi=function(){this.Dc(this.b.a(this.Ae()),this.c.J().Za())};function ev(i,o,s){s=o.b(s||0),this.c=new Ln(i,{icon:s,zIndex:0}),this.c.draggable=!0,av.call(this,o,[this.c]),i=this.a,i.addEventListener("dragstart",this.Gn,!0,this),i.addEventListener("drag",this.Hn,!0,this),i.addEventListener("dragend",this.Fn,!0,this)}u(ev,av),p=ev.prototype,p.jk=0,p.A={$c:"change"},p.Ae=function(){return this.jk},p.wa=function(){return this.c.da()};function fv(i){var o=0;i.nextSibling&&i.previousSibling&&(i.nextSibling.Rc||i.previousSibling.Rc?i.nextSibling.Rc&&!i.previousSibling.Rc&&(o=2):o=1),o=i.b.b(o),i.c.Cc(o)}p.Hn=function(i){var o=i.currentPointer;i=o.viewportX,o=o.viewportY,(this.i!==i||this.j!==o)&&(this.i=i,this.j=o,this.c.aa(this.b.map.Ra(i-this.g.x,o-this.g.y)),this.dispatchEvent(new sd(this.A.$c,this)))},p.Gn=function(i){var o=i.currentPointer,s=o.viewportX;o=o.viewportY;var _e=this.b.map.Aa(this.wa());this.c.ce(1),this.g={x:s-_e.x,y:o-_e.y},i.stopPropagation()},p.Fn=function(){this.c.ce(0)},p.gi=function(i){this.jk=i,this.Dc(this.b.a(i),this.wa())};function gv(i,o){this.c=o,this.b=i,this.a={Rc:!0},hv(this,this.a),this.Sf=A(this.Sf,this)}t("H.ui.distanceMeasurement.Model",gv),p=gv.prototype,p.Kf=function(){return this.a.nextSibling===this.a};function iv(i,o){i=i.a;for(var s=i.nextSibling;s!==i;){var _e=s,_n=s.previousSibling===i?!1:o;(_e.s=_n)?_e.mg():(_e.Kh&&x.clearTimeout(_e.Kh),_e.Kh=x.setTimeout(_e.mg,100)),s=s.nextSibling}}function jv(i,o){var s=o||i.a.nextSibling,_e=0,_n=0;if(o&&!kv(i,o))throw new D(i.Ue,0,o);for(s instanceof ev?_e=s.Ae():s instanceof cv&&(_e=s.previousSibling.Ae()),o=s;o&&o!==i.a;o=o.nextSibling,_n++)o.gi(_e),_n%2===1&&(_e+=o.Ae())}p.je=function(i){var o=this.a.previousSibling,s=this.Kf();return i=new ev(i,this.c,s?0:2),this.b.ba(i.a),bv(i,this.a),i.addEventListener(i.A.$c,this.Sf),s?hv(this,i):(lv(this,o,i),fv(o),jv(this,o)),i},p.insertBefore=function(i,o){var s,_e=1;if(o){if(!kv(this,o))throw new D(this.insertBefore,1,o);(s=o.previousSibling.Rc)&&(_e=0),i=new ev(i,this.c,_e),i.addEventListener(i.A.$c,this.Sf),this.b.ba(i.a),s?(s=this.a.nextSibling,lv(this,i,s),hv(this,i),o=i,fv(s)):(s=o.previousSibling,o=s.previousSibling,_e=s.nextSibling,this.b.Da(s.a),lv(this,o,i),lv(this,i,_e)),jv(this,o)}else i=this.je(i);return i},p.ma=function(){hv(this,this.a),this.b.ma()},p.Ue=function(i){var o=this.a,s=i.previousSibling,_e=i.nextSibling;if(!kv(this,i))throw new D(this.Ue,0,i);if(this.b.Da(i.a),s===o){var _n=_e;_n!==o?(i=_n.nextSibling,hv(this,i),i.gi(0),fv(i),jv(this,i)):hv(this,this.a)}else _e===o?(_n=s,i=_n.previousSibling,bv(i,o),fv(i)):s&&_e&&(lv(this,s.previousSibling,_e.nextSibling),this.b.od([_e.a,s.a]),jv(this,s.previousSibling));_n&&_n!==o&&this.b.Da(_n.a)};function kv(i,o){for(var s=i.a.nextSibling,_e=!1;s!==i.a;){if(s===o){_e=!0;break}s=s.nextSibling}return _e}function lv(i,o,s){o=new cv(o,s,i.c),i.b.ba(o.a)}function hv(i,o){i.a.nextSibling=o,o.previousSibling=i.a}p.Sf=function(i){i=i.target;var o=i.previousSibling,s=i.nextSibling,_e=i.wa();if(!s.Rc){dv(s,_e,!1);var _n=i}o.Rc||(dv(o,_e,!0),_n=o.previousSibling),jv(this,_n)};function mv(i){i=i||{};var o,s=i.lineStyle;Hu.call(this),this.m=new Xu({label:Wu.btn,onStateChange:A(this.Dn,this)}),this.Fa(this.m),(o=i.distanceFormatter)&&(this.hj=o),s&&(this.Zj=s,this.uk=B),this.Pb(i.alignment||"right-bottom"),this.g={},this.g[0]=i.startIcon,this.g[2]=i.endIcon,this.g[1]=i.stopoverIcon,this.g[3]=i.splitIcon}u(mv,Hu),t("H.ui.DistanceMeasurement",mv),p=mv.prototype,p.Jh=Vu.METRIC,p.Zj={strokeColor:"rgb(39,44,54)",lineWidth:5},p.uk={strokeColor:"white",lineWidth:7};function nv(i){var o=i.map,s,_e={};i.f||(i.j=new N,i.s=new rl(i.j,{pixelRatio:i.map.Ua()}),i.u=s=i.j.Xb(),i.u.Xk(!0),s.addEventListener("dragstart",i.Bn,!0,i),s.addEventListener("dragend",i.af,!0,i),s.addEventListener("pointerenter",i.af,!0,i),s.addEventListener("pointerleave",i.Cn,!0,i),s.addEventListener("tap",i.Qn,!0,i),i.i=ov(i),_e.a=A(i.hj,i),_e.b=A(i.fk,i),_e.g=A(i.zj,i),_e.map=i.map,_e.f=i.i,_e.Ud=i.Zj,_e.c=i.uk,i.b=new gv(i.u,_e),i.f=!0),i.i&&i.u.ba(i.i),o.addEventListener("tap",i.rk,!0,i),o.a.add(i.s)}function pv(i){var o=i.map;i.f&&(o.removeEventListener("tap",i.rk,!0,i),o.Te(i.s),i.b.ma())}function ov(i){function o(){var _u=s.sb();return _u={anchor:s.fd().clone().scale(_o).floor(),size:new Ui(zd(_u.w*_o),zd(_u.h*_o)),hitArea:_e},new Uj(s.Lc(),_u)}var s=i.fk(3),_e=new Vi(Wi.NONE,[]),_n,_o=s===i.B?.5:1;if(s.getState()===1)var _a=o();else _a=new Uj("<svg/>",{hitArea:_e}),s.addEventListener("statechange",function(){s.getState()===1&&_n.Cc(o())});return _n=new Ln(i.map.Za(),{visibility:!1,icon:_a})}p.hj=function(i){var o="m",s=0;return this.Jh==="metric"?1e3<=i&&(i/=1e3,o="km",s=1):(i/=.3048,o="ft",5280<=i&&(i/=5280,o="mi",s=1)),i.toFixed(s)+" "+this.va().translate("scale."+o)},p.zj=function(i,o,s){var _e=this.map.Aa(i);return o=this.map.Aa(o),s=new G(s.x,s.y).yj(_e,o),this.map.Ra(s.x,s.y)||ng(i)},p.U=function(i,o){var s=22*(this.map.f.type===ik.P2D?this.map.Ua():1),_e=s/2;Hu.prototype.renderInternal.call(this,i,o),this.Jh=Vu.METRIC,this.B=new Uj(Wu.point,{anchor:{x:_e,y:_e},size:{w:s,h:s},hitArea:new Vi(Wi.CIRCLE,[_e,_e,_e])}),this.m.ec(this.va().translate("distance.measurement"))},mv.prototype.renderInternal=mv.prototype.U,p=mv.prototype,p.fk=function(i){return this.g[i]||this.B},p.af=function(){iv(this.b,!0)},p.Bn=function(){iv(this.b)},p.Cn=function(i){i.currentPointer.type!=="touch"&&iv(this.b)},p.Qn=function(i){var o=i.currentPointer,s=i.target.Ca,_e;s&&(s=s.getData())instanceof av&&(_e=s),s=_e,i=i.originalEvent,i=i.metaKey||i.altKey,s&&(i&&s instanceof ev?this.b.Ue(s):s instanceof cv&&(i=s.previousSibling.wa(),_e=s.nextSibling.wa(),o={x:o.viewportX,y:o.viewportY},this.b.insertBefore(this.zj(i,_e,o),s.nextSibling),this.i.mb()),this.af())},p.rk=function(i){var o=i.currentPointer;i=i.target,i!==this.map&&i.getProvider&&i.getProvider()===this.j||(this.b.je(this.map.Ra(o.viewportX,o.viewportY)),this.i.mb(),this.af())},p.Dn=function(i){i.target.getState()==="down"?nv(this):pv(this)},p.Me=function(i){this.Jh=i,this.f&&(jv(this.b),this.af())},mv.prototype.onUnitSystemChange=mv.prototype.Me,mv.prototype.o=function(){pv(this),this.f&&(this.j.D(),this.s.D()),mv.l.o.call(this)},mv.prototype.Ea=function(i){i?this.m.getState()===vu.DOWN&&(this.map=i,nv(this)):(pv(this),this.f=!1),Hu.prototype.Ea.apply(this,arguments)},mv.prototype.setMap=mv.prototype.Ea;function qv(){this.b=rv.CLOSED,Gu.call(this,"div","H_overlay")}u(qv,Gu),t("H.ui.base.OverlayPanel",qv),qv.prototype.O=function(i,o){return(i!==this.b||o)&&(this.b=i,i===rv.OPEN?this.Ga("H_open"):this.hb("H_open")),this},qv.prototype.setState=qv.prototype.O,qv.prototype.getState=function(){return this.b},qv.prototype.getState=qv.prototype.getState,qv.prototype.zk=function(i){var o=i.Hc;i=i.L();var s=this.L(),_e=s.style;if(this.hb("H_top"),this.hb("H_middle"),this.hb("H_bottom"),this.hb("H_left"),this.hb("H_center"),this.hb("H_right"),_e.bottom=_e.top=_e.left=_e.right=_e.margin="",/top/g.test(o)){this.Ga("H_top"),_e.top="0",_e.margin="0 12px";var _n=-1}else/bottom/g.test(o)?(this.Ga("H_bottom"),_e.bottom="0",_e.margin="0 12px",_n=1):(this.Ga("H_middle"),_e.top="50%",_e.margin="0 12px",_e.marginTop=-Math.round(.5*s.offsetHeight)+"px",_n=0);/left/g.test(o)?(this.Ga("H_left"),_e.left=i.offsetWidth+"px",_e.marginLeft="12px"):/right/g.test(o)?(this.Ga("H_right"),_e.right=i.offsetWidth+"px",_e.marginRight="12px"):(this.Ga("H_center"),_e.left="50%",0>_n?(_e.top=i.offsetHeight+"px",_e.marginTop="12px"):0<_n&&(_e.bottom=i.offsetHeight+"px",_e.marginBottom="12px"),_e.marginLeft=-Math.round(.5*s.offsetWidth)+"px",i.appendChild(s))},qv.prototype.pointToControl=qv.prototype.zk;var rv={OPEN:"open",CLOSED:"closed"};qv.State=rv;function sv(i){i=i||{},Gu.call(this,"div","H_rdo"),this.g=new Y("div","H_rdo_title"),this.b=new Gu("div","H_rdo_buttons"),this.Fa(this.g),this.Fa(this.b),this.i=A(function(o){o.target.getState()===vu.DOWN?(this.Mk(o.target,!0),this.dispatchEvent(tv)):o.target.O(vu.DOWN,!0)},this),this.addEventListener("statechange",this.i),this.vi(i.title||""),i.onActiveButtonChange&&this.addEventListener(tv,i.onActiveButtonChange),i.buttonsOptions&&i.buttonsOptions.forEach(function(o){this.Ag(new Xu(o))},this)}u(sv,Gu),t("H.ui.base.RadioGroup",sv);var tv="activebuttonchange";sv.prototype.U=function(i,o){Gu.prototype.renderInternal.call(this,i,o),this.vi(this.f,!0)},sv.prototype.renderInternal=sv.prototype.U,sv.prototype.ma=function(){this.b.ma()},sv.prototype.vi=function(i,o){return(i!==this.f||o)&&(this.f=i,this.g.L()&&(this.g.L().innerHTML=this.f)),this},sv.prototype.setTitle=sv.prototype.vi,sv.prototype.Um=function(){return this.f},sv.prototype.getTitle=sv.prototype.Um,sv.prototype.Ag=function(i){if(!(i instanceof Xu))throw Error("PushButton expected");return i.ia(this),this.b.Fa(i),this},sv.prototype.addButton=sv.prototype.Ag,sv.prototype.Xn=function(i){return this.b.removeChild(i),i.ia(null),this},sv.prototype.removeButton=sv.prototype.Xn,sv.prototype.yf=function(){return this.b.Xg()},sv.prototype.getButtons=sv.prototype.yf,sv.prototype.Mk=function(i,o){for(var s=this.yf(),_e=s.length;_e--;)s[_e].O(s[_e]===i?vu.DOWN:vu.UP,o)},sv.prototype.setActiveButton=sv.prototype.Mk,sv.prototype.o=function(){this.removeEventListener("statechange",this.i),this.ma(),Gu.prototype.o.call(this)};function uv(i){i=i||{},Hu.call(this),this.g=new qv,this.b=this.b.bind(this),this.m=this.m.bind(this),this.s=this.s.bind(this),this.Pb(i.alignment||"bottom-right"),vv(this,i.baseLayers,i.layers)}u(uv,Hu),t("H.ui.MapSettingsControl",uv);function vv(i,o,s){var _e=i.Wb();i.f&&i.f.forEach(function(_n){var _o=_n.layer;_n=_o&&Zt(s,function(_a){return _a.layer===_o}),_o&&!_n&&_e.Te(_o)}),i.j=zc(o)?o:[],i.f=zc(s)?s:[],i.i&&(i.i.ma(),i.u.ma(),wv(i))}uv.prototype.Y=function(){var i=this.Wb();i&&(i.addEventListener("tap",this.m),i=i.a,i.addEventListener("add",this.b),i.addEventListener("remove",this.b),i.addEventListener("set",this.b))},uv.prototype.K=function(){var i=this.Wb();i&&(i.removeEventListener("tap",this.m),i=i.a,i.removeEventListener("add",this.b),i.removeEventListener("remove",this.b),i.removeEventListener("set",this.b))},uv.prototype.U=function(i,o){var s=this.va().translate("layers.choose");Hu.prototype.renderInternal.call(this,i,o),this.Y(),this.B=new Xu({tooltip:s,label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M6.7,14.6 L4.5,16 L12,20.6 L19.5,16 L17.3,14.6 L19.1,13.5 L23,16 L12,23 L1,16 L4.9,13.5 L6.7,14.6 Z M12,2 L23,9 L12,16 L1,9 L12,2 Z"></path></svg>',onStateChange:A(function(_e){_e.target.getState()===vu.DOWN?(this.g.O(rv.OPEN),this.g.zk(this)):this.g.O(rv.CLOSED)},this)}),this.i=new sv({title:s,onActiveButtonChange:(function(){t:{for(var _e=this.i.yf(),_n=_e.length;_n--;)if(_e[_n].getState()===vu.DOWN){_e=_e[_n];break t}_e=null}_e=_e.getData(),this.map.rd(this.j[_e].layer),this.s()}).bind(this)}),this.u=new Gu("div","H_grp"),this.N=new Y("div","H_separator"),this.Fa(this.B),this.Fa(this.g),this.g.Fa(this.i),this.g.Fa(this.N),this.g.Fa(this.u),wv(this)},uv.prototype.renderInternal=uv.prototype.U;function wv(i){var o=i.va();i.j.forEach(function(s,_e){this.i.Ag(new Xu({label:xv(o,s.label),data:_e,disabled:!s.layer}))},i),i.f.forEach(function(s,_e){this.u.Fa(new Xu({label:xv(o,s.label),onStateChange:this.V.bind(this,s.layer),data:_e,disabled:!s.layer}))},i),i.N.mb(!(!i.f.length||!i.j.length)),x.setTimeout((function(){this.map&&(this.b(),this.B.ta(!(this.j&&this.j.length||this.f&&this.f.length)))}).bind(i))}uv.prototype.b=function(){var i=this.map.g,o=this.map.a;this.j.forEach(function(s,_e){this.i.yf()[_e].O(vu[s.layer===i?"DOWN":"UP"],!0)},this),this.f.forEach(function(s,_e){_e=this.u.Xg()[_e],s.layer?_e.O(vu[o.indexOf(s.layer)!==-1?"DOWN":"UP"],!0):_e.ta(!0)},this)},uv.prototype.V=function(i,o){o.target.getState()===vu.DOWN?this.map.Cg(i):this.map.Te(i),this.s()},uv.prototype.s=function(){var i;if(i=yv(this)){var o=i.ug;o.ka().$().Ke(i.ka().$().lc()),this.map.Te(i),i.D(),delete i.ug}zv(this)&&Av(this,this.map.g)};function Av(i,o){var s,_e,_n={},_o=o.ka(),_a=window.H.service&&window.H.service.omv.Provider;if(_a&&o.ka()instanceof _a&&_o.$().se){var _u=_o.$(),_h=(function(){var ty=Bv.ground.filter(function(hy){return!!_u.fh("layers."+hy)}),oy=Bv.water.filter(function(hy){return!!_u.fh("layers."+hy)});ty.concat(oy).length&&(Xh(_n,_u.se(ty)),Xh(_n,_u.se(oy,!1,!0)),delete _n.global,s=new qi(_n,_u.Db()),_e=_o.j.cd(s),_e.ug=o,this.map.Cg(_e)),_u.removeEventListener(Wh.CHANGE,_h)}).bind(i);_u.getState()!==Uh.READY?_u.addEventListener(Wh.CHANGE,_h):_h()}}function yv(i){return Zt(i.map.a.Ha(),function(o){return!!o.ug})}function zv(i){i=i.map.a.Ha();var o=window.H.service&&window.H.service.traffic.flow.Provider;return!!o&&i.some(function(s){return s.ka()instanceof o})}var Bv={water:["water.water-labels"],ground:"road_labels continent_label island_label roads.shields roads.directions truck-restriction.signs places landuse.label".split(" ")};function xv(i,o){return/^layers?/.test(o)&&i.lh(o)?i.translate(o):o}uv.prototype.m=function(){this.B.O(vu.UP)},uv.prototype.o=function(){uv.l.o.call(this),this.K()};var Cv=[];t("H.ui.i18n.defaultLocales",Cv);var Dv={},Ev=[];function Fv(i,o){Dv[i]=o,Cv.indexOf(i)===-1&&Cv.push(i),Ev.length?Gv(i,o):Ev=Object.keys(o)}function Gv(i,o){for(var s=Ev,_e=s.length,_n;_e--;)if(_n=s[_e],!o[_n])throw Error("'"+_n+"' key missing in translation map for "+i)}function Hv(i){i=i||{},Hu.call(this),this.f=new Xu({label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><g transform="translate(1 3)"><path fill-rule="nonzero" d="M5,0 L5,2 L2,2 L2,16 L5,16 L5,18 L2,18 C0.9,18 0,17 0,15.75 L0,2.25 C0,1 0.9,0 2,0 L5,0 Z M17,0 L20,0 C21.1,0 22,1 22,2.25 L22,15.75 C22,17 21.1,18 20,18 L17,18 L17,16 L20,16 L20,2 L17,2 L17,0 Z"></path><rect width="10" height="2" x="6" y="8"></rect><rect width="2" height="10" x="10" y="4"></rect></g></svg>',onStateChange:A(this.En,this)}),this.Fa(this.f),this.Pb(i.alignment||"right-bottom")}u(Hv,Hu),t("H.ui.ZoomRectangle",Hv),p=Hv.prototype,p.En=function(i){var o=this.map,s=o.b.element;i.target.getState()===vu.DOWN?(o.addEventListener("dragstart",this.hk,!0,this),o.addEventListener("drag",this.ik,!0,this),o.addEventListener("dragend",this.gk,!0,this),i=s.ownerDocument.createElement("div"),i.className="H_zoom_lasso",s.appendChild(i),this.b=i):(o.removeEventListener("dragstart",this.hk,!0,this),o.removeEventListener("drag",this.ik,!0,this),o.removeEventListener("dragend",this.gk,!0,this),s.removeChild(this.b))},p.hk=function(i){var o=this.b.style,s=i.currentPointer,_e=s.viewportX;s=s.viewportY,i.target===this.map&&(i.stopPropagation(),o.width="0px",o.height="0px",o.top=s+"px",o.left=_e+"px",o.display="block",this.i=s,this.g=_e)},p.ik=function(i){var o=i.currentPointer,s=o.viewportX,_e=o.viewportY;o=this.g;var _n=this.i,_o=this.b.style;i.target===this.map&&(i.stopPropagation(),i=s-o,s=_e-_n,_o.left=o+(0>i?i:0)+"px",_o.top=_n+(0>s?s:0)+"px",_o.width=Math.abs(i)+"px",_o.height=Math.abs(s)+"px")},p.gk=function(i){var o=this.map,s=i.currentPointer;i.target===this.map&&(i.stopPropagation(),this.b.style.display="none",o.c.Qb({bounds:tg([o.Ra(this.g,this.i),o.Ra(s.viewportX,s.viewportY)])},!0))},p.U=function(i,o){Hu.prototype.renderInternal.call(this,i,o),this.f.ec(this.va().translate("zoom.rectangle"))},Hv.prototype.renderInternal=Hv.prototype.U,Fv("nl-NL",{"layers.normal":"Kaartweergave","layers.satellite":"Satelliet","layers.terrain":"Terrein","layer.transit":"Openbaar vervoer","layer.traffic":"Verkeerssituatie","layer.incidents":"Toon verkeersincidenten","layers.choose":"Weergave kiezen",minimap:"Minimap","scale.switchToImperial":"Overgaan naar mijlen","scale.switchToMetric":"Wijzigen naar km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Uitzoomen","zoom.in":"Inzoomen","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Openbaar vervoer","traffic.MISCELLANEOUS":"Diversen","traffic.ACCIDENT":"Ongeval","traffic.OTHER_NEWS":"Meer informatie","traffic.PLANNED_EVENT":"Geplande afzetting","traffic.ROAD_HAZARD":"Gevaar op de weg","traffic.ROAD_CLOSURE":"Rijbaan afgesloten","traffic.WEATHER":"Weer","traffic.CONGESTION":"Verkeersopstopping","traffic.CONSTRUCTION":"Wegwerkzaamheden","traffic.DISABLED_VEHICLE":"Voertuig met pech","traffic.from":"Begintijd:","traffic.until":"Geschatte eindtijd:","distance.measurement":"Measure distance"}),Fv("pt-PT",{"layers.normal":"Vista do mapa","layers.satellite":"Satélite","layers.terrain":"Terreno","layer.transit":"Transportes públicos","layer.traffic":"Condições de trânsito","layer.incidents":"Mostrar incidentes de trânsito","layers.choose":"Escolher vista",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Diminuir","zoom.in":"Aumentar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transportes públicos","traffic.MISCELLANEOUS":"Diversos","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras notícias","traffic.PLANNED_EVENT":"Evento planeado","traffic.ROAD_HAZARD":"Perigo na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Meteorologia","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Construção","traffic.DISABLED_VEHICLE":"Veículo avariado","traffic.from":"Hora de início:","traffic.until":"Hora de fim prevista:","distance.measurement":"Measure distance"}),Fv("ru-RU",{"layers.normal":"Режим карты","layers.satellite":"Спутниковая","layers.terrain":"Местность","layer.transit":"Общественный транспорт","layer.traffic":"Дорожные условия","layer.incidents":"Показать дорожные события","layers.choose":"Выберите вид",minimap:"Minimap","scale.switchToImperial":"Использовать мили","scale.switchToMetric":"Использовать километры","scale.km":"км","scale.m":"м","scale.mi":"миль","scale.ft":"фут","zoom.out":"Отдалить","zoom.in":"Приблизить","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Общественный транспорт","traffic.MISCELLANEOUS":"Прочее ДТП","traffic.ACCIDENT":"ДТП","traffic.OTHER_NEWS":"Другие новости","traffic.PLANNED_EVENT":"Плановое мероприятие","traffic.ROAD_HAZARD":"Дорожная опасность","traffic.ROAD_CLOSURE":"Дорога закрыта","traffic.WEATHER":"Погода","traffic.CONGESTION":"Пробка","traffic.CONSTRUCTION":"Ремонт","traffic.DISABLED_VEHICLE":"Неисправный автомобиль","traffic.from":"Время начала:","traffic.until":"Ожидаемое время окончания:","distance.measurement":"Измерить расстояние"}),Fv("fi-FI",{"layers.normal":"Karttanäkymä","layers.satellite":"Satelliitti","layers.terrain":"Maasto","layer.transit":"Julkinen liikenne","layer.traffic":"Liikenneolosuhteet","layer.incidents":"Näytä liikennetapahtumat","layers.choose":"Valitse näkymä",minimap:"Minimap","scale.switchToImperial":"Vaihda maileihin","scale.switchToMetric":"Vaihda kilometreihin","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Loitonna","zoom.in":"Lähennä","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Julkinen liikenne","traffic.MISCELLANEOUS":"Erittelemätön syy","traffic.ACCIDENT":"Onnettomuus","traffic.OTHER_NEWS":"Muu tapahtuma","traffic.PLANNED_EVENT":"Suunniteltu tapahtuma","traffic.ROAD_HAZARD":"Vaara tiellä","traffic.ROAD_CLOSURE":"Tie suljettu","traffic.WEATHER":"Sää","traffic.CONGESTION":"Ruuhka","traffic.CONSTRUCTION":"Rakennustyö","traffic.DISABLED_VEHICLE":"Pysähtynyt ajoneuvo","traffic.from":"Alkamisaika:","traffic.until":"Arvioitu päättymisaika:","distance.measurement":"Measure distance"}),Fv("pt-BR",{"layers.normal":"Exibição do mapa","layers.satellite":"Satélite","layers.terrain":"Terreno","layer.transit":"Transporte público","layer.traffic":"Condições do trânsito","layer.incidents":"Mostrar incidentes no trânsito","layers.choose":"Escolher exibição",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"milhas","scale.ft":"pés","zoom.out":"Menos zoom","zoom.in":"Mais zoom","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte público","traffic.MISCELLANEOUS":"Miscelânea","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras notícias","traffic.PLANNED_EVENT":"Evento planejado","traffic.ROAD_HAZARD":"Risco na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Clima","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Construção","traffic.DISABLED_VEHICLE":"Veículo incapacitado","traffic.from":"Hora de início:","traffic.until":"Tempo final estimado:","distance.measurement":"Measure distance"}),Fv("zh-CN",{"layers.normal":"地图视图","layers.satellite":"卫星","layers.terrain":"地形","layer.transit":"公共交通","layer.traffic":"交通情况","layer.incidents":"显示交通事件","layers.choose":"选择视图",minimap:"Minimap","scale.switchToImperial":"切换为「英里」","scale.switchToMetric":"切换为「公里」","scale.km":"公里","scale.m":"米","scale.mi":"英里","scale.ft":"英尺","zoom.out":"缩小","zoom.in":"放大","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"公共交通","traffic.MISCELLANEOUS":"综合事件","traffic.ACCIDENT":"交通意外","traffic.OTHER_NEWS":"其他新闻","traffic.PLANNED_EVENT":"预定事件","traffic.ROAD_HAZARD":"道路危险","traffic.ROAD_CLOSURE":"道路已关闭","traffic.WEATHER":"天气","traffic.CONGESTION":"堵塞","traffic.CONSTRUCTION":"施工","traffic.DISABLED_VEHICLE":"车辆抛锚","traffic.from":"开始时间：","traffic.until":"预计结束时间：","distance.measurement":"Measure distance"}),Fv("es-ES",{"layers.normal":"Mapa","layers.satellite":"Satélite","layers.terrain":"Terreno","layer.transit":"Transporte público","layer.traffic":"Estado del tráfico","layer.incidents":"Mostrar incidentes de tráfico","layers.choose":"Elija una vista",minimap:"Minimap","scale.switchToImperial":"Cambiar a millas","scale.switchToMetric":"Cambiar a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Alejar","zoom.in":"Acercar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte público","traffic.MISCELLANEOUS":"Varios","traffic.ACCIDENT":"Accidente","traffic.OTHER_NEWS":"Más noticias","traffic.PLANNED_EVENT":"Acto programado","traffic.ROAD_HAZARD":"Riesgo en carretera","traffic.ROAD_CLOSURE":"Carretera cerrada","traffic.WEATHER":"Tiempo","traffic.CONGESTION":"Atasco","traffic.CONSTRUCTION":"Construcción","traffic.DISABLED_VEHICLE":"Vehículo averiado","traffic.from":"Inicio:","traffic.until":"Finalización estimada:","distance.measurement":"Measure distance"}),Fv("fr-FR",{"layers.normal":"Carte","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Transports publics","layer.traffic":"Conditions de circulation","layer.incidents":"Afficher les incidents de circulation","layers.choose":"Choisir la vue",minimap:"Minimap","scale.switchToImperial":"Passer en miles","scale.switchToMetric":"Passer en km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom arrière","zoom.in":"Zoom avant","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transports publics","traffic.MISCELLANEOUS":"Divers","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Autre","traffic.PLANNED_EVENT":"Événement prévu","traffic.ROAD_HAZARD":"Danger routier","traffic.ROAD_CLOSURE":"Chaussée fermée","traffic.WEATHER":"Météo","traffic.CONGESTION":"Embouteillage","traffic.CONSTRUCTION":"Travaux","traffic.DISABLED_VEHICLE":"Véhicule en panne","traffic.from":"Date ou heure de début:","traffic.until":"Date et heure de fin estimées:","distance.measurement":"Measure distance"}),Fv("pl-PL",{"layers.normal":"Widok mapy","layers.satellite":"Satelita","layers.terrain":"Teren","layer.transit":"Transport publiczny","layer.traffic":"Warunki drogowe","layer.incidents":"Pokaż zdarzenia drogowe","layers.choose":"Wybierz widok",minimap:"Minimap","scale.switchToImperial":"Zmień na mile","scale.switchToMetric":"Zmień na km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Oddal","zoom.in":"Przybliż","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transport publiczny","traffic.MISCELLANEOUS":"Inne zdarzenie","traffic.ACCIDENT":"Wypadek","traffic.OTHER_NEWS":"Inne wiadomości","traffic.PLANNED_EVENT":"Zdarzenie planowane","traffic.ROAD_HAZARD":"Niebezpieczeństwo na drodze","traffic.ROAD_CLOSURE":"Jezdnia zamknięta","traffic.WEATHER":"Pogoda","traffic.CONGESTION":"Korek","traffic.CONSTRUCTION":"Budowa","traffic.DISABLED_VEHICLE":"Uszkodzony pojazd","traffic.from":"Data rozpoczęcia:","traffic.until":"Przybliżona data zakończenia:","distance.measurement":"Measure distance"}),Fv("de-DE",{"layers.normal":"Kartenansicht","layers.satellite":"Satellit","layers.terrain":"Gelände","layer.transit":"Öffentliche Verkehrsmittel","layer.traffic":"Verkehrslage","layer.incidents":"Verkehrsstörungen anzeigen","layers.choose":"Ansicht auswählen",minimap:"Minimap","scale.switchToImperial":"Umrechnung in Meilen","scale.switchToMetric":"Umrechnung in Kilometer","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Verkleinern","zoom.in":"Vergrößern","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Öffentliche Verkehrsmittel","traffic.MISCELLANEOUS":"Diverse","traffic.ACCIDENT":"Unfall","traffic.OTHER_NEWS":"Anderes Ereignis","traffic.PLANNED_EVENT":"Geplantes Ereignis","traffic.ROAD_HAZARD":"Verkehrshindernis","traffic.ROAD_CLOSURE":"Fahrbahn gesperrt","traffic.WEATHER":"Wetter","traffic.CONGESTION":"Verkehrsstau","traffic.CONSTRUCTION":"Baustelle","traffic.DISABLED_VEHICLE":"Liegengebliebenes Fahrzeug","traffic.from":"Beginn:","traffic.until":"Voraussichtliches Ende:","distance.measurement":"Measure distance"}),Fv("tr-TR",{"layers.normal":"Harita görünümü","layers.satellite":"Uydu","layers.terrain":"Arazi","layer.transit":"Toplu ulaşım","layer.traffic":"Trafik durumları","layer.incidents":"Trafik olaylarını göster","layers.choose":"Görünüm seç",minimap:"Minimap","scale.switchToImperial":"Mile dönüştür","scale.switchToMetric":"Kilometreye dönüştür","scale.km":"km","scale.m":"m","scale.mi":"mil","scale.ft":"ft","zoom.out":"Uzaklaştır","zoom.in":"Yakınlaştır","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Toplu ulaşım","traffic.MISCELLANEOUS":"Çeşitli","traffic.ACCIDENT":"Kaza","traffic.OTHER_NEWS":"Diğer haberler","traffic.PLANNED_EVENT":"Planlı etkinlik","traffic.ROAD_HAZARD":"Yol tehlikesi","traffic.ROAD_CLOSURE":"Yol kapalı","traffic.WEATHER":"Hava durumu","traffic.CONGESTION":"Yoğunluk","traffic.CONSTRUCTION":"Yol çalışması","traffic.DISABLED_VEHICLE":"Araç arızası","traffic.from":"Başlangıç zamanı:","traffic.until":"Tahmini bitiş zamanı:","distance.measurement":"Measure distance"}),Fv("it-IT",{"layers.normal":"Vista mappa","layers.satellite":"Satellite","layers.terrain":"Terreno","layer.transit":"Mezzi pubblici","layer.traffic":"Condizioni del traffico","layer.incidents":"Mostra incidenti stradali","layers.choose":"Scegli vista",minimap:"Minimap","scale.switchToImperial":"Passa a miglia","scale.switchToMetric":"Passa a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom indietro","zoom.in":"Zoom avanti","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Mezzi pubblici","traffic.MISCELLANEOUS":"Varie","traffic.ACCIDENT":"Incidente","traffic.OTHER_NEWS":"Altre notizie","traffic.PLANNED_EVENT":"Evento pianificato","traffic.ROAD_HAZARD":"Strada dissestata","traffic.ROAD_CLOSURE":"Strada chiusa","traffic.WEATHER":"Maltempo","traffic.CONGESTION":"Ingorgo","traffic.CONSTRUCTION":"Lavori in corso","traffic.DISABLED_VEHICLE":"Veicolo in panne","traffic.from":"Ora di inizio:","traffic.until":"Ora di fine stimata:","distance.measurement":"Measure distance"}),Fv("en-US",{"layers.normal":"Map view","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Public transport","layer.traffic":"Traffic conditions","layer.incidents":"Show traffic incidents","layers.choose":"Choose view",minimap:"Minimap","scale.switchToImperial":"Change to miles","scale.switchToMetric":"Change to km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom out","zoom.in":"Zoom in","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Public transport","traffic.MISCELLANEOUS":"Miscellaneous","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Other news","traffic.PLANNED_EVENT":"Planned event","traffic.ROAD_HAZARD":"Road hazard","traffic.ROAD_CLOSURE":"Roadway closed","traffic.WEATHER":"Weather","traffic.CONGESTION":"Congestion","traffic.CONSTRUCTION":"Construction","traffic.DISABLED_VEHICLE":"Disabled vehicle","traffic.from":"Start time:","traffic.until":"Estimated end time:","distance.measurement":"Measure distance"});function Iv(i,o){if(!Ac(i))throw new TypeError("string locale code required");if(Ea(o))Gv(i,o);else{if(Cv.indexOf(i)===-1)throw Error("Default locale '"+i+"' does nto exist.");o=Dv[i]}this.a=o||{},this.b=i}t("H.ui.i18n.Localization",Iv),Iv.prototype.um=function(){return this.b},Iv.prototype.getLocale=Iv.prototype.um,Iv.prototype.om=function(){return Object.keys(this.a)},Iv.prototype.getKeys=Iv.prototype.om,Iv.prototype.lh=function(i){return!(!this.a||!this.a[i])},Iv.prototype.hasKey=Iv.prototype.lh,Iv.prototype.translate=function(i){var o=this.a[i];if(!Ac(o))throw Error("Translation missing for key '"+i+"'.");return o},Iv.prototype.translate=Iv.prototype.translate;function Jv(i){i=i||{},Hu.call(this),this.Ga("H_scalebar"),this.Pb(i.alignment||"right-bottom"),this.s=150,this.update=A(this.update,this),this.i=this.g=this.b=this.f=null}u(Jv,Hu),t("H.ui.ScaleBar",Jv),Jv.prototype.U=function(i,o){Hu.prototype.renderInternal.call(this,i,o),i.innerHTML='<svg height="12" version="1.1" xmlns="http://www.w3.org/2000/svg"><polyline style="fill:none; stroke:white; stroke-width:4" points="2,2 2,10 98,10 98,2"/><polyline style="fill:none; stroke:black; stroke-width:2" points="2,2 2,10 98,10 98,2"/></svg><div style="padding: 0 0 0 10px"></div>',i.style.direction="ltr",this.f=i.firstChild,o=this.f.childNodes,this.b=o[0],this.g=o[1],this.i=i.lastChild,this.j=Vu.METRIC,this.m=A(function(s){this.Zb()||(this.dispatchEvent("toggleunitsystem"),s.preventDefault())},this),this.u=A(function(s){s.preventDefault()},this),ru(i,"start",this.u),ru(i,"end",this.m),this.ec(this.va().translate("scale.switchToImperial")),this.update()},Jv.prototype.renderInternal=Jv.prototype.U,Jv.prototype.Ea=function(i){this.map&&this.map.removeEventListener("mapviewchange",this.update),i&&i.addEventListener("mapviewchange",this.update),Hu.prototype.Ea.apply(this,arguments)},Jv.prototype.setMap=Jv.prototype.Ea,Jv.prototype.capture=function(i,o,s){var _e=this.L(),_n=_e.ownerDocument,_o=_n.createElement("canvas"),_a=_o.getContext("2d"),_u=_n.createElementNS("http://www.w3.org/2000/svg","svg"),_h=_n.createElementNS("http://www.w3.org/2000/svg","foreignObject"),ty=lf(_e,_n,!1);_n=parseFloat(_e.offsetWidth)+1;var oy=parseFloat(_e.offsetHeight),hy=_n*i;i*=oy,_o.width=hy,_o.height=i,_u.setAttribute("xmlns","http://www.w3.org/2000/svg"),_u.setAttribute("width",hy),_u.setAttribute("height",i),_u.setAttribute("viewBox","0 0 "+_n+" "+oy),_h.setAttribute("width","100%"),_h.setAttribute("height","100%"),_u.appendChild(_h),ty.setAttribute("width","100%"),ty.setAttribute("height","100%"),ty.setAttribute("xmlns","http://www.w3.org/1999/xhtml");var fy=window.getComputedStyle(_e);"box-shadow display align-items font font-family font-size height text-shadow direction".split(" ").forEach(function(vy){ty.style.setProperty(vy,fy.getPropertyValue(vy))}),_h.appendChild(ty),_e=bf(_u.outerHTML),new tf("image",_e).then(function(vy){_a.drawImage(vy,0,0),o(_o)},s)},Jv.prototype.capture=Jv.prototype.capture,Jv.prototype.Me=function(i){this.j=i,this.ec(i==="imperial"?this.va().translate("scale.switchToMetric"):this.va().translate("scale.switchToImperial")),this.update()},Jv.prototype.onUnitSystemChange=Jv.prototype.Me,Jv.prototype.update=function(){var i;if(this.L()){this.f=this.f,this.b=this.b;var o=this.s,s=0,_e=this.map;if(_e){var _n=Math.round(.5*_e.b.width),_o=Math.round(.5*_e.b.height);(i=_e.Ra(_n,_o))&&(_e=_e.Ra(_n+1,_o))&&(s=100*i.Ta(_e))}s&&(this.j===Vu.IMPERIAL?1609.344>s?(_e=s/.3048006,i=this.va().translate("scale.ft")):(_e=s/1609.344,i=this.va().translate("scale.mi")):1e3>s?(_e=s,i=this.va().translate("scale.m")):(_e=s/1e3,i=this.va().translate("scale.km")),s=Math.pow(10,Math.floor(Math.log(_e)/Math.LN10)),_e=s/_e*100,_e<o/5?(s*=5,_e*=5):_e<o/2?(s*=2,_e*=2):_e>o&&(s/=2,_e/=2),_e=Math.round(_e),this.f.setAttribute("width",_e),this.i.textContent=s+" "+i,this.b.points.getItem(2).x=this.g.points.getItem(2).x=this.b.points.getItem(3).x=this.g.points.getItem(3).x=_e-2)}};function Kv(i){C(i,Qe,Kv,1),Y.call(this,"div","H_context_menu_item"),this.b=i,this.f=A(this.f,this),this.a=A(this.a,this),this.b.addEventListener("update",this.a)}u(Kv,Y),t("H.ui.context.Item",Kv),Kv.prototype.f=function(i){var o=this.b,s=o.callback;s&&!o.isDisabled()&&(this.dispatchEvent("click"),s(i))},Kv.prototype.U=function(){var i=this,o=this.L();De(o,"click",this.f),o.addEventListener("keyup",function(s){s.keyCode==13&&i.f(s)}),this.a()},Kv.prototype.renderInternal=Kv.prototype.U,Kv.prototype.a=function(){var i=this.L(),o=this.b;o.callback?(this.Ga("clickable"),i.setAttribute("tabindex","0")):(this.hb("clickable"),i.removeAttribute("tabindex")),o.isDisabled()?this.Ga("disabled"):this.hb("disabled"),o=o.getLabel(),iu.textContent=o,i.innerHTML=iu.innerHTML.split(`
`).join("<br/>")},Kv.prototype.o=function(){Y.prototype.o.call(this),this.b.removeEventListener("update",this.a)};function Lv(i){C(i,Array,Lv,1),Gu.call(this,"div","H_context_menu"),this.f=i,this.b=null}u(Lv,Gu),t("H.ui.context.Menu",Lv),Lv.prototype.U=function(){Gu.prototype.U.apply(this,arguments),this.f.forEach(function(i){i===Re?i=new Y("div","H_context_menu_item_separator"):(i=new Kv(i),i.addEventListener("click",this.g.bind(this))),this.Fa(i)},this),De(this.L(),["mousedown","touchstart","pointerdown","wheel"],function(i){i.stopPropagation()})},Lv.prototype.renderInternal=Lv.prototype.U,Lv.prototype.setPosition=function(i,o){if(this.b){var s=this.L(),_e=s.offsetWidth,_n=s.offsetHeight,_o=this.b,_a=_o.b.width;_o=_o.b.height,i+_e>_a&&i>_a/2&&(i-=_e),o+_n>_o&&o>_o/2&&(o-=_n),bu(s,i,o)}},Lv.prototype.setPosition=Lv.prototype.setPosition,Lv.prototype.g=function(){this.b&&this.b.dispatchEvent(new sd("contextmenuclose",this.b))},Lv.prototype.Ea=function(i){this.b=i},Lv.prototype.setMap=Lv.prototype.Ea;function Mv(i,o){o=o||{};var s=this;Y.call(this,"div","H_ib H_ib_top"),this.B=A(function(_e){s.Zb()||(s.close(),_e.preventDefault())},this),this.update=A(this.update,this),this.i=A(this.i,this),this.setPosition(i),this.Xe(o.content),o.onStateChange&&this.addEventListener("statechange",o.onStateChange),this.O(Nv.OPEN)}u(Mv,Y),t("H.ui.InfoBubble",Mv),Mv.prototype.a=null,Mv.prototype.wa=function(){return this.u},Mv.prototype.setPosition=function(i){this.u=ng(i),this.update()},Mv.prototype.setPosition=Mv.prototype.setPosition,Mv.prototype.Ea=function(i){this.a=i},Mv.prototype.U=function(i,o){this.m=ou(o,"div","H_ib_body"),this.tailEl_=ou(o,"div","H_ib_tail"),this.f=ou(o,"div","H_ib_close H_btn",'<svg version="1.1" class="H_icon" viewBox="0 0 12 12"><path d="m8.12 6 3.66-3.66c.29-.29.29-.76 0-1.05l-1.06-1.06c-.29-.29-.76-.29-1.05 0l-3.66 3.66-3.66-3.66c-.29-.29-.76-.29-1.05 0l-1.06 1.06c-.29.29-.3.76 0 1.05l3.66 3.66-3.66 3.66c-.29.29-.29.76 0 1.05l1.06 1.06c.29.29.76.29 1.05 0l3.66-3.66 3.66 3.66c.29.29.76.29 1.05 0l1.06-1.06c.29-.29.3-.76 0-1.05z"></path></svg>'),this.b=ou(o,"div","H_ib_content","&nbsp;"),this.m.appendChild(this.f),this.m.appendChild(this.b),ru(this.f,"start",this.B),this.a.c.addEventListener("sync",this.update),this.a.b.addEventListener("sync",this.update),i.appendChild(this.m),i.appendChild(this.tailEl_),this.Xe(this.g)},Mv.prototype.renderInternal=Mv.prototype.U,Mv.prototype.i=function(){this.s||(this.s=setTimeout(this.update,0))},Mv.prototype.update=function(){var i=this.L(),o=this.a,s,_e="none";if(this.s=0,o&&i&&this.getState()===Nv.OPEN){if(s=o.Aa(this.u)){var _n=s.x;s=s.y,o=o.b.width,(_n>=-o||_n<=2*o||s>=-o||s<=2*o)&&(_e="",cu?(i.style.left=_n-o+"px",i.style.top=s+"px"):bu(i,_n,s))}i.style.display=_e,_e===""&&(i.style.visibility="visible")}};var Nv={OPEN:"open",CLOSED:"closed"};Mv.State=Nv,Mv.prototype.j=Nv.OPEN,Mv.prototype.getState=function(){return this.j},Mv.prototype.getState=Mv.prototype.getState,Mv.prototype.O=function(i){i!==this.j&&(this.j=i,this.dispatchEvent("statechange")),(i=this.L())&&(this.j===Nv.OPEN?(i.style.display="block",i.style.visibility="hidden",this.i()):i.style.display="none")},Mv.prototype.setState=Mv.prototype.O,Mv.prototype.close=function(){this.O(Nv.CLOSED)},Mv.prototype.close=Mv.prototype.close,Mv.prototype.open=function(){this.O(Nv.OPEN)},Mv.prototype.open=Mv.prototype.open,Mv.prototype.Vl=function(){return this.b||null},Mv.prototype.getContentElement=Mv.prototype.Vl,Mv.prototype.Xe=function(i){if(i)if(typeof i=="string"||typeof i.nodeType=="number"&&typeof i.nodeName=="string")this.g=i;else throw Error("InfoBubble content must be a string or HTML node.");else this.g="";this.L()&&(this.g?(this.b.innerHTML="",typeof this.g=="string"?this.b.innerHTML=i:typeof i.nodeType=="number"&&typeof i.nodeName=="string"&&this.b.appendChild(i)):this.b.innerHTML="&nbsp;",this.i())},Mv.prototype.setContent=Mv.prototype.Xe,Mv.prototype.o=function(){this.close(),this.Xe(""),this.f&&su(this.f,"end",this.B),this.a&&(this.a.c.removeEventListener("sync",this.update),this.a.b.removeEventListener("sync",this.update)),Y.prototype.o.call(this)};function Ov(i){this.c=i,this.a=this.b=null,this.i=0,this.g=22,this.f=A(this.f,this),i=this.c.Wb(),i.addEventListener("mapviewchange",this.s,!1,this),i=i.a,i.addEventListener("add",this.j,!1,this),i.addEventListener("remove",this.m,!1,this)}function Pv(i,o){i.b&&o&&i.b===o.ka()||(i.b&&i.b.removeEventListener("tap",i.f),o?(i.b=o.ka(),i.b.addEventListener("tap",i.f),i.i=i.b.min,i.g=i.b.max):(i.b=null,i.i=0,i.g=22))}Ov.prototype.s=function(i){var o=i.newValue.zoom;this.a&&i.modifiers&i.ZOOM&&(o<this.i||o>this.g)&&this.a.close()},Ov.prototype.j=function(i){i=i.added,Qv(i)&&Pv(this,i)},Ov.prototype.m=function(i){Qv(i.removed)&&(this.a&&this.a.close(),Pv(this,null))};function Qv(i){return window.H.service&&i.ka()instanceof window.H.service.traffic.incidents.Provider}Ov.prototype.f=function(i){var o;if(i.target&&(o=i.target.getData())&&i.currentPointer.button===0){var s=i.target.da();this.a||(this.a=new Mv(s),this.a.Ga("H_tib"),this.c.Ri(this.a)),this.a.setPosition(s),s=o.TRAFFIC_ITEM_TYPE_DESC.replace(" ","_"),this.c.va().lh("traffic."+s)?s=this.c.va().translate("traffic."+s):s=o.TRAFFIC_ITEM_DESCRIPTION[o.TRAFFIC_ITEM_DESCRIPTION.length-1].value,this.a.Xe('<div class="H_tib_content"><div class="H_rdo_title" dir="auto">{{title}}</div><div class="H_tib_desc" dir="auto"><span>{{desc}}</span><div class="H_tib_time"><span class="H_tib_left">{{traffic.from}}</span><span class="H_tib_right">{{from}}</span><br/><span class="H_tib_left">{{traffic.until}}</span><span class="H_tib_right">{{until}}</span></div></div>'.replace("{{title}}",s).replace("{{desc}}",o.TRAFFIC_ITEM_DESCRIPTION[0].value).replace("{{traffic.from}}",this.c.va().translate("traffic.from")).replace("{{traffic.until}}",this.c.va().translate("traffic.until")).replace("{{from}}",o.START_TIME).replace("{{until}}",o.END_TIME)),this.a.open()}i.stopPropagation()};function Rv(i,o){var s=i.L(),_e=this;F.call(this),this.c=i,this.i=s.ownerDocument,this.f={},this.b=[],new Ov(this),this.P=ou(this.i,"div","H_ui"),this.setDirection(),this.S=A(function(_n){this.s.put(_n.target,_n.target.Hc)},this),this.addEventListener("alignmentchange",this.S),this.K=A(function(){this.il()},this),this.addEventListener("toggleunitsystem",this.K),this.P.addEventListener("contextmenu",this.v,!1),this.P.addEventListener("MSHoldVisual",this.v,!1),this.c.addEventListener("contextmenu",this.B,!1,this),this.c.addEventListener("contextmenuclose",this.u,!1,this),this.c.ob(this.D.bind(this)),this.a=null,this.m=-1,this.s=new Ku(this.P,this.i),this.g=Vu.METRIC,Sv(this,"en-US"),o&&Tv(this,o),s.appendChild(this.P),x.setTimeout(function(){_e.s.update()},1)}u(Rv,F),t("H.ui.UI",Rv),Rv.prototype.v=function(i){for(var o=i.target;o&&!/\bH_ib_content\b/.test(o.className);)o=o.parentNode;o||i.preventDefault()},Rv.prototype.L=function(){return this.P},Rv.prototype.getElement=Rv.prototype.L,Rv.prototype.Wb=function(){return this.c},Rv.prototype.getMap=Rv.prototype.Wb,Rv.prototype.Xm=function(){return this.g},Rv.prototype.getUnitSystem=Rv.prototype.Xm,Rv.prototype.og=function(i){var o=this.f,s;if(i!==this.g)for(s in this.g=i,o)o[s]instanceof Hu&&o[s].onUnitSystemChange(this.g)},Rv.prototype.setUnitSystem=Rv.prototype.og,Rv.prototype.setDirection=function(i){this.P.setAttribute("dir",i||getComputedStyle(this.Wb().L()).direction)},Rv.prototype.setDirection=Rv.prototype.setDirection;function Sv(i,o){if(Ac(o))var s=o;else if(o instanceof Iv){s=o.b;var _e=o}else throw Error("The locale parameter must be a string or a H.ui.i18n.Localization object.");if(s)if(_e)i.j=_e;else if(0<=Cv.indexOf(s))i.j=new Iv(s);else throw Error("Locale ["+s+"] is not supported.");else throw Error("No locale was defined.")}Rv.prototype.va=function(){return this.j},Rv.prototype.il=function(){this.g===Vu.METRIC?this.og(Vu.IMPERIAL):this.og(Vu.METRIC)},Rv.prototype.toggleUnitSystem=Rv.prototype.il,Rv.prototype.Ri=function(i){var o=this.b.length,s=this.P;if(0>this.b.indexOf(i)){i.ia(this),i.Ea(this.c);var _e=i.T(this.i);o=0<o?this.b[o-1].L().nextSibling:this.P.firstChild,s.insertBefore(_e,o),this.b.push(i)}},Rv.prototype.addBubble=Rv.prototype.Ri,Rv.prototype.B=function(i){var o=i.items;this.a&&this.u(),clearTimeout(this.m),this.m=x.setTimeout((function(){o.length&&(this.a=new Lv(o),this.P.insertBefore(this.a.T(this.i),this.P.firstChild),this.a.ia(this),this.a.Ea(this.c),this.a.setPosition(i.viewportX,i.viewportY))}).bind(this),0)},Rv.prototype.u=function(){this.a&&(this.a.D(),this.a=null)},Rv.prototype.Wn=function(i){var o=this.b.indexOf(i);-1<o&&(i.ia(null),i.Ea(null),this.b.splice(o,1),this.P.removeChild(i.L()))},Rv.prototype.removeBubble=Rv.prototype.Wn,Rv.prototype.Rl=function(){return this.b},Rv.prototype.getBubbles=Rv.prototype.Rl,Rv.prototype.xd=function(i,o){if(this.ye(i))throw Error("A control with name ["+i+"] is already registered.");o.ia(this),o.Ea(this.c),o.ua=this.j,o.T(this.i),o.onUnitSystemChange(this.g),this.f[i]=o},Rv.prototype.addControl=Rv.prototype.xd,Rv.prototype.Yn=function(i){var o=this.ye(i);if(o)o.K(),o.ia(null),o.Ea(null),tu(o),delete this.f[i];else throw Error("Control ["+i+"] not found in this UI's controls.");return o},Rv.prototype.removeControl=Rv.prototype.Yn,Rv.prototype.ye=function(i){return this.f[i]},Rv.prototype.getControl=Rv.prototype.ye,Rv.prototype.o=function(){for(var i in this.f)$t.hasOwnProperty.call(this.f,i)&&this.f[i].D();this.b.forEach(function(o){o.D()}),(i=this.P.parentNode)&&i.removeChild(this.P),F.prototype.o.call(this),delete this.P};function Tv(i,o){var s,_e;o.unitSystem&&i.og(o.unitSystem),(_e=o.locale)&&Sv(i,_e),(s=o.zoom)&&i.xd("zoom",new Iu(Ea(s)?s:null)),(s=o.zoomrectangle)&&i.xd("zoomrectangle",new Hv(Ea(s)?s:null)),(s=o.mapsettings)&&i.xd("mapsettings",new uv(Ea(s)?s:null)),(s=o.scalebar)&&i.xd("scalebar",new Jv(Ea(s)?s:null)),(s=o.distancemeasurement)&&i.xd("distancemeasurement",new mv(Ea(s)?s:null))}Rv.prototype.capture=function(i,o,s,_e){var _n=this.ye("scalebar"),_o=i.getContext("2d"),_a=i.width,_u=i.height,_h=this.c.m,ty=5+(_h?_h.L().childNodes[1].offsetHeight:0);_n&&_n.qc()?_n.capture(o,function(oy){_o.drawImage(oy,_a-oy.width-5*o,_u-oy.height-ty*o),s(i)},_e):s(i)},Rv.prototype.capture=Rv.prototype.capture,Rv.createDefault=function(i,o,s){var _e=i.f.type;if(s=new Rv(i,{unitSystem:Vu.METRIC,zoom:{alignment:"right-bottom"},mapsettings:Uv(_e,o,i.g),scalebar:{alignment:"bottom-right"},locale:s||"en-US"}),_e===ik.P2D){var _n=s.ye("mapsettings"),_o=function(){if(_n.Wb()){var _a=Uv(_e,o,i.g);vv(_n,_a.baseLayers,_a.layers)}};i.addEventListener(i.A.gf,_o),s.ob(function(){i.removeEventListener(i.A.gf,_o)}),_n.ob(function(){i.removeEventListener(i.A.gf,_o)})}return s};function Vv(i,o,s,_e){for(var _n=i,_o=0;_n&&_o<o.length;_o++)_n=_n[o[_o]];_n&&_n!==i&&_e.push({label:s,layer:_n})}function Uv(i,o,s){var _e=[],_n=[],_o=o.raster;if(i===ik.P2D&&_o){if(Vv(o,["raster","normal","map"],"layers.normal",_e),Vv(o,["raster","satellite","map"],"layers.satellite",_e),Vv(o,["raster","terrain","map"],"layers.terrain",_e),s){for(var _a in _o)if(_o[_a]&&_o[_a].map===s){var _u=_a;break}}Vv(o,["raster","normal","trafficincidents"],"layer.incidents",_n),Vv(o,["raster",_u,"transit"],"layer.transit",_n)}else Vv(o,["vector","normal","map"],"layers.normal",_e),Vv(o,["raster","satellite","map"],"layers.satellite",_e),Vv(o,["vector","normal","traffic"],"layer.traffic",_n),Vv(o,["vector","normal","trafficincidents"],"layer.incidents",_n);return{alignment:"bottom-right",baseLayers:_e,layers:_n}}function Wv(i,o){if(o=o||{},!(i&&i instanceof ql))throw Error("Base layer is mandatory for overview UI element");Hu.call(this),this.f=new Xu({label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="H_icon"><g fill-rule="evenodd" transform="translate(2 2)"><rect width="9" height="9" x="10" y="10"/><rect class="H_icon_stroke" width="18" height="18" x="1" y="1" fill="none" stroke="#000" stroke-width="2" rx="2"/></g></svg>',onStateChange:A(this.g,this)}),this.Fa(this.f),this.b=new Xv(i,o.zoomDelta,o.scaleX,o.scaleY),this.Pb(o.alignment||"right-bottom"),this.Fa(this.b)}u(Wv,Hu),t("H.ui.Overview",Wv),Wv.prototype.rd=function(i){return this.b.rd(i),this},Wv.prototype.setBaseLayer=Wv.prototype.rd,Wv.prototype.g=function(i){i.target.getState()===vu.DOWN?(i=this.b,Yv(i,!0),i.yi(),i.Ga("H_overview_active"),i.b.addEventListener("mapviewchange",i.yi,!1,i)):Zv(this.b)},Wv.prototype.U=function(i,o){Hu.prototype.renderInternal.call(this,i,o),this.f.L().style.float=this.Hc.match("right")?"right":"left",this.b.Ea(this.map),this.f.ec(this.va().translate("minimap"))},Wv.prototype.renderInternal=Wv.prototype.U,Wv.prototype.o=function(){this.b.D(),Y.prototype.o.call(this)};function Xv(i,o,s,_e){this.j=i,typeof o=="number"&&(this.kl=o),typeof s=="number"&&(this.vk=s),typeof _e=="number"&&(this.wk=_e),Gu.call(this,"div","H_overview")}u(Xv,Hu),Xv.prototype.rd=function(i){this.f.rd(i)},Xv.prototype.U=function(i,o){o=ou(o,"div","H_overview_map"),pu(i,o),this.g=o},Xv.prototype.renderInternal=Xv.prototype.U,Xv.prototype.renderInternal=Xv.prototype.U,p=Xv.prototype,p.kl=3,p.vk=5,p.wk=5,p.Ea=function(i){this.b=i,this.f=new V(this.g,this.j,{pixelRatio:this.b.Ua(),engineType:this.b.f.type}),this.f.m.L().style.display="none",this.m=this.f.c,this.i=this.b.c};function Zv(i){!i.wd&&Yv(i),i.hb("H_overview_active"),i.b.removeEventListener("mapviewchange",i.yi,!1,i)}p.yi=function(i){i&&i.modifiers&i.SIZE&&Yv(this,!0),i=this.i.gb(),i.zoom-=this.kl,this.m.Qb(i)};function Yv(i,o){var s=i.b.b.element,_e=i.L().style,_n=s.offsetWidth/i.vk/10;s=s.offsetHeight/i.wk/10;var _o=i.g.style;o?(_e.width=_n+"em",_e.height=s+"em",_o.width=_n+"em",_o.height=s+"em"):_e.width=_e.height="0em",i.f.b.resize()}p.o=function(){Xv.l.o.call(this),Zv(this),this.f.D(),this.f=this.m=this.i=this.b=this.j=this.g=null},t("H.ui.buildInfo",function(){return Hf("H-ui","1.38.0","8be3148",{region:"row"})});function $v(i,o){if(!i)throw new D($v,0,i);$v.l.constructor.call(this,i),this.b={},this.c=!(!o||!o.jc),this.f=aw++}u($v,wm);var aw=0;$v.prototype.T=function(i,o,s,_e,_n,_o){var _a=yd(_e),_u=this.bb,_h=_a+(s.exp-_u.pixelProjection.exp),ty=_u.min,oy=_u.max;_e=_u.tileSize;var hy=_u.ka().g,fy=this.ib,vy=fy.Oc(),xy=fy.sb().w,wy=s.w,By=s.x,Sy=s.y,Ay={};if(_a<ty||_a>oy)return uk.DONE;for(_n=_u.requestTiles(i,_h,_n,_o,this.f),i=_n.total,_n=_n.tiles,_o=_n.length,this.g=s,this.j=o,this.a=_h,vy!==hy&&fy.dc(hy),s=_e=_e*wy/(Ed(2,_h)*_e),this.c||(_e%1&&(_e=zd(_e),wy=s/_e,By/=wy,Sy/=wy,wy=Ed(2,_h)*_e),By=zd(By),Sy=zd(Sy)),this.i=s,_h=-_e,_a=xy+_e,_u=0;_u<_o;_u++){if(xy=_n[_u],(ty=xy.data)&&ty.tagName){for(s=o.x-(By-xy.x*_e),hy=o.y-(Sy-xy.y*_e),fy.Jc(ty,s,hy,_e,_e),vy=s;(vy-=wy)>_h;)fy.Jc(ty,vy,hy,_e,_e);for(vy=s;(vy+=wy)<_a;)fy.Jc(ty,vy,hy,_e,_e)}Ay[this.a+"_"+xy.x+"_"+xy.y]=xy}return this.b=Ay,_o===i?uk.DONE:uk.PENDING},$v.prototype.Ba=function(i,o,s){var _e=this.i,_n=_e/this.bb.tileSize,_o=this.g,_a=this.j,_u;if(uc(this.a)&&_o){i=_o.x+(i-_a.x),o=_o.y+(o-_a.y);var _h=zd(_o.w/_e),ty=_o=zd(i/_e);_a=zd(o/_e),Bd(ty)>=_h&&(ty%=_h),0>ty&&(ty=_h+ty),(_h=this.b[this.a+"_"+ty+"_"+_a])&&_h.Ba&&(_u=_h.Ba((i-_e*_o)/_n,(o-_e*_a)/_n,s))}return _u||hf},$v.prototype.Pd=function(){return"2d"};function bw(i,o){o=o||{},C(i,rl,bw,0),bw.l.constructor.call(this,i),this.jc=!!o.jc,this.c=o.cb||0,this.a=[],this.b={}}u(bw,wm),bw.prototype.T=function(i,o,s,_e,_n,_o){var _a,_u=this.bb,_h;_e-=this.c,this.a.length=0;var ty=this.b;if(this.b=_a={},_e>=_u.min&&_e<=_u.max){var oy=_u.pd(i,_e,_n,_o),hy=oy.overlays;if(i=hy.length)for(hy.sort(ph),_e=this.ib,_n=this.jc,_o=0;_o<i;_o++){_u=hy[_o];var fy=_u.J(),vy=s.fb(fy.Ib()),xy=s.fb(fy.Eb());fy=s.w,vy.x>=xy.x&&(vy.x-=fy),fy=-((vy.x+xy.x)/fy>>1)*fy,vy.x+=fy,vy.add(o),xy.x+=fy,xy.add(o),_n||(vy.round(),xy.round()),(fy=ty[_h=_u.$a()])?delete ty[_h]:fy={Tn:_u},_a[_h]=fy;var wy=vy.x;vy=vy.y;var By=xy.x;xy=xy.y;var Sy=By-wy,Ay=xy-vy;_e.dc(_u.Oc()),_e.Jc(_u.Lc(),wy,vy,Sy,Ay),fy.Pg?fy.Pg.set(wy,vy,By,xy):fy.Pg=new wk(wy,vy,By,xy),this.a.push(fy)}}return!oy||oy.requested&&oy.requested===oy.total||!oy.requested&&hy.length===oy.total?uk.DONE:uk.PENDING},bw.prototype.Ba=function(i,o,s){for(var _e=this.a,_n=_e.length,_o,_a,_u;_n--;)if(_o=_e[_n],_a=_o.Pg,_a.qf(i,o)){if(_o=_o.Tn,_u)_u.push(_o);else if(_u=[_o],s)break}return _u||hf},bw.prototype.Pd=function(){return"2d"},bw.prototype.o=function(){delete this.a,bw.l.o.call(this)},bw.prototype.disposeInternal=bw.prototype.o;var cw={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:0},incline:{min:0,max:0},heading:{min:180,max:180}},interaction:{ZOOM:Hl.ZOOM,COORD:Hl.COORD},capture:!0};t("H.map.render.p2d.capabilities",cw);function dw(i,o){this.a=[],dw.l.constructor.apply(this,arguments)}u(dw,Am),p=dw.prototype,p.kj=function(){return this.bb.yc.apply(this.bb,arguments)},p.T=function(i,o,s,_e,_n,_o,_a){return this.a=[],dw.l.T.apply(this,arguments)},p.bk=1,p.Gk=function(i,o,s,_e,_n,_o){var _a=this.bk=_e.Ua();_n*=_a,_o*=_a;var _u=s.sb();o=_u.w*_a,_u=_u.h*_a;var _h=s.fd();this.jc?(_n-=_h.x*_a,_o-=_h.y*_a):(_n=yd(_n-_h.x*_a),_o=yd(_o-_h.y*_a)),_e.Jc(s.Lc(),_n,_o,o,_u),i.detail?i.detail.set(_n,_o,_n+o,_o+_u):i.detail=new wk(_n,_o,_n+o,_o+_u),this.a.push(i)},p.Ba=function(i,o,s){for(var _e=this.a,_n=_e.length,_o,_a,_u,_h=hf,ty=this.bk;_n--&&(_o=_e[_n],_a=_o.detail,!(_a.qf(i,o)&&(_o=_o.kk,(!(_u=_o.rb().c)||_u.If((i-_a.left)/ty,(o-_a.top)/ty,0))&&0>_h.indexOf(_o)&&(_h===hf&&(_h=[]),_h.push(_o),s)))););return _h},p.Pd=function(){return"2d"},p.o=function(){this.a=[],dw.l.o.call(this)},dw.prototype.disposeInternal=dw.prototype.o;function Z(i,o,s,_e){Z.l.constructor.call(this,i,o,s,_e),this.K=new G(0,0),(s=_e.renderBaseBackground)&&(this.Mn=s.lower,this.Ln=s.higher),this.xn=!!_e.enableSubpixelRendering,this.Zc=ew,this.vf=0,this.Cd=this.ue=!1,this.g=new im,this.a=_e=new qm,this.ad=A(this.ad,this),_e.addEventListener(_e.A.vg,this.ad),this.Aa=A(this.Aa,this),_e=i.element,this.oa=i=_e.ownerDocument.createElement("div"),i.style.position="absolute",i.style.width=i.style.height="100%",i.style.zIndex=0,_e.insertBefore(i,_e.firstChild),this.Lj=new Nm(this.oa,this.na),this.s=[],fw(this),this.Ch=A(Z.prototype.Ch,this),this.V=gw,this.eg(),this.zoom=hw(this,this.v.kb()+this.cb),this.zb(),iw(this,o.gb().position,this.zoom),this.Wa(),this.ea()}u(Z,Dl),t("H.map.render.p2d.RenderEngine",Z),Z.prototype.type=Nl.P2D;var gw=2;Z.prototype.getState=function(){return this.V},Z.prototype.getState=Z.prototype.getState;function jw(i,o,s){return o=s-o,Bd(o)<i.b.w/2?o:o-i.b.w*s/Bd(s)}Z.prototype.Gg=function(i){var o=this,s=i.b,_e=i.newValue,_n=i.modifiers;i=_e.position;var _o=_e.bounds,_a,_u=this.zoom,_h=this.m,ty=0;if(_n&cj.POSITION&&(_a=o.b.fb(i)),_n&cj.BOUNDS)_e=kw(this,_o.J(),_n&cj.ZOOM?_e.zoom:B,_n&cj.POSITION?i:B),this.v.Qb(_e,s);else{_n&cj.POSITION||(_a=o.b.fb(_e.position));var oy=_a.x,hy=_a.y;lw(this),this.K.set(0,0),_e=mw(this,_e);var fy=_e.zoom,vy=_e.position;if(s){var xy=fy-_u,wy={x:_h.x,y:_h.y};s=this.b.Xd(wy).x;var By=this.b.projection.Kc(i);(By.x!==this.m.x||By.y!==this.m.y||fy!==this.zoom)&&(oy=jw(this,s,oy),nw(this,function(Sy){var Ay=Sy-ty;if(fy!==_u){_a=o.b.Xd(By);var Py=o.b.Xd(wy);oy=jw(o,Py.x,_a.x),hy=_a.y-Py.y}ty=Sy,ow(o,oy*Ay,hy*Ay),_u+=xy*Ay,pw(o,_u),o.Wa(),o.fa()},this.ya,function(){iw(o,vy,fy),pw(o,fy),o.Wa(vy),o.fa()},this.Ya))}else qw(this),iw(this,vy,fy),pw(this,fy),this.Wa(vy);this.fa()}},Z.prototype.ya=300,Z.prototype.ig=function(i){var o=Dc(i);if(!o||o&&0>i)throw new D(this.ig,1,"positive number required");this.ya=i},Z.prototype.setAnimationDuration=Z.prototype.ig,Z.prototype.Ug=function(){return this.ya},Z.prototype.getAnimationDuration=Z.prototype.Ug,Z.prototype.Ya=Zl,Z.prototype.jg=function(i){if(!Da(i))throw new D(this.jg,1,"function required");this.Ya=i},Z.prototype.setAnimationEase=Z.prototype.jg,Z.prototype.Vg=function(){return this.Ya},Z.prototype.getAnimationEase=Z.prototype.Vg,Z.prototype.eg=function(){this.Ya=Zl,this.ya=300},Z.prototype.resetAnimationDefaults=Z.prototype.eg,Z.prototype.Qh=function(i,o,s){var _e;this.Yj=Jk(),(_e=this.N.ha.splice(i,1)[0])&&_e.D&&_e.D(),(_e=this.u.ha.splice(i,1)[0])&&_e.D&&_e.D(),(_e=this.ra.ha.splice(i,1)[0])&&_e.D&&_e.D(),(_e=this.Y.ha.splice(i,1)[0])&&_e.D&&_e.D(),this.Rb=this.c.Ha(),i===0&&(Il(this,o,!1),this.zb()),this.s=Om(this.Lj,rw(this),sw(this)),this.$d(),s||this.fa()};function fw(i){var o=i.c.Ha(),s=0,_e=o.length;for([i.N={},i.u={},i.ra={},i.Y={}].forEach(function(_n){_n.Ic=[],_n.ha=[]}),i.Rb=i.c.Ha();s<_e;s++)i.Le(s,o[s]);i.zb()}Z.prototype.Rh=function(){this.zb(),this.fa()},Z.prototype.mh=function(i,o,s){var _e,_n,_o,_a;if(o){var _u={jc:this.xn,cb:this.cb};o.T?C(o,ym)?_n=new xm(o):C(o,Km)&&(_a=new xm(o)):(o.requestOverlays&&(_e=new bw(o,_u)),o.requestTiles&&(_n=new $v(o,_u)),o.requestMarkers&&(_o=new dw(o,_u)),o.requestDomMarkers&&(_a=new Dm(o,_u)))}s=s||0,this.N.ha.splice(i,s,_e),this.u.ha.splice(i,s,_n),this.ra.ha.splice(i,s,_o),this.Y.ha.splice(i,s,_a),this.Rb=this.c.Ha(),this.s=Om(this.Lj,rw(this),sw(this))};function sw(i){var o=[];return o=o.concat(i.u.ha),o=o.concat(i.N.ha),o=o.concat(i.ra.ha),o=o.concat(i.Y.ha),o=o.filter(uc)}function mw(i,o){var s=Jl(i,Jl(i,o.zoom)+i.cb);return i=Kl(i,o),i.zoom=s,i}function iw(i,o,s){var _e=i.b;_e.Ka(s),i.m=_e.projection.Kc(o),_e.x=_e.w*i.m.x,_e.y=_e.h*i.m.y}Z.prototype.Ra=function(i,o){var s=this.f.center,_e=this.na;return this.b.La((i-s.x)*_e,(o-s.y)*_e)},Z.prototype.screenToGeo=Z.prototype.Ra,Z.prototype.hg=function(i,o){return i=this.Ra(i,o),o=this.v.gb(),o.position=i,o},Z.prototype.Aa=function(i){var o=this.na,s=this.f.center,_e=s.x*o;s=s.y*o,i=this.b.fb(i);var _n=this.b.w;return new G(yd((i.x-yd(i.x/_n)*_n+_e)/o),yd((i.y+s)/o))},Z.prototype.geoToScreen=Z.prototype.Aa,Z.prototype.J=function(i,o){var s=this.ua[i||4];i=this.b;var _e=s.left-o,_n=i.La(_e,s.top-o),_o=s.right+o;return o=i.La(_o,s.bottom+o),_o-_e>=i.w&&(_n.lng=-(o.lng=180)),sg(_n,o)},Z.prototype.Ba=function(i,o,s,_e){var _n=[],_o=this.na,_a;for(i*=_o,o*=_o,_o=[this.N,this.u,this.ra,this.Y],_a=_o.length;_a--&&(!s||!_n.length);){for(var _u=_n,_h=_o[_a].ha,ty=i,oy=o,hy=s,fy=_h.length;fy--&&!((_n=_h[fy])&&_n.Ba&&(_u=_u.concat(_n.Ba(ty,oy,hy)),_u.length&&hy)););_n=_u}_e(_n)},Z.prototype.getObjectsAt=Z.prototype.Ba,Z.prototype.Gc=y;function rw(i){return i=i.ua[2],{w:i.right-i.left,h:i.bottom-i.top}}Z.prototype.ea=function(){var i=this.s.length,o;Z.l.ea.call(this);var s=rw(this);this.K.set(0,0);var _e=s.w;for(o=s.h;i--;){s=this.s[i];var _n=s.sb();_n.w===_e&&_n.h===o||s.Ze(_e,o)}this.Gc=new Ui(_e,o),this.fa()},Z.prototype.getCapabilities=function(){return cw},Z.prototype.getCapabilities=Z.prototype.getCapabilities;function tw(i){i.i&&i.i.qa()||Jk()-i.Yj<i.Zc&&!i.yd?i.Un=Hk(i.Ch):(i.yd&&(i.$d(),uw(i)),i.V=gw)}p=Z.prototype,p.$d=function(){this.N.Ic.length=0,this.u.Ic.length=0,this.ra.Ic.length=0,this.Y.Ic.length=0},p.Ch=function(){var i;this.B&&this.B.before();var o=this.u.ha,s=this.f.center.clone().scale(this.na).round(),_e=this.J(1,0),_n=this.J(1,vw),_o=this.zoom,_a=_o-this.cb,_u=this.b,_h=this.Mn,ty=this.Ln,oy=o[0];o=this.K;var hy=this.s.length,fy=this.Rb;for(i=fy.length;hy--;){var vy=this.s[hy];C(vy,vm)&&vy.clear()}if(oy){if(_h)for(;_h;)hy=_o-_h,oy.T(_e,s,_u,hy,!0,o),--_h;if(ty&&this.Cd)for(vy=1;vy<=ty&&(hy=_o+vy,_u.Ka(hy),_h=this.J(2,0),_u.Ka(_o),!oy.T(_h,s,_u,hy,!0,o));vy++);}for(this.Zc=ew;i--;)_u=fy[i],C(_u,oj)&&_u.ka()&&_u.ka().Qe(_n,_a);_e=this.ak(_e,s,_o,!1,o,ww,this.u,this.N),s=this.ak(_n,s,_a,!1,o,xw,this.ra,this.Y),this.yd=_e&&s,this.i&&this.i.qa()&&this.wg(),this.S||(this.S=this.v.gb()),this.S.bounds=this.J(4,0),this.v.Wa(this.S),this.S=null,this.Gc&&(this.f.Wa(this.Gc),this.Gc=y),_o<this.vf?this.Cd=!0:this.ue&&(this.Cd=!1),this.vf=_o,this.ue=_e,this.B&&this.B.after(),tw(this)},p.ak=function(i,o,s,_e,_n,_o,_a){var _u=Array.prototype.slice.call(arguments,6),_h=_u.length,ty=_u[0].ha.length,oy=_h*ty,hy=!!oy,fy;for(fy=0;fy<oy;fy++){if(_o===ww)var vy=fy%_h,xy=Math.floor(fy/_h);else vy=Math.floor(fy/ty),xy=fy%ty;var wy=_u[vy].ha[xy];vy=_u[vy].Ic,wy&&(wy=wy.T(i,o,this.b,s,_e,_n,this.Aa),wy===uk.ACTIVE&&(this.Zc=1/0),wy!==uk.DONE||vy[xy]||(uw(this,this.Rb[xy]),vy[xy]=!0),vy[xy]||(hy=!1))}return hy};function uw(i,o){i.dispatchEvent({type:i.A.Oi,target:o||i})}p.o=function(){var i=this.c.Ha()[0],o=this.f;Ik(this.Un),qw(this,!0),i&&Il(this,i,!1),sw(this).forEach(function(s){s.D()}),o.element&&o.element.removeChild(this.oa),this.oa=null,this.V=3,Z.l.o.call(this)},p.fa=function(){this.Yj=Jk(),this.V===gw&&(this.yd=!1,this.V=1,tw(this))};function yw(i,o,s){ow(i,o*i.na,s*i.na),i.K.set(0,0),i.Wa(),i.fa()}function ow(i,o,s){var _e=i.b;i=i.m,_e.x=Xd(_e.x+o,_e.w),_e.y=xd(0,wd(_e.w,_e.y+s)),i.x=_e.x/_e.w,i.y=_e.y/_e.h}p.ud=function(i,o,s){i=Jl(this,Jl(this,i)+this.cb),pw(this,i,o,s)},Z.prototype.zoomAt=Z.prototype.ud;function pw(i,o,s,_e){var _n=i.na,_o=i.f.center;s===+s&&_e===+_e?(s=(s-_o.x)*_n,_e=(_e-_o.y)*_n,i.K.set(s,_e),ow(i,s,_e),i.b.Ka(o),ow(i,-s,-_e)):(i.K.set(0,0),i.b.Ka(o)),i.zoom=o,i.Wa(),i.fa()}function kw(i,o,s,_e){var _n=i.getCapabilities().lookAt.zoom.max,_o=o.Za(),_a=_e||_o;if(o.Kf()||s&&_e)s=s===B?_n:s;else{var _u=new lj(i.b.projection);_u.Ka(_n);var _h=_u.fb(o.Ib()).round(),ty=_u.fb(o.Eb()).round();_n=_u.w,o.vb()&&(_h.x-=_n),_e?(_o=_u.fb(_a),o=2*xd(_o.x-_h.x,ty.x-_o.x),_h=2*xd(_o.y-_h.y,ty.y-_o.y)):(o=ty.x-_h.x,_h=ty.y-_h.y,_a=_o),s===B&&(_o=i.ua[4],s=_o.right-_o.left,_o=_o.bottom-_o.top,s=-8+wd(Cd(s/o*_n)/Md,Cd(_o/_h*_n)/Md)-i.cb,s=Jl(i,s))}return{zoom:zd(s),position:_a}}function lw(i){qw(i,!0),i.a.qa()&&i.pb(!0),i.g.qa()&&i.qb(!0),qw(i,!0)}Z.prototype.gc=function(i,o){lw(this),zw(this,o),this.g.start(i,!!o)},Z.prototype.startInteraction=Z.prototype.gc;function zw(i,o){if(o){var s={};s.Pe=o.power,s.re=o.ease,s.duration=o.duration,i.j=s}}function hw(i,o){return Jl(i,Jl(i,o-i.cb)+i.cb)}Z.prototype.Yb=function(i,o,s,_e,_n){var _o=!1;this.g.qa()&&(o=this.g.store(i,o,s,_e,_n),this.g.uc(Hl.COORD)&&(i=this.g.Ld(),0<hm(i)&&(yw(this,-i.x,-i.y),_o=!0)),o&&this.g.uc(Hl.ZOOM)&&(i=this.g.wf(),o=this.g.xf(),o=Cd(Ed(2,this.zoom)*o)/Md,o!==this.zoom&&(o=hw(this,o),pw(this,o,i.x,i.y),_o=!0)),_o&&this.fa())},Z.prototype.interaction=Z.prototype.Yb,Z.prototype.qb=function(i){var o=this;if(this.g.qa()&&!i){if(this.j){i=this.g.tb();var s=this.g.mc(),_e=this.j.duration,_n=(this.j.Pe||1)*i,_o=new Lm(-_n/(0<_e?_e:1),_n);!E(s.x)&&!E(s.y)&&0<_n&&o.g.uc(Hl.COORD)&&nw(this,function(_a){_n=_o.ze(_a*_e),E(_n)||yw(o,yd(-s.x*_n),yd(-s.y*_n))},_e,void 0,this.j.re)}this.j=null,this.g.clear()}},Z.prototype.endInteraction=Z.prototype.qb,Z.prototype.fc=function(i,o,s){lw(this),this.a.start(o,s),zw(this,i)},Z.prototype.startControl=Z.prototype.fc,Z.prototype.control=function(i,o,s){if(E(+s))throw new D(this.control,2,s);if(E(i))throw new D(this.control,0,i);if(E(o))throw new D(this.control,1,o);this.a.qa()&&this.a.set(i,o,s,0,0,0)},Z.prototype.control=Z.prototype.control,Z.prototype.pb=function(i,o){var s=this,_e;if(this.a.qa()){qw(this,!0);var _n=Jk(),_o=_n-this.Nj;if(1<=_o){var _a=tm(this.a);Aw(this,_a,_o)}if(!this.j||i||o)typeof o=="function"&&(i=this.gb(),i.zoom=this.zoom-this.cb,o(i),i.zoom+=this.cb,Bw(this,i));else{o=this.a.tb();var _u=this.a.mc(),_h=this.j.duration,ty=(this.j.Pe||1)*o,oy=new Lm(-ty/(0<_h?_h:1),ty);!E(_u.a)&&!E(_u.b)&&0<ty&&nw(this,function(hy,fy,vy,xy){_n&&(vy=xy-_n,_n=0),ty=oy.ze(hy*_h)*vy,E(ty)||((_e=_u.c*ty)&&pw(s,hw(s,s.zoom+_e),s.a.a,s.a.b),yw(s,yd(_u.a*ty),yd(_u.b*ty)))},_h,void 0,this.j.re)}this.a.reset()}},Z.prototype.endControl=Z.prototype.pb;function Bw(i,o){var s=i.m,_e=i.b.projection.Kc(o.position),_n=i.b.Xd(_e),_o=_n.y;_n=_n.x;var _a=o.zoom;s=i.b.Xd(s),o=s.y;var _u=s.x;s=i.zoom;var _h=i.a.tb(),ty=i.a.a,oy=i.a.b,hy=0;if(_n=jw(i,_u,_n),_n-=_u,_o-=o,s=_a-s,o=Dd(_n*_n+_o*_o+s*s),_h!==0&&o!==0){var fy=_n/o,vy=_o/o,xy=s/o,wy=_h*_h/(2*o);nw(i,function(By,Sy){var Ay;By!==1?(By=_h*Sy-wy*Sy*Sy/2,Sy=By-hy,(Ay=xy*Sy)&&(Ay=hw(i,i.zoom+Ay),pw(i,hw(i,Ay),ty,oy)),yw(i,yd(fy*Sy),yd(vy*Sy)),hy=By):(i.m=_e,pw(i,hw(i,_a),ty,oy),i.Wa(),i.fa())},2*o/_h)}}Z.prototype.ad=function(i){var o=this,s=i.b;this.K.set(0,0),s.a||s.b||s.c?(this.Nj=Jk(),nw(this,function(_e,_n,_o,_a){o.Nj=_a,Aw(o,s,_o)},Number.POSITIVE_INFINITY),this.fa()):qw(this,!0)};function Aw(i,o,s){s=s||0,o.c&&pw(i,hw(i,i.zoom+o.c*s),i.a.atX,i.a.atY),yw(i,o.a*s,o.b*s)}function nw(i,o,s,_e,_n){i.i&&i.i.qa()&&i.i.stop(!0),i.i=new zm(i,o,s,_e,_n),i.i.start()}function qw(i,o){i.i&&i.i.qa()&&i.i.stop(o)}Z.prototype.Qg=function(){},Z.prototype.enter=Z.prototype.Qg,Z.prototype.Rg=function(i){Gl(this.oa,i)},Z.prototype.exit=Z.prototype.Rg,Z.prototype.capture=function(i,o,s,_e){var _n=this.oa.ownerDocument.createElement("canvas"),_o=_n.getContext("2d"),_a=this.na;for(_n.width=(s-i)*_a,_n.height=(_e-o)*_a,s=0;s<this.s.length;s++)_e=this.s[s],C(_e,vm)&&_o.drawImage(_e.L(),-i*_a,-o*_a);return Zb(_n)};var xw=0,ww=1,ew=1e3,vw=256;function Cw(i){var o;if(i)for(Dw={},o=i.length;o--;)Dw[i[o]]=!0;this.$k={}}var Ew,Dw={};Cw.prototype.parse=function(i,o,s){var _e,_n,_o,_a,_u;Ew=!1;try{s=JSON.parse(s)}catch{Ew=!0}if(s&&(_e=s.metadata)){var _h={spatials:[]};for(_n in _e)if((s=!Dw[_n]&&(_o=Fw[_n]))&&((_a=_e[_n])||(Ew=!0,_a=void 0),s=_a),s)for(s=_a.length;s--;){var ty;(ty=_a[s])||(Ew=!0,ty=void 0),(_u=ty)&&_o(o,i,this,_n,_u,_h)}}else Ew=!0;return Ew?void 0:_h},Cw.prototype.parse=Cw.prototype.parse;var Fw={"street labels":function(i,o,s,_e,_n,_o){var _a;if((_a=_n.vertices)||(Ew=!0,_a=void 0),_a){var _u,_h=_a.length,ty;if((ty=0<_h)||(Ew=!0,ty=void 0),ty)for(_u=Array(_h/2);_h;){var oy=_a[--_h];ty=_a[--_h],_u[_h/2]=new G(ty,oy)}_u=_u?{a:[_u]}:B,_h=+_n["font size"]/i.Ua(),_a=s.$k[_h],_a||(Gw.lineWidth=_h,_a=s.$k[_h]=s.Bd.nj(Gw)),Hw(i,o,_u,!1,_a,_n,_e,_o)}delete _n.vertices},"city center labels":function(i,o,s,_e,_n,_o){Hw(i,o,Iw(_n,new Mh([])),!0,s.Bd,_n,_e,_o)},labels:function(i,o,s,_e,_n,_o){var _a;if((_a=_n["bounding boxes"])||(Ew=!0,_a=void 0),_a){for(var _u=_a.length,_h=new Mh([]),ty;_u--;){var oy;(oy=_a[_u])||(Ew=!0,oy=void 0),(ty=oy)&&Iw(ty,_h)}Hw(i,o,_h,!0,s.Bd,_n,_e,_o)}delete _n["bounding boxes"]},buildings:function(i,o,s,_e,_n,_o){var _a=_n.id,_u=o.ag[_a],_h,ty,oy,hy=[],fy=[];if((_h=_n)||(Ew=!0,_h=void 0),_h&&((ty=_h.vertices)||(Ew=!0,ty=void 0),ty)){var vy;(vy=_h.polygons)||(Ew=!0,vy=void 0),(oy=vy)&&hy.push.apply(hy,Jw(ty,oy)),(_h=_h.outlines)||(Ew=!0,_h=void 0),(oy=_h)&&fy.push.apply(fy,Jw(ty,oy))}oy=hy.length,hy.push.apply(hy,fy),fy=new Mh(hy,Ud,oy),(hy=hy.length)||(Ew=!0,hy=void 0),hy&&(_u?(Vq(_u,i,[fy]),_o.spatials.push(_u)):(_u=Hw(i,o,fy,!0,s.Bd,_n,_e,_o,_a),o.ba(_u)))}};Fw["transit stops"]=Fw.POIs=Fw.labels;var Kw=["box 2","box 1","annotation box","icon box"];function Iw(i,o){for(var s=Kw.length,_e,_n;s--;)if(_e=Kw[s],_n=i[_e]){var _o=_n[0],_a=_n[1],_u=_n[2];_n=_n[3],o.a.push([new G(_o,_a),new G(_o+_u,_a),new G(_o+_u,_a+_n),new G(_o,_a+_n)]),delete i[_e]}return o}function Jw(i,o){var s=o.length,_e,_n,_o;if(0<s){for(_n=Array(s);s--;)if((_e=o[s])||(Ew=!0,_e=void 0),_e){var _a=_e.length;if(0<_a)for(_n[s]=_o=Array(_a);_a--;){var _u=2*_e[_a];_o[_a]=new G(i[_u],i[_u+1])}}}return _n||[]}var Lw={};function Hw(i,o,s,_e,_n,_o,_a,_u,_h){return Lw.style=_n,_e=new Rq(o,_e,_h,Lw),s&&Vq(_e,i,[s]),Mw(_o),_o.category=_a,_e.setData(_o),_u.spatials.push(_e),_e.ia(o),_e}Cw.prototype.Bd=new wh({strokeColor:"transparent",fillColor:"transparent",lineWidth:0});var Gw={};function Mw(i){var o,s=!1;switch(typeof i){case"object":if(i instanceof Array)for(o=i.length;o--;)Mw(i[o])?s=!0:delete i[o];else if(i)for(o in i)Mw(i[o])?s=!0:delete i[o];break;case"number":s=!0;break;default:s=!!i}return s}function Nw(i,o,s){s=s||{},o=o||{};var _e=s.tileType||"maptile",_n=s.scheme||"normal.day";if(T.call(this,{min:0,max:20}),o.pois===!0&&(o.pois="!F"),this.K=o,!(i&&i instanceof Ow))throw Error("InvalidArgument: service required");this.u=i,this.i=A(this.i,this),this.u.addEventListener("versionupdate",this.i),this.B=i.C().clone().F(_e+"/"+i.pc()+"/"+_n).I(Pw).I(o),this.Y=i.f||null,this.N=s.pixelRatio||s.pixelratio||Te(),this.tileSize=s.tileSize||256,this.tileType=_e,this.scheme=_n,this.c=new ar(new Cw(s.categoryFilter)),this.c.ia(this),this.v=A(this.v,this),this.c.addEventListener("update",this.v),T.call(this,{min:0,max:20}),this.s(new Pk(s.tileCacheSize||256,A(this.V,this)))}u(Nw,T),t("H.service.metaInfo.TileProvider",Nw),Nw.prototype.V=function(i,o){i=o.Pa();for(var s=i.length,_e;s--;)_e=i[s],delete _e.a[o.key],_e.release();o.data&&(vp.push(o.Zf(),this.tileSize),o.$f())},Nw.prototype.v=function(){this.dispatchEvent("update")},Nw.prototype.G=function(i,o,s,_e,_n){var _o=this.B.clone(),_a=this.Y,_u=this.tileSize,_h=this.getTileKey(i,o,s);_h=this.Fb().get(_h);var ty;if(_h&&!_h.Sd()){_e(vp.pop(this.tileSize),null);var oy={cancel:function(){}}}else{_a&&_o.za(_a[(s+o+i)%_a.length]),_o.F(s+"/"+i+"/"+o+"/"+_u+"/png8");var hy=tp.setTimeout(function(){ty=new tf("text/plain",_o.toString()),ty.then(function(fy){_e(null,fy)},_n)},500)}return oy||{cancel:function(){ty?ty.cancel():tp.clearTimeout(hy)}}},Nw.prototype.requestInternal=Nw.prototype.G,Nw.prototype.Vb=function(i,o,s,_e,_n){var _o=this.c,_a=_e||vp.pop(this.tileSize);if(_e)i=this.Fb().get(this.getTileKey(i,o,s)),i.T(_e);else if(_e=i=new Zk(this.hd(i,o,s),i,o,s,this.tileSize,this.N,s,_o),delete _e.j,_e.m=_n,i.T(_a))for(_n=i.Pa(),_a=_n.length;_a--;)_n[_a].gg();else vp.push(_a,this.tileSize);return i},Nw.prototype.createTileInternal=Nw.prototype.Vb,Nw.prototype.D=function(){this.c.D(),this.u.removeEventListener("versionupdate",this.i),T.prototype.D.call(this)},Nw.prototype.dispose=Nw.prototype.D,Nw.prototype.i=function(){var i=this.u;this.B=i.C().clone().F(this.tileType+"/"+i.pc()+"/"+this.scheme).I(Pw).I(this.K),this.reload(!1)};var Pw={metadata:"metaonly",mgen:"2"};function Ow(i){Ow.l.constructor.call(this,Ow,i),i=Wp(this,i),this.f=i.shards,(this.b=i.ignoreTypes?null:i.type)&&this.C().za(this.b),this.c=i.version,this.j=new dq,this.c==="newest"&&Qw(this)}u(Ow,Vp),t("H.service.metaInfo.Service",Ow),Ow.prototype.Ia=function(){return{type:"base",version:"newest",subDomain:"maps.ls",path:"maptile/2.1",shards:["1","2","3","4"]}},Ow.CONFIG_KEY="metaInfo";function Rw(i,o){for(var s={},_e=i[o+"s"][o],_n=_e.length;_n--;)s[_e[_n].id]=_e[_n];i[o+"s"]=s}Ow.prototype.Gj=function(){return this.b},Ow.prototype.pc=function(){return this.c},Ow.prototype.getVersion=Ow.prototype.pc,Ow.prototype.ca=function(){return this.j},Ow.prototype.getCopyrights=Ow.prototype.ca;function Qw(i){var o=i.C().clone().F("info").I({output:"json"});i.f&&o.za(i.f[0]),i.G(o,function(s){s=s.response;var _e;if(Rw(s,"map"),Rw(s,"scheme"),Rw(s,"tiletype"),Rw(s,"format"),Rw(s,"resolution"),Rw(s,"language"),i.c==="newest"&&i.b!=="traffic")for(_e in s.maps)s.maps[_e].hash&&s.maps[_e].newest&&(i.c=s.maps[_e].hash,i.dispatchEvent("versionupdate"));i.m=s,i.dispatchEvent("infoupdate")},function(s){throw s})}Ow.prototype.Be=function(){return this.m},Ow.prototype.getInfo=Ow.prototype.Be,Ow.prototype.qe=function(i,o,s,_e,_n,_o){return new Nw(this,_e,{tileSize:i,pixelRatio:o,categoryFilter:s,tileType:_n,scheme:_o})},Ow.prototype.createTileProvider=Ow.prototype.qe,Ow.prototype.ic=function(i,o,s,_e,_n,_o){return new ql(this.qe(i,o,s,_e,_n,_o))},Ow.prototype.createTileLayer=Ow.prototype.ic,X.prototype.wj=function(i){return this.Ma(Ow,i)},X.prototype.getMetaInfoService=X.prototype.wj,function(){var i=X.prototype.createDefaultLayers;X.prototype.createDefaultLayers=function(o,s,_e,_n,_o,_a){var _u=i.call(this,o,s,_e,_n,_o,_a),_h={},ty=this.wj();typeof o=="object"&&(_a=o,o=_a.tileSize,s=_a.ppi,_e=_a.lg,_n=_a.lg2,_o=_a.style,_a=_a.pois),o=o||256;var oy=s===320?2:1;if(0>[72,250,320,500].indexOf(+s)){if(s!==B)throw new D(this.rf,1,s)}else _h.ppi=+s;return _e&&(_h.lg=_e),_n&&(_h.lg2=_n),_o&&(_h.style=_o),_a&&(_h.pois=_a),_u.raster.normal.metaInfo=ty.ic(o,oy,["buildings"],_h),_u}}(),H.__bootstrap__=`var l,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}var ea;
if("function"==typeof Object.setPrototypeOf)ea=Object.setPrototypeOf;else{var fa;a:{var ha={lb:!0},ja={};try{ja.__proto__=ha;fa=ja.lb;break a}catch(a){}fa=!1}ea=fa?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ka=ea;ca("Object.setPrototypeOf",function(a){return a||ka});var p=this||self;
function la(a,b,c){a=a.split(".");c=c||p;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}function ma(){}
function na(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function r(a){return"function"==na(a)}function oa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var pa="closure_uid_"+(1E9*Math.random()>>>0),ra=0;function sa(a,b,c){return a.call.apply(a.bind,arguments)}
function ta(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function ua(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ua=sa:ua=ta;return ua.apply(null,arguments)}
function va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function t(a,b){la(a,b,void 0)}function wa(a,b){function c(){}c.prototype=b.prototype;a.U=b.prototype;a.prototype=new c;a.prototype.constructor=a};function v(){}t("H.util.ICache",v);v.prototype.add=function(){};v.prototype.add=v.prototype.add;v.prototype.get=function(){};v.prototype.get=v.prototype.get;v.prototype.sa=function(){};v.prototype.drop=v.prototype.sa;v.prototype.forEach=function(){};v.prototype.forEach=v.prototype.forEach;v.prototype.S=function(){};v.prototype.removeAll=v.prototype.S;v.prototype.aa=function(){};v.prototype.registerOnDrop=v.prototype.aa;v.prototype.qa=function(){};v.prototype.deRegisterOnDrop=v.prototype.qa;function xa(){var a=ya,b;for(b in a)return!1;return!0}function za(a){var b={},c;for(c in a)b[c]=a[c];return b}var Aa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ba(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Aa.length;f++)c=Aa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Ca=this;function Da(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Da);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}wa(Da,Error);Da.prototype.name="CustomError";var Ea=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var Fa=ua,Ga=String,Ha=Ca.Object.freeze||function(a){return a},x=[].pop(),Ia=/x/.exec("");function Ja(a){return Ga(a).split(","!==x?",":" ")}var Ma="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Na(a,b,c,d){if(!(b=a instanceof b)&&c)throw new y(c,d,void 0!==x?void 0:a);return b}function Oa(a,b,c,d){var e;if(!(e="Array"===Pa(a))&&b)throw new y(b,c,d!==x?d:a);return e}
t("H.lang.isArray",function(a,b,c,d){return Oa(a,b,c,d)});function Qa(a){return"string"===typeof a}t("H.lang.isString",Qa);var Ra=isNaN;function Sa(a){return a===+a}t("H.lang.isNumber",Sa);t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(a){return"number"===typeof a&&0===a%1});function Pa(a){var b=Object[Ma[0]][Ma[6]].call(a).match(/^\\[object (\\w+)\\]$/);return b?b[1]:typeof a}var Ta=[];0>Ta.indexOf(Ta)&&Ta.push(Ta);
function Ua(a,b,c,d){var e="",f=2>arguments.length,g;f&&(b={H:Ca.H},c="",d=Ta.slice());Va(b,!0,function(h,k){try{if(g=h[k],k=Wa(h,g),!(oa(g)&&g.window===g&&g.self===g||oa(g)&&0<g.nodeType&&r(g.cloneNode))&&oa(g)){if(g===a)return e=c+"."+k,!0;if(0>d.indexOf(g)&&(d.push(g),e=Ua(a,g,c+"."+k,d)))return!0}}catch(m){}});f&&(e=e?e.substr(1).replace("."+Ma[0]+".","#"):"~"+(r(a)?Xa(a)+"()":Pa(a)));return e}
function Wa(a,b){var c=[];Va(a,!1,function(d,e){d[e]===b&&c.push(e)});return c.sort(Ya)[0]}function Ya(a,b){return b.length-a.length}var Za=Object[Ma[0]][Ma[2]];function Va(a,b,c){var d;if(a){for(e in a)if((!b||Za.call(a,e))&&c(a,e,!0))return;for(d=Ma.length;d--;){var e=Ma[d];if((!b||Za.call(a,e))&&c(a,e,!1))break}}}function Xa(a){return(a=/^\\s*function ([^\\( ]+)/.exec(a))?a[1]:"anonymous"}function $a(a,b,c){c[b]="#"+b};function A(a,b,c){this.g=[];b&&this.aa(b);if(c&&!r(c))throw new y(A,2,c);this.b=0;this.filter=c;this.a={};this.f=this.c=null;this.Ha(a)}t("H.util.Cache",A);A.prototype.add=function(a,b,c){var d,e;c=+c;if(!Sa(c)||0>c)throw new y(this.add,2,c);a=String(a);if(e=this.filter?this.filter(a,b,c):!0)(d=this.a[a])?(d.data!==b&&ab(this,d),this.b+=c-d.size,d.size=c,d.data=b,eb(this,d)):this.a[a]=fb(this,{id:a,data:b,size:c,m:null,C:null},this.c),gb(this);return e};A.prototype.add=A.prototype.add;
A.prototype.aa=function(a){if(!r(a))throw new y(this.aa,0,a);this.g.push(a)};A.prototype.registerOnDrop=A.prototype.aa;A.prototype.qa=function(a){this.g=this.g.filter(function(b){return b!==a})};A.prototype.deRegisterOnDrop=A.prototype.qa;A.prototype.get=function(a,b){return(a=b?this.a[a]:eb(this,this.a[a]))&&a.data};A.prototype.get=A.prototype.get;A.prototype.sa=function(a){var b;(b=this.a[a])&&hb(this,b,!0)};A.prototype.drop=A.prototype.sa;
A.prototype.forEach=function(a,b,c){var d;for(d in this.a){var e=this.a[d];(c?c(d,e.data,e.size):1)&&a.call(b,d,e.data,e.size)}};A.prototype.forEach=A.prototype.forEach;A.prototype.S=function(a){var b;for(b in this.a){var c=this.a[b];(a?a(b,c.data,c.size):1)&&hb(this,this.a[b],!0)}};A.prototype.removeAll=A.prototype.S;A.prototype.Ha=function(a){if(!(0<+a))throw new y(A.prototype.Ha,0,a);this.i=+a;gb(this);return this};A.prototype.setMaxSize=A.prototype.Ha;A.prototype.Bb=function(){return this.i};
A.prototype.getMaxSize=A.prototype.Bb;A.prototype.xb=function(){return this.b};A.prototype.getCurrentSize=A.prototype.xb;function eb(a,b){b&&(a.c=fb(a,b,a.c));return b}function gb(a){for(;a.b>a.i&&a.f;)hb(a,a.f,!0)}function fb(a,b,c){if(c!==b){(b.m||b.C)&&hb(a,b,!1);if(b.m=c)b.C=c.C,c.C=b;b.C||(a.c=b);b.m||(a.f=b);a.b+=b.size}return b}function hb(a,b,c){var d=b.C,e=b.m;if(d||e||b==a.c&&b==a.f)d?d.m=e:a.c=e,e?e.C=d:a.f=d,a.b-=b.size,c&&(delete a.a[b.id],ab(a,b));b.m=b.C=null}
function ab(a,b){for(var c=a.g.length;c--;)a.g[c].call(a,b.id,b.data,b.size)};function B(){}t("H.service.extension.dataView.ITable",B);B.prototype.xa=function(){};B.prototype.getMeta=B.prototype.xa;B.prototype.ya=function(){};B.prototype.getRowCount=B.prototype.ya;B.prototype.ga=function(){};B.prototype.getRow=B.prototype.ga;B.prototype.A=function(){};B.prototype.getColumnNames=B.prototype.A;B.prototype.wa=function(){};B.prototype.getColumn=B.prototype.wa;B.prototype.l=function(){};B.prototype.getCell=B.prototype.l;B.prototype.concat=function(){};B.prototype.concat=B.prototype.concat;function ib(){}t("H.service.extension.dataView.IRow",ib);ib.prototype.A=function(){};ib.prototype.getColumnNames=ib.prototype.A;ib.prototype.l=function(){};ib.prototype.getCell=ib.prototype.l;ib.prototype.za=function(){};ib.prototype.getTable=ib.prototype.za;function jb(a,b){this.a=a;this.b=b}t("H.service.extension.dataView.ObjRow",jb);jb.prototype.A=function(){return this.a.A()};jb.prototype.getColumnNames=jb.prototype.A;jb.prototype.l=function(a){return this.a.l(this.b,a)};jb.prototype.getCell=jb.prototype.l;jb.prototype.za=function(){return this.a};jb.prototype.getTable=jb.prototype.za;function kb(){}t("H.service.extension.dataView.IColumn",kb);kb.prototype.l=function(){};kb.prototype.getCell=kb.prototype.l;function lb(a,b){this.b=a;this.a=b}t("H.service.extension.dataView.ObjColumn",lb);lb.prototype.l=function(a){return this.b.l(a,this.a)};lb.prototype.getCell=lb.prototype.l;function y(a,b,c){var d=arguments.length;b=b!==x?+b:b;if(b!==x){var e=(e=/^.*?\\(([^\\)]+)/.exec((""+a).replace(/(\\/\\*([\\s\\S]*?)\\*\\/)|(\\/\\/(.*)$)/gm,"")))?Ja(e[1].replace(/\\s+/g,"")):[];e.forEach($a);e=e[b]||"#"+b}var f=a?Ua(a):"";d=2<d?Ga(c):"";if(e||d)f+=" (Argument "+(e||"")+(d?" "+d:"")+")";d=Error(f);Object.setPrototypeOf(d,y.prototype);return d}wa(y,Error);t("H.lang.InvalidArgumentError",y);y.prototype.name="InvalidArgumentError";function C(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):x);this.D=a;if(b)for(this.M=b,this.pa=a=Object.create(Ia,void 0),d=b.length;d--;)a[b[d]]=!0;c!==x&&(this.Ca=c)}t("H.service.extension.dataView.ObjTable",C);l=C.prototype;l.Ca=x;l.D=x;l.M=x;l.pa=x;l.xa=function(){return this.Ca};C.prototype.getMeta=C.prototype.xa;C.prototype.ya=function(){return this.D?this.D.length:0};C.prototype.getRowCount=C.prototype.ya;C.prototype.ga=function(a){var b=this.D;return b&&b[a]?new jb(this,a):x};
C.prototype.getRow=C.prototype.ga;C.prototype.A=function(){return this.M||mb};C.prototype.getColumnNames=C.prototype.A;C.prototype.wa=function(a){return this.pa[a]?new lb(this,a):x};C.prototype.getColumn=C.prototype.wa;C.prototype.l=function(a,b){var c=this.D;return(a=c&&this.pa[b]&&c[a])&&a[b]};C.prototype.getCell=C.prototype.l;
C.prototype.concat=function(){var a=arguments.length,b,c=this.M,d=""+this.M,e=(this.D||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof C))throw new y(this.concat,b);if(f.D){if(c&&""+f.M!==d)throw new y(this.concat,b,"Incompatible columns!");e=e.concat(f.D)}}return new C(e,this.M,this.Ca)};C.prototype.concat=C.prototype.concat;var D=Math,nb=D.min,ob=D.max,pb=D.round,qb=D.floor,rb=D.ceil,sb=D.abs,tb=D.log,ub=D.sqrt,vb=D.pow,wb=D.exp,xb=D.sin,yb=D.asin,zb=D.cos,Ab=D.tan,Bb=D.atan,Cb=D.atan2,Db=D.LN2,E=D.PI,Eb=E/2,Fb=E/4,Gb=2*E,Hb=3*E,Ib=E/180,Kb=180/E,Lb=1/0;vb(-2,53);function Mb(a,b){var c;return 0>(c=a%b)===0>b?c:c+b}t("H.math.normalize",function(a,b,c){b-=c=c||0;a-=c;return a-qb(a/b)*b+c});function Nb(a,b,c){return a>c?c:a<b?b:a}t("H.math.clamp",Nb);function Ob(a,b,c){return b<c?a>=b&&a<=c:a>=c&&a<=b}
function Pb(a,b,c,d,e,f){return ub(vb((a-e)*(d-f)-(b-f)*(c-e),2)/(vb(c-e,2)+vb(d-f,2)))}var Qb={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};t("H.math.CoverType",Qb);
function Rb(a,b,c){for(var d=c.length,e=d,f,g,h,k,m=c[0],n=0,q=0,u=0;1!=n&&1<e;){g=c[--e];f=c[--e];k=c[e?e-1:(d+(e-1))%d];h=c[e?e-2:(d+(e-2))%d];if(f>=a&&f<=a&&g>=b&&g<=b||h>=a&&h<=a&&k>=b&&k<=b)n=1;else if(!n&&f===a)h===a&&(g<b&&k>b||g>b&&k<b)||(m<=a&&h>a||m>=a&&h<a)&&(g>=b?++q:++u),n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0;else if(!n&&Ob(a,f,h)){if(f<a&&h>a||f>a&&h<a)m=g+(a-f)/(h-f)*(k-g),q+=m>b,u+=m<b;n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0}m=f}!n&&0!==u&&0!==q%2&&(n=3);return n}
function Sb(a,b){return Rb(a.x,a.y,b)!==Qb.NONE}t("H.math.isPointInsidePolygon",Sb);function Tb(a){for(var b=a.length,c=new Float64Array(2*b),d=b&&a[0].x!==x;b--;){var e=a[b],f=b<<1;c[f]=d?e.x:e[0];c[f+1]=d?e.y:e[1]}return c}t("H.math.flatten",Tb);function F(a,b){this.x=+a;this.y=+b}t("H.math.Point",F);F.prototype.set=F;F.prototype.set=F.prototype.set;F.prototype.clone=function(a){a?(a.x=this.x,a.y=this.y):a=new F(this.x,this.y);return a};F.prototype.clone=F.prototype.clone;F.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};F.prototype.add=F.prototype.add;F.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;return this};F.prototype.sub=F.prototype.sub;F.prototype.scale=function(a,b){this.x*=a;this.y*=void 0===b?a:b;return this};
F.prototype.scale=F.prototype.scale;F.prototype.round=function(){this.x=pb(this.x);this.y=pb(this.y);return this};F.prototype.round=F.prototype.round;F.prototype.floor=function(){this.x=qb(this.x);this.y=qb(this.y);return this};F.prototype.floor=F.prototype.floor;F.prototype.ceil=function(){this.x=rb(this.x);this.y=rb(this.y);return this};F.prototype.ceil=F.prototype.ceil;F.prototype.F=function(a){return!(!a||this.x!==a.x||this.y!==a.y)};F.prototype.equals=F.prototype.F;
F.prototype.Cb=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=a;if(c||d){var f=((this.x-a.x)*c+(this.y-a.y)*d)/(c*c+d*d);0>=f?e=a:1<=f?e=b:e=new F(a.x+f*c,a.y+f*d)}return e};F.prototype.getNearest=F.prototype.Cb;F.prototype.ra=function(a){return ub(vb(this.x-a.x,2)+vb(this.y-a.y,2))};F.prototype.distance=F.prototype.ra;F.fromIPoint=function(a){if(!a)throw Error("invalid argument");return a instanceof F?a:new F(a.x,a.y)};function Ub(a,b,c,d,e,f){var g,h,k=a.length,m,n;if(k)for(g=[];k--;){var q=a[k];var u=q.length;var I=0;for(m=1;m<u;m++)if(n=Vb(q[m-1],q[m],c,b,d,e)){var L=n[0];var w=n[1];I&&I.F(L)?h.push(w):g.push(h=n);I=w;f&&(m=u,k=0)}}else g=a;return g}t("H.math.clipping.clipStrips",Ub);
function Vb(a,b,c,d,e,f){var g=a.x;a=-a.y;var h=b.x;b=-b.y;c=-c;f=-f;if(g>h){if(h>e||g<d)return;var k=g;var m=a;g=h;a=b;h=k;b=m;k=1}else if(g>e||h<d)return;if(a>b){if(b>c||a<f)return;var n=1;a=-a;b=-b;m=f;f=-c;c=-m}else if(a>c||b<f)return;if(g<d){if((a+=(d-g)*(b-a)/(h-g))>c)return;g=d}if(a<f){if((g+=(f-a)*(h-g)/(b-a))>e)return;a=f}h>e&&(b=a+(e-g)*(b-a)/(h-g),h=e);b>c&&(h=g+(c-a)*(h-g)/(b-a),b=c);n&&(a=-a,b=-b);return k?[new F(h,-b),new F(g,-a)]:[new F(g,-a),new F(h,-b)]}
function Wb(a,b,c){a=Xb(a,!0);b=Xb(b,!1);var d,e;var f={};var g=d=1;switch(~~(c||0)){case 1:g=d=0;break;case 2:d=0;g=1;break;case 3:d=1,g=0}c=d;var h=g;if(b&&a){b.W=new Yb(b.x,b.y,null,Zb(b));a.W=new Yb(a.x,a.y,null,Zb(a));for(g=b;g.next;g=g.next)if(!g.u)for(d=a;d.next;d=d.next)if(!d.u){var k=$b(g.next);var m=$b(d.next);if(e=ac(g,k,d,m,f)){e=f.mb;var n=f.nb;var q=f.ec;var u=f.fc;e=new Yb(q,u,null,null,null,null,!0,0,0,e);bc(e,g,k);k=new Yb(q,u,null,null,null,null,!0,0,0,n);bc(k,d,m);e.Da=k;k.Da=e}}f=
Sb(b,cc(a));c&&(f=!f);for(g=b;g;g=g.next)g.u&&(g.Aa=f,f=!f);f=Sb(a,cc(b));h&&(f=!f);for(d=a;d.next;d=d.next)d.u&&(d.Aa=f,f=!f);dc(b);for(dc(a);(a=ec(b))!=b;){for(c=null;!a.na;a=a.Da){for(f=a.Aa;;){c=new Yb(a.x,a.y,c);c.artificial=a.u||a.Wa;a.na=1;a=f?a.next:a.o;if(!a)break;if(a.u){a.na=1;break}}if(!a)break}c.Za=I||null;var I=c}return I}}t("H.math.clipping.clipPolygon",Wb);
function Yb(a,b,c,d,e,f,g,h,k,m){this.x=a;this.y=b;this.next=c||null;this.o=d||null;this.Za=e||null;this.Da=f||null;this.u=!!g;this.Aa=!!h;this.na=k||0;this.alpha=m||0;d&&(d.next=this);c&&(c.o=this);this.Wa=!1;this.W=null}function $b(a){for(;a&&a.u;)a=a.next;return a}function Zb(a){if(a)for(;a.next;)a=a.next;return a}function ec(a){var b=a;if(b){do b=b.next;while(b!=a&&(!b.u||b.u&&b.na))}return b}function dc(a){var b=Zb(a);b.o.next=a;a.o=b.o}
function ac(a,b,c,d,e){var f,g=b.x-a.x,h=b.y-a.y;var k=d.x-c.x;var m=d.y-c.y;var n=g*m-h*k;if(!n)return 0;k=((c.x-a.x)*m-(c.y-a.y)*k)/n;n=(h*(c.x-a.x)-g*(c.y-a.y))/n;if(0>k||1<k||0>n||1<n)return 0;0===k?f=a:1===k?f=b:0===n?f=c:1===n&&(f=d);if(f)return f.x+=2.480549651603763E-5,f.y+=7.321997314118067E-5,f.W&&(f.W.x=f.x,f.W.y=f.y),ac(a,b,c,d,e);e.ec=a.x+k*g;e.fc=a.y+k*h;e.mb=k;e.nb=n;return 1}function cc(a){for(var b=[];a;)b.push(a.x,a.y),a=a.next;return b}
function bc(a,b,c){for(b=b.next;b!==c&&b.alpha<=a.alpha;)b=b.next;a.next=b;a.o=b.o;a.next.o=a;a.o.next=a}function Xb(a,b){for(var c,d=null,e=0,f=a.length;e<f;e++){c=new Yb(a[e].x,a[e].y,d);c.Wa=b;if(c.next=d)d.o=c;d=c}return d};function fc(a,b){var c=[];a&&c.push(Ua(a));1<arguments.length&&c.push(""+b);c=Error(c.join(" "));Object.setPrototypeOf(c,fc.prototype);return c}wa(fc,Error);t("H.lang.IllegalOperationError",fc);fc.prototype.name="IllegalOperationError";function gc(){this.constructor=this.constructor;if(!Qa("STATIC_DB"))throw new y(this.constructor,0);this.i=hc();if(!this.i)throw new fc(this.constructor,"This browser does not support IndexedDB");this.a=[];this.c=[];this.g=Fa(this.g,this)}var ic,jc;gc.prototype.get=function(a,b,c){var d;if(!Qa(a)&&!Sa(a))throw new y(this.get,0);if(!r(b))throw new y(this.get,1);kc(this,function(e){d=e.get(a);lc(d,b,c)},c);return{cancel:function(){d&&(d.onsuccess=mc)}}};
gc.prototype.g=function(){var a=this.b.result;a.objectStoreNames.contains("data")||a.createObjectStore("data")};
function nc(a,b,c){if(a.b)a.a?(a.a.push(b),c&&a.c.push(c)):a.f?c&&c(a.f):b(a.b.result);else{a.b=a.i.open("H_STATIC_DB",1);a.b.onupgradeneeded=a.g;var d=a.b.onerror=function(){clearTimeout(a.j);a.f=this.error;a.c.forEach(function(e){e(a.f)});delete a.a;delete a.c};a.j=setTimeout(function(){d.call({error:Error("DbOpenTimeoutError")})},500);a.b.onsuccess=function(){clearTimeout(a.j);a.a?(a.a.forEach(function(e){e(this.result)},this),delete a.a,delete a.c):(delete a.b,delete a.f,a.a=[],a.c=[])};
a.a.push(b);c&&a.c.push(c)}}function kc(a,b,c){nc(a,function(d){d=d.transaction(["data"],"readwrite");b(d.objectStore("data"))},c)}function lc(a,b,c){b&&(a.onsuccess=function(){b(this.result)});c&&(a.onerror=function(){c(this.error)})}t("H.util.IndexedDBStorage.getInstance",function(){ic||(ic=new gc);return ic});function hc(){return Ca.indexedDB||Ca.webkitIndexedDB||Ca.mozIndexedDB||Ca.msIndexedDB}
t("H.util.IndexedDBStorage.isSupported",function(){var a="";if(jc===x)if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)jc=!1;else{try{var b=hc();a="H_TEST_DB";var c=b&&b.open(a,1)}catch(d){}jc=!!c&&null===c.onupgradeneeded;c&&b.deleteDatabase&&b.deleteDatabase(a)}return jc});function J(){0!=oc&&(pc[this[pa]||(this[pa]=++ra)]=this);this.c=this.c;this.a=this.a}var oc=0,pc={};J.prototype.c=!1;J.prototype.s=function(){if(!this.c&&(this.c=!0,this.v(),0!=oc)){var a=this[pa]||(this[pa]=++ra);if(0!=oc&&this.a&&0<this.a.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete pc[a]}};
J.prototype.L=function(a,b){this.c?void 0!==b?a.call(b):a():(this.a||(this.a=[]),this.a.push(void 0!==b?ua(a,b):a))};J.prototype.v=function(){if(this.a)for(;this.a.length;)this.a.shift()()};function K(a,b){this.type=a;this.currentTarget=this.target=b;this.a=!1;this.ab=!0}K.prototype.stopPropagation=function(){this.a=!0};K.prototype.c=function(){this.ab=!1};t("H.util.Event",K);K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.CAPTURING_PHASE=1;K.prototype.CAPTURING_PHASE=K.prototype.CAPTURING_PHASE;K.prototype.AT_TARGET=2;K.prototype.AT_TARGET=K.prototype.AT_TARGET;K.prototype.BUBBLING_PHASE=3;K.prototype.BUBBLING_PHASE=K.prototype.BUBBLING_PHASE;K.prototype.eventPhase=0;K.prototype.eventPhase=K.prototype.eventPhase;function qc(a,b,c){qc.U.constructor.call(this,a,c);this.data=b}wa(qc,K);t("H.util.DataEvent",qc);function rc(a,b,c){rc.U.constructor.call(this,a,c);this.message=b}wa(rc,K);t("H.util.ErrorEvent",rc);function sc(){}t("H.util.ICancelable",sc);sc.prototype.cancel=function(){};sc.prototype.cancel=sc.prototype.cancel;function tc(a,b){this.c=a;this.f=b;this.b=0;this.a=null}tc.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next;a.next=null}else a=this.c();return a};function uc(a,b){a.f(b);100>a.b&&(a.b++,b.next=a.a,a.a=b)};function vc(){this.b=this.a=null}var xc=new tc(function(){return new wc},function(a){a.reset()});vc.prototype.add=function(a,b){var c=xc.get();c.set(a,b);this.b?this.b.next=c:this.a=c;this.b=c};function yc(){var a=zc,b=null;a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null);return b}function wc(){this.next=this.b=this.a=null}wc.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};wc.prototype.reset=function(){this.next=this.b=this.a=null};var Ac=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(a)[1]};function Bc(a,b){return a<b?-1:a>b?1:0};var Cc;a:{var Dc=p.navigator;if(Dc){var Ec=Dc.userAgent;if(Ec){Cc=Ec;break a}}Cc=""}function M(a){return-1!=Cc.indexOf(a)};function Hc(a,b){this.b=a===Ic&&b||"";this.a=Jc}var Jc={},Ic={},Kc=new Hc(Ic,"");function Lc(a,b){this.b=a===Mc&&b||"";this.a=Nc}var Nc={},Mc={};function Oc(){this.a="";this.b=Pc}function Qc(){var a=Rc;if(a instanceof Oc&&a.constructor===Oc&&a.b===Pc)return a.a;na(a);return"type_error:SafeHtml"}var Pc={};function Sc(a){var b=new Oc;b.a=a;return b}Sc("<!DOCTYPE html>");var Rc=Sc("");Sc("<br>");function Tc(a){var b=new Lc(Mc,Kc instanceof Hc&&Kc.constructor===Hc&&Kc.a===Jc?Kc.b:"type_error:Const");b instanceof Lc&&b.constructor===Lc&&b.a===Nc?b=b.b:(na(b),b="type_error:TrustedResourceUrl");a.src=b.toString()};function Uc(a){Uc[" "](a);return a}Uc[" "]=ma;var Vc=M("Opera"),Wc=M("Trident")||M("MSIE"),Xc=M("Edge"),Yc=M("Gecko")&&!(-1!=Cc.toLowerCase().indexOf("webkit")&&!M("Edge"))&&!(M("Trident")||M("MSIE"))&&!M("Edge"),Zc=-1!=Cc.toLowerCase().indexOf("webkit")&&!M("Edge");function $c(){var a=p.document;return a?a.documentMode:void 0}var ad;
a:{var bd="",cd=function(){var a=Cc;if(Yc)return/rv:([^\\);]+)(\\)|;)/.exec(a);if(Xc)return/Edge\\/([\\d\\.]+)/.exec(a);if(Wc)return/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(a);if(Zc)return/WebKit\\/(\\S+)/.exec(a);if(Vc)return/(?:Version)[ \\/]?(\\S+)/.exec(a)}();cd&&(bd=cd?cd[1]:"");if(Wc){var dd=$c();if(null!=dd&&dd>parseFloat(bd)){ad=String(dd);break a}}ad=bd}var ed={},fd;fd=p.document&&Wc?$c():void 0;function gd(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function hd(a){p.setTimeout(function(){throw a;},0)}var id;
function jd(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!M("Presto")&&(a=function(){var e=gd("IFRAME");e.style.display="none";Tc(e);document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(Qc());e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=ua(function(k){if(("*"==h||k.origin==h)&&k.data==g)this.port1.onmessage()},
this);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!M("Trident")&&!M("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Pa;c.Pa=null;e()}};return function(e){d.next={Pa:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in gd("SCRIPT")?function(e){var f=gd("SCRIPT");f.onreadystatechange=function(){f.onreadystatechange=null;
f.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){p.setTimeout(e,0)}};function kd(a,b){ld||md();nd||(ld(),nd=!0);zc.add(a,b)}var ld;function md(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);ld=function(){a.then(od)}}else ld=function(){var b=od;!r(p.setImmediate)||p.Window&&p.Window.prototype&&!M("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(id||(id=jd()),id(b)):p.setImmediate(b)}}var nd=!1,zc=new vc;function od(){for(var a;a=yc();){try{a.a.call(a.b)}catch(b){hd(b)}uc(xc,a)}nd=!1};function pd(a){this.a=qd;this.j=void 0;this.f=this.b=this.c=null;this.g=this.i=!1;if(a!=ma)try{var b=this;a.call(void 0,function(c){rd(b,sd,c)},function(c){rd(b,td,c)})}catch(c){rd(this,td,c)}}var qd=0,sd=2,td=3;function ud(){this.next=this.c=this.b=this.f=this.a=null;this.g=!1}ud.prototype.reset=function(){this.c=this.b=this.f=this.a=null;this.g=!1};var vd=new tc(function(){return new ud},function(a){a.reset()});function wd(a,b,c){var d=vd.get();d.f=a;d.b=b;d.c=c;return d}
function xd(a,b,c){yd(a,b,c,null)||kd(va(b,a))}function zd(a){return new pd(function(b,c){var d=a.length,e=[];if(d)for(var f=function(m,n){d--;e[m]=n;0==d&&b(e)},g=function(m){c(m)},h=0,k;h<a.length;h++)k=a[h],xd(k,va(f,h),g);else b(e)})}function Ad(){var a,b,c=new pd(function(d,e){a=d;b=e});return new Bd(c,a,b)}pd.prototype.then=function(a,b,c){return Cd(this,r(a)?a:null,r(b)?b:null,c)};pd.prototype.$goog_Thenable=!0;
pd.prototype.cancel=function(a){if(this.a==qd){var b=new Dd(a);kd(function(){Ed(this,b)},this)}};function Ed(a,b){if(a.a==qd)if(a.c){var c=a.c;if(c.b){for(var d=0,e=null,f=null,g=c.b;g&&(g.g||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.a==qd&&1==d?Ed(c,b):(f?(d=f,d.next==c.f&&(c.f=d),d.next=d.next.next):Fd(c),Gd(c,e,td,b)))}a.c=null}else rd(a,td,b)}function Hd(a,b){a.b||a.a!=sd&&a.a!=td||Id(a);a.f?a.f.next=b:a.b=b;a.f=b}
function Cd(a,b,c,d){var e=wd(null,null,null);e.a=new pd(function(f,g){e.f=b?function(h){try{var k=b.call(d,h);f(k)}catch(m){g(m)}}:f;e.b=c?function(h){try{var k=c.call(d,h);void 0===k&&h instanceof Dd?g(h):f(k)}catch(m){g(m)}}:g});e.a.c=a;Hd(a,e);return e.a}pd.prototype.Ea=function(a){this.a=qd;rd(this,sd,a)};pd.prototype.Ga=function(a){this.a=qd;rd(this,td,a)};
function rd(a,b,c){a.a==qd&&(a===c&&(b=td,c=new TypeError("Promise cannot resolve to itself")),a.a=1,yd(c,a.Ea,a.Ga,a)||(a.j=c,a.a=b,a.c=null,Id(a),b!=td||c instanceof Dd||Jd(a,c)))}function yd(a,b,c,d){if(a instanceof pd)return Hd(a,wd(b||ma,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;if(oa(a))try{var f=a.then;if(r(f))return Kd(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}
function Kd(a,b,c,d,e){function f(k){h||(h=!0,d.call(e,k))}function g(k){h||(h=!0,c.call(e,k))}var h=!1;try{b.call(a,g,f)}catch(k){f(k)}}function Id(a){a.i||(a.i=!0,kd(a.P,a))}function Fd(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.f=null);return b}pd.prototype.P=function(){for(var a;a=Fd(this);)Gd(this,a,this.a,this.j);this.i=!1};
function Gd(a,b,c,d){if(c==td&&b.b&&!b.g)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,Ld(b,c,d);else try{b.g?b.f.call(b.c):Ld(b,c,d)}catch(e){Md.call(null,e)}uc(vd,b)}function Ld(a,b,c){b==sd?a.f.call(a.c,c):a.b&&a.b.call(a.c,c)}function Jd(a,b){a.g=!0;kd(function(){a.g&&Md.call(null,b)})}var Md=hd;function Dd(a){Da.call(this,a)}wa(Dd,Da);Dd.prototype.name="cancel";function Bd(a,b,c){this.a=a;this.b=b;this.reject=c};function Nd(a,b,c){this.type=a;this.data=b;this.a=Ad();this.Xa=Fa(this.Xa,this);this.reject=Fa(this.reject,this);this.priority=Od;c!==x&&(this.priority=c);this.b().add(this)}var Od=1,Pd={hc:0,ic:Od,gc:2};l=Nd.prototype;l.then=function(a,b,c){return this.a.a.then(a,b,c)};l.Xa=function(a){this.Z=3;this.a.b(a)};l.reject=function(a){this.Z=5;this.a.reject(a)};l.Z=0;
l.cancel=function(){if(3>this.Z){this.c();var a=this.b(),b=this.priority,c=a.a[b].indexOf(this);-1<c?a.a[b].splice(c,1):this.Ma&&a.ca.qb(this.Ma);this.Z=4}};Nd.prototype.cancel=Nd.prototype.cancel;function Qd(a){var b;this.a={};for(b in Pd)this.a[Pd[b]]=[];this.ca=a;this.ca.addEventListener("allocatable",Fa(this.b,this))}t("H.util.JobManager",Qd);var Rd=Object.keys(Pd).map(function(a){return Pd[a]}).sort().reverse();Qd.prototype.add=function(a){Na(a,Nd,this.add,0);this.a[a.priority].push(a);this.b()};Qd.prototype.contains=function(a){return-1<this.a[a.priority].indexOf(a)};
Qd.prototype.b=function(){Rd.forEach(function(a){this.a[a]=this.a[a].filter(function(b){var c;if((c=this.ca.jc(b))!==Ia){var d=Fa(this.ca.qb,this.ca,c,b);b.Ma=c;b.then(d,d);b.Z=b.kc(c)?1:5}else return!0},this)},this)};function Sd(a,b,c){var d=[],e=arguments.length;a&&d.push(Ua(a));1<e&&(e=2<e&&Oa(c,void 0,void 0,void 0)?" out of ["+c[0]+"..."+c[1]+"]":"",d.push("("+b+e+")"));d=Error(d.join(" "));Object.setPrototypeOf(d,Sd.prototype);return d}wa(Sd,Error);t("H.lang.OutOfRangeError",Sd);Sd.prototype.name="OutOfRangeError";var Td="closure_listenable_"+(1E6*Math.random()|0),Ud=0;function Vd(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.ha=e;this.key=++Ud;this.T=this.da=!1}function Wd(a){a.T=!0;a.listener=null;a.proxy=null;a.src=null;a.ha=null};function Xd(a){this.src=a;this.a={};this.b=0}Xd.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var g=Yd(a,b,d,e);-1<g?(b=a[g],c||(b.da=!1)):(b=new Vd(b,this.src,f,!!d,e),b.da=c,a.push(b));return b};function Zd(a,b){var c=b.type;if(c in a.a){var d=a.a[c],e=Ea(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(Wd(b),0==a.a[c].length&&(delete a.a[c],a.b--))}}
Xd.prototype.S=function(a){a=a&&a.toString();var b=0,c;for(c in this.a)if(!a||c==a){for(var d=this.a[c],e=0;e<d.length;e++)++b,Wd(d[e]);delete this.a[c];this.b--}return b};function Yd(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.T&&f.listener==b&&f.capture==!!c&&f.ha==d)return e}return-1};var $d;($d=!Wc)||($d=9<=Number(fd));var ae=$d,be;
if(be=Wc){var ce;if(Object.prototype.hasOwnProperty.call(ed,"9"))ce=ed["9"];else{for(var de=0,ee=Ac(String(ad)).split("."),fe=Ac("9").split("."),ge=Math.max(ee.length,fe.length),he=0;0==de&&he<ge;he++){var ie=ee[he]||"",je=fe[he]||"";do{var ke=/(\\d*)(\\D*)(.*)/.exec(ie)||["","","",""],le=/(\\d*)(\\D*)(.*)/.exec(je)||["","","",""];if(0==ke[0].length&&0==le[0].length)break;de=Bc(0==ke[1].length?0:parseInt(ke[1],10),0==le[1].length?0:parseInt(le[1],10))||Bc(0==ke[2].length,0==le[2].length)||Bc(ke[2],le[2]);
ie=ke[3];je=le[3]}while(0==de)}ce=ed["9"]=0<=de}be=!ce}var me=be,ne=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{p.addEventListener("test",ma,b),p.removeEventListener("test",ma,b)}catch(c){}return a}();function oe(a,b){K.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.b=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(Yc){a:{try{Uc(b.nodeName);var e=!0;break a}catch(f){}e=
!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=
a.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:pe[a.pointerType]||"";this.b=a;a.defaultPrevented&&this.c()}}wa(oe,K);var pe={2:"touch",3:"pen",4:"mouse"};oe.prototype.stopPropagation=function(){oe.U.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};
oe.prototype.c=function(){oe.U.c.call(this);var a=this.b;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,me)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var qe="closure_lm_"+(1E6*Math.random()|0),re={},se=0;function te(a,b,c,d,e){if(d&&d.once)ue(a,b,c,d,e);else if("array"==na(b))for(var f=0;f<b.length;f++)te(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!1,oa(d)?!!d.capture:!!d,e):we(a,b,c,!1,d,e)}
function we(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=oa(e)?!!e.capture:!!e,h=xe(a);h||(a[qe]=h=new Xd(a));c=h.add(b,c,d,g,f);if(!c.proxy){d=ye();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)ne||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(ze(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");se++}}
function ye(){var a=Ae,b=ae?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function ue(a,b,c,d,e){if("array"==na(b))for(var f=0;f<b.length;f++)ue(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!0,oa(d)?!!d.capture:!!d,e):we(a,b,c,!0,d,e)}
function Be(a,b,c,d,e){if("array"==na(b))for(var f=0;f<b.length;f++)Be(a,b[f],c,d,e);else(d=oa(d)?!!d.capture:!!d,c=ve(c),a&&a[Td])?(a=a.b,b=String(b).toString(),b in a.a&&(f=a.a[b],c=Yd(f,c,d,e),-1<c&&(Wd(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.a[b],a.b--)))):a&&(a=xe(a))&&(b=a.a[b.toString()],a=-1,b&&(a=Yd(b,c,d,e)),(c=-1<a?b[a]:null)&&Ce(c))}
function Ce(a){if("number"!==typeof a&&a&&!a.T){var b=a.src;if(b&&b[Td])Zd(b.b,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(ze(c),d):b.addListener&&b.removeListener&&b.removeListener(d);se--;(c=xe(b))?(Zd(c,a),0==c.b&&(c.src=null,b[qe]=null)):Wd(a)}}}function ze(a){return a in re?re[a]:re[a]="on"+a}
function De(a,b,c,d){var e=!0;if(a=xe(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.T&&(f=Ee(f,d),e=e&&!1!==f)}return e}function Ee(a,b){var c=a.listener,d=a.ha||a.src;a.da&&Ce(a);return c.call(d,b)}
function Ae(a,b){if(a.T)return!0;if(!ae){if(!b)a:{b=["window","event"];for(var c=p,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new oe(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.a&&0<=e;e--){b.currentTarget=d[e];var f=De(d[e],a,!0,b);c=c&&f}for(e=0;!b.a&&e<d.length;e++)b.currentTarget=
d[e],f=De(d[e],a,!1,b),c=c&&f}return c}return Ee(a,new oe(b,this))}function xe(a){a=a[qe];return a instanceof Xd?a:null}var Fe="__closure_events_fn_"+(1E9*Math.random()>>>0);function ve(a){if(r(a))return a;a[Fe]||(a[Fe]=function(b){return a.handleEvent(b)});return a[Fe]};function N(){J.call(this);this.b=new Xd(this);this.j=this;this.i=null}wa(N,J);N.prototype[Td]=!0;l=N.prototype;l.B=function(){return this.i};l.la=function(a){this.i=a};l.addEventListener=function(a,b,c,d){te(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){Be(this,a,b,c,d)};
l.dispatchEvent=function(a){var b,c=this.B();if(c)for(b=[];c;c=c.B())b.push(c);c=this.j;var d=a.type||a;if("string"===typeof a)a=new K(a,c);else if(a instanceof K)a.target=a.target||c;else{var e=a;a=new K(d,c);Ba(a,e)}e=!0;if(b)for(var f=b.length-1;!a.a&&0<=f;f--){var g=a.currentTarget=b[f];e=g.N(d,!0,a)&&e}a.a||(g=a.currentTarget=c,e=g.N(d,!0,a)&&e,a.a||(e=g.N(d,!1,a)&&e));if(b)for(f=0;!a.a&&f<b.length;f++)g=a.currentTarget=b[f],e=g.N(d,!1,a)&&e;return e};
l.v=function(){N.U.v.call(this);this.b&&this.b.S(void 0);this.i=null};l.N=function(a,b,c){a=this.b.a[String(a)];if(!a)return!0;a=a.concat();for(var d=!0,e=0;e<a.length;++e){var f=a[e];if(f&&!f.T&&f.capture==b){var g=f.listener,h=f.ha||f.src;f.da&&Zd(this.b,f);d=!1!==g.call(h,c)&&d}}return d&&0!=c.ab};t("H.util.EventTarget",N);N.prototype.la=N.prototype.la;N.prototype.setParentEventTarget=N.prototype.la;N.prototype.B=N.prototype.B;N.prototype.getParentEventTarget=N.prototype.B;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.dispatchEvent=N.prototype.dispatchEvent;
N.prototype.dispatchEvent=N.prototype.dispatchEvent;N.prototype.s=N.prototype.s;N.prototype.dispose=N.prototype.s;N.prototype.L=N.prototype.L;N.prototype.addOnDisposeCallback=N.prototype.L;N.prototype.P=N.prototype.N;
N.prototype.N=function(a,b,c){var d,e,f=!0;var g=c[c.currentTarget===c.target?"AT_TARGET":b?"CAPTURING_PHASE":(d=!0,"BUBBLING_PHASE")];if(!d||"pointerenter"!==(e=c.type)&&"pointerleave"!==e)c.eventPhase=g,f=N.prototype.P.apply(this,arguments),d&&this.B&&null===this.B()&&delete c.eventPhase;return f};N.prototype.Yb=function(a){for(var b,c=this;c&&(b=c.B())&&b!==a;)c=b;b||c.la(a)};N.prototype.setRootParentEventTarget=N.prototype.Yb;function Q(a){a=a||{};var b=a.callback;this.g=a.label;r(b)&&(this.callback=b);this.f=!!a.disabled;Q.U.constructor.call(this)}wa(Q,N);t("H.util.ContextItem",Q);Q.prototype.zb=function(){return this.g};Q.prototype.getLabel=Q.prototype.zb;Q.prototype.Xb=function(a){this.g!==a&&(this.g=a,this.dispatchEvent("update"));return this};Q.prototype.setLabel=Q.prototype.Xb;Q.prototype.Ob=function(){return this.f};Q.prototype.isDisabled=Q.prototype.Ob;
Q.prototype.Wb=function(a){a!==this.f&&(this.f=a,this.dispatchEvent("update"));return this};Q.prototype.setDisabled=Q.prototype.Wb;var Ge=new Q;Q.SEPARATOR=Ge;function Ie(a){if(Ca.document){var b=document.createElement("canvas");b.width=b.height=1;b.getContext("2d",{lc:a})}}t("H.util.getPixelRatio",function(){return window.devicePixelRatio||1});Object.create(Ia,void 0);t("H.util.eval",function(a){return eval(a)});t("H.util.provide",function(a){var b=p.$jscomp;if(b&&("function"!=typeof b.wb?0:b.wb()))throw Error("goog.provide cannot be used within a module.");la(a,void 0)});function Je(){this.m=0}
Je.prototype.next=function(a){if(9007199254740992===this.m)throw new Sd(a,this.m,[0,9007199254740991]);return this.m++};var Ke=new Je;Fa(Ke.next,Ke);function mc(){}var mb=Ha([]);Ha({});Ie(!0);Ie(!1);function Le(a,b,c){var d=Nb(+a,-90,90);if(b&&Ra(d))throw new y(b,c,a);return d}function Me(a,b,c){var d=+a;if(-180>d||180<d)d=Mb(d+180,360)-180;if(b&&Ra(d))throw new y(b,c,a);return d}function Ne(a,b,c){var d;if(a!==x&&Ra(d=+a)&&b)throw new y(b,c,a);return d}t("H.geo.isDBC",function(a,b){return 0>a!==0>b&&180<sb(b-a)});function R(){var a=R;if(!0===(Na(this,a)&&this.constructor===a))throw new TypeError("Illegal constructor "+Ua(a));}t("H.geo.AbstractGeometry",R);R.prototype.getBoundingBox=R.prototype.X;R.prototype.equals=R.prototype.F;R.prototype.oa="";R.prototype.va="";R.prototype.toString=function(){return this.eb([this.oa.toUpperCase()," "]).join("")};R.prototype.toString=R.prototype.toString;R.prototype.$b=function(){return{type:this.va,coordinates:this.cb()}};R.prototype.toGeoJSON=R.prototype.$b;
R.prototype.ta=function(){return{type:this.oa,coordinates:this.ua(),boundingBox:this.X().ta()}};R.prototype.forWorkerMessage=R.prototype.ta;function S(a,b,c){this.lat=Le(a,S,0);this.lng=Me(b,S,1);c!==x&&(this.alt=Ne(c,S,2))}wa(S,R);t("H.geo.Point",S);S.prototype.F=function(a){return this===a||!!a&&this.lat===a.lat&&this.lng===a.lng&&(this.alt||0)===(a.alt||0)};S.prototype.equals=S.prototype.F;S.prototype.ra=function(a){if(this===a||this.lat===a.lat&&this.lng===a.lng)a=0;else{var b=this.lat*Ib;var c=a.lat*Ib;a=1.274200158E7*yb(nb(1,ub(vb(xb((b-c)/2),2)+zb(b)*zb(c)*vb(xb((this.lng*Ib-a.lng*Ib)/2),2))))}return a};
S.prototype.distance=S.prototype.ra;
S.prototype.dc=function(a,b,c){var d;if(c){if(d=b/6371000.79){b=a*Ib;a=Ib*this.lat;var e=xb(a);c=xb(d);var f=zb(d);d=Ib*this.lng;var g=zb(a);a=yb(g*zb(b)*c+e*f);b=Cb(xb(b)*g*c,f-e*xb(a));b=(d+b+E)%(2*E)-E;b*=Kb;e=new S(a*Kb,(b+540)%360-180)}return e||this}a=(a%360+360)%360;if(0===(a+90)%180)return a=this.lng+b/(6371000.79*Gb*zb(this.lat*Ib))*(270===a?-360:360),new S(this.lat,(a+540)%360-180);if(b/=6371000.79)a*=Ib,e=this.lat*Ib,c=this.lng*Ib,d=e+b*zb(a),f=d-e,g=tb(Ab(d/2+Fb)/Ab(e/2+Fb)),g=Ra(f/g)?
zb(e):f/g,a=b*xb(a)/g,sb(d)>Eb&&(d=0<d?E-d:-(E+d)),d=new S(d*Kb,((c+a+Hb+(sb(e+f)>Eb?E:0))%Gb-E)*Kb);return d||this};S.prototype.walk=S.prototype.dc;S.prototype.X=function(){return new V(this.lat,this.lng,this.lat,this.lng)};S.prototype.getBoundingBox=S.prototype.X;function Oe(a,b,c){var d=oa(a)&&!(Ra(a.lat=Le(a.lat))||Ra(a.lng=Me(a.lng))||a.alt!==x&&Ra(a.alt=Ne(a.alt)));if(!d&&b)throw new y(b,c,a);return d}S.validate=Oe;function Pe(a){if(!a)throw new y(Pe,0,a);return new S(a.lat,a.lng,a.alt)}
S.fromIPoint=Pe;l=S.prototype;l.oa="Point";l.eb=function(a){a.push("(",this.lng," ",this.lat,")");return a};l.va="Point";l.cb=function(){return[this.lng,this.lat,this.alt||0]};l.ua=function(){return[this.lat,this.lng,this.alt||0]};function Qe(){}function Re(a){return nb(1,ob(0,.5-tb(Ab(Fb+Eb*a/180))/E/2))}Qe.prototype.ia=function(a,b,c){c?(c.x=b/360+.5,c.y=Re(a)):c=new F(b/360+.5,Re(a));return c};Qe.prototype.latLngToPoint=Qe.prototype.ia;Qe.prototype.tb=function(a,b){return this.ia(a.lat,a.lng,b)};Qe.prototype.geoToPoint=Qe.prototype.tb;function Se(a){return 0>=a?90:1<=a?-90:Kb*(2*Bb(wb(E*(1-2*a)))-Eb)}Qe.prototype.V=function(a,b,c){c?(c.lat=Se(b),c.lng=360*(1===a?1:Mb(a,1))-180):c=new S(Se(b),360*(1===a?1:Mb(a,1))-180);return c};
Qe.prototype.xyToGeo=Qe.prototype.V;Qe.prototype.Tb=function(a,b){return this.V(a.x,a.y,b)};Qe.prototype.pointToGeo=Qe.prototype.Tb;var Te=new Qe;t("H.geo.mercator",Te);t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0);t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22);function W(a,b){this.projection=a||Te;this.b=0;this.a=this.exp=tb(b||256)/Db;Ue(this);this.y=this.x=0}t("H.geo.PixelProjection",W);var Ve=sb(24)+sb(-8);W.prototype.Vb=Te;W.prototype.projection=W.prototype.Vb;W.prototype.x=0;W.prototype.x=W.prototype.x;W.prototype.y=0;W.prototype.y=W.prototype.y;W.prototype.cc=vb(2,Ve);W.prototype.w=W.prototype.cc;W.prototype.Jb=vb(2,Ve);W.prototype.h=W.prototype.Jb;
W.prototype.ba=function(a){if(Ra(a))throw new y(this.ba,0,a);var b=this.x/this.w;var c=this.y/this.h;this.b=a;this.a=this.exp+a;Ue(this);this.x=b*this.w;this.y=c*this.h};W.prototype.rescale=W.prototype.ba;function Ue(a){a.a>Ve&&(a.a=Ve);a.w=vb(2,a.a);a.h=vb(2,a.a)}W.prototype.Ta=function(){return this.b||0};W.prototype.getZoomScale=W.prototype.Ta;W.prototype.sb=function(a,b){a=this.projection.ia(a.lat,a.lng,b);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};W.prototype.geoToPixel=W.prototype.sb;
W.prototype.Fa=function(a,b){return this.projection.V((a.x+this.x)/this.w,(a.y+this.y)/this.h,b)};W.prototype.pixelToGeo=W.prototype.Fa;W.prototype.V=function(a,b,c){return this.projection.V((a+this.x)/this.w,(b+this.y)/this.h,c)};W.prototype.xyToGeo=W.prototype.V;W.prototype.Ba=function(a,b,c){a=this.projection.ia(a,b,c);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};W.prototype.latLngToPixel=W.prototype.Ba;W.prototype.Ub=function(a){return new F(a.x*this.w-this.x,a.y*this.h-this.y)};
W.prototype.pointToPixel=W.prototype.Ub;t("H.util.Disposable",J);J.prototype.L=J.prototype.L;J.prototype.addOnDisposeCallback=J.prototype.L;t("H.util.dispose",function(a){a&&"function"==typeof a.s&&a.s()});J.prototype.s=J.prototype.s;J.prototype.dispose=J.prototype.s;J.prototype.v=J.prototype.v;J.prototype.disposeInternal=J.prototype.v;function We(a,b,c,d){if(!a||!b||!c)throw new y(We,x,"Must specify name, version and revision parameter");this.name=a;this.version=b;this.revision=c;d&&Ba(this,d)}t("H.util.BuildInfo",We);We.prototype.toString=function(){var a,b=[];for(a in this)Qa(this[a])&&b.push(this[a]);return b.join(";")};var Xe={};function Ye(a,b,c,d){if(!a)throw new y(Ye,1,"Must specify a name parameter");return Xe[a]||(Xe[a]=new We(a,b,c,d))}We.get=Ye;function Y(a,b,c,d,e,f){if(a&&b)this.Ka(a),this.ka(b),this.Ia(c),this.Ja(e),this.bb(f),this.ma(d);else throw new y(Y,x,'Parameters "scheme" and "host" must be specified');}t("H.service.Url",Y);
function Ze(a,b){var c=Ca.document,d;var e="";if(c){e=c.createElement("a");if(b){var f=(d=c.getElementsByTagName("base")[0])&&d.href;var g=c.head;var h=d||g.appendChild(c.createElement("base"));h.href=b}e.href=a;e=e.href;b&&(d?d.href=f:g.removeChild(h))}else/[\\w]+:\\/\\//.test(a)&&(e=a);f=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(e);a=f[1];g=f[4];b=f[5];h=f[6];c=f[7];d=f[8];!f[2]&&g&&/@/.test(g)&&(g=g.split("@")[1]);f=Y;h=h&&0<h.length?h.substr(1):
"";e={};var k,m;if(c)for(k=/([?&]?([^=&+]+))(=([^&]+))?/g;m=k.exec(c);)e[decodeURIComponent(m[2])]=m[4]?decodeURIComponent(m[4]):void 0;return new f(a,g,h,e,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):"")}Y.parse=Ze;Y.prototype.clone=function(){var a={},b;for(b in this.a)a[b]=this.a[b];return new Y(this.i,this.g,this.b,a,this.f,this.c)};Y.prototype.clone=Y.prototype.clone;
Y.prototype.Ka=function(a){if(!a||"string"!==typeof a)throw new y(this.Ka,0,'The "scheme" parameter must be a non-empty string.');this.i=a;return this};Y.prototype.setScheme=Y.prototype.Ka;Y.prototype.Gb=function(){return this.i};Y.prototype.getScheme=Y.prototype.Gb;Y.prototype.ka=function(a){if(!a||"string"!==typeof a||"-"===a.charAt(0)||"."===a.charAt(0)||"."===a.charAt(a.length-1))throw new y(this.ka,0,'The "host" parameter is not a valid host name.');this.g=a;return this};
Y.prototype.setHost=Y.prototype.ka;Y.prototype.yb=function(){return this.g};Y.prototype.getHost=Y.prototype.yb;Y.prototype.Ia=function(a){this.b=a||void 0;return this};Y.prototype.setPath=Y.prototype.Ia;Y.prototype.Db=function(){return this.b};Y.prototype.getPath=Y.prototype.Db;Y.prototype.ma=function(a){if(a)if("object"==typeof a)this.a=a;else throw new y(this.ma,0,'Parameter "params" must be an object.');else this.a={};return this};Y.prototype.setQuery=Y.prototype.ma;Y.prototype.Kb=function(){return!$e(this)};
Y.prototype.hasQuery=Y.prototype.Kb;Y.prototype.getQuery=function(){return this.a};Y.prototype.getQuery=Y.prototype.getQuery;Y.prototype.Ja=function(a){if(void 0===a)this.f=a;else{var b=Nb(+a<<0,0,65535);if(b!=a)throw new y(this.Ja,0,'Parameter "port" must be an integer in range [0...65535]');this.f=b}return this};Y.prototype.setPort=Y.prototype.Ja;Y.prototype.Eb=function(){return this.f};Y.prototype.getPort=Y.prototype.Eb;Y.prototype.bb=function(a){this.c=a||void 0;return this};
Y.prototype.setAnchor=Y.prototype.bb;Y.prototype.ub=function(){return this.c};Y.prototype.getAnchor=Y.prototype.ub;Y.prototype.R=function(a){if("object"!==typeof a)throw new y(this.R,0,'Parameter "other" must be an object.');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&"function"!==typeof a[c]&&(b[c]=a[c]);return this};Y.prototype.mergeQuery=Y.prototype.R;
Y.prototype.Na=function(a){if(!a||"string"!==typeof a)throw new y(this.Na,0,'Parameter "subDomain" must be a non-empty string');"."===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.ka(a+"."+this.g)};Y.prototype.addSubDomain=Y.prototype.Na;Y.prototype.Oa=function(a){if(!a||"string"!==typeof a)throw new y(this.Oa,0,'Parameter "subPath" must be a non-empty string');return this.Ia((this.b?this.b+"/":"")+a)};Y.prototype.addSubPath=Y.prototype.Oa;
Y.prototype.toString=function(){return[this.i+"://",this.g,this.f?":"+this.f:"",this.b||!$e(this)||this.c?"/":"",this.b?encodeURI(this.b):"",af(this),this.c?"#"+encodeURIComponent(this.c):""].join("")};Y.prototype.toString=Y.prototype.toString;function bf(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(b){return"%"+b.charCodeAt(0).toString(16)})}
function af(a){var b=[],c=a.a,d={},e;for(e in c){if(c.hasOwnProperty(e)&&"function"!==typeof c[e]){var f=a.a[e];d.K=bf(e);Na(f,cf)?f.a.forEach(function(g){return function(h){b.push(g.K+"="+bf(h))}}(d)):Na(f,df)?b.push(d.K+"="+f.b.map(function(g){return bf(g)}).join(f.a)):b.push(void 0===f?d.K:d.K+"="+bf(f))}d={K:d.K}}return 0<b.length?"?"+b.join("&"):""}function $e(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&"function"!==typeof a.a[b]&&(c++,0<c))break;return!c}
function ef(a,b){if(Oa(a,void 0,void 0,void 0))for(var c=0;c<a.length;c++){var d=a[c];if(!Qa(d)&&!Sa(d)){var e="The Array does not contain only strings and numbers";break}}else e="Not an Array";if(e)throw new y(b,0,a);return a}function cf(a){this.a=ef(a,cf)}Y.MultiValueQueryParameter=cf;cf.prototype.Ib=function(){return this.a};cf.prototype.getValues=cf.prototype.Ib;function df(a,b){this.b=ef(a,df);if(!/^[!\\$\\(\\)\\*\\+,;]$/.test(b))throw new y(df,1,'Invalid delimiter "'+b+'"');this.a=b}
Y.DelimitedQuerySubValues=df;var ff={};function gf(a){try{importScripts.apply(self,arguments)}catch(b){this.postError("invalid_script")}}function hf(a){delete ff[a];this.postMessage(a)}function jf(a,b,c){if(r(b))var d=b;else try{d=self.eval("("+b+")"),r(d)||(d=null)}catch(e){}d?(ff[a]=d,c||this.postMessage(a)):this.postError("invalid_processor")}function kf(a){this.b=a&&a[0];this.a=a&&a[1];this.c=a&&a[2]||[]}kf.prototype.postError=function(a){this.postMessage(a,x,0)};
kf.prototype.postMessage=function(a,b,c){self.postMessage({processor:this.b,taskId:this.a,type:c===x?1:c,data:a},b||x)};function lf(a,b,c){if(!Qa(a))throw new y(lf,0,"InvalidArgument");if(!r(b))throw new y(lf,1,"InvalidArgument");var d=mf++;nf[d]={mimeType:c||of,ob:b};(new kf(["3",d,[]])).postMessage(a,[],2)}var nf={},mf=0;
function pf(a,b){var c=a;if(nf[this.a]){var d=nf[this.a];var e=d.ob;delete nf[this.a];if(b)e(null,b);else{if(d.mimeType===qf){a=new Uint8Array(a);b=a.byteLength;d="";c=0;for(var f,g,h,k;c<b;)f=a[c++],192>f||(g=a[c++],224>f?f=(f&31)<<6|g&63:(h=a[c++],240>f?f=(f&15)<<12|(g&63)<<6|h&63:(k=a[c++],f=(f&7)<<18|(g&63)<<12|(h&63)<<6|k&63))),65536>f?d+=String.fromCharCode(f):(f-=65536,d+=String.fromCharCode((f>>10)+55296,(f&1023)+56320));c=d}e(c)}}}var of=0,qf=1;function V(a,b,c,d){rf(this,Le(a,V,0),Me(b,V,1),Le(c,V,2),Me(d,V,3))}wa(V,R);t("H.geo.Rect",V);V.prototype.oa="Polygon";V.prototype.eb=function(a){var b=this.f,c=this.a,d=this.c,e=this.b;a.push("(","(",c," ",b,",",e," ",b,",",e," ",d,",",c," ",d,",",c," ",b,")",")");return a};V.prototype.F=function(a){var b=this===a;!b&&Na(a,V)&&(b=this.f===a.f&&this.a===a.a&&this.c===a.c&&this.b===a.b);return b};V.prototype.equals=V.prototype.F;
V.prototype.clone=function(){return new V(this.f,this.a,this.c,this.b)};V.prototype.clone=V.prototype.clone;function rf(a,b,c,d,e){a.a=c;a.b=e;b<d&&(c=b,b=d,d=c);a.f=b;a.c=d;a.j=a.g=a.i=null;return a}V.prototype.Sa=function(){this.j||(this.j=new S(this.f,this.a));return this.j};V.prototype.getTopLeft=V.prototype.Sa;V.prototype.Ra=function(){this.g||(this.g=new S(this.c,this.b));return this.g};V.prototype.getBottomRight=V.prototype.Ra;V.prototype.Hb=function(){return this.f};V.prototype.getTop=V.prototype.Hb;
V.prototype.vb=function(){return this.c};V.prototype.getBottom=V.prototype.vb;V.prototype.Ab=function(){return this.a};V.prototype.getLeft=V.prototype.Ab;V.prototype.Fb=function(){return this.b};V.prototype.getRight=V.prototype.Fb;V.prototype.G=function(){this.i||(this.i=new S(this.c+(this.f-this.c)/2,sf(this.a,this.I())));return this.i};V.prototype.getCenter=V.prototype.G;V.prototype.I=function(){return tf(this.a,this.b)};V.prototype.getWidth=V.prototype.I;
V.prototype.O=function(){return this.f-this.c};V.prototype.getHeight=V.prototype.O;V.prototype.Nb=function(){return this.a>this.b};V.prototype.isCDB=V.prototype.Nb;V.prototype.Pb=function(){return!this.I()&&!this.O()};V.prototype.isEmpty=V.prototype.Pb;V.prototype.X=function(){return new V(this.f,this.a,this.c,this.b)};V.prototype.getBoundingBox=V.prototype.X;
V.prototype.ea=function(a,b,c){var d=this.G();c||(a=Le(a,this.ea,0),b=Me(b,this.ea,1));b=this.J(a,b,c);a=b.G();return a.lat===d.lat&&a.lng===d.lng&&this.O()===b.O()&&this.I()===b.I()};V.prototype.containsLatLng=V.prototype.ea;V.prototype.fa=function(a,b){b||Oe(a,this.fa,0);return this.ea(a.lat,a.lng,b)};V.prototype.containsPoint=V.prototype.fa;
V.prototype.Qa=function(a,b){var c=this.G();if(!b&&!Na(a,V))throw new y(this.Qa,0,a);b=this.ja(a,b);a=b.G();return a.lat===c.lat&&a.lng===c.lng&&this.O()===b.O()&&this.I()===b.I()};V.prototype.containsRect=V.prototype.Qa;V.prototype.J=function(a,b,c,d){if(!c){if(Ra(a=Le(a)))throw new y(this.J,0,a);if(Ra(b=Me(b)))throw new y(this.J,1,b);}return uf(this.f,this.a,this.c,this.b,a,b,a,b,d)};V.prototype.mergeLatLng=V.prototype.J;
V.prototype.Ya=function(a,b,c){b||Oe(a,this.Ya,0);return this.J(a.lat,a.lng,b,c)};V.prototype.mergePoint=V.prototype.Ya;V.prototype.ja=function(a,b,c){if(!b&&!Na(a,V))throw new y(this.ja,0,a);return uf(this.f,this.a,this.c,this.b,a.f,a.a,a.c,a.b,c)};V.prototype.mergeRect=V.prototype.ja;V.prototype.$=function(a,b,c,d,e,f){e||(a=Le(a,this.$,0),b=Me(b,this.$,1),c=Le(c,this.$,2),d=Me(d,this.$,3));return uf(this.f,this.a,this.c,this.b,a,b,c,d,f)};V.prototype.mergeTopLeftBottomRight=V.prototype.$;
V.prototype.Va=function(a,b){var c=this.a<=this.b,d=a.a<=a.b,e=this.a<a.b,f=a.a<this.b;if(!b&&!Na(a,V))throw new y(this.Va,0,a);return this.c<=a.f&&a.c<=this.f&&(!c&&(!d||e||f)||!d&&(e||f)||e&&f)};V.prototype.intersects=V.prototype.Va;function tf(a,b){a=b-a;return a+(0>a?360:0)}function sf(a,b){a+=b/2;return a-(180<a?360:0)}
function uf(a,b,c,d,e,f,g,h,k){c=nb(c,g);a=ob(a,e);e=tf(b,d);var m=sf(b,e);g=tf(f,h);var n=sf(f,g)-m;n+=0>n-1E-6?360:0;if(180>n-1E-6){m=b;var q=h}else n=360-n,m=f,q=d;n=n+e/2+g/2;360<=n+5E-7?(m=-180,q=180):n-5E-7<e?(m=b,q=d):n-5E-7<g&&(m=f,q=h);return k?rf(k,a,m,c,q):new V(a,m,c,q)}V.merge=uf;function vf(a,b,c){c||(Oe(a,vf,0),Oe(b,vf,1));return new V(a.lat,a.lng,b.lat,b.lng)}V.fromPoints=vf;
function wf(a,b){var c=1,d=a.length,e=null;var f=na(a);if("array"!=f&&("object"!=f||"number"!=typeof a.length))throw new y(wf,0,a);if(0<d)for(f=a[0],e=vf(f,f,b);c<d;c++)f=a[c],e.J(f.lat,f.lng,b,e);return e}V.coverPoints=wf;function xf(a,b){var c=3,d=a.length,e;if(!(b||a&&null!=a.length))throw new y(xf,0,a);if(0<d)for(e=new V(a[0],a[1],a[0],a[1]);c<d;c+=3)e.J(a[c],a[c+1],b,e);return e}V.coverLatLngAlts=xf;
function yf(a,b){var c=1,d=a.length,e;if(b&&(!a||null==a.length))throw new y(yf,0,a);if(0<d)for(e=new V(a[0].f,a[0].a,a[0].c,a[0].b);c<d;c++)e.ja(a[c],b,e);return e}V.coverRects=yf;
V.prototype.$a=function(a,b){var c=this.a,d=this.f,e=this.b,f=this.c,g=this.G().lng;Oe(a,this.$a,0);var h=a.lat-f-(d-f)/2;var k=a.lng-g;k=180<k||-180>k?-(g+a.lng):k;a=c+(0>k?2*k:0);a=-180>a?360+a:a;e+=0<k?2*k:0;e=180<e?e-360:e;d=0<h?d+2*h:d;90<=d&&(d=90);f=0>h?f+2*h:f;-90>=f&&(f=-90);return b?rf(b,d,a,f,e):new V(d,a,f,e)};V.prototype.resizeToCenter=V.prototype.$a;V.prototype.va="Polygon";
V.prototype.cb=function(){return[[this.a,this.f,0],[this.b,this.f,0],[this.b,this.c,0],[this.a,this.c,0],[this.a,this.f,0]]};V.prototype.ta=function(){return this.ua()};V.prototype.ua=function(){return[this.f,this.a,this.c,this.b]};function zf(a,b,c,d){this.key="";this.x=a;this.y=b;this.b=c;this.Y=d;this.a=Ad()}zf.prototype.then=function(a,b,c){return this.a.a.then(a,b,c)};zf.prototype.reject=function(a){this.a.reject(a)};zf.prototype.cancel=function(){this.a.a.cancel()};zf.prototype.cancel=zf.prototype.cancel;function Af(a,b,c,d){var e=!!c,f,g=0,h=0,k=0,m=0,n=0,q,u=-1;var I=Ca.Float32Array;var L,w=[];if(b){b=Ja(b);a=Ja(a);e&&(f=Ja(c));c=b.length;d=d?1E-7:1E-5;for(L=new I(3*c);g<c;){I=b[g];var G=+I;var X=+a[g];e&&(q=+f[g]);Bf.test(I)?0<=u&&(0<g-u&&w.push(u,g+1),u=-1):0>u&&(u=g);g++;m=L[h++]=m+X*d;k=L[h++]=k+G*d;e&&(n=L[h]=n+q);h++}0<=u&&1<c-u&&w.push(u,c)}else L=new I(0);return{path:L,outlineIndices:w}}var Bf=/^-?0\\d/;
function Cf(a,b){for(var c=0,d=a.length/3,e=new Ca.Array(d),f=0;c<d;)e[c++]=b.Ba(a[f],a[++f]),f+=2;return e};function Df(a,b){b=180/(1<<b);var c=a.lat+90;a=(a.lng+180)%360;var d=0;180==c&&d--;d+=Math.floor(c/b);return[d,Math.floor(a/b)]}var Ef=1/Math.pow(10,10);function Ff(a,b){var c=[],d=a.Sa();a=a.Ra();var e;180==a.lng&&(a.lng-=Ef);d=Df(d,b);a=Df(a,b);for(e=d[0];e>=a[0];e--)for(b=d[1];b<=a[1];b++)c.push(e,b);return c};function Gf(a,b){var c=a.tileSize||256;this.b={};this.j=Ze(a.serverUrl);this.g=b;this.fb=a.layerConfigs||[];this.i=a.projected;this.P=c;this.Ea=!1!==a.batchTiles;this.bc=a.horizontalMargin||0;this.gb=a.onlyOutline;this.ib=new W(x,c);this.f=new W(x,c);this.f.ba(22-Math.log(c)/Math.LN2+8)}wa(Gf,J);
Gf.prototype.kb=function(a,b,c){var d=this.P,e=this.bc,f={x:a*d-e,y:b*d};d={x:(a+1)*d-1+e,y:(b+1)*d-1};e=this.ib;e.ba(c);f=e.Fa(f);d=e.Fa(d);return Hf(this,new V(f.lat,f.lng,d.lat,d.lng),this.fb,{x:a,y:b,z:c})};Gf.prototype.jb=function(a,b,c,d,e){return Hf(this,new V(a,b,c,d),e)};
function Hf(a,b,c,d){var e=If(c),f=e.length,g={},h,k=a.b,m=[],n=[];for(c=0;c<f;c++){var q=e[c];var u=q.layerId;var I=q.level;g[u]=q.columns;q=Ff(b,I);var L=q.length-1;for(h=0;h<L;h+=2){var w=[u,q[h+1],q[h],I].join("_");var G=k[w]||a.g.get(w);G||(G=new zf(q[h+1],q[h],I,u),G.key=w,k[w]=G,n.push(G));m.push(G)}}n.length&&(a.Ea?Jf(a,n):Kf(a,n));return zd(m.map(function(X){return X.then(Fa(this.Ga,this,X.Y,Lf(e))).then(Fa(this.hb,this,X,d||Mf)).then(Fa(this.ac,this,g[X.Y]))},a))}var Mf={x:0,y:0,z:0};
Gf.prototype.Ga=function(a,b,c){var d=c.Rows,e=d.length,f,g;if(e&&(f=b[a])){b=new C(c.Rows);var h=[];for(g=0;g<e;g++){var k=d[g];f(b.ga(g),a)&&h.push(k)}a={Rows:h};if(c=c.Meta)a.Meta=c}else a=c;return a};function Kf(a,b){function c(k,m,n){n?(delete a.b[k.key],k.reject(n)):Nf(a,k,m)}var d,e=b.length,f=a.j;for(d=0;d<e;d++){var g=b[d];var h=f.clone().R({tilex:g.x}).R({tiley:g.y}).R({level:g.b}).R({layer:g.Y});new lf(h.toString(),Fa(c,null,g),qf)}}
function Jf(a,b){var c=b.length,d;for(d=0;d<c;d+=15){var e=b.slice(d,d+15);Of(a,e)}}function Of(a,b){var c=a.j.clone(),d=[],e=[],f=[],g=c.getQuery();b.length&&(b.forEach(function(h){d.push(h.x,h.y);e.push(h.b);f.push(h.Y)}),g.tilexy=d.join(","),g.layers=f.join(","),g.levels=e.join(","),c.ma(g),new lf(c.toString(),function(h,k){k?b.forEach(function(m){delete a.b[m.key];m.reject("error")}):Nf(a,b,h)},qf))}
function Nf(a,b,c){var d=b.length,e;if(Oa(b,void 0,void 0,void 0)){var f=c.indexOf("[")+1;for(e=0;e<d;e++){var g=c.indexOf("]},{",f+3)+2;g<f&&(g=c.lastIndexOf("]}"));var h=c.substr(f,g-f);f=g+1;Pf(a,b[e],h)}}else Pf(a,b,c)}function Pf(a,b,c){try{var d=c.length;var e=b.key;delete a.b[e];a.g.add(e,b,2*d);var f=JSON.parse(c);b.a.b(f)}catch(g){b.reject(g.message)}}
function Lf(a){var b={},c,d=a.length;for(c=0;c<d;c++){var e=a[c];if(e.rowFilter){var f=e.layerId;f=f!==x?f:e.layer;b[f]=Fa(e.rowFilter,e.rowFilterContext)}}return b}function Qf(a,b,c,d,e){return e?[new F(a,b),new F(c,b),new F(c,d),new F(a,d),new F(a,b)]:[a,b,c,b,c,d,a,d]}
Gf.prototype.hb=function(a,b,c){var d=this.f.Ta()-b.z,e=this.P<<d,f=50<<d,g=b.x*e;b=b.y*e;var h=g+e;e=b+e;var k=g-f,m=b-f,n=h+f;f=e+f;var q,u,I=c.Rows,L=I.length,w,G=/^ADAS/.test(a.Y),X=this.f,qa=this.gb,O,bb=[],Ka=[],La=[],cb=[];for(a=0;a<L;a++){var z=w=I[a];var T=(O=G)?"HPY":"LAT";var U=O?"HPX":"LON";var da=O?"HPZ":"ZLEVEL";if(z[T]){var P=Af(z[T],z[U],z[da],O);z.geometry=P;delete z[T];delete z[U];delete z[da];if(z.INNER_LAT)for(T=z.INNER_LAT.split(";"),P=z.INNER_LON.split(";"),delete z.INNER_LAT,
delete z.INNER_LON,z.interiors=da=[],U=T.length,z=0;z<U;z++)da.push(Af(T[z],P[z],"",O))}if(this.i){U=w;z=X;P=U.$$projected$$;T=0;if(!P){var Z=U.geometry;O=Cf(Z.path,z);w=[O];U.$$projected$$=P={Sb:w};U=(da=U.interiors)?da.length:0;w.length+=U;T|=+Rf(w,O,Z.outlineIndices);if(U)for(P.Lb=1,q=0;q<U;q++)Z=da[q],O=Cf(Z.path,z),w[1+q]=O,T|=+Rf(w,O,Z.outlineIndices);T&&(P.Qb=1+U)}z=P;O=z.Sb;w=z.Lb;var Fc=z.Qb;P=[];T=U=Lb;var db=da=x;z=O[0];if(1===z.length){var Gc=Gc||(Gc=Qf(g,b,h,e,!1));w=z[0];Rb(w.x,w.y,
Gc)&&P.push(Sf(z,g,b,d))}else{var He=O.length;for(Z=qa?Fc:0;Z<He&&(qa||!Z||P.length);Z++)if(z=O[Z],Z>=Fc){Z===Fc&&(T=P.length);var ia=Ub([z],k,m,n,f,!1);Tf(ia,g,b,d,P)}else{var Jb=Jb||(Jb=Qf(k,m,n,f,!0));if(Z>=w)if(Z===w&&(U=P.length),db)for(q=db.length;q--;){if(ia=Uf(db[q],z),u=ia.length){for(da=da||[];u--;)da.push(q);Tf(ia,g,b,d,P)}}else ia=Uf(Jb,z),Tf(ia,g,b,d,P);else if(ia=Uf(Jb,z),Tf(ia,g,b,d,P),1<ia.length&&w<He)for(db=[],q=ia.length;q--;)db[q]=ia[q]}}P.length&&(bb[a]=P,Ka[a]=U,La[a]=da,cb[a]=
T)}}return{Zb:c,pb:bb,Mb:Ka,rb:La,Rb:cb}};function Rf(a,b,c){for(var d=c.length,e=0,f,g,h=b.length;e<d;)f=c[e++],g=c[e++],a.push(g-f===h?b:b.slice(f,g));return 0<c.length}function Uf(a,b){var c,d=[];if(c=Wb(a,b)){do{a=[];b=c;do a.push(b);while(b=b.next);d.push(a)}while(c=c.Za)}else Sb(b[0],Tb(a))?d.push(b):Sb(a[0],Tb(b))&&d.push(a);return d}function Tf(a,b,c,d,e){for(var f=0,g=a.length;f<g;f++)e.push(Sf(a[f],b,c,d))}
function Sf(a,b,c,d){var e,f=a.length,g=new Int32Array(2*f),h=0;for(e=0;e<f;e++){var k=a[e];g[h++]=k.x-b>>d;g[h++]=k.y-c>>d}return g}
Gf.prototype.ac=function(a,b){var c=b.Zb,d=b.pb,e=b.Mb,f=b.Rb;b=b.rb;for(var g=[],h,k={Rows:g},m,n=a?a.length:0,q=0,u,I=c.Rows,L=I.length,w;q<L;q+=1)if(d[q]||!this.i){h={};u=I[q];if(n)for(m=0;m<n;m++)u.hasOwnProperty(a[m])&&(h[a[m]]=u[a[m]]);else for(w in u)"$$projected$$"!==w&&(h[w]=u[w]);u.geometry&&(h.geometry=u.geometry);m=void 0;var G,X=h,qa=d[q],O=e[q],bb=b[q],Ka=f[q],La=g;if(qa){var cb=qa.length;if(bb)for(G=O;G--;){if(G){var z={};for(m in X)z[m]=X[m]}else z=X;u=[qa[G]];var T=nb(cb,Ka)-O;for(h=
0;h<T;h++)bb[h]===G&&u.push(qa[O+h]);T=u.length;if(!G)for(h=Ka;h<cb;h++)u.push(qa[h]);z.$HProjGeometry={paths:u,interiorsIndex:1,outlinesIndex:T};La.push(z)}else X.$HProjGeometry={paths:qa,interiorsIndex:O,outlinesIndex:Ka},La.push(X)}else La.push(X)}c.Meta&&(k.Meta=c.Meta);return k};Gf.prototype.v=function(){var a,b=this.b;for(a in b)b.hasOwnProperty(a)&&(b[a].reject("disposed"),delete b[a])};Gf.prototype.disposeInternal=Gf.prototype.v;
function If(a){for(var b=[],c,d=a.length,e=0;e<d;e++){c=za(a[e]);if(c.rowFilter&&(c.rowFilter=eval("("+c.rowFilter+")"),!r(c.rowFilter)))throw Error("Invalid row filter for layer "+c.layerId);b.push(c)}return b};t("H.service.extension.worker.processor",function(a,b,c){function d(h){e.postMessage(h)}var e=this,f=ya[a];var g=function(h){e.postError(h.toString())};if(0===b)f||(ya[a]=new Gf(c,Vf)),this.postMessage(void 0);else if(f)switch(b){case 1:try{f.kb.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 2:try{f.jb.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 3:f.s();delete ya[a];xa()&&Vf.S();break;default:e.postError("Unsupported command")}});
var Vf=new A(26214400),ya=Object.create(Ia,void 0);function Wf(a,b,c){var d=a[b];a=a[b+1];this.Ua=[];this.La=0;this.b=b;this.a=[a-c,d-c,a+c,d+c]}Wf.prototype.fa=function(a,b){var c=a[b];a=a[b+1];b=this.a;return b[1]<=c&&c<=b[3]&&b[0]<=a&&a<=b[2]};Wf.prototype.G=function(){return this.b};var Xf=new F(0,0);function Yf(a,b,c,d,e){d[e]=b;d[e+1]=a}var Zf=new W;function $f(a,b,c,d,e){Zf.Ba(a,b,Xf);d[e]=Xf.x;d[e+1]=Xf.y}
t("H.clustering.dynamicgrid.worker",function(a,b,c,d,e){var f=e?Yf:$f,g=0;e=!!self.ArrayBuffer;var h=a.byteLength?new Float64Array(a):a,k=h.length/3;a=[];var m=[],n=[],q=e?new Float64Array(2*k):[];k=0;var u=0;for(Zf.ba(d);g<h.length;){var I=h[g++];var L=h[g++];var w=h[g++];f(w,L,d,q,u);for(w=a.length;w--;)if(L=a[w],L.fa(q,u)){var G=L;break}G||(G=new Wf(q,u,b),a.push(G));w=u/2;G.La+=I||1;G.Ua.push(w);G=null;u+=2}for(w=a.length;w--;)L=a[w],b=L.La>=c,f=L.Ua,d=f.length,b?(m.push(d),m=m.concat(f)):
(k+=d,n=n.concat(f));c=[k].concat(n,m);c=e?(new Uint32Array(c)).buffer:c;this.postMessage(c,[c])});self.addEventListener("message",function(a){a=new kf(a.data);var b=ff[a.b];if(b)try{b.apply(a,a.c)}catch(c){a.postError(c.message)}else a.postError("processor_not_found")});(function(){var a=new kf;var b=function(c,d){jf.apply(a,[c,d,!0])};b("0",gf);b("1",jf);b("2",hf);b("3",pf)})();
`,function(){var i=function(){var o,s,_e;typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope||!(typeof module<"u"&&module.exports||typeof window<"u")||(o=i.toString(),s="",_e=typeof document<"u"&&document.currentScript instanceof HTMLScriptElement?document.currentScript.src:""),function(){function _n(j){return _o.call(j).slice(8,-1)}var _o={}.toString,_a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _u(j,$){return j($={exports:{}},$.exports),$.exports}function _h(j){return j&&j.Math==Math&&j}function ty(j){try{return!!j()}catch{return!0}}function oy(j){return typeof j=="object"?j!==null:typeof j=="function"}function hy(j){return Jy?Ky.createElement(j):{}}function fy(j){if(!oy(j))throw TypeError(String(j)+" is not an object");return j}function vy(j,$){if(!oy(j))return j;var _r,_i;if($&&typeof(_r=j.toString)=="function"&&!oy(_i=_r.call(j))||typeof(_r=j.valueOf)=="function"&&!oy(_i=_r.call(j))||!$&&typeof(_r=j.toString)=="function"&&!oy(_i=_r.call(j)))return _i;throw TypeError("Can't convert object to primitive value")}function xy(j,$){return{enumerable:!(1&j),configurable:!(2&j),writable:!(4&j),value:$}}function wy(j,$){try{j0(Iy,j,$)}catch{Iy[j]=$}return $}function By(j){return"Symbol(".concat(j===void 0?"":j,")_",(++k1+h1).toString(36))}function Sy(j){return K1[j]||(K1[j]=r_&&h_[j]||(r_?h_:By)("Symbol."+j))}function Ay(j){var $,_r,_i;return j===void 0?"Undefined":j===null?"Null":typeof(_r=function(_s,ga){try{return _s[ga]}catch{}}($=Object(j),_0))=="string"?_r:Y0?_n($):(_i=_n($))=="Object"&&typeof $.callee=="function"?"Arguments":_i}var Py="object",Iy=_h(typeof globalThis==Py&&globalThis)||_h(typeof window==Py&&window)||_h(typeof self==Py&&self)||_h(typeof _a==Py&&_a)||Function("return this")(),$y=!ty(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),Ky=Iy.document,Jy=oy(Ky)&&oy(Ky.createElement),i0=!$y&&!ty(function(){return Object.defineProperty(hy("div"),"a",{get:function(){return 7}}).a!=7}),k0=Object.defineProperty,g0={f:$y?k0:function(j,$,_r){if(fy(j),$=vy($,!0),fy(_r),i0)try{return k0(j,$,_r)}catch{}if("get"in _r||"set"in _r)throw TypeError("Accessors not supported");return"value"in _r&&(j[$]=_r.value),j}},j0=$y?function(j,$,_r){return g0.f(j,$,xy(1,_r))}:function(j,$,_r){return j[$]=_r,j},V0=_u(function(j){var $="__core-js_shared__",_r=Iy[$]||wy($,{});(j.exports=function(_i,_s){return _r[_i]||(_r[_i]=_s!==void 0?_s:{})})("versions",[]).push({version:"3.1.0",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),k1=0,h1=Math.random(),r_=!ty(function(){return!String(Symbol())}),K1=V0("wks"),h_=Iy.Symbol,_0=Sy("toStringTag"),Y0=_n(function(){return arguments}())=="Arguments",N0={};N0[Sy("toStringTag")]="z";function a1(j,$){return t2.call(j,$)}function C1(j){return e2[j]||(e2[j]=By(j))}var n_,G1,G_,p_,M_,ex,f_,rx,N2=String(N0)!=="[object z]"?function(){return"[object "+Ay(this)+"]"}:N0.toString,t2={}.hasOwnProperty,nx=V0("native-function-to-string",Function.toString),qx=Iy.WeakMap,kE=typeof qx=="function"&&/native code/.test(nx.call(qx)),e2=V0("keys"),a_={},TE=Iy.WeakMap;f_=kE?(n_=new TE,G1=n_.get,G_=n_.has,p_=n_.set,M_=function(j,$){return p_.call(n_,j,$),$},ex=function(j){return G1.call(n_,j)||{}},function(j){return G_.call(n_,j)}):(rx=C1("state"),a_[rx]=!0,M_=function(j,$){return j0(j,rx,$),$},ex=function(j){return a1(j,rx)?j[rx]:{}},function(j){return a1(j,rx)});var I_={set:M_,get:ex,has:f_,enforce:function(j){return f_(j)?ex(j):M_(j,{})},getterFor:function(j){return function($){var _r;if(!oy($)||(_r=ex($)).type!==j)throw TypeError("Incompatible receiver, "+j+" required");return _r}}},hx=_u(function(j){var $=I_.get,_r=I_.enforce,_i=String(nx).split("toString");V0("inspectSource",function(_s){return nx.call(_s)}),(j.exports=function(_s,ga,_l,_c){var _p=!!_c&&!!_c.unsafe,_f=!!_c&&!!_c.enumerable,ey=!!_c&&!!_c.noTargetGet;typeof _l=="function"&&(typeof ga!="string"||a1(_l,"name")||j0(_l,"name",ga),_r(_l).source=_i.join(typeof ga=="string"?ga:"")),_s!==Iy?(_p?!ey&&_s[ga]&&(_f=!0):delete _s[ga],_f?_s[ga]=_l:j0(_s,ga,_l)):_f?_s[ga]=_l:wy(ga,_l)})(Function.prototype,"toString",function(){return typeof this=="function"&&$(this).source||nx.call(this)})}),Ix=Object.prototype;N2!==Ix.toString&&hx(Ix,"toString",N2,{unsafe:!0});function r2(j){return isNaN(j=+j)?0:(0<j?PA:AE)(j)}function n2(j){if(j==null)throw TypeError("Can't call method on "+j);return j}function v1(j){return pT(n2(j))}function px(j){return 0<j?fT(r2(j),9007199254740991):0}function j2(j,$){var _r,_i=v1(j),_s=0,ga=[];for(_r in _i)!a1(a_,_r)&&a1(_i,_r)&&ga.push(_r);for(;$.length>_s;)a1(_i,_r=$[_s++])&&(~jA(ga,_r)||ga.push(_r));return ga}function fx(j,$){var _r=RE[OE(j)];return _r==PE||_r!=LE&&(typeof $=="function"?ty($):!!$)}function W_(j,$){var _r,_i,_s,ga,_l=j.target,_c=j.global,_p=j.stat,_f=_c?Iy:_p?Iy[_l]||wy(_l,{}):(Iy[_l]||{}).prototype;if(_f)for(_r in $){if(_s=$[_r],_i=j.noTargetGet?(ga=o2(_f,_r))&&ga.value:_f[_r],!B2(_c?_r:_l+(_p?".":"#")+_r,j.forced)&&_i!==void 0){if(typeof _s==typeof _i)continue;(function(ey,iy){for(var ly=gT(iy),uy=g0.f,cy=ME.f,yy=0;yy<ly.length;yy++){var ay=ly[yy];a1(ey,ay)||uy(ey,ay,cy(iy,ay))}})(_s,_i)}(j.sham||_i&&_i.sham)&&j0(_s,"sham",!0),hx(_f,_r,_s,j)}}var K0,ix,D2,i2,AE=Math.ceil,PA=Math.floor,hT={}.propertyIsEnumerable,dx=Object.getOwnPropertyDescriptor,SE={f:dx&&!hT.call({1:2},1)?function(j){var $=dx(this,j);return!!$&&$.enumerable}:hT},NA="".split,pT=ty(function(){return!Object("z").propertyIsEnumerable(0)})?function(j){return _n(j)=="String"?NA.call(j,""):Object(j)}:Object,CE=Object.getOwnPropertyDescriptor,ME={f:$y?CE:function(j,$){if(j=v1(j),$=vy($,!0),i0)try{return CE(j,$)}catch{}if(a1(j,$))return xy(!SE.f.call(j,$),j[$])}},fT=Math.min,dT=Math.max,yT=Math.min,jA=(K0=!1,function(j,$,_r){var _i,_s,ga,_l=v1(j),_c=px(_l.length),_p=(_i=_c,(_s=r2(_r))<0?dT(_s+_i,0):yT(_s,_i));if(K0&&$!=$){for(;_p<_c;)if((ga=_l[_p++])!=ga)return!0}else for(;_p<_c;_p++)if((K0||_p in _l)&&_l[_p]===$)return K0||_p||0;return!K0&&-1}),z2=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],DA=z2.concat("length","prototype"),zA={f:Object.getOwnPropertyNames||function(j){return j2(j,DA)}},FA={f:Object.getOwnPropertySymbols},F2=Iy.Reflect,gT=F2&&F2.ownKeys||function(j){var $=zA.f(fy(j)),_r=FA.f;return _r?$.concat(_r(j)):$},IE=/#|\.prototype\./,OE=fx.normalize=function(j){return String(j).replace(IE,".").toLowerCase()},RE=fx.data={},LE=fx.NATIVE="N",PE=fx.POLYFILL="P",B2=fx,o2=ME.f,vT=!ty(function(){function j(){}return j.prototype.constructor=null,Object.getPrototypeOf(new j)!==j.prototype}),mT=C1("IE_PROTO"),BA=Object.prototype,$x=vT?Object.getPrototypeOf:function(j){return j=Object(n2(j)),a1(j,mT)?j[mT]:typeof j.constructor=="function"&&j instanceof j.constructor?j.constructor.prototype:j instanceof Object?BA:null},Ox=Sy("iterator"),U2=!1;[].keys&&("next"in(i2=[].keys())?(D2=$x($x(i2)))!==Object.prototype&&(ix=D2):U2=!0),ix==null&&(ix={}),a1(ix,Ox)||j0(ix,Ox,function(){return this});function NE(){}var G2={IteratorPrototype:ix,BUGGY_SAFARI_ITERATORS:U2},yx=Object.keys||function(j){return j2(j,z2)},M1=$y?Object.defineProperties:function(j,$){fy(j);for(var _r,_i=yx($),_s=_i.length,ga=0;ga<_s;)g0.f(j,_r=_i[ga++],$[_r]);return j},jE=Iy.document,V2=jE&&jE.documentElement,DE=C1("IE_PROTO"),H2="prototype",gx=function(){var j,$=hy("iframe"),_r=z2.length,_i="script";for($.style.display="none",V2.appendChild($),$.src="javascript:",(j=$.contentWindow.document).open(),j.write("<script>document.F=Object</"+_i+">"),j.close(),gx=j.F;_r--;)delete gx[H2][z2[_r]];return gx()},_T=Object.create||function(j,$){var _r;return j!==null?(NE[H2]=fy(j),_r=new NE,NE[H2]=null,_r[DE]=j):_r=gx(),$===void 0?_r:M1(_r,$)};a_[DE]=!0;function Wx(j,$,_r){j&&!a1(j=_r?j:j.prototype,FE)&&UA(j,FE,{configurable:!0,value:$})}function s2(){return this}function bT(){return this}function zE(j,$,_r,_i,_s,ga,_l){var _c,_p,_f;function ey(Oy){if(Oy===_s&&Ey)return Ey;if(!u2&&Oy in ay)return ay[Oy];switch(Oy){case"keys":case ox:case wT:return function(){return new _r(this,Oy)}}return function(){return new _r(this)}}_p=_i,_f=$+" Iterator",(_c=_r).prototype=_T(xT,{next:xy(1,_p)}),Wx(_c,_f,!1),d_[_f]=s2;var iy,ly,uy,cy=$+" Iterator",yy=!1,ay=j.prototype,by=ay[a2]||ay["@@iterator"]||_s&&ay[_s],Ey=!u2&&by||ey(_s),ky=$=="Array"&&ay.entries||by;if(ky&&(iy=$x(ky.call(new j)),l2!==Object.prototype&&iy.next&&($x(iy)!==l2&&(BE?BE(iy,l2):typeof iy[a2]!="function"&&j0(iy,a2,bT)),Wx(iy,cy,!0))),_s==ox&&by&&by.name!==ox&&(yy=!0,Ey=function(){return by.call(this)}),ay[a2]!==Ey&&j0(ay,a2,Ey),d_[$]=Ey,_s)if(ly={values:ey(ox),keys:ga?Ey:ey("keys"),entries:ey(wT)},_l)for(uy in ly)!u2&&!yy&&uy in ay||hx(ay,uy,ly[uy]);else W_({target:$,proto:!0,forced:u2||yy},ly);return ly}var UA=g0.f,FE=Sy("toStringTag"),d_={},xT=G2.IteratorPrototype,BE=Object.setPrototypeOf||("__proto__"in{}?function(){var j,$=!1,_r={};try{(j=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(_r,[]),$=_r instanceof Array}catch{}return function(_i,_s){return function(ga,_l){if(fy(ga),!oy(_l)&&_l!==null)throw TypeError("Can't set "+String(_l)+" as a prototype")}(_i,_s),$?j.call(_i,_s):_i.__proto__=_s,_i}}():void 0),a2=Sy("iterator"),l2=G2.IteratorPrototype,u2=G2.BUGGY_SAFARI_ITERATORS,ox="values",wT="entries",O_="String Iterator",ET=I_.set,__=I_.getterFor(O_);zE(String,"String",function(j){ET(this,{type:O_,string:String(j),index:0})},function(){var j,$,_r,_i,_s,ga,_l,_c,_p=__(this),_f=_p.string,ey=_p.index;return ey>=_f.length?{value:void 0,done:!0}:($=ey,_r=!0,ga=String(n2(_f)),_l=r2($),_c=ga.length,j=_l<0||_c<=_l?_r?"":void 0:(_i=ga.charCodeAt(_l))<55296||56319<_i||_l+1===_c||(_s=ga.charCodeAt(_l+1))<56320||57343<_s?_r?ga.charAt(_l):_i:_r?ga.slice(_l,_l+2):_s-56320+(_i-55296<<10)+65536,_p.index+=j.length,{value:j,done:!1})});var Yx={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Rx=Sy("unscopables"),UE=Array.prototype;UE[Rx]==null&&j0(UE,Rx,_T(null));function GE(j){UE[Rx][j]=!0}var kT="Array Iterator",GA=I_.set,TT=I_.getterFor(kT),c2=zE(Array,"Array",function(j,$){GA(this,{type:kT,target:v1(j),index:0,kind:$})},function(){var j=TT(this),$=j.target,_r=j.kind,_i=j.index++;return!$||_i>=$.length?{value:j.target=void 0,done:!0}:_r=="keys"?{value:_i,done:!1}:_r=="values"?{value:$[_i],done:!1}:{value:[_i,$[_i]],done:!1}},"values");d_.Arguments=d_.Array,GE("keys"),GE("values"),GE("entries");var q2=Sy("iterator"),AT=Sy("toStringTag"),VE=c2.values;for(var b_ in Yx){var E1=Iy[b_],R_=E1&&E1.prototype;if(R_){if(R_[q2]!==VE)try{j0(R_,q2,VE)}catch{R_[q2]=VE}if(R_[AT]||j0(R_,AT,b_),Yx[b_]){for(var Kx in c2)if(R_[Kx]!==c2[Kx])try{j0(R_,Kx,c2[Kx])}catch{R_[Kx]=c2[Kx]}}}}function Lx(j){if(typeof j!="function")throw TypeError(String(j)+" is not a function");return j}function ST(j,$,_r){if(Lx(j),$===void 0)return j;switch(_r){case 0:return function(){return j.call($)};case 1:return function(_i){return j.call($,_i)};case 2:return function(_i,_s){return j.call($,_i,_s)};case 3:return function(_i,_s,ga){return j.call($,_i,_s,ga)}}return function(){return j.apply($,arguments)}}var HE=Sy("iterator"),D0=Array.prototype,VA=Sy("iterator"),CT=_u(function(j){var $={};(j.exports=function(_r,_i,_s,ga,_l){var _c,_p,_f,ey,iy,ly,uy=ST(_i,_s,ga?2:1);if(_l)_c=_r;else{if(typeof(_p=function(cy){if(cy!=null)return cy[VA]||cy["@@iterator"]||d_[Ay(cy)]}(_r))!="function")throw TypeError("Target is not iterable");if((ly=_p)!==void 0&&(d_.Array===ly||D0[HE]===ly)){for(_f=0,ey=px(_r.length);_f<ey;_f++)if((ga?uy(fy(iy=_r[_f])[0],iy[1]):uy(_r[_f]))===$)return $;return}_c=_p.call(_r)}for(;!(iy=_c.next()).done;)if(function(cy,yy,ay,by){try{return by?yy(fy(ay)[0],ay[1]):yy(ay)}catch(ky){var Ey=cy.return;throw Ey!==void 0&&fy(Ey.call(cy)),ky}}(_c,uy,iy.value,ga)===$)return $}).BREAK=$}),MT=Sy("iterator"),IT=!1;try{var $2=0;({next:function(){return{done:!!$2++}},return:function(){IT=!0}})[MT]=function(){return this}}catch{}function W2(j,$){var _r,_i=fy(j).constructor;return _i===void 0||(_r=fy(_i)[sy])==null?$:Lx(_r)}function Xx(j){var $;Hy.hasOwnProperty(j)&&($=Hy[j],delete Hy[j],$())}function z0(j){return function(){Xx(j)}}function Y2(j){Xx(j.data)}function gy(j){Iy.postMessage(j+"",dy.protocol+"//"+dy.host)}var _d,ry,ny,sy=Sy("species"),dy=Iy.location,my=Iy.setImmediate,Cy=Iy.clearImmediate,My=Iy.process,Ry=Iy.MessageChannel,Fy=Iy.Dispatch,Vy=0,Hy={},p0="onreadystatechange";my&&Cy||(my=function(j){for(var $=[],_r=1;_r<arguments.length;)$.push(arguments[_r++]);return Hy[++Vy]=function(){(typeof j=="function"?j:Function(j)).apply(void 0,$)},_d(Vy),Vy},Cy=function(j){delete Hy[j]},_n(My)=="process"?_d=function(j){My.nextTick(z0(j))}:Fy&&Fy.now?_d=function(j){Fy.now(z0(j))}:Ry?(ny=(ry=new Ry).port2,ry.port1.onmessage=Y2,_d=ST(ny.postMessage,ny,1)):!Iy.addEventListener||typeof postMessage!="function"||Iy.importScripts||ty(gy)?_d=p0 in hy("script")?function(j){V2.appendChild(hy("script"))[p0]=function(){V2.removeChild(this),Xx(j)}}:function(j){setTimeout(z0(j),0)}:(_d=gy,Iy.addEventListener("message",Y2,!1)));var d0,e0,v0,h0,r0,_v,t0,a0={set:my,clear:Cy},A0=Iy.navigator,Qy=A0&&A0.userAgent||"",l0=ME.f,m0=a0.set,f0=Iy.MutationObserver||Iy.WebKitMutationObserver,w0=Iy.process,P0=Iy.Promise,O0=_n(w0)=="process",f1=l0(Iy,"queueMicrotask"),i1=f1&&f1.value;i1||(d0=function(){var j,$;for(O0&&(j=w0.domain)&&j.exit();e0;){$=e0.fn,e0=e0.next;try{$()}catch(_r){throw e0?h0():v0=void 0,_r}}v0=void 0,j&&j.enter()},h0=O0?function(){w0.nextTick(d0)}:f0&&!/(iphone|ipod|ipad).*applewebkit/i.test(Qy)?(r0=!0,_v=document.createTextNode(""),new f0(d0).observe(_v,{characterData:!0}),function(){_v.data=r0=!r0}):P0&&P0.resolve?(t0=P0.resolve(void 0),function(){t0.then(d0)}):function(){m0.call(Iy,d0)});function m1(j){var $,_r;this.promise=new j(function(_i,_s){if($!==void 0||_r!==void 0)throw TypeError("Bad Promise constructor");$=_i,_r=_s}),this.resolve=Lx($),this.reject=Lx(_r)}function l1(j,$){if(fy(j),oy($)&&$.constructor===j)return $;var _r=f2.f(j);return(0,_r.resolve)($),_r.promise}function b1(j){try{return{error:!1,value:j()}}catch($){return{error:!0,value:$}}}function n1(j){return typeof j=="function"?j:void 0}function e1(j,$){return arguments.length<2?n1(Px[j])||n1(Iy[j]):Px[j]&&Px[j][$]||Iy[j]&&Iy[j][$]}function R1(j){var $;return!(!oy(j)||typeof($=j.then)!="function")&&$}function r1(j,$,_r){var _i;$.notified||($.notified=!0,_i=$.reactions,Zx(function(){for(var _s=$.value,ga=$.state==1,_l=0;_i.length>_l;)(function(_c){var _p,_f,ey,iy=ga?_c.ok:_c.fail,ly=_c.resolve,uy=_c.reject,cy=_c.domain;try{iy?(ga||($.rejection===2&&lI(j,$),$.rejection=1),iy===!0?_p=_s:(cy&&cy.enter(),_p=iy(_s),cy&&(cy.exit(),ey=!0)),_p===_c.promise?uy(I3("Promise-chain cycle")):(_f=R1(_p))?_f.call(_p,ly,uy):ly(_p)):uy(_s)}catch(yy){cy&&!ey&&cy.exit(),uy(yy)}})(_i[_l++]);$.reactions=[],$.notified=!1,_r&&!$.rejection&&aI(j,$)}))}function X1(j,$,_r){var _i,_s;oI?((_i=qA.createEvent("Event")).promise=$,_i.reason=_r,_i.initEvent(j,!1,!0),Iy.dispatchEvent(_i)):_i={promise:$,reason:_r},(_s=Iy["on"+j])?_s(_i):j===L3&&function(ga,_l){var _c=Iy.console;_c&&_c.error&&(arguments.length===1?_c.error(ga):_c.error(ga,_l))}("Unhandled promise rejection",_r)}function vx(j,$,_r,_i){return function(_s){j($,_r,_s,_i)}}function y_(j,$,_r,_i){$.done||($.done=!0,_i&&($=_i),$.value=_r,$.state=2,r1(j,$,!0))}var h2,OT,qE,p2,K2,Zx=i1||function(j){var $={fn:j,next:void 0};v0&&(v0.next=$),e0||(e0=$,h0()),v0=$},f2={f:function(j){return new m1(j)}},Px=Iy,$E=Sy("species"),x_="Promise",d2=a0.set,Jx=Sy("species"),y2=I_.get,HA=I_.set,rI=I_.getterFor(x_),mx=Iy[x_],I3=Iy.TypeError,qA=Iy.document,X2=Iy.process,O3=Iy.fetch,R3=X2&&X2.versions,nI=R3&&R3.v8||"",Z2=f2.f,iI=Z2,WE=_n(X2)=="process",oI=!!(qA&&qA.createEvent&&Iy.dispatchEvent),L3="unhandledrejection",YE=B2(x_,function(){function j(){}var $=mx.resolve(1),_r=($.constructor={})[Jx]=function(_i){_i(j,j)};return!((WE||typeof PromiseRejectionEvent=="function")&&$.then(j)instanceof _r&&nI.indexOf("6.6")!==0&&Qy.indexOf("Chrome/66")===-1)}),sI=YE||!function(j,$){if(!$&&!IT)return!1;var _r=!1;try{var _i={};_i[MT]=function(){return{next:function(){return{done:_r=!0}}}},j(_i)}catch{}return _r}(function(j){mx.all(j).catch(function(){})}),aI=function(j,$){d2.call(Iy,function(){var _r,_i=$.value;if(P3($)&&(_r=b1(function(){WE?X2.emit("unhandledRejection",_i,j):X1(L3,j,_i)}),$.rejection=WE||P3($)?2:1,_r.error))throw _r.value})},P3=function(j){return j.rejection!==1&&!j.parent},lI=function(j,$){d2.call(Iy,function(){WE?X2.emit("rejectionHandled",j):X1("rejectionhandled",j,$.value)})},$A=function(j,$,_r,_i){if(!$.done){$.done=!0,_i&&($=_i);try{if(j===_r)throw I3("Promise can't be resolved itself");var _s=R1(_r);_s?Zx(function(){var ga={done:!1};try{_s.call(_r,vx($A,j,ga,$),vx(y_,j,ga,$))}catch(_l){y_(j,ga,_l,$)}}):($.value=_r,$.state=1,r1(j,$,!1))}catch(ga){y_(j,{done:!1},ga,$)}}};YE&&(mx=function(j){(function(_r,_i,_s){if(!(_r instanceof _i))throw TypeError("Incorrect "+(_s?_s+" ":"")+"invocation")})(this,mx,x_),Lx(j),h2.call(this);var $=y2(this);try{j(vx($A,this,$),vx(y_,this,$))}catch(_r){y_(this,$,_r)}},(h2=function(){HA(this,{type:x_,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(j,$,_r){for(var _i in $)hx(j,_i,$[_i],_r);return j}(mx.prototype,{then:function(j,$){var _r=rI(this),_i=Z2(W2(this,mx));return _i.ok=typeof j!="function"||j,_i.fail=typeof $=="function"&&$,_i.domain=WE?X2.domain:void 0,_r.parent=!0,_r.reactions.push(_i),_r.state!=0&&r1(this,_r,!1),_i.promise},catch:function(j){return this.then(void 0,j)}}),OT=function(){var j=new h2,$=y2(j);this.promise=j,this.resolve=vx($A,j,$),this.reject=vx(y_,j,$)},f2.f=Z2=function(j){return j===mx||j===qE?new OT:iI(j)},typeof O3=="function"&&W_({global:!0,enumerable:!0,forced:!0},{fetch:function(j){return l1(mx,O3.apply(Iy,arguments))}})),W_({global:!0,wrap:!0,forced:YE},{Promise:mx}),Wx(mx,x_,!1),p2=e1(x_),K2=g0.f,$y&&p2&&!p2[$E]&&K2(p2,$E,{configurable:!0,get:function(){return this}}),qE=Px[x_],W_({target:x_,stat:!0,forced:YE},{reject:function(j){var $=Z2(this);return $.reject.call(void 0,j),$.promise}}),W_({target:x_,stat:!0,forced:YE},{resolve:function(j){return l1(this,j)}}),W_({target:x_,stat:!0,forced:sI},{all:function(j){var $=this,_r=Z2($),_i=_r.resolve,_s=_r.reject,ga=b1(function(){var _l=Lx($.resolve),_c=[],_p=0,_f=1;CT(j,function(ey){var iy=_p++,ly=!1;_c.push(void 0),_f++,_l.call($,ey).then(function(uy){ly||(ly=!0,_c[iy]=uy,--_f||_i(_c))},_s)}),--_f||_i(_c)});return ga.error&&_s(ga.value),_r.promise},race:function(j){var $=this,_r=Z2($),_i=_r.reject,_s=b1(function(){var ga=Lx($.resolve);CT(j,function(_l){ga.call($,_l).then(_r.resolve,_i)})});return _s.error&&_i(_s.value),_r.promise}}),W_({target:"Promise",proto:!0,real:!0},{finally:function(j){var $=W2(this,e1("Promise")),_r=typeof j=="function";return this.then(_r?function(_i){return l1($,j()).then(function(){return _i})}:j,_r?function(_i){return l1($,j()).then(function(){throw _i})}:j)}});var KE,N3;Px.Promise;function x1(j){return(x1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $})(j)}function F0(j,$){if(!(j instanceof $))throw new TypeError("Cannot call a class as a function")}function j3(j,$){for(var _r=0;_r<$.length;_r++){var _i=$[_r];_i.enumerable=_i.enumerable||!1,_i.configurable=!0,"value"in _i&&(_i.writable=!0),Object.defineProperty(j,_i.key,_i)}}function H0(j,$,_r){return $&&j3(j.prototype,$),_r&&j3(j,_r),j}function g2(j,$,_r){return $ in j?Object.defineProperty(j,$,{value:_r,enumerable:!0,configurable:!0,writable:!0}):j[$]=_r,j}function Z1(j,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create($&&$.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),$&&RT(j,$)}function w_(j){return(w_=Object.setPrototypeOf?Object.getPrototypeOf:function($){return $.__proto__||Object.getPrototypeOf($)})(j)}function RT(j,$){return(RT=Object.setPrototypeOf||function(_r,_i){return _r.__proto__=_i,_r})(j,$)}function D3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function LT(j,$,_r){return(LT=D3()?Reflect.construct:function(_i,_s,ga){var _l=[null];_l.push.apply(_l,_s);var _c=new(Function.bind.apply(_i,_l));return ga&&RT(_c,ga.prototype),_c}).apply(null,arguments)}function z3(j){var $=typeof Map=="function"?new Map:void 0;return(z3=function(_r){if(_r===null||(_i=_r,Function.toString.call(_i).indexOf("[native code]")===-1))return _r;var _i;if(typeof _r!="function")throw new TypeError("Super expression must either be null or a function");if($!==void 0){if($.has(_r))return $.get(_r);$.set(_r,_s)}function _s(){return LT(_r,arguments,w_(this).constructor)}return _s.prototype=Object.create(_r.prototype,{constructor:{value:_s,enumerable:!1,writable:!0,configurable:!0}}),RT(_s,_r)})(j)}function WA(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function J1(j){var $=D3();return function(){var _r,_i,_s,ga,_l=w_(j);return _i=$?(_r=w_(this).constructor,Reflect.construct(_l,arguments,_r)):_l.apply(this,arguments),_s=this,!(ga=_i)||typeof ga!="object"&&typeof ga!="function"?WA(_s):ga}}function sx(j,$,_r){return(sx=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(_i,_s,ga){var _l=function(_p,_f){for(;!Object.prototype.hasOwnProperty.call(_p,_f)&&(_p=w_(_p))!==null;);return _p}(_i,_s);if(_l){var _c=Object.getOwnPropertyDescriptor(_l,_s);return _c.get?_c.get.call(ga):_c.value}})(j,$,_r||j)}function C0(j,$){return function(_r){if(Array.isArray(_r))return _r}(j)||function(_r,_i){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_r)))){var _s=[],ga=!0,_l=!1,_c=void 0;try{for(var _p,_f=_r[Symbol.iterator]();!(ga=(_p=_f.next()).done)&&(_s.push(_p.value),!_i||_s.length!==_i);ga=!0);}catch(ey){_l=!0,_c=ey}finally{try{ga||_f.return==null||_f.return()}finally{if(_l)throw _c}}return _s}}(j,$)||YA(j,$)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function u1(j){return function($){if(Array.isArray($))return KA($)}(j)||function($){if(typeof Symbol<"u"&&Symbol.iterator in Object($))return Array.from($)}(j)||YA(j)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function YA(j,$){if(j){if(typeof j=="string")return KA(j,$);var _r=Object.prototype.toString.call(j).slice(8,-1);return _r==="Object"&&j.constructor&&(_r=j.constructor.name),_r==="Map"||_r==="Set"?Array.from(j):_r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_r)?KA(j,$):void 0}}function KA(j,$){($==null||$>j.length)&&($=j.length);for(var _r=0,_i=new Array($);_r<$;_r++)_i[_r]=j[_r];return _i}function XE(j,$){var _r;if(typeof Symbol>"u"||j[Symbol.iterator]==null){if(Array.isArray(j)||(_r=YA(j))||$&&j&&typeof j.length=="number"){_r&&(j=_r);var _i=0,_s=function(){};return{s:_s,n:function(){return _i>=j.length?{done:!0}:{done:!1,value:j[_i++]}},e:function(_p){throw _p},f:_s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ga,_l=!0,_c=!1;return{s:function(){_r=j[Symbol.iterator]()},n:function(){var _p=_r.next();return _l=_p.done,_p},e:function(_p){_c=!0,ga=_p},f:function(){try{_l||_r.return==null||_r.return()}finally{if(_c)throw ga}}}}typeof Object.assign!="function"&&(Object.assign=function(j){if(j==null)throw new TypeError("Cannot convert undefined or null to object");for(var $=Object(j),_r=1;_r<arguments.length;_r++){var _i=arguments[_r];if(_i!=null)for(var _s in _i)_i.hasOwnProperty(_s)&&($[_s]=_i[_s])}return $}),typeof Object.values!="function"&&(Object.values=function(j){return Object.keys(j).map(function($){return j[$]})}),Math.hypot=Math.hypot||function(){for(var j=0,$=arguments.length,_r=0;_r<$;_r++){if(arguments[_r]===1/0||arguments[_r]===-1/0)return 1/0;j+=arguments[_r]*arguments[_r]}return Math.sqrt(j)},Math.log2=Math.log2||function(j){return Math.log(j)*Math.LOG2E},typeof window<"u"?(!("performance"in window)&&(window.performance={}),KE=window.performance):typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&(!("performance"in self)&&(self.performance={}),KE=self.performance),KE&&typeof KE.now!="function"&&(N3=+new Date,KE.now=function(){return new Date-N3});var uI=J2;function J2(j,$){this.x=j,this.y=$}J2.prototype={clone:function(){return new J2(this.x,this.y)},add:function(j){return this.clone()._add(j)},sub:function(j){return this.clone()._sub(j)},multByPoint:function(j){return this.clone()._multByPoint(j)},divByPoint:function(j){return this.clone()._divByPoint(j)},mult:function(j){return this.clone()._mult(j)},div:function(j){return this.clone()._div(j)},rotate:function(j){return this.clone()._rotate(j)},rotateAround:function(j,$){return this.clone()._rotateAround(j,$)},matMult:function(j){return this.clone()._matMult(j)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(j){return this.x===j.x&&this.y===j.y},dist:function(j){return Math.sqrt(this.distSqr(j))},distSqr:function(j){var $=j.x-this.x,_r=j.y-this.y;return $*$+_r*_r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(j){return Math.atan2(this.y-j.y,this.x-j.x)},angleWith:function(j){return this.angleWithSep(j.x,j.y)},angleWithSep:function(j,$){return Math.atan2(this.x*$-this.y*j,this.x*j+this.y*$)},_matMult:function(j){var $=j[0]*this.x+j[1]*this.y,_r=j[2]*this.x+j[3]*this.y;return this.x=$,this.y=_r,this},_add:function(j){return this.x+=j.x,this.y+=j.y,this},_sub:function(j){return this.x-=j.x,this.y-=j.y,this},_mult:function(j){return this.x*=j,this.y*=j,this},_div:function(j){return this.x/=j,this.y/=j,this},_multByPoint:function(j){return this.x*=j.x,this.y*=j.y,this},_divByPoint:function(j){return this.x/=j.x,this.y/=j.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var j=this.y;return this.y=this.x,this.x=-j,this},_rotate:function(j){var $=Math.cos(j),_r=Math.sin(j),_i=$*this.x-_r*this.y,_s=_r*this.x+$*this.y;return this.x=_i,this.y=_s,this},_rotateAround:function(j,$){var _r=Math.cos(j),_i=Math.sin(j),_s=$.x+_r*(this.x-$.x)-_i*(this.y-$.y),ga=$.y+_i*(this.x-$.x)+_r*(this.y-$.y);return this.x=_s,this.y=ga,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},J2.convert=function(j){return!(j instanceof J2)&&Array.isArray(j)?new J2(j[0],j[1]):j};var F3=Q2;function Q2(j,$,_r,_i,_s){this.properties={},this.extent=_r,this.type=0,this._pbf=j,this._geometry=-1,this._keys=_i,this._values=_s,j.readFields(cI,this,$)}function cI(j,$,_r){j==1?$.id=_r.readVarint():j==2?function(_i,_s){for(var ga=_i.readVarint()+_i.pos;_i.pos<ga;){var _l=_s._keys[_i.readVarint()],_c=_s._values[_i.readVarint()];_s.properties[_l]=_c}}(_r,$):j==3?$.type=_r.readVarint():j==4&&($._geometry=_r.pos)}Q2.types=["Unknown","Point","LineString","Polygon"],Q2.prototype.loadGeometry=function(){var j=this._pbf;j.pos=this._geometry;for(var $,_r,_i=j.readVarint()+j.pos,_s=1,ga=0,_l=0,_c=0,_p=[];j.pos<_i;)if(ga||(_s=7&(_r=j.readVarint()),ga=_r>>3),ga--,_s===1||_s===2)_l+=j.readSVarint(),_c+=j.readSVarint(),_s===1&&($&&_p.push($),$=[]),$.push(new uI(_l,_c));else{if(_s!==7)throw new Error("unknown command "+_s);$&&$.push($[0].clone())}return $&&_p.push($),_p},Q2.prototype.bbox=function(){var j=this._pbf;j.pos=this._geometry;for(var $,_r=j.readVarint()+j.pos,_i=1,_s=0,ga=0,_l=0,_c=1/0,_p=-1/0,_f=1/0,ey=-1/0;j.pos<_r;)if(_s||(_i=7&($=j.readVarint()),_s=$>>3),_s--,_i===1||_i===2)(ga+=j.readSVarint())<_c&&(_c=ga),_p<ga&&(_p=ga),(_l+=j.readSVarint())<_f&&(_f=_l),ey<_l&&(ey=_l);else if(_i!==7)throw new Error("unknown command "+_i);return[_c,_f,_p,ey]},Q2.prototype.toGeoJSON=function(j,$,_r){var _i,_s=this.extent*Math.pow(2,_r),ga=this.extent*j,_l=this.extent*$,_c=this.loadGeometry(),_p=Q2.types[this.type];function _f(uy){for(var cy=0;cy<uy.length;cy++){var yy=uy[cy],ay=180-360*(yy.y+_l)/_s;uy[cy]=[360*(yy.x+ga)/_s-180,360/Math.PI*Math.atan(Math.exp(ay*Math.PI/180))-90]}}switch(this.type){case 1:for(var ey=[],iy=0;iy<_c.length;iy++)ey[iy]=_c[iy][0];_f(_c=ey);break;case 2:for(iy=0;iy<_c.length;iy++)_f(_c[iy]);break;case 3:for(_c=function(uy){var cy=uy.length;if(cy<=1)return[uy];for(var yy,ay,by=[],Ey=0;Ey<cy;Ey++){var ky=function(Oy){for(var Ty,Ly,Ny=0,Uy=0,Xy=Oy.length,Yy=Xy-1;Uy<Xy;Yy=Uy++)Ty=Oy[Uy],Ly=Oy[Yy],Ny+=(Ly.x-Ty.x)*(Ty.y+Ly.y);return Ny}(uy[Ey]);ky!==0&&(ay===void 0&&(ay=ky<0),ay===ky<0?(yy&&by.push(yy),yy=[uy[Ey]]):yy.push(uy[Ey]))}return yy&&by.push(yy),by}(_c),iy=0;iy<_c.length;iy++)for(_i=0;_i<_c[iy].length;_i++)_f(_c[iy][_i])}_c.length===1?_c=_c[0]:_p="Multi"+_p;var ly={type:"Feature",geometry:{type:_p,coordinates:_c},properties:this.properties};return"id"in this&&(ly.id=this.id),ly};var hI=B3;function B3(j,$){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=j,this._keys=[],this._values=[],this._features=[],j.readFields(pI,this,$),this.length=this._features.length}function pI(j,$,_r){j===15?$.version=_r.readVarint():j===1?$.name=_r.readString():j===5?$.extent=_r.readVarint():j===2?$._features.push(_r.pos):j===3?$._keys.push(_r.readString()):j===4&&$._values.push(function(_i){for(var _s=null,ga=_i.readVarint()+_i.pos;_i.pos<ga;){var _l=_i.readVarint()>>3;_s=_l==1?_i.readString():_l==2?_i.readFloat():_l==3?_i.readDouble():_l==4?_i.readVarint64():_l==5?_i.readVarint():_l==6?_i.readSVarint():_l==7?_i.readBoolean():null}return _s}(_r))}function fI(j,$,_r){var _i;j!==3||(_i=new hI(_r,_r.readVarint()+_r.pos)).length&&($[_i.name]=_i)}B3.prototype.feature=function(j){if(j<0||j>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[j];var $=this._pbf.readVarint()+this._pbf.pos;return new F3(this._pbf,$,this.extent,this._keys,this._values)};var Y_,dI=function(j,$){this.layers=j.readFields(fI,{},$)},U3=F3,Nx=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},_x={};(function(){var j,$,_r=typeof Object.defineProperties=="function"?Object.defineProperty:function(py,_y,jy){py!=Array.prototype&&py!=Object.prototype&&(py[_y]=jy.value)},_i=(typeof window>"u"||window!==this)&&Nx!==void 0&&Nx!=null?Nx:this;if(typeof Object.setPrototypeOf=="function")j=Object.setPrototypeOf;else{t:{var _s={};try{_s.__proto__={ea:!0},$=_s.ea;break t}catch{}$=!1}j=$?function(py,_y){if(py.__proto__=_y,py.__proto__!==_y)throw new TypeError(py+" is not extensible");return py}:null}var ga=j;(function(py,_y){if(_y){var jy=_i;py=py.split(".");for(var Dy=0;Dy<py.length-1;Dy++){var zy=py[Dy];zy in jy||(jy[zy]={}),jy=jy[zy]}(_y=_y(Dy=jy[py=py[py.length-1]]))!=Dy&&_y!=null&&_r(jy,py,{configurable:!0,writable:!0,value:_y})}})("Object.setPrototypeOf",function(py){return py||ga});var _l=this||self;function _c(py){var _y=x1(py);if(_y=="object"){if(!py)return"null";if(py instanceof Array)return"array";if(py instanceof Object)return _y;var jy=Object.prototype.toString.call(py);if(jy=="[object Window]")return"object";if(jy=="[object Array]"||typeof py.length=="number"&&py.splice!==void 0&&py.propertyIsEnumerable!==void 0&&!py.propertyIsEnumerable("splice"))return"array";if(jy=="[object Function]"||py.call!==void 0&&py.propertyIsEnumerable!==void 0&&!py.propertyIsEnumerable("call"))return"function"}else if(_y=="function"&&py.call===void 0)return"object";return _y}function _p(py){return _c(py)=="function"}function _f(py){var _y=x1(py);return _y=="object"&&py!=null||_y=="function"}function ey(py,_y){py=py.split(".");var jy,Dy=_l;for((py[0]in Dy)||Dy.execScript===void 0||Dy.execScript("var "+py[0]);py.length&&(jy=py.shift());)py.length||_y===void 0?Dy=Dy[jy]&&Dy[jy]!==Object.prototype[jy]?Dy[jy]:Dy[jy]={}:Dy[jy]=_y}function iy(py,_y){function jy(){}jy.prototype=_y.prototype,py.ua=_y.prototype,py.prototype=new jy,py.prototype.constructor=py}var ly=Math,uy=ly.min,cy=ly.max,yy=ly.round,ay=ly.floor,by=ly.ceil,Ey=ly.abs,ky=ly.log,Oy=ly.sqrt,Ty=ly.pow,Ly=ly.sin,Ny=ly.asin,Uy=ly.cos,Xy=ly.tan,Yy=ly.atan2,Wy=ly.PI,_g=Wy/2,y0=Wy/4,_m=2*Wy,s0=3*Wy,R0=Wy/180,Q0=180/Wy;function W0(py,_y,jy){return jy<py?jy:py<_y?_y:py}function t1(py,_y,jy){return _y<jy?_y<=py&&py<=jy:jy<=py&&py<=_y}function o1(py,_y,jy,Dy,zy,qy){return Oy(Ty((py-zy)*(Dy-qy)-(_y-qy)*(jy-zy),2)/(Ty(jy-zy,2)+Ty(Dy-qy,2)))}ey("H.math.normalize",function(py,_y,jy){return _y-=jy=jy||0,(py-=jy)-ay(py/_y)*_y+jy}),ey("H.math.clamp",W0);var A1={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function j1(py,_y){var jy=py.x;py=py.y;for(var Dy,zy,qy,c0,n0=_y.length,T0=n0,L0=_y[0],B0=0,U0=0,g1=0;B0!=1&&1<T0;)zy=_y[--T0],Dy=_y[--T0],c0=_y[T0?T0-1:(n0+(T0-1))%n0],qy=_y[T0?T0-2:(n0+(T0-2))%n0],jy<=Dy&&Dy<=jy&&py<=zy&&zy<=py||jy<=qy&&qy<=jy&&py<=c0&&c0<=py?B0=1:B0||Dy!==jy?!B0&&t1(jy,Dy,qy)&&((Dy<jy&&jy<qy||jy<Dy&&qy<jy)&&(U0+=py<(L0=zy+(jy-Dy)/(qy-Dy)*(c0-zy)),g1+=L0<py),B0=t1(py,zy,c0)&&o1(jy,py,Dy,zy,qy,c0)<=0?2:0):(qy===jy&&(zy<py&&py<c0||py<zy&&c0<py)||(L0<=jy&&jy<qy||jy<=L0&&qy<jy)&&(py<=zy?++U0:++g1),B0=t1(py,zy,c0)&&o1(jy,py,Dy,zy,qy,c0)<=0?2:0),L0=Dy;return B0||g1===0||U0%2==0||(B0=3),B0!==A1.NONE}function Z0(py,_y){this.x=+py,this.y=+_y}function F1(py,_y,jy,Dy,zy,qy,c0,n0,T0,L0){return py={x:py,y:_y,next:jy||null,s:Dy||null,ta:zy||null,X:qy||null,o:!!c0,T:n0||0,O:T0||0,alpha:L0||0},Dy&&(py.s.next=py),jy&&(py.next.s=py),py}function B_(py){for(;py&&py.o;)py=py.next;return py}function e_(py){if(py)for(;py.next;)py=py.next;return py}function u_(py){var _y=e_(py);(_y.s.next=py).s=_y.s}function cx(py){for(var _y=[];py;)_y.push(py.x,py.y),py=py.next;return _y}function W1(py,_y,jy){for(_y=_y.next;_y!==jy&&_y.alpha<=py.alpha;)_y=_y.next;py.next=_y,py.s=_y.s,(py.next.s=py).s.next=py}function y1(py,_y){for(var jy,Dy=null,zy=0,qy=py.length;zy<qy;zy++)(jy=F1(py[zy].x,py[zy].y,Dy)).qa=_y,(jy.next=Dy)&&(Dy.s=jy),Dy=jy;return Dy}function Y1(py,_y,jy,Dy){return(py-=jy)*py+(_y-=Dy)*_y}ey("H.math.CoverType",A1),ey("H.math.isPointInsidePolygon",j1),ey("H.math.flatten",function(py){for(var _y=py.length,jy=new Float64Array(2*_y),Dy=_y&&py[0].x!==A_;_y--;){var zy=py[_y],qy=_y<<1;jy[qy]=Dy?zy.x:zy[0],jy[1+qy]=Dy?zy.y:zy[1]}return jy}),ey("H.math.Point",Z0),(Z0.prototype.set=Z0).prototype.clone=function(py){return py?(py.x=this.x,py.y=this.y):py=new Z0(this.x,this.y),py},Z0.prototype.add=function(py){return this.x+=py.x,this.y+=py.y,this},Z0.prototype.sub=function(py){return this.x-=py.x,this.y-=py.y,this},Z0.prototype.scale=function(py,_y){return this.x*=py,this.y*=_y===void 0?py:_y,this},Z0.prototype.round=function(){return this.x=yy(this.x),this.y=yy(this.y),this},Z0.prototype.floor=function(){return this.x=ay(this.x),this.y=ay(this.y),this},Z0.prototype.ceil=function(){return this.x=by(this.x),this.y=by(this.y),this},Z0.prototype.equals=Z0.prototype.w=function(py){return!(!py||this.x!==py.x||this.y!==py.y)},Z0.prototype.getNearest=Z0.prototype.la=function(py,_y){var jy,Dy=_y.x-py.x,zy=_y.y-py.y,qy=py;return(Dy||zy)&&(qy=(jy=((this.x-py.x)*Dy+(this.y-py.y)*zy)/(Dy*Dy+zy*zy))<=0?py:1<=jy?_y:new Z0(py.x+jy*Dy,py.y+jy*zy)),qy},Z0.prototype.distance=Z0.prototype.R=function(py){return Oy(Ty(this.x-py.x,2)+Ty(this.y-py.y,2))},Z0.fromIPoint=function(py){if(!py)throw Error("invalid argument");return py instanceof Z0?py:new Z0(py.x,py.y)},ey("H.math.clipping.clipStrips",function(py,_y,jy,Dy,zy,qy){var c0,n0,T0,L0=py.length;if(L0)for(c0=[];L0--;)for(var B0,U0,g1=py[L0],S1=g1.length,D1=0,$0=1;$0<S1;$0++)(T0=function(J0,G0,s1,w1,O1,U1){var T1=J0.x;J0=-J0.y;var _1=G0.x;if(G0=-G0.y,s1=-s1,U1=-U1,_1<T1){if(O1<_1||T1<w1)return;var Mx=T1,c_=J0;T1=_1,J0=G0,_1=Mx,G0=c_,Mx=1}else if(O1<T1||_1<w1)return;if(G0<J0){if(s1<G0||J0<U1)return;var Zw=1;J0=-J0,G0=-G0,c_=U1,U1=-s1,s1=-c_}else if(s1<J0||G0<U1)return;if(T1<w1){if((J0+=(w1-T1)*(G0-J0)/(_1-T1))>s1)return;T1=w1}if(J0<U1){if((T1+=(U1-J0)*(_1-T1)/(G0-J0))>O1)return;J0=U1}return O1<_1&&(G0=J0+(O1-T1)*(G0-J0)/(_1-T1),_1=O1),s1<G0&&(_1=T1+(s1-J0)*(_1-T1)/(G0-J0),G0=s1),Zw&&(J0=-J0,G0=-G0),Mx?[new Z0(_1,-G0),new Z0(T1,-J0)]:[new Z0(T1,-J0),new Z0(_1,-G0)]}(g1[$0-1],g1[$0],jy,_y,Dy,zy))&&(B0=T0[0],U0=T0[1],D1&&D1.w(B0)?n0.push(U0):c0.push(n0=T0),D1=U0,qy&&($0=S1,L0=0));else c0=py;return c0}),ey("H.math.clipping.clipPolygon",function(py,_y,jy){var Dy;py=y1(py,!0),_y=y1(_y,!1);var zy={},qy=Dy=1;switch(~~(jy||0)){case 1:qy=Dy=0;break;case 2:Dy=0,qy=1;break;case 3:Dy=1,qy=0}jy=Dy;var c0,n0,T0,L0,B0,U0,g1=qy;if(_y&&py){for(_y.M=F1(_y.x,_y.y,null,e_(_y)),py.M=F1(py.x,py.y,null,e_(py)),qy=_y;qy.next;qy=qy.next)if(!qy.o)for(Dy=py;Dy.next;Dy=Dy.next)Dy.o||(U0=function D1($0,J0,G0,s1,w1){var O1,U1=J0.x-$0.x,T1=J0.y-$0.y,_1=s1.x-G0.x,Mx=s1.y-G0.y,c_=U1*Mx-T1*_1;return!c_||(_1=((G0.x-$0.x)*Mx-(G0.y-$0.y)*_1)/c_,c_=(T1*(G0.x-$0.x)-U1*(G0.y-$0.y))/c_,_1<0||1<_1||c_<0||1<c_)?0:(_1===0?O1=$0:_1===1?O1=J0:c_===0?O1=G0:c_===1&&(O1=s1),O1?(O1.x+=2480549651603763e-20,O1.y+=7321997314118067e-20,O1.M&&(O1.M.x=O1.x,O1.M.y=O1.y),D1($0,J0,G0,s1,w1)):(w1.xa=$0.x+_1*U1,w1.ya=$0.y+_1*T1,w1.fa=_1,w1.ga=c_,1))}(qy,c0=B_(qy.next),Dy,n0=B_(Dy.next),zy))&&(U0=zy.fa,T0=zy.ga,W1(U0=F1(L0=zy.xa,B0=zy.ya,null,null,null,null,!0,0,0,U0),qy,c0),W1(c0=F1(L0,B0,null,null,null,null,!0,0,0,T0),Dy,n0),(U0.X=c0).X=U0);for(zy=j1(_y,cx(py)),jy&&(zy=!zy),qy=_y;qy;qy=qy.next)qy.o&&(zy=!(qy.T=zy));for(zy=j1(py,cx(_y)),g1&&(zy=!zy),Dy=py;Dy.next;Dy=Dy.next)Dy.o&&(zy=!(Dy.T=zy));for(u_(_y),u_(py);(py=function(D1){var $0=D1;if($0)for(;($0=$0.next)!=D1&&(!$0.o||$0.o&&$0.O););return $0}(_y))!=_y;){for(jy=null;!py.O;py=py.X){for(zy=py.T;(jy=F1(py.x,py.y,jy)).artificial=py.o||py.qa,py.O=1,py=zy?py.next:py.s;)if(py.o){py.O=1;break}if(!py)break}jy.ta=S1;var S1=jy}return S1}}),ey("H.math.simplifyDP",function(py,_y,jy){return function Dy(zy,qy,c0,n0,T0){var L0=0,B0=n0,U0=zy[n0].x,g1=zy[n0].y,S1=zy[T0].x,D1=zy[T0].y,$0=n0+1,J0=Y1(U0,g1,S1,D1);if(J0)for(;$0<T0;){var G0=zy[$0++],s1=G0.x;G0=G0.y;var w1=((s1-U0)*(S1-U0)+(G0-g1)*(D1-g1))/J0;s1=w1<0?Y1(s1,G0,U0,g1):1<w1?Y1(s1,G0,S1,D1):Y1(s1,G0,U0+w1*(S1-U0),g1+w1*(D1-g1)),L0<s1&&(L0=s1,B0=$0-1)}else for(;$0<T0;)G0=zy[$0++],s1=G0.x,G0=G0.y,s1=Y1(s1,G0,U0,g1),L0<s1&&(L0=s1,B0=$0-1);return n0=qy<=L0||0<c0&&B0-n0?(--c0,1<B0-n0?(n0=Dy(zy,qy,c0,n0,B0),n0.splice(n0.length-1,1)):n0=[zy[n0]],1<T0-B0?n0.concat(Dy(zy,qy,c0,B0,T0)):n0.concat(zy.slice(B0,T0+1))):[zy[n0],zy[T0]],n0}(py,_y*_y,jy||0,0,py.length-1)});var U_=this,H_=String,A_=[].pop(),Ww=/x/.exec(""),S_="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C_(py,_y){if(py instanceof _y&&py.constructor===_y)throw new TypeError("Illegal constructor "+Ax(_y))}ey("H.lang.isArray",function(py,_y,jy,Dy){var zy;if(!(zy=Tx(py)==="Array")&&_y)throw new I1(_y,jy,Dy!==A_?Dy:py);return zy}),ey("H.lang.isString",function(py){return typeof py=="string"});var B1=isNaN;function m_(py){return py===+py}function Tx(py){var _y=Object[S_[0]][S_[6]].call(py).match(/^\[object (\w+)\]$/);return _y?_y[1]:x1(py)}ey("H.lang.isNumber",m_),ey("H.lang.isInteger",Number.isInteger?Number.isInteger:function(py){return typeof py=="number"&&py%1==0});var Q_=[];function Ax(py,_y,jy,Dy){var zy,qy,c0="",n0=arguments.length<2;return n0&&(_y={H:U_.H},jy="",Dy=Q_.slice()),O2(_y,!0,function(T0,L0){try{if(zy=T0[L0],B0=zy,O2(T0,!(U0=[]),function(g1,S1){g1[S1]===B0&&U0.push(S1)}),L0=U0.sort(IA)[0],!(_f(zy)&&zy.window===zy&&zy.self===zy||_f(zy)&&0<zy.nodeType&&_p(zy.cloneNode))&&_f(zy)){if(zy===py)return c0=jy+"."+L0,1;if(Dy.indexOf(zy)<0&&(Dy.push(zy),c0=Ax(py,zy,jy+"."+L0,Dy)))return 1}}catch{}var B0,U0}),n0&&(c0=c0?c0.substr(1).replace("."+S_[0]+".","#"):"~"+(_p(py)?((qy=/^\s*function ([^\( ]+)/.exec(qy=py))?qy[1]:"anonymous")+"()":Tx(py))),c0}function IA(py,_y){return _y.length-py.length}Q_.indexOf(Q_)<0&&Q_.push(Q_);var I2=Object[S_[0]][S_[2]];function O2(py,_y,jy){var Dy;if(py){for(zy in py)if((!_y||I2.call(py,zy))&&jy(py,zy,!0))return;for(Dy=S_.length;Dy--;){var zy=S_[Dy];if((!_y||I2.call(py,zy))&&jy(py,zy,!1))break}}}function EE(py,_y,jy){jy[_y]="#"+_y}function I1(py,_y,jy){var Dy,zy,qy=arguments.length;return(_y=_y!==A_?+_y:_y)!==A_&&((zy=Dy=(zy=/^.*?\(([^\)]+)/.exec((""+py).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?H_(zy[1].replace(/\s+/g,"")).split(A_!==","?",":" "):[]).forEach(EE),zy=zy[_y]||"#"+_y),Dy=py?Ax(py):"",qy=2<qy?H_(jy):"",(zy||qy)&&(Dy+=" (Argument "+(zy||"")+(qy?" "+qy:"")+")"),qy=Error(Dy),Object.setPrototypeOf(qy,I1.prototype),qy}function q_(py,_y,jy){var Dy=W0(+py,-90,90);if(_y&&B1(Dy))throw new I1(_y,jy,py);return Dy}function $_(py,_y,jy){var Dy,zy=+py;if((zy<-180||180<zy)&&(zy=((Dy=(zy+180)%360)<0?360+Dy:Dy)-180),_y&&B1(zy))throw new I1(_y,jy,py);return zy}function OA(py,_y,jy){var Dy;if(py!==A_&&B1(Dy=+py)&&_y)throw new I1(_y,jy,py);return Dy}function s_(){C_(this,s_)}function p1(py,_y,jy){this.lat=q_(py,p1,0),this.lng=$_(_y,p1,1),jy!==A_&&(this.alt=OA(jy,p1,2))}function Sx(py,_y,jy){var Dy=_f(py)&&!(B1(py.lat=q_(py.lat))||B1(py.lng=$_(py.lng))||py.alt!==A_&&B1(py.alt=OA(py.alt)));if(!Dy&&_y)throw new I1(_y,jy,py);return Dy}function E0(py,_y,jy,Dy){R2(this,q_(py,E0,0),$_(_y,E0,1),q_(jy,E0,2),$_(Dy,E0,3))}function R2(py,_y,jy,Dy,zy){return py.f=jy,py.g=zy,_y<Dy&&(jy=_y,_y=Dy,Dy=jy),py.i=_y,py.h=Dy,py.m=py.b=py.c=null,py}function Cx(py,_y){return(py=_y-py)+(py<0?360:0)}function Yw(py,_y){return(py+=_y/2)-(180<py?360:0)}function L2(py,_y,jy,Dy,zy,qy,c0,n0,T0){jy=uy(jy,c0),py=cy(py,zy);var L0=Yw(_y,zy=Cx(_y,Dy)),B0=Yw(qy,c0=Cx(qy,n0))-L0,U0=(B0+=B0-1e-6<0?360:0)-1e-6<180?(L0=_y,n0):(B0=360-B0,L0=qy,Dy);return 360<=(B0=B0+zy/2+c0/2)+5e-7?(L0=-180,U0=180):B0-5e-7<zy?(L0=_y,U0=Dy):B0-5e-7<c0&&(L0=qy,U0=n0),T0?R2(T0,py,L0,jy,U0):new E0(py,L0,jy,U0)}function P2(py,_y,jy){return jy||(Sx(py,P2,0),Sx(_y,P2,1)),new E0(py.lat,py.lng,_y.lat,_y.lng)}function _b(py,_y,jy,Dy,zy,qy){C_(this,_b),this.sa=py||10,this.c=this.b=null,this.j=Dy||0,this.l=zy||0,this.m=_y||1,this.u=jy||1,this.I=!!qy,this.flush()}function Hx(py,_y,jy){var Dy,zy;if(py.I&&(Dy=py.c))for(zy=3;0<=zy;zy--){var qy=_y[zy];if(zy%3?qy>=Dy[zy]:qy<=Dy[zy]){if(!jy){py.c=null;break}Dy[zy]=qy}}}function $M(py,_y){var jy,Dy=py.a;if(_y){var zy=_y;if(zy!==Dy)for(Dy=zy;zy=zy.c;)(zy.entries||1<zy.a)&&(Dy=zy)}else for(;!Dy.entries&&(jy=Dy.a)<2&&jy;)Dy=zy;py.a=Dy}iy(I1,Error),ey("H.lang.InvalidArgumentError",I1),I1.prototype.name="InvalidArgumentError",ey("H.geo.isDBC",function(py,_y){return(py<0^_y<0)!=0&&180<Ey(_y-py)}),ey("H.geo.AbstractGeometry",s_),s_.prototype.getBoundingBox=s_.prototype.D,s_.prototype.equals=s_.prototype.w,s_.prototype.a="",s_.prototype.l="",s_.prototype.toString=function(){return this.I([this.a.toUpperCase()," "]).join("")},s_.prototype.toGeoJSON=s_.prototype.va=function(){return{type:this.l,coordinates:this.u()}},s_.prototype.forWorkerMessage=s_.prototype.U=function(){return{type:this.a,coordinates:this.j(),boundingBox:this.D().U()}},iy(p1,s_),ey("H.geo.Point",p1),p1.prototype.equals=p1.prototype.w=function(py){return this===py||!!py&&this.lat===py.lat&&this.lng===py.lng&&(this.alt||0)===(py.alt||0)},p1.prototype.distance=p1.prototype.R=function(py){var _y,jy;return py=this===py||this.lat===py.lat&&this.lng===py.lng?0:(_y=this.lat*R0,jy=py.lat*R0,1274200158e-2*Ny(uy(1,Oy(Ty(Ly((_y-jy)/2),2)+Uy(_y)*Uy(jy)*Ty(Ly((this.lng*R0-py.lng*R0)/2),2)))))},p1.prototype.walk=p1.prototype.wa=function(py,_y,jy){var Dy,zy,qy,c0,n0,T0,L0;return jy?((_y/=637100079e-2)&&(py*=R0,n0=R0*this.lat,Dy=Ly(n0),zy=Ly(_y),qy=Uy(_y),c0=R0*this.lng,T0=Uy(n0),n0=Ny(T0*Uy(py)*zy+Dy*qy),T0=(py=(c0+(py=Yy(Ly(py)*T0*zy,qy-Dy*Ly(n0)))+Wy)%(2*Wy)-Wy)*Q0),_y?new p1(n0*Q0,(T0+540)%360-180):this):((py=(py%360+360)%360)+90)%180==0?(n0=this.lng+_y/(637100079e-2*_m*Uy(this.lat*R0))*(py===270?-360:360),new p1(this.lat,(n0+540)%360-180)):((_y/=637100079e-2)&&(py*=R0,c0=this.lat*R0,Dy=this.lng*R0,qy=(zy=c0+_y*Uy(py))-c0,n0=ky(Xy(zy/2+y0)/Xy(c0/2+y0)),n0=B1(qy/n0)?Uy(c0):qy/n0,L0=_y*Ly(py)/n0,Ey(zy)>_g&&(zy=0<zy?Wy-zy:-(Wy+zy))),_y?new p1(zy*Q0,((Dy+L0+s0+(Ey(c0+qy)>_g?Wy:0))%_m-Wy)*Q0):this)},p1.prototype.getBoundingBox=p1.prototype.D=function(){return new E0(this.lat,this.lng,this.lat,this.lng)},p1.validate=Sx,p1.fromIPoint=function py(_y){if(!_y)throw new I1(py,0,_y);return new p1(_y.lat,_y.lng,_y.alt)},p1.prototype.a="Point",p1.prototype.I=function(py){return py.push("(",this.lng," ",this.lat,")"),py},p1.prototype.l="Point",p1.prototype.u=function(){return[this.lng,this.lat,this.alt||0]},p1.prototype.j=function(){return[this.lat,this.lng,this.alt||0]},iy(E0,s_),ey("H.geo.Rect",E0),E0.prototype.a="Polygon",E0.prototype.I=function(py){var _y=this.i,jy=this.f,Dy=this.h,zy=this.g;return py.push("(","(",jy," ",_y,",",zy," ",_y,",",zy," ",Dy,",",jy," ",Dy,",",jy," ",_y,")",")"),py},E0.prototype.equals=E0.prototype.w=function(py){return this===py||!!py&&this.i===py.i&&this.f===py.f&&this.h===py.h&&this.g===py.g},E0.prototype.clone=function(){return new E0(this.i,this.f,this.h,this.g)},E0.prototype.getTopLeft=E0.prototype.W=function(){return this.m||(this.m=new p1(this.i,this.f)),this.m},E0.prototype.getBottomRight=E0.prototype.V=function(){return this.b||(this.b=new p1(this.h,this.g)),this.b},E0.prototype.getTop=E0.prototype.na=function(){return this.i},E0.prototype.getBottom=E0.prototype.ha=function(){return this.h},E0.prototype.getLeft=E0.prototype.ja=function(){return this.f},E0.prototype.getRight=E0.prototype.ma=function(){return this.g},E0.prototype.getCenter=E0.prototype.F=function(){return this.c||(this.c=new p1(this.h+(this.i-this.h)/2,Yw(this.f,this.A()))),this.c},E0.prototype.getWidth=E0.prototype.A=function(){return Cx(this.f,this.g)},E0.prototype.getHeight=E0.prototype.G=function(){return this.i-this.h},E0.prototype.isCDB=E0.prototype.N=function(){return this.f>this.g},E0.prototype.isEmpty=E0.prototype.ra=function(){return!this.A()&&!this.G()},E0.prototype.getBoundingBox=E0.prototype.D=function(){return new E0(this.i,this.f,this.h,this.g)},E0.prototype.containsLatLng=E0.prototype.L=function(py,_y,jy){var Dy=this.F();return jy||(py=q_(py,this.L,0),_y=$_(_y,this.L,1)),(py=(_y=this.B(py,_y,jy)).F()).lat===Dy.lat&&py.lng===Dy.lng&&this.G()===_y.G()&&this.A()===_y.A()},E0.prototype.containsPoint=E0.prototype.$=function(py,_y){return _y||Sx(py,this.$,0),this.L(py.lat,py.lng,_y)},E0.prototype.containsRect=E0.prototype.aa=function(py,_y){var jy=this.F();if(!(_y||py instanceof E0))throw new I1(this.aa,0,py);return(py=(_y=this.J(py,_y)).F()).lat===jy.lat&&py.lng===jy.lng&&this.G()===_y.G()&&this.A()===_y.A()},E0.prototype.mergeLatLng=E0.prototype.B=function(py,_y,jy,Dy){if(!jy){if(B1(py=q_(py)))throw new I1(this.B,0,py);if(B1(_y=$_(_y)))throw new I1(this.B,1,_y)}return L2(this.i,this.f,this.h,this.g,py,_y,py,_y,Dy)},E0.prototype.mergePoint=E0.prototype.ca=function(py,_y,jy){return _y||Sx(py,this.ca,0),this.B(py.lat,py.lng,_y,jy)},E0.prototype.mergeRect=E0.prototype.J=function(py,_y,jy){if(!(_y||py instanceof E0))throw new I1(this.J,0,py);return L2(this.i,this.f,this.h,this.g,py.i,py.f,py.h,py.g,jy)},E0.prototype.mergeTopLeftBottomRight=E0.prototype.C=function(py,_y,jy,Dy,zy,qy){return zy||(py=q_(py,this.C,0),_y=$_(_y,this.C,1),jy=q_(jy,this.C,2),Dy=$_(Dy,this.C,3)),L2(this.i,this.f,this.h,this.g,py,_y,jy,Dy,qy)},E0.prototype.intersects=E0.prototype.ba=function(py,_y){var jy=this.f<=this.g,Dy=py.f<=py.g,zy=this.f<py.g,qy=py.f<this.g;if(!(_y||py instanceof E0))throw new I1(this.ba,0,py);return this.h<=py.i&&py.h<=this.i&&(!jy&&(!Dy||zy||qy)||!Dy&&(zy||qy)||zy&&qy)},E0.merge=L2,E0.fromPoints=P2,E0.coverPoints=function py(_y,jy){var Dy=1,zy=_y.length,qy=null,c0=_c(_y);if(c0!="array"&&(c0!="object"||typeof _y.length!="number"))throw new I1(py,0,_y);if(0<zy)for(qy=P2(c0=_y[0],c0,jy);Dy<zy;Dy++)c0=_y[Dy],qy.B(c0.lat,c0.lng,jy,qy);return qy},E0.coverLatLngAlts=function py(_y,jy){var Dy,zy=3,qy=_y.length;if(!(jy||_y&&_y.length!=null))throw new I1(py,0,_y);if(0<qy)for(Dy=new E0(_y[0],_y[1],_y[0],_y[1]);zy<qy;zy+=3)Dy.B(_y[zy],_y[zy+1],jy,Dy);return Dy},E0.coverRects=function py(_y,jy){var Dy,zy=1,qy=_y.length;if(jy&&(!_y||_y.length==null))throw new I1(py,0,_y);if(0<qy)for(Dy=new E0(_y[0].i,_y[0].f,_y[0].h,_y[0].g);zy<qy;zy++)Dy.J(_y[zy],jy,Dy);return Dy},E0.prototype.resizeToCenter=E0.prototype.da=function(py,_y){var jy=this.f,Dy=this.i,zy=this.g,qy=this.h,c0=this.F().lng;Sx(py,this.da,0);var n0=py.lat-qy-(Dy-qy)/2,T0=py.lng-c0;return py=(py=jy+((T0=180<T0||T0<-180?-(c0+py.lng):T0)<0?2*T0:0))<-180?360+py:py,zy=180<(zy+=0<T0?2*T0:0)?zy-360:zy,90<=(Dy=0<n0?Dy+2*n0:Dy)&&(Dy=90),(qy=n0<0?qy+2*n0:qy)<=-90&&(qy=-90),_y?R2(_y,Dy,py,qy,zy):new E0(Dy,py,qy,zy)},E0.prototype.l="Polygon",E0.prototype.u=function(){return[[this.f,this.i,0],[this.g,this.i,0],[this.g,this.h,0],[this.f,this.h,0],[this.f,this.i,0]]},E0.prototype.U=function(){return this.j()},E0.prototype.j=function(){return[this.i,this.f,this.h,this.g]},_b.prototype.remove=function(py){var _y,jy,Dy,zy,qy,c0,n0=!1;if(py&&(_y=py.a)&&_y.b===this&&(jy=_y.entries)&&0<=(Dy=jy.indexOf(py))){for(jy.splice(Dy,1),jy=this.a;_y;)(zy=_y.entries)&&zy.length||(zy&&delete _y.entries,_y.a||!(qy=_y.c))?_y=Ww:((Dy=qy)[c0=(n0=_y).j]===n0&&(delete Dy[c0],delete n0.c,--Dy.a),jy===_y&&(jy=qy),_y=qy);this.a!==jy&&(this.a=jy,$M(this)),Hx(this,py,!1),n0=!0}return n0},_b.prototype.flush=function(){var py=new S3(null,NaN,this.j-this.m,this.l-this.u,this.j+this.m,this.l+this.u);(py.b=this).a=this.b=py,this.c=null},_b.prototype.o=function(py,_y,jy,Dy,zy,qy){var c0=[],n0=this.a,T0=this.b;return py<=n0[5]&&_y<=n0[6]&&(zy?jy>=n0[7]:jy>n0[7])&&(qy?Dy>=n0[4]:Dy>n0[4])&&function L0(B0,U0,g1,S1,D1,$0,J0,G0,s1){var w1,O1=U0.entries,U1=U0[7],T1=U0[4],_1=U0[5],Mx=U0[6],c_=U0[8],Zw=U0[9];if(O1){var LA=O1.length;if(T1<D1||U1<S1||J0<Mx||$0<_1)for(;LA--;){U1=O1[LA],T1=U1[3],_1=U1[0],Mx=U1[1];var bL=U1[2];D1<=bL&&S1<=Mx&&(_1<J0||G0&&_1==J0)&&(T1<$0||s1&&T1==$0)&&g1.push(U1)}else for(;LA--;)g1.push(O1[LA])}(c_<$0||s1&&$0==c_)&&(D1<Zw&&(w1=U0[1])&&L0(B0,w1,g1,S1,D1,$0,J0,G0,s1),(Zw<J0||G0&&J0==Zw)&&(w1=U0[3])&&L0(B0,w1,g1,S1,D1,$0,J0,G0,s1)),S1<c_&&(D1<Zw&&(w1=U0[0])&&L0(B0,w1,g1,S1,D1,$0,J0,G0,s1),(Zw<J0||G0&&J0==Zw)&&(w1=U0[2])&&L0(B0,w1,g1,S1,D1,$0,J0,G0,s1))}(this,n0,c0,py,_y,jy,Dy,qy||Dy>=T0[6],zy||jy>=T0[5]),c0};var _L=0;function S3(py,_y,jy,Dy,zy,qy){this.j=_y,py&&(this.c=py,this.b=py.b,zy=1&_y?(jy=py[8],py[5]):(jy=py[7],py[8]),qy=2&_y?(Dy=py[9],py[6]):(Dy=py[4],py[9])),this[7]=jy,this[5]=zy,this[8]=(jy+zy)/2,this[4]=Dy,this[6]=qy,this[9]=(Dy+qy)/2}function C3(py,_y,jy,Dy,zy,qy){C3.ua.constructor.apply(this,arguments)}function WM(py,_y,jy,Dy,zy,qy,c0){var n0,T0,L0=_y[8],B0=_y[9];return c0&&(zy<L0||(n0=L0<=jy))&&(qy<B0||(T0=B0<=Dy))?jy=(L0=WM)(py,_y=_y[n0|=T0<<1]||(++_y.a,_y[n0]=new S3(_y,n0)),jy,Dy,zy,qy,c0-1):(Dy=jy=new YM(jy,Dy,zy,qy),(_y.entries||(_y.entries=[])).push(Dy),Dy.a=_y,Hx(py,jy,!0),$M(py,_y)),jy}function YM(py,_y,jy,Dy){this.id=_L++,this[0]=_y,this[1]=jy,this[2]=Dy,this[3]=py}function Xw(py){this.l=new C3(+py||10,180,90,0,0,!0),this.j=[],this.m=!1,this.a=this.b=this.c=null}function KM(py,_y,jy,Dy,zy,qy){if(qy)qy=new YM(zy,-_y,jy+360,-Dy),py.j.push(qy),py.m=!0,py.a&&py.a.C(_y,jy,Dy,zy,!0,py.a);else{var c0=-_y,n0=-Dy,T0=(qy=py.l).b,L0=T0[5],B0=T0[6];if(!(T0[7]<=jy&&T0[4]<=c0&&(zy<L0||L0===zy&&L0===T0.b.b[5])&&(n0<B0||B0===n0&&B0===T0.b.b[6])))throw Error("Coordinates out of bounds");qy=WM(qy,qy.b,jy,c0,zy,n0,qy.sa),py.b&&py.b.C(_y,jy,Dy,zy,!0,py.b)}return py.c=null,qy}function XM(py,_y,jy,Dy,zy,qy,c0){var n0=(py=py.j).length,T0=[];if(n0)for(var L0=jy+360,B0=zy+360;n0--;){var U0=py[n0];(ZM(U0,_y,jy,Dy,zy,qy,c0)||ZM(U0,_y,L0,Dy,B0,qy,c0))&&T0.push(U0)}return T0}function ZM(py,_y,jy,Dy,zy,qy,c0){var n0=py[3],T0=py[0],L0=py[1];return py=py[2],(qy?T0<=Dy:T0<Dy)&&(c0?n0<=zy:n0<zy)&&_y<=py&&jy<=L0}function M3(py,_y){var jy,Dy;if(jy=_y.length){for(var zy=py.length,qy={};zy--;)qy[py[zy].id]=1;for(;jy--;)(Dy=_y[jy]).id in qy||py.push(Dy)}}function tx(){}function t_(py,_y,jy){if(this.l=[],_y&&this.K(_y),jy&&!_p(jy))throw new I1(t_,2,jy);this.b=0,this.m=jy,this.a={},this.j=this.c=null,this.Z(py)}function JM(py,_y){return _y&&(py.c=tI(py,_y,py.c)),_y}function QM(py){for(;py.b>py.u&&py.j;)RA(py,py.j,!0)}function tI(py,_y,jy){return jy!==_y&&((_y.H||_y.v)&&RA(py,_y,!1),(_y.H=jy)&&(_y.v=jy.v,jy.v=_y),_y.v||(py.c=_y),_y.H||(py.j=_y),py.b+=_y.size),_y}function RA(py,_y,jy){var Dy=_y.v,zy=_y.H;(Dy||zy||_y==py.c&&_y==py.j)&&(Dy?Dy.H=zy:py.c=zy,zy?zy.v=Dy:py.j=Dy,py.b-=_y.size,jy&&(delete py.a[_y.id],eI(py,_y))),_y.H=_y.v=null}function eI(py,_y){for(var jy=py.l.length;jy--;)py.l[jy].call(py,_y.id,_y.data,_y.size)}S3.prototype.a=0,iy(C3,_b),ey("H.geo.QuadTree",Xw),Xw.prototype.N=function(){return this.m},Xw.prototype.D=function(){var py;if(!this.c){var _y,jy,Dy=[];if((c0=!this.b)&&(n0=(qy=this.l).c,qy.I&&!n0&&((c0=qy.a).entries||c0[0]||c0[1]||c0[2]||c0[3])&&(n0=function L0(B0,U0){for(var g1,S1,D1=0,$0=3;0<=$0;$0--){for(var J0=$0+4,G0=0<$0%3,s1=[],w1=U0[$0],O1=B0[$0],U1=O1.length;U1--;){var T1=O1[U1];if(g1=T1.entries)for(S1=g1.length;S1--;){var _1=g1[S1][$0];(G0?w1<_1:_1<w1)&&(w1=_1)}for(S1=4;S1--;)(g1=T1[S1])&&(G0?g1[J0]>w1:g1[J0]<w1)&&s1.push(g1)}D1+=s1.length,U0[$0]=w1,B0[$0]=s1}return D1&&(U0=L0(B0,U0)),U0}([n0=[c0],n0,n0,n0],[c0[6],c0[7],c0[4],c0[5]]),qy.c=n0),c0=qy=n0),c0&&(this.b=new E0(-qy[0],qy[3],-qy[2],qy[1])),(py=this.b)&&Dy.push(py),!this.a&&(jy=(_y=this.j).length)){for(c0=360,n0=-(qy=90),T0=0;jy--;)var zy=_y[jy],qy=uy(qy,zy[0]),c0=uy(c0,zy[3]),n0=cy(n0,zy[2]),T0=cy(T0,zy[1]);this.a=new E0(-qy,c0,-n0,T0-360)}(py=this.a)&&Dy.push(py),(py=Dy[0])&&(Dy[1]&&(py=py.J(Dy[1],!0)),this.c=py)}return this.c},Xw.prototype.insertBoundingBox=Xw.prototype.oa=function(py){var _y=py.W(),jy=py.V();return(py=py.N())?KM(this,_y.lat,jy.lng,jy.lat,_y.lng,py):KM(this,_y.lat,_y.lng,jy.lat,jy.lng,py)},Xw.prototype.remove=function(py){var _y,jy;return py.a?(jy=this.l.remove(py),this.b=null):(jy=0<=(py=(_y=this.j).indexOf(py)))&&(_y.splice(py,1),this.m=0<_y.length,this.a=null),jy&&(this.c=null),jy},Xw.prototype.intersectBoundingBox=Xw.prototype.pa=function(py,_y,jy){var Dy=this.l,qy=py.W(),n0=py.V(),zy=-qy.lat,qy=qy.lng,c0=-n0.lat,n0=n0.lng;return!_y&&zy==c0||!jy&&qy===n0?py=[]:py.N()?(M3(py=Dy.o(-180,zy,n0,c0,jy,_y),Dy.o(qy,zy,180,c0,!1,_y)),M3(py,XM(this,zy,n0,c0,qy+360,_y,jy))):M3(py=Dy.o(qy,zy,n0,c0,jy,_y),XM(this,zy,qy,c0,n0,_y,jy)),py},ey("H.util.ICache",tx),tx.prototype.add=function(){},tx.prototype.get=function(){},tx.prototype.drop=tx.prototype.S=function(){},tx.prototype.forEach=function(){},tx.prototype.removeAll=tx.prototype.Y=function(){},tx.prototype.registerOnDrop=tx.prototype.K=function(){},tx.prototype.deRegisterOnDrop=tx.prototype.P=function(){},ey("H.util.Cache",t_),t_.prototype.add=function(py,_y,jy){var Dy,zy;if(!m_(jy=+jy)||jy<0)throw new I1(this.add,2,jy);return py=String(py),(zy=!this.m||this.m(py,_y,jy))&&((Dy=this.a[py])?(Dy.data!==_y&&eI(this,Dy),this.b+=jy-Dy.size,Dy.size=jy,Dy.data=_y,JM(this,Dy)):this.a[py]=tI(this,{id:py,data:_y,size:jy,H:null,v:null},this.c),QM(this)),zy},t_.prototype.registerOnDrop=t_.prototype.K=function(py){if(!_p(py))throw new I1(this.K,0,py);this.l.push(py)},t_.prototype.deRegisterOnDrop=t_.prototype.P=function(py){this.l=this.l.filter(function(_y){return _y!==py})},t_.prototype.get=function(py,_y){return(py=_y?this.a[py]:JM(this,this.a[py]))&&py.data},t_.prototype.drop=t_.prototype.S=function(py){var _y;(_y=this.a[py])&&RA(this,_y,!0)},t_.prototype.forEach=function(py,_y,jy){var Dy;for(Dy in this.a){var zy=this.a[Dy];jy&&!jy(Dy,zy.data,zy.size)||py.call(_y,Dy,zy.data,zy.size)}},t_.prototype.removeAll=t_.prototype.Y=function(py){var _y;for(_y in this.a){var jy=this.a[_y];py&&!py(_y,jy.data,jy.size)||RA(this,this.a[_y],!0)}},t_.prototype.setMaxSize=t_.prototype.Z=function(py){if(!(0<+py))throw new I1(t_.prototype.Z,0,py);return this.u=+py,QM(this),this},t_.prototype.getMaxSize=t_.prototype.ka=function(){return this.u},t_.prototype.getCurrentSize=t_.prototype.ia=function(){return this.b}}).call(_x);var b0,L1=Y_={};function G3(j){return LT(_x.H.math.Point,u1(j))}Y_.clipPolygon=function(j,$){var _r,_i,_s,ga=[],_l=_x.H.math.clipping.clipPolygon(j.map(G3),$.map(G3));if(_l)do{for(_r=[],_i=_l;_r.push([(_s=_i).x,_s.y]),_i=_i.next;);ga.push(_r)}while(_l=_l.nextPoly);else Y_.isPointInsidePolygon($[0],j)?ga.push($):Y_.isPointInsidePolygon(j[0],$)&&ga.push(j);return ga},Y_.isPointInsidePolygon=function(j,$){return _x.H.math.isPointInsidePolygon({x:j[0],y:j[1]},_x.H.math.flatten($))},Y_.clamp=function(j,$,_r){return(j-=0)>_r?_r:j<$?$:j},Y_.splitLegs=function(j,$){var _r=[];j.push(j[0]);for(var _i=0;_i<j.length-1;_i++){var _s,ga=j[_i],_l=j[_i+1];_r.push(ga),Math.abs(_l[0]-ga[0])>=$&&(_s=[(ga[0]+_l[0])/2,(ga[1]+_l[1])/2],_r.push(_s))}return _r.length!==j.length-1?Y_.splitLegs(_r,$):_r},Y_.getBBox=function(j){var $=1/0,_r=1/0,_i=-1/0,_s=-1/0;return j.forEach(function(ga){ga[0]<$&&($=ga[0]),ga[1]<_r&&(_r=ga[1]),ga[0]>_i&&(_i=ga[0]),ga[1]>_s&&(_s=ga[1])}),[$,_r,_i,_s]},Y_.getBBoxCenter=function(j){var $=C0(j,4),_r=$[0],_i=$[1];return[_r+($[2]-_r)/2,_i+($[3]-_i)/2]},Y_.getLineLength=function(j,$,_r,_i){return Math.sqrt(Math.pow(j-_r,2)+Math.pow($-_i,2))},Y_.modulo=function(j,$){var _r;return(_r=j%$)<0==$<0?_r:_r+$};var Zy=b0={};b0.default_source_max_zoom=18,b0.default_view_max_zoom=20,b0.tile_size=256,b0.half_circumference_meters=20037508342789244e-9,b0.circumference_meters=2*b0.half_circumference_meters,b0.min_zoom_meters_per_pixel=b0.circumference_meters/b0.tile_size;var XA=[];b0.metersPerPixel=function(j){return XA[j]=XA[j]||b0.min_zoom_meters_per_pixel/Math.pow(2,j),XA[j]};var ZA=[];b0.metersPerTile=function(j){return ZA[j]=ZA[j]||b0.circumference_meters/Math.pow(2,j),ZA[j]},b0.tile_scale=4096,b0.units_per_pixel=b0.tile_scale/b0.tile_size,b0.height_scale=16;var JA=[];b0.unitsPerMeter=function(j){return JA[j]=JA[j]||b0.tile_scale/(b0.tile_size*b0.metersPerPixel(j)),JA[j]},b0.metersForTile=function(j){return{x:j.x*b0.circumference_meters/Math.pow(2,j.z)-b0.half_circumference_meters,y:-(j.y*b0.circumference_meters/Math.pow(2,j.z)-b0.half_circumference_meters)}},b0.tileForMeters=function(j,$){var _r=C0(j,2),_i=_r[0],_s=_r[1];return{x:Math.floor((_i+b0.half_circumference_meters)/(b0.circumference_meters/Math.pow(2,$))),y:Math.floor((-_s+b0.half_circumference_meters)/(b0.circumference_meters/Math.pow(2,$))),z:$}},b0.metersToExactTileCoords=function(j,$){var _r=C0(j,2),_i=_r[0],_s=_r[1];return{x:Math.pow(2,$-1)*(1+_i/b0.half_circumference_meters),y:Math.pow(2,$-1)*(1-_s/b0.half_circumference_meters),z:$}},b0.wrapTile=function(j){var $=j.x,_r=j.y,_i=j.z,_s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{x:!0,y:!1},ga=(1<<_i)-1;return _s.x&&($&=ga),_s.y&&(_r&=ga),{x:$,y:_r,z:_i}},b0.wrapMeters=function(j){var $=j.x,_r=j.y;return{x:L1.modulo($+b0.half_circumference_meters,b0.circumference_meters)-b0.half_circumference_meters,y:_r}},b0.metersToLatLng=function(j){var $=C0(j,2),_r=$[0],_i=$[1];return _r/=b0.half_circumference_meters,_i/=b0.half_circumference_meters,_i=(2*Math.atan(Math.exp(_i*Math.PI))-Math.PI/2)/Math.PI,[_r*=180,_i*=180]},b0.latLngToMeters=function(j){var $=C0(j,2),_r=$[0],_i=$[1],_i=Math.log(Math.tan(_i*Math.PI/360+Math.PI/4))/Math.PI;return _i*=b0.half_circumference_meters,_i=Math.min(Math.max(_i,-b0.half_circumference_meters),b0.half_circumference_meters),[_r*=b0.half_circumference_meters/180,_i]},b0.tileSpaceToMeters=function(j,$,_r){var _i=C0(j,2),_s=_i[0],ga=_i[1],_l=b0.unitsPerMeter($);return[_s/_l+_r.x,ga/_l+_r.y]},b0.tileSpaceToLatlng=function(j,$,_r){var _i=b0.unitsPerMeter($);return b0.transformGeometry(j,function(_s){_s[0]=_s[0]/_i+_r.x,_s[1]=_s[1]/_i+_r.y;var ga=C0(b0.metersToLatLng(_s),2),_l=ga[0],_c=ga[1];_s[0]=_l,_s[1]=_c}),j},b0.copyGeometry=function(j){if(j!=null){var $={type:j.type};return j.type==="Point"?$.coordinates=[j.coordinates[0],j.coordinates[1]]:j.type==="LineString"||j.type==="MultiPoint"?$.coordinates=j.coordinates.map(function(_r){return[_r[0],_r[1]]}):j.type==="Polygon"||j.type==="MultiLineString"?$.coordinates=j.coordinates.map(function(_r){return _r.map(function(_i){return[_i[0],_i[1]]})}):j.type==="MultiPolygon"&&($.coordinates=j.coordinates.map(function(_r){return _r.map(function(_i){return _i.map(function(_s){return[_s[0],_s[1]]})})})),$}},b0.transformGeometry=function(j,$){j!=null&&(j.type==="Point"?$(j.coordinates):j.type==="LineString"||j.type==="MultiPoint"?j.coordinates.forEach($):j.type==="Polygon"||j.type==="MultiLineString"?j.coordinates.forEach(function(_r){return _r.forEach($)}):j.type==="MultiPolygon"&&j.coordinates.forEach(function(_r){_r.forEach(function(_i){return _i.forEach($)})}))},b0.boxIntersect=function(j,$){return!($.sw.x>j.ne.x||$.ne.x<j.sw.x||$.sw.y>j.ne.y||$.ne.y<j.sw.y)},b0.findBoundingBox=function(j){for(var $=1/0,_r=-1/0,_i=1/0,_s=-1/0,ga=j[0].length,_l=0;_l<ga;_l++){var _c=j[0][_l];_c[0]<$&&($=_c[0]),_c[1]<_i&&(_i=_c[1]),_c[0]>_r&&(_r=_c[0]),_c[1]>_s&&(_s=_c[1])}return[$,_i,_r,_s]},b0.geometryType=function(j){return j==="Polygon"||j==="MultiPolygon"?"polygon":j==="LineString"||j==="MultiLineString"?"line":j==="Point"||j==="MultiPoint"?"point":void 0},b0.centroid=function(j){var $=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];if(j&&j.length!==0){var _r,_i=0,_s=0,ga=0,_l=j[0],_c=_l.length;$&&(_r=_l[0],_l=_l.map(function(cy){return[cy[0]-_r[0],cy[1]-_r[1]]}));for(var _p=0,_f=_c-1;_p<_c;_f=_p,_p++){var ey=_l[_p],iy=_l[_f],ly=ey[1]*iy[0]-iy[1]*ey[0];_i+=(ey[0]+iy[0])*ly,_s+=(ey[1]+iy[1])*ly,ga+=3*ly}var uy=[_i/ga,_s/ga];return $&&(uy[0]+=_r[0],uy[1]+=_r[1]),uy}},b0.multiCentroid=function(j){for(var $=j.length,_r=[0,0],_i=0;_i<j.length;_i++){var _s=b0.centroid(j[_i]);_r[0]+=_s[0],_r[1]+=_s[1]}return _r[0]/=$,_r[1]/=$,_r},b0.signedPolygonRingAreaSum=function(j){for(var $=0,_r=j.length,_i=0;_i<_r-1;_i++){var _s=j[_i],ga=j[_i+1];$+=_s[0]*ga[1]-ga[0]*_s[1]}return $+=j[_r-1][0]*j[0][1]-j[0][0]*j[_r-1][1]},b0.polygonRingArea=function(j){return Math.abs(b0.signedPolygonRingAreaSum(j))/2},b0.polygonArea=function(j){if(j)return b0.polygonRingArea(j[0])},b0.multiPolygonArea=function(j){for(var $=0,_r=0;_r<j.length;_r++)$+=b0.polygonArea(j[_r]);return $},b0.ringWinding=function(j){var $=b0.signedPolygonRingAreaSum(j);return 0<$?"CW":$<0?"CCW":void 0},b0.getTileBoundingBox=function(j,$){var _r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,_i=b0.wrapTile(j,{x:!0}),_s=b0.metersForTile(_i),ga=b0.metersPerPixel(_i.z),_l=b0.metersToLatLng([_s.x-_r*ga,_s.y+_r*ga]),_c=b0.metersToLatLng([_s.x+($+_r)*ga,_s.y-($+_r)*ga]),_p=b0.isLastTile(_i);return new _x.H.geo.Rect(j.y===0?90:L1.clamp(_l[1],-90,90),L1.clamp(_l[0],-180,180),_p.row?-90:L1.clamp(_c[1],-90,90),_p.column?180:L1.clamp(_c[0],-180,180))},b0.isLastTile=function(j){var $=j.x,_r=j.y,_i=j.z;return{row:_r===Math.pow(2,_i)-1,column:$===Math.pow(2,_i)-1}};var QA,tS,eS=function(){Z1($,z3(Error));var j=J1($);function $(_r){var _i;return F0(this,$),(_i=j.call(this)).name="MethodNotImplemented",_i.message="Method "+_r+" must be implemented in subclass",_i}return $}(),rS=!1,V3=!1;try{window.document!==HTMLDocument&&(V3=!0)}catch{self!==void 0&&(rS=!0,self.window={document:{}},self.document=self.window.document)}var $1={get is_fake_worker(){return self.is_fake_worker},get is_worker(){return tS!==void 0?tS:rS||self.is_fake_worker},set is_worker(j){tS=j},get is_main(){return QA!==void 0?QA:V3&&!self.is_fake_worker},set is_main(j){QA=j},is_native_worker:rS},S0={},tE=0,ax={},PT={},nS={};function iS(j,$,_r){var _i=2<arguments.length&&_r!==void 0?_r:PT,_s=[];if(typeof j=="string"&&(j=(_s=j.split(".")).pop()),$1.is_main&&$&&_s.length===1&&_s[0]==="self")_i=$;else for(var ga=0;ga<_s.length;ga++){if(!_i[_s[ga]])return[];_i=_i[_s[ga]]}return[j,_i]}S0.addTarget=function(j,$){$1.is_fake_worker?nS[j]=$:PT[j]=$},S0.removeTarget=function(j){delete PT[j],delete nS[j]};var oS=" No object with that name is registered on main thread.",sS=" Object has no method with that name.",H3="_worker_broker_error_not_set_";function eE(j){Array.isArray(j)&&j.filter(function($){return $.parent&&$.property}).forEach(function($){return delete $.parent[$.property]})}S0.withTransferables=function(){for(var j=arguments.length,$=new Array(j),_r=0;_r<j;_r++)$[_r]=arguments[_r];if(!(this instanceof S0.withTransferables))return LT(S0.withTransferables,$);this.value=$,this.transferables=function _i(_s){var ga=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,_l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,_c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:[];if(!_s)return _c;if(Array.isArray(_s))_s.forEach(function(_f,ey){return _i(_f,_s,ey,_c)});else if(x1(_s)==="object")if(_s instanceof ArrayBuffer)_c.push({object:_s,parent:ga,property:_l});else if(_s.buffer instanceof ArrayBuffer)_c.push({object:_s.buffer,parent:ga,property:_l});else for(var _p in _s)_i(_s[_p],_s,_p,_c);return _c}(this.value)},$1.is_main&&(S0.postMessage=function(j,$){for(var _r=arguments.length,_i=new Array(2<_r?_r-2:0),_s=2;_s<_r;_s++)_i[_s-2]=arguments[_s];if(Array.isArray(j))return Promise.all(j.map(function(iy){return S0.postMessage.apply(S0,[iy,$].concat(u1(_i)))}));var ga,_l={};x1($)==="object"&&($=(_l=$).method);var _c="main_send";typeof j=="string"?($=j,_i=Array.prototype.slice.call(arguments,1),ga=!0,_c="worker_send"):j.init&&(ga=!0);var _p,_f=[];if(_i&&_i.length===1&&_i[0]instanceof S0.withTransferables&&(_f=_i[0].transferables,_i=_i[0].value),_p={type:_c,message_id:++tE,method:$,message:_i},ga)return function(iy,ly){var uy=iy.type,cy=C0(iS(iy.method,ly,uy==="main_send"?nS:PT),2),yy=cy[0],ay=cy[1],by="Worker broker could not dispatch message type ".concat(iy.method," on target ").concat(iy.target,".");if(!ay)throw Error(by+oS);var Ey=typeof ay[yy]=="function"&&ay[yy];if(!Ey)throw Error(by+sS);return new Promise(function(ky,Oy){var Ty;try{Ty=Ey.apply(ay,iy.message)}catch(Ly){return void Oy(Ly)}Ty instanceof Promise?Ty.then(function(Ly){Ly instanceof S0.withTransferables&&(Ly=Ly.value[0]),ky(Ly)},function(Ly){Oy(Ly instanceof Error?"".concat(Ly.message,": ").concat(Ly.stack):Ly)}):(Ty instanceof S0.withTransferables&&(Ty=Ty.value[0]),ky(Ty))})}(_p,j&&j.init?j:void 0);var ey=new Promise(function(iy,ly){ax[tE]={method:$,message:_i,resolve:iy,reject:ly}});return _l.stringify&&(_p=JSON.stringify(_p)),j.postMessage(_p,_f.map(function(iy){return iy.object})),eE(_f),ey},S0.addWorker=function(j){if(!(j instanceof Worker))throw Error("Worker broker could not add non-Worker object",j);j.addEventListener("message",function($){var _r=typeof $.data=="string"?JSON.parse($.data):$.data,_i=_r.message_id;if(_r.type==="worker_reply")ax[_i]&&(_r.error?ax[_i].reject(_r.error):ax[_i].resolve(_r.message),delete ax[_i]);else if(_r.type==="worker_send"&&_i!=null){var _s=C0(iS(_r.method),2),ga=_s[0],_l=_s[1],_c="Worker broker could not dispatch message type ".concat(_r.method," on target ").concat(_r.target,".");if(!_l)throw Error(_c+oS);var _p=typeof _l[ga]=="function"&&_l[ga];if(!_p)throw Error(_c+sS);var _f,ey=H3;try{_f=_p.apply(_l,_r.message)}catch(uy){ey=uy}var iy,ly=[];_f&&typeof _f.then=="function"?_f.then(function(uy){uy instanceof S0.withTransferables&&(ly=uy.transferables,uy=uy.value[0]),iy={type:"main_reply",message_id:_i,message:uy},j.postMessage(iy,ly.map(function(cy){return cy.object})),eE(ly)},function(uy){j.postMessage({type:"main_reply",message_id:_i,error:uy instanceof Error?"".concat(uy.message,": ").concat(uy.stack):uy})}):(_f instanceof S0.withTransferables&&(ly=_f.transferables,_f=_f.value[0]),iy={type:"main_reply",message_id:_i,message:_f,error:ey instanceof Error?"".concat(ey.message,": ").concat(ey.stack):ey},j.postMessage(iy,ly.map(function(uy){return uy.object})),eE(ly))}})},S0.getMessages=function(){return ax},S0.getMessageId=function(){return tE}),$1.is_worker&&(S0.postMessage=function(j){for(var $=arguments.length,_r=new Array(1<$?$-1:0),_i=1;_i<$;_i++)_r[_i-1]=arguments[_i];var _s={};x1(j)==="object"&&(j=(_s=j).method);var ga,_l=new Promise(function(_p,_f){ax[tE]={method:j,message:_r,resolve:_p,reject:_f}}),_c=[];return _r&&_r.length===1&&_r[0]instanceof S0.withTransferables&&(_c=_r[0].transferables,_r=_r[0].value),ga={type:"worker_send",message_id:tE,method:j,message:_r},_s.stringify&&(ga=JSON.stringify(ga)),self.postMessage(ga,_c.map(function(_p){return _p.object})),eE(_c),tE++,_l},self.addEventListener("message",function(j){var $=typeof j.data=="string"?JSON.parse(j.data):j.data,_r=$.message_id;if($.type==="main_reply")ax[_r]&&($.hasOwnProperty("error")&&$.error!==H3?ax[_r].reject($.error):ax[_r].resolve($.message),delete ax[_r]);else if($.type==="main_send"&&_r!=null){var _i=C0(iS($.method),2),_s=_i[0],ga=_i[1],_l="Worker broker could not dispatch message type ".concat($.method," on target ").concat($.target,".");if(!ga)throw Error(_l+oS);var _c,_p,_f=typeof ga[_s]=="function"&&ga[_s];if(!_f)throw Error(_l+sS);try{_c=_f.apply(ga,$.message)}catch(ly){_p=ly}var ey,iy=[];_c instanceof Promise?_c.then(function(ly){ly instanceof S0.withTransferables&&(iy=ly.transferables,ly=ly.value[0]),ey={type:"worker_reply",message_id:_r,message:ly},self.postMessage(ey,iy.map(function(uy){return uy.object})),eE(iy)},function(ly){self.postMessage({type:"worker_reply",message_id:_r,error:ly instanceof Error?"".concat(ly.message,": ").concat(ly.stack):ly})}):(_c instanceof S0.withTransferables&&(iy=_c.transferables,_c=_c.value[0]),ey={type:"worker_reply",message_id:_r,message:_c,error:_p instanceof Error?"".concat(_p.message,": ").concat(_p.stack):_p},self.postMessage(ey,iy.map(function(ly){return ly.object})),eE(iy))}}));var c1,q3={silent:-1,error:0,warn:1,info:2,debug:3,trace:4},aS={},lS={};function o0(j){var $,_r=x1(j)==="object"?j.level:j;if(q3[_r]<=q3[o0.level]){for(var _i=arguments.length,_s=new Array(1<_i?_i-1:0),ga=1;ga<_i;ga++)_s[ga-1]=arguments[ga];if($1.is_native_worker)S0.postMessage.apply(S0,[{method:"_logProxy",stringify:!0},j].concat(_s));else{if(x1(j)==="object"&&j.once===!0){if(lS[JSON.stringify(_s)])return;lS[JSON.stringify(_s)]=!0}var _l=(aS[$=_r]=aS[$]||(console[$]?console[$]:console.log).bind(console),aS[$]);1<_s.length?_l.apply(void 0,["Tangram [".concat(_r,"]: ").concat(_s[0])].concat(u1(_s.slice(1)))):_l("Tangram [".concat(_r,"]: ").concat(_s[0]))}}}function NT(j,$,_r){var _i,_s;return _r=_r||0,function(){var ga=this,_l=arguments;function _c(){_s=0,j.apply(ga,_l)}clearTimeout(_i),_s&&_r&&Date.now()-_s>=_r?_c():(_s=_s||Date.now(),_i=setTimeout(function(){_c()},$))}}o0.level="info",o0.workers=null,o0.setLevel=function(j){o0.level=j,$1.is_main&&Array.isArray(o0.workers)&&S0.postMessage(o0.workers,"_logSetLevelProxy",j)},$1.is_main&&(o0.setWorkers=function(j){o0.workers=j},o0.reset=function(){lS={}}),S0.addTarget("_logProxy",o0),S0.addTarget("_logSetLevelProxy",o0.setLevel);var q0=c1={};S0.addTarget("Utils",c1),c1.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},c1.isMicrosoft=function(){return/(Trident\/7.0|Edge[ /](\d+[\.\d]+))/i.test(navigator.userAgent)},c1._requests={},c1._proxy_requests={},c1.io=function(j){var $=1<arguments.length&&arguments[1]!==void 0?arguments[1]:6e4,_r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"text",_i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"GET",_s=4<arguments.length&&arguments[4]!==void 0?arguments[4]:{},ga=5<arguments.length&&arguments[5]!==void 0?arguments[5]:null,_l=6<arguments.length&&arguments[6]!==void 0&&arguments[6];if($1.is_worker&&c1.isMicrosoft())return o0("debug","Proxying request for URL to worker",j),ga&&(c1._proxy_requests[ga]=!0),S0.postMessage("Utils.io",j,$,_r,_i,_s,ga,!0);var _c=new XMLHttpRequest,_p=(_p=new Promise(function(_f,ey){_c.open(_i,j,!0),_c.timeout=$,_c.responseType=_r,_c.onload=function(){_c.status===200?-1<["text","json"].indexOf(_c.responseType)?_f(_c.responseText):_f(_c.response):ey(Error("Request error with a status of "+_c.statusText))},_c.onerror=function(iy){ey(Error("There was a network error"+iy.toString()))},_c.ontimeout=function(iy){ey(Error("timeout "+iy.toString()))},_c.send()})).then(function(_f){return ga&&delete c1._requests[ga],_l?S0.withTransferables(_f):_f});return ga&&(c1._requests[ga]=_c),_p},c1.cancelRequest=function(j){if($1.is_worker&&c1._proxy_requests[j])return S0.postMessage("Utils.cancelRequest",j);c1._requests[j]?(o0("trace","Cancelling network request key '".concat(j,"'")),c1._requests[j].abort(),delete c1._requests[j]):o0("trace","Could not find network request key '".concat(j,"'"))},c1.requestAnimationFramePolyfill=function(){typeof window.requestAnimationFrame!="function"&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(j){setTimeout(j,16.666666666666668)})},c1.serializeWithFunctions=function(j){return typeof j=="function"?j.toString():JSON.stringify(j,function($,_r){return typeof _r=="function"?_r.toString():_r})},c1.stringsToFunctions=function(j,$){if(typeof j=="string")j=c1.stringToFunction(j,$);else if(j!=null&&x1(j)==="object")for(var _r in j)j[_r]=c1.stringsToFunctions(j[_r],$);return j},c1._use_count=0,c1._function_cache={};var ZE,JE,yI=NT(function(){o0("trace","Cleared cached ".concat(Object.keys(c1._function_cache).length," functions (reused ").concat(c1._use_count," times)")),c1._use_count=0,c1._function_cache={}},1e4),gI=/^\s*function[^(]*\(([^)]*)\)\s*?\{([\s\S]*)\}$/m;function QE(j){if(typeof j!="string"||j.search(/^(data|blob):/)!==-1)return"";var $=j.indexOf("?");-1<$&&(j=j.substr(0,$));var _r=j.indexOf("#");return-1<_r&&(j=j.substr(0,_r)),j.substr(0,j.lastIndexOf("/")+1)||""}function jT(j){return typeof j=="string"&&!(-1<j.search(/^(http|https|data|blob):/)||j.substr(0,2)==="//")}function vI(j,$){if(!$||Object.keys($).length===0)return[j,[]];var _r=j.indexOf("?"),_i=j.indexOf("#"),_s="";-1<_i&&(_s=j.slice(_i),j=j.slice(0,_i)),_r===-1&&(_r=j.length,j+="?"),_r++;var ga="",_l=[];for(var _c in $)(function(_p,_f){_p=_p.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var ey=new RegExp("[\\?&]"+_p+"=([^&#]*)").exec(_f);return ey===null?"":decodeURIComponent(ey[1].replace(/\+/g," "))})(_c,j)===""?ga+="".concat(_c,"=").concat($[_c],"&"):_l.push([_c,$[_c]]);return[j=j.slice(0,_r)+ga+j.slice(_r)+_s,_l]}function uS(j){return ZE===void 0&&typeof(ZE=window.URL&&window.URL.createObjectURL||window.webkitURL&&window.webkitURL.createObjectURL)!="function"&&(ZE=null,o0("warn","window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs")),ZE?ZE(j):j}c1.stringToFunction=function(j,$){var _r=j;$&&(_r+=$.toString());var _i=c1._function_cache[_r];if(yI(),_i)return c1._use_count++,_i;var _s=typeof j=="string"&&j.match(gI);if(_s&&2<_s.length)try{var ga=_s[2],_l=0<(_l=0<_s[1].length&&_s[1].split(",").map(function(_p){return _p.trim()}).filter(function(_p){return _p})).length?_l:["context"],_c=new Function(_l.toString(),typeof $=="function"?$(ga):ga);return c1._function_cache[_r]=_c}catch{return j}return j},c1.device_pixel_ratio=1,c1.isPowerOf2=function(j){return(j&j-1)==0},c1.interpolate=function(j,$,_r){if(!Array.isArray($)||!Array.isArray($[0])||$.length<1)return $;var _i,_s,ga,_l,_c;if(j<=$[0][0])_l=$[0][1],typeof _r=="function"&&(_l=_r(_l));else if(j>=$[$.length-1][0])_l=$[$.length-1][1],typeof _r=="function"&&(_l=_r(_l));else for(var _p=0;_p<$.length-1;_p++)if(j>=$[_p][0]&&j<$[_p+1][0]){if(_i=$[_p][0],_s=$[_p+1][0],Array.isArray($[_p][1])){_l=[];for(var _f=0;_f<$[_p][1].length;_f++)typeof _r=="function"?(_c=_r($[_p][1][_f]),ga=_r($[_p+1][1][_f])-_c,_l[_f]=ga*(j-_i)/(_s-_i)+_c):(ga=$[_p+1][1][_f]-$[_p][1][_f],_l[_f]=ga*(j-_i)/(_s-_i)+$[_p][1][_f])}else _l=typeof _r=="function"?(_c=_r($[_p][1]),(ga=_r($[_p+1][1])-_c)*(j-_i)/(_s-_i)+_c):(ga=$[_p+1][1]-$[_p][1])*(j-_i)/(_s-_i)+$[_p][1];break}return _l},c1.toCSSColor=function(j){return j[3]===1?"rgb(".concat(j.slice(0,3).map(function($){return Math.round(255*$)}).join(", "),")"):"rgba(".concat(j.map(function($,_r){return _r<3&&Math.round(255*$)||$}).join(", "),")")},c1.pointInTile=function(j){return 0<=j[0]&&j[1]>-Zy.tile_scale&&j[0]<Zy.tile_scale&&j[1]<=0},c1.zoomToTileLevel=function(j){return Math.floor(j)};var g_=function(){function j($,_r){var _i=this;if(F0(this,j),this.config=$,this.sources=_r,this.id=$.id,this.name=$.name,this.pad_scale=$.pad_scale||1e-4,this.default_winding=null,this.rasters=[],Array.isArray($.rasters)&&$.rasters.forEach(function(ga){_i.rasters.indexOf(ga)===-1&&_i.rasters.push(ga)}),this.preprocess=$.preprocess,typeof this.preprocess=="function"&&this.preprocess.bind(this),this.transform=$.transform,typeof this.transform=="function")this.transform=this.transform.bind(this);else if(x1(this.transform)==="object")for(var _s in this.transform)typeof this.transform[_s]=="function"&&(this.transform[_s]=this.transform[_s].bind(this));this.extra_data=$.extra_data,this.scripts=$.scripts,this.max_zoom=$.max_zoom!=null?$.max_zoom:Zy.default_source_max_zoom,this.setTileSize($.tile_size),this.max_coord_zoom=this.max_zoom+this.zoom_bias,this.min_display_zoom=$.min_display_zoom!=null?$.min_display_zoom:0,this.max_display_zoom=$.max_display_zoom!=null?$.max_display_zoom:null,this._has_volatile_data=!!$.has_volatile_data}return H0(j,[{key:"hasLabeledData",value:function(){return!0}},{key:"_transformTile",value:function($){if($.source_data.layers){var _r={coords:$.coords},_i=[];if(typeof this.transform=="function")_i.push(this.transform);else if(x1(this.transform)==="object")for(var _s=Object.keys(this.transform).sort(),ga=0;ga<_s.length;ga++)_i.push(this.transform[_s[ga]]);for(var _l=Object.keys($.source_data.layers).length===1&&$.source_data.layers._default,_c=0;_c<_i.length;_c++)_l?$.source_data.layers._default=_i[_c]($.source_data.layers._default,this.extra_data,_r):$.source_data.layers=_i[_c]($.source_data.layers,this.extra_data,_r)}}},{key:"_postProcessTile",value:function($){var _r=this;for(var _i in this._transformTile($),$.source_data.layers){var _s=$.source_data.layers[_i];_s&&_s.features&&_s.features.forEach(function(ga){Zy.transformGeometry(ga.geometry,function(_l){_l[1]=-_l[1],_r.pad_scale&&(_l[0]=Math.round(_l[0]*(1+_r.pad_scale)-Zy.tile_scale*_r.pad_scale/2),_l[1]=Math.round(_l[1]*(1+_r.pad_scale)-Zy.tile_scale*_r.pad_scale/2))}),_r.updateDefaultWinding(ga.geometry)})}$.default_winding=this.default_winding||"CCW"}},{key:"load",value:function($){return $.source_data={},$.source_data.layers={},$.pad_scale=this.pad_scale,$.rasters=u1(this.rasters),this._load($)}},{key:"_load",value:function(){throw new eS("_load")}},{key:"setTileSize",value:function($){this.tile_size=$||256,(typeof this.tile_size!="number"||this.tile_size<256||!q0.isPowerOf2(this.tile_size))&&(o0({level:"warn",once:!0},"Data source '".concat(this.name,"': 'tile_size' parameter must be a number that is a power of 2 greater than or equal to 256, but was '").concat($,"'")),this.tile_size=256),this.zoom_bias=Math.log2(this.tile_size)-8}},{key:"updateDefaultWinding",value:function($){return this.default_winding==null&&($.type==="Polygon"?this.default_winding=Zy.ringWinding($.coordinates[0]):$.type==="MultiPolygon"&&(this.default_winding=Zy.ringWinding($.coordinates[0][0]))),this.default_winding}},{key:"includesTile",value:function($,_r){if($.z<this.min_display_zoom||this.max_display_zoom!=null&&_r>this.max_display_zoom)return!1;for(var _i=0;_i<this.rasters.length;_i++){var _s=this.rasters[_i];if(this.sources[_s]&&this.sources[_s]!==this&&!this.sources[_s].includesTile($,$.z))return!1}return!0}},{key:"has_volatile_data",get:function(){return this._has_volatile_data},set:function($){var _r=0<arguments.length&&$!==void 0&&$;this._has_volatile_data=_r}}],[{key:"create",value:function($,_r){for(var _i in _r)if(_r[_i].config.name===$.name&&j.sameConfig(_r[_i],{config:$}))return _r[_i];if(j.types[$.type])return new j.types[$.type]($,_r)}},{key:"sameConfig",value:function($,_r){if(!$||!_r)return!1;var _i=Object.assign({},$.config,{id:null,tiled:null,url:null}),_s=Object.assign({},_r.config,{id:null,tiled:null,url:null});return JSON.stringify(_i)===JSON.stringify(_s)}},{key:"coordsToMeters",value:function($){var _r=C0(Zy.latLngToMeters($),2),_i=_r[0],_s=_r[1];$[0]=_i,$[1]=_s}},{key:"projectData",value:function($){for(var _r in $.layers)for(var _i=$.layers[_r].features.length,_s=0;_s<_i;_s++){var ga=$.layers[_r].features[_s];Zy.transformGeometry(ga.geometry,j.coordsToMeters)}}},{key:"metersToTileUnits",value:function($,_r,_i){_i[0]=Math.round((_i[0]-_r.x)*$),_i[1]=-1*Math.round((_i[1]-_r.y)*$)}},{key:"scaleData",value:function($,_r){var _i=_r.coords.z,_s=_r.min,ga=(_r.max,j.metersToTileUnits.bind(this,Zy.unitsPerMeter(_i),_s));for(var _l in $.layers)for(var _c=$.layers[_l].features.length,_p=0;_p<_c;_p++){var _f=$.layers[_l].features[_p];Zy.transformGeometry(_f.geometry,ga)}}},{key:"register",value:function($,_r){$&&_r&&(j.types[_r]=$)}}]),j}();g_.types={};var mI=0,_I=function(){Z1($,g_);var j=J1($);function $(_r,_i){var _s;F0(this,$),(_s=j.call(this,_r,_i)).response_type="";var ga=C0(vI(_r.url,_r.url_params),2),_l=ga[0],_c=ga[1];if(_s.url=_l,_c.forEach(function(_p){var _f=C0(_p,2),ey=_f[0],iy=_f[1];o0({level:"warn",once:!0},"Data source '".concat(_s.name,"': parameter '").concat(ey,"' already present in URL '").concat(_r.url,"', ")+"skipping value '".concat(ey,"=").concat(iy,"' specified in 'url_params'"))}),typeof _s.url!="string")throw Error("Network data source must provide a string `url` property");return _s}return H0($,[{key:"_load",value:function(_r){var _i=this,_s=this.formatUrl(this.url,_r),ga=_r.source_data;return ga.url=_s,new Promise(function(_l,_c){ga.error=null;var _p=mI+++"-"+_s,_f=q0.io(_s,6e4,_i.response_type,"GET",{},_p);ga.request_id=_p,_f.then(function(ey){typeof _i.preprocess=="function"&&(ey=_i.preprocess(ey)),(ey=ey instanceof Promise?ey:Promise.resolve(ey)).then(function(iy){_i.parseSourceData(_r,ga,iy),_i._postProcessTile(_r),_l(_r)})},function(ey){ga.error=ey.stack,_i._postProcessTile(_r),_l(_r)})})}},{key:"formatUrl",value:function(){throw new eS("formatUrl")}},{key:"parseSourceData",value:function(){throw new eS("parseSourceData")}}]),$}(),bI=function(){Z1($,_I);var j=J1($);function $(_r,_i){var _s;return F0(this,$),(_s=j.call(this,_r,_i)).tiled=!0,_s.parseBounds(_r),_s.builds_geometry_tiles=!1,_s.tms=_r.tms===!0,-1<_s.url.search("{s}")&&(Array.isArray(_r.url_subdomains)&&0<_r.url_subdomains.length?(_s.url_subdomains=_r.url_subdomains,_s.next_url_subdomain=0):o0({level:"warn",once:!0},"Data source '".concat(_s.name,"': source URL includes '{s}' subdomain marker ('").concat(_s.url,"'), but no subdomains ")+"were specified in 'url_subdomains' parameter")),_s}return H0($,[{key:"parseBounds",value:function(_r){var _i,_s,ga,_l,_c;Array.isArray(_r.bounds)&&_r.bounds.length===4&&(this.bounds=_r.bounds,_s=(_i=C0(this.bounds,4))[0],ga=_i[1],_l=_i[2],_c=_i[3],this.bounds_meters={min:Zy.latLngToMeters([_s,_c]),max:Zy.latLngToMeters([_l,ga])},this.bounds_tiles={min:{},max:{}})}},{key:"checkBounds",value:function(_r){if(this.bounds){_r=Zy.wrapTile(_r,{x:!0});var _i=(_i=this.bounds_tiles.min[_r.z])||(this.bounds_tiles.min[_r.z]=Zy.tileForMeters(this.bounds_meters.min,_r.z)),_s=(_s=this.bounds_tiles.max[_r.z])||(this.bounds_tiles.max[_r.z]=Zy.tileForMeters(this.bounds_meters.max,_r.z));if(_r.x<_i.x||_r.x>_s.x||_r.y<_i.y||_r.y>_s.y)return!1}return!0}},{key:"includesTile",value:function(_r,_i){return!!sx(w_($.prototype),"includesTile",this).call(this,_r,_i)&&!!this.checkBounds(_r)}},{key:"formatUrl",value:function(_r,_i){var _s=Zy.wrapTile(_i.coords,{x:!0});this.tms&&(_s.y=Math.pow(2,_s.z)-1-_s.y);var ga=_r.replace("{x}",_s.x).replace("{y}",_s.y).replace("{z}",_s.z);return this.url_subdomains!=null&&(ga=ga.replace("{s}",this.url_subdomains[this.next_url_subdomain]),this.next_url_subdomain=(this.next_url_subdomain+1)%this.url_subdomains.length),ga}},{key:"urlHasTilePattern",value:function(_r){return _r&&-1<_r.search("{x}")&&-1<_r.search("{y}")&&-1<_r.search("{z}")}}]),$}(),bx=function(){Z1($,g_);var j=J1($);function $(_r,_i){var _s;return F0(this,$),(_s=j.call(this,_r,_i)).target_name="MapsJsSource"+_r.uid,_s.tiled=!!_r.tiled,S0.addTarget(_s.target_name,WA(_s)),$1.is_worker&&S0.postMessage(_s.target_name+".onWorkerInitialized"),$1.is_main&&(_s._workers_left=0),_s}return H0($,[{key:"initialize",value:function(_r,_i,_s,ga){this._main_initialized||(this.provider=_r,this.worker=ga,this._workers_left+=_s,this._on_update=_i,this._main_initialized=!0,this._onProviderUpdate=this._onProviderUpdate.bind(this),_r.addEventListener("update",this._onProviderUpdate),this._isReady()&&this.onReady())}},{key:"onWorkerInitialized",value:function(){--this._workers_left,this._isReady()&&this.onReady()}},{key:"onReady",value:function(){}},{key:"_isReady",value:function(){return this._main_initialized&&!this._workers_left}},{key:"_onProviderUpdate",value:function(_r){this._isReady()&&this.onProviderUpdate(_r)}},{key:"onProviderUpdate",value:function(_r){this.dispatchUpdate(void 0,_r.data)}},{key:"dispatchUpdate",value:function(_r,_i){this._on_update(this.name,_r,_i)}},{key:"dispose",value:function(){S0.removeTarget(this.target_name),this.provider.removeEventListener("update",this._onProviderUpdate)}}]),$}(),$3=function(j,$,_r,_i,_s){var ga,_l,_c=8*_s-_i-1,_p=(1<<_c)-1,_f=_p>>1,ey=-7,iy=_r?_s-1:0,ly=_r?-1:1,uy=j[$+iy];for(iy+=ly,ga=uy&(1<<-ey)-1,uy>>=-ey,ey+=_c;0<ey;ga=256*ga+j[$+iy],iy+=ly,ey-=8);for(_l=ga&(1<<-ey)-1,ga>>=-ey,ey+=_i;0<ey;_l=256*_l+j[$+iy],iy+=ly,ey-=8);if(ga===0)ga=1-_f;else{if(ga===_p)return _l?NaN:1/0*(uy?-1:1);_l+=Math.pow(2,_i),ga-=_f}return(uy?-1:1)*_l*Math.pow(2,ga-_i)},W3=function(j,$,_r,_i,_s,ga){var _l,_c,_p,_f=8*ga-_s-1,ey=(1<<_f)-1,iy=ey>>1,ly=_s===23?Math.pow(2,-24)-Math.pow(2,-77):0,uy=_i?0:ga-1,cy=_i?1:-1,yy=$<0||$===0&&1/$<0?1:0;for($=Math.abs($),isNaN($)||$===1/0?(_c=isNaN($)?1:0,_l=ey):(_l=Math.floor(Math.log($)/Math.LN2),$*(_p=Math.pow(2,-_l))<1&&(_l--,_p*=2),2<=($+=1<=_l+iy?ly/_p:ly*Math.pow(2,1-iy))*_p&&(_l++,_p/=2),ey<=_l+iy?(_c=0,_l=ey):1<=_l+iy?(_c=($*_p-1)*Math.pow(2,_s),_l+=iy):(_c=$*Math.pow(2,iy-1)*Math.pow(2,_s),_l=0));8<=_s;j[_r+uy]=255&_c,uy+=cy,_c/=256,_s-=8);for(_l=_l<<_s|_c,_f+=_s;0<_f;j[_r+uy]=255&_l,uy+=cy,_l/=256,_f-=8);j[_r+uy-cy]|=128*yy},xI=V1;function V1(j){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(j)?j:new Uint8Array(j||0),this.pos=0,this.type=0,this.length=this.buf.length}V1.Varint=0,V1.Fixed64=1,V1.Bytes=2,V1.Fixed32=5;var cS=4294967296,Y3=1/cS;function jx(j){return j.type===V1.Bytes?j.readVarint()+j.pos:j.pos+1}function rE(j,$,_r){return _r?4294967296*$+(j>>>0):4294967296*($>>>0)+(j>>>0)}function K3(j,$,_r){var _i=$<=16383?1:$<=2097151?2:$<=268435455?3:Math.ceil(Math.log($)/(7*Math.LN2));_r.realloc(_i);for(var _s=_r.pos-1;j<=_s;_s--)_r.buf[_s+_i]=_r.buf[_s]}function wI(j,$){for(var _r=0;_r<j.length;_r++)$.writeVarint(j[_r])}function EI(j,$){for(var _r=0;_r<j.length;_r++)$.writeSVarint(j[_r])}function kI(j,$){for(var _r=0;_r<j.length;_r++)$.writeFloat(j[_r])}function TI(j,$){for(var _r=0;_r<j.length;_r++)$.writeDouble(j[_r])}function AI(j,$){for(var _r=0;_r<j.length;_r++)$.writeBoolean(j[_r])}function SI(j,$){for(var _r=0;_r<j.length;_r++)$.writeFixed32(j[_r])}function CI(j,$){for(var _r=0;_r<j.length;_r++)$.writeSFixed32(j[_r])}function MI(j,$){for(var _r=0;_r<j.length;_r++)$.writeFixed64(j[_r])}function II(j,$){for(var _r=0;_r<j.length;_r++)$.writeSFixed64(j[_r])}function DT(j,$){return(j[$]|j[$+1]<<8|j[$+2]<<16)+16777216*j[$+3]}function nE(j,$,_r){j[_r]=$,j[_r+1]=$>>>8,j[_r+2]=$>>>16,j[_r+3]=$>>>24}function X3(j,$){return(j[$]|j[$+1]<<8|j[$+2]<<16)+(j[$+3]<<24)}function OI(j){var $={};for(var _r in j.layers){for(var _i=j.layers[_r],_s=[],ga=Zy.tile_scale/_i.extent,_l=0,_c=_i.length;_l<_c;_l++){var _p=_i.feature(_l),_f=U3.types[_p.type],ey=_p.loadGeometry(ga),iy=null;switch(_f){case"Point":iy=function(ly){var uy=ly.coordinates.length;if(1<uy){ly.type="MultiPoint";for(var cy=[],yy=0;yy<uy;yy++)cy.push(ly.coordinates[yy][0]);ly.coordinates=cy}else ly.type="Point",ly.coordinates=ly.coordinates[0][0];return ly}({coordinates:ey});break;case"LineString":iy=ey.length===1?{type:_f,coordinates:ey[0]}:{type:"MultiLineString",coordinates:ey};break;case"Polygon":iy=J3({coordinates:ey})}iy&&iy.coordinates&&_s.push({type:"Feature",geometry:iy,properties:_p.properties})}$[_r]={type:"FeatureCollection",features:_s}}return $}V1.prototype={destroy:function(){this.buf=null},readFields:function(j,$,_r){for(_r=_r||this.length;this.pos<_r;){var _i=this.readVarint(),_s=_i>>3,ga=this.pos;this.type=7&_i,j(_s,$,this),this.pos===ga&&this.skip(_i)}return $},readMessage:function(j,$){return this.readFields(j,$,this.readVarint()+this.pos)},readFixed32:function(){var j=DT(this.buf,this.pos);return this.pos+=4,j},readSFixed32:function(){var j=X3(this.buf,this.pos);return this.pos+=4,j},readFixed64:function(){var j=DT(this.buf,this.pos)+DT(this.buf,this.pos+4)*cS;return this.pos+=8,j},readSFixed64:function(){var j=DT(this.buf,this.pos)+X3(this.buf,this.pos+4)*cS;return this.pos+=8,j},readFloat:function(){var j=$3(this.buf,this.pos,!0,23,4);return this.pos+=4,j},readDouble:function(){var j=$3(this.buf,this.pos,!0,52,8);return this.pos+=8,j},readVarint:function(j){var $=this.buf,_r=$[this.pos++],_i=127&_r;return _r<128?_i:(_i|=(127&(_r=$[this.pos++]))<<7,_r<128?_i:(_i|=(127&(_r=$[this.pos++]))<<14,_r<128?_i:(_i|=(127&(_r=$[this.pos++]))<<21,_r<128?_i:function(_s,ga,_l){var _c,_p,_f=_l.buf;if(_p=_f[_l.pos++],_c=(112&_p)>>4,_p<128||(_p=_f[_l.pos++],_c|=(127&_p)<<3,_p<128)||(_p=_f[_l.pos++],_c|=(127&_p)<<10,_p<128)||(_p=_f[_l.pos++],_c|=(127&_p)<<17,_p<128)||(_p=_f[_l.pos++],_c|=(127&_p)<<24,_p<128)||(_p=_f[_l.pos++],_c|=(1&_p)<<31,_p<128))return rE(_s,_c,ga);throw new Error("Expected varint not more than 10 bytes")}(_i|=(15&(_r=$[this.pos]))<<28,j,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var j=this.readVarint();return j%2==1?(j+1)/-2:j/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var j=this.readVarint()+this.pos,$=function(_r,_i,_s){for(var ga,_l,_c,_p="",_f=_i;_f<_s;){var ey=_r[_f],iy=null,ly=239<ey?4:223<ey?3:191<ey?2:1;if(_s<_f+ly)break;ly===1?ey<128&&(iy=ey):ly===2?(192&(ga=_r[_f+1]))==128&&(iy=(31&ey)<<6|63&ga)<=127&&(iy=null):ly===3?(ga=_r[_f+1],_l=_r[_f+2],(192&ga)==128&&(192&_l)==128&&((iy=(15&ey)<<12|(63&ga)<<6|63&_l)<=2047||55296<=iy&&iy<=57343)&&(iy=null)):ly===4&&(ga=_r[_f+1],_l=_r[_f+2],_c=_r[_f+3],(192&ga)==128&&(192&_l)==128&&(192&_c)==128&&((iy=(15&ey)<<18|(63&ga)<<12|(63&_l)<<6|63&_c)<=65535||1114112<=iy)&&(iy=null)),iy===null?(iy=65533,ly=1):65535<iy&&(iy-=65536,_p+=String.fromCharCode(iy>>>10&1023|55296),iy=56320|1023&iy),_p+=String.fromCharCode(iy),_f+=ly}return _p}(this.buf,this.pos,j);return this.pos=j,$},readBytes:function(){var j=this.readVarint()+this.pos,$=this.buf.subarray(this.pos,j);return this.pos=j,$},readPackedVarint:function(j,$){var _r=jx(this);for(j=j||[];this.pos<_r;)j.push(this.readVarint($));return j},readPackedSVarint:function(j){var $=jx(this);for(j=j||[];this.pos<$;)j.push(this.readSVarint());return j},readPackedBoolean:function(j){var $=jx(this);for(j=j||[];this.pos<$;)j.push(this.readBoolean());return j},readPackedFloat:function(j){var $=jx(this);for(j=j||[];this.pos<$;)j.push(this.readFloat());return j},readPackedDouble:function(j){var $=jx(this);for(j=j||[];this.pos<$;)j.push(this.readDouble());return j},readPackedFixed32:function(j){var $=jx(this);for(j=j||[];this.pos<$;)j.push(this.readFixed32());return j},readPackedSFixed32:function(j){var $=jx(this);for(j=j||[];this.pos<$;)j.push(this.readSFixed32());return j},readPackedFixed64:function(j){var $=jx(this);for(j=j||[];this.pos<$;)j.push(this.readFixed64());return j},readPackedSFixed64:function(j){var $=jx(this);for(j=j||[];this.pos<$;)j.push(this.readSFixed64());return j},skip:function(j){var $=7&j;if($===V1.Varint)for(;127<this.buf[this.pos++];);else if($===V1.Bytes)this.pos=this.readVarint()+this.pos;else if($===V1.Fixed32)this.pos+=4;else{if($!==V1.Fixed64)throw new Error("Unimplemented type: "+$);this.pos+=8}},writeTag:function(j,$){this.writeVarint(j<<3|$)},realloc:function(j){for(var $,_r=this.length||16;_r<this.pos+j;)_r*=2;_r!==this.length&&(($=new Uint8Array(_r)).set(this.buf),this.buf=$,this.length=_r)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(j){this.realloc(4),nE(this.buf,j,this.pos),this.pos+=4},writeSFixed32:function(j){this.realloc(4),nE(this.buf,j,this.pos),this.pos+=4},writeFixed64:function(j){this.realloc(8),nE(this.buf,-1&j,this.pos),nE(this.buf,Math.floor(j*Y3),this.pos+4),this.pos+=8},writeSFixed64:function(j){this.realloc(8),nE(this.buf,-1&j,this.pos),nE(this.buf,Math.floor(j*Y3),this.pos+4),this.pos+=8},writeVarint:function(j){268435455<(j=+j||0)||j<0?function($,_r){var _i,_s;if(0<=$?(_i=$%4294967296|0,_s=$/4294967296|0):(_s=~(-$/4294967296),4294967295^(_i=~(-$%4294967296))?_i=_i+1|0:_s=_s+1|(_i=0)),18446744073709552e3<=$||$<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");_r.realloc(10),function(ga,_l){_l.buf[_l.pos++]=127&ga|128,ga>>>=7,_l.buf[_l.pos++]=127&ga|128,ga>>>=7,_l.buf[_l.pos++]=127&ga|128,ga>>>=7,_l.buf[_l.pos++]=127&ga|128,ga>>>=7,_l.buf[_l.pos]=127&ga}(_i,_r),function(ga,_l){var _c=(7&ga)<<4;_l.buf[_l.pos++]|=_c|((ga>>>=3)?128:0),ga&&(_l.buf[_l.pos++]=127&ga|((ga>>>=7)?128:0),ga&&(_l.buf[_l.pos++]=127&ga|((ga>>>=7)?128:0),ga&&(_l.buf[_l.pos++]=127&ga|((ga>>>=7)?128:0),ga&&(_l.buf[_l.pos++]=127&ga|((ga>>>=7)?128:0),ga&&(_l.buf[_l.pos++]=127&ga)))))}(_s,_r)}(j,this):(this.realloc(4),this.buf[this.pos++]=127&j|(127<j?128:0),j<=127||(this.buf[this.pos++]=127&(j>>>=7)|(127<j?128:0),j<=127||(this.buf[this.pos++]=127&(j>>>=7)|(127<j?128:0),j<=127||(this.buf[this.pos++]=j>>>7&127))))},writeSVarint:function(j){this.writeVarint(j<0?2*-j-1:2*j)},writeBoolean:function(j){this.writeVarint(!!j)},writeString:function(j){j=String(j),this.realloc(4*j.length),this.pos++;var $=this.pos;this.pos=function(_i,_s,ga){for(var _l,_c,_p=0;_p<_s.length;_p++){if(55295<(_l=_s.charCodeAt(_p))&&_l<57344){if(!_c){56319<_l||_p+1===_s.length?(_i[ga++]=239,_i[ga++]=191,_i[ga++]=189):_c=_l;continue}if(_l<56320){_i[ga++]=239,_i[ga++]=191,_i[ga++]=189,_c=_l;continue}_l=_c-55296<<10|_l-56320|65536,_c=null}else _c&&(_i[ga++]=239,_i[ga++]=191,_i[ga++]=189,_c=null);_l<128?_i[ga++]=_l:(_l<2048?_i[ga++]=_l>>6|192:(_l<65536?_i[ga++]=_l>>12|224:(_i[ga++]=_l>>18|240,_i[ga++]=_l>>12&63|128),_i[ga++]=_l>>6&63|128),_i[ga++]=63&_l|128)}return ga}(this.buf,j,this.pos);var _r=this.pos-$;128<=_r&&K3($,_r,this),this.pos=$-1,this.writeVarint(_r),this.pos+=_r},writeFloat:function(j){this.realloc(4),W3(this.buf,j,this.pos,!0,23,4),this.pos+=4},writeDouble:function(j){this.realloc(8),W3(this.buf,j,this.pos,!0,52,8),this.pos+=8},writeBytes:function(j){var $=j.length;this.writeVarint($),this.realloc($);for(var _r=0;_r<$;_r++)this.buf[this.pos++]=j[_r]},writeRawMessage:function(j,$){this.pos++;var _r=this.pos;j($,this);var _i=this.pos-_r;128<=_i&&K3(_r,_i,this),this.pos=_r-1,this.writeVarint(_i),this.pos+=_i},writeMessage:function(j,$,_r){this.writeTag(j,V1.Bytes),this.writeRawMessage($,_r)},writePackedVarint:function(j,$){this.writeMessage(j,wI,$)},writePackedSVarint:function(j,$){this.writeMessage(j,EI,$)},writePackedBoolean:function(j,$){this.writeMessage(j,AI,$)},writePackedFloat:function(j,$){this.writeMessage(j,kI,$)},writePackedDouble:function(j,$){this.writeMessage(j,TI,$)},writePackedFixed32:function(j,$){this.writeMessage(j,SI,$)},writePackedSFixed32:function(j,$){this.writeMessage(j,CI,$)},writePackedFixed64:function(j,$){this.writeMessage(j,MI,$)},writePackedSFixed64:function(j,$){this.writeMessage(j,II,$)},writeBytesField:function(j,$){this.writeTag(j,V1.Bytes),this.writeBytes($)},writeFixed32Field:function(j,$){this.writeTag(j,V1.Fixed32),this.writeFixed32($)},writeSFixed32Field:function(j,$){this.writeTag(j,V1.Fixed32),this.writeSFixed32($)},writeFixed64Field:function(j,$){this.writeTag(j,V1.Fixed64),this.writeFixed64($)},writeSFixed64Field:function(j,$){this.writeTag(j,V1.Fixed64),this.writeSFixed64($)},writeVarintField:function(j,$){this.writeTag(j,V1.Varint),this.writeVarint($)},writeSVarintField:function(j,$){this.writeTag(j,V1.Varint),this.writeSVarint($)},writeStringField:function(j,$){this.writeTag(j,V1.Bytes),this.writeString($)},writeFloatField:function(j,$){this.writeTag(j,V1.Fixed32),this.writeFloat($)},writeDoubleField:function(j,$){this.writeTag(j,V1.Fixed64),this.writeDouble($)},writeBooleanField:function(j,$){this.writeVarintField(j,!!$)}},U3.prototype.loadGeometry=function(j){var $=this._pbf;$.pos=this._geometry;for(var _r,_i,_s=$.readVarint()+$.pos,ga=1,_l=0,_c=0,_p=0,_f=[];$.pos<_s;)if(_l<=0&&(ga=7&(_i=$.readVarint()),_l=_i>>3),_l--,ga===1||ga===2)_c+=$.readSVarint(),_p+=$.readSVarint(),ga===1&&(_r&&_f.push(_r),_r=[]),_r.push([_c*j,_p*j]);else{if(ga!==7)throw new Error("unknown command "+ga);_r&&_r.push(_r[0].slice())}return _r&&_f.push(_r),_f};var zT={UNKNOWN:0,POINT:1,LINESTRING:2,POLYGON:3};function Z3(j){var $=[],_r=j&&j.features;if(_r)for(var _i=0,_s=_r.length;_i<_s;_i++){var ga=_r[_i],_l=ga.type,_c=void 0;switch(_l){case zT.POINT:_c={type:"MultiPoint",coordinates:ga.geometry.map(function(_p){return _p.slice()})};break;case zT.LINESTRING:case zT.POLYGON:if(_c={type:"MultiLineString",coordinates:ga.geometry.map(function(_p){return _p.map(function(_f){return _f.slice()})})},_l===zT.POLYGON&&(_c=J3(_c))==null)continue;break;default:continue}$.push({id:ga.id,type:"Feature",geometry:_c,properties:ga.tags})}return{type:"FeatureCollection",features:$}}function J3(j){for(var $,_r=[],_i=[],_s=0,ga=j.coordinates.length;_s<ga;_s++){var _l=j.coordinates[_s],_c=Zy.ringWinding(_l);_c!=null&&(_c===($=$||_c)&&_i.length&&(_r.push(_i),_i=[]),_i.push(_l))}return 0<_i.length&&_r.push(_i),_r.length===1?(j.type="Polygon",j.coordinates=_r[0]):1<_r.length?(j.type="MultiPolygon",j.coordinates=_r):j=null,j}var RI={type:"FeatureCollection",features:[]},Q3=function(){Z1($,bx);var j=J1($);function $(_r,_i){return F0(this,$),_r.tiled=!0,j.call(this,_r,_i)}return H0($,[{key:"fetchTile",value:function(_r,_i,_s){return this.provider?this.provider.requestTileAsPromise(_r,_i,_s).then(function(ga){return ga.data}):Promise.resolve()}},{key:"_load",value:function(_r){var _i=this,_s=Zy.wrapTile(_r.coords,{x:!0,y:!0}),ga=_s.x,_l=_s.y,_c=_s.z;return S0.postMessage(this.target_name+".fetchTile",ga,_l,_c).then(function(_p){var _f;return _p instanceof ArrayBuffer?(_f=new xI(new Uint8Array(_p)),_r.source_data.layers=OI(new dI(_f))):_p?_r.source_data.error=_p:_r.source_data.layers={_default:RI},_i._postProcessTile(_r),_r})}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),$}();g_.register(Q3,"MVT"),g_.register(Q3,"OMV");function hS(j){return Math.max(j,0)}function pS(j){return isNaN(j)?0:j}function iE(j){return Array.isArray(j)?j.map(parseFloat).map(pS):pS(parseFloat(j))}function _k(j){return Array.isArray(j)?j.map(iE).map(hS):hS(iE(j))}var t4=_u(function(j,$){var _r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function _i(_p){return(_p=Math.round(_p))<0?0:255<_p?255:_p}function _s(_p){return _p<0?0:1<_p?1:_p}function ga(_p){return _p[_p.length-1]==="%"?_i(parseFloat(_p)/100*255):_i(parseInt(_p))}function _l(_p){return _p[_p.length-1]==="%"?_s(parseFloat(_p)/100):_s(parseFloat(_p))}function _c(_p,_f,ey){return ey<0?ey+=1:1<ey&&--ey,6*ey<1?_p+(_f-_p)*ey*6:2*ey<1?_f:3*ey<2?_p+(_f-_p)*(2/3-ey)*6:_p}try{$.parseCSSColor=function(_p){var _f,ey=_p.replace(/ /g,"").toLowerCase();if(ey in _r)return _r[ey].slice();if(ey[0]==="#")return ey.length===4?0<=(_f=parseInt(ey.substr(1),16))&&_f<=4095?[(3840&_f)>>4|(3840&_f)>>8,240&_f|(240&_f)>>4,15&_f|(15&_f)<<4,1]:null:ey.length===7&&0<=(_f=parseInt(ey.substr(1),16))&&_f<=16777215?[(16711680&_f)>>16,(65280&_f)>>8,255&_f,1]:null;var iy=ey.indexOf("("),ly=ey.indexOf(")");if(iy!==-1&&ly+1===ey.length){var uy=ey.substr(0,iy),cy=ey.substr(iy+1,ly-(iy+1)).split(","),yy=1;switch(uy){case"rgba":if(cy.length!==4)return null;yy=_l(cy.pop());case"rgb":return cy.length!==3?null:[ga(cy[0]),ga(cy[1]),ga(cy[2]),yy];case"hsla":if(cy.length!==4)return null;yy=_l(cy.pop());case"hsl":if(cy.length!==3)return null;var ay=(parseFloat(cy[0])%360+360)%360/360,by=_l(cy[1]),Ey=_l(cy[2]),ky=Ey<=.5?Ey*(by+1):Ey+by-Ey*by,Oy=2*Ey-ky;return[_i(255*_c(Oy,ky,ay+1/3)),_i(255*_c(Oy,ky,ay)),_i(255*_c(Oy,ky,ay-1/3)),yy];default:return null}}return null}}catch{}}),Gy=(t4.parseCSSColor,{});Object.assign(Gy,{clampPositive:hS,noNaN:pS,parseNumber:iE,parsePositiveNumber:_k}),Gy.wrapFunction=function(j){return`
        var feature = context.feature.properties;
        var global = context.global;
        var $zoom = context.zoom;
        var $layer = context.layer;
        var $source = context.source;
        var sources = context.sources;
        var $geometry = context.geometry;
        var $meters_per_pixel = context.meters_per_pixel;

        var val = (function(){ `.concat(j,` }());

        if (typeof val === 'number' && isNaN(val)) {
            val = null; // convert NaNs to nulls
        }

        return val;
    `)},Gy.zeroPair=Object.freeze([0,0]),Gy.defaults={color:[1,1,1,1],width:1,size:1,extrude:!1,height:20,min_height:0,order:0,z:0,outline:{color:[0,0,0,0],width:0},material:{ambient:1,diffuse:1}},Gy.macros={"Style.color.pseudoRandomColor":function(){return[parseInt(feature.id,16)/100%1*.7,parseInt(feature.id,16)/1e4%1*.7,parseInt(feature.id,16)/1e6%1*.7,1]},"Style.color.randomColor":function(){return[.7*Math.random(),.7*Math.random(),.7*Math.random(),1]}},Gy.getFeatureParseContext=function(j,$,_r,_i){return{feature:j,tile:$,global:_r,sources:_i,zoom:$.style_zoom,geometry:Zy.geometryType(j.geometry.type),meters_per_pixel:$.meters_per_pixel,meters_per_pixel_sq:$.meters_per_pixel_sq,units_per_meter_overzoom:$.units_per_meter_overzoom}};var FT={STATIC:0,DYNAMIC:1,ZOOM:2};Gy.CACHE_TYPE=FT,Gy.createPropertyCache=function(j){var $=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;if(j!=null){if(j.value)return{value:j.value,zoom:j.zoom?{}:null,type:j.type};var _r={value:j,type:FT.STATIC};return Array.isArray(_r.value)&&Array.isArray(_r.value[0])?(_r.zoom={},_r.type=FT.ZOOM):typeof _r.value=="function"&&(_r.type=FT.DYNAMIC),typeof $=="function"&&(_r.zoom?_r.value=_r.value.map(function(_i,_s){return[_i[0],$(_i[1],_s)]}):typeof _r.value!="function"&&(_r.value=$(_r.value,0))),_r}},Gy.createColorPropertyCache=function(j){return Gy.createPropertyCache(j,function($){return $==="Style.color.pseudoRandomColor"?q0.stringToFunction(Gy.wrapFunction(Gy.macros["Style.color.pseudoRandomColor"])):$==="Style.color.randomColor"?Gy.macros["Style.color.randomColor"]:$})};function oE(j){return typeof j=="string"&&j[j.length-1]==="%"}function fS(j){return j==="auto"}function e4(j){return oE(j)||fS(j)}var r4="'size' can specify either width or height as derived from aspect ratio, but not both";Gy.createPointSizePropertyCache=function(j){var $=null,_r=null;if(oE(j))$=[!0];else if(Array.isArray(j)){if(Array.isArray(j[0])){if(j.some(function(_i){return Array.isArray(_i[1])?_i[1].some(e4):oE(_i[1])})&&($=j.map(function(_i){return Array.isArray(_i[1])?_i[1].map(oE):oE(_i[1])}),(_r=j.map(function(_i){return Array.isArray(_i[1])&&_i[1].map(fS)})).some(function(_i){return Array.isArray(_i)&&_i.every(function(_s){return _s})})))throw r4}else if(j.some(e4)&&($=[j.map(oE)],(_r=[j.map(fS)])[0].every(function(_i){return _i})))throw r4}return $?((j={value:j}).has_pct=$,j.has_ratio=_r,j.sprites={}):j=Gy.createPropertyCache(j,_k),j},Gy.evalCachedPointSizeProperty=function(j,$,_r){return j.has_pct||j.has_ratio?$?(j.sprites[$.sprite]||(j.sprites[$.sprite]=Gy.createPropertyCache(j.value,function(_i,_s){return Array.isArray(_i)?(_i=_i.map(function(ga,_l){return j.has_ratio[_s][_l]?ga:_k(ga)}).map(function(ga,_l){return j.has_pct[_s][_l]?$.css_size[_l]*ga/100:ga}),j.has_ratio[_s][0]?_i[0]=_i[1]*$.aspect:j.has_ratio[_s][1]&&(_i[1]=_i[0]/$.aspect)):(_i=_k(_i),_i=j.has_pct[_s]?$.css_size.map(function(ga){return ga*_i/100}):[_i,_i]),_i})),Gy.evalCachedProperty(j.sprites[$.sprite],_r)):void 0:Gy.evalCachedProperty(j,_r)},Gy.evalCachedProperty=function(j,$){if(j!=null)return j.dynamic?j.dynamic($):j.static?j.static:j.zoom&&j.zoom[$.zoom]?j.zoom[$.zoom]:typeof j.value!="function"?Array.isArray(j.value)&&Array.isArray(j.value[0])?(j.zoom=j.zoom||{},j.zoom[$.zoom]=q0.interpolate($.zoom,j.value),j.zoom[$.zoom]):(j.static=j.value,j.static):(j.dynamic=j.value,j.dynamic($))},Gy.convertUnits=function(j,$){if(j.val!=null)return j.units==="px"?j.val*Zy.metersPerPixel($.zoom):j.val;if(typeof j=="string")j.trim().slice(-2)==="px"?(j=iE(j),j*=Zy.metersPerPixel($.zoom)):j=iE(j);else if(Array.isArray(j))return Array.isArray(j[0])?j.map(function(_r){return[_r[0],Gy.convertUnits(_r[1],$)]}):j.map(function(_r){return Gy.convertUnits(_r,$)});return j},Gy.parseUnits=function(j){var $={val:iE(j)};return $.val!==0&&typeof j=="string"&&j.trim().slice(-2)==="px"&&($.units="px"),$},Gy.evalCachedDistanceProperty=function(j,$){return j.dynamic?j.dynamic($):j.zoom&&j.zoom[$.zoom]?j.zoom[$.zoom]:typeof j.value!="function"?j.zoom?(j.zoom[$.zoom]=q0.interpolate($.zoom,j.value,function(_r){return Gy.convertUnits(_r,$)}),j.zoom[$.zoom]):Gy.convertUnits(j.value,$):(j.dynamic=j.value,j.dynamic($))},Gy.string_colors={},Gy.colorForString=function(j){if(Gy.string_colors[j])return Gy.string_colors[j];var $=null;return j!=="none"&&(($=t4.parseCSSColor(j))&&$.length===4?($[0]/=255,$[1]/=255,$[2]/=255):$=Gy.defaults.color),Gy.string_colors[j]=$},Gy.evalCachedColorProperty=function(j){var $=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(j.dynamic){var _r=j.dynamic($);return typeof _r=="string"&&(_r=Gy.colorForString(_r)),_r&&_r[3]==null&&(_r[3]=1),_r}if(j.static)return j.static;if(j.zoom&&j.zoom[$.zoom])return j.zoom[$.zoom];if(typeof j.value=="function"){j.dynamic=j.value;var _i=j.dynamic($);return typeof _i=="string"&&(_i=Gy.colorForString(_i)),_i&&_i[3]==null&&(_i[3]=1),_i}if(typeof j.value=="string")return j.static=Gy.colorForString(j.value),j.static;if(j.zoom){if(!j.zoom_preprocessed){for(var _s=0;_s<j.value.length;_s++){var ga=j.value[_s];ga&&typeof ga[1]=="string"&&(ga[1]=Gy.colorForString(ga[1]))}j.zoom_preprocessed=!0}return j.zoom[$.zoom]=q0.interpolate($.zoom,j.value),j.zoom[$.zoom][3]=j.zoom[$.zoom][3]||1,j.zoom[$.zoom]}return j.static=j.value.map(function(_l){return _l}),j.static&&j.static[3]==null&&(j.static[3]=1),j.static},Gy.parseColor=function(j){var $=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(typeof j=="function"&&(j=j($)),typeof j=="string")j=Gy.colorForString(j);else if(Array.isArray(j)&&Array.isArray(j[0])){for(var _r=0;_r<j.length;_r++){var _i=j[_r];typeof _i[1]=="string"&&(_i[1]=Gy.colorForString(_i[1]))}$.zoom&&(j=q0.interpolate($.zoom,j))}return Array.isArray(j)?(j=j.map(function(_s){return _s}))[3]==null&&(j[3]=1):j=[0,0,0,1],j},Gy.calculateOrder=function(j,$){return typeof j=="function"?j=j($):typeof j=="string"&&(j=$.feature.properties[j]?$.feature.properties[j]:_k(j)),j},Gy.evalProperty=function(j,$){return typeof j=="function"?j($):j};var BT=function(){function j($,_r){F0(this,j),this.key=$,this.repeat_dist=_r,this.repeat_dist_sq=this.repeat_dist*this.repeat_dist,this.positions=[]}return H0(j,[{key:"check",value:function($){for(var _r=$.position,_i=0;_i<this.positions.length;_i++){var _s=this.positions[_i],ga=_r[0]-_s[0],_l=_r[1]-_s[1],_c=ga*ga+_l*_l;if(_c<this.repeat_dist_sq)return{dist_sq:_c,repeat_dist_sq:this.repeat_dist_sq}}}},{key:"add",value:function($){$&&$.position&&this.positions.push($.position)}}],[{key:"clear",value:function($){this.groups[$]={}}},{key:"check",value:function($,_r,_i){if(_r.repeat_distance&&_r.repeat_group&&this.groups[_i][_r.repeat_group])return this.groups[_i][_r.repeat_group].check($)}},{key:"add",value:function($,_r,_i){_r.repeat_distance&&_r.repeat_group&&(this.groups[_i][_r.repeat_group]==null&&(this.groups[_i][_r.repeat_group]=new j(_r.repeat_group,_r.repeat_distance*_r.repeat_scale)),this.groups[_i][_r.repeat_group].add($))}}]),j}();BT.groups={};var n4=function(){function j($,_r,_i){F0(this,j);var _s=this.boxCells=[],ga=this.circleCells=[];this.xCellCount=Math.ceil($/_i),this.yCellCount=Math.ceil(_r/_i);for(var _l=0;_l<this.xCellCount*this.yCellCount;_l++)_s.push([]),ga.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=$,this.height=_r,this.xScale=this.xCellCount/$,this.yScale=this.yCellCount/_r,this.boxUid=0,this.circleUid=0}return H0(j,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function($,_r,_i,_s,ga){this._forEachCell(_r,_i,_s,ga,this._insertBoxCell,this.boxUid++),this.boxKeys.push($),this.bboxes.push(_r),this.bboxes.push(_i),this.bboxes.push(_s),this.bboxes.push(ga)}},{key:"insertCircle",value:function($,_r,_i,_s){this._forEachCell(_r-_s,_i-_s,_r+_s,_i+_s,this._insertCircleCell,this.circleUid++),this.circleKeys.push($),this.circles.push(_r),this.circles.push(_i),this.circles.push(_s)}},{key:"insertCircleList",value:function($,_r){for(var _i=0;_i<_r.length-2;_i+=3)this.insertCircle("".concat($,"/").concat(_i),_r[_i],_r[_i+1],_r[_i+2])}},{key:"_insertBoxCell",value:function($,_r,_i,_s,ga,_l){this.boxCells[ga].push(_l)}},{key:"_insertCircleCell",value:function($,_r,_i,_s,ga,_l){this.circleCells[ga].push(_l)}},{key:"_query",value:function($,_r,_i,_s,ga,_l){if(_i<0||$>this.width||_s<0||_r>this.height)return!ga&&[];var _c=[];if($<=0&&_r<=0&&this.width<=_i&&this.height<=_s){if(ga)return!0;for(var _p=0;_p<this.boxKeys.length;_p++)_c.push({key:this.boxKeys[_p],x1:this.bboxes[4*_p],y1:this.bboxes[4*_p+1],x2:this.bboxes[4*_p+2],y2:this.bboxes[4*_p+3]});for(var _f=0;_f<this.circleKeys.length;_f++){var ey=this.circles[3*_f],iy=this.circles[3*_f+1],ly=this.circles[3*_f+2];_c.push({key:this.circleKeys[_f],x1:ey-ly,y1:iy-ly,x2:ey+ly,y2:iy+ly})}return _l?_c.filter(_l):_c}var uy={hitTest:ga,seenUids:{box:{},circle:{}}};return this._forEachCell($,_r,_i,_s,this._queryCell,_c,uy,_l),ga?0<_c.length:_c}},{key:"_queryCircle",value:function($,_r,_i,_s,ga){var _l=$-_i,_c=$+_i,_p=_r-_i,_f=_r+_i;if(_c<0||_l>this.width||_f<0||_p>this.height)return!_s&&[];var ey=[],iy={hitTest:_s,circle:{x:$,y:_r,radius:_i},seenUids:{box:{},circle:{}}};return this._forEachCell(_l,_p,_c,_f,this._queryCellCircle,ey,iy,ga),_s?0<ey.length:ey}},{key:"query",value:function($,_r,_i,_s,ga){return this._query($,_r,_i,_s,!1,ga)}},{key:"hitTest",value:function($,_r,_i,_s,ga){return this._query($,_r,_i,_s,!0,ga)}},{key:"hitTestCircle",value:function($,_r,_i,_s){return this._queryCircle($,_r,_i,!0,_s)}},{key:"hitTestCircleList",value:function($,_r){for(var _i=0;_i<$.length-2;_i+=3)if(this.hitTestCircle($[_i],$[_i+1],$[_i+2],_r))return!0;return!1}},{key:"_queryCell",value:function($,_r,_i,_s,ga,_l,_c,_p){var _f=_c.seenUids,ey=this.boxCells[ga];if(ey!==null){var iy,ly=this.bboxes,uy=XE(ey);try{for(uy.s();!(iy=uy.n()).done;){var cy=iy.value;if(!_f.box[cy]){_f.box[cy]=!0;var yy=4*cy;if($<=ly[2+yy]&&_r<=ly[3+yy]&&_i>=ly[0+yy]&&_s>=ly[1+yy]&&(!_p||_p(this.boxKeys[cy]))){if(_c.hitTest)return _l.push(!0),!0;_l.push({key:this.boxKeys[cy],x1:ly[yy],y1:ly[1+yy],x2:ly[2+yy],y2:ly[3+yy]})}}}}catch(Xy){uy.e(Xy)}finally{uy.f()}}var ay=this.circleCells[ga];if(ay!==null){var by,Ey=this.circles,ky=XE(ay);try{for(ky.s();!(by=ky.n()).done;){var Oy=by.value;if(!_f.circle[Oy]){_f.circle[Oy]=!0;var Ty=3*Oy;if(this._circleAndRectCollide(Ey[Ty],Ey[1+Ty],Ey[2+Ty],$,_r,_i,_s)&&(!_p||_p(this.circleKeys[Oy]))){if(_c.hitTest)return _l.push(!0),!0;var Ly=Ey[Ty],Ny=Ey[1+Ty],Uy=Ey[2+Ty];_l.push({key:this.circleKeys[Oy],x1:Ly-Uy,y1:Ny-Uy,x2:Ly+Uy,y2:Ny+Uy})}}}}catch(Xy){ky.e(Xy)}finally{ky.f()}}}},{key:"_queryCellCircle",value:function($,_r,_i,_s,ga,_l,_c,_p){var _f=_c.circle,ey=_c.seenUids,iy=this.boxCells[ga];if(iy!==null){var ly,uy=this.bboxes,cy=XE(iy);try{for(cy.s();!(ly=cy.n()).done;){var yy=ly.value;if(!ey.box[yy]){ey.box[yy]=!0;var ay=4*yy;if(this._circleAndRectCollide(_f.x,_f.y,_f.radius,uy[0+ay],uy[1+ay],uy[2+ay],uy[3+ay])&&(!_p||_p(this.boxKeys[yy])))return _l.push(!0),!0}}}catch(Ny){cy.e(Ny)}finally{cy.f()}}var by=this.circleCells[ga];if(by!==null){var Ey,ky=this.circles,Oy=XE(by);try{for(Oy.s();!(Ey=Oy.n()).done;){var Ty=Ey.value;if(!ey.circle[Ty]){ey.circle[Ty]=!0;var Ly=3*Ty;if(this._circlesCollide(ky[Ly],ky[1+Ly],ky[2+Ly],_f.x,_f.y,_f.radius)&&(!_p||_p(this.circleKeys[Ty])))return _l.push(!0),!0}}}catch(Ny){Oy.e(Ny)}finally{Oy.f()}}}},{key:"_forEachCell",value:function($,_r,_i,_s,ga,_l,_c,_p){for(var _f=this._convertToXCellCoord($),ey=this._convertToYCellCoord(_r),iy=this._convertToXCellCoord(_i),ly=this._convertToYCellCoord(_s),uy=_f;uy<=iy;uy++)for(var cy=ey;cy<=ly;cy++){var yy=this.xCellCount*cy+uy;if(ga.call(this,$,_r,_i,_s,yy,_l,_c,_p))return}}},{key:"_convertToXCellCoord",value:function($){return Math.max(0,Math.min(this.xCellCount-1,Math.floor($*this.xScale)))}},{key:"_convertToYCellCoord",value:function($){return Math.max(0,Math.min(this.yCellCount-1,Math.floor($*this.yScale)))}},{key:"_circlesCollide",value:function($,_r,_i,_s,ga,_l){var _c=_s-$,_p=ga-_r,_f=_i+_l;return _c*_c+_p*_p<_f*_f}},{key:"_circleAndRectCollide",value:function($,_r,_i,_s,ga,_l,_c){var _p=(_l-_s)/2,_f=Math.abs($-(_s+_p));if(_p+_i<_f)return!1;var ey=(_c-ga)/2,iy=Math.abs(_r-(ga+ey));if(ey+_i<iy)return!1;if(_f<=_p||iy<=ey)return!0;var ly=_f-_p,uy=iy-ey;return ly*ly+uy*uy<=_i*_i}}]),j}(),LI=function(j,$,_r,_i){var _s;if(_i&&(_s=function(Ny){return Ny!==_i.id}),!$){if(j.type==="point"&&!j.angle){var ga=j.getAABB(),_l=ga.left,_c=ga.top,_p=ga.right,_f=ga.bottom;if(_r.hitTest(_l,-_c,_p,-_f,_s)){if(Array.isArray(j.layout.anchor))for(var ey=1;ey<j.layout.anchor.length;ey++){j.setAnchor(j.layout.anchor[ey]);var iy=j.getAABB(),ly=iy.left,uy=iy.top,cy=iy.right,yy=iy.bottom;if(!_r.hitTest(ly,-uy,cy,-yy,_s))return!1}return!0}return!1}var ay=j.getBoundingCircles();return _r.hitTestCircleList(ay,_s)}if($){if(j.type==="point"&&!j.isFlat()){var by=j.getScreenSpaceBoundingBox(),Ey=by.left,ky=by.top,Oy=by.right,Ty=by.bottom;return _r.hitTest(Ey,ky,Oy,Ty,_s)}var Ly=j.getBoundingCircles();return _r.hitTestCircleList(Ly,_s)}return!1},PI=function(j,$,_r){var _i,_s,ga,_l,_c,_p,_f,ey,iy,ly,uy,cy,yy=j.id;j.placed=!0,$||(j.type!=="point"||j.angle?(_i=j.getBoundingCircles(),_r.insertCircleList(yy,_i)):(ga=(_s=j.getAABB()).left,_l=_s.top,_c=_s.right,_p=_s.bottom,_r.insert(yy,ga,-_l,_c,-_p))),$&&(j.type!=="point"||j.isFlat()?(_f=j.getBoundingCircles(),_r.insertCircleList(yy,_f)):(iy=(ey=j.getScreenSpaceBoundingBox()).left,ly=ey.top,uy=ey.right,cy=ey.bottom,_r.insert(yy,iy,ly,uy,cy)))},L_={tiles:{},startTile:function(j,$){var _r=1<arguments.length&&$!==void 0?$:{},_i=_r.apply_repeat_groups,_s=_i===void 0||_i,ga=_r.return_hidden,_l=ga!==void 0&&ga,_c=_r.grid_index,_p=_c===void 0?null:_c,_f=this.tiles[j]={grid_index:_p||new n4(Zy.tile_scale,Zy.tile_scale,240),objects:{},labels:{},styles:{},repeat:_s,return_hidden:_l};_f.complete==null&&(_f.complete=new Promise(function(ey,iy){_f.resolve=ey,_f.reject=iy}))},resetTile:function(j){delete this.tiles[j]},abortTile:function(j){this.tiles[j]&&this.tiles[j].resolve&&this.tiles[j].resolve([]),this.resetTile(j)},addStyle:function(j,$){this.tiles[$].styles[j]=!0},collide:function(j,$,_r){var _i=this.tiles[_r];if(!_i)return Promise.resolve([]);for(var _s=_i.objects,ga=0;ga<j.length;ga++){var _l=j[ga],_c=_l.label.layout.priority;_s[_c]=_s[_c]||{},_s[_c][$]=_s[_c][$]||[],_s[_c][$].push(_l)}return delete _i.styles[$],Object.keys(_i.styles).length===0&&this.endTile(_r),_i.complete.then(function(){return _i.resolve=null,_i.labels[$]||[]})},endTile:function(j){var $=this.tiles[j],_r=$.labels;$.repeat&&BT.clear(j);for(var _i=Object.keys($.objects).sort(function(ey,iy){return ey-iy}),_s=0;_s<_i.length;_s++){var ga=$.objects[_i[_s]];if(ga)for(var _l in ga){var _c=ga[_l];_r[_l]=_r[_l]||[];for(var _p=0;_p<_c.length;_p++){var _f=_c[_p];this.canBePlaced(_f,j,_f.linked,$)?_f.linked?this.canBePlaced(_f.linked,j,_f,$)?(_f.show=!0,(_f.label.breach||_f.linked.label.breach)&&(_f.label.breach=!0,_f.linked.label.breach=!0),_r[_l].push(_f),this.place(_f,j,$),this.place(_f.linked,j,$)):$.return_hidden&&(_f.show=!1,_r[_l].push(_f)):(_f.show=!0,_r[_l].push(_f),this.place(_f,j,$)):$.return_hidden&&(_f.show=!1,_r[_l].push(_f))}}}delete this.tiles[j],$.resolve()},canBePlaced:function(j,$,_r,_i){var _s=2<arguments.length&&_r!==void 0?_r:null,ga=(3<arguments.length&&_i!==void 0?_i:{}).repeat,_l=ga===void 0||ga,_c=j.label,_p=j.label.layout;if(_c.placed!==null)return _c.placed;var _f=this.tiles[$].grid_index;if(_p.collide&&LI(_c,$==="main",_f,_s&&_s.label))_p.collide&&(_c.placed=!1);else{if(!(_l&&BT.check(_c,_p,$)))return!0;_c.placed=!1}return _c.placed},place:function(j,$,_r){var _i=j.label,_s=_r.repeat,ga=_s===void 0||_s;_i.placed===null&&(ga&&BT.add(_i,_i.layout,$),PI(_i,$==="main",this.tiles[$].grid_index))}},H1={id:0,queue:[],max_time:20,start_time:null,state:{},ignore_user_moving_view:!1,_ignoreViewMoveWithDebounce:NT(function(){H1.ignore_user_moving_view=!0},0,500),add:function(j){j.id=H1.id++,j.max_time=j.max_time||H1.max_time,j.pause_factor=j.pause_factor||1;var $=new Promise(function(_r,_i){j.resolve=_r,j.reject=_i});return j.promise=$,j.total_elapsed=0,j.stats={calls:0},this.queue.push(j),this.start_time=this.start_time||performance.now(),this.elapsed=performance.now()-this.start_time,this.elapsed<H1.max_time&&this.process(j),j.promise},remove:function(j){var $=this.queue.indexOf(j);-1<$&&this.queue.splice($,1)},process:function(j){if(!this.state.user_moving_view||j.user_moving_view!==!1||this.ignore_user_moving_view)return j.pause?(j.pause--,!0):(j.stats.calls++,j.start_time=performance.now(),j.run(j));H1._ignoreViewMoveWithDebounce()},processAll:function(){this.start_time=this.start_time||performance.now(),this.ignore_user_moving_view&&!this.hasPendingTasks()&&(this.ignore_user_moving_view=!1);for(var j=0;j<this.queue.length;j++){var $=this.queue[j];if(this.process($)!==!0&&($.pause||($.pause=$.elapsed>$.max_time?$.pause_factor:0),$.total_elapsed+=$.elapsed),this.elapsed=performance.now()-this.start_time,this.elapsed>=H1.max_time){this.start_time=null;break}}},finish:function(j,$){return j.elapsed=performance.now()-j.start_time,j.total_elapsed+=j.elapsed,this.remove(j),j.resolve($),j.promise},cancel:function(j){var $;j.cancel instanceof Function&&($=j.cancel(j)),j.resolve($||{})},shouldContinue:function(j){return j.elapsed=performance.now()-j.start_time,this.elapsed=performance.now()-this.start_time,j.elapsed<j.max_time&&this.elapsed<H1.max_time},removeForTile:function(j){for(var $=this.queue.length-1;0<=$;$--)this.queue[$].tile_id===j&&(this.cancel(this.queue[$]),this.queue.splice($,1))},setState:function(j){this.state=j},hasPendingTasks:function(){return!!this.queue.length}};function i4(j){return{coords:j.coords,uid:j.uid,filtering:j.filtering,sprites:j.sprites,url:j.url,element:j.element,data:j.data,width:j.width,height:j.height,density:j.density,repeat:j.repeat,TEXTURE_WRAP_S:j.TEXTURE_WRAP_S,TEXTURE_WRAP_T:j.TEXTURE_WRAP_T,UNPACK_FLIP_Y_WEBGL:j.UNPACK_FLIP_Y_WEBGL,UNPACK_PREMULTIPLY_ALPHA_WEBGL:j.UNPACK_PREMULTIPLY_ALPHA_WEBGL}}var dS=function(){function j($,_r,_i){var _s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};F0(this,j),_s=i4(_s),this.gl=$,this.texture=$.createTexture(),this.texture&&(this.valid=!0),this.manager=_i,this.bind(),this.name=_r,this.retain_count=0,this.config_type=null,this.loading=null,this.loaded=!1,this.filtering=_s.filtering,this.density=_s.density||1,this.sprites=_s.sprites,this.texcoords={},this.sizes={},this.css_sizes={},this.aspects={},this._byte_length=0,this.setData(1,1,new Uint8Array([0,0,0,0]),{filtering:"nearest"}),this.loaded=!1,this.manager.textures[this.name]&&(this.retain_count=this.manager.textures[this.name].retain_count,this.manager.textures[this.name].retain_count=0,this.manager.textures[this.name].destroy()),(this.manager.textures[this.name]=this).manager.texture_configs[this.name]=JSON.stringify(Object.assign({name:_r},_s)),this.load(_s),o0("trace","creating Texture ".concat(this.name))}return H0(j,[{key:"destroy",value:function($){var _r=(0<arguments.length&&$!==void 0?$:{}).force;0<this.retain_count&&!_r?o0("error","Texture '".concat(this.name,"': destroying texture with retain count of '").concat(this.retain_count,"'")):this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,delete this.manager.textures[this.name],delete this.manager.texture_configs[this.name],this.valid=!1,this._byte_length=0,o0("trace","destroying Texture ".concat(this.name)))}},{key:"retain",value:function(){this.retain_count++}},{key:"release",value:function(){this.retain_count<=0&&o0("error","Texture '".concat(this.name,"': releasing texture with retain count of '").concat(this.retain_count,"'")),this.retain_count--,this.retain_count<=0&&this.destroy()}},{key:"bind",value:function($){var _r=0<arguments.length&&$!==void 0?$:0;this.valid&&(this.manager.activeUnit!==_r&&(this.gl.activeTexture(this.gl.TEXTURE0+_r),this.manager.activeUnit=_r,this.manager.boundTexture=null),this.manager.boundTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.manager.boundTexture=this.texture))}},{key:"load",value:function($){var _r=this;return $?(this.loading=null,typeof $.url=="string"?(this.config_type="url",this.setUrl($.url,$)):$.element?(this.config_type="element",this.setElement($.element,$)):$.data&&$.width&&$.height&&(this.config_type="data",this.setData($.width,$.height,$.data,$)),this.loading=this.loading&&this.loading.then(function(){return _r.calculateSprites(),_r})||Promise.resolve(this),this.loading):this.loading||Promise.resolve(this)}},{key:"setUrl",value:function($,_r){var _i=this,_s=1<arguments.length&&_r!==void 0?_r:{};if(this.valid)return this.url=$,this.loading=new Promise(function(ga,_l){var _c=new Image;_c.onload=function(){try{_i.setElement(_c,_s)}catch(_p){_i.loaded=!1,o0("warn","Texture '".concat(_i.name,"': failed to load url: '").concat(_i.url,"'"),_p,_s),_i.manager.trigger("warning",{message:"Failed to load texture from ".concat(_i.url),error:_p,texture:_s})}_i.loaded=!0,ga(_i)},_c.onerror=function(_p){_i.loaded=!1,o0("warn","Texture '".concat(_i.name,"': failed to load url: '").concat(_i.url,"'"),_p,_s),_i.manager.trigger("warning",{message:"Failed to load texture from ".concat(_i.url),error:_p,texture:_s}),ga(_i)},q0.isSafari()&&_i.url.slice(0,5)==="data:"||(_c.crossOrigin="anonymous"),_c.src=_i.url}),this.loading}},{key:"setData",value:function($,_r,_i,_s){var ga=3<arguments.length&&_s!==void 0?_s:{};return this.width=$,this.height=_r,Array.isArray(_i)&&(_i=new Uint8Array(_i)),this.update(_i,ga),this.setFiltering(ga),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function($,_r){var _i,_s=$;return typeof $=="string"&&($=document.querySelector($)),$ instanceof HTMLCanvasElement||$ instanceof HTMLImageElement||$ instanceof HTMLVideoElement?(this.update($,_r),this.setFiltering(_r)):(this.loaded=!1,_i="the 'element' parameter (`element: ".concat(JSON.stringify(_s),"`) must be a CSS "),_i+="selector string, or a <canvas>, <image> or <video> object",o0("warn","Texture '".concat(this.name,"': ").concat(_i),_r),this.manager.trigger("warning",{message:"Failed to load texture because ".concat(_i),texture:_r})),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function($,_r){var _i=1<arguments.length&&_r!==void 0?_r:{};this.valid&&(this.bind(),$ instanceof HTMLCanvasElement||$ instanceof HTMLVideoElement||$ instanceof HTMLImageElement&&$.complete?(this.width=$.width,this.height=$.height,this._byte_length=this.width*this.height*4,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,_i.UNPACK_FLIP_Y_WEBGL!==!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_i.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,$)):(this._byte_length=$?$.byteLength:0,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,$)),this.manager.trigger("update",this))}},{key:"getByteLength",value:function(){return this._byte_length}},{key:"setFiltering",value:function($){var _r,_i=0<arguments.length&&$!==void 0?$:{};this.valid&&(_i.filtering=_i.filtering||"linear",_r=this.gl,this.bind(),q0.isPowerOf2(this.width)&&q0.isPowerOf2(this.height)?(this.power_of_2=!0,_r.texParameteri(_r.TEXTURE_2D,_r.TEXTURE_WRAP_S,_i.TEXTURE_WRAP_S||_i.repeat&&_r.REPEAT||_r.CLAMP_TO_EDGE),_r.texParameteri(_r.TEXTURE_2D,_r.TEXTURE_WRAP_T,_i.TEXTURE_WRAP_T||_i.repeat&&_r.REPEAT||_r.CLAMP_TO_EDGE),_i.filtering==="mipmap"?(this.filtering="mipmap",_r.texParameteri(_r.TEXTURE_2D,_r.TEXTURE_MIN_FILTER,_r.LINEAR_MIPMAP_LINEAR),_r.texParameteri(_r.TEXTURE_2D,_r.TEXTURE_MAG_FILTER,_r.LINEAR),_r.generateMipmap(_r.TEXTURE_2D)):_i.filtering==="linear"?(this.filtering="linear",_r.texParameteri(_r.TEXTURE_2D,_r.TEXTURE_MIN_FILTER,_r.LINEAR),_r.texParameteri(_r.TEXTURE_2D,_r.TEXTURE_MAG_FILTER,_r.LINEAR)):_i.filtering==="nearest"&&(this.filtering="nearest",_r.texParameteri(_r.TEXTURE_2D,_r.TEXTURE_MIN_FILTER,_r.NEAREST),_r.texParameteri(_r.TEXTURE_2D,_r.TEXTURE_MAG_FILTER,_r.NEAREST))):(this.power_of_2=!1,_r.texParameteri(_r.TEXTURE_2D,_r.TEXTURE_WRAP_S,_r.CLAMP_TO_EDGE),_r.texParameteri(_r.TEXTURE_2D,_r.TEXTURE_WRAP_T,_r.CLAMP_TO_EDGE),_i.filtering==="nearest"?(this.filtering="nearest",_r.texParameteri(_r.TEXTURE_2D,_r.TEXTURE_MIN_FILTER,_r.NEAREST),_r.texParameteri(_r.TEXTURE_2D,_r.TEXTURE_MAG_FILTER,_r.NEAREST)):(this.filtering="linear",_r.texParameteri(_r.TEXTURE_2D,_r.TEXTURE_MIN_FILTER,_r.LINEAR),_r.texParameteri(_r.TEXTURE_2D,_r.TEXTURE_MAG_FILTER,_r.LINEAR))),this.manager.trigger("update",this))}},{key:"calculateSprites",value:function(){if(this.sprites)for(var $ in this.sprites){var _r=this.sprites[$];this.texcoords[$]=this.manager.getTexcoordsForSprite([_r[0],_r[1]],[_r[2],_r[3]],[this.width,this.height]),this.sizes[$]=[_r[2],_r[3]],this.css_sizes[$]=[_r[2]/this.density,_r[3]/this.density],this.aspects[$]=_r[2]/_r[3]}}}]),j}();function UT(j){var $=[];return Object.assign(j,{subscribe:function(_r){$.indexOf(_r)===-1&&$.push(_r)},unsubscribe:function(_r){var _i=$.indexOf(_r);-1<_i&&$.splice(_i,1)},unsubscribeAll:function(){$=[]},trigger:function(_r){for(var _i=arguments.length,_s=new Array(1<_i?_i-1:0),ga=1;ga<_i;ga++)_s[ga-1]=arguments[ga];$.forEach(function(_l){if(typeof _l[_r]=="function")try{_l[_r].apply(_l,_s)}catch(_c){o0("warn","Caught exception in listener for event '".concat(_r,"':"),_c)}})},hasSubscribersFor:function(_r){var _i=!1;return $.forEach(function(_s){typeof _s[_r]=="function"&&(_i=!0)}),_i}})}var GT=function(){function j($){F0(this,j),this.default=j.DEFAULT_TEXTURE_NAME,this.textures={},this.texture_configs={},this.boundTexture=null,this.activeUnit=null,this.scene_id=$,S0.addTarget("Texture"+this.scene_id,this),UT(this)}return H0(j,[{key:"create",value:function($,_r,_i){for(var _s=j.matchers_,ga=0;ga<_s.length;ga++){var _l=_s[ga][0],_c=_s[ga][1];if(_c&&_c(_i))return new _l($,_r,this,_i)}return new dS($,_r,this,_i)}},{key:"retain",value:function($){this.textures[$]&&this.textures[$].retain()}},{key:"release",value:function($){this.textures[$]&&this.textures[$].release()}},{key:"getRetainCount",value:function($){if(this.textures[$])return this.textures[$].retain_count}},{key:"getByteLength",value:function($){if(this.textures[$])return this.textures[$].getByteLength()}},{key:"destroy",value:function($){var _r=this;Object.keys(this.textures).forEach(function(_i){var _s=_r.textures[_i];_i!==_r.default&&_s.gl===$&&_s.destroy({force:!0})})}},{key:"getSpriteInfo",value:function($,_r){var _i=this.textures[$];return _i&&{size:_i.sizes[_r],css_size:_i.css_sizes[_r],aspect:_i.aspects[_r],texcoords:_i.texcoords[_r]}}},{key:"getTexcoordsForSprite",value:function($,_r,_i){var _s=_i[1]-$[1]-_r[1];return[$[0]/_i[0],_s/_i[1],(_r[0]+$[0])/_i[0],(_r[1]+_s)/_i[1]]}},{key:"createFromObject",value:function($,_r){var _i=[];if(_r)for(var _s in _r){var ga,_l=_r[_s];this.changed(_s,_l)&&(ga=this.create($,_s,_l),_i.push(ga.loading))}return Promise.all(_i)}},{key:"createDefault",value:function($){return this.create($,this.default)}},{key:"changed",value:function($,_r){var _i=this.textures[$];if(_i){if(_i.config_type==="element"||_r.element!=null)return!0;if(_r=i4(_r),this.texture_configs[$]===JSON.stringify(Object.assign({name:$},_r)))return!1}return!0}},{key:"getInfo",value:function($){var _r=this;if($=$||Object.keys(this.textures),Array.isArray($))return Promise.all($.map(function(_s){return _r.getInfo(_s)}));var _i=this.textures[$];return _i?(_i.loading||Promise.resolve(_i)).then(function(){return{name:_i.name,width:_i.width,height:_i.height,density:_i.density,sprites:_i.sprites,texcoords:_i.texcoords,sizes:_i.sizes,css_sizes:_i.css_sizes,aspects:_i.aspects,filtering:_i.filtering,power_of_2:_i.power_of_2,valid:_i.valid}}):Promise.resolve(null)}},{key:"syncTexturesToWorker",value:function($){var _r=this;return $1.is_main?Promise.all($.map(function(_i){var _s=_r.textures[_i];return _s&&_s.loading||Promise.resolve()})).then(function(){return _r.textures}):S0.postMessage("Texture"+this.scene_id+".getInfo",$).then(function(_i){return _i.forEach(function(_s){_r.textures[_s.name]=_s}),_r.textures})}},{key:"getMaxTextureSize",value:function($){return $.getParameter($.MAX_TEXTURE_SIZE)}}],[{key:"register",value:function($,_r){var _i=j.matchers_;if(!($ instanceof Function&&_r instanceof Function))throw"Invalid texture constructor or matcher";this.deRegister($),_i.push([$,_r])}},{key:"deRegister",value:function($){for(var _r=j.matchers_,_i=0;_i<_r.length;_i++)_r[_i][0]===$&&_r.splice(_i,1)}}]),j}();GT.DEFAULT_TEXTURE_NAME="__default",GT.matchers_=[];var yS={};function Dx(j){return yS[j]||(yS[j]=new GT(j)),yS[j]}var o4=function(j){return j[0]=1,j[1]=0,j[2]=0,j[3]=0,j[4]=0,j[5]=1,j[6]=0,j[7]=0,j[8]=0,j[9]=0,j[10]=1,j[11]=0,j[12]=0,j[13]=0,j[14]=0,j[15]=1,j},Qx={fromValues:function(j,$,_r){var _i=new Float64Array(3);return _i[0]=j,_i[1]=$,_i[2]=_r,_i},transformMat4:function(j,$,_r){var _i=$[0],_s=$[1],ga=$[2],_l=_r[3]*_i+_r[7]*_s+_r[11]*ga+_r[15];return _l=_l||1,j[0]=(_r[0]*_i+_r[4]*_s+_r[8]*ga+_r[12])/_l,j[1]=(_r[1]*_i+_r[5]*_s+_r[9]*ga+_r[13])/_l,j[2]=(_r[2]*_i+_r[6]*_s+_r[10]*ga+_r[14])/_l,j}},s4={normalFromMat4:function(j,$){var _r=$[0],_i=$[1],_s=$[2],ga=$[3],_l=$[4],_c=$[5],_p=$[6],_f=$[7],ey=$[8],iy=$[9],ly=$[10],uy=$[11],cy=$[12],yy=$[13],ay=$[14],by=$[15],Ey=_r*_c-_i*_l,ky=_r*_p-_s*_l,Oy=_r*_f-ga*_l,Ty=_i*_p-_s*_c,Ly=_i*_f-ga*_c,Ny=_s*_f-ga*_p,Uy=ey*yy-iy*cy,Xy=ey*ay-ly*cy,Yy=ey*by-uy*cy,Wy=iy*ay-ly*yy,_g=iy*by-uy*yy,y0=ly*by-uy*ay,_m=Ey*y0-ky*_g+Oy*Wy+Ty*Yy-Ly*Xy+Ny*Uy;return _m?(_m=1/_m,j[0]=(_c*y0-_p*_g+_f*Wy)*_m,j[1]=(_p*Yy-_l*y0-_f*Xy)*_m,j[2]=(_l*_g-_c*Yy+_f*Uy)*_m,j[3]=(_s*_g-_i*y0-ga*Wy)*_m,j[4]=(_r*y0-_s*Yy+ga*Xy)*_m,j[5]=(_i*Yy-_r*_g-ga*Uy)*_m,j[6]=(yy*Ny-ay*Ly+by*Ty)*_m,j[7]=(ay*Oy-cy*Ny-by*ky)*_m,j[8]=(cy*Ly-yy*Oy+by*Ey)*_m,j):null},invert:function(j,$){var _r=$[0],_i=$[1],_s=$[2],ga=$[3],_l=$[4],_c=$[5],_p=$[6],_f=$[7],ey=$[8],iy=ey*_l-_c*_f,ly=-ey*ga+_c*_p,uy=_f*ga-_l*_p,cy=_r*iy+_i*ly+_s*uy;return cy?(cy=1/cy,j[0]=iy*cy,j[1]=(-ey*_i+_s*_f)*cy,j[2]=(_c*_i-_s*_l)*cy,j[3]=ly*cy,j[4]=(ey*_r-_s*_p)*cy,j[5]=(-_c*_r+_s*ga)*cy,j[6]=uy*cy,j[7]=(-_f*_r+_i*_p)*cy,j[8]=(_l*_r-_i*ga)*cy,j):null},identity:function(j){return j[0]=1,j[1]=0,j[2]=0,j[3]=0,j[4]=1,j[5]=0,j[6]=0,j[7]=0,j[8]=1,j}},E_={multiply:function(j,$,_r){var _i=$[0],_s=$[1],ga=$[2],_l=$[3],_c=$[4],_p=$[5],_f=$[6],ey=$[7],iy=$[8],ly=$[9],uy=$[10],cy=$[11],yy=$[12],ay=$[13],by=$[14],Ey=$[15],ky=_r[0],Oy=_r[1],Ty=_r[2],Ly=_r[3];return j[0]=ky*_i+Oy*_c+Ty*iy+Ly*yy,j[1]=ky*_s+Oy*_p+Ty*ly+Ly*ay,j[2]=ky*ga+Oy*_f+Ty*uy+Ly*by,j[3]=ky*_l+Oy*ey+Ty*cy+Ly*Ey,ky=_r[4],Oy=_r[5],Ty=_r[6],Ly=_r[7],j[4]=ky*_i+Oy*_c+Ty*iy+Ly*yy,j[5]=ky*_s+Oy*_p+Ty*ly+Ly*ay,j[6]=ky*ga+Oy*_f+Ty*uy+Ly*by,j[7]=ky*_l+Oy*ey+Ty*cy+Ly*Ey,ky=_r[8],Oy=_r[9],Ty=_r[10],Ly=_r[11],j[8]=ky*_i+Oy*_c+Ty*iy+Ly*yy,j[9]=ky*_s+Oy*_p+Ty*ly+Ly*ay,j[10]=ky*ga+Oy*_f+Ty*uy+Ly*by,j[11]=ky*_l+Oy*ey+Ty*cy+Ly*Ey,ky=_r[12],Oy=_r[13],Ty=_r[14],Ly=_r[15],j[12]=ky*_i+Oy*_c+Ty*iy+Ly*yy,j[13]=ky*_s+Oy*_p+Ty*ly+Ly*ay,j[14]=ky*ga+Oy*_f+Ty*uy+Ly*by,j[15]=ky*_l+Oy*ey+Ty*cy+Ly*Ey,j},translate:function(j,$,_r){var _i,_s,ga,_l,_c,_p,_f,ey,iy,ly,uy,cy,yy=_r[0],ay=_r[1],by=_r[2];return $===j?(j[12]=$[0]*yy+$[4]*ay+$[8]*by+$[12],j[13]=$[1]*yy+$[5]*ay+$[9]*by+$[13],j[14]=$[2]*yy+$[6]*ay+$[10]*by+$[14],j[15]=$[3]*yy+$[7]*ay+$[11]*by+$[15]):(_i=$[0],_s=$[1],ga=$[2],_l=$[3],_c=$[4],_p=$[5],_f=$[6],ey=$[7],iy=$[8],ly=$[9],uy=$[10],cy=$[11],j[0]=_i,j[1]=_s,j[2]=ga,j[3]=_l,j[4]=_c,j[5]=_p,j[6]=_f,j[7]=ey,j[8]=iy,j[9]=ly,j[10]=uy,j[11]=cy,j[12]=_i*yy+_c*ay+iy*by+$[12],j[13]=_s*yy+_p*ay+ly*by+$[13],j[14]=ga*yy+_f*ay+uy*by+$[14],j[15]=_l*yy+ey*ay+cy*by+$[15]),j},scale:function(j,$,_r){var _i=_r[0],_s=_r[1],ga=_r[2];return j[0]=$[0]*_i,j[1]=$[1]*_i,j[2]=$[2]*_i,j[3]=$[3]*_i,j[4]=$[4]*_s,j[5]=$[5]*_s,j[6]=$[6]*_s,j[7]=$[7]*_s,j[8]=$[8]*ga,j[9]=$[9]*ga,j[10]=$[10]*ga,j[11]=$[11]*ga,j[12]=$[12],j[13]=$[13],j[14]=$[14],j[15]=$[15],j},perspective:function(j,$,_r,_i,_s){var ga=1/Math.tan($/2),_l=1/(_i-_s);return j[0]=ga/_r,j[1]=0,j[2]=0,j[3]=0,j[4]=0,j[5]=ga,j[6]=0,j[7]=0,j[8]=0,j[9]=0,j[10]=(_s+_i)*_l,j[11]=-1,j[12]=0,j[13]=0,j[14]=2*_s*_i*_l,j[15]=0,j},lookAt:function(j,$,_r,_i){var _s,ga,_l,_c,_p,_f,ey,iy,ly,uy,cy=$[0],yy=$[1],ay=$[2],by=_i[0],Ey=_i[1],ky=_i[2],Oy=_r[0],Ty=_r[1],Ly=_r[2];return Math.abs(cy-Oy)<1e-6&&Math.abs(yy-Ty)<1e-6&&Math.abs(ay-Ly)<1e-6?o4(j):(ey=cy-Oy,iy=yy-Ty,ly=ay-Ly,uy=1/Math.sqrt(ey*ey+iy*iy+ly*ly),_s=Ey*(ly*=uy)-ky*(iy*=uy),ga=ky*(ey*=uy)-by*ly,_l=by*iy-Ey*ey,(uy=Math.sqrt(_s*_s+ga*ga+_l*_l))?(_s*=uy=1/uy,ga*=uy,_l*=uy):_l=ga=_s=0,_c=iy*_l-ly*ga,_p=ly*_s-ey*_l,_f=ey*ga-iy*_s,(uy=Math.sqrt(_c*_c+_p*_p+_f*_f))?(_c*=uy=1/uy,_p*=uy,_f*=uy):_f=_p=_c=0,j[0]=_s,j[1]=_c,j[2]=ey,j[3]=0,j[4]=ga,j[5]=_p,j[6]=iy,j[7]=0,j[8]=_l,j[9]=_f,j[10]=ly,j[11]=0,j[12]=-(_s*cy+ga*yy+_l*ay),j[13]=-(_c*cy+_p*yy+_f*ay),j[14]=-(ey*cy+iy*yy+ly*ay),j[15]=1,j)},identity:o4,copy:function(j,$){return j[0]=$[0],j[1]=$[1],j[2]=$[2],j[3]=$[3],j[4]=$[4],j[5]=$[5],j[6]=$[6],j[7]=$[7],j[8]=$[8],j[9]=$[9],j[10]=$[10],j[11]=$[11],j[12]=$[12],j[13]=$[13],j[14]=$[14],j[15]=$[15],j},invert:function(j,$){var _r=$[0],_i=$[1],_s=$[2],ga=$[3],_l=$[4],_c=$[5],_p=$[6],_f=$[7],ey=$[8],iy=$[9],ly=$[10],uy=$[11],cy=$[12],yy=$[13],ay=$[14],by=$[15],Ey=_r*_c-_i*_l,ky=_r*_p-_s*_l,Oy=_r*_f-ga*_l,Ty=_i*_p-_s*_c,Ly=_i*_f-ga*_c,Ny=_s*_f-ga*_p,Uy=ey*yy-iy*cy,Xy=ey*ay-ly*cy,Yy=ey*by-uy*cy,Wy=iy*ay-ly*yy,_g=iy*by-uy*yy,y0=ly*by-uy*ay,_m=Ey*y0-ky*_g+Oy*Wy+Ty*Yy-Ly*Xy+Ny*Uy;return _m?(_m=1/_m,j[0]=(_c*y0-_p*_g+_f*Wy)*_m,j[1]=(_s*_g-_i*y0-ga*Wy)*_m,j[2]=(yy*Ny-ay*Ly+by*Ty)*_m,j[3]=(ly*Ly-iy*Ny-uy*Ty)*_m,j[4]=(_p*Yy-_l*y0-_f*Xy)*_m,j[5]=(_r*y0-_s*Yy+ga*Xy)*_m,j[6]=(ay*Oy-cy*Ny-by*ky)*_m,j[7]=(ey*Ny-ly*Oy+uy*ky)*_m,j[8]=(_l*_g-_c*Yy+_f*Uy)*_m,j[9]=(_i*Yy-_r*_g-ga*Uy)*_m,j[10]=(cy*Ly-yy*Oy+by*Ey)*_m,j[11]=(iy*Oy-ey*Ly-uy*Ey)*_m,j[12]=(_c*Xy-_l*Wy-_p*Uy)*_m,j[13]=(_r*Wy-_i*Xy+_s*Uy)*_m,j[14]=(yy*ky-cy*Ty-ay*Ey)*_m,j[15]=(ey*Ty-iy*ky+ly*Ey)*_m,j):null}},_w={transformMat4:function(j,$,_r){var _i=$[0],_s=$[1],ga=$[2],_l=$[3];return j[0]=_r[0]*_i+_r[4]*_s+_r[8]*ga+_r[12]*_l,j[1]=_r[1]*_i+_r[5]*_s+_r[9]*ga+_r[13]*_l,j[2]=_r[2]*_i+_r[6]*_s+_r[10]*ga+_r[14]*_l,j[3]=_r[3]*_i+_r[7]*_s+_r[11]*ga+_r[15]*_l,j},normalize:function(j,$){var _r=$[0],_i=$[1],_s=$[2],ga=$[3],_l=_r*_r+_i*_i+_s*_s+ga*ga;return 0<_l&&(_l=1/Math.sqrt(_l),j[0]=_r*_l,j[1]=_i*_l,j[2]=_s*_l,j[3]=ga*_l),j},scale:function(j,$,_r){return j[0]=$[0]*_r,j[1]=$[1]*_r,j[2]=$[2]*_r,j[3]=$[3]*_r,j}},lx=function(){function j($,_r){F0(this,j),this._gl=$,this._requests={},this._pixels=null,this._has_dirty_buffer=!1,this._fbo=this._gl.createFramebuffer(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._fbo_size={width:256,height:256};var _i=Dx(_r).create(this._gl,"selection_fbo",{filtering:"nearest"});_i.setData(this._fbo_size.width,this._fbo_size.height,null,{filtering:"nearest"}),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,_i.texture,0);var _s=this._gl.createRenderbuffer();this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,_s),this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this._fbo_size.width,this._fbo_size.height),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,_s),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}return H0(j,[{key:"destroy",value:function(){this._gl&&this._fbo&&(this._gl.deleteFramebuffer(this._fbo),this._fbo=null,this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null))}},{key:"bind",value:function(){var $;this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._gl.viewport(0,0,this._fbo_size.width,this._fbo_size.height),($=this._gl).clearColor.apply($,u1(j.defaultColor))}},{key:"getFeatureAt",value:function($,_r,_i){var _s=_r.radius,ga=_r.top_most_only,_l=ga===void 0||ga;!$||$.x<0||$.y<0||1<$.x||1<$.y?_i({features:null}):(this.selection_request_id=this.selection_request_id+1||0,this._requests[this.selection_request_id]={id:this.selection_request_id,point:$,radius:_s,top_most_only:_l,ttl:_l?1:j.MAX_PICKING_TRIES,callback:_i})}},{key:"hasPendingRequests",value:function(){return 0<Object.keys(this._requests).length}},{key:"clearPendingRequests",value:function(){for(var $ in this._requests)this._requests[$].callback(new Error("cleared")),delete this._requests[$];this._pending_deep_request=null}},{key:"read",value:function($){if(this.hasPendingRequests()){var _r=this._gl;for(var _i in _r.bindFramebuffer(_r.FRAMEBUFFER,this._fbo),this._pending_deep_request&&this.processRequest(this._pending_deep_request,$),this._requests)if(this.processRequest(this._requests[_i],$))break;_r.bindFramebuffer(_r.FRAMEBUFFER,null)}}},{key:"processRequest",value:function($,_r){var _i,_s,ga,_l=this._gl,_c=255,_p=$.point,_f=$.radius,ey=(ga=_f?(_s=Math.min(this._fbo_size.width,this._fbo_size.height),{x:Math.min(Math.ceil(2*_f.x*this._fbo_size.width),_s),y:Math.min(Math.ceil(2*_f.y*this._fbo_size.height),_s)}):(_f={x:0,y:0},{x:1,y:1})).x*ga.y*4;if(this._pixels==null||this._pixels.byteLength<ey)this._pixels=new Uint8Array(ey);else if(this._pixels.fill instanceof Function)this._pixels.fill(0,0,ey);else for(var iy=0;iy<ey;iy++)this._pixels[iy]=0;_l.readPixels(Math.round((_p.x-_f.x)*this._fbo_size.width),Math.round((1-_p.y-_f.y)*this._fbo_size.height),ga.x,ga.y,_l.RGBA,_l.UNSIGNED_BYTE,this._pixels),$.ttl--;var ly=Math.floor(ga.x/2),uy=Math.floor(ga.y/2),cy=4*(uy*ga.x+ly),yy=this._pixels.slice(cy,cy+4),ay=yy[0]+(yy[1]<<8)+(yy[2]<<16);if(0<ay)_i=ay+(yy[3]<<24)>>>0,_c=yy[3];else if(4<ey)for(var by=1/0,cy=0,Ey=0;Ey<ga.y;Ey++)for(var ky,Oy=0;Oy<ga.x;Oy++,cy+=4)0<(ay=(yy=this._pixels.slice(cy,cy+4))[0]+(yy[1]<<8)+(yy[2]<<16))&&(ky=Math.pow(Oy-ly,2)+Math.pow(Ey-uy,2))<by&&(_i=ay+(yy[3]<<24)>>>0,_c=yy[3],by=ky);if(_c!==255){var Ty=this._getFeatureByKey(_i,_r);if($.features||($.features=[]),!Ty)return void this._finishRead($);if($.features.every(function(Ly){return Ly.id!==Ty.id})&&$.features.push(Ty),$.ttl)return this._pending_deep_request=$,j._discardColor(yy),this._has_dirty_buffer=!0;this._finishRead($)}else this._finishRead($)}},{key:"_finishRead",value:function($){var _r=$.features||j.EMPTY_ARRAY;$.top_most_only||(this._pending_deep_request=null,j._resetDiscardedColors()),delete this._requests[$.id],$.callback({features:_r})}},{key:"_getFeatureByKey",value:function($,_r){for(var _i=null,_s=0;_s<_r.length;_s++){var ga=_r[_s];if(ga.selection_data&&(_i=ga.selection_data[$])){_i.tile={coords:ga.coords};break}}return _i}},{key:"setupDiscards",value:function($){for(var _r=j.MAX_PICKING_TRIES;_r--;)$.uniform("4fv","u_selection_discard".concat(_r),j._discarded_colors[_r]||j.defaultColor)}},{key:"has_dirty_buffer",get:function(){return this._has_dirty_buffer},set:function(){this._has_dirty_buffer=!!this._pending_deep_request}}],[{key:"makeEntry",value:function(){this.map_entry++;var $=255&this.map_entry,_r=this.map_entry>>8&255,_i=this.map_entry>>16&255,_s=this.map_prefix;return{key:$+(_r<<8)+(_i<<16)+(_s<<24)>>>0,color:[$/255,_r/255,_i/255,_s/255]}}},{key:"reset",value:function(){this.map_entry=0}},{key:"setPrefix",value:function($){this.map_prefix=$}},{key:"_discardColor",value:function($){this._discarded_colors.push([$[0]/255,$[1]/255,$[2]/255,$[3]/255])}},{key:"_resetDiscardedColors",value:function(){this._discarded_colors.length=0}}]),j}();lx._discarded_colors=[],lx.map_entry=0,lx.map_prefix=0,lx.defaultColor=[0,0,0,1],lx.MAX_PICKING_TRIES=10,lx.EMPTY_ARRAY=Object.freeze([]);var P_={parseUniforms:function(j){var $=[];for(var _r in j){var _i,_s=_r,ga=j[_r];if(typeof ga=="number")$.push({type:"float",method:"1f",name:_r,value:ga,key:_s,uniforms:j});else if(Array.isArray(ga)){if(typeof ga[0]=="number")2<=ga.length&&ga.length<=4?$.push({type:"vec"+ga.length,method:ga.length+"fv",name:_r,value:ga,key:_s,uniforms:j}):4<ga.length&&$.push({type:"float[]",method:"1fv",name:_r+"[0]",value:ga,key:_s,uniforms:j});else if(typeof ga[0]=="string")for(_i=0;_i<ga.length;_i++)$.push({type:"sampler2D",method:"1i",name:_r+"["+_i+"]",value:ga[_i],key:_i,uniforms:ga});else if(Array.isArray(ga[0])&&typeof ga[0][0]=="number"&&2<=ga[0].length&&ga[0].length<=4)for(_i=0;_i<ga.length;_i++)$.push({type:"vec"+ga[0].length,method:ga[_i].length+"fv",name:_r+"["+_i+"]",value:ga[_i],key:_i,uniforms:ga})}else typeof ga=="boolean"?$.push({type:"bool",method:"1i",name:_r,value:ga,key:_s,uniforms:j}):typeof ga=="string"&&$.push({type:"sampler2D",method:"1i",name:_r,value:ga,key:_s,uniforms:j})}return $},defineVariable:function(j,$){var _r,_i;if(typeof $=="number")_r="float";else if(Array.isArray($))typeof $[0]=="number"?2<=$.length&&$.length<=4?_r="vec"+$.length:(_r="float",_i=$.length):typeof $[0]=="string"&&(_r="sampler2D",_i=$.length);else if(typeof $=="boolean")_r="bool";else{if(typeof $!="string")return;_r="sampler2D"}var _s="";return _s+="".concat(_r," ").concat(j),_i&&(_s+="[".concat(_i,"]")),_s+=`;
`},defineUniform:function(j,$){var _r=P_.defineVariable(j,$);if(_r)return"uniform "+_r},isUniformDefined:function(j,$){var _r=new RegExp("uniform[^;]+(?:{[\\s\\S]*})?[^;]*\\b"+j+"\\b","g");return!!$.match(_r)},isSymbolReferenced:function(j,$){var _r=new RegExp("\\b"+j+"\\b","g");return 0<=$.search(_r)},expandVec3:function(j){var $,_r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(Array.isArray(j)){if(j.length!==2)return j;$=[].concat(u1(j),[_r]).map(parseFloat)}else $=[j,j,j].map(parseFloat);if($&&$.every(function(_i){return typeof _i=="number"&&!isNaN(_i)}))return $},expandVec4:function(j){var $,_r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(Array.isArray(j)){if(j.length!==3)return j;$=[].concat(u1(j),[_r]).map(parseFloat)}else $=[j,j,j,_r].map(parseFloat);if($&&$.every(function(_i){return typeof _i=="number"&&!isNaN(_i)}))return $}},VT=[];function tT(j,$){var _r=VT.filter(function(_i){return _i[0]===j})[0];return(_r=_r&&_r[1])||(VT.push([j,{}]),_r=VT[VT.length-1][1]),_r[$]||(_r[$]=j.getExtension($)),_r[$]}function HT(j){var $,_r,_i=0;if(j.length===0)return _i;for($=0,_r=j.length;$<_r;$++)_i=(_i<<5)-_i+j.charCodeAt($),_i|=0;return _i}var a4=_u(function(j){var $="(.|[\\r\\n]|\\n)*?\\*\\/\\n?\\n?",_r=/(^|[^\S\n])(?:\/\/)([\s\S]+?)$/gm,_i=/(^|[^\S\n])(?:\/\/[^!])([\s\S]+?)$/gm,_s=j.exports=function(ga,_l){return ga?_s.block(_s.line(ga,_l),_l):""};_s.block=function(ga,_l){_l=_l||{};var _c=new RegExp("\\/\\*"+$,"gm");return _l.safe&&(_c=new RegExp("\\/\\*(?!\\*?\\!)"+$,"gm")),ga?ga.replace(_c,""):""},_s.line=function(ga,_l){var _c=_r;return(_l=_l||{}).safe&&(_c=_i),ga?ga.replace(_c,""):""}}),NI=function(j){j=String(j);for(var $,_r=[];$=j.match(/ERROR\:([^\n]+)/);){j=j.slice($.index+1);var _i=(_l=$[1].trim()).split(":"),_s=_i.slice(2).join(":").trim(),ga=parseInt(_i[0],10),_l=parseInt(_i[1],10);_r.push({message:_s,file:ga,line:_l})}return _r},l4=/^\s*#pragma.*$/gm,u4=/\\\s*\n/gm,M0=function(){function j($,_r,_i,_s,ga){if(F0(this,j),ga=ga||{},this.textureManager=Dx(_s),this.gl=$,this.program=null,this.compiled=!1,this.compiling=!1,this.error=null,!j.polyfills[_s]){j.polyfills[_s]={};try{this.gl.uniformMatrix3fv(null,!1,new Float64Array(9))}catch{j.polyfills[_s].uniformMatrix3fv=this.gl.uniformMatrix3fv,this.gl.uniformMatrix3fv=function(_c,_p,_f){j.polyfills[_s].uniformMatrix3fv.call(this,_c,_p,new Float32Array(_f))}}try{this.gl.uniformMatrix4fv(null,!1,new Float64Array(16))}catch{j.polyfills[_s].uniformMatrix4fv=this.gl.uniformMatrix4fv,this.gl.uniformMatrix4fv=function(_c,_p,_f){j.polyfills[_s].uniformMatrix4fv.call(this,_c,_p,new Float32Array(_f))}}}this.defines=Object.assign({},ga.defines||{}),this.blocks=Object.assign({},ga.blocks||{}),this.block_scopes=Object.assign({},ga.block_scopes||{}),this.extensions=ga.extensions||[],this.dependent_uniforms=ga.uniforms,this.uniforms={},this.attribs={},this.vertex_source=_r,this.fragment_source=_i,this.id=j.id++,this.name=ga.name}return H0(j,[{key:"destroy",value:function(){this.gl.useProgram(null),this.gl.deleteProgram(this.program),this.program=null,this.uniforms={},this.attribs={},this.compiled=!1}},{key:"use",value:function(){this.compiled&&(j.current!==this&&this.gl.useProgram(this.program),j.current=this)}},{key:"compile",value:function(){var $=this;if(this.compiling)throw new Error("ShaderProgram.compile(): skipping for ".concat(this.id," (").concat(this.name,") because already compiling"));this.compiling=!0,this.compiled=!1,this.error=null,this.computed_vertex_source=this.vertex_source,this.computed_fragment_source=this.fragment_source;var _r,_i=this.checkExtensions(),_s=this.buildDefineList(),ga=this.buildShaderBlockList();for(var _l in ga){var _c,_p,_f,ey=ga[_l];!ey||Array.isArray(ey)&&ey.length===0||(_r=new RegExp("^\\s*#pragma\\s+tangram:\\s+"+_l+"\\s*$","m"),_c=this.computed_vertex_source.match(_r),_p=this.computed_fragment_source.match(_r),_c==null&&_p==null||(_f="",ey.forEach(function(uy){var cy="".concat(uy.scope,", ").concat(uy.key,", ").concat(uy.num);_f+=`
// tangram-block-start: `.concat(cy,`
`),_f+=uy.source,_f+=`
// tangram-block-end: `.concat(cy,`
`)}),_c!=null&&(this.computed_vertex_source=this.computed_vertex_source.replace(_r,_f)),_p!=null&&(this.computed_fragment_source=this.computed_fragment_source.replace(_r,_f)),_s["TANGRAM_BLOCK_"+_l.replace(/[\s-]+/g,"_").toUpperCase()]=!0))}this.computed_vertex_source=this.computed_vertex_source.replace(l4,""),this.computed_fragment_source=this.computed_fragment_source.replace(l4,""),this.ensureUniforms(this.dependent_uniforms);var ly="",iy=this.gl.getShaderPrecisionFormat(this.gl.FRAGMENT_SHADER,this.gl.HIGH_FLOAT),ly=iy&&0<iy.precision?`precision highp float;
`:`precision mediump float;
`;_s.TANGRAM_VERTEX_SHADER=!0,_s.TANGRAM_FRAGMENT_SHADER=!1,this.computed_vertex_source=ly+j.buildDefineString(_s)+this.computed_vertex_source,_s.TANGRAM_VERTEX_SHADER=!1,_s.TANGRAM_FRAGMENT_SHADER=!0,this.computed_fragment_source=j.buildExtensionString(_i)+ly+j.buildDefineString(_s)+this.computed_fragment_source,this.computed_vertex_source=this.computed_vertex_source.replace(u4,""),this.computed_fragment_source=this.computed_fragment_source.replace(u4,"");try{this.program=j.updateProgram(this.gl,this.program,this.computed_vertex_source,this.computed_fragment_source),this.compiled=!0,this.compiling=!1}catch(uy){throw this.program=null,this.compiled=!1,this.compiling=!1,(this.error=uy).type!=="vertex"&&uy.type!=="fragment"||(this.shader_errors=uy.errors,this.shader_errors.forEach(function(cy){cy.type=uy.type,cy.block=$.block(uy.type,cy.line)})),uy}this.computed_vertex_source=null,this.computed_fragment_source=null,this.use(),this.refreshUniforms(),this.refreshAttributes()}},{key:"buildDefineList",value:function(){var $,_r={};for($ in j.defines)_r[$]=j.defines[$];for($ in this.defines)_r[$]=this.defines[$];return _r}},{key:"buildShaderBlockList",value:function(){var $,_r,_i={};for($ in j.blocks)_i[$]=[],Array.isArray(j.blocks[$])?(_r=_i[$]).push.apply(_r,u1(j.blocks[$].map(function(_p,_f){return{key:$,source:_p,num:_f,scope:"ShaderProgram"}}))):_i[$]=[{key:$,source:j.blocks[$],num:0,scope:"ShaderProgram"}];for($ in this.blocks)if(_i[$]=_i[$]||[],Array.isArray(this.blocks[$]))for(var _s=this.block_scopes&&this.block_scopes[$]||[],ga=null,_l=0,_c=0;_c<this.blocks[$].length;_c++)_s[_c]!==ga&&(ga=_s[_c],_l=0),_i[$].push({key:$,source:this.blocks[$][_c],num:_l,scope:ga||this.name}),_l++;else _i[$].push({key:$,source:this.blocks[$],num:0,scope:this.name});return _i}},{key:"ensureUniforms",value:function($){if($){var _r,_i=a4(this.computed_vertex_source),_s=a4(this.computed_fragment_source),ga=[],_l=[];for(var _c in $){var _p=P_.isUniformDefined(_c,_i),_f=P_.isUniformDefined(_c,_s);if(!_p||!_f){if(!(_r=P_.defineUniform(_c,$[_c])))continue;_p||(o0("trace","Program ".concat(this.name,": ").concat(_c," not defined in vertex shader, injecting: '").concat(_r,"'")),ga.push(_r)),_f||(o0("trace","Program ".concat(this.name,": ").concat(_c," not defined in fragment shader, injecting: '").concat(_r,"'")),_l.push(_r))}}0<ga.length&&(this.computed_vertex_source=ga.join(`
`)+this.computed_vertex_source),0<_l.length&&(this.computed_fragment_source=_l.join(`
`)+this.computed_fragment_source)}}},{key:"setUniforms",value:function($,_r){var _i=!(1<arguments.length&&_r!==void 0)||_r;if(this.compiled){_i&&(this.texture_unit=0);for(var _s=P_.parseUniforms($),ga=0;ga<_s.length;ga++){var _l=_s[ga];_l.type==="sampler2D"?this.setTextureUniform(_l.name,_l.value):this.uniform(_l.method,_l.name,_l.value)}}}},{key:"saveUniforms",value:function($){var _r=$||this.uniforms;for(var _i in _r){var _s=this.uniforms[_i];_s&&(_s.saved_value=_s.value)}this.saved_texture_unit=this.texture_unit||0}},{key:"restoreUniforms",value:function($){var _r=$||this.uniforms;for(var _i in _r){var _s=this.uniforms[_i];_s&&_s.saved_value&&(_s.value=_s.saved_value,this.updateUniform(_s))}this.texture_unit=this.saved_texture_unit||0}},{key:"setTextureUniform",value:function($,_r){var _i=this.textureManager.textures[_r];_i!=null?(_i.bind(this.texture_unit),this.uniform("1i",$,this.texture_unit),this.texture_unit++):o0("warn","Cannot find texture '".concat(_r,"'"))}},{key:"uniform",value:function($,_r,_i){var _s;this.compiled&&(this.uniforms[_r]=this.uniforms[_r]||{},_s=this.uniforms[_r],_s.name=_r,_s.location===void 0&&(_s.location=this.gl.getUniformLocation(this.program,_r)),_s.method=$,_s.value=_i,this.updateUniform(_s))}},{key:"updateUniform",value:function($){this.compiled&&$&&$.location!=null&&(this.use(),this.commitUniform($))}},{key:"commitUniform",value:function($){var _r=$.location,_i=$.value;switch($.method){case"1i":this.gl.uniform1i(_r,_i);break;case"1f":this.gl.uniform1f(_r,_i);break;case"2f":this.gl.uniform2f(_r,_i[0],_i[1]);break;case"3f":this.gl.uniform3f(_r,_i[0],_i[1],_i[2]);break;case"4f":this.gl.uniform4f(_r,_i[0],_i[1],_i[2],_i[3]);break;case"1iv":this.gl.uniform1iv(_r,_i);break;case"3iv":this.gl.uniform3iv(_r,_i);break;case"1fv":this.gl.uniform1fv(_r,_i);break;case"2fv":this.gl.uniform2fv(_r,_i);break;case"3fv":this.gl.uniform3fv(_r,_i);break;case"4fv":this.gl.uniform4fv(_r,_i);break;case"Matrix3fv":this.gl.uniformMatrix3fv(_r,!1,_i);break;case"Matrix4fv":this.gl.uniformMatrix4fv(_r,!1,_i)}}},{key:"refreshUniforms",value:function(){if(this.compiled)for(var $ in this.uniforms){var _r=this.uniforms[$];_r.location=this.gl.getUniformLocation(this.program,$),this.updateUniform(_r)}}},{key:"refreshAttributes",value:function(){this.attribs={}}},{key:"attribute",value:function($){if(this.compiled){var _r=this.attribs[$]=this.attribs[$]||{};return _r.location!=null||(_r.name=$,_r.location=this.gl.getAttribLocation(this.program,$)),_r}}},{key:"source",value:function($){return $==="vertex"?this.computed_vertex_source:$==="fragment"?this.computed_fragment_source:void 0}},{key:"lines",value:function($){var _r=this.source($);return _r?_r.split(`
`):[]}},{key:"line",value:function($,_r){var _i=this.lines($);if(_i)return _i[_r]}},{key:"block",value:function($,_r){for(var _i,_s=this.lines($),ga=0;ga<_r&&ga<_s.length;ga++){var _l=_s[ga],_c=_l.match(/\/\/ tangram-block-start: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/);_c&&1<_c.length?_i={scope:_c[1],name:_c[2],num:_c[3]}:(_c=_l.match(/\/\/ tangram-block-end: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/))&&1<_c.length&&(_i=null),_i&&(_i.line=_i.line==null?-1:_i.line+1,_i.source=_l)}return _i}},{key:"checkExtensions",value:function(){var $=this,_r=[];return this.extensions.forEach(function(_i){var _s=tT($.gl,_i),ga="TANGRAM_EXTENSION_".concat(_i);$.defines[ga]=_s!=null,_s?_r.push(_i):o0("debug","Could not enable extension '".concat(_i,"'"))}),_r}}]),j}();M0.polyfills={},M0.id=0,M0.current=null,M0.defines={},M0.blocks={},M0.reset=function(){M0.programs_by_source={},M0.shaders_by_source={}},M0.reset(),M0.buildDefineString=function(j){var $="";for(var _r in j)j[_r]!=null&&j[_r]!==!1&&(typeof j[_r]=="boolean"&&j[_r]===!0?$+="#define "+_r+`
`:typeof j[_r]=="number"&&Math.floor(j[_r])===j[_r]?$+="#define "+_r+" "+j[_r].toFixed(1)+`
`:$+="#define "+_r+" "+j[_r]+`
`);return $},M0.buildExtensionString=function(j){var $="";return(j=j||[]).forEach(function(_r){$+="#ifdef GL_".concat(_r,`
#extension GL_`).concat(_r,` : enable
#endif
`)}),$},M0.addBlock=function(j){var $;M0.blocks[j]=M0.blocks[j]||[];for(var _r=arguments.length,_i=new Array(1<_r?_r-1:0),_s=1;_s<_r;_s++)_i[_s-1]=arguments[_s];($=M0.blocks[j]).push.apply($,_i)},M0.removeBlock=function(j){M0.blocks[j]=[]},M0.replaceBlock=function(j){M0.removeBlock(j);for(var $=arguments.length,_r=new Array(1<$?$-1:0),_i=1;_i<$;_i++)_r[_i-1]=arguments[_i];M0.addBlock.apply(M0,[j].concat(_r))},M0.updateProgram=function(j,$,_r,_i){var _s=HT(j._tangram_id+"::"+_r+"::"+_i);if(M0.programs_by_source[_s])return o0("trace","Reusing identical source GL program object"),M0.programs_by_source[_s];var ga=M0.createShader(j,_r,j.VERTEX_SHADER),_l=M0.createShader(j,_i,j.FRAGMENT_SHADER);if(j.useProgram(null),$!=null)for(var _c=j.getAttachedShaders($),_p=0;_p<_c.length;_p++)j.detachShader($,_c[_p]);else $=j.createProgram();if(ga==null||_l==null)return $;if(j.attachShader($,ga),j.attachShader($,_l),j.linkProgram($),j.getProgramParameter($,j.LINK_STATUS))return M0.programs_by_source[_s]=$;var _f=new Error(`WebGL program error:
            VALIDATE_STATUS: `.concat(j.getProgramParameter($,j.VALIDATE_STATUS),`
            ERROR: `).concat(j.getError(),`
            --- Vertex Shader ---
            `).concat(_r,`
            --- Fragment Shader ---
            `).concat(_i));throw Object.assign(new Error(_f),{type:"program"})};var P1,sE={disabled:!(M0.createShader=function(j,$,_r){var _i=HT(j._tangram_id+"::"+$);if(M0.shaders_by_source[_i])return o0("trace","Reusing identical source GL shader object"),M0.shaders_by_source[_i];var _s=j.createShader(_r);if(j.shaderSource(_s,$),j.compileShader(_s),j.getShaderParameter(_s,j.COMPILE_STATUS))return M0.shaders_by_source[_i]=_s;var ga=_r===j.VERTEX_SHADER?"vertex":"fragment",_l=j.getShaderInfoLog(_s),_c=NI(_l);throw Object.assign(new Error(_l),{type:ga,errors:_c})}),bound_vao:[],init:function(j){var $;this.disabled!==!0&&($=tT(j,"OES_vertex_array_object")),$!=null?o0("info","Vertex Array Object extension available"):this.disabled!==!0?o0("warn","Vertex Array Object extension NOT available"):o0("warn","Vertex Array Object extension force disabled")},create:function(j,$,_r){var _i={};_i.setup=$,_i.teardown=_r;var _s=tT(j,"OES_vertex_array_object");return _s!=null&&(_i._vao=_s.createVertexArrayOES(),_s.bindVertexArrayOES(_i._vao)),_i.setup(!0),_i},getCurrentBinding:function(j){var $=this.bound_vao.filter(function(_r){return _r[0]===j})[0];return $&&$[1]},setCurrentBinding:function(j,$){var _r=this.bound_vao,_i=_r.filter(function(_s){return _s[0]===j})[0];_i==null?_r.push([j,$]):_i[1]=$},bind:function(j,$){var _r,_i=tT(j,"OES_vertex_array_object");$!=null?_i!=null&&$._vao!=null?(_i.bindVertexArrayOES($._vao),this.setCurrentBinding(j,$)):$.setup(!1):(_r=this.getCurrentBinding(j),_i!=null?_i.bindVertexArrayOES(null):_r!=null&&typeof _r.teardown=="function"&&_r.teardown(),this.setCurrentBinding(j,null))},destroy:function(j,$){var _r=tT(j,"OES_vertex_array_object");_r!=null&&$!=null&&$._vao!=null&&(_r.deleteVertexArrayOES($._vao),$._vao=null)}},jI=function(){function j($,_r,_i,_s,ga,_l){F0(this,j),_l=_l||{},this.textureManager=Dx(ga),this.gl=$,this.vertex_data=_r,this.element_data=_i,this.vertex_layout=_s,this.vertex_buffer=this.gl.createBuffer(),this.buffer_size=this.vertex_data.byteLength,this.draw_mode=_l.draw_mode||this.gl.TRIANGLES,this.data_usage=_l.data_usage||this.gl.STATIC_DRAW,this.vertices_per_geometry=3,this.uniforms=_l.uniforms,this.textures=_l.textures,this.retain=_l.retain||!1,this.created_at=+new Date,this.fade_in_time=_l.fade_in_time||0,this.vertex_count=this.vertex_data.byteLength/this.vertex_layout.stride,this.element_count=0,this.vaos={},this.toggle_element_array=!1,this.element_data?(this.toggle_element_array=!0,this.element_count=this.element_data.length,this.geometry_count=this.element_count/this.vertices_per_geometry,this.element_type=this.element_data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT,this.element_buffer=this.gl.createBuffer(),this.buffer_size+=this.element_data.byteLength,this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.element_buffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.element_data,this.data_usage)):this.geometry_count=this.vertex_count/this.vertices_per_geometry,this.upload(),this.retain||(delete this.vertex_data,delete this.element_data),this.valid=!0}return H0(j,[{key:"render",value:function($){var _r=0<arguments.length&&$!==void 0?$:{};if(!this.valid)return!1;var _i=_r.program||M0.current;_i.use(),this.uniforms&&(_i.saveUniforms(this.uniforms),_i.setUniforms(this.uniforms,!1));var _s=(new Date-this.created_at)/1e3;return _i.uniform("1f","u_visible_time",_s),this.bind(_i),this.toggle_element_array?this.gl.drawElements(this.draw_mode,this.element_count,this.element_type,0):this.gl.drawArrays(this.draw_mode,0,this.vertex_count),sE.bind(this.gl,null),this.uniforms&&_i.restoreUniforms(this.uniforms),_s<this.fade_in_time}},{key:"bind",value:function($){var _r=this,_i=this.vaos[$.id];_i?sE.bind(this.gl,_i):this.vaos[$.id]=sE.create(this.gl,function(_s){_r.gl.bindBuffer(_r.gl.ARRAY_BUFFER,_r.vertex_buffer),_r.toggle_element_array&&_r.gl.bindBuffer(_r.gl.ELEMENT_ARRAY_BUFFER,_r.element_buffer),_r.vertex_layout.enable(_r.gl,$,_s)})}},{key:"upload",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertex_data,this.data_usage)}},{key:"destroy",value:function(){var $=this;if(!this.valid)return!1;for(var _r in this.valid=!1,this.vaos)sE.destroy(this.gl,this.vaos[_r]);return this.gl.deleteBuffer(this.vertex_buffer),this.vertex_buffer=null,this.element_buffer&&(this.gl.deleteBuffer(this.element_buffer),this.element_buffer=null),delete this.vertex_data,delete this.element_data,this.textures&&this.textures.forEach(function(_i){return $.textureManager.release(_i)}),!0}}]),j}(),gS=["emission","ambient","diffuse","specular"],qT=function(){function j($){var _r=this;F0(this,j),$=$||{},gS.forEach(function(_i){var _s=$[_i];_s!=null&&(_s.texture?_r[_i]={texture:_s.texture,mapping:_s.mapping||"spheremap",scale:P_.expandVec3(_s.scale!=null?_s.scale:1),amount:P_.expandVec4(_s.amount!=null?_s.amount:1)}:typeof _s=="number"||Array.isArray(_s)?_r[_i]={amount:P_.expandVec4(_s)}:_r[_i]=typeof _s=="string"?{amount:Gy.parseColor(_s)}:_s)}),this.specular&&(this.specular.shininess=$.shininess?parseFloat($.shininess):.2),$.normal!=null&&(this.normal={texture:$.normal.texture,mapping:$.normal.mapping||"triplanar",scale:P_.expandVec3($.normal.scale!=null?$.normal.scale:1),amount:$.normal.amount!=null?$.normal.amount:1})}return H0(j,[{key:"inject",value:function($){var _r=this;gS.forEach(function(_i){var _s="TANGRAM_MATERIAL_".concat(_i.toUpperCase()),ga=_s+"_TEXTURE";$.defines[_s]=_r[_i]!=null,_r[_i]&&_r[_i].texture&&($.defines[ga]=!0,$.defines[ga+"_"+_r[_i].mapping.toUpperCase()]=!0,$.defines["TANGRAM_MATERIAL_TEXTURE_".concat(_r[_i].mapping.toUpperCase())]=!0,$.texcoords=$.texcoords||_r[_i].mapping==="uv")}),this.normal&&this.normal.texture&&($.defines.TANGRAM_MATERIAL_NORMAL_TEXTURE=!0,$.defines["TANGRAM_MATERIAL_NORMAL_TEXTURE_"+this.normal.mapping.toUpperCase()]=!0,$.defines["TANGRAM_MATERIAL_TEXTURE_".concat(this.normal.mapping.toUpperCase())]=!0,$.texcoords=$.texcoords||this.normal.mapping==="uv"),$.replaceShaderBlock(j.block,`/*Defines globals:materiallight_accumulator_**/struct Material{
#ifdef TANGRAM_MATERIAL_EMISSION
vec4 emission;
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE
vec3 emissionScale;
#endif
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT
vec4 ambient;
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE
vec3 ambientScale;
#endif
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE
vec4 diffuse;
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE
vec3 diffuseScale;
#endif
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR
vec4 specular;float shininess;
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE
vec3 specularScale;
#endif
#endif
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE
vec3 normalScale;float normalAmount;
#endif
};uniform Material u_material;Material material;
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE
uniform sampler2D u_material_emission_texture;
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE
uniform sampler2D u_material_ambient_texture;
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE
uniform sampler2D u_material_diffuse_texture;
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE
uniform sampler2D u_material_specular_texture;
#endif
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE
uniform sampler2D u_material_normal_texture;
#endif
vec4 light_accumulator_ambient=vec4(vec3(0.0),1.);vec4 light_accumulator_diffuse=vec4(vec3(0.0),1.);
#ifdef TANGRAM_MATERIAL_SPECULAR
vec4 light_accumulator_specular=vec4(vec3(0.0),1.);
#endif
#ifdef TANGRAM_MATERIAL_TEXTURE_SPHEREMAP
vec4 getSphereMap(in sampler2D _tex,in vec3 _eyeToPoint,in vec3 _normal,in vec2 _skew){vec3 eye=normalize(_eyeToPoint);eye.xy-=_skew;eye=normalize(eye);vec3 r=reflect(eye,_normal);r.z+=1.0;float m=2.*length(r);vec2 uv=r.xy/m+.5;return texture2D(_tex,uv);}
#endif
#ifdef TANGRAM_MATERIAL_TEXTURE_TRIPLANAR
vec3 getTriPlanarBlend(in vec3 _normal){vec3 blending=abs(_normal);blending=normalize(max(blending,0.00001));float b=(blending.x+blending.y+blending.z);return blending/b;}vec4 getTriPlanar(in sampler2D _tex,in vec3 _pos,in vec3 _normal,in vec3 _scale){vec3 blending=getTriPlanarBlend(_normal);vec4 xaxis=texture2D(_tex,fract(_pos.yz*_scale.x));vec4 yaxis=texture2D(_tex,fract(_pos.xz*_scale.y));vec4 zaxis=texture2D(_tex,fract(_pos.xy*_scale.z));return xaxis*blending.x+yaxis*blending.y+zaxis*blending.z;}
#endif
#ifdef TANGRAM_MATERIAL_TEXTURE_PLANAR
vec4 getPlanar(in sampler2D _tex,in vec3 _pos,in vec2 _scale){return texture2D(_tex,fract(_pos.xy*_scale.x));}
#endif
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE
void calculateNormal(inout vec3 _normal){
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_UV
_normal+=texture2D(u_material_normal_texture,fract(v_texcoord*material.normalScale.xy)).rgb*2.0-1.0;
#endif
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_PLANAR
vec3 normalTex=getPlanar(u_material_normal_texture,v_world_position.xyz,material.normalScale.xy).rgb*2.0-1.0;_normal+=normalTex;
#endif
#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_TRIPLANAR
vec3 normalTex=getTriPlanar(u_material_normal_texture,v_world_position.xyz,_normal,material.normalScale).rgb*2.0-1.0;_normal+=normalTex;
#endif
_normal=normalize(_normal);}
#endif
void calculateMaterial(in vec3 _eyeToPoint,inout vec3 _normal){
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_UV
material.emission*=texture2D(u_material_emission_texture,v_texcoord);
#endif
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_PLANAR
material.emission*=getPlanar(u_material_emission_texture,v_world_position.xyz,material.emissionScale.xy);
#endif
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_TRIPLANAR
material.emission*=getTriPlanar(u_material_emission_texture,v_world_position.xyz,_normal,material.emissionScale);
#endif
#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_SPHEREMAP
material.emission*=getSphereMap(u_material_emission_texture,_eyeToPoint,_normal,u_center_offset);
#endif
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_UV
material.ambient*=texture2D(u_material_ambient_texture,v_texcoord);
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_PLANAR
material.ambient*=getPlanar(u_material_ambient_texture,v_world_position.xyz,material.ambientScale.xy);
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_TRIPLANAR
material.ambient*=getTriPlanar(u_material_ambient_texture,v_world_position.xyz,_normal,material.ambientScale);
#endif
#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_SPHEREMAP
material.ambient*=getSphereMap(u_material_ambient_texture,_eyeToPoint,_normal,u_center_offset);
#endif
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_UV
material.diffuse*=texture2D(u_material_diffuse_texture,v_texcoord);
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_PLANAR
material.diffuse*=getPlanar(u_material_diffuse_texture,v_world_position.xyz,material.diffuseScale.xy);
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_TRIPLANAR
material.diffuse*=getTriPlanar(u_material_diffuse_texture,v_world_position.xyz,_normal,material.diffuseScale);
#endif
#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_SPHEREMAP
material.diffuse*=getSphereMap(u_material_diffuse_texture,_eyeToPoint,_normal,u_center_offset);
#endif
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_UV
material.specular*=texture2D(u_material_specular_texture,v_texcoord);
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_PLANAR
material.specular*=getPlanar(u_material_specular_texture,v_world_position.xyz,material.specularScale.xy);
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_TRIPLANAR
material.specular*=getTriPlanar(u_material_specular_texture,v_world_position.xyz,_normal,material.specularScale);
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_SPHEREMAP
material.specular*=getSphereMap(u_material_specular_texture,_eyeToPoint,_normal,u_center_offset);
#endif
#endif
}`,"Material"),$.addShaderBlock("setup",`
material = u_material;
`,"Material")}},{key:"setupProgram",value:function($){var _r=this;gS.forEach(function(_i){_r[_i]&&(_r[_i].texture?($.setTextureUniform("u_material_".concat(_i,"_texture"),_r[_i].texture),$.uniform("3fv","u_material.".concat(_i,"Scale"),_r[_i].scale),$.uniform("4fv","u_material.".concat(_i),_r[_i].amount)):_r[_i].amount&&$.uniform("4fv","u_material.".concat(_i),_r[_i].amount))}),this.specular&&$.uniform("1f","u_material.shininess",this.specular.shininess),this.normal&&this.normal.texture&&($.setTextureUniform("u_material_normal_texture",this.normal.texture),$.uniform("3fv","u_material.normalScale",this.normal.scale),$.uniform("1f","u_material.normalAmount",this.normal.amount))}}],[{key:"isValid",value:function($){return $!=null&&($.emission!=null||$.ambient!=null||$.diffuse!=null||$.specular!=null)}}]),j}();qT.block="material";var x0=P1={};P1.copy=function(j){for(var $=[],_r=j.length,_i=0;_i<_r;_i++)$[_i]=j[_i];return $},P1.neg=function(j){for(var $=[],_r=j.length,_i=0;_i<_r;_i++)$[_i]=-j[_i];return $},P1.add=function(j,$){for(var _r=[],_i=Math.min(j.length,$.length),_s=0;_s<_i;_s++)_r[_s]=j[_s]+$[_s];return _r},P1.sub=function(j,$){for(var _r=[],_i=Math.min(j.length,$.length),_s=0;_s<_i;_s++)_r[_s]=j[_s]-$[_s];return _r},P1.signed_area=function(j,$,_r){return($[0]-j[0])*(_r[1]-j[1])-(_r[0]-j[0])*($[1]-j[1])},P1.mult=function(j,$){var _r,_i=[],_s=j.length;if(typeof $=="number")for(_r=0;_r<_s;_r++)_i[_r]=j[_r]*$;else for(_s=Math.min(j.length,$.length),_r=0;_r<_s;_r++)_i[_r]=j[_r]*$[_r];return _i},P1.multMatrix=function(j,$){return[j[0][0]*$[0]+j[0][1]*$[1],j[1][0]*$[0]+j[1][1]*$[1]]},P1.div=function(j,$){var _r=[];if(typeof $=="number")for(_s=0;_s<j.length;_s++)_r[_s]=j[_s]/$;else for(var _i=Math.min(j.length,$.length),_s=0;_s<_i;_s++)_r[_s]=j[_s]/$[_s];return _r},P1.perp=function(j,$){return[$[1]-j[1],j[0]-$[0]]},P1.rot=function(j,$){var _r=Math.cos($),_i=Math.sin($);return[j[0]*_r-j[1]*_i,j[0]*_i+j[1]*_r]},P1.angle=function(j){var $=C0(j,2),_r=$[0],_i=$[1];return Math.atan2(_i,_r)},P1.angleBetween=function(j,$){var _r=P1.dot(P1.normalize(P1.copy(j)),P1.normalize(P1.copy($)));return 1<_r&&(_r=1),Math.acos(_r)},P1.signedAngleBetween=function(j,$){return Math.atan2(j[0]*$[1]-j[1]*$[0],j[0]*$[0]+j[1]*$[1])},P1.isEqual=function(j,$){for(var _r=j.length,_i=0;_i<_r;_i++)if(j[_i]!==$[_i])return!1;return!0},P1.lengthSq=function(j){return j.length===2?j[0]*j[0]+j[1]*j[1]:3<=j.length?j[0]*j[0]+j[1]*j[1]+j[2]*j[2]:0},P1.length=function(j){return Math.sqrt(P1.lengthSq(j))},P1.normalize=function(j){var $;if(j.length===2){if(($=j[0]*j[0]+j[1]*j[1])===1)return j;($=Math.sqrt($))!==0?(j[0]/=$,j[1]/=$):(j[0]=0,j[1]=0)}else if(3<=j.length){if(($=j[0]*j[0]+j[1]*j[1]+j[2]*j[2])===1)return j;($=Math.sqrt($))!==0?(j[0]/=$,j[1]/=$,j[2]/=$):(j[0]=0,j[1]=0,j[2]=0)}return j},P1.cross=function(j,$){return j.length===2?j[0]*$[1]-j[1]*$[0]:j.length===3?[j[1]*$[2]-j[2]*$[1],j[2]*$[0]-j[0]*$[2],j[0]*$[1]-j[1]*$[0]]:void 0},P1.dot=function(j,$){for(var _r=0,_i=Math.min(j.length,$.length),_s=0;_s<_i;_s++)_r+=j[_s]*$[_s];return _r};var l_=function(){function j($,_r){F0(this,j),this.name=_r.name,this.view=$,_r.ambient==null||typeof _r.ambient=="number"?this.ambient=P_.expandVec3(_r.ambient||0):this.ambient=Gy.parseColor(_r.ambient).slice(0,3),_r.diffuse==null||typeof _r.diffuse=="number"?this.diffuse=P_.expandVec3(_r.diffuse!=null?_r.diffuse:1):this.diffuse=Gy.parseColor(_r.diffuse).slice(0,3),_r.specular==null||typeof _r.specular=="number"?this.specular=P_.expandVec3(_r.specular||0):this.specular=Gy.parseColor(_r.specular).slice(0,3)}return H0(j,[{key:"inject",value:function(){var $=`
            uniform `.concat(this.struct_name," u_").concat(this.name,`;
            `).concat(this.struct_name," ").concat(this.name,`;
            `),_r=`
            `.concat(this.name," = u_").concat(this.name,`;

        `);M0.addBlock(j.block,$),M0.addBlock("setup",_r)}},{key:"update",value:function(){}},{key:"setupProgram",value:function($){$.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient),$.uniform("3fv","u_".concat(this.name,".diffuse"),this.diffuse),$.uniform("3fv","u_".concat(this.name,".specular"),this.specular)}}],[{key:"create",value:function($,_r){if(j.types[_r.type])return new j.types[_r.type]($,_r)}},{key:"setMode",value:function($,_r){$===!0&&($="fragment"),$=j.enabled&&($??"fragment"),_r.defines.TANGRAM_LIGHTING_FRAGMENT=$==="fragment",_r.defines.TANGRAM_LIGHTING_VERTEX=$==="vertex"}},{key:"inject",value:function($){if(M0.removeBlock(j.block),j.enabled){var _r="";if($&&0<Object.keys($).length){var _i={};for(var _s in $)_i[$[_s].type]=!0;for(var ga in _i)j.types[ga].inject();for(var _l in $)$[_l].inject(),_r+="calculateLight(".concat(_l,`, _eyeToPoint, _normal);
`)}var _c=`
            vec4 calculateLighting(in vec3 _eyeToPoint, in vec3 _normal, in vec4 _color) {

                // Do initial material calculations over normal, emission, ambient, diffuse and specular values
                calculateMaterial(_eyeToPoint,_normal);

                // Un roll the loop of individual ligths to calculate
                `.concat(_r,`

                //  Final light intensity calculation
                vec4 color = vec4(vec3(0.), _color.a); // start with vertex color alpha

                #ifdef TANGRAM_MATERIAL_EMISSION
                    color.rgb = material.emission.rgb;
                    color.a *= material.emission.a;
                #endif

                #ifdef TANGRAM_MATERIAL_AMBIENT
                    color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.ambient.rgb;
                    color.a *= material.ambient.a;
                #else
                    #ifdef TANGRAM_MATERIAL_DIFFUSE
                        color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.diffuse.rgb;
                    #endif
                #endif

                #ifdef TANGRAM_MATERIAL_DIFFUSE
                    color.rgb += light_accumulator_diffuse.rgb * _color.rgb * material.diffuse.rgb;
                    color.a *= material.diffuse.a;
                #endif

                #ifdef TANGRAM_MATERIAL_SPECULAR
                    color.rgb += light_accumulator_specular.rgb * material.specular.rgb;
                    color.a *= material.specular.a;
                #endif

                // Clamp final color
                color = clamp(color, 0.0, 1.0);

                return color;
            }`);M0.addBlock(j.block,_c)}}}]),j}();l_.types={},l_.block="lighting",l_.enabled=!0;var DI=function(){Z1($,l_);var j=J1($);function $(_r,_i){var _s;return F0(this,$),(_s=j.call(this,_r,_i)).type="ambient",_s.struct_name="AmbientLight",_s}return H0($,[{key:"setupProgram",value:function(_r){_r.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient)}}],[{key:"inject",value:function(){M0.addBlock(l_.block,"/*Expected globals:light_accumulator_**/struct AmbientLight{vec3 ambient;};void calculateLight(in AmbientLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;}")}}]),$}();l_.types.ambient=DI;var zI=function(){Z1($,l_);var j=J1($);function $(_r,_i){var _s,ga;return F0(this,$),(_s=j.call(this,_r,_i)).type="directional",_s.struct_name="DirectionalLight",_i.direction?_s._direction=_i.direction:(ga=Math.sin(60*Math.PI/180),_s._direction=[Math.cos(135*Math.PI/180)*ga,Math.sin(135*Math.PI/180)*ga,-.5]),_i.ambient==null&&(_s.ambient=P_.expandVec3(.5)),_s.direction=_s._direction.map(parseFloat),_s._initial_direction=[_s.direction[0],_s.direction[1],_s.direction[2]],_s}return H0($,[{key:"update",value:function(){Qx.transformMat4(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"setupProgram",value:function(_r){sx(w_($.prototype),"setupProgram",this).call(this,_r),_r.uniform("3fv","u_".concat(this.name,".direction"),this.direction)}},{key:"direction",get:function(){return this._direction},set:function(_r){this._direction=x0.normalize(x0.copy(_r))}}],[{key:"inject",value:function(){M0.addBlock(l_.block,`/*Expected globals:materiallight_accumulator_**/struct DirectionalLight{vec3 ambient;vec3 diffuse;vec3 specular;vec3 direction;};void calculateLight(in DirectionalLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;float nDotVP=clamp(dot(_normal,-_light.direction),0.0,1.0);
#ifdef TANGRAM_MATERIAL_DIFFUSE
light_accumulator_diffuse.rgb+=_light.diffuse*nDotVP;
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR
float pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(_light.direction,_normal);float eyeDotR=max(dot(normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf;
#endif
}`)}}]),$}();l_.types.directional=zI;var c4=function(){Z1($,l_);var j=J1($);function $(_r,_i){var _s;return F0(this,$),(_s=j.call(this,_r,_i)).type="point",_s.struct_name="PointLight",_s.position=_i.position||[0,0,"100px"],_s.position_eye=[],_s.origin=_i.origin||"ground",_s.attenuation=isNaN(parseFloat(_i.attenuation))?0:parseFloat(_i.attenuation),_i.radius?Array.isArray(_i.radius)&&_i.radius.length===2?_s.radius=_i.radius:_s.radius=[null,_i.radius]:_s.radius=null,_s}return H0($,[{key:"inject",value:function(){sx(w_($.prototype),"inject",this).call(this),M0.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT=this.attenuation!==0,M0.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS=this.radius!=null&&this.radius[0]!=null,M0.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS=this.radius!=null}},{key:"update",value:function(){var _r,_i,_s,ga=this.view.lookAtManipulator.getLookAtData().zoom;this.origin==="world"?(_i=(_r=C0(Zy.latLngToMeters(this.position),2))[0],_s=_r[1],this.position_eye[0]=_i-this.view.lookAtManipulator.getLookAtData().position[0],this.position_eye[1]=_s-this.view.lookAtManipulator.getLookAtData().position[1],this.position_eye[2]=Gy.convertUnits(this.position[2],{zoom:ga,meters_per_pixel:Zy.metersPerPixel(ga)}),this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance):this.origin!=="ground"&&this.origin!=="camera"||(this.position_eye=Gy.convertUnits(this.position,{zoom:ga,meters_per_pixel:Zy.metersPerPixel(ga)}),this.origin==="ground"&&(this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance)),this.position_eye[3]=1}},{key:"setupProgram",value:function(_r){sx(w_($.prototype),"setupProgram",this).call(this,_r),_r.uniform("4fv","u_".concat(this.name,".position"),this.position_eye),M0.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT&&_r.uniform("1f","u_".concat(this.name,".attenuationExponent"),this.attenuation);var _i=this.view.lookAtManipulator.getLookAtData().zoom;M0.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS&&_r.uniform("1f","u_".concat(this.name,".innerRadius"),Gy.convertUnits(this.radius[0],{zoom:_i,meters_per_pixel:Zy.metersPerPixel(_i)})),M0.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS&&_r.uniform("1f","u_".concat(this.name,".outerRadius"),Gy.convertUnits(this.radius[1],{zoom:_i,meters_per_pixel:Zy.metersPerPixel(_i)}))}}],[{key:"inject",value:function(){M0.addBlock(l_.block,`/*Expected globals:materiallight_accumulator_**/struct PointLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT
float attenuationExponent;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
float innerRadius;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float outerRadius;
#endif
};void calculateLight(in PointLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(VP,_normal),0.0,1.0);float attenuation=1.0;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT
float Rin=1.0;float e=_light.attenuationExponent;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
Rin=_light.innerRadius;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));
#else
float d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);
#endif
#else
float Rin=0.0;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
Rin=_light.innerRadius;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;
#else
float d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);
#endif
#else
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;
#else
attenuation=1.0;
#endif
#endif
#endif
light_accumulator_ambient.rgb+=_light.ambient*attenuation;
#ifdef TANGRAM_MATERIAL_DIFFUSE
light_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation;
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR
float pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(0.0,dot(-normalize(_eyeToPoint),reflectVector));pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation;
#endif
}`)}}]),$}();l_.types.point=c4;var FI=function(){Z1($,c4);var j=J1($);function $(_r,_i){var _s;return F0(this,$),(_s=j.call(this,_r,_i)).type="spotlight",_s.struct_name="SpotLight",_s.direction=_s._direction=(_i.direction||[0,0,-1]).map(parseFloat),_s._initial_direction=[_s.direction[0],_s.direction[1],_s.direction[2]],_s.exponent=_i.exponent?parseFloat(_i.exponent):.2,_s.angle=_i.angle?parseFloat(_i.angle):20,_s}return H0($,[{key:"setupProgram",value:function(_r){sx(w_($.prototype),"setupProgram",this).call(this,_r),_r.uniform("3fv","u_".concat(this.name,".direction"),this.direction),_r.uniform("1f","u_".concat(this.name,".spotCosCutoff"),Math.cos(3.14159*this.angle/180)),_r.uniform("1f","u_".concat(this.name,".spotExponent"),this.exponent)}},{key:"update",value:function(){sx(w_($.prototype),"update",this).call(this),Qx.transformMat4(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"direction",get:function(){return this._direction},set:function(_r){this._direction=x0.normalize(x0.copy(_r))}}],[{key:"inject",value:function(){M0.addBlock(l_.block,`/*Expected globals:materiallight_accumulator_**/struct SpotLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT
float attenuationExponent;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
float innerRadius;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float outerRadius;
#endif
vec3 direction;float spotCosCutoff;float spotExponent;};void calculateLight(in SpotLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(_normal,VP),0.0,1.0);float attenuation=1.0;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT
float Rin=1.0;float e=_light.attenuationExponent;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
Rin=_light.innerRadius;
#endif
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));
#else
float d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);
#endif
#else
float Rin=0.0;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS
Rin=_light.innerRadius;
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;
#else
float d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);
#endif
#else
#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS
float d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;
#else
attenuation=1.0;
#endif
#endif
#endif
float spotAttenuation=0.0;float spotDot=clamp(dot(-VP,_light.direction),0.0,1.0);if(spotDot>=_light.spotCosCutoff){spotAttenuation=pow(spotDot,_light.spotExponent);}light_accumulator_ambient.rgb+=_light.ambient*attenuation*spotAttenuation;
#ifdef TANGRAM_MATERIAL_DIFFUSE
light_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation*spotAttenuation;
#endif
#ifdef TANGRAM_MATERIAL_SPECULAR
float pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(dot(-normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation*spotAttenuation;
#endif
}`)}}]),$}();function zx(j){for(var $=0;$<(arguments.length<=1?0:arguments.length-1);$++){var _r=$+1<1||arguments.length<=$+1?void 0:arguments[$+1];if(_r)for(var _i in _r){var _s=_r[_i];_s===null||x1(_s)!=="object"||Array.isArray(_s)?_s!==void 0&&(j[_i]=_s):j[_i]===null||x1(j[_i])!=="object"||Array.isArray(j[_i])?j[_i]=zx({},_s):j[_i]=zx(j[_i],_s)}}return j}l_.types.spotlight=FI;var h4=`#ifdef TANGRAM_FRAGMENT_SHADER
uniform sampler2D u_raster;uniform vec3 u_raster_offset;
#define sampleRaster() (texture2D(u_raster, v_modelpos_base_zoom.xy * u_raster_offset.z + u_raster_offset.xy))
#endif
`,N1={init:function(j){var $=0<arguments.length&&j!==void 0?j:{},_r=$.generation,_i=$.styles,_s=$.sources,ga=_s===void 0?{}:_s,_l=$.introspection,_c=$.id,_p=_c!==void 0?_c+"/":"";this.scene_id=_c,this.textureManager=Dx(_c),this.main_thread_target="".concat(_p,"Style/").concat(this.name),this.setGeneration(_r),this.styles=_i,this.sources=ga,this.defines=this.hasOwnProperty("defines")&&this.defines||{},this.shaders=this.hasOwnProperty("shaders")&&this.shaders||{},this.introspection=_l||!1,this.selection=this.selection||this.introspection||!1,this.compile_setup=!1,this.program=null,this.selection_program=null,this.feature_style={},this.vertex_template=[],this.tile_data={},this.defines.TANGRAM_WORLD_POSITION_WRAP=1e5,this.blend=this.blend||"opaque",this.defines["TANGRAM_BLEND_".concat(this.blend.toUpperCase())]=!0,this.blend_order==null&&(this.blend_order=-1),this.removeShaderBlock("setup"),this.material instanceof qT||(qT.isValid(this.material)||(this.material=Gy.defaults.material),this.material=new qT(this.material)),this.material.inject(this),l_.setMode(this.lighting,this),this.setupRasters(),this.initialized=!0},destroy:function(){this.program&&(this.program.destroy(),this.program=null),this.selection_program&&(this.selection_program.destroy(),this.selection_program=null),S0.removeTarget(this.main_thread_target),this.gl=null,this.initialized=!1},reset:function(){},baseStyle:function(){return this.base||this.name},setGeneration:function(j){this.generation=j,$1.is_main&&S0.addTarget(this.main_thread_target,this)},fillVertexTemplate:function(j,$,_r,_i){var _s=_i.size,ga=(ga=_i.offset)===void 0?0:ga,_l=j.index[$];if(_l!==void 0)for(var _c=0;_c<_s;++_c){var _p=_r.length>_c?_r[_c]:_r;this.vertex_template[_l+_c+ga]=_p}else o0("warn","Style: in style '".concat(this.name,"', no index found in vertex layout for attribute '").concat($,"'"))},startData:function(j){this.tile_data[j.id]=this.tile_data[j.id]||{meshes:{},uniforms:{},textures:[]}},endData:function(j){var $=this.tile_data[j.id];if(this.tile_data[j.id]=null,$&&0<Object.keys($.meshes).length){for(var _r in $.meshes){var _i=$.meshes[_r];_i.vertex_data.vertex_count!==0?(_i.vertex_data.end(),_i.vertex_elements=_i.vertex_data.element_buffer,_i.vertex_data=_i.vertex_data.vertex_buffer):delete $.meshes[_r]}return j.mesh_data[this.name]=$,this.buildRasterTextures(j,$).then(function(_s){return _s})}return Promise.resolve(null)},hasDataForTile:function(j){return this.tile_data[j.id]!=null},getTileMesh:function(j,$){var _r=this.tile_data[j.id].meshes;return _r[$.key]==null&&(_r[$.key]={variant:$,vertex_data:this.vertexLayoutForMeshVariant($).createVertexData()}),_r[$.key]},vertexLayoutForMeshVariant:function(){return this.vertex_layout},default_mesh_variant:{key:0},style_mesh_variants:{default:{variants:{0:{variant:{key:0},times_unref:0}}}},addMeshVariantForDraw:function(j,$){this.style_mesh_variants[j]||(this.style_mesh_variants[j]={variants:{}});var _r=this.computeVariantForDraw($);return this.style_mesh_variants[j].variants[_r.key]={variant:_r,times_unref:0},this.style_mesh_variants[j].variants[_r.key].variant},getMeshVariantTypeForDraw:function(j){return this.getMeshVariantType(this.base,j)},getMeshVariantType:function(j,$){j===void 0&&(j="default");var _r=this.style_mesh_variants[j];if($.variantKey===void 0||!_r||!_r.variants[$.variantKey])return this.addMeshVariantForDraw(j,$);var _i=$.variantKey,_s=_r.variants[_i];return _s.times_unref=0,_s.variant},updateMeshVariantTypeCache:function(j){for(var $ in this.style_mesh_variants){var _r=this.style_mesh_variants[$].variants;for(var _i in _r){var _s=_r[_i];_s.times_unref++,_s.times_unref>j&&($!=="default"||+_i!=0)&&(delete _r[_i],Object.keys(_r).length===0&&delete this.style_mesh_variants[$])}}},computeVariantForDraw:function(){return this.default_mesh_variant},addFeature:function(j,$,_r){var _i=_r.tile;this.tile_data[_i.id]||this.startData(_i);var _s,ga,_l,_c,_p=this.parseFeature(j,$,_r);_p&&(_s=this.base==="lines"?this.getMeshVariantTypeForDraw($):this.getMeshVariantTypeForDraw(_p),_l=(ga=this.getTileMesh(_i,_s)).vertex_data.offset,_c=ga.vertex_data.vertex_count,0<this.buildGeometry(j.geometry,_p,ga,_r)?j.generation=this.generation:ga.vertex_data.vertex_count>_c&&(ga.vertex_data.vertex_buffer.fill(0,_l,ga.vertex_data.offset),ga.vertex_data.vertex_count=_c,ga.vertex_data.offset=_l))},buildGeometry:function(j,$,_r,_i){var _s;return j.type==="Polygon"?_s=this.buildPolygons([j.coordinates],$,_r,_i):j.type==="MultiPolygon"?_s=this.buildPolygons(j.coordinates,$,_r,_i):j.type==="LineString"?_s=this.buildLines([j.coordinates],$,_r,_i):j.type==="MultiLineString"?_s=this.buildLines(j.coordinates,$,_r,_i):j.type==="Point"?_s=this.buildPoints([j.coordinates],$,_r,_i):j.type==="MultiPoint"&&(_s=this.buildPoints(j.coordinates,$,_r,_i)),_s},parseFeature:function(j,$,_r){try{var _i,_s,ga,_l=this.feature_style;if(_l.order=this.parseOrder($.order,_r),_l.order==null&&this.blend!=="overlay"){var _c="Layer '".concat($.layers.join(", "),"', draw group '").concat($.group,"': ");return _c+="'order' parameter is required unless blend mode is 'overlay'",$.order!=null&&(_c+="; 'order' was set to a dynamic value (e.g. string tied to feature property, ",_c+="or JS function), but evaluated to null for one or more features"),void o0({level:"warn",once:!0},_c)}return(_l=this._parseFeature(j,$,_r))?(this.selection?_l.interactive=Gy.evalProperty(this.introspection||$.interactive,_r):_l.interactive=!1,_l.interactive===!0?(_s=(_i=lx.makeEntry()).color,ga=_i.key,_l.selection_color=_s,_r.tile.selection_data||(_r.tile.selection_data={}),_r.tile.selection_data[ga]={id:j.id||ga,properties:j.properties,source_name:_r.source,source_layer:_r.layer,layers:_r.layers}):_l.selection_color=lx.defaultColor,_l):void 0}catch(_p){o0("error","Style.parseFeature: style parsing error",j,_l,_p.stack)}},_parseFeature:function(){return this.feature_style},preprocess:function(j,$){if(!j.preprocessed){if(this.draw)for(var _r in this.draw){var _i=this.draw[_r];x1(_i)!=="object"||Array.isArray(_i)?j[_r]==null&&(j[_r]=_i):j[_r]=zx({},_i,j[_r])}var _s=$||"";if(!(j=this._preprocess(j,_s)))return;j.preprocessed=!0}return j},_preprocess:function(j){return j},parseOrder:function(j,$){return typeof j!="number"?Gy.calculateOrder(j,$):j},scaleOrder:function(j){return 2*j},parseColor:function(j,$){return j?Gy.evalCachedColorProperty(j,$):this.shaders.blocks.color||this.shaders.blocks.filter?Gy.defaults.color:void 0},buildPolygons:function(){return 0},buildLines:function(){return 0},buildPoints:function(){return 0},setGL:function(j){this.gl=j,this.max_texture_size=this.textureManager.getMaxTextureSize(this.gl)},makeMesh:function(j,$,_r){var _i=2<arguments.length&&_r!==void 0?_r:{},_s=this.vertexLayoutForMeshVariant(_i.variant);return new jI(this.gl,j,$,_s,this.scene_id,_i)},render:function(j){return j.render()},getProgram:function(j){var $=0<arguments.length&&j!==void 0?j:"program";this.compileSetup();var _r=this[$];if(_r&&!_r.error){if(!_r.compiled)try{_r.compile()}catch(_i){o0("error","Style: error compiling program for style '".concat(this.name,"' (program key '").concat($,"')"),this,_i.stack)}return _r}},compileSetup:function(){if(!this.compile_setup){if(!this.gl)throw new Error("style.compile(): skipping for ".concat(this.name," because no GL context"));var j,$=this.buildDefineList();this.selection&&((j=Object.assign({},$)).TANGRAM_FEATURE_SELECTION=!0);var _r=this.shaders&&this.shaders.blocks,_i=this.shaders&&this.shaders.block_scopes,_s=Object.assign({},this.shaders&&this.shaders.uniforms);for(var ga in _s)_s[ga]==null&&o0({level:"warn",once:!0},"Style '".concat(this.name,"' has invalid uniform '").concat(ga,"': uniform values must be non-null"));var _l=this.shaders&&this.shaders.extensions;typeof _l=="string"&&(_l=[_l]),this.program=new M0(this.gl,this.vertex_shader_src,this.fragment_shader_src,this.scene_id,{name:this.name,defines:$,uniforms:_s,blocks:_r,block_scopes:_i,extensions:_l}),this.selection?this.selection_program=new M0(this.gl,this.vertex_shader_src,this.crop_by_tile?`
#pragma tangram: utils
#ifdef TANGRAM_FEATURE_SELECTION
uniform float u_meters_per_pixel;varying vec4 v_selection_color;varying vec4 v_local_space_position;
#endif
void main(void){
#ifdef TANGRAM_FEATURE_SELECTION
if(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}else{gl_FragColor=v_selection_color;}
#else
gl_FragColor=vec4(0.,0.,0.,1.);
#endif
}`:`
#ifdef TANGRAM_FEATURE_SELECTION
varying vec4 v_selection_color;
#endif
void main(void){
#ifdef TANGRAM_FEATURE_SELECTION
gl_FragColor=v_selection_color;
#else
gl_FragColor=vec4(0.,0.,0.,1.);
#endif
}`,this.scene_id,{name:this.name+" (selection)",defines:j,uniforms:_s,blocks:_r,block_scopes:_i,extensions:_l}):this.selection_program=null,this.compile_setup=!0}},addShaderBlock:function(j,$,_r){var _i=2<arguments.length&&_r!==void 0?_r:null;this.shaders.blocks=this.shaders.blocks||{},this.shaders.blocks[j]=this.shaders.blocks[j]||[],this.shaders.blocks[j].push($),this.shaders.block_scopes=this.shaders.block_scopes||{},this.shaders.block_scopes[j]=this.shaders.block_scopes[j]||[],this.shaders.block_scopes[j].push(_i)},removeShaderBlock:function(j){this.shaders.blocks&&(this.shaders.blocks[j]=null)},replaceShaderBlock:function(j,$,_r){var _i=2<arguments.length&&_r!==void 0?_r:null;this.removeShaderBlock(j),this.addShaderBlock(j,$,_i)},buildDefineList:function(){var j={};if(this.defines!=null)for(var $ in this.defines)j[$]=this.defines[$];if(this.shaders!=null&&this.shaders.defines!=null)for($ in this.shaders.defines)j[$]=this.shaders.defines[$];return j},hasRasters:function(){return-1<["color","normal","custom"].indexOf(this.raster)},setupRasters:function(){if(!$1.is_main||!this.hasRasters())return!1;this.raster==="color"?this.defines.TANGRAM_RASTER_TEXTURE_COLOR=!0:this.raster==="normal"&&(this.defines.TANGRAM_RASTER_TEXTURE_NORMAL=!0);var j=!1;for(var $ in this.sources)if(this.sources[$]instanceof $T){j=!0;break}return!!j&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",h4,"Raster"),!0)},buildRasterTextures:function(j,$){var _r=this;if(!this.hasRasters())return Promise.resolve($);var _i={};return j.rasters.map(function(_s){return _r.sources[_s]}).filter(function(_s){return _s}).forEach(function(_s,ga){var _l;_s instanceof $T&&(_l=_s.tileTexture(j),_i[_l.url]=_l)}),Object.keys(_i).length===0?Promise.resolve($):S0.postMessage(this.main_thread_target+".loadTextures",_i).then(function(_s){if(!_s||_s.length<1)return o0("trace","Missing texture info for tile ".concat(j.key)),null;if(_s.some(function(_f){return!_f.loaded}))return null;$.uniforms=$.uniforms||{},$.textures=$.textures||[];var ga,_l,_c=_s[0].name,_p=_i[_c].coords;return $.uniforms.u_raster=_c,$.textures.push(_c),j.coords.z>_p.z?(ga=j.coords.z-_p.z,_l=Math.pow(2,ga),$.uniforms.u_raster_offset=[(j.coords.x%_l+_l)%_l/_l,(_l-1-j.coords.y%_l)/_l,1/_l]):$.uniforms.u_raster_offset=[0,0,1],$})},loadTextures:function(j){var $=this;return this.textureManager.createFromObject(this.gl,j).then(function(){return Promise.all(Object.keys(j).map(function(_r){return $.textureManager.textures[_r]&&$.textureManager.textures[_r].load()}).filter(function(_r){return _r}))}).then(function(_r){return _r.forEach(function(_i){return _i.retain()}),_r.map(function(_i){return{name:_i.name,width:_i.width,height:_i.height,loaded:_i.loaded}})})},setup:function(){this.setUniforms(),this.material.setupProgram(M0.current)},setUniforms:function(){var j=M0.current;j&&j.setUniforms(this.shaders&&this.shaders.uniforms,!0)},render_states:{opaque:{depth_test:!0,depth_write:!0},translucent:{depth_test:!0,depth_write:!0},add:{depth_test:!0,depth_write:!1},multiply:{depth_test:!0,depth_write:!1},inlay:{depth_test:!0,depth_write:!1},overlay:{depth_test:!1,depth_write:!1}},default_blend_orders:{opaque:0,add:1,multiply:2,inlay:3,translucent:4,overlay:5},sortByBlendOrderWithinLayers:function(j){var $=[],_r={};for(var _i in j.forEach(function(_s){var ga=parseInt(_s.name,10)||0;_r[ga]||(_r[ga]=[]),_r[ga].push(_s)}),_r)$.push.apply($,u1(_r[_i].sort(N1.blendOrderSort)));return $},blendOrderSort:function(j,$){return j.blend==="opaque"||$.blend==="opaque"?j.blend==="opaque"&&$.blend==="opaque"?j.name<$.name?-1:1:j.blend==="opaque"?-1:1:j.blend_order<$.blend_order||!(j.blend_order>$.blend_order)&&(N1.default_blend_orders[j.blend]<N1.default_blend_orders[$.blend]||!(N1.default_blend_orders[j.blend]>N1.default_blend_orders[$.blend])&&j.name<$.name)?-1:1}},BI=0,UI=0,z1=function(){function j($){var _r=$.coords,_i=$.style_zoom,_s=$.source,ga=$.worker,_l=$.view,_c=$.sceneId;F0(this,j),this.textureManager=Dx(_c),this.id=BI++,this.worker=ga,this.view=_l,this.source=_s,this.generation=null,this.valid=!0,this.proxy_for=null,this.proxy_depth=0,this.proxied_as=null,this.fade_in=!0,this.loading=!1,this.loaded=!1,this.built=!1,this.labeled=!1,this.error=null,this.style_zoom=_i,this.coords=j.normalizedCoordinate(_r,this.source,this.style_zoom),this.key=j.key(this.coords,this.source,this.style_zoom),this.overzoom=Math.max(this.style_zoom-this.coords.z,0),this.overzoom2=Math.pow(2,this.overzoom),this.min=Zy.metersForTile(this.coords),this.max=Zy.metersForTile({x:this.coords.x+1,y:this.coords.y+1,z:this.coords.z}),this.span={x:this.max.x-this.min.x,y:this.max.y-this.min.y},this.bounds={sw:{x:this.min.x,y:this.max.y},ne:{x:this.max.x,y:this.min.y}},this.center_dist=0,this.meters_per_pixel=Zy.metersPerPixel(this.style_zoom),this.meters_per_pixel_sq=this.meters_per_pixel*this.meters_per_pixel,this.units_per_pixel=Zy.units_per_pixel/this.overzoom2,this.units_per_meter_overzoom=Zy.unitsPerMeter(this.coords.z)*this.overzoom2,this.meshes={},this.new_mesh_styles=[]}return H0(j,[{key:"freeResources",value:function(){for(var $ in this.meshes)this.meshes[$].forEach(function(_r){return _r.destroy()});this.meshes={}}},{key:"destroy",value:function(){H1.removeForTile(this.id),this.workerMessage("self.removeTile",this.id),this.freeResources(),this.worker=null,this.valid=!1}},{key:"buildAsMessage",value:function(){return{id:this.id,key:this.key,source:this.source.name,coords:this.coords,min:this.min,max:this.max,units_per_pixel:this.units_per_pixel,meters_per_pixel:this.meters_per_pixel,meters_per_pixel_sq:this.meters_per_pixel_sq,units_per_meter_overzoom:this.units_per_meter_overzoom,style_zoom:this.style_zoom,overzoom:this.overzoom,overzoom2:this.overzoom2,generation:this.generation}}},{key:"workerMessage",value:function(){for(var $=arguments.length,_r=new Array($),_i=0;_i<$;_i++)_r[_i]=arguments[_i];return S0.postMessage.apply(S0,[this.worker].concat(_r))}},{key:"build",value:function($,_r){var _i=(1<arguments.length&&_r!==void 0?_r:{}).fade_in,_s=_i===void 0||_i;return this.generation=$,this.fade_in=_s,this.loaded||(this.loading=!0,this.built=!1,this.labeled=!1),this.workerMessage("self.buildTile",{tile:this.buildAsMessage()})}},{key:"buildMeshes",value:function($,_r){if(!this.error){this.build_id=UI++;var _i={},_s=this.mesh_data;if(_s)for(var ga in _s){for(var _l in _s[ga].meshes){var _c=_s[ga].meshes[_l];if(_c.vertex_data){if(!$[ga]){o0("warn","Could not create mesh because style '".concat(ga,"' not found, for tile ").concat(this.key,", aborting tile"));break}var _p=Object.assign({},_s[ga]);_p.uniforms=Object.assign({},_p.uniforms,_c.uniforms),_p.variant=_c.variant,_c.textures&&(_p.textures=_c.textures),_c.labels&&(_p.retain=!0);var _f=$[ga].makeMesh(_c.vertex_data,_c.vertex_elements,_p);_f.variant=_p.variant,_f.labels=_c.labels,_i[ga]=_i[ga]||[],_i[ga].push(_f),_f.variant.order==null&&(_f.variant.order=_i[ga].length-1)}}_i[ga]&&_i[ga].sort(function(ly,uy){var cy=ly.variant.order,yy=uy.variant.order;return cy!=null&&(yy==null||cy<yy)?-1:1})}for(var ey in delete this.mesh_data,_i)this.meshes[ey]&&this.meshes[ey].forEach(function(ly){return ly.destroy()}),this.meshes[ey]=_i[ey],this.new_mesh_styles.push(ey);if(_r.done){for(var iy in this.meshes)this.new_mesh_styles.indexOf(iy)===-1&&(this.meshes[iy].forEach(function(ly){return ly.destroy()}),delete this.meshes[iy]);this.new_mesh_styles=[]}}}},{key:"setProxyFor",value:function($){$?(this.proxy_for=this.proxy_for||[],this.proxy_for.push($),this.proxy_depth=1,$.proxied_as=$.style_zoom>this.style_zoom?"child":"parent"):(this.proxy_for=null,this.proxy_depth=0)}},{key:"isProxy",value:function(){return this.proxy_for!=null}},{key:"shouldProxyForStyle",value:function($){return!this.proxy_for||this.proxy_for.some(function(_r){return _r.meshes[$]==null})}},{key:"setupProgram",value:function($,_r){var _i=$.model,_s=$.model32;_r.uniform("4fv","u_tile_origin",[this.min.x,this.min.y,this.style_zoom,this.coords.z]),_r.uniform("1f","u_tile_proxy_depth",this.proxy_depth),E_.identity(_i),E_.translate(_i,_i,Qx.fromValues(this.min.x,this.min.y,0)),E_.scale(_i,_i,Qx.fromValues(this.span.x/Zy.tile_scale,-1*this.span.y/Zy.tile_scale,1)),E_.copy(_s,_i),_r.uniform("Matrix4fv","u_model",_s),_r.uniform("1i","u_tile_fade_in",this.fade_in&&this.proxied_as!=="child")}},{key:"merge",value:function($){return this.loading=$.loading,this.loaded=$.loaded,this.generation=$.generation,this.error=$.error,this.mesh_data=$.mesh_data,this.selection_data?Object.assign(this.selection_data,$.selection_data):this.selection_data=$.selection_data,this}}],[{key:"coord",value:function($){return{x:$.x,y:$.y,z:$.z,key:j.coordKey($)}}},{key:"coordKey",value:function($){return $.x+"/"+$.y+"/"+$.z}},{key:"key",value:function($,_r,_i){if(!($.y<0||$.y>=1<<$.z||$.z<0))return[_r.name,_i,$.x,$.y,$.z].join("/")}},{key:"normalizedKey",value:function($,_r,_i){return j.key(j.normalizedCoordinate($,_r,_i),_r,_i)}},{key:"normalizedCoordinate",value:function($,_r){return _r.zoom_bias&&($=j.coordinateAtZoom($,Math.max(0,$.z-_r.zoom_bias))),j.coordinateWithMaxZoom($,_r.max_zoom)}},{key:"coordinateAtZoom",value:function($,_r){var _i,_s=$.x,ga=$.y,_l=$.z;return _l!==_r&&(_i=Math.pow(2,_l-_r),_s=Math.floor(_s/_i),ga=Math.floor(ga/_i),_l=_r),j.coord({x:_s,y:ga,z:_l})}},{key:"coordinateWithMaxZoom",value:function($,_r){var _i=$.x,_s=$.y,ga=$.z;return _r!==void 0&&_r<ga?j.coordinateAtZoom({x:_i,y:_s,z:ga},_r):j.coord({x:_i,y:_s,z:ga})}},{key:"childrenForCoordinate",value:function($){var _r=$.x,_i=$.y,_s=$.z,ga=$.key;return j.coord_children[ga]||(_s++,_r*=2,_i*=2,j.coord_children[ga]=[j.coord({x:_r,y:_i,z:_s}),j.coord({x:_r+1,y:_i,z:_s}),j.coord({x:_r,y:_i+1,z:_s}),j.coord({x:_r+1,y:_i+1,z:_s})]),j.coord_children[ga]}},{key:"isDescendant",value:function($,_r){if(_r.z>$.z){var _i=j.coordinateAtZoom(_r,$.z),_s=_i.x,ga=_i.y;return $.x===_s&&$.y===ga}return!1}},{key:"cancel",value:function($){$&&($.canceled=!0,$.source_data&&$.source_data.request_id&&(q0.cancelRequest($.source_data.request_id),$.source_data.request_id=null),j.abortBuild($))}},{key:"buildGeometry",value:function($,_r){var _i=_r.scene_id,_s=_r.layers,ga=_r.styles,_l=_r.global,_c=_r.sources,_p=_r.meshVariantMaxLife,_f=$.source_data;for(var ey in L_.startTile($.id,{apply_repeat_groups:!0}),_s){var iy=_s[ey];if(iy&&iy.config_data){if(iy.config_data.source===$.source)for(var ly=j._getDataForSource(_f,iy.config_data,ey),uy=0;uy<ly.length;uy++){var cy=ly[uy],yy=cy.geom;if(yy)for(var ay=0;ay<yy.features.length;ay++){var by=yy.features[ay];if(by.geometry!=null){var Ey=Gy.getFeatureParseContext(by,$,_l,_c);Ey.winding=$.default_winding,Ey.source=$.source,Ey.layer=cy.layer;var ky=iy.buildDrawGroups(Ey,!0);if(ky)for(var Oy in ky){var Ty=ky[Oy],Ly=Ty.style||Oy,Ny=ga[Ly];Ny?(Ty=Ny.preprocess(Ty,$.source))!=null&&Ty.visible!==!1&&(Ey.layers=Ty.layers,Ny.addFeature(by,Ty,Ey)):o0("warn","Style '".concat(Ly,"' not found, skipping layer '").concat(ey,"':"),Ty,by)}}}}}else o0("warn","Layer ".concat(ey," was defined without a geometry data source and will not be rendered."))}var Uy=j._stylesForTile($,ga);j._sendStyleGroups($,Uy,{scene_id:_i,meshVariantMaxLife:_p},function(Xy){return Xy.collision?"collision":"non-collision"})}},{key:"_stylesForTile",value:function($,_r){var _i=[];for(var _s in _r)_r[_s].hasDataForTile($)&&_i.push(_r[_s]);return _i}},{key:"_sendStyleGroups",value:function($,_r,_i,_s){var ga=_i.scene_id,_l=_i.meshVariantMaxLife,_c={};_r.forEach(function(_p){var _f=_s(_p);_c[_f]=_c[_f]||[],_c[_f].push(_p)}),0<Object.keys(_c).length?function(){var _p={start:!0};$.mesh_data={};for(var _f in _c)(function(ey){var iy=_c[ey];Promise.all(iy.map(function(ly){return ly.endData($)})).then(function(){o0("trace","Finished style group '".concat(ey,"' for tile ").concat($.key)),_c[ey]=[],Object.keys(_c).every(function(ly){return _c[ly].length===0})&&(_p.done=!0),S0.postMessage("TileManager_".concat(ga,".buildTileStylesCompleted"),S0.withTransferables({tile:j.slice($,["mesh_data","selection_data"]),progress:_p})),_p.start=null,$.mesh_data={},$.selection_data={},_p.done&&L_.resetTile($.id)},function(ly){o0("error","Error for style group '".concat(ey,"' for tile ").concat($.key),ly)})})(_f);N1.updateMeshVariantTypeCache(_l)}():(S0.postMessage("TileManager_".concat(ga,".buildTileStylesCompleted"),S0.withTransferables({tile:j.slice($),progress:{start:!0,done:!0}})),L_.resetTile($.id))}},{key:"_getDataForSource",value:function($,_r,_i){var _s=2<arguments.length&&_i!==void 0?_i:null,ga=[];return _r!=null&&$!=null&&$.layers!=null&&(!_r.layer&&$.layers._default||typeof _r.layer=="string"&&!$.layers[_r.layer]&&new RegExp("^\\d+_"+_r.layer+"$").test(_s)&&$.layers._default?ga.push({geom:$.layers._default}):!_r.layer&&_s?ga.push({layer:_s,geom:$.layers[_s]}):typeof _r.layer=="string"?ga.push({layer:_r.layer,geom:$.layers[_r.layer]}):Array.isArray(_r.layer)&&_r.layer.forEach(function(_l){$.layers[_l]&&$.layers[_l].features&&ga.push({layer:_l,geom:$.layers[_l]})})),ga}},{key:"abortBuild",value:function($,_r){if(H1.removeForTile($.id),L_.abortTile($.id),$.mesh_data)for(var _i in $.mesh_data){var _s=$.mesh_data[_i].textures;_s&&_s.forEach(function(ga){var _l=Dx(_r).textures[ga];_l&&(o0("trace","releasing texture ".concat(ga," for tile ").concat($.key)),_l.release())})}}},{key:"slice",value:function($,_r){var _i=["id","key","loading","loaded","generation","error","debug"];Array.isArray(_r)&&_i.push.apply(_i,u1(_r));for(var _s={},ga=0;ga<_i.length;ga++){var _l=_i[ga];_s[_l]=$[_l]}return _s}}]),j}();z1.coord_children={};var vS,$T=function(){Z1($,bI);var j=J1($);function $(_r,_i){var _s;return F0(this,$),(_s=j.call(this,_r,_i)).rasters.indexOf(_s.name)===-1&&_s.rasters.unshift(_s.name),_s.filtering=_r.filtering,_s.textures={},_s}return H0($,[{key:"load",value:function(_r){_r.source_data={},_r.source_data.layers={},_r.pad_scale=this.pad_scale,_r.rasters=u1(this.rasters);var _i=Zy.tile_scale;return _r.source_data.layers={_default:{type:"FeatureCollection",features:[{geometry:{type:"Polygon",coordinates:[[[0,0],[_i,0],[_i,-_i],[0,-_i],[0,0]]]},properties:{}}]}},_r.default_winding="CW",Promise.resolve(_r)}},{key:"tileTexture",value:function(_r){var _i,_s,ga=_r.coords.key;return this.textures[ga]||(_i=z1.coordinateWithMaxZoom(_r.coords,this.max_zoom),_s=this.formatUrl(this.url,{coords:_i}),this.textures[ga]={url:_s,filtering:this.filtering,coords:_i}),this.textures[ga]}}]),$}();g_.register($T,"Raster");var mS=vS={};function _S(j,$,_r,_i){for(var _s,ga=_i,_l=_r-$>>1,_c=_r-$,_p=j[$],_f=j[$+1],ey=j[_r],iy=j[_r+1],ly=$+3;ly<_r;ly+=3){var uy,cy=function(yy,ay,by,Ey,ky,Oy){var Ty=ky-by,Ly=Oy-Ey;{var Ny;Ty===0&&Ly===0||(1<(Ny=((yy-by)*Ty+(ay-Ey)*Ly)/(Ty*Ty+Ly*Ly))?(by=ky,Ey=Oy):0<Ny&&(by+=Ty*Ny,Ey+=Ly*Ny))}return(Ty=yy-by)*Ty+(Ly=ay-Ey)*Ly}(j[ly],j[ly+1],_p,_f,ey,iy);ga<cy?(_s=ly,ga=cy):cy!==ga||(uy=Math.abs(ly-_l))<_c&&(_s=ly,_c=uy)}_i<ga&&(3<_s-$&&_S(j,$,_s,_i),j[_s+2]=ga,3<_r-_s&&_S(j,_s,_r,_i))}function eT(j,$,_r,_i){var _s={id:j===void 0?null:j,type:$,geometry:_r,tags:_i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ga){var _l=ga.geometry,_c=ga.type;if(_c==="Point"||_c==="MultiPoint"||_c==="LineString")bS(ga,_l);else if(_c==="Polygon"||_c==="MultiLineString")for(var _p=0;_p<_l.length;_p++)bS(ga,_l[_p]);else if(_c==="MultiPolygon")for(_p=0;_p<_l.length;_p++)for(var _f=0;_f<_l[_p].length;_f++)bS(ga,_l[_p][_f])}(_s),_s}function bS(j,$){for(var _r=0;_r<$.length;_r+=3)j.minX=Math.min(j.minX,$[_r]),j.minY=Math.min(j.minY,$[_r+1]),j.maxX=Math.max(j.maxX,$[_r]),j.maxY=Math.max(j.maxY,$[_r+1])}function p4(j,$){var _r=[];if(j.type==="FeatureCollection")for(var _i=0;_i<j.features.length;_i++)WT(_r,j.features[_i],$,_i);else j.type==="Feature"?WT(_r,j,$):WT(_r,{geometry:j},$);return _r}function WT(j,$,_r,_i){if($.geometry){var _s=$.geometry.coordinates,ga=$.geometry.type,_l=Math.pow(_r.tolerance/((1<<_r.maxZoom)*_r.extent),2),_c=[],_p=$.id;if(_r.promoteId?_p=$.properties[_r.promoteId]:_r.generateId&&(_p=_i||0),ga==="Point")f4(_s,_c);else if(ga==="MultiPoint")for(var _f=0;_f<_s.length;_f++)f4(_s[_f],_c);else if(ga==="LineString")xS(_s,_c,_l,!1);else if(ga==="MultiLineString"){if(_r.lineMetrics){for(_f=0;_f<_s.length;_f++)_c=[],xS(_s[_f],_c,_l,!1),j.push(eT(_p,"LineString",_c,$.properties));return}wS(_s,_c,_l,!1)}else if(ga==="Polygon")wS(_s,_c,_l,!0);else{if(ga!=="MultiPolygon"){if(ga!=="GeometryCollection")throw new Error("Input data is not a valid GeoJSON object.");for(_f=0;_f<$.geometry.geometries.length;_f++)WT(j,{id:_p,geometry:$.geometry.geometries[_f],properties:$.properties},_r,_i);return}for(_f=0;_f<_s.length;_f++){var ey=[];wS(_s[_f],ey,_l,!0),_c.push(ey)}}j.push(eT(_p,ga,_c,$.properties))}}function f4(j,$){$.push(d4(j[0])),$.push(y4(j[1])),$.push(0)}function xS(j,$,_r,_i){for(var _s,ga,_l=0,_c=0;_c<j.length;_c++){var _p=d4(j[_c][0]),_f=y4(j[_c][1]);$.push(_p),$.push(_f),$.push(0),0<_c&&(_l+=_i?(_s*_f-_p*ga)/2:Math.sqrt(Math.pow(_p-_s,2)+Math.pow(_f-ga,2))),_s=_p,ga=_f}var ey=$.length-3;$[2]=1,_S($,0,ey,_r),$[2+ey]=1,$.size=Math.abs(_l),$.start=0,$.end=$.size}function wS(j,$,_r,_i){for(var _s=0;_s<j.length;_s++){var ga=[];xS(j[_s],ga,_r,_i),$.push(ga)}}function d4(j){return j/360+.5}function y4(j){var $=Math.sin(j*Math.PI/180),_r=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return _r<0?0:1<_r?1:_r}function ux(j,$,_r,_i,_s,ga,_l,_c){if(_i/=$,(_r/=$)<=ga&&_l<_i)return j;if(_l<_r||_i<=ga)return null;for(var _p=[],_f=0;_f<j.length;_f++){var ey=j[_f],iy=ey.geometry,ly=ey.type,uy=_s===0?ey.minX:ey.minY,cy=_s===0?ey.maxX:ey.maxY;if(_r<=uy&&cy<_i)_p.push(ey);else if(!(cy<_r||_i<=uy)){var yy=[];if(ly==="Point"||ly==="MultiPoint")(function(Ey,ky,Oy,Ty,Ly){for(var Ny=0;Ny<Ey.length;Ny+=3){var Uy=Ey[Ny+Ly];Oy<=Uy&&Uy<=Ty&&(ky.push(Ey[Ny]),ky.push(Ey[Ny+1]),ky.push(Ey[Ny+2]))}})(iy,yy,_r,_i,_s);else if(ly==="LineString")g4(iy,yy,_r,_i,_s,!1,_c.lineMetrics);else if(ly==="MultiLineString")ES(iy,yy,_r,_i,_s,!1);else if(ly==="Polygon")ES(iy,yy,_r,_i,_s,!0);else if(ly==="MultiPolygon")for(var ay=0;ay<iy.length;ay++){var by=[];ES(iy[ay],by,_r,_i,_s,!0),by.length&&yy.push(by)}if(yy.length){if(_c.lineMetrics&&ly==="LineString"){for(ay=0;ay<yy.length;ay++)_p.push(eT(ey.id,ly,yy[ay],ey.tags));continue}ly!=="LineString"&&ly!=="MultiLineString"||(yy.length===1?(ly="LineString",yy=yy[0]):ly="MultiLineString"),ly!=="Point"&&ly!=="MultiPoint"||(ly=yy.length===3?"Point":"MultiPoint"),_p.push(eT(ey.id,ly,yy,ey.tags))}}}return _p.length?_p:null}function g4(j,$,_r,_i,_s,ga,_l){for(var _c,_p,_f=v4(j),ey=_s===0?GI:VI,iy=j.start,ly=0;ly<j.length-3;ly+=3){var ky=j[ly],Oy=j[ly+1],Ty=j[ly+2],uy=j[ly+3],cy=j[ly+4],yy=_s===0?ky:Oy,ay=_s===0?uy:cy,by=!1;_l&&(_c=Math.sqrt(Math.pow(ky-uy,2)+Math.pow(Oy-cy,2))),yy<_r?_r<ay&&(_p=ey(_f,ky,Oy,uy,cy,_r),_l&&(_f.start=iy+_c*_p)):_i<yy?ay<_i&&(_p=ey(_f,ky,Oy,uy,cy,_i),_l&&(_f.start=iy+_c*_p)):kS(_f,ky,Oy,Ty),ay<_r&&_r<=yy&&(_p=ey(_f,ky,Oy,uy,cy,_r),by=!0),_i<ay&&yy<=_i&&(_p=ey(_f,ky,Oy,uy,cy,_i),by=!0),!ga&&by&&(_l&&(_f.end=iy+_c*_p),$.push(_f),_f=v4(j)),_l&&(iy+=_c)}var Ey=j.length-3,ky=j[Ey],Oy=j[Ey+1],Ty=j[Ey+2];_r<=(yy=_s===0?ky:Oy)&&yy<=_i&&kS(_f,ky,Oy,Ty),Ey=_f.length-3,ga&&3<=Ey&&(_f[Ey]!==_f[0]||_f[Ey+1]!==_f[1])&&kS(_f,_f[0],_f[1],_f[2]),_f.length&&$.push(_f)}function v4(j){var $=[];return $.size=j.size,$.start=j.start,$.end=j.end,$}function ES(j,$,_r,_i,_s,ga){for(var _l=0;_l<j.length;_l++)g4(j[_l],$,_r,_i,_s,ga,!1)}function kS(j,$,_r,_i){j.push($),j.push(_r),j.push(_i)}function GI(j,$,_r,_i,_s,ga){var _l=(ga-$)/(_i-$);return j.push(ga),j.push(_r+(_s-_r)*_l),j.push(1),_l}function VI(j,$,_r,_i,_s,ga){var _l=(ga-_r)/(_s-_r);return j.push($+(_i-$)*_l),j.push(ga),j.push(1),_l}function m4(j,$){var _r=$.buffer/$.extent,_i=j,_s=ux(j,1,-1-_r,_r,0,-1,2,$),ga=ux(j,1,1-_r,2+_r,0,-1,2,$);return(_s||ga)&&(_i=ux(j,1,-_r,1+_r,0,-1,2,$)||[],_s&&(_i=_4(_s,1).concat(_i)),ga&&(_i=_i.concat(_4(ga,-1)))),_i}function _4(j,$){for(var _r=[],_i=0;_i<j.length;_i++){var _s,ga=j[_i],_l=ga.type;if(_l==="Point"||_l==="MultiPoint"||_l==="LineString")_s=TS(ga.geometry,$);else if(_l==="MultiLineString"||_l==="Polygon"){_s=[];for(var _c=0;_c<ga.geometry.length;_c++)_s.push(TS(ga.geometry[_c],$))}else if(_l==="MultiPolygon")for(_s=[],_c=0;_c<ga.geometry.length;_c++){for(var _p=[],_f=0;_f<ga.geometry[_c].length;_f++)_p.push(TS(ga.geometry[_c][_f],$));_s.push(_p)}_r.push(eT(ga.id,_l,_s,ga.tags))}return _r}function TS(j,$){var _r=[];_r.size=j.size,j.start!==void 0&&(_r.start=j.start,_r.end=j.end);for(var _i=0;_i<j.length;_i+=3)_r.push(j[_i]+$,j[_i+1],j[_i+2]);return _r}function AS(j,$){if(j.transformed)return j;for(var _r,_i=1<<j.z,_s=j.x,ga=j.y,_l=0;_l<j.features.length;_l++){var _c=j.features[_l],_p=_c.geometry,_f=_c.type;if(_c.geometry=[],_f===1)for(_r=0;_r<_p.length;_r+=2)_c.geometry.push(b4(_p[_r],_p[_r+1],$,_i,_s,ga));else for(_r=0;_r<_p.length;_r++){for(var ey=[],iy=0;iy<_p[_r].length;iy+=2)ey.push(b4(_p[_r][iy],_p[_r][iy+1],$,_i,_s,ga));_c.geometry.push(ey)}}return j.transformed=!0,j}function b4(j,$,_r,_i,_s,ga){return[Math.round(_r*(j*_i-_s)),Math.round(_r*($*_i-ga))]}function x4(j,$,_r,_i,_s){for(var ga=$===_s.maxZoom?0:_s.tolerance/((1<<$)*_s.extent),_l={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:_r,y:_i,z:$,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},_c=0;_c<j.length;_c++){_l.numFeatures++,function(ly,uy,cy,yy){var ay=uy.geometry,by=uy.type,Ey=[];if(by==="Point"||by==="MultiPoint")for(var ky=0;ky<ay.length;ky+=3)Ey.push(ay[ky]),Ey.push(ay[ky+1]),ly.numPoints++,ly.numSimplified++;else if(by==="LineString")SS(Ey,ay,ly,cy,!1,!1);else if(by==="MultiLineString"||by==="Polygon")for(ky=0;ky<ay.length;ky++)SS(Ey,ay[ky],ly,cy,by==="Polygon",ky===0);else if(by==="MultiPolygon")for(var Oy=0;Oy<ay.length;Oy++){var Ty=ay[Oy];for(ky=0;ky<Ty.length;ky++)SS(Ey,Ty[ky],ly,cy,!0,ky===0)}if(Ey.length){var Ly=uy.tags||null;if(by==="LineString"&&yy.lineMetrics){for(var Ny in Ly={},uy.tags)Ly[Ny]=uy.tags[Ny];Ly.mapbox_clip_start=ay.start/ay.size,Ly.mapbox_clip_end=ay.end/ay.size}var Uy={geometry:Ey,type:by==="Polygon"||by==="MultiPolygon"?3:by==="LineString"||by==="MultiLineString"?2:1,tags:Ly};uy.id!==null&&(Uy.id=uy.id),ly.features.push(Uy)}}(_l,j[_c],ga,_s);var _p=j[_c].minX,_f=j[_c].minY,ey=j[_c].maxX,iy=j[_c].maxY;_p<_l.minX&&(_l.minX=_p),_f<_l.minY&&(_l.minY=_f),ey>_l.maxX&&(_l.maxX=ey),iy>_l.maxY&&(_l.maxY=iy)}return _l}function SS(j,$,_r,_i,_s,ga){var _l=_i*_i;if(0<_i&&$.size<(_s?_l:_i))_r.numPoints+=$.length/3;else{for(var _c=[],_p=0;_p<$.length;_p+=3)(_i===0||$[_p+2]>_l)&&(_r.numSimplified++,_c.push($[_p]),_c.push($[_p+1])),_r.numPoints++;_s&&function(_f,ey){for(var iy=0,ly=0,uy=_f.length,cy=uy-2;ly<uy;cy=ly,ly+=2)iy+=(_f[ly]-_f[cy])*(_f[ly+1]+_f[cy+1]);if(0<iy===ey)for(ly=0,uy=_f.length;ly<uy/2;ly+=2){var yy=_f[ly],ay=_f[ly+1];_f[ly]=_f[uy-2-ly],_f[ly+1]=_f[uy-1-ly],_f[uy-2-ly]=yy,_f[uy-1-ly]=ay}}(_c,ga),j.push(_c)}}var HI={maxZoom:14,tolerance:3,extent:4096,buffer:64,lineMetrics:!(vS.deepClone=function(j){return Array.isArray(j)?j.map(vS.deepClone):j}),promoteId:null,generateId:!1};function qI(j,$,_r,_i,_s){var ga=Object.assign({},HI,_s),_l=p4(j,ga),_c=function(yy){var ay,by=2,Ey=-1,ky=1,Oy=0,Ty=XE(yy);try{for(Ty.s();!(ay=Ty.n()).done;){var Ly=ay.value;Ly.minX<by&&(by=Ly.minX),Ly.maxX>Ey&&(Ey=Ly.maxX),Ly.minY<ky&&(ky=Ly.minY),Ly.maxY>Oy&&(Oy=Ly.maxY)}}catch(Ny){Ty.e(Ny)}finally{Ty.f()}return{minX:by,maxX:Ey,minY:ky,maxY:Oy}}(_l=m4(_l,ga)),_p=_c.minX,_f=_c.minY,ey=_c.maxX,iy=_c.maxY,ly=1<<$,uy=ga.buffer/ga.extent,cy=1+uy;return _l=ux(_l,ly,_r-uy,_r+cy,0,_p,ey,ga)||[],AS(x4(_l=ux(_l,ly,_i-uy,_i+cy,1,_f,iy,ga)||[],$,_r,_i,ga),ga.extent)}function w4(j,$){this.items=[],this.algorithm=j;var _r=($=$||{}).sort===void 0||$.sort;this.sort=_r}w4.prototype={addItem:function(j){this.items.push(j)},normalizeCoordinates:function(){var j=this.items,$=1/0,_r=1/0;j.forEach(function(_i){var _s=_i;$=Math.min($,_s.x),_r=Math.min(_r,_s.y)}),j.forEach(function(_i){var _s=_i;_s.x-=$,_s.y-=_r})},getStats:function(){var j=this.items.map(function(ga){return ga}),$=j.map(function(ga){return ga.x}),_r=j.map(function(ga){return ga.y}),_i=j.map(function(ga){return ga.x+ga.width}),_s=j.map(function(ga){return ga.y+ga.height});return{minX:Math.max.apply(Math,$),minY:Math.max.apply(Math,_r),maxX:Math.max.apply(Math,_i),maxY:Math.max.apply(Math,_s)}},getItems:function(){return this.items},processItems:function(){var j=this.items;return this.sort&&(j=this.algorithm.sort(j)),j=this.algorithm.placeItems(j),this.items=j},exportItems:function(){return this.processItems(),this.normalizeCoordinates(),this.items},export:function(){var j=this.exportItems(),$=this.getStats();return{height:$.maxY,width:$.maxX,items:j}}};var E4=w4,xx=[],K_=[],$I=typeof Uint8Array<"u"?Uint8Array:Array,CS=!1;function k4(){CS=!0;for(var j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$=0,_r=j.length;$<_r;++$)xx[$]=j[$],K_[j.charCodeAt($)]=$;K_[45]=62,K_[95]=63}function WI(j){var $,_r,_i,_s;CS||k4();var ga=j.length;if(0<ga%4)throw new Error("Invalid string. Length must be a multiple of 4");_i=j[ga-2]==="="?2:j[ga-1]==="="?1:0,_s=new $I(3*ga/4-_i),$=0<_i?ga-4:ga;for(var _l=0,_c=0;_c<$;_c+=4,0)_r=K_[j.charCodeAt(_c)]<<18|K_[j.charCodeAt(_c+1)]<<12|K_[j.charCodeAt(_c+2)]<<6|K_[j.charCodeAt(_c+3)],_s[_l++]=_r>>16&255,_s[_l++]=_r>>8&255,_s[_l++]=255&_r;return _i==2?(_r=K_[j.charCodeAt(_c)]<<2|K_[j.charCodeAt(_c+1)]>>4,_s[_l++]=255&_r):_i==1&&(_r=K_[j.charCodeAt(_c)]<<10|K_[j.charCodeAt(_c+1)]<<4|K_[j.charCodeAt(_c+2)]>>2,_s[_l++]=_r>>8&255,_s[_l++]=255&_r),_s}function YI(j,$,_r){for(var _i,_s,ga=[],_l=$;_l<_r;_l+=3)_i=(j[_l]<<16)+(j[_l+1]<<8)+j[_l+2],ga.push(xx[(_s=_i)>>18&63]+xx[_s>>12&63]+xx[_s>>6&63]+xx[63&_s]);return ga.join("")}function T4(j){var $;CS||k4();for(var _r=j.length,_i=_r%3,_s="",ga=[],_l=0,_c=_r-_i;_l<_c;_l+=16383)ga.push(YI(j,_l,_c<_l+16383?_c:_l+16383));return _i==1?($=j[_r-1],_s+=xx[$>>2],_s+=xx[$<<4&63],_s+="=="):_i==2&&($=(j[_r-2]<<8)+j[_r-1],_s+=xx[$>>10],_s+=xx[$>>4&63],_s+=xx[$<<2&63],_s+="="),ga.push(_s),ga.join("")}function YT(j,$,_r,_i,_s){var ga,_l,_c=8*_s-_i-1,_p=(1<<_c)-1,_f=_p>>1,ey=-7,iy=_r?_s-1:0,ly=_r?-1:1,uy=j[$+iy];for(iy+=ly,ga=uy&(1<<-ey)-1,uy>>=-ey,ey+=_c;0<ey;ga=256*ga+j[$+iy],iy+=ly,ey-=8);for(_l=ga&(1<<-ey)-1,ga>>=-ey,ey+=_i;0<ey;_l=256*_l+j[$+iy],iy+=ly,ey-=8);if(ga===0)ga=1-_f;else{if(ga===_p)return _l?NaN:1/0*(uy?-1:1);_l+=Math.pow(2,_i),ga-=_f}return(uy?-1:1)*_l*Math.pow(2,ga-_i)}function A4(j,$,_r,_i,_s,ga){var _l,_c,_p,_f=8*ga-_s-1,ey=(1<<_f)-1,iy=ey>>1,ly=_s===23?Math.pow(2,-24)-Math.pow(2,-77):0,uy=_i?0:ga-1,cy=_i?1:-1,yy=$<0||$===0&&1/$<0?1:0;for($=Math.abs($),isNaN($)||$===1/0?(_c=isNaN($)?1:0,_l=ey):(_l=Math.floor(Math.log($)/Math.LN2),$*(_p=Math.pow(2,-_l))<1&&(_l--,_p*=2),2<=($+=1<=_l+iy?ly/_p:ly*Math.pow(2,1-iy))*_p&&(_l++,_p/=2),ey<=_l+iy?(_c=0,_l=ey):1<=_l+iy?(_c=($*_p-1)*Math.pow(2,_s),_l+=iy):(_c=$*Math.pow(2,iy-1)*Math.pow(2,_s),_l=0));8<=_s;j[_r+uy]=255&_c,uy+=cy,_c/=256,_s-=8);for(_l=_l<<_s|_c,_f+=_s;0<_f;j[_r+uy]=255&_l,uy+=cy,_l/=256,_f-=8);j[_r+uy-cy]|=128*yy}var KI={}.toString,S4=Array.isArray||function(j){return KI.call(j)=="[object Array]"};u0.TYPED_ARRAY_SUPPORT=Nx.TYPED_ARRAY_SUPPORT===void 0||Nx.TYPED_ARRAY_SUPPORT;var XI=KT();function KT(){return u0.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Tw(j,$){if(KT()<$)throw new RangeError("Invalid typed array length");return u0.TYPED_ARRAY_SUPPORT?(j=new Uint8Array($)).__proto__=u0.prototype:(j===null&&(j=new u0($)),j.length=$),j}function u0(j,$,_r){if(!(u0.TYPED_ARRAY_SUPPORT||this instanceof u0))return new u0(j,$,_r);if(typeof j!="number")return C4(this,j,$,_r);if(typeof $=="string")throw new Error("If encoding is specified then the first argument must be a string");return IS(this,j)}function C4(j,$,_r,_i){if(typeof $=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&$ instanceof ArrayBuffer?function(_s,ga,_l,_c){if(ga.byteLength,_l<0||ga.byteLength<_l)throw new RangeError("'offset' is out of bounds");if(ga.byteLength<_l+(_c||0))throw new RangeError("'length' is out of bounds");return ga=_l===void 0&&_c===void 0?new Uint8Array(ga):_c===void 0?new Uint8Array(ga,_l):new Uint8Array(ga,_l,_c),u0.TYPED_ARRAY_SUPPORT?(_s=ga).__proto__=u0.prototype:_s=OS(_s,ga),_s}(j,$,_r,_i):typeof $=="string"?function(_s,ga,_l){if(typeof _l=="string"&&_l!==""||(_l="utf8"),!u0.isEncoding(_l))throw new TypeError('"encoding" must be a valid string encoding');var _c=0|I4(ga,_l),_p=(_s=Tw(_s,_c)).write(ga,_l);return _p!==_c&&(_s=_s.slice(0,_p)),_s}(j,$,_r):function(_s,ga){if(wx(ga)){var _l=0|RS(ga.length);return(_s=Tw(_s,_l)).length===0||ga.copy(_s,0,0,_l),_s}if(ga){if(typeof ArrayBuffer<"u"&&ga.buffer instanceof ArrayBuffer||"length"in ga)return typeof ga.length!="number"||function(_c){return _c!=_c}(ga.length)?Tw(_s,0):OS(_s,ga);if(ga.type==="Buffer"&&S4(ga.data))return OS(_s,ga.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(j,$)}function M4(j){if(typeof j!="number")throw new TypeError('"size" argument must be a number');if(j<0)throw new RangeError('"size" argument must not be negative')}function IS(j,$){if(M4($),j=Tw(j,$<0?0:0|RS($)),!u0.TYPED_ARRAY_SUPPORT)for(var _r=0;_r<$;++_r)j[_r]=0;return j}function OS(j,$){var _r=$.length<0?0:0|RS($.length);j=Tw(j,_r);for(var _i=0;_i<_r;_i+=1)j[_i]=255&$[_i];return j}function RS(j){if(j>=KT())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+KT().toString(16)+" bytes");return 0|j}function wx(j){return j!=null&&j._isBuffer}function I4(j,$){if(wx(j))return j.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(j)||j instanceof ArrayBuffer))return j.byteLength;typeof j!="string"&&(j=""+j);var _r=j.length;if(_r===0)return 0;for(var _i=!1;;)switch($){case"ascii":case"latin1":case"binary":return _r;case"utf8":case"utf-8":case void 0:return JT(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*_r;case"hex":return _r>>>1;case"base64":return F4(j).length;default:if(_i)return JT(j).length;$=(""+$).toLowerCase(),_i=!0}}function ZI(j,$,_r){var _i,_s,ga,_l=!1;if(($===void 0||$<0)&&($=0),$>this.length||((_r===void 0||_r>this.length)&&(_r=this.length),_r<=0)||(_r>>>=0)<=($>>>=0))return"";for(j=j||"utf8";;)switch(j){case"hex":return function(_c,_p,_f){var ey=_c.length;(!_p||_p<0)&&(_p=0),(!_f||_f<0||ey<_f)&&(_f=ey);for(var iy="",ly=_p;ly<_f;++ly)iy+=function(uy){return uy<16?"0"+uy.toString(16):uy.toString(16)}(_c[ly]);return iy}(this,$,_r);case"utf8":case"utf-8":return P4(this,$,_r);case"ascii":return function(_c,_p,_f){var ey="";_f=Math.min(_c.length,_f);for(var iy=_p;iy<_f;++iy)ey+=String.fromCharCode(127&_c[iy]);return ey}(this,$,_r);case"latin1":case"binary":return function(_c,_p,_f){var ey="";_f=Math.min(_c.length,_f);for(var iy=_p;iy<_f;++iy)ey+=String.fromCharCode(_c[iy]);return ey}(this,$,_r);case"base64":return _i=this,ga=_r,(_s=$)===0&&ga===_i.length?T4(_i):T4(_i.slice(_s,ga));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(_c,_p,_f){for(var ey=_c.slice(_p,_f),iy="",ly=0;ly<ey.length;ly+=2)iy+=String.fromCharCode(ey[ly]+256*ey[ly+1]);return iy}(this,$,_r);default:if(_l)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),_l=!0}}function v2(j,$,_r){var _i=j[$];j[$]=j[_r],j[_r]=_i}function O4(j,$,_r,_i,_s){if(j.length===0)return-1;if(typeof _r=="string"?(_i=_r,_r=0):2147483647<_r?_r=2147483647:_r<-2147483648&&(_r=-2147483648),_r=+_r,isNaN(_r)&&(_r=_s?0:j.length-1),_r<0&&(_r=j.length+_r),_r>=j.length){if(_s)return-1;_r=j.length-1}else if(_r<0){if(!_s)return-1;_r=0}if(typeof $=="string"&&($=u0.from($,_i)),wx($))return $.length===0?-1:R4(j,$,_r,_i,_s);if(typeof $=="number")return $&=255,u0.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?_s?Uint8Array.prototype.indexOf.call(j,$,_r):Uint8Array.prototype.lastIndexOf.call(j,$,_r):R4(j,[$],_r,_i,_s);throw new TypeError("val must be string, number or Buffer")}function R4(j,$,_r,_i,_s){var ga=1,_l=j.length,_c=$.length;if(_i!==void 0&&((_i=String(_i).toLowerCase())==="ucs2"||_i==="ucs-2"||_i==="utf16le"||_i==="utf-16le")){if(j.length<2||$.length<2)return-1;_l/=ga=2,_c/=2,_r/=2}function _p(uy,cy){return ga===1?uy[cy]:uy.readUInt16BE(cy*ga)}if(_s)for(var _f=-1,ey=_r;ey<_l;ey++)if(_p(j,ey)===_p($,_f===-1?0:ey-_f)){if(_f===-1&&(_f=ey),ey-_f+1===_c)return _f*ga}else _f!==-1&&(ey-=ey-_f),_f=-1;else for(_l<_r+_c&&(_r=_l-_c),ey=_r;0<=ey;ey--){for(var iy=!0,ly=0;ly<_c;ly++)if(_p(j,ey+ly)!==_p($,ly)){iy=!1;break}if(iy)return ey}return-1}function L4(j,$,_r,_i){return QT(function(_s){for(var ga=[],_l=0;_l<_s.length;++_l)ga.push(255&_s.charCodeAt(_l));return ga}($),j,_r,_i)}function JI(j,$,_r,_i){return QT(function(_s,ga){for(var _l,_c,_p,_f=[],ey=0;ey<_s.length&&!((ga-=2)<0);++ey)_l=_s.charCodeAt(ey),_c=_l>>8,_p=_l%256,_f.push(_p),_f.push(_c);return _f}($,j.length-_r),j,_r,_i)}function P4(j,$,_r){_r=Math.min(j.length,_r);for(var _i=[],_s=$;_s<_r;){var ga,_l,_c,_p,_f=j[_s],ey=null,iy=239<_f?4:223<_f?3:191<_f?2:1;if(_s+iy<=_r)switch(iy){case 1:_f<128&&(ey=_f);break;case 2:(192&(ga=j[_s+1]))==128&&127<(_p=(31&_f)<<6|63&ga)&&(ey=_p);break;case 3:ga=j[_s+1],_l=j[_s+2],(192&ga)==128&&(192&_l)==128&&2047<(_p=(15&_f)<<12|(63&ga)<<6|63&_l)&&(_p<55296||57343<_p)&&(ey=_p);break;case 4:ga=j[_s+1],_l=j[_s+2],_c=j[_s+3],(192&ga)==128&&(192&_l)==128&&(192&_c)==128&&65535<(_p=(15&_f)<<18|(63&ga)<<12|(63&_l)<<6|63&_c)&&_p<1114112&&(ey=_p)}ey===null?(ey=65533,iy=1):65535<ey&&(ey-=65536,_i.push(ey>>>10&1023|55296),ey=56320|1023&ey),_i.push(ey),_s+=iy}return function(ly){var uy=ly.length;if(uy<=N4)return String.fromCharCode.apply(String,ly);for(var cy="",yy=0;yy<uy;)cy+=String.fromCharCode.apply(String,ly.slice(yy,yy+=N4));return cy}(_i)}u0.poolSize=8192,u0._augment=function(j){return j.__proto__=u0.prototype,j},u0.from=function(j,$,_r){return C4(null,j,$,_r)},u0.TYPED_ARRAY_SUPPORT&&(u0.prototype.__proto__=Uint8Array.prototype,u0.__proto__=Uint8Array),u0.alloc=function(j,$,_r){return _i=null,ga=$,_l=_r,M4(_s=j),_s<=0||ga===void 0?Tw(_i,_s):typeof _l=="string"?Tw(_i,_s).fill(ga,_l):Tw(_i,_s).fill(ga);var _i,_s,ga,_l},u0.allocUnsafe=function(j){return IS(null,j)},u0.allocUnsafeSlow=function(j){return IS(null,j)},u0.isBuffer=m2,u0.compare=function(j,$){if(!wx(j)||!wx($))throw new TypeError("Arguments must be Buffers");if(j===$)return 0;for(var _r=j.length,_i=$.length,_s=0,ga=Math.min(_r,_i);_s<ga;++_s)if(j[_s]!==$[_s]){_r=j[_s],_i=$[_s];break}return _r<_i?-1:_i<_r?1:0},u0.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u0.concat=function(j,$){if(!S4(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return u0.alloc(0);if($===void 0)for(_s=$=0;_s<j.length;++_s)$+=j[_s].length;for(var _r=u0.allocUnsafe($),_i=0,_s=0;_s<j.length;++_s){var ga=j[_s];if(!wx(ga))throw new TypeError('"list" argument must be an Array of Buffers');ga.copy(_r,_i),_i+=ga.length}return _r},u0.byteLength=I4,u0.prototype._isBuffer=!0,u0.prototype.swap16=function(){var j=this.length;if(j%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var $=0;$<j;$+=2)v2(this,$,$+1);return this},u0.prototype.swap32=function(){var j=this.length;if(j%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var $=0;$<j;$+=4)v2(this,$,$+3),v2(this,$+1,$+2);return this},u0.prototype.swap64=function(){var j=this.length;if(j%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var $=0;$<j;$+=8)v2(this,$,$+7),v2(this,$+1,$+6),v2(this,$+2,$+5),v2(this,$+3,$+4);return this},u0.prototype.toString=function(){var j=0|this.length;return j==0?"":arguments.length===0?P4(this,0,j):ZI.apply(this,arguments)},u0.prototype.equals=function(j){if(!wx(j))throw new TypeError("Argument must be a Buffer");return this===j||u0.compare(this,j)===0},u0.prototype.inspect=function(){var j="";return 0<this.length&&(j=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(j+=" ... ")),"<Buffer "+j+">"},u0.prototype.compare=function(j,$,_r,_i,_s){if(!wx(j))throw new TypeError("Argument must be a Buffer");if($===void 0&&($=0),_r===void 0&&(_r=j?j.length:0),_i===void 0&&(_i=0),_s===void 0&&(_s=this.length),$<0||_r>j.length||_i<0||_s>this.length)throw new RangeError("out of range index");if(_s<=_i&&_r<=$)return 0;if(_s<=_i)return-1;if(_r<=$)return 1;if(this===j)return 0;for(var ga=(_s>>>=0)-(_i>>>=0),_l=(_r>>>=0)-($>>>=0),_c=Math.min(ga,_l),_p=this.slice(_i,_s),_f=j.slice($,_r),ey=0;ey<_c;++ey)if(_p[ey]!==_f[ey]){ga=_p[ey],_l=_f[ey];break}return ga<_l?-1:_l<ga?1:0},u0.prototype.includes=function(j,$,_r){return this.indexOf(j,$,_r)!==-1},u0.prototype.indexOf=function(j,$,_r){return O4(this,j,$,_r,!0)},u0.prototype.lastIndexOf=function(j,$,_r){return O4(this,j,$,_r,!1)},u0.prototype.write=function(j,$,_r,_i){if($===void 0)_i="utf8",_r=this.length,$=0;else if(_r===void 0&&typeof $=="string")_i=$,_r=this.length,$=0;else{if(!isFinite($))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");$|=0,isFinite(_r)?(_r|=0,_i===void 0&&(_i="utf8")):(_i=_r,_r=void 0)}var _s=this.length-$;if((_r===void 0||_s<_r)&&(_r=_s),0<j.length&&(_r<0||$<0)||$>this.length)throw new RangeError("Attempt to write outside buffer bounds");_i=_i||"utf8";for(var ga,_l,_c,_p,_f,ey,iy=!1;;)switch(_i){case"hex":return function(ly,uy,cy,yy){cy=Number(cy)||0;var ay=ly.length-cy;(!yy||ay<(yy=Number(yy)))&&(yy=ay);var by=uy.length;if(by%2!=0)throw new TypeError("Invalid hex string");by/2<yy&&(yy=by/2);for(var Ey=0;Ey<yy;++Ey){var ky=parseInt(uy.substr(2*Ey,2),16);if(isNaN(ky))return Ey;ly[cy+Ey]=ky}return Ey}(this,j,$,_r);case"utf8":case"utf-8":return _f=$,ey=_r,QT(JT(j,(_p=this).length-_f),_p,_f,ey);case"ascii":return L4(this,j,$,_r);case"latin1":case"binary":return L4(this,j,$,_r);case"base64":return ga=this,_l=$,_c=_r,QT(F4(j),ga,_l,_c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return JI(this,j,$,_r);default:if(iy)throw new TypeError("Unknown encoding: "+_i);_i=(""+_i).toLowerCase(),iy=!0}},u0.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N4=4096;function i_(j,$,_r){if(j%1!=0||j<0)throw new RangeError("offset is not uint");if(_r<j+$)throw new RangeError("Trying to access beyond buffer length")}function N_(j,$,_r,_i,_s,ga){if(!wx(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(_s<$||$<ga)throw new RangeError('"value" argument is out of bounds');if(_r+_i>j.length)throw new RangeError("Index out of range")}function XT(j,$,_r,_i){$<0&&($=65535+$+1);for(var _s=0,ga=Math.min(j.length-_r,2);_s<ga;++_s)j[_r+_s]=($&255<<8*(_i?_s:1-_s))>>>8*(_i?_s:1-_s)}function ZT(j,$,_r,_i){$<0&&($=4294967295+$+1);for(var _s=0,ga=Math.min(j.length-_r,4);_s<ga;++_s)j[_r+_s]=$>>>8*(_i?_s:3-_s)&255}function j4(j,$,_r,_i){if(_r+_i>j.length)throw new RangeError("Index out of range");if(_r<0)throw new RangeError("Index out of range")}function D4(j,$,_r,_i,_s){return _s||j4(j,0,_r,4),A4(j,$,_r,_i,23,4),_r+4}function z4(j,$,_r,_i,_s){return _s||j4(j,0,_r,8),A4(j,$,_r,_i,52,8),_r+8}u0.prototype.slice=function(j,$){var _r=this.length;if((j=~~j)<0?(j+=_r)<0&&(j=0):_r<j&&(j=_r),($=$===void 0?_r:~~$)<0?($+=_r)<0&&($=0):_r<$&&($=_r),$<j&&($=j),u0.TYPED_ARRAY_SUPPORT)(_s=this.subarray(j,$)).__proto__=u0.prototype;else for(var _i=$-j,_s=new u0(_i,void 0),ga=0;ga<_i;++ga)_s[ga]=this[ga+j];return _s},u0.prototype.readUIntLE=function(j,$,_r){j|=0,$|=0,_r||i_(j,$,this.length);for(var _i=this[j],_s=1,ga=0;++ga<$&&(_s*=256);)_i+=this[j+ga]*_s;return _i},u0.prototype.readUIntBE=function(j,$,_r){j|=0,$|=0,_r||i_(j,$,this.length);for(var _i=this[j+--$],_s=1;0<$&&(_s*=256);)_i+=this[j+--$]*_s;return _i},u0.prototype.readUInt8=function(j,$){return $||i_(j,1,this.length),this[j]},u0.prototype.readUInt16LE=function(j,$){return $||i_(j,2,this.length),this[j]|this[j+1]<<8},u0.prototype.readUInt16BE=function(j,$){return $||i_(j,2,this.length),this[j]<<8|this[j+1]},u0.prototype.readUInt32LE=function(j,$){return $||i_(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+16777216*this[j+3]},u0.prototype.readUInt32BE=function(j,$){return $||i_(j,4,this.length),16777216*this[j]+(this[j+1]<<16|this[j+2]<<8|this[j+3])},u0.prototype.readIntLE=function(j,$,_r){j|=0,$|=0,_r||i_(j,$,this.length);for(var _i=this[j],_s=1,ga=0;++ga<$&&(_s*=256);)_i+=this[j+ga]*_s;return(_s*=128)<=_i&&(_i-=Math.pow(2,8*$)),_i},u0.prototype.readIntBE=function(j,$,_r){j|=0,$|=0,_r||i_(j,$,this.length);for(var _i=$,_s=1,ga=this[j+--_i];0<_i&&(_s*=256);)ga+=this[j+--_i]*_s;return(_s*=128)<=ga&&(ga-=Math.pow(2,8*$)),ga},u0.prototype.readInt8=function(j,$){return $||i_(j,1,this.length),128&this[j]?-1*(255-this[j]+1):this[j]},u0.prototype.readInt16LE=function(j,$){$||i_(j,2,this.length);var _r=this[j]|this[j+1]<<8;return 32768&_r?4294901760|_r:_r},u0.prototype.readInt16BE=function(j,$){$||i_(j,2,this.length);var _r=this[j+1]|this[j]<<8;return 32768&_r?4294901760|_r:_r},u0.prototype.readInt32LE=function(j,$){return $||i_(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},u0.prototype.readInt32BE=function(j,$){return $||i_(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},u0.prototype.readFloatLE=function(j,$){return $||i_(j,4,this.length),YT(this,j,!0,23,4)},u0.prototype.readFloatBE=function(j,$){return $||i_(j,4,this.length),YT(this,j,!1,23,4)},u0.prototype.readDoubleLE=function(j,$){return $||i_(j,8,this.length),YT(this,j,!0,52,8)},u0.prototype.readDoubleBE=function(j,$){return $||i_(j,8,this.length),YT(this,j,!1,52,8)},u0.prototype.writeUIntLE=function(j,$,_r,_i){j=+j,$|=0,_r|=0,_i||N_(this,j,$,_r,Math.pow(2,8*_r)-1,0);var _s=1,ga=0;for(this[$]=255&j;++ga<_r&&(_s*=256);)this[$+ga]=j/_s&255;return $+_r},u0.prototype.writeUIntBE=function(j,$,_r,_i){j=+j,$|=0,_r|=0,_i||N_(this,j,$,_r,Math.pow(2,8*_r)-1,0);var _s=_r-1,ga=1;for(this[$+_s]=255&j;0<=--_s&&(ga*=256);)this[$+_s]=j/ga&255;return $+_r},u0.prototype.writeUInt8=function(j,$,_r){return j=+j,$|=0,_r||N_(this,j,$,1,255,0),u0.TYPED_ARRAY_SUPPORT||(j=Math.floor(j)),this[$]=255&j,$+1},u0.prototype.writeUInt16LE=function(j,$,_r){return j=+j,$|=0,_r||N_(this,j,$,2,65535,0),u0.TYPED_ARRAY_SUPPORT?(this[$]=255&j,this[$+1]=j>>>8):XT(this,j,$,!0),$+2},u0.prototype.writeUInt16BE=function(j,$,_r){return j=+j,$|=0,_r||N_(this,j,$,2,65535,0),u0.TYPED_ARRAY_SUPPORT?(this[$]=j>>>8,this[$+1]=255&j):XT(this,j,$,!1),$+2},u0.prototype.writeUInt32LE=function(j,$,_r){return j=+j,$|=0,_r||N_(this,j,$,4,4294967295,0),u0.TYPED_ARRAY_SUPPORT?(this[$+3]=j>>>24,this[$+2]=j>>>16,this[$+1]=j>>>8,this[$]=255&j):ZT(this,j,$,!0),$+4},u0.prototype.writeUInt32BE=function(j,$,_r){return j=+j,$|=0,_r||N_(this,j,$,4,4294967295,0),u0.TYPED_ARRAY_SUPPORT?(this[$]=j>>>24,this[$+1]=j>>>16,this[$+2]=j>>>8,this[$+3]=255&j):ZT(this,j,$,!1),$+4},u0.prototype.writeIntLE=function(j,$,_r,_i){var _s;j=+j,$|=0,_i||N_(this,j,$,_r,(_s=Math.pow(2,8*_r-1))-1,-_s);var ga=0,_l=1,_c=0;for(this[$]=255&j;++ga<_r&&(_l*=256);)j<0&&_c===0&&this[$+ga-1]!==0&&(_c=1),this[$+ga]=(j/_l>>0)-_c&255;return $+_r},u0.prototype.writeIntBE=function(j,$,_r,_i){var _s;j=+j,$|=0,_i||N_(this,j,$,_r,(_s=Math.pow(2,8*_r-1))-1,-_s);var ga=_r-1,_l=1,_c=0;for(this[$+ga]=255&j;0<=--ga&&(_l*=256);)j<0&&_c===0&&this[$+ga+1]!==0&&(_c=1),this[$+ga]=(j/_l>>0)-_c&255;return $+_r},u0.prototype.writeInt8=function(j,$,_r){return j=+j,$|=0,_r||N_(this,j,$,1,127,-128),u0.TYPED_ARRAY_SUPPORT||(j=Math.floor(j)),j<0&&(j=255+j+1),this[$]=255&j,$+1},u0.prototype.writeInt16LE=function(j,$,_r){return j=+j,$|=0,_r||N_(this,j,$,2,32767,-32768),u0.TYPED_ARRAY_SUPPORT?(this[$]=255&j,this[$+1]=j>>>8):XT(this,j,$,!0),$+2},u0.prototype.writeInt16BE=function(j,$,_r){return j=+j,$|=0,_r||N_(this,j,$,2,32767,-32768),u0.TYPED_ARRAY_SUPPORT?(this[$]=j>>>8,this[$+1]=255&j):XT(this,j,$,!1),$+2},u0.prototype.writeInt32LE=function(j,$,_r){return j=+j,$|=0,_r||N_(this,j,$,4,2147483647,-2147483648),u0.TYPED_ARRAY_SUPPORT?(this[$]=255&j,this[$+1]=j>>>8,this[$+2]=j>>>16,this[$+3]=j>>>24):ZT(this,j,$,!0),$+4},u0.prototype.writeInt32BE=function(j,$,_r){return j=+j,$|=0,_r||N_(this,j,$,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),u0.TYPED_ARRAY_SUPPORT?(this[$]=j>>>24,this[$+1]=j>>>16,this[$+2]=j>>>8,this[$+3]=255&j):ZT(this,j,$,!1),$+4},u0.prototype.writeFloatLE=function(j,$,_r){return D4(this,j,$,!0,_r)},u0.prototype.writeFloatBE=function(j,$,_r){return D4(this,j,$,!1,_r)},u0.prototype.writeDoubleLE=function(j,$,_r){return z4(this,j,$,!0,_r)},u0.prototype.writeDoubleBE=function(j,$,_r){return z4(this,j,$,!1,_r)},u0.prototype.copy=function(j,$,_r,_i){if(_r=_r||0,_i||_i===0||(_i=this.length),$>=j.length&&($=j.length),$=$||0,0<_i&&_i<_r&&(_i=_r),_i===_r||j.length===0||this.length===0)return 0;if($<0)throw new RangeError("targetStart out of bounds");if(_r<0||_r>=this.length)throw new RangeError("sourceStart out of bounds");if(_i<0)throw new RangeError("sourceEnd out of bounds");_i>this.length&&(_i=this.length),j.length-$<_i-_r&&(_i=j.length-$+_r);var _s,ga=_i-_r;if(this===j&&_r<$&&$<_i)for(_s=ga-1;0<=_s;--_s)j[_s+$]=this[_s+_r];else if(ga<1e3||!u0.TYPED_ARRAY_SUPPORT)for(_s=0;_s<ga;++_s)j[_s+$]=this[_s+_r];else Uint8Array.prototype.set.call(j,this.subarray(_r,_r+ga),$);return ga},u0.prototype.fill=function(j,$,_r,_i){if(typeof j=="string"){var _s;if(typeof $=="string"?(_i=$,$=0,_r=this.length):typeof _r=="string"&&(_i=_r,_r=this.length),j.length!==1||(_s=j.charCodeAt(0))<256&&(j=_s),_i!==void 0&&typeof _i!="string")throw new TypeError("encoding must be a string");if(typeof _i=="string"&&!u0.isEncoding(_i))throw new TypeError("Unknown encoding: "+_i)}else typeof j=="number"&&(j&=255);if($<0||this.length<$||this.length<_r)throw new RangeError("Out of range index");if(_r<=$)return this;if($>>>=0,_r=_r===void 0?this.length:_r>>>0,typeof(j=j||0)=="number")for(_c=$;_c<_r;++_c)this[_c]=j;else for(var ga=wx(j)?j:JT(new u0(j,_i).toString()),_l=ga.length,_c=0;_c<_r-$;++_c)this[_c+$]=ga[_c%_l];return this};var QI=/[^+\/0-9A-Za-z-_]/g;function JT(j,$){var _r;$=$||1/0;for(var _i=j.length,_s=null,ga=[],_l=0;_l<_i;++_l){if(55295<(_r=j.charCodeAt(_l))&&_r<57344){if(!_s){if(56319<_r){-1<($-=3)&&ga.push(239,191,189);continue}if(_l+1===_i){-1<($-=3)&&ga.push(239,191,189);continue}_s=_r;continue}if(_r<56320){-1<($-=3)&&ga.push(239,191,189),_s=_r;continue}_r=65536+(_s-55296<<10|_r-56320)}else _s&&-1<($-=3)&&ga.push(239,191,189);if(_s=null,_r<128){if(--$<0)break;ga.push(_r)}else if(_r<2048){if(($-=2)<0)break;ga.push(_r>>6|192,63&_r|128)}else if(_r<65536){if(($-=3)<0)break;ga.push(_r>>12|224,_r>>6&63|128,63&_r|128)}else{if(!(_r<1114112))throw new Error("Invalid code point");if(($-=4)<0)break;ga.push(_r>>18|240,_r>>12&63|128,_r>>6&63|128,63&_r|128)}}return ga}function F4(j){return WI(function($){var _r;if(($=((_r=$).trim?_r.trim():_r.replace(/^\s+|\s+$/g,"")).replace(QI,"")).length<2)return"";for(;$.length%4!=0;)$+="=";return $}(j))}function QT(j,$,_r,_i){for(var _s=0;_s<_i&&!(_s+_r>=$.length||_s>=j.length);++_s)$[_s+_r]=j[_s];return _s}function m2(j){return j!=null&&(!!j._isBuffer||B4(j)||typeof($=j).readFloatLE=="function"&&typeof $.slice=="function"&&B4($.slice(0,0)));var $}function B4(j){return!!j.constructor&&typeof j.constructor.isBuffer=="function"&&j.constructor.isBuffer(j)}var tO=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:XI,Buffer:u0,SlowBuffer:function(j){return+j!=j&&(j=0),u0.alloc(+j)},isBuffer:m2});Nx.setTimeout,Nx.clearTimeout,Nx.performance;var eO=typeof Object.create=="function"?function(j,$){j.super_=$,j.prototype=Object.create($.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}})}:function(j,$){j.super_=$;function _r(){}_r.prototype=$.prototype,j.prototype=new _r,j.prototype.constructor=j},rO=eO;function _2(j,$){var _r={seen:[],stylize:iO};return 3<=arguments.length&&(_r.depth=arguments[2]),4<=arguments.length&&(_r.colors=arguments[3]),U4($)?_r.showHidden=$:$&&function(_i,_s){if(!(!_s||!eA(_s)))for(var ga=Object.keys(_s),_l=ga.length;_l--;)_i[ga[_l]]=_s[ga[_l]]}(_r,$),aE(_r.showHidden)&&(_r.showHidden=!1),aE(_r.depth)&&(_r.depth=2),aE(_r.colors)&&(_r.colors=!1),aE(_r.customInspect)&&(_r.customInspect=!0),_r.colors&&(_r.stylize=nO),tA(_r,j,_r.depth)}function nO(j,$){var _r=_2.styles[$];return _r?"\x1B["+_2.colors[_r][0]+"m"+j+"\x1B["+_2.colors[_r][1]+"m":j}function iO(j,$){return j}function tA(j,$,_r){if(j.customInspect&&$&&nT($.inspect)&&$.inspect!==_2&&(!$.constructor||$.constructor.prototype!==$)){var _i=$.inspect(_r,j);return V4(_i)||(_i=tA(j,_i,_r)),_i}var _s=function(cy,yy){if(aE(yy))return cy.stylize("undefined","undefined");if(V4(yy)){var ay="'"+JSON.stringify(yy).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return cy.stylize(ay,"string")}if(typeof yy=="number")return cy.stylize(""+yy,"number");if(U4(yy))return cy.stylize(""+yy,"boolean");if(G4(yy))return cy.stylize("null","null")}(j,$);if(_s)return _s;var ga,_l=Object.keys($),_c=(ga={},_l.forEach(function(cy,yy){ga[cy]=!0}),ga);if(j.showHidden&&(_l=Object.getOwnPropertyNames($)),nA($)&&(0<=_l.indexOf("message")||0<=_l.indexOf("description")))return LS($);if(_l.length===0){if(nT($)){var _p=$.name?": "+$.name:"";return j.stylize("[Function"+_p+"]","special")}if(rT($))return j.stylize(RegExp.prototype.toString.call($),"regexp");if(rA($))return j.stylize(Date.prototype.toString.call($),"date");if(nA($))return LS($)}var _f,ey,iy="",ly=!1,uy=["{","}"];return _f=$,Array.isArray(_f)&&(ly=!0,uy=["[","]"]),nT($)&&(iy=" [Function"+($.name?": "+$.name:"")+"]"),rT($)&&(iy=" "+RegExp.prototype.toString.call($)),rA($)&&(iy=" "+Date.prototype.toUTCString.call($)),nA($)&&(iy=" "+LS($)),_l.length!==0||ly&&$.length!=0?_r<0?rT($)?j.stylize(RegExp.prototype.toString.call($),"regexp"):j.stylize("[Object]","special"):(j.seen.push($),ey=ly?function(cy,yy,ay,by,Ey){for(var ky=[],Oy=0,Ty=yy.length;Oy<Ty;++Oy)q4(yy,String(Oy))?ky.push(PS(cy,yy,ay,by,String(Oy),!0)):ky.push("");return Ey.forEach(function(Ly){Ly.match(/^\d+$/)||ky.push(PS(cy,yy,ay,by,Ly,!0))}),ky}(j,$,_r,_c,_l):_l.map(function(cy){return PS(j,$,_r,_c,cy,ly)}),j.seen.pop(),function(cy,yy,ay){return 60<cy.reduce(function(by,Ey){return Ey.indexOf(`
`),by+Ey.replace(/\u001b\[\d\d?m/g,"").length+1},0)?ay[0]+(yy===""?"":yy+`
 `)+" "+cy.join(`,
  `)+" "+ay[1]:ay[0]+yy+" "+cy.join(", ")+" "+ay[1]}(ey,iy,uy)):uy[0]+iy+uy[1]}function LS(j){return"["+Error.prototype.toString.call(j)+"]"}function PS(j,$,_r,_i,_s,ga){var _l,_c,_p=Object.getOwnPropertyDescriptor($,_s)||{value:$[_s]};if(_p.get?_c=_p.set?j.stylize("[Getter/Setter]","special"):j.stylize("[Getter]","special"):_p.set&&(_c=j.stylize("[Setter]","special")),q4(_i,_s)||(_l="["+_s+"]"),_c||(j.seen.indexOf(_p.value)<0?-1<(_c=G4(_r)?tA(j,_p.value,null):tA(j,_p.value,_r-1)).indexOf(`
`)&&(_c=ga?_c.split(`
`).map(function(_f){return"  "+_f}).join(`
`).substr(2):`
`+_c.split(`
`).map(function(_f){return"   "+_f}).join(`
`)):_c=j.stylize("[Circular]","special")),aE(_l)){if(ga&&_s.match(/^\d+$/))return _c;_l=(_l=JSON.stringify(""+_s)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(_l=_l.substr(1,_l.length-2),j.stylize(_l,"name")):(_l=_l.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),j.stylize(_l,"string"))}return _l+": "+_c}function U4(j){return typeof j=="boolean"}function G4(j){return j===null}function V4(j){return typeof j=="string"}function aE(j){return j===void 0}function rT(j){return eA(j)&&NS(j)==="[object RegExp]"}function eA(j){return typeof j=="object"&&j!==null}function rA(j){return eA(j)&&NS(j)==="[object Date]"}function nA(j){return eA(j)&&(NS(j)==="[object Error]"||j instanceof Error)}function nT(j){return typeof j=="function"}function H4(j){return j===null||typeof j=="boolean"||typeof j=="number"||typeof j=="string"||typeof j=="symbol"||j===void 0}function NS(j){return Object.prototype.toString.call(j)}function q4(j,$){return Object.prototype.hasOwnProperty.call(j,$)}function $4(j,$){if(j===$)return 0;for(var _r=j.length,_i=$.length,_s=0,ga=Math.min(_r,_i);_s<ga;++_s)if(j[_s]!==$[_s]){_r=j[_s],_i=$[_s];break}return _r<_i?-1:_i<_r?1:0}_2.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},_2.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var jS,oO=Object.prototype.hasOwnProperty,W4=Object.keys||function(j){var $=[];for(var _r in j)oO.call(j,_r)&&$.push(_r);return $},Y4=Array.prototype.slice;function K4(){return jS!==void 0?jS:jS=(function(){}).name==="foo"}function X4(j){return Object.prototype.toString.call(j)}function Z4(j){if(!m2(j)&&typeof Nx.ArrayBuffer=="function"){if(typeof ArrayBuffer.isView=="function")return ArrayBuffer.isView(j);if(j)return j instanceof DataView||!!(j.buffer&&j.buffer instanceof ArrayBuffer)}}function k_(j,$){j||j_(j,!0,$,"==",DS)}var sO=/\s*function\s+([^\(\s]*)\s*/;function J4(j){if(nT(j)){if(K4())return j.name;var $=j.toString().match(sO);return $&&$[1]}}function Q4(j){var $;this.name="AssertionError",this.actual=j.actual,this.expected=j.expected,this.operator=j.operator,j.message?(this.message=j.message,this.generatedMessage=!1):(this.message=tC(eC(($=this).actual),128)+" "+$.operator+" "+tC(eC($.expected),128),this.generatedMessage=!0);var _r,_i,_s,ga,_l,_c=j.stackStartFunction||j_;Error.captureStackTrace?Error.captureStackTrace(this,_c):(_r=new Error).stack&&(_l=_r.stack,_i=J4(_c),0<=(_s=_l.indexOf(`
`+_i))&&(ga=_l.indexOf(`
`,_s+1),_l=_l.substring(ga+1)),this.stack=_l)}function tC(j,$){return typeof j!="string"||j.length<$?j:j.slice(0,$)}function eC(j){if(K4()||!nT(j))return _2(j);var $=J4(j);return"[Function"+($?": "+$:"")+"]"}function j_(j,$,_r,_i,_s){throw new Q4({message:_r,actual:j,expected:$,operator:_i,stackStartFunction:_s})}function DS(j,$){j||j_(j,!0,$,"==",DS)}function lE(j,$,_r,_i){if(j===$)return!0;if(m2(j)&&m2($))return $4(j,$)===0;if(rA(j)&&rA($))return j.getTime()===$.getTime();if(rT(j)&&rT($))return j.source===$.source&&j.global===$.global&&j.multiline===$.multiline&&j.lastIndex===$.lastIndex&&j.ignoreCase===$.ignoreCase;if(j!==null&&typeof j=="object"||$!==null&&typeof $=="object"){if(Z4(j)&&Z4($)&&X4(j)===X4($)&&!(j instanceof Float32Array||j instanceof Float64Array))return $4(new Uint8Array(j.buffer),new Uint8Array($.buffer))===0;if(m2(j)!==m2($))return!1;var _s=(_i=_i||{actual:[],expected:[]}).actual.indexOf(j);return _s!==-1&&_s===_i.expected.indexOf($)||(_i.actual.push(j),_i.expected.push($),function(ga,_l,_c,_p){if(ga==null||_l==null)return!1;if(H4(ga)||H4(_l))return ga===_l;if(_c&&Object.getPrototypeOf(ga)!==Object.getPrototypeOf(_l))return!1;var _f=rC(ga),ey=rC(_l);if(_f&&!ey||!_f&&ey)return!1;if(_f)return ga=Y4.call(ga),_l=Y4.call(_l),lE(ga,_l,_c);var iy,ly,uy=W4(ga),cy=W4(_l);if(uy.length!==cy.length)return!1;for(uy.sort(),cy.sort(),ly=uy.length-1;0<=ly;ly--)if(uy[ly]!==cy[ly])return!1;for(ly=uy.length-1;0<=ly;ly--)if(iy=uy[ly],!lE(ga[iy],_l[iy],_c,_p))return!1;return!0}(j,$,_r,_i))}return _r?j===$:j==$}function rC(j){return Object.prototype.toString.call(j)=="[object Arguments]"}function nC(j,$){if(j&&$){if(Object.prototype.toString.call($)=="[object RegExp]")return $.test(j);try{if(j instanceof $)return 1}catch{}if(!Error.isPrototypeOf($))return $.call({},j)===!0}}function iC(j,$,_r,_i){var _s;if(typeof $!="function")throw new TypeError('"block" argument must be a function');typeof _r=="string"&&(_i=_r,_r=null),_s=function(_c){var _p;try{_c()}catch(_f){_p=_f}return _p}($),_i=(_r&&_r.name?" ("+_r.name+").":".")+(_i?" "+_i:"."),j&&!_s&&j_(_s,_r,"Missing expected exception"+_i);var ga=typeof _i=="string",_l=!j&&_s&&!_r;if((!j&&nA(_s)&&ga&&nC(_s,_r)||_l)&&j_(_s,_r,"Got unwanted exception"+_i),j&&_s&&_r&&!nC(_s,_r)||!j&&_s)throw _s}rO(k_.AssertionError=Q4,Error),k_.fail=j_,k_.ok=DS,k_.equal=function j($,_r,_i){$!=_r&&j_($,_r,_i,"==",j)},k_.notEqual=function j($,_r,_i){$==_r&&j_($,_r,_i,"!=",j)},k_.deepEqual=function j($,_r,_i){lE($,_r,!1)||j_($,_r,_i,"deepEqual",j)},k_.deepStrictEqual=function j($,_r,_i){lE($,_r,!0)||j_($,_r,_i,"deepStrictEqual",j)},k_.notDeepEqual=function j($,_r,_i){lE($,_r,!1)&&j_($,_r,_i,"notDeepEqual",j)},k_.notDeepStrictEqual=function j($,_r,_i){lE($,_r,!0)&&j_($,_r,_i,"notDeepStrictEqual",j)},k_.strictEqual=function j($,_r,_i){$!==_r&&j_($,_r,_i,"===",j)},k_.notStrictEqual=function j($,_r,_i){$===_r&&j_($,_r,_i,"!==",j)},k_.throws=function(j,$,_r){iC(!0,j,$,_r)},k_.doesNotThrow=function(j,$,_r){iC(!1,j,$,_r)},k_.ifError=function(j){if(j)throw j};function oC(){}var aO={sort:function(j){return j.sort(function($,_r){return $.height-_r.height}),j},placeItems:function(j){var $=0;return j.forEach(function(_r){_r.x=0,_r.y=$,$+=_r.height}),j}},lO={sort:function(j){return j.sort(function($,_r){return $.width-_r.width}),j},placeItems:function(j){var $=0;return j.forEach(function(_r){_r.x=$,_r.y=0,$+=_r.width}),j}},uO={sort:function(j){return j.sort(function($,_r){return Math.sqrt(Math.pow($.height,2)+Math.pow($.width,2))-Math.sqrt(Math.pow(_r.height,2)+Math.pow(_r.width,2))}),j},placeItems:function(j){var $=0,_r=0;return j.forEach(function(_i){_i.x=$,_i.y=_r,$+=_i.width,_r+=_i.height}),j}},cO={sort:function(j){return j.sort(function($,_r){return Math.sqrt(Math.pow($.height,2)+Math.pow($.width,2))-Math.sqrt(Math.pow(_r.height,2)+Math.pow(_r.width,2))}),j},placeItems:function(j){var $=0,_r=0;return j.forEach(function(_i){var _s=_i.width;_i.x=$-_s,_i.y=_r,$-=_s,_r+=_i.height}),j}};oC.prototype={fit:function(j){var $,_r,_i,_s,ga=j.length,_l=0<ga?j[0].width:0,_c=0<ga?j[0].height:0;for(this.root={x:0,y:0,width:_l,height:_c},$=0;$<ga;$++)_i=j[$],_s=(_r=this.findNode(this.root,_i.width,_i.height))?this.splitNode(_r,_i.width,_i.height):this.growNode(_i.width,_i.height),_i.x=_s.x,_i.y=_s.y},findNode:function(j,$,_r){return j.used?this.findNode(j.right,$,_r)||this.findNode(j.down,$,_r):$<=j.width&&_r<=j.height?j:null},splitNode:function(j,$,_r){return j.used=!0,j.down={x:j.x,y:j.y+_r,width:j.width,height:j.height-_r},j.right={x:j.x+$,y:j.y,width:j.width-$,height:_r},j},growNode:function(j,$){var _r=j<=this.root.width,_i=$<=this.root.height,_s=_i&&this.root.height>=this.root.width+j,ga=_r&&this.root.width>=this.root.height+$;return _s?this.growRight(j,$):ga?this.growDown(j,$):_i?this.growRight(j,$):_r?this.growDown(j,$):null},growRight:function(j,$){var _r;return this.root={used:!0,x:0,y:0,width:this.root.width+j,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:j,height:this.root.height}},(_r=this.findNode(this.root,j,$))?this.splitNode(_r,j,$):null},growDown:function(j,$){var _r;return this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+$,down:{x:0,y:this.root.height,width:this.root.width,height:$},right:this.root},(_r=this.findNode(this.root,j,$))?this.splitNode(_r,j,$):null}};var hO=oC,pO={sort:function(j){return j},placeItems:function(j){return function($,_r){_r=_r||{};var _i=new hO,_s=_r.inPlace||!1,ga=(ga=$.map(function(_l){return _s?_l:{width:_l.width,height:_l.height,item:_l}})).sort(function(_l,_c){return _c.width*_c.height-_l.width*_l.height});_i.fit(ga),ga.reduce(function(_l,_c){return Math.max(_l,_c.x+_c.width)},0),ga.reduce(function(_l,_c){return Math.max(_l,_c.y+_c.height)},0)}(j,{inPlace:!0}),j}},zS={};function iA(j,$){var _r=j||"top-down";return typeof _r=="string"&&k_(_r=zS[j],"Sorry, the '"+j+"' algorithm could not be loaded."),new E4(_r,$)}function uE(j,$){zS[j]=$}iA.PackingSmith=E4,iA.addAlgorithm=uE,iA.algorithms=zS,uE("top-down",aO),uE("left-right",lO),uE("diagonal",uO),uE("alt-diagonal",cO),uE("binary-tree",pO);var FS=iA;function sC(j){var $;try{j.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1)}catch(_r){$=_r.message}return $}function aC(j,$,_r){var _i;return j instanceof HTMLImageElement&&((_i=j.ownerDocument.createElement("canvas")).width=$,_i.height=_r,_i.getContext("2d").drawImage(j,0,0,$,_r),j=_i),j}var oA=Zy.metersToLatLng([Zy.half_circumference_meters,Zy.half_circumference_meters]),fO=Math.log(Zy.tile_size)/Math.LN2,lC=function(){Z1($,bx);var j=J1($);function $(_r,_i){var _s;return F0(this,$),_s=j.call(this,_r,_i),$1.is_worker&&(_s._quad_tree=new _x.H.geo.QuadTree,_s._marker_quad_tree=new _x.H.geo.QuadTree,_s._tree_entries_by_object_id={},_s._groups_by_id={},_s._layersCache=new _x.H.util.Cache(100)),$1.is_main&&(_s._objects_by_id={},_s._commands=[],_s._sendCommands=NT(_s._sendCommands,100,200),_s.dispatchUpdate=_s.dispatchUpdate.bind(WA(_s))),_s}return H0($,[{key:"hasLabeledData",value:function(){return!1}},{key:"onReady",value:function(){this._synced_at=this.provider.getInvalidations().getMark();var _r,_i,_s=this.provider.getRootGroup(),ga=_s.getObjects(!0),_l=[];for(ga.push(_s),_r=ga.length;_r--;)_i=ga[_r],this._isObjectSupported(_i)&&this._shouldBeStored(_i)&&(this._objects_by_id[_i.getId()]=_i,_l.push(_i.forWorkerMessage()));var _c=[{method_name:"addObjects",arguments:[_l]}];this._sendImmediateCommands(_c)}},{key:"onProviderUpdate",value:function(_r){var _i,_s,ga,_l,_c=_r.target,_p=_r.currentTarget.getInvalidations(_c.type);this._isObjectSupported(_c)&&(_i=this._synced_at,_s=_c.getId(),_p.isRemove(_i)?(delete this._objects_by_id[_s],this._commands.push({method_name:"removeObjectsByIds",arguments:[[_s],!0]})):_p.isAdd(_i)?this._shouldBeStored(_c)&&(this._objects_by_id[_s]=_c,this._commands.push({method_name:"addObjects",arguments:[[_c.forWorkerMessage()]]})):_p.isSpatial(_i)||_p.isZOrder(_i)?this._shouldBeStored(_c)&&(ga=[{method_name:"removeObjectsByIds",arguments:[[_s],!0]},{method_name:"addObjects",arguments:[[(this._objects_by_id[_s]=_c).forWorkerMessage()]]}],this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands(ga):this._commands.push(ga[0],ga[1])):_p.isVisual(_i)?this._shouldBeStored(_c)&&(_l={method_name:"updateObjectProperties",arguments:[(this._objects_by_id[_s]=_c).forWorkerMessage()]},this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands([_l]):this._commands.push(_l)):_p.isVolatility(_i)&&(delete this._objects_by_id[_s],this._commands.push({method_name:"removeObjectsByIds",arguments:[[_s],!0]}),this._shouldBeStored(_c)&&(this._objects_by_id[_s]=_c,this._commands.push({method_name:"addObjects",arguments:[[_c.forWorkerMessage()]]}))),this._commands.length&&this._sendCommands()),this._synced_at=_p.getMark()}},{key:"_shouldBeStored",value:function(_r){return _r.type===16||(!_r.getIcon||_r.getIcon().getState()===1)&&this._hasSameVolatility(_r)}},{key:"_hasSameVolatility",value:function(_r){return _r.getVolatility(!0)===this.has_volatile_data}},{key:"hasPendingCommands",value:function(){return 0<this._commands.length}},{key:"_sendCommands",value:function(){this._sendImmediateCommands(this._commands),this._commands=[]}},{key:"_sendImmediateCommands",value:function(_r){_r.length&&S0.postMessage(this.worker,this.target_name+".executeCommands",_r).then(this.dispatchUpdate)}},{key:"_isObjectSupported",value:function(_r){return _r.forWorkerMessage&&_r.type!==8}},{key:"getSyncedAt",value:function(){return this._synced_at}},{key:"getMapObjectById",value:function(_r){return this._objects_by_id[_r]}},{key:"getIconBitmapByObjectId",value:function(_r,_i){var _s=this.getMapObjectById(_r);if(_s){var ga=_s.getIcon();if(ga.uid===_i&&ga.getState()===1){var _l=ga.getSize();return aC(ga.getBitmap(),_l.w,_l.h)}}}},{key:"_getRastersForMarkers",value:function(_r){for(var _i={},_s=FS("binary-tree"),ga=0;ga<_r.length;ga++){var _l=_r[ga],_c=_l.properties.icon;_i[_c.id]||(_s.addItem({width:_c.size.w,height:_c.size.h,meta:{objectId:_l.id,id:_c.id}}),_i[_c.id]=!0)}return _s.export()}},{key:"fetchFeaturesForTile",value:function(_r){var _i=[],_s=[],ga=[],_l=[],_c=[],_p=this._marker_quad_tree.intersectBoundingBox(Zy.getTileBoundingBox(_r.coords,this.tile_size));_r.source_data.error=null;for(var _f=0;_f<_p.length;_f++){var ey={id:_p[_f].$feature$.id,properties:Object.assign({},_p[_f].$feature$.properties),geometry:{type:_p[_f].$feature$.geometry.type,coordinates:mS.deepClone(_p[_f].$feature$.geometry.coordinates)}};_i.push(ey)}_p=this._quad_tree.intersectBoundingBox(Zy.getTileBoundingBox(_r.coords,this.tile_size,100));for(var iy=0;iy<_p.length;iy++){var ly,uy={id:_p[iy].$feature$.id,properties:Object.assign({},_p[iy].$feature$.properties),geometry:{type:_p[iy].$feature$.geometry.type,coordinates:mS.deepClone(_p[iy].$feature$.geometry.coordinates)}};uy.properties.overlay?_s.push(uy):uy.geometry.type.includes("LineString")?ga.push(uy):uy.geometry.type.includes("Polygon")&&(_l.push(uy),ly={id:uy.id,properties:uy.properties,geometry:{type:uy.geometry.type,coordinates:mS.deepClone(uy.geometry.coordinates)}},_c.push(ly))}_i.sort($._compareZInfo),_l.sort($._compareZInfo),_s.sort($._compareZInfo);var cy=this.has_volatile_data?4096:0;_c.sort($._compareZInfo);for(var yy=0;yy<_c.length;yy++)_c[yy].properties.effectiveZIdx=cy++;ga.sort($._compareZInfo);for(var ay=0;ay<ga.length;ay++)ga[ay].properties.effectiveZIdx=cy++;_r.source_data.layers.markers={type:"FeatureCollection",features:_i},_r.source_data.layers.polylines={type:"FeatureCollection",features:ga},_r.source_data.layers.polygons={type:"FeatureCollection",features:_l},_r.source_data.layers.outlines={type:"FeatureCollection",features:_c},_r.source_data.layers.overlays={type:"FeatureCollection",features:_s}}},{key:"tileTexture",value:function(_r){var _i=_r.source_data.layers.overlays;if(_i){var _s=this.name+"_"+_r.coords.key,ga=z1.coordinateWithMaxZoom(_r.coords,this.max_zoom),_l=_i.features[0].properties.overlays_config;return{name:_s,filtering:this.filtering,coords:ga,width:Zy.tile_size,height:Zy.tile_size,overlays_config:_l,source:this.name}}}},{key:"_load",value:function(_r){var _i=Zy.wrapTile(_r.coords,{x:!0}),_s=_i.z,ga=_i.x,_l=_i.y,_c="".concat(_s,"_").concat(ga,"_").concat(_l),_p=this._layersCache.get(_c),_f=!1;if(_p)_r.source_data.layers=_p;else{this.fetchFeaturesForTile(_r);var ey={maxZoom:this.max_zoom,tolerance:1.5,extent:Zy.tile_scale},iy=_r.source_data.layers.overlays;iy.features.length&&delete _r.source_data.layers.overlays;var ly=_r.source_data.layers.markers;for(var uy in ly.features.length&&delete _r.source_data.layers.markers,_r.source_data.layers){var cy,yy=_r.source_data.layers[uy];yy.features.length&&(ey.buffer=uy.includes("lines")?100*Zy.units_per_pixel:0,cy=qI(yy,_s,ga,_l,ey),_r.source_data.layers[uy]=Z3(cy))}_r.source_data.layers.overlays=this._processOverlays(_r,iy);for(var ay=_r.source_data.layers.overlays.features.length;ay--;)if(!_r.source_data.layers.overlays.features[ay].id){_f=!0,this._layersCache.drop(_c);break}_r.source_data.layers.markers=this._processMarkers(_r,ly),this._postProcessTile(_r),_f||this._layersCache.add(_c,_r.source_data.layers,1)}return _r.rasters=this._getRastersForMarkers(_r.source_data.layers.markers.features),Promise.resolve(_r)}},{key:"_processMarkers",value:function(_r,_i){var _s=_i.features.length;if(_s){for(var ga=Zy.unitsPerMeter(_r.coords.z),_l=Zy.wrapTile(_r.coords,{x:!0}),_c=Zy.metersForTile(_l),_p=Zy.isLastTile(_l),_f=Zy.wrapMeters(_r.min),ey=Zy.wrapMeters(_r.max),iy=function(by){g_.coordsToMeters(by);var Ey=C0(by,2),ky=Ey[0],Oy=Ey[1],Ty=ky>=_f.x&&(_p.column||ky<ey.x)&&Oy>=ey.y&&(_p.row||!_r.coords.y||Oy<_f.y);return g_.metersToTileUnits(ga,_c,by),Ty},ly=[],uy=0;uy<_s;uy++){var cy,yy=_i.features[uy].geometry,ay=!1;yy.type==="Point"?iy(cy=yy.coordinates)?yy.coordinates=cy:ay=!0:yy.type==="MultiPoint"&&(yy.coordinates=yy.coordinates.filter(iy),yy.coordinates.length===0&&(ay=!0)),ay||ly.push(_i.features[uy])}_i.features=ly}return _i}},{key:"_processOverlays",value:function(_r,_i){var _s=this;if(!_i.features.length)return _i;var ga={coords:_r.coords,min:Zy.metersForTile(Zy.wrapTile(_r.coords,{x:!0}))},_l={coords:_r.coords,source_data:{layers:{_default:{type:"FeatureCollection",features:_i.features}}}},_c=Math.pow(2,_r.coords.z+fO);bx.projectData(_l.source_data),bx.scaleData(_l.source_data,ga);var _p=_i.features.map(function(ey){var iy=ey.geometry.coordinates[0],ly=iy[0],uy=iy[iy.length===5?2:3],cy=Math.floor(ly[0]/Zy.tile_scale*Zy.tile_size),yy=Math.floor(ly[1]/Zy.tile_scale*Zy.tile_size),ay=Math.floor(uy[0]/Zy.tile_scale*Zy.tile_size),by=Math.floor(uy[1]/Zy.tile_scale*Zy.tile_size)-yy,Ey=ay<=cy,ky=Ey?_c-(cy-ay):ay-cy,Oy=[];return cy<=Zy.tile_size&&Oy.push([cy,yy,ky,by]),Ey&&0<ay&&Oy.push([cy-_c,yy,ky,by]),{id:ey.id,properties:ey.properties,texcoords:Oy}}).filter(function(ey){return _s._isVisible(ey.properties)&&_s.isInMinMaxRange(ey.properties,_r.style_zoom)}),_f=Zy.tile_scale;return _r.pad_scale=this.pad_scale,_r.default_winding="CW",_i.features=_p.length?[{geometry:{type:"Polygon",coordinates:[[[0,0],[_f,0],[_f,_f],[0,_f],[0,0]]]},properties:{overlays_config:_p}}]:_p,_i}},{key:"executeCommands",value:function(_r){for(var _i,_s=_r.length<10,ga=0;ga<_r.length;ga++){var _l=_r[ga];_l.arguments.push(_s);var _c=this[_l.method_name].apply(this,_l.arguments);_s&&(_c&&_i?_i.mergeRect(_c,!0,_i):_c&&(_i=_c))}return _i?_i.forWorkerMessage():void 0}},{key:"_getClampedGeoRectForFeature",value:function(_r){var _i=_r.geometry.boundingBox;return new _x.H.geo.Rect(L1.clamp(_i[0],-oA[1],oA[1]),_i[1],L1.clamp(_i[2],-oA[1],oA[1]),_i[3])}},{key:"addObjects",value:function(_r,_i){for(var _s,ga=1<arguments.length&&_i!==void 0&&_i,_l=0;_l<_r.length;_l++){var _c,_p,_f,ey=_r[_l];ey.type==="Group"?(ey.$children_ids$={},this._groups_by_id[ey.id]=ey):($._preprocessGeometry(ey.geometry),_c=this._getClampedGeoRectForFeature(ey),ga&&(_s?_s.mergeRect(_c,!0,_s):_s=_c),(_f=(_p=ey.geometry.type.indexOf("Point")!==-1?this._marker_quad_tree:this._quad_tree).insertBoundingBox(_c)).$tree=_p,_f.$feature$=ey,this._tree_entries_by_object_id[ey.id]=_f)}for(var iy=0;iy<_r.length;iy++){var ly=_r[iy];ly.properties.parent&&(this._groups_by_id[ly.properties.parent].$children_ids$[ly.id]=ly.id),ly.properties.ref={effectiveVisibility:this._isVisible(ly.properties),zInfo:this._getZInfo([],ly)}}return this._layersCache.removeAll(),_s}},{key:"removeObjectsByIds",value:function(_r,_i,_s){for(var ga,_l=2<arguments.length&&_s!==void 0&&_s,_c=0;_c<_r.length;_c++){var _p,_f=_r[_c],ey=void 0,iy=void 0;(ey=this._tree_entries_by_object_id[_f])?(_l&&(_p=this._getClampedGeoRectForFeature(ey.$feature$),ga?ga.mergeRect(_p,!0,ga):ga=_p),delete this._groups_by_id[ey.$feature$.properties.parent].$children_ids$[_f],ey.$tree.remove(ey),delete this._tree_entries_by_object_id[_f]):(iy=this._groups_by_id[_f])&&(iy.properties.parent&&delete this._groups_by_id[iy.properties.parent].$children_ids$[_f],_i&&this.removeObjectsByIds(Object.keys(iy.$children_ids$),!0),delete this._groups_by_id[_f])}return this._layersCache.removeAll(),ga}},{key:"updateObjectProperties",value:function(_r,_i){var _s,ga=1<arguments.length&&_i!==void 0&&_i;return _r.type==="Group"?(zx(this._groups_by_id[_r.id].properties,_r.properties),this._groups_by_id[_r.id].properties.ref.effectiveVisibility=this._isVisible(_r.properties)):(this._tree_entries_by_object_id[_r.id]||this.addObjects([_r]),zx(this._tree_entries_by_object_id[_r.id].$feature$.properties,_r.properties),this._tree_entries_by_object_id[_r.id].$feature$.properties.ref.effectiveVisibility=this._isVisible(_r.properties),ga&&(_s=this._getClampedGeoRectForFeature(_r))),_s}},{key:"_getZInfo",value:function(_r,_i){var _s=_i.properties.zIdx,ga=_i.properties.sIdx;return _r[0]|=_s!==void 0,_r.splice(1,0,_s||0,ga<0?_i.id:ga),_i.properties.parent===0?_r:this._getZInfo(_r,this._groups_by_id[_i.properties.parent])}},{key:"_isVisible",value:function(_r){var _i=_r.visible,_s=!_r.parent||this._isVisible(this._groups_by_id[_r.parent].properties);return _i&&_s}},{key:"isInMinMaxRange",value:function(_r,_i){var _s=_r.min<=_i&&_r.max>=_i,ga=!_r.parent||this.isInMinMaxRange(this._groups_by_id[_r.parent].properties,_i);return _s&&ga}},{key:"dispose",value:function(){this._commands=[],sx(w_($.prototype),"dispose",this).call(this)}}],[{key:"_compareZInfo",value:function(_r,_i){for(var _s,ga=_r.properties.ref.zInfo,_l=_i.properties.ref.zInfo,_c=ga.length,_p=_l.length,_f=Math.min(_c,_p),ey=1;ey<_f;ey++)if(_s=ga[ey]-_l[ey])return _s;return _c-_p}},{key:"_preprocessGeometry",value:function(_r){var _i=_r.type;_r.coordinates=_i==="Point"?$._processPointCoordinates(_r.coordinates):_i==="MultiPoint"?_r.coordinates.map($._processPointCoordinates):_i==="LineString"?$._processLineStringCoordinates(_r.coordinates):_i==="MultiLineString"?_r.coordinates.map($._processLineStringCoordinates):_i==="Polygon"?_r.coordinates.map($._processPolygonCoordinates):_i==="MultiPolygon"?_r.coordinates.map($._processMultiPolygonCoordinates):[]}},{key:"_processPointCoordinates",value:function(_r){return[_r[1],_r[0],_r[2]]}},{key:"_processLineStringCoordinates",value:function(_r){return $._latLngAltArrayToLineString(_r,!1)}},{key:"_processPolygonCoordinates",value:function(_r){return $._latLngAltArrayToLineString(_r,!0)}},{key:"_processMultiPolygonCoordinates",value:function(_r){return _r.map($._processPolygonCoordinates)}},{key:"_latLngAltArrayToLineString",value:function(_r,_i){for(var _s=[],ga=_r.length,_l=0;_l<ga;_l+=3)_s.push([_r[_l+1],_r[_l]]);return _i&&_s.push([_r[1],_r[0]]),_s}}]),$}();bx.register(lC,"ObjectSource");var uC=1,cC=2,hC=3,dO=function(){function j(){F0(this,j),this._map={}}return H0(j,[{key:"set",value:function($,_r,_i){var _s;this._map[$]?this._map[$].accumulator.add(_i):((_s=new Set).add(_i),this._map[$]={value:_r,accumulator:_s})}},{key:"get",value:function($){return this._map[$]&&this._map[$].value}},{key:"delete",value:function($,_r){var _i=this._map[$];_i&&_i.accumulator&&(_i.accumulator.delete(_r),_i.accumulator.size===0&&delete this._map[$])}}]),j}(),yO=function(){Z1($,bx);var j=J1($);function $(_r,_i){var _s;return F0(this,$),_s=j.call(this,_r,_i),$1.is_worker||(_s._icons=new dO),_s}return H0($,[{key:"onProviderUpdate",value:function(_r){_r.target instanceof H.map.provider.Tile?this.dispatchUpdate(_r.target,_r.data):this.dispatchUpdate(void 0,_r.data)}},{key:"onReady",value:function(){var _r=this.provider;_r.setTileCanvasRendering&&_r.setTileCanvasRendering(!1),_r.providesMarkers()&&(this._onCacheDrop=this._onCacheDrop.bind(this),_r.getCache().registerOnDrop(this._onCacheDrop)),this.dispatchUpdate()}},{key:"dispose",value:function(){sx(w_($.prototype),"dispose",this).call(this);var _r=this.provider;_r.providesMarkers()&&_r.getCache().deRegisterOnDrop(this._onCacheDrop)}},{key:"_onCacheDrop",value:function(_r,_i){this.provider.cacheFilter(_r)&&this._deleteIcons(_r,_i.data)}},{key:"_deleteIcons",value:function(_r,_i){for(var _s=0,ga=_i.length;_s<ga;_s++){var _l=_i[_s].getIcon();this._icons.delete(_l.uid,_r)}}},{key:"getIconBitmapByObjectId",value:function(_r,_i){var _s=this._icons.get(_i);return _s&&_s.getBitmap()}},{key:"requestMarkerTile",value:function(_r){var _i=this;return new Promise(function(_s,ga){_i.provider?_i.provider.requestTileAsPromise(_r.x,_r.y,_r.z,!1).then(function(_l){var _c,_p,_f=[];if(_l.data)for(_p=(_c=_l.data).length;_p--;){var ey=_c[_p],iy=ey.getIcon();_i._icons.set(iy.uid,iy,_l.key),_f.push(ey.forWorkerMessage())}_s(_f)}):_s([])})}},{key:"requestSpatialTile",value:function(_r){var _i=this;return new Promise(function(_s,ga){_i.provider?_i.provider.requestTileAsPromise(_r.x,_r.y,_r.z,!1).then(function(_l){var _c,_p=[];if(_l.getObjects){_c=_l.getObjects();for(var _f=0;_f<_c.length;_f++){var ey=_c[_f];_p.push({id:ey.getId(),geometries:ey.getGeometriesForTile(_l),isClosed:ey.isClosed(),style:ey.getStyle().forWorkerMessage()})}}_s(_p)}):_s([])})}},{key:"_pointToArray",value:function(_r){var _i=Zy.tile_scale/this.tile_size;return[_r.x*_i,_r.y*_i]}},{key:"_getGeoJsonMultiPolygon",value:function(_r){for(var _i=_r.geometries,_s=_i.length,ga=[],_l={coordinates:ga,type:"MultiPolygon"},_c=0;_c<_s;_c++){for(var _p=_i[_c],_f=_p.paths,ey=_f.length,iy=_p.interiorsIndex,ly=_p.outlinesIndex,uy=Math.min(iy,ly,ey),cy=void 0,yy=void 0,yy=0;yy<uy;yy++)cy=[_f[yy].map(this._pointToArray,this)],ga.push(cy);if(uy===1)for(uy=Math.min(ly,ey),yy=iy;yy<uy;yy++)cy.push(_f[yy].map(this._pointToArray,this))}return _l}},{key:"_getGeoJsonMultiLineString",value:function(_r,_i){for(var _s=1<arguments.length&&_i!==void 0&&_i,ga={coordinates:[],type:"MultiLineString"},_l=_r.geometries,_c=0;_c<_l.length;_c++)for(var _p=_l[_c],_f=_s?_p.outlinesIndex:0,ey=_s?_p.paths.length:Math.min(_p.interiorsIndex,_p.outlinesIndex,_p.paths.length),iy=_f;iy<ey;iy++){var ly=_p.paths[iy].map(this._pointToArray,this);ga.coordinates.push(ly)}return ga}},{key:"_getGeoJsonGeometry",value:function(_r,_i){var _s=_i===uC?this._getGeoJsonMultiPolygon(_r):this._getGeoJsonMultiLineString(_r,_i===hC);return _s.coordinates.length?_s:null}},{key:"_load",value:function(_r){var _i=this;return new Promise(function(_s,ga){var _l=S0.postMessage(_i.target_name+".requestMarkerTile",_r.coords).then(_i._prepareTileData.bind(_i,_r)),_c=new Promise(function(_p,_f){S0.postMessage(_i.target_name+".requestSpatialTile",_r.coords).then(function(ey){for(var iy=[],ly=[],uy=[],cy=0;cy<ey.length;cy++){var yy,ay=ey[cy],by=void 0,Ey=void 0,Ey=ay.isClosed?(by=ly,uC):(by=iy,cC),ky=_i._getGeoJsonGeometry(ay,Ey);ky&&(yy={id:ay.id,type:"Feature",properties:{height:0,style:ay.style},geometry:ky},Ey===cC&&(yy.properties.effectiveZIdx=iy.length),by.push(yy));var Oy=_i._getGeoJsonGeometry(ay,hC);Oy&&uy.push({id:ay.id,type:"Feature",properties:{height:0,style:ay.style,effectiveZIdx:uy.length},geometry:Oy})}_r.source_data.layers.polylines={type:"FeatureCollection",features:iy},_r.source_data.layers.polygons={type:"FeatureCollection",features:ly},_r.source_data.layers.outlines={type:"FeatureCollection",features:uy},_p(_r)})});Promise.all([_l,_c]).then(function(_p){_i._postProcessTile(_r),_s(_r)})})}},{key:"_prepareTileData",value:function(_r,_i){var _s=Zy.wrapTile(_r.coords,{x:!0,y:!0}),ga=Zy.metersForTile(_s);_r.source_data.layers={markers:{features:_i,type:"FeatureCollection"}};var _l={coords:_s,min:ga},_c=_r.source_data,_p=FS("binary-tree"),_f={};for(var ey in _c.layers)for(var iy=_c.layers[ey].features.length,ly=0;ly<iy;ly++){var uy=_c.layers[ey].features[ly],cy=uy.properties.icon;_f[cy.id]||(_p.addItem({width:cy.size.w,height:cy.size.h,meta:{objectId:uy.id,id:cy.id}}),_f[cy.id]=!0),Zy.transformGeometry(uy.geometry,function(yy){var ay=yy[0];yy[0]=yy[1],yy[1]=ay})}return _r.rasters=_p.export(),bx.projectData(_r.source_data),bx.scaleData(_r.source_data,_l),_r}}]),$}();bx.register(yO,"ObjectTileSource");var gO=function(){Z1($,$T);var j=J1($);function $(_r,_i){var _s;return F0(this,$),(_s=j.call(this,_r,_i)).uid_=_r.uid,_s}return H0($,[{key:"initialize",value:function(_r,_i){this.provider=_r,this._on_update=_i,this._onProviderUpdate=this._onProviderUpdate.bind(this),_r.addEventListener("update",this._onProviderUpdate)}},{key:"_onProviderUpdate",value:function(){this._on_update(this.name)}},{key:"tileTexture",value:function(_r){return Object.assign(sx(w_($.prototype),"tileTexture",this).call(this,_r),{uid:this.uid_,url:this.uid_+"_"+_r.coords.key,coords:_r.coords})}},{key:"dispose",value:function(){this.provider.removeEventListener("update",this._onProviderUpdate)}}]),$}();function sA(j,$){var _r=($=this.options=function(_s,ga){for(var _l in ga)_s[_l]=ga[_l];return _s}(Object.create(this.options),$)).debug;if(_r&&console.time("preprocess data"),$.maxZoom<0||24<$.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if($.promoteId&&$.generateId)throw new Error("promoteId and generateId cannot be used together.");var _i=p4(j,$);this.tiles={},this.tileCoords=[],_r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",$.indexMaxZoom,$.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(_i=m4(_i,$)).length&&this.splitTile(_i,0,0,0),_r&&(_i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function BS(j,$,_r){return 32*((1<<j)*_r+$)+j}g_.register(gO,"RemoteRasterTileSource"),sA.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},sA.prototype.splitTile=function(j,$,_r,_i,_s,ga,_l){for(var _c=[j,$,_r,_i],_p=this.options,_f=_p.debug;_c.length;){_i=_c.pop(),_r=_c.pop(),$=_c.pop(),j=_c.pop();var ey,iy,ly,uy,cy,yy,ay,by,Ey,ky,Oy,Ty=1<<$,Ly=BS($,_r,_i),Ny=this.tiles[Ly];if(Ny||(1<_f&&console.time("creation"),Ny=this.tiles[Ly]=x4(j,$,_r,_i,_p),this.tileCoords.push({z:$,x:_r,y:_i}),_f&&(1<_f&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",$,_r,_i,Ny.numFeatures,Ny.numPoints,Ny.numSimplified),console.timeEnd("creation")),ey="z"+$,this.stats[ey]=(this.stats[ey]||0)+1,this.total++)),Ny.source=j,_s){if($===_p.maxZoom||$===_s)continue;var Uy=1<<_s-$;if(_r!==Math.floor(ga/Uy)||_i!==Math.floor(_l/Uy))continue}else if($===_p.indexMaxZoom||Ny.numPoints<=_p.indexMaxPoints)continue;Ny.source=null,j.length!==0&&(1<_f&&console.time("clipping"),ly=.5-(iy=.5*_p.buffer/_p.extent),cy=1+iy,Ey=yy=ay=by=null,ky=ux(j,Ty,_r-iy,_r+(uy=.5+iy),0,Ny.minX,Ny.maxX,_p),Oy=ux(j,Ty,_r+ly,_r+cy,0,Ny.minX,Ny.maxX,_p),j=null,ky&&(Ey=ux(ky,Ty,_i-iy,_i+uy,1,Ny.minY,Ny.maxY,_p),yy=ux(ky,Ty,_i+ly,_i+cy,1,Ny.minY,Ny.maxY,_p),ky=null),Oy&&(ay=ux(Oy,Ty,_i-iy,_i+uy,1,Ny.minY,Ny.maxY,_p),by=ux(Oy,Ty,_i+ly,_i+cy,1,Ny.minY,Ny.maxY,_p),Oy=null),1<_f&&console.timeEnd("clipping"),_c.push(Ey||[],$+1,2*_r,2*_i),_c.push(yy||[],$+1,2*_r,2*_i+1),_c.push(ay||[],$+1,2*_r+1,2*_i),_c.push(by||[],$+1,2*_r+1,2*_i+1))}},sA.prototype.getTile=function(j,$,_r){var _i=this.options,_s=_i.extent,ga=_i.debug;if(j<0||24<j)return null;var _l=1<<j,_c=BS(j,$=($%_l+_l)%_l,_r);if(this.tiles[_c])return AS(this.tiles[_c],_s);1<ga&&console.log("drilling down to z%d-%d-%d",j,$,_r);for(var _p,_f=j,ey=$,iy=_r;!_p&&0<_f;)_f--,ey=Math.floor(ey/2),iy=Math.floor(iy/2),_p=this.tiles[BS(_f,ey,iy)];return _p&&_p.source?(1<ga&&console.log("found parent tile z%d-%d-%d",_f,ey,iy),1<ga&&console.time("drilling down"),this.splitTile(_p.source,_f,ey,iy,j,$,_r),1<ga&&console.timeEnd("drilling down"),this.tiles[_c]?AS(this.tiles[_c],_s):null):null};var vO={type:"FeatureCollection",features:[]},mO=function(){Z1($,bx);var j=J1($);function $(_r,_i){return F0(this,$),_r.tiled=!0,_r.url="",j.call(this,_r,_i)}return H0($,[{key:"fetchTile",value:function(_r,_i,_s){return this.provider?this.provider.requestTileAsPromise(_r,_i,_s).then(function(ga){return ga.data}):Promise.resolve(vO)}},{key:"_load",value:function(_r){var _i=this,_s=Zy.wrapTile(_r.coords,{x:!0,y:!0}),ga={indexMaxZoom:0,maxZoom:this.max_zoom,tolerance:1.5,extent:Zy.tile_scale};return S0.postMessage(this.target_name+".fetchTile",_s.x,_s.y,_s.z).then(function(_l){for(var _c in _r.source_data.layers=_l.type==="FeatureCollection"?{_default:_l}:_l,_r.source_data.layers){var _p=new sA(_r.source_data.layers[_c],ga).getTile(_s.z,_s.x,_s.y);_r.source_data.layers[_c]=Z3(_p)}return _i._postProcessTile(_r),_r})}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),$}();g_.register(mO,"GeoJSONTileSource");var pC,_O={layers:{_default:{type:"FeatureCollection",features:[{type:"Point",geometry:{}}]}}},bO=function(){Z1($,g_);var j=J1($);function $(_r,_i){return F0(this,$),_r.max_zoom=0,j.call(this,_r,_i)}return H0($,[{key:"load",value:function(_r){return _r.source_data=_r.coords.key==="0/0/0"?_O:void 0,Promise.resolve(_r)}}]),$}();g_.register(bO,"SkyBox");var cE=pC={draw_label_collision_boxes:!1,draw_label_texture_boxes:!1,suppress_label_fade_in:!1,suppress_snap_animation:!1,show_hidden_labels:!1,layer_stats:!1},hE,US=0,fC=1;function dC(j,$){var _r={};return $.forEach(function(_i){return _r[_i]=j[_i]}),_r}var Sw,yC=hE={},xO=0;hE.getContext=function(j,$){var _r=!1;j==null&&((j=document.createElement("canvas")).style.position="absolute",j.style.top=0,j.style.left=0,j.style.zIndex=-1,document.body.appendChild(j),_r=!0);var _i=j.getContext("webgl",$)||j.getContext("experimental-webgl",$);if(!_i)throw new Error("Couldn't create WebGL context.");return _i._tangram_id=xO++,_r?(hE.resize(_i,window.innerWidth,window.innerHeight,$.device_pixel_ratio),window.addEventListener("resize",function(){hE.resize(_i,window.innerWidth,window.innerHeight,$.device_pixel_ratio)})):hE.resize(_i,parseFloat(j.style.width),parseFloat(j.style.height),$.device_pixel_ratio),_i},hE.resize=function(j,$,_r,_i){j.canvas.style.width=$+"px",j.canvas.style.height=_r+"px",j.canvas.width=Math.round($*_i),j.canvas.height=Math.round(_r*_i),j.bindFramebuffer(j.FRAMEBUFFER,null),j.viewport(0,0,j.canvas.width,j.canvas.height)};var I0=Sw={};Sw.BYTE=5120,Sw.UNSIGNED_BYTE=5121,Sw.SHORT=5122,Sw.UNSIGNED_SHORT=5123,Sw.INT=5124,Sw.UNSIGNED_INT=5125,Sw.FLOAT=5126;var Uw,wO=Math.pow(2,16)-1,EO=1024,GS=!1,VS=function(){function j($){F0(this,j),this.size_=$||EO,this.position_=0,this.ArrayType_=Uint16Array,this.buffer_=new this.ArrayType_(this.size_),this.overflows_=!1}return H0(j,[{key:"push",value:function($){if(!this.overflows_||GS){if(wO<$){if(this.overflows_=!0,!GS)return;this.ArrayType_===Uint16Array&&(this.ArrayType_=Uint32Array,this.buffer_=new this.ArrayType_(this.buffer_))}this.position_===this.size_&&this.expand_(),this.buffer_[this.position_]=$,this.position_+=1}}},{key:"end",value:function(){if(this.position_===0)return!1;var $=this.buffer_,_r=this.position_;return this.buffer_=new this.ArrayType_(this.size_),this.position_=0,this.overflows_=!1,$.subarray(0,_r)}},{key:"expand_",value:function(){this.size_=this.size_<<1;var $=new this.ArrayType_(this.size_);$.set(this.buffer_),this.buffer_=$}}]),j}();VS.setElementIndexUint=function(j){GS=j};var kO=(g2(Uw={},I0.FLOAT,Float32Array),g2(Uw,I0.BYTE,Int8Array),g2(Uw,I0.UNSIGNED_BYTE,Uint8Array),g2(Uw,I0.INT,Int32Array),g2(Uw,I0.UNSIGNED_INT,Uint32Array),g2(Uw,I0.SHORT,Int16Array),g2(Uw,I0.UNSIGNED_SHORT,Uint16Array),Uw),gC=function(){function j($){var _r=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).prealloc,_i=_r===void 0?500:_r;F0(this,j),this.vertex_layout=$,this.vertex_elements=new VS,this.stride=this.vertex_layout.stride,0<j.array_pool.length?(this.vertex_buffer=j.array_pool.pop(),this.byte_length=this.vertex_buffer.byteLength,this.size=Math.floor(this.byte_length/this.stride),o0("trace","VertexData: reused buffer of bytes ".concat(this.byte_length,", ").concat(this.size," vertices"))):(this.size=_i,this.byte_length=this.stride*this.size,this.vertex_buffer=new Uint8Array(this.byte_length)),this.offset=0,this.vertex_count=0,this.realloc_count=0,this.setBufferViews(),this.setAddVertexFunction()}return H0(j,[{key:"setBufferViews",value:function(){var $=this;this.views={},this.views[I0.UNSIGNED_BYTE]=this.vertex_buffer,this.vertex_layout.dynamic_attribs.forEach(function(_r){var _i;$.views[_r.type]==null&&(_i=kO[_r.type],$.views[_r.type]=new _i($.vertex_buffer.buffer))})}},{key:"checkBufferSize",value:function(){var $;this.offset+this.stride>this.byte_length&&(this.size=Math.floor(1.5*this.size),this.size-=this.size%4,this.byte_length=this.stride*this.size,($=new Uint8Array(this.byte_length)).set(this.vertex_buffer),j.array_pool.push(this.vertex_buffer),this.vertex_buffer=$,this.setBufferViews(),this.realloc_count++)}},{key:"setAddVertexFunction",value:function(){this.vertexLayoutAddVertex=this.vertex_layout.getAddVertexFunction()}},{key:"addVertex",value:function($){this.checkBufferSize(),this.vertexLayoutAddVertex($,this.views,this.offset),this.offset+=this.stride,this.vertex_count++}},{key:"end",value:function(){return this.vertex_buffer=this.vertex_buffer.subarray(0,this.offset),this.element_buffer=this.vertex_elements.end(),o0("trace","VertexData: ".concat(this.size," vertices total, realloc count ").concat(this.realloc_count)),this}}]),j}();gC.array_pool=[];var Fx=function(){function j($){F0(this,j),this.attribs=$,this.dynamic_attribs=this.attribs.filter(function(_f){return!_f.static}),this.components=[],this.index={},this.offset={};for(var _r=this.stride=0,_i=0,_s=0;_s<this.attribs.length;_s++){var ga=this.attribs[_s];if(ga.static==null){ga.offset=this.stride,ga.byte_size=ga.size;var _l=0;switch(ga.type){case I0.FLOAT:case I0.INT:case I0.UNSIGNED_INT:ga.byte_size*=4,_l=2;break;case I0.SHORT:case I0.UNSIGNED_SHORT:ga.byte_size*=2,_l=1}3&ga.byte_size&&(ga.byte_size+=4-(3&ga.byte_size)),this.stride+=ga.byte_size;for(var _c=ga.offset>>_l,_p=0;_p<ga.size;_p++)this.components.push({type:ga.type,shift:_l,offset:_c++,index:_i++});this.index[ga.name]=_r,_r+=ga.size,this.offset[ga.name]=ga.offset}else ga.static=Array.isArray(ga.static)?ga.static:[ga.static],ga.method="vertexAttrib".concat(ga.static.length,"fv")}}return H0(j,[{key:"enable",value:function($,_r,_i){for(var _s,ga,_l=0;_l<this.attribs.length;_l++)_s=this.attribs[_l],(ga=_r.attribute(_s.name).location)!==-1&&(_s.static==null?(j.enabled_attribs[ga]&&!_i||$.enableVertexAttribArray(ga),$.vertexAttribPointer(ga,_s.size,_s.type,_s.normalized,this.stride,_s.offset),j.enabled_attribs[ga]=_r):$[_s.method]instanceof Function&&($.enableVertexAttribArray(ga),$[_s.method](ga,_s.static),$.disableVertexAttribArray(ga),delete j.enabled_attribs[ga]));for(ga in j.enabled_attribs)this.disableUnusedAttribute($,ga,_r)}},{key:"disableUnusedAttribute",value:function($,_r,_i){j.enabled_attribs[_r]!==_i&&($.disableVertexAttribArray(_r),delete j.enabled_attribs[_r])}},{key:"createVertexData",value:function(){return new gC(this)}},{key:"getAddVertexFunction",value:function(){return this.addVertex==null&&this.createAddVertexFunction(),this.addVertex}},{key:"createAddVertexFunction",value:function(){var $=HT(JSON.stringify(this.attribs));if(j.add_vertex_funcs[$]==null){var _r,_i=["var t, o;"],_s=u1(this.components);_s.sort(function(_p,_f){return _p.type!==_f.type?_p.type-_f.type:_p.index-_f.index});for(var ga=0;ga<_s.length;ga++){var _l=_s[ga];_r!==_l.type&&(_i.push("t = vs[".concat(_l.type,"];")),_i.push("o = off".concat(_l.shift?" >> "+_l.shift:"",";")),_r=_l.type),_i.push("t[o + ".concat(_l.offset,"] = v[").concat(_l.index,"];"))}_i=_i.join(`
`);var _c=new Function("v","vs","off",_i);j.add_vertex_funcs[$]=_c}this.addVertex=j.add_vertex_funcs[$]}}]),j}();Fx.enabled_attribs={},Fx.add_vertex_funcs={};var aA=[{x:0,y:0},{x:Zy.tile_scale,y:-Zy.tile_scale}],pE=[0,0,1,1];function lA(j,$,_r){var _i=aA[0],_s=aA[1];return j[0]<=_i.x+_r&&$[0]<=_i.x+_r||j[0]>=_s.x-_r&&$[0]>=_s.x-_r||j[1]>=_i.y-_r&&$[1]>=_i.y-_r||j[1]<=_s.y+_r&&$[1]<=_s.y+_r}function Bx(j,$){$=$||0;var _r=aA[0],_i=aA[1];return j[0]<=_r.x+$||j[0]>=_i.x-$||j[1]>=_r.y-$||j[1]<=_i.y+$}var vC=HS;function HS(j,$,_r){_r=_r||2;var _i,_s,ga,_l,_c,_p,_f,ey=$&&$.length,iy=ey?$[0]*_r:j.length,ly=mC(j,0,iy,_r,!0),uy=[];if(!ly)return uy;if(ey&&(ly=function(yy,ay,by,Ey){var ky,Oy,Ty,Ly,Ny,Uy=[];for(ky=0,Oy=ay.length;ky<Oy;ky++)Ty=ay[ky]*Ey,Ly=ky<Oy-1?ay[ky+1]*Ey:yy.length,(Ny=mC(yy,Ty,Ly,Ey,!1))===Ny.next&&(Ny.steiner=!0),Uy.push(function(Xy){for(var Yy=Xy,Wy=Xy;Yy.x<Wy.x&&(Wy=Yy),Yy=Yy.next,Yy!==Xy;);return Wy}(Ny));for(Uy.sort(TO),ky=0;ky<Uy.length;ky++)(function(Xy,Yy){{var Wy;(Yy=function(_g,y0){var _m,s0=y0,R0=_g.x,Q0=_g.y,W0=-1/0;do{if(Q0<=s0.y&&Q0>=s0.next.y){var t1=s0.x+(Q0-s0.y)*(s0.next.x-s0.x)/(s0.next.y-s0.y);if(t1<=R0&&W0<t1){if((W0=t1)===R0){if(Q0===s0.y)return s0;if(Q0===s0.next.y)return s0.next}_m=s0.x<s0.next.x?s0:s0.next}}s0=s0.next}while(s0!==y0);if(!_m)return null;if(R0===W0)return _m.prev;var o1,A1=_m,j1=_m.x,Z0=_m.y,F1=1/0;for(s0=_m.next;s0!==A1;)R0>=s0.x&&s0.x>=j1&&uA(Q0<Z0?R0:W0,Q0,j1,Z0,Q0<Z0?W0:R0,Q0,s0.x,s0.y)&&((o1=Math.abs(Q0-s0.y)/(R0-s0.x))<F1||o1===F1&&s0.x>_m.x)&&sT(s0,_g)&&(_m=s0,F1=o1),s0=s0.next;return _m}(Xy,Yy))&&iT(Wy=bC(Yy,Xy),Wy.next)}})(Uy[ky],by),by=iT(by,by.next);return by}(j,$,ly,_r)),j.length>80*_r){_i=ga=j[0],_s=_l=j[1];for(var cy=_r;cy<iy;cy+=_r)(_c=j[cy])<_i&&(_i=_c),(_p=j[cy+1])<_s&&(_s=_p),ga<_c&&(ga=_c),_l<_p&&(_l=_p);_f=Math.max(ga-_i,_l-_s)}return oT(ly,uy,_r,_i,_s,_f),uy}function mC(j,$,_r,_i,_s){var ga,_l;if(_s===0<WS(j,$,_r,_i))for(ga=$;ga<_r;ga+=_i)_l=xC(ga,j[ga],j[ga+1],_l);else for(ga=_r-_i;$<=ga;ga-=_i)_l=xC(ga,j[ga],j[ga+1],_l);return _l&&b2(_l,_l.next)&&(aT(_l),_l=_l.next),_l}function iT(j,$){if(!j)return j;$=$||j;var _r,_i=j;do if(_r=!1,_i.steiner||!b2(_i,_i.next)&&T_(_i.prev,_i,_i.next)!==0)_i=_i.next;else{if(aT(_i),(_i=$=_i.prev)===_i.next)return null;_r=!0}while(_r||_i!==$);return $}function oT(j,$,_r,_i,_s,ga,_l){if(j){!_l&&ga&&function(ey,iy,ly,uy){for(var cy=ey;cy.z===null&&(cy.z=qS(cy.x,cy.y,iy,ly,uy)),cy.prevZ=cy.prev,cy.nextZ=cy.next,cy=cy.next,cy!==ey;);cy.prevZ.nextZ=null,cy.prevZ=null,function(yy){var ay,by,Ey,ky,Oy,Ty,Ly,Ny,Uy=1;do{for(by=yy,Oy=yy=null,Ty=0;by;){for(Ty++,Ey=by,ay=Ly=0;ay<Uy&&(Ly++,Ey=Ey.nextZ);ay++);for(Ny=Uy;0<Ly||0<Ny&&Ey;)Ly!==0&&(Ny===0||!Ey||by.z<=Ey.z)?(by=(ky=by).nextZ,Ly--):(Ey=(ky=Ey).nextZ,Ny--),Oy?Oy.nextZ=ky:yy=ky,ky.prevZ=Oy,Oy=ky;by=Ey}Oy.nextZ=null,Uy*=2}while(1<Ty)}(cy)}(j,_i,_s,ga);for(var _c,_p,_f=j;j.prev!==j.next;)if(_c=j.prev,_p=j.next,ga?function(ey,iy,ly,uy){var cy=ey.prev,yy=ey,ay=ey.next;if(0<=T_(cy,yy,ay))return!1;for(var by=cy.x<yy.x?cy.x<ay.x?cy.x:ay.x:yy.x<ay.x?yy.x:ay.x,Ey=cy.y<yy.y?cy.y<ay.y?cy.y:ay.y:yy.y<ay.y?yy.y:ay.y,ky=cy.x>yy.x?cy.x>ay.x?cy.x:ay.x:yy.x>ay.x?yy.x:ay.x,Oy=cy.y>yy.y?cy.y>ay.y?cy.y:ay.y:yy.y>ay.y?yy.y:ay.y,Ty=qS(by,Ey,iy,ly,uy),Ly=qS(ky,Oy,iy,ly,uy),Ny=ey.nextZ;Ny&&Ny.z<=Ly;){if(Ny!==ey.prev&&Ny!==ey.next&&uA(cy.x,cy.y,yy.x,yy.y,ay.x,ay.y,Ny.x,Ny.y)&&0<=T_(Ny.prev,Ny,Ny.next))return!1;Ny=Ny.nextZ}for(Ny=ey.prevZ;Ny&&Ny.z>=Ty;){if(Ny!==ey.prev&&Ny!==ey.next&&uA(cy.x,cy.y,yy.x,yy.y,ay.x,ay.y,Ny.x,Ny.y)&&0<=T_(Ny.prev,Ny,Ny.next))return!1;Ny=Ny.prevZ}return!0}(j,_i,_s,ga):function(ey){var iy=ey.prev,ly=ey,uy=ey.next;if(0<=T_(iy,ly,uy))return!1;for(var cy=ey.next.next;cy!==ey.prev;){if(uA(iy.x,iy.y,ly.x,ly.y,uy.x,uy.y,cy.x,cy.y)&&0<=T_(cy.prev,cy,cy.next))return!1;cy=cy.next}return!0}(j))$.push(_c.i/_r),$.push(j.i/_r),$.push(_p.i/_r),aT(j),j=_p.next,_f=_p.next;else if((j=_p)===_f){_l?_l===1?oT(j=function(ey,iy,ly){var uy=ey;do{var cy=uy.prev,yy=uy.next.next;!b2(cy,yy)&&_C(cy,uy,uy.next,yy)&&sT(cy,yy)&&sT(yy,cy)&&(iy.push(cy.i/ly),iy.push(uy.i/ly),iy.push(yy.i/ly),aT(uy),aT(uy.next),uy=ey=yy),uy=uy.next}while(uy!==ey);return uy}(j,$,_r),$,_r,_i,_s,ga,2):_l===2&&function(ey,iy,ly,uy,cy,yy){var ay=ey;do{for(var by=ay.next.next;by!==ay.prev;){if(ay.i!==by.i&&function(ky,Oy){return ky.next.i!==Oy.i&&ky.prev.i!==Oy.i&&!function(Ty,Ly){var Ny=Ty;do{if(Ny.i!==Ty.i&&Ny.next.i!==Ty.i&&Ny.i!==Ly.i&&Ny.next.i!==Ly.i&&_C(Ny,Ny.next,Ty,Ly))return!0;Ny=Ny.next}while(Ny!==Ty);return!1}(ky,Oy)&&sT(ky,Oy)&&sT(Oy,ky)&&function(Ty,Ly){for(var Ny=Ty,Uy=!1,Xy=(Ty.x+Ly.x)/2,Yy=(Ty.y+Ly.y)/2;Ny.y>Yy!=Ny.next.y>Yy&&Xy<(Ny.next.x-Ny.x)*(Yy-Ny.y)/(Ny.next.y-Ny.y)+Ny.x&&(Uy=!Uy),Ny=Ny.next,Ny!==Ty;);return Uy}(ky,Oy)}(ay,by)){var Ey=bC(ay,by);return ay=iT(ay,ay.next),Ey=iT(Ey,Ey.next),oT(ay,iy,ly,uy,cy,yy),oT(Ey,iy,ly,uy,cy,yy)}by=by.next}ay=ay.next}while(ay!==ey)}(j,$,_r,_i,_s,ga):oT(iT(j),$,_r,_i,_s,ga,1);break}}}function TO(j,$){return j.x-$.x}function qS(j,$,_r,_i,_s){return(j=1431655765&((j=858993459&((j=252645135&((j=16711935&((j=32767*(j-_r)/_s)|j<<8))|j<<4))|j<<2))|j<<1))|($=1431655765&(($=858993459&(($=252645135&(($=16711935&(($=32767*($-_i)/_s)|$<<8))|$<<4))|$<<2))|$<<1))<<1}function uA(j,$,_r,_i,_s,ga,_l,_c){return 0<=(_s-_l)*($-_c)-(j-_l)*(ga-_c)&&0<=(j-_l)*(_i-_c)-(_r-_l)*($-_c)&&0<=(_r-_l)*(ga-_c)-(_s-_l)*(_i-_c)}function T_(j,$,_r){return($.y-j.y)*(_r.x-$.x)-($.x-j.x)*(_r.y-$.y)}function b2(j,$){return j.x===$.x&&j.y===$.y}function _C(j,$,_r,_i){return b2(j,$)&&b2(_r,_i)||b2(j,_i)&&b2(_r,$)||0<T_(j,$,_r)!=0<T_(j,$,_i)&&0<T_(_r,_i,j)!=0<T_(_r,_i,$)}function sT(j,$){return T_(j.prev,j,j.next)<0?0<=T_(j,$,j.next)&&0<=T_(j,j.prev,$):T_(j,$,j.prev)<0||T_(j,j.next,$)<0}function bC(j,$){var _r=new $S(j.i,j.x,j.y),_i=new $S($.i,$.x,$.y),_s=j.next,ga=$.prev;return(j.next=$).prev=j,(_r.next=_s).prev=_r,(_i.next=_r).prev=_i,(ga.next=_i).prev=ga,_i}function xC(j,$,_r,_i){var _s=new $S(j,$,_r);return _i?(_s.next=_i.next,(_s.prev=_i).next.prev=_s,_i.next=_s):(_s.prev=_s).next=_s,_s}function aT(j){j.next.prev=j.prev,j.prev.next=j.next,j.prevZ&&(j.prevZ.nextZ=j.nextZ),j.nextZ&&(j.nextZ.prevZ=j.prevZ)}function $S(j,$,_r){this.i=j,this.x=$,this.y=_r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function WS(j,$,_r,_i){for(var _s=0,ga=$,_l=_r-_i;ga<_r;ga+=_i)_s+=(j[_l]-j[ga])*(j[ga+1]+j[_l+1]),_l=ga;return _s}HS.deviation=function(j,$,_r,_i){var _s=$&&$.length,ga=_s?$[0]*_r:j.length,_l=Math.abs(WS(j,0,ga,_r));if(_s)for(var _c=0,_p=$.length;_c<_p;_c++){var _f=$[_c]*_r,ey=_c<_p-1?$[_c+1]*_r:j.length;_l-=Math.abs(WS(j,_f,ey,_r))}for(var iy=0,_c=0;_c<_i.length;_c+=3){var ly=_i[_c]*_r,uy=_i[_c+1]*_r,cy=_i[_c+2]*_r;iy+=Math.abs((j[ly]-j[cy])*(j[1+uy]-j[1+ly])-(j[ly]-j[uy])*(j[1+cy]-j[1+ly]))}return _l===0&&iy===0?0:Math.abs((iy-_l)/_l)},HS.flatten=function(j){for(var $=j[0][0].length,_r={vertices:[],holes:[],dimensions:$},_i=0,_s=0;_s<j.length;_s++){for(var ga=0;ga<j[_s].length;ga++)for(var _l=0;_l<$;_l++)_r.vertices.push(j[_s][ga][_l]);0<_s&&(_i+=j[_s-1].length,_r.holes.push(_i))}return _r};var AO=[0,0,1];function wC(j,$,_r,_i){var _s,ga,_l,_c,_p,_f=_i.texcoord_index,ey=_i.texcoord_scale,iy=_i.texcoord_normalize,ly=$.vertex_elements;_f&&(iy=iy||1,ga=(_s=C0(ey||pE,4))[0],_l=_s[1],_c=_s[2],_p=_s[3]);for(var uy,cy=0,yy=j.length,ay=0;ay<yy;ay++){var by,Ey,ky,Oy,Ty,Ly=$.vertex_count,Ny=j[ay];_f&&(Ey=(by=C0(Zy.findBoundingBox(Ny),4))[0],ky=by[1],Oy=(_c-ga)/(by[2]-Ey),Ty=(_p-_l)/(by[3]-ky));for(var Uy=0;Uy<Ny.length;Uy++)for(var Xy=Ny[Uy],Yy=0;Yy<Xy.length;Yy++){var Wy=Xy[Yy];_r[0]=Wy[0],_r[1]=Wy[1],_f&&(_r[_f+0]=((Wy[0]-Ey)*Oy+ga)*iy,_r[_f+1]=((Wy[1]-ky)*Ty+_l)*iy),$.addVertex(_r)}for(var _g=(uy=vC.flatten(Ny),vC(uy.vertices,uy.holes,uy.dimensions)),y0=0;y0<_g.length;y0++)ly.push(Ly+_g[y0]);cy+=_g.length/3}return cy}var EC=`uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;attribute vec4 a_position;attribute vec4 a_color;
#ifdef TANGRAM_NORMAL_ATTRIBUTE
attribute vec3 a_normal;
#define TANGRAM_NORMAL a_normal
#else
#define TANGRAM_NORMAL vec3(0., 0., 1.)
#endif
#ifdef TANGRAM_EXTRUDE_LINES
attribute vec2 a_extrude;attribute vec2 a_offset;attribute vec2 a_scaling;uniform float u_v_scale_adjust;
#endif
varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;
#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)
attribute vec2 a_texcoord;varying vec2 v_texcoord;
#endif
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
varying vec4 v_modelpos_base_zoom;
#endif
#if defined(TANGRAM_LIGHTING_VERTEX)
varying vec4 v_lighting;
#endif
#define UNPACK_SCALING(x) (x / 1024.)
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: raster
#pragma tangram: global
void main(){
#pragma tangram: setup
#ifdef TANGRAM_TEXTURE_COORDS
v_texcoord=a_texcoord;
#ifdef TANGRAM_EXTRUDE_LINES
v_texcoord.y*=u_v_scale_adjust;
#endif
#endif
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
v_modelpos_base_zoom=modelPositionBaseZoom();
#endif
vec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.);
#ifdef TANGRAM_EXTRUDE_LINES
vec2 extrude=a_extrude.xy;vec2 offset=a_offset.xy;float dz=clamp(u_map_position.z-u_tile_origin.z,0.,4.);dz+=step(1.,dz)*(1.-dz)+mix(0.,2.,clamp((dz-2.)/2.,0.,1.));float mdz=(dz-0.5)*2.;extrude-=extrude*UNPACK_SCALING(a_scaling.x)*mdz;float dwdz=UNPACK_SCALING(a_scaling.y);float sdwdz=sign(step(0.,dwdz)-0.5);offset-=offset*abs(dwdz)*((1.-step(0.,sdwdz))-(dz*-sdwdz));float ssz=exp2(-dz-(u_tile_origin.z-u_tile_origin.w));extrude*=ssz;offset*=ssz;
#ifdef TANGRAM_BLOCK_WIDTH
float width=1.;
#pragma tangram: width
extrude*=width;
#endif
position.xy+=extrude+offset;
#endif
v_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;
#pragma tangram: position
v_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);v_color=a_color;
#if defined(TANGRAM_LIGHTING_VERTEX)
vec3 normal=v_normal;
#pragma tangram: normal
v_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));
#endif
cameraProjection(position);applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);
#if defined(SNAP_TO_PIXEL_GRID)
snapToPixelGrid(position);
#endif
gl_Position=position;}`,kC=`uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;
#ifdef TANGRAM_EXTRUDE_LINES
uniform bool u_has_line_texture;uniform sampler2D u_texture;uniform float u_texture_ratio;uniform vec4 u_dash_background_color;
#endif
#define TANGRAM_NORMAL v_normal
#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)
varying vec2 v_texcoord;
#endif
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
varying vec4 v_modelpos_base_zoom;
#endif
#if defined(TANGRAM_LIGHTING_VERTEX)
varying vec4 v_lighting;
#endif
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: raster
#pragma tangram: global
#pragma tangram: utils
void main(void){
#pragma tangram: setup
vec4 color=v_color;vec3 normal=TANGRAM_NORMAL;
#ifdef TANGRAM_CROP_BY_TILE
if(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}
#endif
#ifdef TANGRAM_RASTER_TEXTURE_COLOR
color*=sampleRaster();
#endif
#ifdef TANGRAM_EXTRUDE_LINES
if(u_has_line_texture){vec2 _line_st=vec2(v_texcoord.x,fract(v_texcoord.y/u_texture_ratio));vec4 _line_color=texture2D(u_texture,_line_st);if(_line_color.a<TANGRAM_ALPHA_TEST){
#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY)
if(u_dash_background_color.a==0.){discard;}color=u_dash_background_color;
#else
color=vec4(u_dash_background_color.rgb,color.a*step(TANGRAM_EPSILON,u_dash_background_color.a));
#endif
}else{color*=_line_color;}}
#endif
#ifdef TANGRAM_RASTER_TEXTURE_NORMAL
normal=normalize(sampleRaster().rgb*2.-1.);
#endif
#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)
calculateNormal(normal);
#endif
#if !defined(TANGRAM_LIGHTING_VERTEX)
#pragma tangram: normal
#endif
#pragma tangram: color
#if defined(TANGRAM_LIGHTING_FRAGMENT)
color=calculateLighting(v_position.xyz-u_eye,normal,color);
#elif defined(TANGRAM_LIGHTING_VERTEX)
color*=v_lighting;
#endif
#pragma tangram: filter
gl_FragColor=color;}`,fE=Object.create(N1);Object.assign(fE,{name:"polygons",built_in:!0,vertex_shader_src:EC,fragment_shader_src:kC,selection:!0,init:function(){N1.init.apply(this,arguments),this.defines.TANGRAM_NORMAL_ATTRIBUTE=!0,this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.texcoords&&(this.defines.TANGRAM_TEXTURE_COORDS=!0)},vertexLayoutForMeshVariant:function(){var j;return this.vertex_layout||(j=[{name:"a_position",size:4,type:I0.SHORT,normalized:!1},{name:"a_normal",size:3,type:I0.BYTE,normalized:!0},{name:"a_color",size:4,type:I0.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:I0.UNSIGNED_BYTE,normalized:!0}],this.texcoords&&j.push({name:"a_texcoord",size:2,type:I0.UNSIGNED_SHORT,normalized:!0}),this.vertex_layout=new Fx(j)),this.vertex_layout},_parseFeature:function(j,$,_r){var _i=this.feature_style;return _i.color=this.parseColor($.color,_r),_i.color?(_i.z=$.z&&Gy.evalCachedDistanceProperty($.z,_r)||Gy.defaults.z,_i.z*=Zy.height_scale,_i.extrude=Gy.evalProperty($.extrude,_r),_i.extrude&&(_i.extrude===!0?(_i.height=j.properties.height!==void 0?j.properties.height:Gy.defaults.height,_i.min_height=j.properties.min_height!==void 0?j.properties.min_height:Gy.defaults.min_height):typeof _i.extrude=="number"?(_i.height=_i.extrude,_i.min_height=0):Array.isArray(_i.extrude)&&(_i.min_height=_i.extrude[0],_i.height=_i.extrude[1]),_i.height*=Zy.height_scale,_i.min_height*=Zy.height_scale),_i.tile_edges=$.tile_edges,_i):null},_preprocess:function(j){return j.color=Gy.createColorPropertyCache(j.color),j.z=Gy.createPropertyCache(j.z,Gy.parseUnits),j},makeVertexTemplate:function(j){var $=0;return this.vertex_template[$++]=0,this.vertex_template[$++]=0,this.vertex_template[$++]=j.z||0,this.vertex_template[$++]=this.scaleOrder(j.order),this.vertex_template[$++]=0,this.vertex_template[$++]=0,this.vertex_template[$++]=127,this.vertex_template[$++]=255*j.color[0],this.vertex_template[$++]=255*j.color[1],this.vertex_template[$++]=255*j.color[2],this.vertex_template[$++]=255*j.color[3],this.selection&&(this.vertex_template[$++]=255*j.selection_color[0],this.vertex_template[$++]=255*j.selection_color[1],this.vertex_template[$++]=255*j.selection_color[2],this.vertex_template[$++]=255*j.selection_color[3]),this.texcoords&&(this.vertex_template[$++]=0,this.vertex_template[$++]=0),this.vertex_template},buildPolygons:function(j,$,_r,_i){var _s=this.makeVertexTemplate($),ga={texcoord_index:this.vertex_layout.index.a_texcoord,texcoord_normalize:65535,remove_tile_edges:!$.tile_edges,tile_edge_tolerance:Zy.tile_scale*_i.tile.pad_scale*4,winding:_i.winding};return $.extrude&&$.height?function(_l,_c,_p,_f,ey,iy,ly,uy,cy){var yy=cy.remove_tile_edges,ay=cy.tile_edge_tolerance,by=cy.texcoord_index,Ey=cy.texcoord_scale,ky=cy.texcoord_normalize,Oy=cy.winding,Ty=_c+(_f||0),Ly=_c+_p;iy[2]=Ly;var Ny,Uy,Xy,Yy,Wy,_g,y0=wC(_l,ey,iy,{texcoord_index:by,texcoord_scale:Ey,texcoord_normalize:ky}),_m=ey.vertex_elements,s0=ey.vertex_count;by&&(ky=ky||1,Uy=(Ny=C0(Ey||pE,4))[0],Xy=Ny[1],Yy=Ny[2],_g=[[Uy,Wy=Ny[3]],[Uy,Xy],[Yy,Xy],[Yy,Wy]]);for(var R0=_l.length,Q0=0;Q0<R0;Q0++)for(var W0=_l[Q0],t1=0;t1<W0.length;t1++)for(var o1=W0[t1],A1=0;A1<o1.length-1;A1++)if(!yy||!lA(o1[A1],o1[A1+1],ay)){var j1=void 0,Z0=void 0,F1=[[o1[Z0=Oy==="CCW"?(j1=A1)+1:(j1=A1+1,A1)][0],o1[Z0][1],Ly],[o1[Z0][0],o1[Z0][1],Ty],[o1[j1][0],o1[j1][1],Ty],[o1[j1][0],o1[j1][1],Ly]],B_=x0.normalize([o1[Z0][0]-o1[j1][0],o1[Z0][1]-o1[j1][1],0]),e_=x0.cross(AO,B_);iy[ly+0]=e_[0]*uy,iy[ly+1]=e_[1]*uy,iy[ly+2]=e_[2]*uy;for(var u_=0;u_<F1.length;u_++)iy[0]=F1[u_][0],iy[1]=F1[u_][1],iy[2]=F1[u_][2],by&&(iy[by+0]=_g[u_][0]*ky,iy[by+1]=_g[u_][1]*ky),ey.addVertex(iy);_m.push(s0+0),_m.push(s0+1),_m.push(s0+2),_m.push(s0+2),_m.push(s0+3),_m.push(s0+0),s0+=4,y0+=2}return y0}(j,$.z,$.height,$.min_height,_r.vertex_data,_s,this.vertex_layout.index.a_normal,127,ga):wC(j,_r.vertex_data,_s,ga)}});var SO=[0,0],dE={butt:0,square:1,round:2},X_={miter:0,bevel:1,round:2},lT={MITER_LIMIT:3,TEXCOORD_NORMALIZE:1,TEXCOORD_RATIO:1,MIN_FAN_WIDTH:5},CO=Zy.tile_scale,x2=[0,0],w2=[1,0],YS=[.5,0];function TC(j,$){if(!(j.length<2)){var _r,_i,_s=$.join_type,ga=$.cap_type,_l=$.closed_polygon,_c=$.remove_tile_edges,_p=$.tile_edge_tolerance,_f=$.v_scale,ey=$.miter_len_sq,iy=$.crop_by_tile,ly=$.texcoord_index!=null,uy=0;if(_l&&_s===X_.miter){var cy=function(Yy){if(Bx(Yy[0]))return 0;for(var Wy=0;Wy<Yy.length;Wy++)if(Bx(Yy[Yy.length-1-Wy]))return Yy.length-1-Wy;return 0}(j);if(cy!==0){var yy=function(Yy,Wy){for(var _g=[],y0=0;y0<Yy.length;y0++){var _m=(y0+Wy)%Yy.length;_m!=0&&_g.push(Yy[_m])}return _g.push(_g[0]),_g}(j,cy);return $.extra_lines=$.extra_lines||[],void $.extra_lines.push(yy)}}var ay=0,by=j.length-1,Ey=0;for(Ny=j[ay],Uy=j[ay+1];x0.isEqual(Ny,Uy);)if(Ny=Uy,Uy=j[++ay+1],Ey++,ay===j.length-1)return;for(;x0.isEqual(j[by],j[by-1]);)if(Ey++,--by===0)return;if(!(j.length<2+Ey))if(_i=x0.normalize(x0.perp(Ny,Uy)),_c&&lA(Ny,Uy,_p)){var ky=AC(j,ay,_p);ky&&($.extra_lines=$.extra_lines||[],$.extra_lines.push(ky))}else{_l?function(Yy,Wy,_g,y0,_m){y0===void 0||Bx(Yy)&&!_m.crop_by_tile?(d1(Yy,_g,_g,1,0,_m,1),d1(Yy,_g,_g,0,0,_m,-1)):y0===X_.miter?SC(0,Yy,Wy,_g,_m.miter_len_sq,!0,_m):XS(y0,0,Yy,Wy,_g,!0,_m)}(Ny,_r=x0.normalize(x0.perp(j[by-1],Ny)),_i,_s,$):(!iy&&Bx(Ny)||(CC(Ny,uy,_i,ga,!0,$),ly&&ga!==dE.butt&&(uy+=.5*_f*$.texcoord_width)),d1(Ny,_i,_i,1,uy,$,1),d1(Ny,_i,_i,0,uy,$,-1)),ly&&(uy+=_f*x0.length(x0.sub(Uy,Ny)));for(var Oy=ay+1;Oy<by;Oy++){var Ty=Oy,Ly=Oy+1,Ny=j[Ty],Uy=j[Ly];if(!x0.isEqual(Ny,Uy)){if(_c&&lA(Ny,Uy,_p)){d1(Ny,_i,_i,1,uy,$,1),d1(Ny,_i,_i,0,uy,$,-1),E2(1,$);var Xy=AC(j,Ty+1,_p);return void(Xy&&($.extra_lines=$.extra_lines||[],$.extra_lines.push(Xy)))}_r=_i,_i=x0.normalize(x0.perp(Ny,Uy)),_s===X_.miter?SC(uy,Ny,_r,_i,ey,!1,$):XS(_s,uy,Ny,_r,_i,!1,$),ly&&(uy+=_f*x0.length(x0.sub(Uy,Ny)))}}Ny=Uy,_r=_i,_l?function(Yy,Wy,_g,y0,_m,s0){{var R0;Bx(Yy)&&!s0.crop_by_tile?(d1(Yy,Wy,Wy,1,_m,s0,1),d1(Yy,Wy,Wy,0,_m,s0,-1)):(R0=KS(Wy,_g),y0===X_.miter&&x0.lengthSq(R0)>s0.miter_len_sq&&(y0=X_.bevel),y0===X_.miter?(d1(Yy,R0,Wy,1,_m,s0,1),d1(Yy,R0,Wy,0,_m,s0,-1)):(d1(Yy,Wy,Wy,1,_m,s0,1),d1(Yy,Wy,Wy,0,_m,s0,-1))),E2(1,s0)}}(Ny,_r,_i=x0.normalize(x0.perp(Ny,j[1])),_s,uy,$):(d1(Ny,_r,_i,1,uy,$,1),d1(Ny,_r,_i,0,uy,$,-1),E2(1,$),!iy&&Bx(Ny)||CC(Ny,uy,_r,ga,!1,$))}}}function AC(j,$,_r){for(var _i=$;j[_i+1]&&lA(j[_i],j[_i+1],_r);)_i++;return 2<=j.length-_i&&j.slice(_i)}function KS(j,$){var _r=x0.normalize(x0.add(j,$)),_i=2/(1+Math.abs(x0.dot(j,_r)));return x0.mult(_r,_i*_i)}function SC(j,$,_r,_i,_s,ga,_l){var _c=KS(_r,_i);x0.lengthSq(_c)>_s?XS(X_.bevel,j,$,_r,_i,ga,_l):(d1($,_c,_c,1,j,_l,1),d1($,_c,_c,0,j,_l,-1),ga||E2(1,_l))}function XS(j,$,_r,_i,_s,ga,_l){var _c=KS(_i,_s),_p=0<_s[0]*_i[1]-_s[1]*_i[0];_l.texcoord_index!=null&&(x2[1]=$,w2[1]=$),_p?(d1(_r,_c,_c,1,$,_l,1),d1(_r,_i,_c,0,$,_l,-1),ga||E2(1,_l),ZS(_r,x0.neg(_i),_c,x0.neg(_s),_c,x2,w2,x2,!1,j===X_.bevel,_l),d1(_r,_c,_c,1,$,_l,1),d1(_r,_s,_c,0,$,_l,-1)):(d1(_r,_i,_c,1,$,_l,1),d1(_r,_c,_c,0,$,_l,-1),ga||E2(1,_l),ZS(_r,_i,x0.neg(_c),_s,_c,w2,x2,w2,!1,j===X_.bevel,_l),d1(_r,_s,_c,1,$,_l,1),d1(_r,_c,_c,0,$,_l,-1))}function E2(j,$){for(var _r=$.vertex_data.vertex_elements,_i=$.vertex_data.vertex_count-2*j-2,_s=0;_s<j;_s++)_r.push(_i+2*_s+2),_r.push(_i+2*_s+1),_r.push(_i+2*_s),_r.push(_i+2*_s+2),_r.push(_i+2*_s+3),_r.push(_i+2*_s+1),$.geom_count+=2}function d1(j,$,_r,_i,_s,ga,_l){var _c=ga.vertex_template,_p=ga.vertex_data;_c[0]=j[0],_c[1]=j[1];var _f=ga.half_width*_l;_c[ga.extrude_index+0]=$[0]*_f,_c[ga.extrude_index+1]=$[1]*_f,ga.offset&&(_c[ga.offset_index+0]=_r[0]*ga.offset,_c[ga.offset_index+1]=_r[1]*ga.offset),ga.texcoord_index!=null&&(_c[ga.texcoord_index+0]=_i*ga.texcoord_normalize,_c[ga.texcoord_index+1]=_s*ga.texcoord_normalize),_p.addVertex(_c)}var k2=[0,0];function ZS(j,$,_r,_i,_s,ga,_l,_c,_p,_f,ey){for(var iy=$[0]*_i[1]-$[1]*_i[0],ly=x0.dot($,_i),uy=Math.atan2(iy,ly);uy>=Math.PI;)uy-=2*Math.PI;if(_f)cy=1;else{var cy=function(Yy,Wy){Yy<0&&(Yy=-Yy);var _g=Wy>2*lT.MIN_FAN_WIDTH?Math.log2(Wy/lT.MIN_FAN_WIDTH):1;return Math.ceil(Yy/Math.PI*_g)}(uy,ey.half_width);if(cy<1)return}var yy=ey.vertex_data.vertex_count,ay=ey.vertex_data.vertex_elements;d1(j,_r,_s,_l[0],_l[1],ey,1),d1(j,$,_s,ga[0],ga[1],ey,1);var by,Ey,ky=$,Oy=ey.texcoord_index!=null;Oy&&(_p?by=x0.sub(ga,_l):(k2=x0.copy(ga),Ey=x0.div(x0.sub(_c,ga),cy)));for(var Ty,Ly=uy/cy,Ny=uy<0?-1:1,Uy=0<iy?(Ty=2,1):(Ty=1,2),Xy=0;Xy<cy;Xy++)Xy===0&&uy<0&&(ky=x0.neg(ky)),ky=x0.rot(ky,Ly),Oy&&(_p?(by=x0.rot(by,Ly),k2[0]=by[0]+_l[0],k2[1]=by[1]*ey.texcoord_width*ey.v_scale+_l[1]):k2=x0.add(k2,Ey)),d1(j,ky,_s,k2[0],k2[1],ey,Ny),ay.push(yy+Xy+Ty),ay.push(yy),ay.push(yy+Xy+Uy)}function CC(j,$,_r,_i,_s,ga){var _l,_c=x0.neg(_r),_p=ga.texcoord_index!=null;switch(_i){case dE.square:_s?(_l=[_r[1],-_r[0]],d1(j,x0.add(_r,_l),_r,1,$,ga,1),d1(j,x0.add(_c,_l),_r,0,$,ga,1),_p&&($+=.5*ga.texcoord_width*ga.v_scale),d1(j,_r,_r,1,$,ga,1),d1(j,_c,_r,0,$,ga,1)):(_l=[-_r[1],_r[0]],d1(j,_r,_r,1,$,ga,1),d1(j,_c,_r,0,$,ga,1),_p&&($+=.5*ga.texcoord_width*ga.v_scale),d1(j,x0.add(_r,_l),_r,1,$,ga,1),d1(j,x0.add(_c,_l),_r,0,$,ga,1)),E2(1,ga);break;case dE.round:var _f,ey,iy=x2,ly=w2,uy=YS;_s?(_f=_r,ey=_c,_p&&($+=.5*ga.texcoord_width*ga.v_scale,iy=w2,ly=x2,uy=YS)):(_f=_c,ey=_r),_p&&(x2[1]=$,w2[1]=$,YS[1]=$),ZS(j,_f,SO,ey,_r,iy,uy,ly,!0,!1,ga);break;case dE.butt:return}}var MO=[255,255,255,255],IO=[0,0,0,0],Z_=Object.create(N1);Z_.vertex_layouts=[[],[]],Z_.dash_textures={};function OO(j,$,_r,_i,_s,ga){for(var _l={closed:ga,vertex_data:_r,vertex_template:_i,half_width:$/2,vertex_layout_index:_s,geom_count:0},_c=0,_p=j.length;_c<_p;_c++)(function(_f,ey){if(!(_f.length<2)){for(var iy=[_f[0]],ly=0,uy=[],cy=[],yy=1,ay=_f.length;yy<ay;yy++){var by,Ey;_f[yy][0]===_f[yy-1][0]&&_f[yy][1]===_f[yy-1][1]||(iy.push(_f[yy]),by=x0.sub(_f[yy],_f[yy-1]),Ey=x0.length(by),uy.push(by),cy.push([ly,ly+Ey]),ly+=Ey)}if(!(iy.length<2)){var ky=0,Oy=uy[uy.length-1],Ty=uy[0],Ly=uy[1],Ny=[0,0];2<iy.length&&(ey.closed&&(Ny[0]=x0.signedAngleBetween(Oy,Ty)),Ny[1]=x0.signedAngleBetween(Ty,Ly));var Uy=iy[0],Xy=cy[0];ey.closed?(J_(Uy,ey,ky++,Xy,ly,Ny,[Oy,Ty]),J_(Uy,ey,ky++,Xy,ly,Ny,[Oy,Ty])):(J_(Uy,ey,ky++,Xy,ly,Ny,[Ty,Ty]),J_(Uy,ey,ky++,Xy,ly,Ny,[Ty,Ty]));for(var Yy=1,Wy=iy.length-1;Yy<Wy;Yy++)Uy=iy[Yy],Oy=uy[Yy-1],Ty=uy[Yy],Ly=uy[Yy+1],Xy=cy[Yy-1],J_(Uy,ey,ky++,Xy,ly,Ny,[Oy,Ty]),J_(Uy,ey,ky++,Xy,ly,Ny,[Oy,Ty]),MC(ey),Xy=cy[Yy],Ny[0]=Ny[1],Ny[1]=Yy!==Wy-1?x0.signedAngleBetween(Ty,Ly):ey.closed?x0.signedAngleBetween(Ty,uy[0]):0,J_(Uy,ey,ky++,Xy,ly,Ny,[Oy,Ty]),J_(Uy,ey,ky++,Xy,ly,Ny,[Oy,Ty]);Uy=iy[iy.length-1],Xy=cy[cy.length-1],Ty=uy[uy.length-1],ey.closed?(J_(Uy,ey,ky++,Xy,ly,Ny,[Ty,uy[0]]),J_(Uy,ey,ky++,Xy,ly,Ny,[Ty,uy[0]])):(J_(Uy,ey,ky++,Xy,ly,Ny,[Ty,Ty]),J_(Uy,ey,ky++,Xy,ly,Ny,[Ty,Ty])),MC(ey)}}})(j[_c],_l);return _l.geom_count}function MC(j){var $=j.vertex_data.vertex_elements,_r=j.vertex_data.vertex_count-4;$.push(2+_r),$.push(1+_r),$.push(_r),$.push(2+_r),$.push(3+_r),$.push(1+_r),j.geom_count+=2}Object.assign(Z_,{name:"lines",built_in:!0,vertex_shader_src:EC,fragment_shader_src:kC,selection:!0,init:function(){N1.init.apply(this,arguments),this.styles=this.styles||{},this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_EXTRUDE_LINES=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_TEXTURE_COORDS=!0,this.outline_feature_style={},this.inline_feature_style=this.feature_style},calcDistance:function(j,$){return j&&Gy.evalCachedDistanceProperty(j,$)||0},calcDistanceNextZoom:function(j,$){$.zoom++;var _r=this.calcDistance(j,$);return $.zoom--,_r},calcWidth:function(j,$,_r){var _i=this.calcDistance(j.width,_r);if(!(_i<0)){var _s,ga=j.next_width?this.calcDistanceNextZoom(j.next_width,_r):_i/2;return _i===0&&ga===0||ga<0?!1:($.width_unscaled=_i,$.next_width_unscaled=ga,j.next_width?(_s=.5*(_i+(ga*=2)),$.width=_s*_r.units_per_meter_overzoom,$.width_scale=1-ga/_s):($.width=_i*_r.units_per_meter_overzoom,$.width_scale=0),j.texcoords&&(j.inline_texcoord_width?$.texcoord_width=j.inline_texcoord_width:$.texcoord_width=($.width_unscaled||$.next_width_unscaled)*_r.units_per_meter_overzoom/_r.tile.overzoom2),!0)}},calcOffset:function(j,$,_r){var _i,_s;j.offset_precalc?($.offset=j.offset_precalc,$.offset_scale=j.offset_scale_precalc):j.offset?(_i=this.calcDistance(j.offset,_r),j.next_offset?(_s=2*this.calcDistanceNextZoom(j.next_offset,_r),Math.abs(_i)>=Math.abs(_s)?($.offset=_i*_r.units_per_meter_overzoom,$.offset_scale=_i!==0?1-_s/_i:0):($.offset=_s*_r.units_per_meter_overzoom,$.offset_scale=_s!=0?-1*(1-_i/_s):0)):($.offset=_i*_r.units_per_meter_overzoom,$.offset_scale=0)):($.offset=0,$.offset_scale=0),Gy.evalProperty(j.offset_reverse,_r)&&($.offset*=-1)},_parseFeature:function(j,$,_r){var _i,_s,ga=this.feature_style;if(this.calcWidth($,ga,_r)!==!1&&(this.calcOffset($,ga,_r),ga.color=this.parseColor($.color,_r),ga.color))return ga.variantKey=$.variantKey,ga.z=$.z&&Gy.evalCachedDistanceProperty($.z||0,_r)||Gy.defaults.z,ga.height=j.properties.height||Gy.defaults.height,ga.extrude=Gy.evalProperty($.extrude,_r),ga.extrude&&(typeof ga.extrude=="number"?ga.height=ga.extrude:Array.isArray(ga.extrude)&&(ga.height=ga.extrude[1])),ga.extrude&&ga.height&&(ga.z+=ga.height),ga.z*=Zy.height_scale,ga.height*=Zy.height_scale,ga.cap=Gy.evalProperty($.cap,_r),ga.join=Gy.evalProperty($.join,_r),ga.miter_limit=Gy.evalProperty($.miter_limit,_r),ga.tile_edges=$.tile_edges,ga.outline=ga.outline||{width:{},next_width:{},preprocessed:!0},$.outline&&$.outline.visible!==!1&&$.outline.color&&$.outline.width?(_i=2*this.calcDistance($.outline.width,_r),_s=2*this.calcDistanceNextZoom($.outline.next_width,_r),_i==0&&_s==0||_i<0||_s<0?(ga.outline.width.value=null,ga.outline.next_width.value=null,ga.outline.color=null,ga.outline.inline_texcoord_width=null,ga.outline.texcoords=!1):(ga.outline.width.value=_i+ga.width_unscaled,ga.outline.next_width.value=_s+ga.next_width_unscaled,ga.outline.inline_texcoord_width=ga.texcoord_width,ga.outline.offset_precalc=ga.offset,ga.outline.offset_scale_precalc=ga.offset_scale,ga.outline.color=$.outline.color,ga.outline.cap=$.outline.cap,ga.outline.join=$.outline.join,ga.outline.miter_limit=$.outline.miter_limit,ga.outline.texcoords=$.outline.texcoords,ga.outline.style=$.outline.style,ga.outline.variantKey=$.outline.variantKey,$.outline.order?ga.outline.order=this.parseOrder($.outline.order,_r):ga.outline.order=ga.order,ga.outline.order>ga.order&&(ga.outline.order=ga.order),ga.outline.order-=.5,ga.outline.variant_order=0)):(ga.outline.width.value=null,ga.outline.next_width.value=null,ga.outline.color=null,ga.outline.inline_texcoord_width=null),ga},_preprocess:function(j,$){var _r,_i=this.sources[$]?this.sources[$].config.uid:"";return j.color=Gy.createColorPropertyCache(j.color),j.width=Gy.createPropertyCache(j.width,Gy.parseUnits),j.width&&j.width.type!==Gy.CACHE_TYPE.STATIC&&(j.next_width=Gy.createPropertyCache(j.width,Gy.parseUnits)),j.offset=j.offset&&Gy.createPropertyCache(j.offset,Gy.parseUnits),j.offset&&j.offset.type!==Gy.CACHE_TYPE.STATIC&&(j.next_offset=Gy.createPropertyCache(j.offset,Gy.parseUnits)),j.z=Gy.createPropertyCache(j.z,Gy.parseUnits),j.dash=j.dash!==void 0?j.dash:this.dash,j.dash_key=j.dash&&this.dashTextureKey(j.dash,_i),j.dash_background_color=j.dash_background_color!==void 0?j.dash_background_color:this.dash_background_color,j.dash_background_color=j.dash_background_color&&Gy.parseColor(j.dash_background_color),j.texture_merged=j.dash_key||(j.texture!==void 0?j.texture:this.texture),j.texcoords=this.texcoords||j.texture_merged?1:0,this.addMeshVariantForDraw(this.base,j),j.outline&&(j.outline.style=j.outline.style||this.name,j.outline.color=Gy.createColorPropertyCache(j.outline.color),j.outline.width=Gy.createPropertyCache(j.outline.width,Gy.parseUnits),j.outline.next_width=Gy.createPropertyCache(j.outline.width,Gy.parseUnits),j.outline.cap=j.outline.cap||j.cap,j.outline.join=j.outline.join||j.join,j.outline.miter_limit=j.outline.miter_limit||j.miter_limit,j.outline.offset=j.offset,(_r=this.styles[j.outline.style])?(j.outline.dash=j.outline.dash!==void 0?j.outline.dash:_r.dash,j.outline.texture=j.outline.texture!==void 0?j.outline.texture:_r.texture,j.outline.dash!=null?(j.outline.dash_key=j.outline.dash&&this.dashTextureKey(j.outline.dash,_i),j.outline.texture_merged=j.outline.dash_key):j.outline.dash===null||j.outline.texture!=null?(j.outline.dash_key=null,j.outline.texture_merged=j.outline.texture):(j.outline.dash=j.dash,j.outline.dash_key=j.outline.dash&&this.dashTextureKey(j.outline.dash,_i),j.outline.texture_merged=j.outline.dash_key),j.outline.dash_background_color=j.outline.dash_background_color!==void 0?j.outline.dash_background_color:_r.dash_background_color,j.outline.dash_background_color=j.outline.dash_background_color!==void 0?j.outline.dash_background_color:j.dash_background_color,j.outline.dash_background_color=j.outline.dash_background_color&&Gy.parseColor(j.outline.dash_background_color),j.outline.texcoords=_r.texcoords||j.outline.texture_merged?1:0,this.addMeshVariantForDraw(this.base,j.outline)):(o0({level:"warn",once:!0},"Layer '".concat(j.layers[j.layers.length-1],"': ")+"line 'outline' specifies non-existent draw style '".concat(j.outline.style,"' (or maybe the style is ")+"defined but is missing a 'base' or has another error), skipping outlines in layer"),j.outline=null)),j},dashTextureKey:function(j,$){return"__dash_"+$+"_"+this.scene_id+"_"+JSON.stringify(j)},getDashTexture:function(j,$){var _r,_i=this.dashTextureKey(j,this.sources[$].config.uid);Z_.dash_textures[_i]==null&&(Z_.dash_textures[_i]=!0,_r=function(_s,ga){var _l=1<arguments.length&&ga!==void 0?ga:{},_c=_l.dash_color||MO,_p=_l.background_color||IO,_f=_s,ey=_l.scale||1;_f.length%2==1&&Array.prototype.push.apply(_f,_f);for(var iy=!0,ly=[],uy=0;uy<_f.length;uy++){for(var cy=Math.floor(_f[uy]*ey),yy=0;yy<cy;yy++)Array.prototype.push.apply(ly,iy?_c:_p);iy=!iy}return{pixels:ly=new Uint8Array(ly),length:ly.length/4}}(j,{scale:20}),this.textureManager.create(this.gl,_i,{data:_r.pixels,height:_r.length,width:1,filtering:"nearest"}))},endData:function(j){var $=this;return N1.endData.call(this,j).then(function(_r){if(_r){_r.uniforms.u_has_line_texture=!1,_r.uniforms.u_texture=$.textureManager.default,_r.uniforms.u_v_scale_adjust=Zy.tile_scale;var _i=[];for(var _s in _r.meshes)(function(ga){var _l,_c,_p=_r.meshes[ga].variant;_p.texture&&((_l=_r.meshes[ga].uniforms=_r.meshes[ga].uniforms||{}).u_has_line_texture=!0,_l.u_texture=_p.texture,_l.u_texture_ratio=1,_p.dash&&(_l.u_v_scale_adjust=20*Zy.tile_scale,_l.u_dash_background_color=_p.dash_background_color||[0,0,0,0]),_p.dash_key&&Z_.dash_textures[_p.dash_key]==null&&(Z_.dash_textures[_p.dash_key]=!0,S0.postMessage($.main_thread_target+".getDashTexture",_p.dash,j.source)),$.textureManager.textures[_p.texture]==null?_i.push($.textureManager.syncTexturesToWorker([_p.texture]).then(function(_f){var ey=_f[_p.texture];ey&&(_l.u_texture_ratio=ey.height/ey.width)})):(_c=$.textureManager.textures[_p.texture],_l.u_texture_ratio=_c.height/_c.width))})(_s);return j.mesh_data[$.name]=_r,Promise.all(_i).then(function(){return _r})}return _r})},computeVariantForDraw:function(j){var $=j.offset?1:0;return j.dash_key&&($+=j.dash_key,j.dash_background_color&&($+=j.dash_background_color)),j.texture_merged&&($+=j.texture_merged),$=HT($+="/"+j.texcoords),{key:j.variantKey=$,order:j.variant_order,offset:j.offset?1:0,texcoords:j.texcoords,texture:j.texture_merged,dash:j.dash,dash_key:j.dash_key,dash_background_color:j.dash_background_color}},vertexLayoutForMeshVariant:function(j){var $;return Z_.vertex_layouts[j.key]==null&&($=[{name:"a_position",size:4,type:I0.SHORT,normalized:!1},{name:"a_extrude",size:2,type:I0.SHORT,normalized:!1},{name:"a_offset",size:2,type:I0.SHORT,normalized:!1,static:j.offset?null:[0,0]},{name:"a_scaling",size:2,type:I0.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:I0.UNSIGNED_SHORT,normalized:!0,static:j.texcoords?null:[0,0]},{name:"a_color",size:4,type:I0.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:I0.UNSIGNED_BYTE,normalized:!0}],Z_.vertex_layouts[j.key]=new Fx($)),Z_.vertex_layouts[j.key]},makeVertexTemplate:function(j,$){var _r=0;return this.vertex_template[_r++]=0,this.vertex_template[_r++]=0,this.vertex_template[_r++]=j.z||0,this.vertex_template[_r++]=this.scaleOrder(j.order),this.vertex_template[_r++]=0,this.vertex_template[_r++]=0,$.variant.offset&&(this.vertex_template[_r++]=0,this.vertex_template[_r++]=0),this.vertex_template[_r++]=1024*j.width_scale,this.vertex_template[_r++]=1024*j.offset_scale,$.variant.texcoords&&(this.vertex_template[_r++]=0,this.vertex_template[_r++]=0),this.vertex_template[_r++]=255*j.color[0],this.vertex_template[_r++]=255*j.color[1],this.vertex_template[_r++]=255*j.color[2],this.vertex_template[_r++]=255*j.color[3],this.selection&&(this.vertex_template[_r++]=255*j.selection_color[0],this.vertex_template[_r++]=255*j.selection_color[1],this.vertex_template[_r++]=255*j.selection_color[2],this.vertex_template[_r++]=255*j.selection_color[3]),this.vertex_template},buildLines:function(j,$,_r,_i,_s){var ga;this.feature_style=this.outline_feature_style,!$.outline||$.outline.color==null||$.outline.width.value==null||(ga=this.styles[$.outline.style])&&ga.addFeature(_i.feature,$.outline,_i),this.feature_style=this.inline_feature_style;var _l=_r.vertex_data,_c=_l.vertex_layout,_p=this.makeVertexTemplate($,_r);return function(_f,ey,iy,ly,uy){var cy,yy,ay=uy.closed_polygon,by=uy.remove_tile_edges,Ey=uy.tile_edge_tolerance,ky=uy.texcoord_index,Oy=(uy.texcoord_scale,uy.texcoord_width),Ty=uy.texcoord_ratio,Ly=uy.texcoord_normalize,Ny=uy.extrude_index,Uy=uy.offset_index,Xy=uy.join,Yy=uy.cap,Wy=uy.miter_limit,_g=uy.offset,y0=uy.crop_by_tile,_m=Yy?dE[Yy]:dE.butt,s0=Xy?X_[Xy]:X_.miter;s0===X_.miter&&(cy=(Wy=Wy||lT.MITER_LIMIT)*Wy),ky&&(Ly=Ly||lT.TEXCOORD_NORMALIZE,yy=1/(Oy*(Ty=Ty||lT.TEXCOORD_RATIO)*CO));for(var R0={closed_polygon:ay,remove_tile_edges:by,tile_edge_tolerance:Ey,miter_len_sq:cy,join_type:s0,cap_type:_m,vertex_data:iy,vertex_template:ly,half_width:ey/2,extrude_index:Ny,offset_index:Uy,v_scale:yy,texcoord_index:ky,texcoord_width:Oy,texcoord_normalize:Ly,offset:_g,geom_count:0,crop_by_tile:y0},Q0=0;Q0<_f.length;Q0++)TC(_f[Q0],R0);if(R0.extra_lines)for(var W0=0;W0<R0.extra_lines.length;W0++)TC(R0.extra_lines[W0],R0);return R0.geom_count}(j,$.width,_l,_p,{cap:$.cap,join:$.join,miter_limit:$.miter_limit,extrude_index:_c.index.a_extrude,offset_index:_c.index.a_offset,texcoord_index:_c.index.a_texcoord,texcoord_width:$.texcoord_width,texcoord_normalize:65535,closed_polygon:_s&&_s.closed_polygon,remove_tile_edges:!$.tile_edges&&_s&&_s.remove_tile_edges,tile_edge_tolerance:Zy.tile_scale*_i.tile.pad_scale*2,offset:$.offset,crop_by_tile:this.crop_by_tile})},buildPolygons:function(j,$,_r,_i){for(var _s=0,ga=0;ga<j.length;ga++)_s+=this.buildLines(j[ga],$,_r,_i,{closed_polygon:!0,remove_tile_edges:!this.crop_by_tile});return _s}});var RO=[[1,1],[1,-1],[-1,1],[-1,-1]];function J_(j,$,_r,_i,_s,ga,_l){var _c,_p=$.vertex_template,_f=$.vertex_data;Ux($,"a_position",j),Ux($,"a_width",$.half_width),$.vertex_layout_index.a_barycentric&&((_c=[0,0,0])[_r%3]=1,Ux($,"a_barycentric",_c)),Ux($,"a_tangents",_l[0].concat(_l[1])),Ux($,"a_segment",_i),Ux($,"a_texcoord",RO[_r%4]),Ux($,"a_length",_s),Ux($,"a_closed",$.closed?1:0),Ux($,"a_angles",ga),_f.addVertex(_p)}function Ux(j,$,_r){var _i=_r.length,_s=j.vertex_template,ga=j.vertex_layout_index[$],_l=0;if(_i)for(;_l!==_i;)_s[ga+_l]=_r[_l],_l++;else _s[ga+_l]=_r}function LO(j,$){for(var _r=j.reduce(function(ly,uy){return ly+uy}),_i=0,_s=[],ga=0,_l=j.length;ga<=_l;ga+=2){var _c=Math.max(1e-4,j[ga%_l]),_p=Math.max(1e-4,j[(ga+1)%_l]);_s.push(_i,_i+_c),_i+=_c+_p}for(var _f=new Uint8Array(4*$),ey=0,iy=0;iy<$;iy++)(function(ly){var uy=_r*ly/($-1),cy=function(Ey){for(var ky=Ey[0],Oy=0,Ty=1,Ly=Ey.length;Ty<Ly;Ty++)Ey[Ty]<ky&&(ky=Ey[Oy=Ty]);return Oy}(_s.map(function(Ey){return Math.abs(Ey-uy)})),yy=void 0,ay=void 0,by=void 0,by=cy%2==0?(yy=uy<=_s[cy]?1:0,ay=_s[cy],_s[cy+1]):(yy=uy>_s[cy]?2:0,ay=_s[cy-1],_s[cy]);_f[ey++]=_s[cy],_f[ey++]=yy,_f[ey++]=ay,_f[ey++]=by})(iy);return _f}var yE=Object.create(N1),JS={round:1,"arrow-tail":2,"arrow-head":3,square:4,butt:5},QS={miter:0,round:1,bevel:2},PO=JS.round,NO=QS.miter,jO=[0,0],IC="antialias join linecaps miter_limit dash_index dash dash_caps dash_phase".split(" ");Object.assign(yE,{name:"pattern-lines",built_in:!0,vertex_shader_src:`uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform sampler2D u_uniforms;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform vec3 u_map_position;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_index;uniform vec2 u_dash_caps;uniform float u_dash_phase;uniform float u_dash_period;attribute vec4 a_position;attribute vec4 a_color;attribute float a_width;
#ifdef TANGRAM_DEBUG_TRIANGLES
attribute vec3 a_barycentric;
#endif
attribute vec2 a_normal;attribute float a_length;attribute vec2 a_segment;attribute vec2 a_texcoord;attribute vec2 a_angles;attribute vec4 a_tangents;attribute float a_closed;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;
#ifdef TANGRAM_DEBUG_TRIANGLES
varying vec3 v_barycentric;
#endif
varying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;
#define TANGRAM_NORMAL vec3(0., 0., 1.)
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
varying vec4 v_modelpos_base_zoom;
#endif
#if defined(TANGRAM_LIGHTING_VERTEX)
varying vec4 v_lighting;
#endif
#ifndef TANGRAM_HEIGHT_SCALE
float TANGRAM_HEIGHT_SCALE=16.0;
#endif
#define UNPACK_SCALING(x) (x / 1024.)
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: global
const float PI=3.141592653589793;const float THETA=15.0*PI/180.0;float cross(in vec2 v1,in vec2 v2){return v1.x*v2.y-v1.y*v2.x;}float signed_distance(in vec2 v1,in vec2 v2,in vec2 v3){return cross(v2-v1,v1-v3)/length(v2-v1);}void rotate(in vec2 v,in float angle,out vec2 result){float cosine=cos(angle);float sine=sin(angle);result=vec2(cosine*v.x-sine*v.y,sine*v.x+cosine*v.y);}void main(){
#pragma tangram: setup
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
v_modelpos_base_zoom=modelPositionBaseZoom();
#endif
float linewidth=a_width*2.0;v_angles=a_angles;v_segment=a_segment;v_color=a_color;v_length=a_length;v_texcoord=a_texcoord;
#ifdef TANGRAM_DEBUG_TRIANGLES
v_barycentric=a_barycentric;
#endif
v_color.a=min(linewidth,v_color.a);linewidth=max(linewidth,1.0);linewidth/=exp2(u_map_position.z-u_tile_origin.w);v_linewidth_and_closed=linewidth*(a_closed>0.0 ?-1.0 : 1.0);if(v_color.a<=0.0){gl_Position=vec4(0.0,0.0,0.0,1.0);return;}float width=ceil(1.25*u_antialias+linewidth)/2.0;vec2 t1=normalize(a_tangents.xy);vec2 t2=normalize(a_tangents.zw);float u=a_texcoord.x;u*=-1.0;float v=a_texcoord.y;vec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.0);if(t1!=t2){float angle=a_texcoord.x==1.0 ? a_angles.x : a_angles.y;vec2 t=normalize(t1+t2);vec2 o=vec2(+t.y,-t.x);float segmentLength=a_segment.y-a_segment.x;float magnitude=width/cos(angle/2.0);float sqMagnitude=magnitude*magnitude;float seg1SqMagnitude=dot(a_tangents.xy,a_tangents.xy);float seg2SqMagnitude=dot(a_tangents.zw,a_tangents.zw);if((abs(magnitude)>linewidth)&&(sqMagnitude>=min(seg1SqMagnitude,seg2SqMagnitude))){if(u==1.0){o=vec2(-t2.y,+t2.x);}else{o=vec2(-t1.y,+t1.x);}magnitude=width;angle=0.0;v_angles.x=0.0;v_angles.y=0.0;}if(u_dash_index>0.0){if((abs(angle)>THETA)){position.xy+=v*width*o/cos(angle/2.0);float s=sign(angle);if(angle<0.0){if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==1.0){position.xy-=2.0*width*t1/sin(angle);u-=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==1.0){position.xy+=2.0*width*t2/sin(angle);u+=2.0*width/sin(angle);}}}else{if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==-1.0){position.xy+=2.0*width*t1/sin(angle);u+=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==-1.0){position.xy-=2.0*width*t2/sin(angle);u-=2.0*width/sin(angle);}}}}else{position.xy+=v*width*o/cos(angle/2.0);if(u==+1.0){u=v_segment.y;}else{u=v_segment.x;}}}else{position.xy+=v*o*magnitude;if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);}else{u=v_segment.x-v*width*tan(angle/2.0);}}v_joinIndicator=(segmentLength+v*width*tan(angle/2.0))/segmentLength;}else{v_joinIndicator=-1.0;vec2 o=vec2(+t1.y,-t1.x);position.xy+=v*width*o;if(u==-1.0){u=v_segment.x-width;position.xy-=width*t1;}else{u=v_segment.y+width;position.xy+=width*t2;}}vec2 t;vec2 curr=a_position.xy;if(a_texcoord.x>=0.0){vec2 next=curr+t2*(v_segment.y-v_segment.x);rotate(t1,+a_angles.x/2.0,t);v_miter.x=signed_distance(curr,curr+t,position.xy);rotate(t2,+a_angles.y/2.0,t);v_miter.y=signed_distance(next,next+t,position.xy);}else{vec2 prev=curr-t1*(v_segment.y-v_segment.x);rotate(t1,-a_angles.x/2.0,t);v_miter.x=signed_distance(prev,prev+t,position.xy);rotate(t2,-a_angles.y/2.0,t);v_miter.y=signed_distance(curr,curr+t,position.xy);}v_distances=vec2(u,v*width);v_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;
#pragma tangram: position
v_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);
#if defined(TANGRAM_LIGHTING_VERTEX)
vec3 normal=v_normal;
#pragma tangram: normal
v_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));
#endif
cameraProjection(position);
#ifdef TANGRAM_LAYER_ORDER
applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);
#endif
gl_Position=position;}`,fragment_shader_src:`uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_dash_atlas;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_phase;uniform float u_dash_period;uniform float u_dash_index;uniform vec2 u_dash_caps;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;
#ifdef TANGRAM_DEBUG_TRIANGLES
varying vec3 v_barycentric;
#endif
varying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;
#define TANGRAM_NORMAL v_normal
#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING
varying vec4 v_modelpos_base_zoom;
#endif
#if defined(TANGRAM_LIGHTING_VERTEX)
varying vec4 v_lighting;
#endif
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: global
#pragma tangram: utils
const float PI=3.141592653589793;const float HALF_PI=PI/2.0;const float THETA=15.0*PI/180.0;/***Compute distance to cap.*@param{int}type The Type of the cap(see CAP_TYPE in pattern_lines)*@param{float}dx The distance of the pixel from the beginning of the line(not straight distance,but along the legs)*@param{float}dy The distance of the pixel from the midline(see v_distances in vertex shader,aka ±1*half_line_width)*@param{float}aa_radius The distance from the mid-line from where antialiasing starts.*For example for a linewidth 10px width and 2px filter radius it is 10px/2-2px=3px.*@return{float}distance*/float cap(int type,float dx,float dy,float aa_radius){float dist=0.0;dx=abs(dx);dy=abs(dy);if(type==1)dist=sqrt(dx*dx+dy*dy);else if(type==3)dist=(dx+abs(dy));else if(type==2)dist=max(abs(dy),(aa_radius+dx-abs(dy)));else if(type==4)dist=max(dx,dy);else if(type==5)dist=max(dx+aa_radius,dy);return dist;}/***Compute distance to join.*@param{int}type The type of the join(see JOIN_TYPE in pattern_lines)*@param{vec2}segment Interpolated a_segment attribute from the vertex shader*@param{vec2}texcoord Pair of u/v coordinates to identify the 4 different extruded points of the segment.*@param{vec2}distances 2 component vector where:*x is the distance of the pixel from the beginning of the line(along the legs)*y is the  distance of the pixel from the midline(see v_distances in vertex shader,±1*half_line_width)*@param{vec2}miter Miter point coordiante*@param{float}miter_limit The miter limit*@param{float}linewidth The width of the line*@return{float}computed distance*/float join(in int type,in vec2 segment,in vec2 texcoord,in vec2 distances,in vec2 miter,in float miter_limit,in float linewidth){float dx=distances.x;float result=abs(distances.y);if((dx<segment.x)||(dx>segment.y)){if(type==1){float s=dx<segment.x ? segment.x : segment.y;result=max(result,length(distances-vec2(s,0.0)));}else{float m=abs(texcoord.x>=0.0 ? miter.x : miter.y);if(type==2){result=max(result,m);}else if(type==0){result=max(result,m-miter_limit*linewidth/2.0);}}}return result;}void main(void){
#pragma tangram: setup
vec4 color=v_color;vec3 normal=TANGRAM_NORMAL;
#ifdef TANGRAM_CROP_BY_TILE
if(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}
#endif
#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)
calculateNormal(normal);
#endif
#if !defined(TANGRAM_LIGHTING_VERTEX)
#pragma tangram: normal
#endif
#pragma tangram: color
#if defined(TANGRAM_LIGHTING_FRAGMENT)
color=calculateLighting(v_position.xyz-u_eye,normal,color);
#elif defined(TANGRAM_LIGHTING_VERTEX)
color*=v_lighting;
#endif
#pragma tangram: filter
if(v_color.a<=0.0){discard;}bool solid=(u_dash_index==0.0);bool closed=v_linewidth_and_closed<0.0;float dx=v_distances.x;float dy=v_distances.y;float linewidth=abs(v_linewidth_and_closed);float aa_radius=linewidth/2.0-u_antialias;float dist=0.0;vec2 linecaps=u_linecaps;vec2 dash_caps=u_dash_caps;float line_start=0.0;float line_stop=v_length;if(solid){dist=abs(dy);bool potentialCap=!closed&&v_joinIndicator<0.0;if(potentialCap&&dx<line_start){dist=cap(int(u_linecaps.x),abs(dx),abs(dy),aa_radius);}else if(potentialCap&&dx>line_stop){dist=cap(int(u_linecaps.y),abs(dx)-line_stop,abs(dy),aa_radius);}else{dist=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);}}else{float segment_start=v_segment.x;float segment_stop=v_segment.y;float segment_center=(segment_start+segment_stop)/2.0;float freq=u_dash_period*linewidth;float dash_phase=u_dash_phase-1e-5;float u=mod(dx+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));float dash_center=float(tex.x)*255.0*linewidth;float dash_type=floor(float(tex.y)*255.0+0.5);float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;float dash_start=dx-u+_start;float dash_stop=dx-u+_stop;if((dash_stop<segment_start)&&(dash_caps.x!=5.0)){float u=mod(segment_start+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_start-u+_start;dash_stop=segment_start-u+_stop;}else if((dash_start>segment_stop)&&(dash_caps.y!=5.0)){float u=mod(segment_stop+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_stop-u+_start;dash_stop=segment_stop-u+_stop;}bool discontinuous=((dx<segment_center)&&abs(v_angles.x)>THETA)||((dx>=segment_center)&&abs(v_angles.y)>THETA);float d_join=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);if(closed){line_start+=linewidth/2.0;line_stop-=linewidth/2.0;}if(dash_stop<=line_start){discard;}if(dash_start>=line_stop){discard;}if(discontinuous){if((dash_start>segment_stop)){discard;}if((dash_stop<segment_start)){discard;}if(dash_caps.x==1.0){if((u>_stop)&&(dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){discard;}}if(dash_caps.y==1.0){if((u<_start)&&(dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){discard;}}if((dash_caps.x!=1.0)&&(dash_caps.x!=5.0)){if((dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){float a=v_angles.x/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(segment_start-dx)*cos_a-dy*sin_a;float y=(segment_start-dx)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.x=4.0;}}if((dash_caps.y!=1.0)&&(dash_caps.y!=5.0)){if((dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){float a=v_angles.y/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(dx-segment_stop)*cos_a-dy*sin_a;float y=(dx-segment_stop)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.y=4.0;}}}if((dx<line_start)&&(dash_start<=line_start)&&(dash_stop>line_start)){dist=cap(int(linecaps.x),dx-line_start,dy,aa_radius);}else if((dx>line_stop)&&(dash_stop>line_stop)&&(dash_start<line_stop)){dist=cap(int(linecaps.y),dx-line_stop,dy,aa_radius);}else if(dash_type==1.0){dist=cap(int(dash_caps.x),abs(dash_center-u),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}else if(dash_type==0.0){dist=abs(dy);}else if(dash_type==2.0){dist=cap(int(dash_caps.y),abs(u-dash_center),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}if((dx>line_start)&&(dx<line_stop)){if((dx<=segment_start)&&(dash_start<=segment_start)&&(dash_stop>=segment_start)){dist=d_join;float angle=HALF_PI+v_angles.x;float f=abs((segment_start-dx)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if((dx>segment_stop)&&(dash_start<=segment_stop)&&(dash_stop>=segment_stop)){dist=d_join;float angle=HALF_PI+v_angles.y;float f=abs((dx-segment_stop)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}dist=dist-aa_radius;if(dist>=0.0){if(u_antialias==0.0){discard;}else{color=vec4(color.rgb,exp(-dist*dist)*color.a);}}
#ifdef TANGRAM_DEBUG_TRIANGLES
if(any(lessThan(v_barycentric,vec3(0.0085)))){color=vec4(0.0,1.0,0.0,1.0);}
#endif
gl_FragColor=color;}`,selection:!0,init:function(){N1.init.apply(this,arguments),this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_DEBUG_TRIANGLES=!1,this.defines.TANGRAM_DEBUG_NO_TEXTURE_FLOAT_SUPPORT=!1,this.styles=this.styles||{},yE.vertex_layouts=[]},calcDistance:function(j,$){return j&&Gy.evalCachedDistanceProperty(j,$)||0},calcDash:function(j,$){var _r=Gy.evalProperty(j.dash,$),_i=0;return _r&&((_r=Array.isArray(_r)&&_r.length?_r:jO).length%2==1&&(_r=_r.concat(_r)),_i=+(_i=_r.reduce(function(_s,ga){return _s+ga}))||0),{dash:_r,dash_period:_i}},calcWidth:function(j,$,_r){var _i=this.calcDistance(j.width,_r);return!(_i<0)&&($.width=_i*_r.units_per_meter_overzoom,!0)},getCapType:function(j,$,_r){var _i=Gy.evalProperty(j,$);return JS[_i]!==void 0?JS[_i]:_r},_parseFeature:function(j,$,_r){if(this.calcWidth($,this.feature_style,_r)!==!1){var _i=this.parseColor($.color,_r);if(_i&&_i[3]!==0){var _s=this.getCapType($.cap,_r,PO),ga=Gy.evalProperty($.join,_r),_l=+Gy.evalProperty($.miter_limit,_r),_c=this.calcDash($,_r),_p=_c.dash,_f=_c.dash_period,ey=Object.assign({color:_i,antialias:$.antialias,linecaps:[this.getCapType($.tail_cap,_r,_s),this.getCapType($.head_cap,_r,_s)],join:QS[ga]!==void 0?QS[ga]:NO,miter_limit:0<=_l?_l:3,dash_index:_f===0?0:1,dash:_p,dash_caps:[this.getCapType($.tail_cap,_r,_s),this.getCapType($.head_cap,_r,_s)],dash_phase:+Gy.evalProperty($.dash_phase,_r)||0,dash_period:_f},this.feature_style);return ey.z=$.z&&Gy.evalCachedDistanceProperty($.z||0,_r)||Gy.defaults.z,ey.z*=Zy.height_scale,ey.extrude=Gy.evalProperty($.extrude,_r),ey.extrude&&(ey.extrude===!0?(ey.height=j.properties.height!==void 0?j.properties.height:Gy.defaults.height,ey.min_height=j.properties.min_height!==void 0?j.properties.min_height:Gy.defaults.min_height):typeof ey.extrude=="number"?(ey.height=ey.extrude,ey.min_height=0):Array.isArray(ey.extrude)&&(ey.min_height=ey.extrude[0],ey.height=ey.extrude[1]),ey.height*=Zy.height_scale,ey.min_height*=Zy.height_scale),this.addMeshVariantForDraw(this.base,ey),ey}}},_preprocess:function(j){j.color=Gy.createColorPropertyCache(j.color),j.width=Gy.createPropertyCache(j.width,Gy.parseUnits),j.width&&j.width.type!==Gy.CACHE_TYPE.STATIC&&(j.next_width=Gy.createPropertyCache(j.width,Gy.parseUnits)),j.z=Gy.createPropertyCache(j.z,Gy.parseUnits);var $=+j.antialias;return j.antialias=isNaN($)?0:$,j},buildRasterTextures:function(j,$){var _r=[];for(var _i in $.meshes){var _s,ga=this.getMeshVariantTypeForDraw({variantKey:_i}),_l=ga.uniforms,_c=ga.pattern;_l.u_dash_index&&(_s="__dash_"+_c.join("_")+"_"+j.key+"_"+j.id,_r.push({name:_s,data:LO(_c,1024)}),_l.u_dash_atlas=_s,$.meshes[_i].textures=[_s]),$.meshes[_i].uniforms=_l}return $.uniforms=$.uniforms||{},_r.length?S0.postMessage(this.main_thread_target+".loadTextures",_r).then(function(_p){return $}):Promise.resolve($)},loadTextures:function(j){for(var $=[],_r=0;_r<j.length;_r++){var _i=j[_r],_s=(_s=this.textureManager.textures[_i.name])||this.textureManager.create(this.gl,_i.name,{filtering:"nearest",repeat:!0,width:1024,height:1,data:_i.data});$.push(_s.loading)}return Promise.all($).then(function(ga){return ga.map(function(_l){return _l.retain(),_l.name})})},computeVariantForDraw:function(j){var $=function(_r){for(var _i=[],_s=0,ga=IC.length;_s<ga;_s++){var _l=_r[IC[_s]];Array.isArray(_l)?_i.push(_l.join("_")):typeof _l=="boolean"?_i.push(_l?1:0):_l&&_i.push(_l.toString())}return _i.join("/")}(j);return{key:j.variantKey=$,order:j.variant_order,uniforms:{u_antialias:j.antialias,u_linecaps:j.linecaps,u_linejoin:j.join,u_miter_limit:j.miter_limit,u_dash_index:j.dash_index,u_dash_caps:j.dash_caps,u_dash_phase:j.dash_phase,u_dash_period:j.dash_period},pattern:j.dash}},vertexLayoutForMeshVariant:function(j){var $;return yE.vertex_layouts[j.key]==null&&($=[{name:"a_position",size:4,type:I0.SHORT,normalized:!1},{name:"a_color",size:4,type:I0.UNSIGNED_BYTE,normalized:!0},{name:"a_width",size:1,type:I0.FLOAT,normalized:!1},{name:"a_tangents",size:4,type:I0.FLOAT,normalized:!1},{name:"a_segment",size:2,type:I0.FLOAT,normalized:!1},{name:"a_angles",size:2,type:I0.FLOAT,normalized:!1},{name:"a_texcoord",size:2,type:I0.FLOAT,normalized:!0},{name:"a_length",size:1,type:I0.FLOAT,normalized:!1},{name:"a_closed",size:1,type:I0.FLOAT,normalized:!1},{name:"a_selection_color",size:4,type:I0.UNSIGNED_BYTE,normalized:!0}],this.defines.TANGRAM_DEBUG_TRIANGLES&&$.push({name:"a_barycentric",size:3,type:I0.SHORT,normalized:!1}),yE.vertex_layouts[j.key]=new Fx($)),yE.vertex_layouts[j.key]},makeVertexTemplate:function(j){var $=0;return this.vertex_template[$++]=0,this.vertex_template[$++]=0,this.vertex_template[$++]=j.z+j.height||0,this.vertex_template[$++]=this.scaleOrder(j.order),this.vertex_template[$++]=255*j.color[0],this.vertex_template[$++]=255*j.color[1],this.vertex_template[$++]=255*j.color[2],this.vertex_template[$++]=255*j.color[3],this.vertex_template[$++]=0,this.vertex_template[$++]=0,this.vertex_template[$++]=0,this.vertex_template[$++]=0,this.vertex_template[$++]=0,this.vertex_template[$++]=0,this.vertex_template[$++]=0,this.vertex_template[$++]=0,this.vertex_template[$++]=0,this.vertex_template[$++]=0,this.vertex_template[$++]=0,this.vertex_template[$++]=0,this.vertex_template[$++]=0,this.selection&&(this.vertex_template[$++]=255*j.selection_color[0],this.vertex_template[$++]=255*j.selection_color[1],this.vertex_template[$++]=255*j.selection_color[2],this.vertex_template[$++]=255*j.selection_color[3]),this.defines.TANGRAM_DEBUG_TRIANGLES&&(this.vertex_template[$++]=0,this.vertex_template[$++]=0,this.vertex_template[$++]=0),this.vertex_template},buildLines:function(j,$,_r,_i,_s){var ga=4<arguments.length&&_s!==void 0&&_s,_l=_r.vertex_data,_c=_l.vertex_layout,_p=this.makeVertexTemplate($,_r);return OO(j,$.width,_l,_p,_c.index,ga)},buildPolygons:function(j,$,_r,_i){for(var _s=0,ga=0,_l=j.length;ga<_l;ga++)_s+=this.buildLines(j[ga],$,_r,_i,!0);return _s}});var DO=0,cA={id_prefix:"",nextLabelId:function(){return"".concat(cA.id_prefix,"/").concat(DO++)}};function t3(j){return{priority:j.priority,collide:j.collide,repeat_distance:j.repeat_distance,repeat_group:j.repeat_group,buffer:j.buffer,italic:j.italic}}var zO=["left","top-left","bottom-left"],FO=["right","top-right","bottom-right"],BO=["top","top-left","top-right"],UO=["bottom","bottom-left","bottom-right"],gE={computeOffset:function(j,$,_r,_i){var ga=3<arguments.length&&_i!==void 0?_i:null;if(!_r||_r==="center")return j;var _s=[j[0],j[1]],ga=ga||this.default_buffer;return this.isLeftAnchor(_r)?(_s[0]-=$[0]/2,_r==="left"&&(_s[0]-=ga[0])):this.isRightAnchor(_r)&&(_s[0]+=$[0]/2,_r==="right"&&(_s[0]+=ga[1])),this.isTopAnchor(_r)?(_s[1]-=$[1]/2,_r==="top"&&(_s[1]-=ga[2])):this.isBottomAnchor(_r)&&(_s[1]+=$[1]/2,_r==="bottom"&&(_s[1]+=ga[3])),_s},alignForAnchor:function(j){if(j&&j!=="center"){if(this.isLeftAnchor(j))return"right";if(this.isRightAnchor(j))return"left"}return"center"},isLeftAnchor:function(j){return-1<zO.indexOf(j)},isRightAnchor:function(j){return-1<FO.indexOf(j)},isTopAnchor:function(j){return-1<BO.indexOf(j)},isBottomAnchor:function(j){return-1<UO.indexOf(j)},default_buffer:[2.5,2.5,1.5,.75],zero_buffer:[0,0,0,0]};function hA(j,$,_r,_i,_s){var ga=[],_l=_r-j,_c=_i-$,_p=L1.getLineLength(j,$,_r,_i),_f=2*_s;if((ey=_p/_f)<=1)ga.push(j+_l/2,$+_c/2,_s);else{var ey,iy=_f/_p,ly=_l*iy,uy=_c*iy;(ey=_p/_s/2)%1&&ga.push(_r-ly/2,_i-uy/2,_s),ey|=0;for(var cy=j+ly/2,yy=$+uy/2;ey--;)ga.push(cy,yy,_s),cy+=ly,yy+=uy}return ga}var v_=function(){function j($,_r,_i,_s){F0(this,j),this.id=cA.nextLabelId(),this.position=[$[0],$[1]],$[2]!==void 0&&this.position.push($[2]),this.size=_r,this.layout=_s,this.anchor=Array.isArray(this.layout.anchor)?this.layout.anchor[0]:this.layout.anchor,this.placed=null,this.type="point",this.parent=this.layout.parent,this.offset=this.computeOffset(),this.align=this.layout.align||gE.alignForAnchor(this.anchor),this._is_flat=_i}return H0(j,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,align:this.align,sides:this.getSides(),breach:!this.inTileBounds(),layout:t3(this.layout)}}},{key:"inTileBounds",value:function(){var $=this.getAABB(),_r=$.left,_i=$.top,_s=$.right,ga=$.bottom;return q0.pointInTile([_r,_i])&&q0.pointInTile([_s,ga])}},{key:"isFlat",value:function(){return this._is_flat}},{key:"setAnchor",value:function($){this._circles=void 0,this._aabb=void 0,this.anchor=$,this.offset=this.computeOffset()}},{key:"computeOffset",value:function(){var $,_r=[this.layout.offset[0],this.layout.offset[1]];return this.parent&&($=this.parent,_r=gE.computeOffset(_r,$.size,$.anchor,gE.zero_buffer),_r=gE.computeOffset(_r,$.size,this.anchor,gE.zero_buffer),$.offset!==Gy.zeroPair&&(_r===Gy.zeroPair?_r=$.offset:(_r[0]+=$.offset[0],_r[1]+=$.offset[1]))),gE.computeOffset(_r,this.size,this.anchor)}},{key:"getBoundingCircles",value:function(){return this.angle?(this._circles||($=this.layout.units_per_pixel,ga=-(_i=(_r=this.size[0]/2*$)*Math.cos(this.angle)),_l=-(_s=_r*Math.sin(this.angle)),_p=(_c=C0(this.position,2))[0],_f=_c[1],_i+=_p,_s+=_f*=-1,ga+=_p,_l+=_f,ey=this.size[1]/2*$,this._circles=hA(_i,_s,ga,_l,ey)),this._circles):[];var $,_r,_i,_s,ga,_l,_c,_p,_f,ey}},{key:"getAABB",value:function(){var $,_r,_i,_s,ga;return this._aabb||($=this.layout.units_per_pixel,_r=(this.size[0]/2+this.layout.buffer[0])*$,_i=(this.size[1]/2+this.layout.buffer[1])*$,_s=this.position[0]+this.offset[0]*$,ga=this.position[1]-this.offset[1]*$,this._aabb={left:_s-_r,top:ga+_i,right:_s+_r,bottom:ga-_i}),this._aabb}},{key:"getSides",value:function(){var $=this.getAABB(),_r=$.left,_i=$.top,_s=$.right,ga=(_i+$.bottom)/2;return[_r,ga,_s,ga]}}]),j}();v_.PLACEMENT={VERTEX:0,MIDPOINT:1,SPACED:2,CENTROID:3};var e3=v_.PLACEMENT,GO=80;function pA(j,$,_r,_i){var _s=[],ga=_i.placement,_l=Math.max($[0],$[1])*_i.placement_min_length_ratio*_i.units_per_pixel;switch(ga){case e3.SPACED:var _c=function(Ny,Uy,Xy){var Yy=Xy.units_per_pixel,Wy=(Xy.placement_spacing||GO)*Yy,_g=function(A1){for(var j1=0,Z0=0;Z0<A1.length-1;Z0++)j1+=dA(A1[Z0],A1[Z0+1]);return j1}(Ny);if(_g<=Uy)return!1;for(var y0=Math.max(Math.floor(_g/Wy),1),_m=[],s0=[],R0=.5*(_g-(y0-1)*Wy),Q0=0;Q0<y0;Q0++){var W0=function(A1,j1,Z0,F1){for(var B_,e_,u_=0,cx=0;cx<A1.length-1;cx++){var W1=A1[cx],y1=A1[cx+1],Y1=dA(W1,y1);if(!(Y1<=Z0)&&j1<(u_+=Y1)){B_=function(U_,H_,A_){var Ww=dA(U_,H_),S_=A_/Ww;return[S_*U_[0]+(1-S_)*H_[0],S_*U_[1]+(1-S_)*H_[1]]}(W1,y1,u_-j1),e_=fA(W1,y1,F1.angle);break}}return{position:B_,angle:e_}}(Ny,R0,Uy,Xy),t1=W0.position,o1=W0.angle;t1!=null&&o1!=null&&(_m.push(t1),s0.push(o1)),R0+=Wy}return{positions:_m,angles:s0}}(j,_l,_i);if(!_c)return[];for(var _p=_c.positions,_f=_c.angles,ey=0;ey<_p.length;ey++){var iy,ly=_p[ey],uy=_f[ey];_i.tile_edges!==!0&&Bx(ly)||((iy=new v_(ly,$,_r,_i)).angle=uy,_s.push(iy))}break;case e3.VERTEX:for(var cy,yy,ay,by=0;by<j.length-1;by++)cy=j[by],yy=j[by+1],_i.tile_edges!==!0&&Bx(cy)||((ay=new v_(cy,$,_r,_i)).angle=fA(cy,yy,_i.angle),_s.push(ay));(ay=new v_(yy,$,_r,_i)).angle=fA(cy,yy,_i.angle),_s.push(ay);break;case e3.MIDPOINT:for(var Ey=0;Ey<j.length-1;Ey++){var ky,Oy=j[Ey],Ty=j[Ey+1],Ly=[.5*(Oy[0]+Ty[0]),.5*(Oy[1]+Ty[1])];_i.tile_edges!==!0&&Bx(Ly)||(!_l||dA(Oy,Ty)>_l)&&((ky=new v_(Ly,$,_r,_i)).angle=fA(Oy,Ty,_i.angle),_s.push(ky))}}return _s}function fA(j,$,_r){var _i=2<arguments.length&&_r!==void 0?_r:0;return _i==="auto"?Math.atan2($[0]-j[0],$[1]-j[1]):_i}function dA(j,$){return Math.sqrt(Math.pow(j[0]-$[0],2)+Math.pow(j[1]-$[1],2))}var r3={key:function(j){return[j.style,j.weight,j.family,j.px_size,j.fill,j.stroke,j.stroke_width,j.transform,j.text_wrap,j.max_lines,j.supersample,j.background_color,j.outline_color,j.outline_width,j.padding,q0.device_pixel_ratio].join("/")},defaults:{style:"normal",weight:null,size:"12px",px_size:12,family:"Helvetica",fill:"white",text_wrap:15,max_lines:5,align:"center",stroke:null,stroke_width:0,background_color:null,outline_color:null,outline_width:0,padding:[0,0,0,0]},compute:function(j,$,_r){var _i={};if($.font=$.font||this.defaults,_i.can_articulate=$.can_articulate,_i.fill=$.font.fill&&q0.toCSSColor(Gy.evalCachedColorProperty($.font.fill,_r))||this.defaults.fill,_i.style=$.font.style||this.defaults.style,_i.weight=$.font.weight||this.defaults.weight,$.font.family?(_i.family=$.font.family,_i.family!==this.defaults.family&&(_i.family+=", "+this.defaults.family)):_i.family=this.defaults.family,_i.transform=$.font.transform,_i.size=$.font.size||this.defaults.size,_i.supersample=$.supersample_text?1.5:1,_i.px_size=Gy.evalCachedProperty($.font.px_size,_r)*_i.supersample,_i.px_size!==0){$.font.stroke&&$.font.stroke.color&&(_i.stroke=q0.toCSSColor(Gy.evalCachedColorProperty($.font.stroke.color,_r)||this.defaults.stroke),_i.stroke_width=Gy.evalCachedProperty($.font.stroke.width,_r)||this.defaults.stroke_width),_i.font_css=this.fontCSS(_i);var _s=$.text_wrap;return _s==null&&Zy.geometryType(j.geometry.type)!=="line"&&(_s=!0),_s===!0&&(_s=this.defaults.text_wrap),_i.text_wrap=_s,_i.max_lines=$.max_lines||this.defaults.max_lines,_i.background_color=$.background&&$.background.color&&!$.can_articulate?q0.toCSSColor(Gy.evalCachedColorProperty($.background.color,_r)):this.defaults.background_color,_i.outline_color=$.outline&&$.outline.color&&!$.can_articulate?q0.toCSSColor(Gy.evalCachedColorProperty($.outline.color,_r)):this.defaults.outline_color,_i.outline_width=$.outline&&$.outline.width&&!$.can_articulate?Gy.evalCachedProperty($.outline.width,_r):this.defaults.outline_width,_i.padding=$.padding&&!$.can_articulate?Gy.evalCachedProperty($.padding,_r):this.defaults.padding,_i}},fontCSS:function(j){return[j.style,j.weight,j.px_size+"px",j.family].filter(function($){return $}).join(" ")}},VO=_u(function(j){function $(ly,uy){document.addEventListener?ly.addEventListener("scroll",uy,!1):ly.attachEvent("scroll",uy)}function _r(ly){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(ly)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function _i(ly,uy){ly.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+uy+";"}function _s(ly){var uy=ly.a.offsetWidth,cy=uy+100;return ly.f.style.width=cy+"px",ly.c.scrollLeft=cy,ly.b.scrollLeft=ly.b.scrollWidth+100,ly.g!==uy&&(ly.g=uy,1)}function ga(ly,uy){function cy(){var ay=yy;_s(ay)&&ay.a.parentNode&&uy(ay.g)}var yy=ly;$(ly.b,cy),$(ly.c,cy),_s(ly)}function _l(ly,uy){var cy=uy||{};this.family=ly,this.style=cy.style||"normal",this.weight=cy.weight||"normal",this.stretch=cy.stretch||"normal"}function _c(ly,uy){return[ly.style,ly.weight,function(){if(ey===null){var cy=document.createElement("div");try{cy.style.font="condensed 100px sans-serif"}catch{}ey=cy.style.font!==""}return ey}()?ly.stretch:"","100px",uy].join(" ")}var _p,_f,ey,iy;iy=ey=_f=_p=null,_l.prototype.load=function(ly,uy){var cy=this,yy=ly||"BESbswy",ay=0,by=uy||3e3,Ey=new Date().getTime();return new Promise(function(ky,Oy){var Ty,Ly,Ny;iy===null&&(iy=!!document.fonts),(Ty=iy)&&(_f===null&&(_f=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),Ty=!_f),Ty?(Ty=new Promise(function(Uy,Xy){(function Yy(){new Date().getTime()-Ey>=by?Xy():document.fonts.load(_c(cy,'"'+cy.family+'"'),yy).then(function(Wy){1<=Wy.length?Uy():setTimeout(Yy,25)},function(){Xy()})})()}),Ly=new Promise(function(Uy,Xy){ay=setTimeout(Xy,by)}),Promise.race([Ly,Ty]).then(function(){clearTimeout(ay),ky(cy)},function(){Oy(cy)})):(Ny=function(){function Uy(){var t1;(t1=_g!=-1&&y0!=-1||_g!=-1&&_m!=-1||y0!=-1&&_m!=-1)&&((t1=_g!=y0&&_g!=_m&&y0!=_m)||(_p===null&&(t1=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),_p=!!t1&&(parseInt(t1[1],10)<536||parseInt(t1[1],10)===536&&parseInt(t1[2],10)<=11)),t1=_p&&(_g==s0&&y0==s0&&_m==s0||_g==R0&&y0==R0&&_m==R0||_g==Q0&&y0==Q0&&_m==Q0)),t1=!t1),t1&&(W0.parentNode&&W0.parentNode.removeChild(W0),clearTimeout(ay),ky(cy))}var Xy=new _r(yy),Yy=new _r(yy),Wy=new _r(yy),_g=-1,y0=-1,_m=-1,s0=-1,R0=-1,Q0=-1,W0=document.createElement("div");W0.dir="ltr",_i(Xy,_c(cy,"sans-serif")),_i(Yy,_c(cy,"serif")),_i(Wy,_c(cy,"monospace")),W0.appendChild(Xy.a),W0.appendChild(Yy.a),W0.appendChild(Wy.a),document.body.appendChild(W0),s0=Xy.a.offsetWidth,R0=Yy.a.offsetWidth,Q0=Wy.a.offsetWidth,function t1(){var o1;new Date().getTime()-Ey>=by?(W0.parentNode&&W0.parentNode.removeChild(W0),Oy(cy)):((o1=document.hidden)!==!0&&o1!==void 0||(_g=Xy.a.offsetWidth,y0=Yy.a.offsetWidth,_m=Wy.a.offsetWidth,Uy()),ay=setTimeout(t1,50))}(),ga(Xy,function(t1){_g=t1,Uy()}),_i(Xy,_c(cy,'"'+cy.family+'",sans-serif')),ga(Yy,function(t1){y0=t1,Uy()}),_i(Yy,_c(cy,'"'+cy.family+'",serif')),ga(Wy,function(t1){_m=t1,Uy()}),_i(Wy,_c(cy,'"'+cy.family+'",monospace'))},document.body?Ny():document.addEventListener?document.addEventListener("DOMContentLoaded",function Uy(){document.removeEventListener("DOMContentLoaded",Uy),Ny()}):document.attachEvent("onreadystatechange",function Uy(){document.readyState!="interactive"&&document.readyState!="complete"||(document.detachEvent("onreadystatechange",Uy),Ny())}))})},j.exports=_l}),OC={fonts_loaded:Promise.resolve(),last_loaded:null,loadFonts:function(j){var $=this,_r=JSON.stringify(j)===this.last_loaded;return j&&!_r&&function(){var _i=[];for(var _s in j)(function(ga){Array.isArray(j[ga])?j[ga].forEach(function(_l){return _i.push($.loadFontFace(ga,_l))}):_i.push($.loadFontFace(ga,j[ga]))})(_s);$.last_loaded=JSON.stringify(j),$.fonts_loaded=Promise.all(_i.filter(function(ga){return ga}))}(),this.fonts_loaded},loadFontFace:function(j,$){if($!=null&&(x1($)==="object"||$==="external")){var _r={family:j},_i=Promise.resolve();x1($)==="object"&&(Object.assign(_r,$),typeof $.url=="string"&&(_i=this.injectFontFace(_r)));var _s=new VO(j,_r);return _i.then(function(){return _s.load()}).then(function(){o0("debug","Font face '".concat(j,"' is available"),_r)},function(){o0("debug","Font face '".concat(j,"' is NOT available"),_r)})}},injectFontFace:function(j){var $=this,_r=j.family,_i=j.url,_s=j.weight,ga=j.style;this.supports_native_font_loading===void 0&&(this.supports_native_font_loading=window.FontFace!==void 0);var _l=Promise.resolve(_i);return _i.slice(0,5)==="blob:"&&(_l=q0.io(_i,6e4,"arraybuffer").then(function(_c){var _p=new Uint8Array(_c);if($.supports_native_font_loading)return _p;for(var _f="",ey=0;ey<_p.length;ey++)_f+=String.fromCharCode(_p[ey]);return"data:font/opentype;base64,"+btoa(_f)})),_l.then(function(_c){var _p,_f,ey;$.supports_native_font_loading?(typeof _c=="string"?_p=new FontFace(_r,"url(".concat(encodeURI(_c),")"),{weight:_s,style:ga}):_c instanceof Uint8Array&&(_p=new FontFace(_r,_c,{weight:_s,style:ga})),document.fonts.add(_p),o0("trace","Adding FontFace to document.fonts:",_p)):(_f=`
                    @font-face {
                        font-family: '`.concat(_r,`';
                        font-weight: `).concat(_s||"normal",`;
                        font-style: `).concat(ga||"normal",`;
                        src: url(`).concat(encodeURI(_c),`);
                    }
                `),(ey=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(ey),ey.sheet.insertRule(_f,0),o0("trace","Injecting CSS font face:",_f))})}},D_=function(){function j(){F0(this,j),this.vertical_text_buffer=1,this.horizontal_text_buffer=1,this.layout=FS("binary-tree")}return H0(j,[{key:"createCanvas",value:function($,_r){var _i=document.createElement("canvas");return $&&_r&&(_i.width=$,_i.height=_r),_i.style.backgroundColor="transparent",_i}},{key:"setFont",value:function($,_r){var _i=_r.font_css,_s=_r.fill,ga=_r.stroke,_l=_r.stroke_width,_c=_r.px_size,_p=_r.supersample;this.px_size=_c;var _f=q0.device_pixel_ratio*_p;ga&&0<_l&&($.strokeStyle=ga,$.lineWidth=_l*_f),$.fillStyle=_s,$.textBaseline="bottom",$.font=_i,$.miterLimit=2}},{key:"textSizes",value:function($,_r,_i){var _s=this;return OC.loadFonts().then(function(){return H1.add({type:"textSizes",run:_s.processTextSizesTask.bind(_s),texts:_r,tile_id:$,cursor:{ctx:_i,styles:Object.keys(_r),texts:null,style_idx:null,text_idx:null}})})}},{key:"processTextSizesTask",value:function($){var _r,_i=$.cursor,_s=$.texts,ga=_i.ctx;for(_i.style_idx=_i.style_idx||0;_i.style_idx<_i.styles.length;){var _l=_i.styles[_i.style_idx];_i.text_idx==null&&(_i.text_idx=0,_i.texts=Object.keys(_s[_l]));for(var _c=_s[_l],_p=!0;_i.text_idx<_i.texts.length;){var _f=_i.texts[_i.text_idx],ey=_c[_f],iy=ey.text_settings;if(_p&&(this.setFont(ga,iy),_p=!1),ey.size=this.textSize(ga,_l,_f,iy).size,iy.can_articulate){var ly=!1,uy=!1;if(RC(_f)&&(LC(_f)?ly=!0:uy=!0),ey.isRTL=ly,ey.no_curving=uy||(_r=_f,ZO.test(_r)),ey.vertical_buffer=this.vertical_text_buffer+iy.outline_width+(iy.padding[0]+iy.padding[2])/2,ey.segment_sizes=[],!ey.no_curving){var cy=function(ay,by){var Ey=by?1:JO;if(ay.length<Ey)return[ay];var ky=ay;if(D_.cache.segment[ky])return D_.cache.stats.segment_hits++,D_.cache.segment[ky];var Oy=[];if($O.exec(ay)){Oy=ay.split(WO);for(var Ty,Ly=-1,Ny=0;Ny<Oy.length-1;Ny++)0<Ny&&(Ty=YO.exec(Oy[Ny]))&&(Oy[Ny]=Oy[Ny].substring(Ty[0].length),Oy[Ny-1]+=Ty[0],Ly+=Ty[0].length),Ly+=1+Oy[Ny].length,Oy[Ny]+=ay.slice(Ly,Ly+1);ay=""}for(;ay.length;){for(var Uy="",Xy=ay,Yy=0;Yy<Ey&&Xy.length;Yy++){var Wy=(KO.exec(Xy)||Xy)[0];Uy+=Wy,Xy=Xy.substring(Wy.length)}Oy.push(Uy),ay=ay.substring(Uy.length)}return by&&Oy.reverse(),D_.cache.stats.segment_misses++,D_.cache.segment[ky]=Oy}(_f,ly);ey.segments=cy;for(var yy=0;yy<cy.length;yy++)ey.segment_sizes.push(this.textSize(ga,_l,cy[yy],iy).size)}}if(_i.text_idx++,!H1.shouldContinue($))return!1}_i.text_idx=null,_i.style_idx++}return H1.finish($,{texts:_s}),!0}},{key:"textSize",value:function($,_r,_i,_s){var ga=_s.transform,_l=_s.text_wrap,_c=_s.max_lines,_p=_s.stroke_width,_f=_p===void 0?0:_p,ey=_s.supersample,iy=_s.padding,ly=_s.outline_width,uy=_s.can_articulate;if(j.cache.text[_r]=j.cache.text[_r]||{},j.cache.text[_r][_i])return j.cache.stats.text_hits++,j.cache.text[_r][_i];j.cache.stats.text_misses++,j.cache.text_count++;var cy=q0.device_pixel_ratio*ey,yy=this.applyTextTransform(_i,ga),ay=cy*(this.vertical_text_buffer+ly+(iy[0]+iy[2])/2),by=cy*(this.horizontal_text_buffer+ly+_f+(iy[1]+iy[3])/2),Ey=2*cy,ky=this.px_size+Ey,Oy=jC.parse(yy,_l,_c,ky,$),Ty=Oy.height,Ly=Oy.width,Ny=Oy.lines,Uy=[Ly/cy,Ty/cy];uy||(Uy[0]+=2*by/cy,Uy[1]+=2*ay/cy);var Xy=[Ly+2*by,Ty+2*ay],Yy=[Xy[0]/cy,Xy[1]/cy];return j.cache.text[_r][_i]={lines:Ny,size:{collision_size:Uy,texture_size:Xy,logical_size:Yy,line_height:ky}},j.cache.text[_r][_i]}},{key:"drawTextMultiLine",value:function($,_r,_i,_s,ga,_l){var _c=C0(_i,2),_p=_c[0],_f=_c[1],ey=q0.device_pixel_ratio*ga.supersample,iy=ga.stroke_width||0,ly=ga.stroke;ga.background_color&&($.fillStyle=ga.background_color,$.fillRect(_p,_f,_s.texture_size[0],_s.texture_size[1]));var uy=ga.outline_width*ey,cy=ga.outline_color;uy&&cy&&($.strokeStyle=cy,$.lineWidth=uy,$.strokeRect(_p+uy/2,_f+uy/2,_s.texture_size[0]-uy,_s.texture_size[1]-uy)),(ga.background_color||uy&&cy)&&this.setFont($,ga);for(var yy,ay,by,Ey,ky=_s.line_height,Oy=_f,Ty=0;Ty<_r.length;Ty++){var Ly=_r[Ty];this.drawTextLine($,Ly,[_p,Oy],_s,ga,_l),Oy+=ky}cE.draw_label_collision_boxes&&($.save(),yy=ey*(this.horizontal_text_buffer+ga.outline_width+iy+(ga.padding[1]+ga.padding[3])/2),ay=ey*(this.vertical_text_buffer+ga.outline_width+(ga.padding[0]+ga.padding[2])/2),by=_s.collision_size,$.strokeStyle="blue",$.lineWidth=2,$.strokeRect(_p+yy,_f+ay,ey*by[0],ey*by[1]),_l==="curved"&&ly&&0<iy&&$.strokeRect(_p+_s.texture_size[0]+yy,_f+ay,ey*by[0],ey*by[1]),$.restore()),cE.draw_label_texture_boxes&&($.save(),Ey=_s.texture_size,$.strokeStyle="green",$.lineWidth=2,$.strokeRect(_p+2,_f+2,Ey[0]-4,Ey[1]-4),_l==="curved"&&ly&&0<iy&&$.strokeRect(_p+2+_s.texture_size[0],_f+2,Ey[0]-4,Ey[1]-4),$.restore())}},{key:"drawTextLine",value:function($,_r,_i,_s,ga,_l){var _c,_p=C0(_i,2),_f=_p[0],ey=_p[1],iy=ga.stroke,ly=ga.stroke_width,uy=ly===void 0?0:ly,cy=ga.transform,ky=ga.align,yy=ga.supersample,ay=ga.padding,by=ga.outline_width,Ey=q0.device_pixel_ratio*yy,ky=ky||"center",Oy=_s.texture_size,Ty=_s.line_height,Ly=Ey*(this.vertical_text_buffer+by),Ny=Ey*(this.horizontal_text_buffer+by+uy),Uy=this.applyTextTransform(_r.text,cy);ky==="left"?_c=_f+Ny+ay[3]*Ey:ky==="center"?_c=_f+Oy[0]/2-_r.width/2-(ay[1]-ay[3])*Ey/2:ky==="right"&&(_c=_f+Oy[0]-_r.width-Ny-ay[1]*Ey);var Xy,Yy=ey+Ly+Ty+ay[0]*Ey;iy&&0<uy&&(Xy=_l==="curved"?Oy[0]:0,$.strokeText(Uy,_c+Xy,Yy)),$.fillText(Uy,_c,Yy)}},{key:"rasterize",value:function($,_r,_i,_s,ga,_l){return H1.removeForTile(_i),H1.add({type:"rasterizeLabels",run:this.processRasterizeTask.bind(this),cancel:j.returnNoTextures,pause_factor:2,user_moving_view:!1,texts:$,textures:_r,texture_prefix:_s,gl:ga,tile_id:_i,texture_manager:_l,cursor:{styles:Object.keys($),texts:null,style_idx:0,text_idx:null,texture_idx:0,texture_names:[]}})}},{key:"processRasterizeTask",value:function($){if(!H1.shouldContinue($))return!1;for(var _r=$.cursor,_i=$.texts,_s=$.textures;_r.texture_idx<$.textures.length;){for(var ga=!1,_l=_s[_r.texture_idx],_c=this.createCanvas.apply(this,u1(_l.texture_size)),_p=_c.getContext("2d");_r.style_idx<_r.styles.length;){var _f=_r.styles[_r.style_idx];_r.text_idx==null&&(_r.text_idx=0,_r.texts=Object.keys(_i[_f]));for(var ey=_i[_f],iy=!0;_r.text_idx<_r.texts.length;){var ly=_r.texts[_r.text_idx],uy=ey[ly],cy=uy.text_settings;if(iy&&(this.setFont(_p,cy),iy=!1),cy.can_articulate){uy.texcoords=uy.texcoords||{};for(var yy=0;yy<uy.type.length;yy++){var ay=uy.type[yy];switch(ay){case"straight":if(uy.textures[yy]!==_r.texture_idx)continue;var by,Ey,ky,Oy,Ty=uy.isRTL?ly.split().reverse().join():ly,Ly=_l.texcoord_cache[_f][Ty],Ny=void 0;Ly.texcoord?Ny=Ly.texcoord:(by=Ly.texture_position,ky=(Ey=this.textSize(_p,_f,Ty,cy)).size,Oy=Ey.lines,this.drawTextMultiLine(_p,Oy,by,ky,cy,ay),Ny=$.texture_manager.getTexcoordsForSprite(by,ky.texture_size,_l.texture_size),Ly.texcoord=Ny),uy.texcoords[ay]={texcoord:Ny,texture_id:Ly.texture_id};break;case"curved":var Uy=uy.segments;uy.texcoords.curved=[],uy.texcoords_stroke=[];for(var Xy,Yy,Wy,_g,y0,_m,s0,R0,Q0=0;Q0<Uy.length;Q0++)uy.textures[yy][Q0]===_r.texture_idx&&(Xy=Uy[Q0],_g=Wy=void 0,(Yy=_l.texcoord_cache[_f][Xy]).texcoord&&Yy.texcoord_stroke?(Wy=Yy.texcoord,_g=Yy.texcoord_stroke):(y0=Yy.texture_position,s0=(_m=this.textSize(_p,_f,Xy,cy)).size,R0=_m.lines,this.drawTextMultiLine(_p,R0,y0,s0,cy,ay),Wy=$.texture_manager.getTexcoordsForSprite(y0,s0.texture_size,_l.texture_size),_g=cy.stroke&&0<cy.stroke_width?$.texture_manager.getTexcoordsForSprite([y0[0]+s0.texture_size[0],y0[1]],s0.texture_size,_l.texture_size):(ga=!0,$.texture_manager.getTexcoordsForSprite([_l.texture_size[0],_l.texture_size[1]],[0,0],_l.texture_size)),Yy.texcoord=Wy,Yy.texcoord_stroke=_g),uy.texcoords_stroke.push(_g),uy.texcoords.curved.push({texcoord:Wy,texture_id:Yy.texture_id}))}}}else{var W0=this.textSize(_p,_f,ly,cy).lines;for(var t1 in uy.align)uy.align[t1].texture_id===_r.texture_idx&&(this.drawTextMultiLine(_p,W0,uy.align[t1].texture_position,uy.size,{stroke:cy.stroke,stroke_width:cy.stroke_width,transform:cy.transform,supersample:cy.supersample,align:t1,background_color:cy.background_color,outline_width:cy.outline_width,outline_color:cy.outline_color,padding:cy.padding,fill:cy.fill,font_css:cy.font_css,px_size:cy.px_size}),uy.align[t1].texcoords=$.texture_manager.getTexcoordsForSprite(uy.align[t1].texture_position,uy.size.texture_size,_l.texture_size))}_r.text_idx++}_r.text_idx=null,_r.style_idx++}ga===!0&&(_p.fillStyle="rgba(0, 0, 0, 0)",_p.fillRect(_c.width-1,_c.height-1,1,1));var o1=$.texture_prefix+_r.texture_idx;$.texture_manager.create($.gl,o1,{element:_c,filtering:"linear",UNPACK_PREMULTIPLY_ALPHA_WEBGL:!0}),_r.texture_names.push(o1),_r.texture_idx++,_r.style_idx=0,_c.width=0,_c.height=0}return H1.finish($,_r.texture_names),!0}},{key:"setTextureTextPositions",value:function($){var _r={texture_id:0,texcoord_cache:{}},_i=[];for(var _s in $){var ga=$[_s];for(var _l in ga){var _c=ga[_l],_p=_c.text_settings,_f=_p.can_articulate,ey=_p.stroke,iy=_p.stroke_width;if(_f){_c.textures=[],_r.texcoord_cache[_s]=_r.texcoord_cache[_s]||{};for(var ly=0;ly<_c.type.length;ly++)switch(_c.type[ly]){case"straight":var uy,cy=_c.isRTL?_l.split().reverse().join():_l;_r.texcoord_cache[_s][cy]||(uy=_c.size.texture_size,_r.texcoord_cache[_s][cy]={},this.placeText(uy[0],uy[1],{can_articulate:_f,style:_s,word:cy})),_c.textures[ly]=_r.texture_id;break;case"curved":_c.textures[ly]=[];for(var yy=0;yy<_c.segment_sizes.length;yy++){var ay,by,Ey=_c.segments[yy];_r.texcoord_cache[_s][Ey]||(by=(ay=_c.segment_sizes[yy].texture_size)[0],ey&&0<iy&&(by*=2),_r.texcoord_cache[_s][Ey]={},this.placeText(by,ay[1],{can_articulate:_f,style:_s,word:Ey})),_c.textures[ly].push(_r.texture_id)}}}else{var ky=_c.size.texture_size;this.placeText(ky[0],ky[1],{can_articulate:_f,text_info:_c})}}}var Oy=this.layout.export(),Ty=Oy.items,Ly=Oy.width,Ny=Oy.height;_r.texcoord_cache={};for(var Uy=0,Xy=Ty.length;Uy<Xy;Uy++){var Yy=Ty[Uy],Wy=Yy.x,_g=Yy.y;if(Yy.meta.can_articulate){var s0=Yy.meta,R0=s0.style,Q0=s0.word;_r.texcoord_cache[R0]=_r.texcoord_cache[R0]||{},_r.texcoord_cache[R0][Q0]||(_r.texcoord_cache[R0][Q0]={texture_id:_r.texture_id,texture_position:[Wy,_g]})}else{var y0=Yy.meta.text_info;for(var _m in y0.align)y0.align[_m].texture_id=_r.texture_id,y0.align[_m].texture_position=[Wy,_g]}}return 0<Ly&&0<Ny&&(_i[_r.texture_id]={texture_size:[Ly,Ny],texcoord_cache:_r.texcoord_cache}),_i}},{key:"placeText",value:function($,_r,_i){this.layout.addItem({width:$+this.vertical_text_buffer,height:_r+this.vertical_text_buffer,meta:_i})}},{key:"applyTextTransform",value:function($,_r){return _r==="capitalize"?$.replace(/\w\S*/g,function(_i){return _i.charAt(0).toUpperCase()+_i.substr(1)}):_r==="uppercase"?$.toUpperCase():_r==="lowercase"?$.toLowerCase():$}}],[{key:"fontPixelSize",value:function($){if($!=null){var _r=C0(($=typeof $=="string"?$:String($)).match(j.font_size_re)||[],3),_i=_r[1],_s=_r[2];return(_s=_s||"px")==="em"?_i*=16:_s==="pt"?_i/=.75:_s==="%"&&(_i/=6.25),_i=Gy.parsePositiveNumber(_i),_i*=q0.device_pixel_ratio}}},{key:"pruneTextCache",value:function(){j.cache.text_count>j.cache.text_count_max&&(j.cache.text={},j.cache.text_count=0,o0("debug","CanvasText: pruning text cache")),Object.keys(j.cache.segment).length>j.cache.segment_count_max&&(j.cache.segment={},o0("debug","CanvasText: pruning segment cache"))}}]),j}();D_.font_size_re=/((?:[0-9]*\.)?[0-9]+)\s*(px|pt|em|%)?/,D_.cache={text:{},text_count:0,text_count_max:2e3,segment:{},segment_count_max:2e3,stats:{text_hits:0,text_misses:0,segment_hits:0,segment_misses:0}},D_.EMPTY_TEXTURES_ARR=[],D_.returnNoTextures=function(){return D_.EMPTY_TEXTURES_ARR};var HO=new RegExp("[֑-߿‏‫‮יִ-﷽ﹰ-ﻼ]");function RC(j){return HO.test(j)}var n3="\0-/:-@[-`{-¿×÷ʹ-˿ -⯿‐-\u2029‬ -⯿",qO=new RegExp("["+n3+"]+");function LC(j){return qO.test(j)}var $O=new RegExp("^["+n3+"؀-ۿ]+"),WO=new RegExp("["+n3+"آ-إاد-زوٱ-ٷڈ-ڙۄ-ۋۏےۓۮۯ]"),YO=new RegExp("^[ؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ۭ]+"),PC="[̀-֑ͯ-ׇֽֿׁׂׅׄަ-ްऀ-ःऺ-ौॎॏ॑-ॗॢॣঁ-ঃ়া-ৌৗৢৣਁ-ਃ਼-ੌੑઁ-ઃ઼ા-ૌૢૣଁ-ଃ଼ା-ୌୖୗୢୣஂா-்ௗఀ-ఃా-ౌౕౖౢౣಁ-ಃ಼ಾ-ೌೕೖೢೣഁ-ഃാ-ൌൎൗൢൣංඃ්-ෟෲෳัิ-ฺ็-๎ັິ-ຼ່-ໍ༹༘༙༵༷༾༿ཱ-ྃ྆྇ྍ-ྼ࿆ါ-း်-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ឴-៑៓ᩕ-ᩞᩡ-᩼᷀-᷿⃐-⃿]",KO=new RegExp("^.(?:"+PC+"+)?([्্੍્୍్್്྄္្᩠᩿]\\W(?:"+PC+"+)?)*"),NC={Mongolian:"᠀-᢯"},XO=Object.keys(NC).map(function(j){return NC[j]}).join(""),ZO=new RegExp("["+XO+"]"),JO=2,jC=function(){function j($){var _r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1/0,_i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1/0;F0(this,j),this.width=0,this.height=0,this.lines=[],this.max_lines=_r,this.text_wrap=_i,this.context=$}return H0(j,[{key:"createLine",value:function($){return this.lines.length<this.max_lines&&new QO($,this.text_wrap)}},{key:"push",value:function($){if(this.lines.length<this.max_lines){var _r=this.context.measureText($.text).width;return($.width=_r)>this.width&&(this.width=Math.ceil(_r)),this.lines.push($),this.height+=$.height,!0}return this.addEllipsis(),!1}},{key:"advance",value:function($,_r){return!!this.push($)&&this.createLine(_r)}},{key:"addEllipsis",value:function(){var $=this.lines[this.lines.length-1],_r=Math.ceil(this.context.measureText(j.ellipsis).width);$.append(j.ellipsis),$.width+=_r,$.width>this.width&&(this.width=$.width)}},{key:"finish",value:function($){$?this.push($):this.addEllipsis()}}],[{key:"parse",value:function($,_r,_i,_s,ga){for(var _l=typeof _r=="number"?$.split(" "):[$],_c=new j(ga,_i,_r),_p=_c.createLine(_s),_f=0;_f<_l.length;_f++){for(var ey=_l[_f].split(`
`),iy=_f===0,ly=0;ly<ey.length&&_p;ly++){var uy=ey[ly];RC(uy)&&LC(uy[uy.length-1])&&(uy+="‏");var cy=iy?uy:" "+uy;if(_r&&0<_f&&_p.exceedsTextwrap(cy)){if(!(_p=_c.advance(_p,_s)))break;_p.append(uy),iy=!0}else _p.append(cy);ly<ey.length-1&&(_p=_c.advance(_p,_s),iy=!0)}_f===_l.length-1&&_c.finish(_p)}return _c}}]),j}();jC.ellipsis="...";var QO=function(){function j(){var $=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,_r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;F0(this,j),this.chars=0,this.text="",this.height=Math.ceil($),this.text_wrap=_r}return H0(j,[{key:"append",value:function($){this.chars+=$.length,this.text+=$}},{key:"exceedsTextwrap",value:function($){return $.length+this.chars>this.text_wrap}}]),j}(),tR={resetText:function(){this.texts={}},freeText:function(j){delete this.texts[j.id]},parseTextFeature:function(j,$,_r,_i){var _s=this.parseTextSource(j,$,_r);if(_s!=null&&_s!==""){var ga=r3.compute(j,$,_r);if(ga){var _l=r3.key(ga);this.texts[_i.id]=this.texts[_i.id]||{};var _c=this.texts[_i.id][_l]=this.texts[_i.id][_l]||{};if(_s instanceof Object){var _p=[],_f=_s.left+"-"+_s.right;for(var ey in _s){var iy,ly=_s[ey];ly&&(iy=this.computeTextLayout({},j,$,_r,_i,ly,ga,_f,ey),_c[ly]||(_c[ly]={text_settings:ga,ref:0}),_p.push({draw:$,text:ly,text_settings_key:_l,layout:iy}))}return 0<_p.length&&_p}var uy=this.computeTextLayout({},j,$,_r,_i,_s,ga);return _c[_s]||(_c[_s]={text_settings:ga,ref:0}),{draw:$,text:_s,text_settings_key:_l,layout:uy}}}},parseTextSource:function(j,$,_r){var _i,_s=$.text_source||"name";if(_s!=null&&x1(_s)==="object")for(var ga in _i={},_s)_i[ga]=this.parseTextSourceValue(_s[ga],j,_r);else _i=this.parseTextSourceValue(_s,j,_r);return _i},parseTextSourceValue:function(j,$,_r){var _i;if(Array.isArray(j)){for(var _s=0;_s<j.length;_s++)if(typeof j[_s]=="string"?_i=$.properties[j[_s]]:typeof j[_s]=="function"&&(_i=j[_s](_r)),_i)return _i}else typeof j=="string"?_i=$.properties[j]:j instanceof Function&&(_i=j(_r));return _i},prepareTextLabels:function(j,$,_r){var _i=this;return Object.keys(this.texts[j.id]||{}).length===0?Promise.resolve([]):S0.postMessage(this.main_thread_target+".calcTextSizes",j.id,this.texts[j.id]).then(function(_s){var ga=_s.texts;return j.canceled?(o0("trace","Style ".concat(_i.name,": stop tile build because tile was canceled: ").concat(j.key,", post-calcTextSizes()")),[]):(_i.texts[j.id]=ga||[],ga?_i.buildTextLabels(j,_r):(L_.abortTile(j.id),[]))})},collideAndRenderTextLabels:function(j,$,_r){var _i=this;return this.prepareTextLabels(j,$,_r).then(function(_s){return _s.length===0?(L_.collide([],$,j.id),Promise.resolve({})):L_.collide(_s,$,j.id).then(function(ga){if(j.canceled)return o0("trace","stop tile build because tile was canceled: ".concat(j.key,", post-collide()")),{};var _l=_i.texts[j.id];return _l==null||ga.length===0?{}:(_i.cullTextStyles(_l,ga),ga.forEach(function(_c){var _p=_c.text_settings_key,_f=_l[_p]&&_l[_p][_c.text];_f.text_settings.can_articulate?(_f.type||(_f.type=[]),_f.type.indexOf(_c.label.type)===-1&&_f.type.push(_c.label.type)):(_f.align=_f.align||{},_f.align[_c.label.align]={})}),{labels:ga,texts:_l,textures:[]})})})},cullTextStyles:function(j,$){for(var _r=0;_r<$.length;_r++){var _i=$[_r];j[_i.text_settings_key][_i.text].ref++}for(var _s in j)for(var ga in j[_s])j[_s][ga].ref<1&&delete j[_s][ga];for(var _l in j)Object.keys(j[_l]).length===0&&delete j[_l]},calcTextSizes:function(j,$){return this._canvas_text||(this._canvas_text=new D_,this._canvas_ctx_for_sizes=this._canvas_text.createCanvas().getContext("2d")),this._canvas_text.textSizes(j,$,this._canvas_ctx_for_sizes)},preprocessText:function(j){if(j&&j.font&&x1(j.font)==="object")return j.font.fill=Gy.createPropertyCache(j.font.fill),j.font.stroke&&(j.font.stroke.color=Gy.createPropertyCache(j.font.stroke.color)),j.background&&j.background.color&&(j.background.color=Gy.createPropertyCache(j.background.color)),j.outline&&(j.outline.color&&(j.outline.color=Gy.createPropertyCache(j.outline.color)),j.outline.width&&(j.outline.width=Gy.createPropertyCache(j.outline.width,Gy.parsePositiveNumber))),j.padding&&(Array.isArray(j.padding)?j.padding.length===2&&(j.padding=[j.padding[0],j.padding[1],j.padding[0],j.padding[1]]):j.padding=Array(4).fill(j.padding),j.padding=Gy.createPropertyCache(j.padding,function($){return $.map(Gy.parsePositiveNumber)})),j.font.px_size=Gy.createPropertyCache(j.font.size||r3.defaults.size,D_.fontPixelSize),j.font.stroke&&j.font.stroke.width!=null&&(j.font.stroke.width=Gy.createPropertyCache(j.font.stroke.width,Gy.parsePositiveNumber)),j.offset=Gy.createPropertyCache(j.offset,function($){return Array.isArray($)&&$.map(Gy.parseNumber)}),j.buffer=Gy.createPropertyCache(j.buffer,function($){return(Array.isArray($)?$:[$,$]).map(Gy.parsePositiveNumber)}),j.repeat_distance=Gy.createPropertyCache(j.repeat_distance||Zy.tile_size,Gy.parsePositiveNumber),j},computeTextLayout:function(j,$,_r,_i,_s,ga,_l,_c,_p){var _f=j||{};return(_f=this.computeLayout(_f,$,_r,_i,_s)).repeat_distance&&(_c&&(_f.repeat_group+="/"+_c),_f.repeat_group+="/"+ga),_f.subdiv=_s.overzoom2,_f.align=_r.align,_f.italic=_l.style!=="normal",_p==="right"?_f.orientation=1:_p==="left"&&(_f.orientation=-1),_f}},Gx=Math.PI/180,eR=function(){function j($,_r){F0(this,j),this._min_zoom=H.util.constants.DEFAULT_MIN_ZOOM_LEVEL,this._max_zoom=H.util.constants.DEFAULT_MAX_ZOOM_LEVEL,this._viewport=$,this._center_offset=[],this._center_offset_normalized=[],this._viewport_aspect_ratio=1,this._focal_length=[[16,2],[17,2.5],[18,3],[19,4],[20,6]],this._view_matrix=new Float64Array(16),this._projection_matrix=new Float64Array(16),this._heading_matrix=new Float64Array(16),this._tilt_matrix=new Float64Array(16),this._transformation_matrix=new Float64Array(16),this._camera_matrix=new Float64Array(16),this._lookAtData={position:[0,0,0],zoom:0,tile_level:0,tetragon:void 0,bounds:void 0,unpadded_bounds:void 0,distance:void 0,tilt:0,incline:0,heading:180},this._zoom_direction=0,this._horizon=0,this.handleViewportUpdate(!0),_r?this.setLookAtData(_r):this._updateMatrices(),M0.replaceBlock("camera",`
            uniform mat4 u_projection;
            uniform vec3 u_eye;
            uniform vec2 u_center_offset;

            void cameraProjection (inout vec4 position) {
                position = u_projection * position;
            }`)}return H0(j,[{key:"getZoomForBounds",value:function($,_r,_i,_s){var ga,_l=this.clone(),_c=this._max_zoom,_p=this._min_zoom,_f=(_c-_p)/2,ey=_c-_f,iy=_r,ly=L1.getBBoxCenter(L1.getBBox($));for(iy===void 0?iy=ly:(ga=ly[0]-iy[0],Math.abs(ga)>Zy.half_circumference_meters+1e-8&&(iy[0]+=Math.round(ga/Zy.circumference_meters)*Zy.circumference_meters));.001<_f;)(function(){_l.setLookAtData({zoom:ey,position:iy,tilt:_i,heading:_s});var uy,cy,yy,ay,by,Ey=_l.getLookAtData().bounds;$.every(function(ky){return L1.isPointInsidePolygon(ky,Ey)})?_p=ey:(cy=(uy=C0(L1.getBBox(Ey),4))[0],yy=uy[1],ay=uy[2],by=uy[3],ay-cy+1e-8>=Zy.circumference_meters&&by-yy+1e-8>=Zy.circumference_meters?_p=ey:_c=ey),ey=_c-(_f=(_c-_p)/2)})();return _p}},{key:"setZoomConstraints",value:function($,_r){this._min_zoom=$,this._max_zoom=_r,this.setLookAtData(this.getLookAtData())}},{key:"setLookAtData",value:function($,_r){var _i,_s,ga,_l,_c,_p=$.position,_f=$.zoom;_p===_i&&$.bounds!==_i&&(_p=L1.getBBoxCenter(L1.getBBox($.bounds))),_f===_i&&$.bounds!==_i&&(_f=this.getZoomForBounds($.bounds,_p,$.tilt,$.heading)),_r!==_i&&(_s=_p||this.screenToWorld(_r)),_f!==_i&&(_f=L1.clamp(_f,this._min_zoom,this._max_zoom),(ga=q0.zoomToTileLevel(_f))!==(_l=this._lookAtData.tile_level)&&(this._zoom_direction=_l<ga?1:-1),this._lookAtData.zoom=_f,this._lookAtData.tile_level=ga),$.tilt!==_i&&(this._lookAtData.tilt=$.tilt),$.heading!==_i&&(this._lookAtData.heading=$.heading),_r!==_i?(this._updateMatrices(),_c=this.screenToWorld(_r),this._lookAtData.position[0]-=_c[0]-_s[0],this._lookAtData.position[1]-=_c[1]-_s[1]):_p&&(this._lookAtData.position=_p),this._lookAtData.position[2]=0,this._lookAtData.position[1]=L1.clamp(this._lookAtData.position[1],-Zy.half_circumference_meters,Zy.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"getZoomDirection",value:function(){return this._zoom_direction}},{key:"resetZoomDirection",value:function(){this._zoom_direction=0}},{key:"getLookAtData",value:function(){return this._lookAtData}},{key:"handleViewportUpdate",value:function($){var _r=0<arguments.length&&$!==void 0&&$,_i=this._viewport,_s=_i.width,ga=_i.height;this._viewport_aspect_ratio=_s/ga;var _l=this._viewport.center.x-(_s/2<<0),_c=this._viewport.center.y-(ga/2<<0);this._center_offset[0]=_l,this._center_offset[1]=_c,this._center_offset_normalized[0]=_l/_s,this._center_offset_normalized[1]=_c/-ga,_r||(this._updateMatrices(),this._updateVisibleBounds())}},{key:"setupMatrices",value:function($,_r){E_.multiply($.model_view32,this._view_matrix,$.model),_r.uniform("Matrix4fv","u_modelView",$.model_view32),s4.normalFromMat4($.normal32,$.model_view32),s4.invert($.inverse_normal32,$.normal32),_r.uniform("Matrix3fv","u_normalMatrix",$.normal32),_r.uniform("Matrix3fv","u_inverseNormalMatrix",$.inverse_normal32)}},{key:"_updateMatrices",value:function(){var $=this._viewport.height*Zy.metersPerPixel(this._lookAtData.zoom),_r=q0.interpolate(this._lookAtData.zoom,this._focal_length);this._lookAtData.distance=$/2*_r;var _i=this._lookAtData.position[0],_s=this._lookAtData.position[1];E_.lookAt(this._view_matrix,Qx.fromValues(_i,_s,0),Qx.fromValues(_i,_s,-1),Qx.fromValues(0,1,0)),this._heading_matrix=E_.identity(this._heading_matrix);var ga=180-this._lookAtData.heading;ga*=Gx,this._heading_matrix[0]=Math.cos(ga),this._heading_matrix[1]=-Math.sin(ga),this._heading_matrix[4]=Math.sin(ga),this._heading_matrix[5]=Math.cos(ga),this._tilt_matrix=E_.identity(this._tilt_matrix),ga=0<(ga=this._lookAtData.tilt?this._lookAtData.tilt*Gx:0)?-ga:ga,this._tilt_matrix[5]=Math.cos(ga),this._tilt_matrix[6]=Math.sin(ga),this._tilt_matrix[9]=-Math.sin(ga),this._tilt_matrix[10]=Math.cos(ga),E_.multiply(this._transformation_matrix,this._tilt_matrix,this._heading_matrix),E_.multiply(this._view_matrix,this._transformation_matrix,this._view_matrix);var _l=2*Math.atan(1/_r),_c=2*this._lookAtData.distance;this._depth_buffer_adjustment=2/Math.log(_c),E_.perspective(this._projection_matrix,_l,this._viewport_aspect_ratio,1,_c),this._projection_matrix[8]=2*-this._center_offset_normalized[0],this._projection_matrix[9]=2*-this._center_offset_normalized[1],E_.translate(this._projection_matrix,this._projection_matrix,Qx.fromValues(0,0,-this._lookAtData.distance)),this._camera_matrix=E_.multiply(this._camera_matrix,this._projection_matrix,this._view_matrix)}},{key:"_updateVisibleBounds",value:function(){var $,_r,_i,_s,ga,_l=this._viewport,_c=_l.width,_p=_l.height,_f=_l.padding,ey=this._lookAtData.tilt*Math.PI/180;this._horizon=Math.max((_f.top+_p)/2-Math.cos(ey)*(_f.top*(1-Math.sin(ey))+.75*_p),0),this._lookAtData.tetragon=[this.screenToWorld([0,this._horizon]),this.screenToWorld([_c,this._horizon]),this.screenToWorld([_c,_p]),this.screenToWorld([0,_p])],this._lookAtData.unpadded_bounds=this._clipAgainstGeoBounds(this._lookAtData.tetragon),_f.left===0&&_f.top===0&&_f.right===0&&_f.bottom===0?this._lookAtData.bounds=this._lookAtData.unpadded_bounds:($=_f.left,_r=Math.max(this._horizon,_f.top),_i=_c-_f.right,_s=_p-_f.bottom,ga=[this.screenToWorld([$,_r]),this.screenToWorld([_i,_r]),this.screenToWorld([_i,_s]),this.screenToWorld([$,_s])],this._lookAtData.bounds=this._clipAgainstGeoBounds(ga))}},{key:"_clipAgainstGeoBounds",value:function($){var _r,_i=C0(L1.getBBox($),4),_p=_i[0],_f=_i[1],ey=_i[2],iy=_i[3],_s=Zy.half_circumference_meters,ga=[[_p-1,+_s],[ey+1,+_s],[ey+1,-_s],[_p-1,-_s]],_l=L1.clipPolygon(ga,$)[0],_c=C0(L1.getBBox(_l),4),_p=_c[0],_f=_c[1],ey=_c[2],iy=_c[3];ey-_p>=Zy.circumference_meters&&(_l=[[(_r=(ey-_p)/2)-_s,iy],[_r+_s,iy],[_r+_s,_f],[_r-_s,_f]]);var ly=[];return _l&&(ly=L1.splitLegs(_l,_s)),ly}},{key:"applyPxOffset",value:function($){var _r=C0($,2),_i=_r[0],_s=_r[1],ga=Math.PI-this._lookAtData.heading*Gx,_l=Zy.metersPerPixel(this._lookAtData.zoom);this._lookAtData.position[0]+=(_i*Math.cos(ga)+_s*Math.sin(ga))*_l,this._lookAtData.position[1]-=(_s*Math.cos(ga)-_i*Math.sin(ga))*_l,this._lookAtData.position[1]=L1.clamp(this._lookAtData.position[1],-Zy.half_circumference_meters,Zy.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"screenToWorld",value:function($){var _r=C0($,2),_i=_r[0],_s=_r[1],ga=this._viewport,_l=ga.width,_c=ga.height;return _l===0||_c===0?[0,0]:(_i-=_l/2,_s-=_c/2,this._clipCoordsToWorldPlaneCoords([2*(_i+_l/2)/_l-1,1-2*(_s+_c/2)/_c,-1,1]))}},{key:"_clipToScreenCoords",value:function($){var _r=this._viewport,_i=_r.width,_s=_r.height;return[(.5*$[0]+.5)*_i,_s-(.5*$[1]+.5)*_s]}},{key:"_isScreenPointInViewPort",value:function($){var _r=this._viewport,_i=_r.width,_s=_r.height;return 0<=$[0]&&$[0]<=_i&&0<=$[1]&&$[1]<=_s}},{key:"worldToScreen",value:function($,_r){var _i,_s,ga,_l,_c,_p,_f=1<arguments.length&&_r!==void 0&&_r;return $[2]||($[2]=0),_f?(_i=this._worldToClipCoords($),_c=this._clipToScreenCoords(_i)):(_s=Math.sign(this._lookAtData.position[0]),ga=Math.trunc(this._lookAtData.position[0]/Zy.circumference_meters+_s/2),$[0]+=Zy.circumference_meters*ga,_l=this._worldToClipCoords($),_p=_c=this._clipToScreenCoords(_l),this._isScreenPointInViewPort(_c)||(_l=this._worldToClipCoords([$[0]+Zy.circumference_meters,$[1],$[2]]),_c=this._clipToScreenCoords(_l),this._isScreenPointInViewPort(_c)||(_l=this._worldToClipCoords([$[0]-Zy.circumference_meters,$[1],$[2]]),_c=this._clipToScreenCoords(_l)),this._isScreenPointInViewPort(_c)||(_c=_p))),_c}},{key:"getHorizon",value:function(){return this._horizon}},{key:"_clipCoordsToWorldPlaneCoords",value:function($){var _r=[],_i=this._lookAtData.distance,_s=this._lookAtData.position,ga=[0,0,_i,0],_l=0,_c=_i*Math.sin(Gx*this._lookAtData.tilt)*Math.cos(Gx*this._lookAtData.heading),_p=_i*Math.sin(Gx*this._lookAtData.tilt)*Math.sin(Gx*this._lookAtData.heading),_f=new Float64Array(16),ey=new Float64Array(16);return E_.invert(_f,this._projection_matrix),_w.transformMat4(_r,$,_f),_r[2]=-1,_r[3]=0,E_.invert(ey,this._view_matrix),_w.transformMat4(_r,_r,ey),_w.normalize(_r,_r),_w.transformMat4(ga,ga,this._transformation_matrix),_r[2]!==0&&(_l=-ga[2]/_r[2]),_w.scale(_r,_r,_l),[_s[0]+(_r[0]+_p),_s[1]+(_r[1]+_c)]}},{key:"_worldToClipCoords",value:function($){var _r=[$[0],$[1],$[2],1];return _w.transformMat4(_r,_r,this._view_matrix),_w.transformMat4(_r,_r,this._projection_matrix),_w.scale(_r,_r,1/_r[3]),_r}},{key:"setupProgram",value:function($){$.uniform("Matrix4fv","u_projection",this._projection_matrix),$.uniform("3f","u_eye",[0,0,this._lookAtData.distance]),$.uniform("2fv","u_center_offset",this._center_offset_normalized),$.uniform("1f","u_tilt",this._lookAtData.tilt*Gx),$.uniform("1f","u_heading",this._lookAtData.heading*Gx),$.uniform("1f","u_near_plane",1),$.uniform("1f","u_depth_buffer_adjustment",this._depth_buffer_adjustment)}},{key:"getTransformationMatrix",value:function(){return this._transformation_matrix}},{key:"getCameraMatrix",value:function(){return this._camera_matrix}},{key:"clone",value:function(){var $=new j(this._viewport,this._lookAtData);return $.setZoomConstraints(this._min_zoom,this._max_zoom),$}},{key:"getViewport",value:function(){return this._viewport}}]),j}();function DC(j){return j.x===void 0?j[0]:j.x}function zC(j){return j.y===void 0?j[1]:j.y}function FC(j,$){return DC(j)-DC($)}function BC(j,$){return zC(j)-zC($)}function UC(j){return j.sort(FC)}function GC(j,$){for(var _r,_i=j[0],_s=_i,ga=0;ga<j.length;ga+=1)$(_r=j[ga],_i)<0?_i=_r:0<$(_r,_s)&&(_s=_r);return[_i,_s]}function VC(j,$){return Object.values($.reduce(function(_r,_i){var _s=_i[+j];return _r[_s]||(_r[_s]=[]),_r[_s].push(_i),_r},{}))}function HC(j,$,_r){var _i=+j,_s=$[_i],ga=_r[_i];if(ga<_s)return[];var _l=[$];if(ga<_s)return _l;for(var _c=$[(1+_i)%2],_p=j?function(ey){return _l.push([_c,ey])}:function(ey){return _l.push([ey,_c])},_f=_s+1;_f<ga;_f+=1)_p(_f);return _l.push(_r),_l}function qC(j,$){return HC(!1,j,$)}function $C(j,$){return HC(!0,j,$)}function uT(j){var $={},_r=[];return j.forEach(function(_i){var _s=_i.key||(Array.isArray(_i)?"".concat(_i[0],"/").concat(_i[1]):"".concat(_i.x,"/").concat(_i.y));$[_s]||($[_s]=!0,_r.push(_i))}),_r}function WC(j){return j.reduce(function($,_r){return $.concat(_r)})}function rR(j,$){if($<=0)return j;var _r,_i,_s=function(_l){var _c=C0(GC(_l,FC),2),_p=_c[0],_f=_c[1],ey=[_p[0]-$,_p[1]],iy=[_f[0]+$,_f[1]];return _l.concat(qC(ey,_p),qC(_f,iy))},ga=function(_l){var _c=C0(GC(_l,BC),2),_p=_c[0],_f=_c[1],ey=[_p[0],_p[1]-$],iy=[_f[0],_f[1]+$];return _l.concat($C(ey,_p),$C(_f,iy))};return uT((_i=VC(!1,j),_r=WC(_i.map(ga)),WC(VC(!0,_r).map(_s))))}function nR(j,$,_r){function _i(uy){return Object.values(Zy.metersToExactTileCoords(uy,j.tile_level))}var _s,ga,_l,_c,_p,_f,ey,iy,ly;return uT((_s=rR((_c=_i(j.tetragon[0]),_p=_i(j.tetragon[1]),_f=_i(j.tetragon[3]),ey=_i(j.tetragon[2]),iy=YC(_p,_c,_f),ly=YC(_f,ey,_p),uT(iy.concat(ly))),$),ga=j.tile_level,_l=_r,_s.map(function(uy){var cy=C0(uy,2),yy=cy[0],ay=cy[1];return z1.coord(Zy.wrapTile({x:yy,y:ay,z:ga},{x:!_l,y:!0}))})))}function YC(j,$,_r){var _i=(function(_c,_p,_f){var ey=C0(_c,2),iy=ey[0],ly=ey[1],uy=C0(_p,2),cy=uy[0],yy=uy[1],ay=C0(_f,2),by=ay[0],Ey=ay[1],ky=iy+(yy-ly)/(Ey-ly)*(by-iy);return[[[iy,ly]].concat(u1(UC([[cy,yy],[ky,yy]]))),[].concat(u1(UC([[cy,yy],[ky,yy]])),[[by,Ey]])]}).apply(void 0,u1([j,$,_r].sort(BC))),_s=C0(_i,2),ga=_s[0],_l=_s[1];return uT((function(_c,_p,_f){var ey=C0(_c,2),iy=ey[0],ly=ey[1],uy=C0(_p,2),cy=uy[0],yy=uy[1],ay=C0(_f,1)[0];return XC(iy,cy,ay,ly,yy)}).apply(void 0,u1(ga)).concat((function(_c,_p,_f){var ey=C0(_c,2),iy=ey[0],ly=ey[1],uy=C0(_p,1)[0],cy=C0(_f,2),yy=cy[0],ay=cy[1];return XC(yy,iy,uy,ay,ly)}).apply(void 0,u1(_l))))}var KC=.125;function XC(j,$,_r,_i,_s){var ga,_l,_c,_p,_f,ey,iy,ly,uy,cy,yy=Math.min(j,$),ay=Math.max(j,_r),by=Math.min(_i,_s),Ey=Math.max(_i,_s);if(Math.floor(_i)===Math.floor(_s))return JC(yy,ay,_i);if(Ey-by<KC)return ga=[ay,Ey],_l=C0([yy,by],2),_c=_l[0],_p=_l[1],_f=C0(ga,2),ey=_f[0],iy=_f[1],ly=ZC(_c,ey),uy=i3(ly,_p),cy=i3(ly,iy),uy.concat(cy);function ky(s0){Yy=Yy.concat(JC(Wy,_g,Math.floor(s0))),Wy+=Uy,_g+=Xy}var Oy,Ty,Ly=KC*((Ty=Ey)-(Oy=by))/(Math.ceil(Ty)-Math.floor(Oy)),Ny=(Ey-by)/Ly,Uy=($-j)/Ny,Xy=(_r-j)/Ny,Yy=[],Wy=j,_g=j;if(_i<_s)for(var y0=by;y0<=Ey;y0+=Ly)ky(y0);else for(var _m=Ey;by<=_m;_m-=Ly)ky(_m);return uT(Yy)}function i3(j,$){return j.map(function(_r){return[_r,$]})}function ZC(j,$){var _r=Math.floor(j),_i=Math.floor($);if(_i<_r)return[];if(_r===_i)return[_r];for(var _s=[],ga=_r;ga<=_i;ga+=1)_s.push(ga);return _s}function JC(j,$,_r){return i3(ZC(j,$),_r)}var iR=function(){function j($,_r){F0(this,j),UT(this),this.scene=$,this.createMatrices(),this.bounds=null,this.center_tile=null,this.panning=!1,this.panning_stop_at=0,this.pan_snap_timer=0,this.user_input_at=0,this.user_input_timeout=50,this.user_input_active=!1,this.size={},this.buffer=0,this.wrap=_r.wrapView!==!1,this.preserve_tiles_within_zoom=1,this.lookAtManipulator=new eR(_r.viewport),this._viewport=_r.viewport,this._offset_buffer=[0,0],this.handleViewportUpdate(!0)}return H0(j,[{key:"update",value:function(){this.pan_snap_timer=(new Date-this.panning_stop_at)/1e3,this.user_input_active=new Date-this.user_input_at<this.user_input_timeout,this.scene.tile_manager.updateTilesVisibilityCounters()}},{key:"handleViewportUpdate",value:function($){var _r=0<arguments.length&&$!==void 0&&$,_i=this._viewport,_s=_i.width,ga=_i.height;this.size.css={width:_s,height:ga},this.size.device={width:Math.round(_s*q0.device_pixel_ratio),height:Math.round(ga*q0.device_pixel_ratio)},this.lookAtManipulator.handleViewportUpdate(),_r||this.updateBounds()}},{key:"setLookAtData",value:function($,_r){j._setLookAtDataForManipulator(this.lookAtManipulator,$,_r),this.updateBounds()}},{key:"getLookAtData",value:function($){var _r=0<arguments.length&&$!==void 0&&$;return j._getLookAtDataFromManipulator(this.lookAtManipulator,_r)}},{key:"getBestLookAtData",value:function($,_r,_i){var _s=2<arguments.length&&_i!==void 0&&_i,ga=this.lookAtManipulator.clone();return j._setLookAtDataForManipulator(ga,$,_r),j._getLookAtDataFromManipulator(ga,_s)}},{key:"getTileLevel",value:function(){return this.lookAtManipulator.getLookAtData().tile_level}},{key:"applyPxOffset",value:function($){var _r=this._offset_buffer;_r[0]+=$[0],_r[1]+=$[1];var _i,_s,ga=Math.abs(_r[0]),_l=Math.abs(_r[1]);(1<=ga||1<=_l)&&(_i=~~_r[0],_s=~~_r[1],this.lookAtManipulator.applyPxOffset([ga<1?0:_i,_l<1?0:_s]),1<=ga&&(_r[0]-=_i),1<=_l&&(_r[1]-=_s),this.updateBounds())}},{key:"setPanning",value:function($){this.panning=$,this.panning||(this.panning_stop_at=+new Date)}},{key:"markUserInput",value:function(){this.user_input_at=+new Date}},{key:"ready",value:function(){return typeof this.size.css.width=="number"&&typeof this.size.css.height=="number"}},{key:"updateBounds",value:function(){var $,_r;this.markUserInput(),this.ready()&&(this.center_tile=Zy.tileForMeters(this.lookAtManipulator.getLookAtData().position,this.lookAtManipulator.getLookAtData().tile_level),$=this.lookAtManipulator.screenToWorld([0,this.size.css.height]),_r=this.lookAtManipulator.screenToWorld([this.size.css.width,0]),this.bounds={sw:{x:$[0],y:$[1]},ne:{x:_r[0],y:_r[1]}},this.scene.tile_manager.updateTilesForView(!0),this.trigger("move"),this.scene.requestRedraw())}},{key:"getTileGridFlatForBBox",value:function($,_r,_i,_s,ga,_l){var _c,_p=4<arguments.length&&ga!==void 0?ga:0,_f=!(5<arguments.length&&_l!==void 0)||_l,ey=this.lookAtManipulator.getLookAtData().tile_level,iy=Zy.tileForMeters([_r,$],ey),ly=Zy.tileForMeters([_s,_i],ey);iy.x-=_p,iy.y-=_p,ly.x+=_p,ly.y+=_p,_f===!1&&(_c=(1<<ey)-1,iy.x=Math.min(Math.max(0,iy.x),_c),iy.y=Math.min(Math.max(0,iy.y),_c),ly.x=Math.min(Math.max(0,ly.x),_c),ly.y=Math.min(Math.max(0,ly.y),_c));for(var uy=[],cy={},yy=iy.x;yy<=ly.x;yy++)for(var ay=iy.y;ay<=ly.y;ay++){var by=z1.coord(Zy.wrapTile({x:yy,y:ay,z:ey},{x:!_f,y:!0}));cy[by.key]||(cy[by.key]=!0,uy.push(by))}return uy}},{key:"getTileGridFlat",value:function(){return this.getTileGridFlatForBBox(this.bounds.ne.y,this.bounds.sw.x,this.bounds.sw.y,this.bounds.ne.x,this.buffer,this.wrap)}},{key:"getTileGridDistorted",value:function(){return nR(this.lookAtManipulator.getLookAtData(),this.buffer,this.wrap)}},{key:"findVisibleTileCoordinates",value:function(){if(!this.bounds)return[];var $=this.lookAtManipulator.getLookAtData(),_r=$.tilt,_i=$.heading;return _r===0&&_i===180?this.getTileGridFlat():this.getTileGridDistorted()}},{key:"createMatrices",value:function(){this.matrices={},this.matrices.model=new Float64Array(16),this.matrices.model32=new Float32Array(16),this.matrices.model_view=new Float64Array(16),this.matrices.model_view32=new Float32Array(16),this.matrices.normal=new Float64Array(9),this.matrices.normal32=new Float32Array(9),this.matrices.inverse_normal32=new Float32Array(9)}},{key:"setupTile",value:function($,_r){$.setupProgram(this.matrices,_r),this.lookAtManipulator.setupMatrices(this.matrices,_r)}},{key:"setupProgram",value:function($){var _r=this.lookAtManipulator.getLookAtData();$.uniform("2fv","u_resolution",[this.size.device.width,this.size.device.height]),$.uniform("3fv","u_map_position",[_r.position[0],_r.position[1],Math.trunc(1e5*_r.zoom)/1e5]),$.uniform("1f","u_meters_per_pixel",Zy.metersPerPixel(_r.zoom)),$.uniform("1f","u_device_pixel_ratio",q0.device_pixel_ratio),$.uniform("1f","u_view_pan_snap_timer",this.pan_snap_timer),$.uniform("1i","u_view_panning",this.panning),$.uniform("1f","u_horizon",this.lookAtManipulator.getHorizon()/(this.size.css.height/2)),this.lookAtManipulator.setupProgram($)}},{key:"isAnimating",value:function(){return this.pan_snap_timer<=.5}},{key:"xyToGeo",value:function($,_r){var _i=this.lookAtManipulator.screenToWorld([$,_r]),_s=C0(Zy.metersToLatLng(_i),2),ga=_s[0];return{lat:_s[1],lng:ga}}},{key:"geoToPixel",value:function($){var _r=Zy.latLngToMeters([$.lng,$.lat]);_r.push($.alt||0);var _i=this.lookAtManipulator.worldToScreen(_r);return{x:Math.floor(_i[0]),y:Math.floor(_i[1])}}},{key:"geoToMeters",value:function($){var _r=C0(Zy.latLngToMeters([$.lng,$.lat]),2);return{x:_r[0],y:_r[1],z:$.alt||0}}},{key:"metersToGeo",value:function($){var _r=C0(Zy.metersToLatLng([$.x,$.y]),2),_i=_r[0];return{lat:_r[1],lng:_i,alt:$.z||0}}},{key:"setZoomConstraints",value:function($,_r){this.lookAtManipulator.setZoomConstraints($,_r)}}],[{key:"_setLookAtDataForManipulator",value:function($,_r,_i){var _s=_r.position,ga=_r.zoom,_l=_r.tilt,_c=_r.heading,_p=_r.bounds,_f={zoom:ga,tilt:_l,heading:_c};if(_s&&typeof _s.lng=="number"&&typeof _s.lat=="number"&&(_f.position=Zy.latLngToMeters([_s.lng,_s.lat])),_p){var ey=_p.getExterior().getLatLngAltArray(),iy=ey.length/3,ly=Array(iy);if(_p.getBoundingBox().isCDB())for(var uy=ey[1],cy=0,yy=0;yy<iy;yy++){var ay,by=ey[3*yy+1];0<yy&&(ay=by-uy,180<Math.abs(ay)&&(cy+=uy<by?-360:360)),uy=by,ly[yy]=Zy.latLngToMeters([by+cy,ey[3*yy]])}else for(var Ey=0;Ey<iy;Ey++)ly[Ey]=Zy.latLngToMeters([ey[3*Ey+1],ey[3*Ey]]);_f.bounds=ly}$.setLookAtData(_f,_i)}},{key:"_getLookAtDataFromManipulator",value:function($,_r){var _i=1<arguments.length&&_r!==void 0&&_r,_s=$.getLookAtData(),ga=_s.heading,_l=_s.incline,_c=_s.tilt,_p=_s.zoom,_f=_s.position,ey=_s.bounds,iy=_s.unpadded_bounds,ly=C0(Zy.metersToLatLng(_f),2),uy=ly[0],cy=ly[1],yy=new H.geo.LineString;return(_i?iy:ey).forEach(function(ay){var by=Zy.metersToLatLng(ay);yy.pushLatLngAlt(by[1],by[0],0)}),{heading:ga,incline:_l,tilt:_c,zoom:_p,bounds:new H.geo.Polygon(yy),position:{lat:cy,lng:uy,alt:_f[2]}}}}]),j}(),cT=v_.PLACEMENT,oR=128/Math.PI,sR=16384/Math.PI,Vx=Object.create(N1);Object.assign(Vx,tR),Object.assign(Vx,{name:"points",built_in:!0,vertex_shader_src:`uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform bool u_tile_fade_in;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform bool u_view_panning;uniform float u_tilt;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform float u_heading;uniform float u_near_plane;uniform float u_depth_buffer_adjustment;attribute vec4 a_position;attribute vec4 a_shape;attribute vec4 a_color;attribute vec2 a_texcoord;attribute vec2 a_offset;uniform float u_point_type;attribute float a_is_flat;
#ifdef TANGRAM_IS_TEXT_STYLE
attribute vec4 a_offsets_alt;attribute vec4 a_pre_angles_alt;attribute vec4 a_angles_alt;attribute vec4 a_offsets;attribute vec4 a_pre_angles;attribute vec4 a_angles;
#endif
#ifdef TANGRAM_POINT_DRAW_STICK
attribute float a_is_stick;attribute float a_stick_height;varying float v_is_stick;
#endif
varying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;
#ifdef TANGRAM_HAS_SHADER_POINTS
attribute float a_outline_edge;attribute vec4 a_outline_color;varying float v_outline_edge;varying vec4 v_outline_color;varying float v_aa_offset;
#endif
#ifdef TANGRAM_SHOW_HIDDEN_LABELS
varying float v_label_hidden;
#endif
#define PI 3.14159265359
#define TANGRAM_NORMAL vec3(0., 0., 1.)
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: raster
#pragma tangram: global
vec2 rotate2D(vec2 _st,float _angle){return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle))*_st;}vec3 rotateX3D(vec3 _st,float _angle){return mat3(1.,0.,0.,0.,cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle))*_st;}vec3 rotateZ3D(vec3 _st,float _angle){return mat3(cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle),0.,0.,0.,1.)*_st;}
#ifdef TANGRAM_IS_TEXT_STYLE
float mix4linear(float a,float b,float c,float d,float x){return mix(mix(a,b,3.*x),mix(b,mix(c,d,3.*(max(x,.66)-.66)),3.*(clamp(x,.33,.66)-.33)),step(0.33,x));}
#endif
void main(){
#pragma tangram: setup
#ifndef TANGRAM_SHOW_HIDDEN_LABELS
if(a_shape.w==0.){gl_Position=vec4(0.,0.,0.,1.);return;}
#else
if(a_shape.w==0.){v_label_hidden=1.;}else{v_label_hidden=0.;}
#endif
v_alpha_factor=1.0;v_color=a_color;v_texcoord=a_texcoord;
#ifdef TANGRAM_HAS_SHADER_POINTS
v_outline_color=a_outline_color;v_outline_edge=a_outline_edge;if(u_point_type==TANGRAM_POINT_TYPE_SHADER){v_outline_color=a_outline_color;v_outline_edge=a_outline_edge;float size=abs(a_shape.x/128.);v_texcoord=sign(a_shape.xy)*(size+1.0)/size;size+=2.0;v_aa_offset=2.0/size;}
#endif
vec4 position=u_modelView*vec4(a_position.xyz,1.);vec4 shape=vec4(a_shape.xy,0.,0.);vec2 offset=vec2(a_offset.x,-a_offset.y);
#ifdef TANGRAM_POINT_DRAW_STICK
v_is_stick=a_is_stick;float scaled_stick_height=(sin(u_tilt+(1.5*PI))+1.0)*a_stick_height;offset.y+=(1.0-a_is_stick)*scaled_stick_height;
#endif
float zoom=clamp(u_map_position.z-u_tile_origin.z,0.,1.);float theta=a_shape.z/4096.;float heading=u_heading;float delta=(heading-PI);float new_theta=theta-delta;float reversed=abs(new_theta)>PI/2. ? 1. : 0.;if(a_is_flat==1.0){
#ifdef TANGRAM_IS_TEXT_STYLE
if(a_offsets[0]!=0.){vec4 angles_scaled;vec4 pre_angles_scaled;vec4 offsets_scaled;if(reversed==1.){offsets_scaled=a_offsets_alt*4.;angles_scaled=(PI/16384.)*a_angles_alt;pre_angles_scaled=(PI/128.)*a_pre_angles_alt;}else{offsets_scaled=a_offsets*4.;angles_scaled=(PI/16384.)*a_angles;pre_angles_scaled=(PI/128.)*a_pre_angles;}float pre_angle=mix4linear(pre_angles_scaled[0],pre_angles_scaled[1],pre_angles_scaled[2],pre_angles_scaled[3],zoom);float angle=mix4linear(angles_scaled[0],angles_scaled[1],angles_scaled[2],angles_scaled[3],zoom);float offset_curve=mix4linear(offsets_scaled[0],offsets_scaled[1],offsets_scaled[2],offsets_scaled[3],zoom);shape.xy=rotate2D(shape.xy,pre_angle+PI*reversed);shape.x+=offset_curve;shape.xy=rotate2D(shape.xy,angle);shape.xy+=rotate2D(offset,theta);}else{shape.xy=rotate2D(shape.xy+offset*256.,theta+(PI*reversed));}
#else
shape.xy=rotate2D(shape.xy+offset*256.,theta);
#endif
shape.xy/=pow(2.,4.+(u_map_position.z-u_tile_origin.w));shape=u_modelView*shape;position+=shape;}else{shape.xy/=256.;
#ifdef TANGRAM_POINT_DRAW_STICK
shape.y*=1.0+(scaled_stick_height-1.0)*a_is_stick;
#endif
shape.xy=rotate2D(shape.xy+offset,theta);}
#ifdef TANGRAM_FADE_IN_RATE
if(u_tile_fade_in){v_alpha_factor*=clamp(u_visible_time*TANGRAM_FADE_IN_RATE,0.,1.);}
#endif
#ifdef TANGRAM_FADE_ON_ZOOM_OUT
v_alpha_factor*=clamp(1.+TANGRAM_FADE_ON_ZOOM_OUT_RATE*(u_map_position.z-u_tile_origin.z),0.,1.);
#endif
v_world_position=u_model*position;v_world_position.xy+=shape.xy*u_meters_per_pixel;v_world_position=wrapWorldPosition(v_world_position);
#pragma tangram: position
cameraProjection(position);
#ifdef TANGRAM_LAYER_ORDER
applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);/***Due to the precision loss on depth buffer,we had a z-fighting of translucent points when the distance to the camera was big.*For more information about the problem see: https:*For more information about the fix see: https:*position.z=(2.0*log(position.w/u_near_plane)/log(u_far_plane/u_near_plane)-1.0)*position.w;*/position.z=(log(position.w/u_near_plane)*u_depth_buffer_adjustment-1.0)*position.w;
#endif
if(a_is_flat!=1.){position.xy+=shape.xy*position.w*2.*u_device_pixel_ratio/u_resolution;}
#ifdef TANGRAM_HAS_SHADER_POINTS
if(u_point_type==TANGRAM_POINT_TYPE_SHADER){position.xy+=sign(shape.xy)*position.w*u_device_pixel_ratio/u_resolution;}
#endif
if(!u_view_panning){snapToPixelGrid(position);}gl_Position=position;}`,fragment_shader_src:`uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_texture;uniform float u_point_type;uniform bool u_apply_color_blocks;varying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;
#ifdef TANGRAM_HAS_SHADER_POINTS
varying vec4 v_outline_color;varying float v_outline_edge;varying float v_aa_offset;
#endif
#ifdef TANGRAM_SHOW_HIDDEN_LABELS
varying float v_label_hidden;
#endif
#ifdef TANGRAM_POINT_DRAW_STICK
varying float v_is_stick;
#endif
#define TANGRAM_NORMAL vec3(0., 0., 1.)
#pragma tangram: camera
#pragma tangram: material
#pragma tangram: lighting
#pragma tangram: raster
#pragma tangram: global
#ifdef TANGRAM_HAS_SHADER_POINTS
float _tangram_antialias(float l,float R){float low=R-v_aa_offset;float high=R+v_aa_offset;return 1.-smoothstep(low,high,l);}
#endif
void mixTextureColor(inout vec4 color){
#ifdef TANGRAM_HAS_SHADER_POINTS
if(u_point_type==TANGRAM_POINT_TYPE_TEXTURE){color*=texture2D(u_texture,v_texcoord);}else if(u_point_type==TANGRAM_POINT_TYPE_LABEL){color=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);}else if(u_point_type==TANGRAM_POINT_TYPE_SHADER){float outline_edge=v_outline_edge;vec4 outlineColor=v_outline_color;float l=length(v_texcoord);float outer_alpha=_tangram_antialias(l,1.);float fill_alpha=_tangram_antialias(l,1.-v_outline_edge*0.5)*color.a;float stroke_alpha=(outer_alpha-_tangram_antialias(l,1.-v_outline_edge))*outlineColor.a;
#ifdef TANGRAM_BLEND_ADD
color.a=stroke_alpha+fill_alpha;color.rgb=color.rgb*fill_alpha+outlineColor.rgb*stroke_alpha;
#else
color.a=stroke_alpha+fill_alpha*(1.-stroke_alpha);color.rgb=mix(color.rgb*fill_alpha,outlineColor.rgb,stroke_alpha)/max(color.a,0.001);
#endif
}
#else
color=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);
#endif
if(u_apply_color_blocks){
#pragma tangram: color
#pragma tangram: filter
}color.a*=v_alpha_factor;
#ifdef TANGRAM_SHOW_HIDDEN_LABELS
if(v_label_hidden>0.){color.a*=0.5;color.rgb=vec3(1.,0.,0.);}
#endif
#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY) && !defined(TANGRAM_BLEND_ADD)
if(color.a<TANGRAM_ALPHA_TEST){discard;}
#endif
}void main(void){
#pragma tangram: setup
vec4 color=v_color;
#ifdef TANGRAM_POINT_DRAW_STICK
if(v_is_stick==0.0){mixTextureColor(color);}
#else
mixTextureColor(color);
#endif
gl_FragColor=color;}`,selection:!0,collision:!0,blend:"overlay",init:function(j){var $=0<arguments.length&&j!==void 0?j:{};N1.init.call(this,$),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!0,this.defines.TANGRAM_POINT_TYPE_TEXTURE=1,this.defines.TANGRAM_POINT_TYPE_LABEL=2,this.defines.TANGRAM_POINT_TYPE_SHADER=3,this.defines.TANGRAM_POINT_DRAW_STICK=!!this.stick,this.collision_group_points=this.name+"-points",this.collision_group_text=this.name+"-text",this.reset()},setupDefines:function(){this.blend!=="overlay"&&(this.defines.TANGRAM_LAYER_ORDER=!0),this.defines.TANGRAM_FADE_ON_ZOOM_OUT=!0,this.defines.TANGRAM_FADE_ON_ZOOM_OUT_RATE=2,cE.suppress_label_fade_in||this.suppress_fade?(this.fade_in_time=0,this.defines.TANGRAM_FADE_IN_RATE=null):(this.fade_in_time=.15,this.defines.TANGRAM_FADE_IN_RATE=1/this.fade_in_time),cE.suppress_snap_animation||(this.defines.TANGRAM_VIEW_PAN_SNAP_RATE=2),cE.show_hidden_labels&&(this.defines.TANGRAM_SHOW_HIDDEN_LABELS=!0)},reset:function(){this.queues={},this.resetText(),this.texture_missing_sprites={}},addFeature:function(j,$,_r){var _i,_s,ga,_l=_r.tile,_c={};if(_c.color=this.parseColor($.color,_r),_c.texture=$.texture,_c.label_texture=null,_c.color||_c.texture){if(this.hasSprites(_c)){if(!(_i=this.parseSprite(_c,$,_r)))return;_c.texcoords=_i.texcoords}if(_c.size=$.size,_c.size){if(_c.size=Gy.evalCachedPointSizeProperty($.size,_i,_r),_c.size==null)return void o0({level:"warn",once:!0},"Layer '".concat($.layers[$.layers.length-1],"': ")+"'size' includes % and/or ratio-based scaling (".concat(JSON.stringify($.size.value),"); ")+"these can only applied to sprites, but no sprite was specified, skipping features in layer");typeof _c.size=="number"&&(_c.size=[_c.size,_c.size])}else _c.size=_i&&_i.css_size||[16,16];$.outline&&(_c.outline_width=Gy.evalCachedProperty($.outline.width,_r)||Gy.defaults.outline.width,_c.outline_color=this.parseColor($.outline.color,_r)),_c.outline_edge_pct=0,_c.outline_width&&_c.outline_color&&(_s=_c.outline_width,_c.size[0]+=_s,_c.size[1]+=_s,_c.outline_edge_pct=_s/Math.min(_c.size[0],_c.size[1])*2),_c.size[0]=Math.min(_c.size[0],256),_c.size[1]=Math.min(_c.size[1],256),_c.placement=$.placement,_c.placement_min_length_ratio=Gy.evalCachedProperty($.placement_min_length_ratio,_r),_c.placement===cT.SPACED&&$.placement_spacing&&(_c.placement_spacing=Gy.evalCachedProperty($.placement_spacing,_r)),_c.angle=Gy.evalProperty($.angle,_r)||0,_c.elevate_by_altitude=!!$.elevate_by_altitude,_c.z=$.z?L1.clamp(Gy.evalCachedDistanceProperty($.z,_r),0,32767):Gy.defaults.z,_c.flat=$.flat,_c.tile_edges=$.tile_edges,this.computeLayout(_c,j,$,_r,_l),$.stick&&!_c.flat&&(ga=Gy.parseNumber(Gy.evalProperty($.stick.height,_r)),_c.stick={color:this.parseColor($.stick.color,_r)||Gy.defaults.color,height:ga?Math.max(ga,0):0});var _p=$.text&&Gy.evalProperty($.text.visible,_r)!==!1&&this.parseTextFeature(j,$.text,_r,_l);Array.isArray(_p)&&o0({level:"warn",once:!(_p=null)},"Layer '".concat($.layers[$.layers.length-1],"': ")+"cannot use boundary labels (e.g. 'text_source: { left: ..., right: ... }') for 'text' labels attached to 'points'; "+"provided 'text_source' value was ".concat(JSON.stringify($.text.text_source))),_p&&(_p.layout.parent=_c,_p.layout.priority=$.text.priority?Math.max(_p.layout.priority,_c.priority+.5):_c.priority+.5,_p.layout.move_into_tile=!1,L_.addStyle(this.collision_group_text,_l.id)),this.queueFeature({feature:j,draw:$,context:_r,style:_c,text_feature:_p},_l),L_.addStyle(this.collision_group_points,_l.id)}},hasSprites:function(j){return j.texture&&this.textureManager.textures[j.texture]&&this.textureManager.textures[j.texture].sprites},getSpriteInfo:function(j,$){var _r=this.textureManager.textures[j.texture].sprites[$]&&this.textureManager.getSpriteInfo(j.texture,$);return $&&!_r?(this.texture_missing_sprites[j.texture]=this.texture_missing_sprites[j.texture]||{},this.texture_missing_sprites[j.texture][$]||(o0("debug","Style: in style '".concat(this.name,"', could not find sprite '").concat($,"' for texture '").concat(j.texture,"'")),this.texture_missing_sprites[j.texture][$]=!0)):_r&&(_r.sprite=$),_r},parseSprite:function(j,$,_r){var _i=Gy.evalProperty($.sprite,_r);return this.getSpriteInfo(j,_i)||this.getSpriteInfo(j,$.sprite_default)},queueFeature:function(j,$){this.tile_data[$.id]&&this.queues[$.id]||this.startData($),this.queues[$.id]=this.queues[$.id]||[],this.queues[$.id].push(j)},endData:function(j){var $=this;if(j.canceled)return o0("trace","Style ".concat(this.name,": stop tile build because tile was canceled: ").concat(j.key)),Promise.resolve();var _r=this.queues[j.id];delete this.queues[j.id];var _i=[],_s=[];return _r.forEach(function(ga){for(var _l=ga.style,_c=ga.feature,_p=_c.geometry,_f=$.buildLabels(_l.size,_p,_l),ey=0;ey<_f.length;ey++){var iy,ly=_f[ey],uy={feature:_c,draw:ga.draw,context:ga.context,style:_l,label:ly};_s.push(uy),ga.text_feature&&(iy={feature:_c,draw:ga.text_feature.draw,context:ga.context,text:ga.text_feature.text,text_settings_key:ga.text_feature.text_settings_key,layout:ga.text_feature.layout,point_label:ly,linked:uy},_i.push(iy),ga.draw.text.optional||(uy.linked=iy))}}),Promise.all([L_.collide(_s,this.collision_group_points,j.id).then(function(ga){ga.forEach(function(_l){$.feature_style=_l.style,$.feature_style.label=_l.label,$.feature_style.linked=_l.linked,N1.addFeature.call($,_l.feature,_l.draw,_l.context)})}),this.collideAndRenderTextLabels(j,this.collision_group_text,_i)]).then(function(ga){var _l=C0(ga,2)[1],_c=_l.labels,_p=_l.texts;return _c&&_p&&_c.forEach(function(_f){var ey=_f.text_settings_key,iy=_p[ey]&&_p[ey][_f.text],ly=$.feature_style;ly.label=_f.label,ly.linked=_f.linked,ly.size=iy.size.logical_size,ly.angle=0,_f.label.text_data={text_info:iy,text_settings_key:ey,text:_f.text},ly.label_texture=$.textureManager.default,N1.addFeature.call($,_f.feature,_f.draw,_f.context)}),$.freeText(j),N1.endData.call($,j)})},_preprocess:function(j){j.color=Gy.createColorPropertyCache(j.color),j.texture=j.texture!==void 0?j.texture:this.texture,j.outline&&(j.outline.color=Gy.createColorPropertyCache(j.outline.color),j.outline.width=Gy.createPropertyCache(j.outline.width,Gy.parsePositiveNumber)),j.z=Gy.createPropertyCache(j.z,Gy.parseUnits);try{j.size=Gy.createPointSizePropertyCache(j.size)}catch($){return o0({level:"warn",once:!0},"Layer '".concat(j.layers[j.layers.length-1],"': ")+"".concat($," (").concat(JSON.stringify(j.size),"), skipping features in layer")),null}return j.offset=Gy.createPropertyCache(j.offset,function($){return Array.isArray($)&&$.map(Gy.parseNumber)}),j.buffer=Gy.createPropertyCache(j.buffer,function($){return(Array.isArray($)?$:[$,$]).map(Gy.parsePositiveNumber)}),j.repeat_distance=Gy.createPropertyCache(j.repeat_distance,Gy.parseNumber),j.repeat_group==null&&(j.repeat_group=j.layers.join("-")),j.placement=cT[j.placement&&j.placement.toUpperCase()],j.placement==null&&(j.placement=cT.VERTEX),j.placement_spacing=j.placement_spacing!=null?j.placement_spacing:80,j.placement_spacing=Gy.createPropertyCache(j.placement_spacing,Gy.parsePositiveNumber),j.placement_min_length_ratio=j.placement_min_length_ratio!=null?j.placement_min_length_ratio:1,j.placement_min_length_ratio=Gy.createPropertyCache(j.placement_min_length_ratio,Gy.parsePositiveNumber),typeof j.angle=="number"?j.angle=j.angle*Math.PI/180:j.angle=j.angle||0,j.text=this.preprocessText(j.text),j.text&&(j.text.variantKey=j.variantKey,j.text.group=j.group,j.text.layers=j.layers,j.text.order=j.order,j.text.repeat_group=j.text.repeat_group||j.repeat_group,j.text.anchor=j.text.anchor||this.default_anchor,j.text.optional=typeof j.text.optional=="boolean"&&j.text.optional,j.text.interactive=j.text.interactive||j.interactive),j.stick&&(j.stick.color=Gy.createColorPropertyCache(j.stick.color)),j},default_anchor:["bottom","top","right","left"],computeLayout:function(j,$,_r,_i,_s){var ga=j||{};ga.id=$,ga.units_per_pixel=_s.units_per_pixel||1,ga.collide=_r.collide!==!1,ga.anchor=_r.anchor,ga.offset=Gy.evalCachedProperty(_r.offset,_i)||Gy.zeroPair,ga.buffer=Gy.evalCachedProperty(_r.buffer,_i)||Gy.zeroPair,ga.repeat_distance=Gy.evalCachedProperty(_r.repeat_distance,_i),ga.repeat_distance&&(ga.repeat_distance*=ga.units_per_pixel,ga.repeat_scale=1,typeof _r.repeat_group=="function"?ga.repeat_group=_r.repeat_group(_i):ga.repeat_group=_r.repeat_group);var _l=_r.priority;return _l!=null?typeof _l=="function"&&(_l=_l(_i)):_l=4294967295,ga.priority=_l,ga},buildTextLabels:function(j,$){for(var _r=[],_i=0;_i<$.length;_i++){var _s=$[_i],ga=this.texts[j.id][_s.text_settings_key][_s.text].size.collision_size;_s.label=new v_(_s.point_label.position,ga,_s.point_label.isFlat(),_s.layout),_r.push(_s)}return _r},buildLabels:function(j,$,_r){var _i=!!_r.flat,_s=[];if($.type==="Point")_s.push(new v_($.coordinates,j,_i,_r));else if($.type==="MultiPoint")for(var ga=$.coordinates,_l=0;_l<ga.length;++_l){var _c=ga[_l];_s.push(new v_(_c,j,_i,_r))}else if($.type==="LineString")for(var _p=pA($.coordinates,j,_i,_r),_f=0;_f<_p.length;++_f)_s.push(_p[_f]);else if($.type==="MultiLineString")for(var ey=$.coordinates,iy=0;iy<ey.length;iy++)for(var ly=pA(ey[iy],j,_i,_r),uy=0;uy<ly.length;++uy)_s.push(ly[uy]);else if($.type==="Polygon")if(_r.placement===cT.CENTROID){var cy=Zy.centroid($.coordinates);_s.push(new v_(cy,j,_i,_r))}else for(var yy=$.coordinates,ay=0;ay<yy.length;ay++)for(var by=pA(yy[ay],j,_i,_r),Ey=0;Ey<by.length;++Ey)_s.push(by[Ey]);else if($.type==="MultiPolygon")if(_r.placement===cT.CENTROID){var ky=Zy.multiCentroid($.coordinates);_s.push(new v_(ky,j,_i,_r))}else for(var Oy=$.coordinates,Ty=0;Ty<Oy.length;Ty++)for(var Ly=Oy[Ty],Ny=0;Ny<Ly.length;Ny++)for(var Uy=pA(Ly[Ny],j,_i,_r),Xy=0;Xy<Uy.length;++Xy)_s.push(Uy[Xy]);return _s},makeVertexTemplate:function(j,$){var _r,_i=j.color||Gy.defaults.color,_s=$.vertex_data.vertex_layout;return this.fillVertexTemplate(_s,"a_position",0,{size:2}),this.fillVertexTemplate(_s,"a_position",j.z||0,{size:1,offset:2}),this.fillVertexTemplate(_s,"a_position",this.scaleOrder(j.order),{size:1,offset:3}),this.fillVertexTemplate(_s,"a_shape",0,{size:4}),this.fillVertexTemplate(_s,"a_shape",j.label.layout.collide?0:1,{size:1,offset:3}),this.fillVertexTemplate(_s,"a_texcoord",0,{size:2}),this.fillVertexTemplate(_s,"a_offset",0,{size:2}),this.fillVertexTemplate(_s,"a_color",x0.mult(_i,255),{size:4}),this.defines.TANGRAM_HAS_SHADER_POINTS&&$.variant.shader_point&&(_r=j.outline_color||Gy.defaults.outline.color,this.fillVertexTemplate(_s,"a_outline_color",x0.mult(_r,255),{size:4}),this.fillVertexTemplate(_s,"a_outline_edge",j.outline_edge_pct||Gy.defaults.outline.width,{size:1})),this.selection&&this.fillVertexTemplate(_s,"a_selection_color",x0.mult(j.selection_color,255),{size:4}),this.fillVertexTemplate(_s,"a_is_flat",0,{size:1}),this.defines.TANGRAM_POINT_DRAW_STICK&&j.stick&&(this.fillVertexTemplate(_s,"a_is_stick",0,{size:1}),this.fillVertexTemplate(_s,"a_stick_height",j.stick.height,{size:1})),this.vertex_template},buildQuad:function(j,$,_r,_i,_s,ga,_l,_c,_p,_f,ey,iy,ly,uy,cy,yy,ay,by,Ey){return $[0]<=0||$[1]<=0?0:function(ky,Oy,Ty,Ly){var Ny,Uy,Xy,Yy,Wy,_g,y0=Ly.quad,H_=Ly.quad_normalize,_m=Ly.offset,s0=Ly.offsets,R0=Ly.offsets_alt,Q0=Ly.pre_angles,W0=Ly.pre_angles_alt,t1=Ly.angle,o1=Ly.angles,A1=Ly.angles_alt,j1=Ly.is_flat,Z0=Ly.elevate_by_altitude,F1=Ly.build_stick_points,B_=Ly.color,e_=Ly.stick_color,u_=Ly.curve,cx=Ly.texcoord_scale,W1=Ly.texcoord_normalize,y1=Ly.pre_angles_normalize,Y1=Ly.angles_normalize,U_=Ly.offsets_normalize,H_=H_||1,A_=y0[0]/2*H_,Ww=y0[1]/2*H_,S_=[[-A_,-Ww],[A_,-Ww],[A_,Ww],[-A_,Ww]],C_=Oy.vertex_elements,B1=Oy.vertex_count,m_=Oy.vertex_layout.index,Tx=m_.a_texcoord,Q_=m_.a_position,Ax=m_.a_shape,IA=m_.a_offset,I2=m_.a_offsets,O2=m_.a_offsets_alt,EE=m_.a_pre_angles,I1=m_.a_pre_angles_alt,q_=m_.a_angles,$_=m_.a_angles_alt,OA=m_.a_is_flat,s_=m_.a_is_stick,p1=m_.a_color;Tx&&(W1=W1||1,_g=[[Uy=(Ny=C0(cx||pE,4))[0],Xy=Ny[1]],[Yy=Ny[2],Xy],[Yy,Wy=Ny[3]],[Uy,Wy]]);for(var Sx=0,E0=ky.length,R2=0;R2<E0;R2++){var Cx=ky[R2];if(F1){for(var Yw=.5*H_,L2=+H_,P2=[[-Yw,0],[+Yw,0],[+Yw,L2],[-Yw,L2]],_b=0;_b<4;_b++)Tx&&(Ty[Tx+0]=_g[_b][0]*W1,Ty[Tx+1]=_g[_b][1]*W1),Ty[Q_+0]=Cx[0],Ty[Q_+1]=Cx[1],Z0&&(Ty[Q_+2]=L1.clamp(Cx[2],0,32767)),Ty[Ax+0]=P2[_b][0],Ty[Ax+1]=P2[_b][1],Ty[Ax+2]=0,Ty[p1+0]=e_[0],Ty[p1+1]=e_[1],Ty[p1+2]=e_[2],Ty[p1+3]=e_[3],Ty[s_+0]=255,Oy.addVertex(Ty);C_.push(B1+0),C_.push(B1+1),C_.push(B1+2),C_.push(B1+2),C_.push(B1+3),C_.push(B1+0),B1+=4,Sx+=2}for(var Hx=0;Hx<4;Hx++)Tx&&(Ty[Tx+0]=_g[Hx][0]*W1,Ty[Tx+1]=_g[Hx][1]*W1),Ty[Q_+0]=Cx[0],Ty[Q_+1]=Cx[1],Z0&&(Ty[Q_+2]=L1.clamp(Cx[2],0,32767)),Ty[Ax+0]=S_[Hx][0],Ty[Ax+1]=S_[Hx][1],Ty[Ax+2]=t1,Ty[p1+0]=B_[0],Ty[p1+1]=B_[1],Ty[p1+2]=B_[2],Ty[p1+3]=B_[3],Ty[IA+0]=_m[0],Ty[IA+1]=_m[1],Ty[OA+0]=j1?255:0,F1&&(Ty[s_+0]=0),u_&&(Ty[EE+0]=y1*Q0[0],Ty[EE+1]=y1*Q0[1],Ty[EE+2]=y1*Q0[2],Ty[EE+3]=y1*Q0[3],Ty[q_+0]=Y1*o1[0],Ty[q_+1]=Y1*o1[1],Ty[q_+2]=Y1*o1[2],Ty[q_+3]=Y1*o1[3],Ty[I2+0]=U_*s0[0],Ty[I2+1]=U_*s0[1],Ty[I2+2]=U_*s0[2],Ty[I2+3]=U_*s0[3],R0&&(Ty[O2+0]=U_*R0[0],Ty[O2+1]=U_*R0[1],Ty[O2+2]=U_*R0[2],Ty[O2+3]=U_*R0[3],Ty[I1+0]=y1*W0[0],Ty[I1+1]=y1*W0[1],Ty[I1+2]=y1*W0[2],Ty[I1+3]=y1*W0[3],Ty[$_+0]=Y1*A1[0],Ty[$_+1]=Y1*A1[1],Ty[$_+2]=Y1*A1[2],Ty[$_+3]=Y1*A1[3])),Oy.addVertex(Ty);C_.push(B1+0),C_.push(B1+1),C_.push(B1+2),C_.push(B1+2),C_.push(B1+3),C_.push(B1+0),B1+=4,Sx+=2}return Sx}(j,cy,yy,{quad:$,quad_normalize:256,offset:_c,offsets:_p,offsets_alt:_f,pre_angles:ga,pre_angles_alt:_l,angle:4096*_r,angles:_i,angles_alt:_s,is_flat:ly,elevate_by_altitude:uy,build_stick_points:ay,stick_color:ay&&x0.mult(by,255),color:x0.mult(Ey||Gy.defaults.color,255),curve:iy,texcoord_scale:ey,texcoord_normalize:65535,pre_angles_normalize:oR,angles_normalize:sR,offsets_normalize:64})},build:function(j,$,_r){var _i=j.label;return _i.type==="curved"?this.buildCurvedLabel(_i,j,$,_r):this.buildStraightLabel(_i,j,$,_r)},buildStraightLabel:function(j,$,_r,_i){var _s,ga=this.makeVertexTemplate($,_r),_l=j.angle||$.angle,_c=j.type!=="point"?(_s=$.size[j.type],pE):(_s=$.size,$.texcoords||pE);_r.uniforms=_r.uniforms||{},$.label_texture?(_r.uniforms.u_texture=$.label_texture,_r.uniforms.u_point_type=2,_r.uniforms.u_apply_color_blocks=!1):($.texture?(_r.uniforms.u_texture=$.texture,_r.uniforms.u_point_type=1):(_r.uniforms.u_texture=this.textureManager.default,_r.uniforms.u_point_type=3),_r.uniforms.u_apply_color_blocks=!0);var _p=j.offset,_f=this.defines.TANGRAM_POINT_DRAW_STICK&&!$.label_texture&&$.stick&&0<$.stick.height,ey=this.buildQuad([j.position],_s,_l,null,null,null,null,_p,null,null,_c,!1,j.isFlat(),$.elevate_by_altitude,_r.vertex_data,ga,_f,_f&&$.stick.color,$.color),iy=$.linked&&$.linked.label.id;return this.trackLabel(j,iy,_r,ey,_i,_f),ey},buildCurvedLabel:function(j,$,_r,_i){for(var _s=this.makeVertexTemplate($,_r),ga=j.angle,_l=0,_c=0;_c<2;_c++)for(var _p=0;_p<j.num_segments;_p++){var _f=$.size[j.type][_p],ey=pE,iy=this.getTileMesh(_i.tile,this.getMeshVariantTypeForDraw($));iy.uniforms=iy.uniforms||{},iy.uniforms.u_texture=$.label_texture,iy.uniforms.u_point_type=2,iy.uniforms.u_apply_color_blocks=!1;var ly=j.offset||[0,0],uy=j.position,cy=j.angles[_p],yy=j.offsets[_p],ay=j.pre_angles[_p],by=j.num_segments-_p-1,Ey=j.alt_angles[by],ky=j.alt_pre_angles[by],Oy=j.alt_offsets[by],Ty=this.buildQuad([uy],_f,ga,cy,Ey,ay,ky,ly,yy,Oy,ey,!0,j.isFlat(),$.elevate_by_altitude,iy.vertex_data,_s,!1,!1,$.color);_l+=Ty;var Ly=$.linked&&$.linked.label.id;this.trackLabel(j,Ly,_r,Ty,_i,!1)}return _l},trackLabel:function(j,$,_r,_i,_s,ga){var _l=5<arguments.length&&ga!==void 0&&ga;_r.labels=_r.labels||{},_r.labels.collision=_r.labels.collision||{},_r.labels["non-collision"]=_r.labels["non-collision"]||{};var _c=j.layout.collide?_r.labels.collision:_r.labels["non-collision"];_c[j.id]=_c[j.id]||{container:{label:j.text_data?Object.assign(j.toJSON(),{text_data:j.text_data}):j.toJSON(),linked:$},ranges:[]};var _p=2*_i,_f=_r.vertex_data.offset-_r.vertex_data.stride*_p;_c[j.id].ranges.push([_f,_p,_l])},buildLines:function(j,$,_r,_i){return this.build($,_r,_i)},buildPoints:function(j,$,_r,_i){return this.build($,_r,_i)},buildPolygons:function(j,$,_r,_i){return this.build($,_r,_i)},vertexLayoutForMeshVariant:function(j){var $;return this.vertex_layout||($=[{name:"a_position",size:4,type:I0.SHORT,normalized:!1},{name:"a_shape",size:4,type:I0.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:I0.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:I0.SHORT,normalized:!1},{name:"a_color",size:4,type:I0.UNSIGNED_BYTE,normalized:!0},{name:"a_outline_color",size:4,type:I0.UNSIGNED_BYTE,normalized:!0,static:[0,0,0,0]},{name:"a_outline_edge",size:1,type:I0.FLOAT,normalized:!1,static:0},{name:"a_selection_color",size:4,type:I0.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:I0.UNSIGNED_BYTE,normalized:!0}],this.defines&&this.defines.TANGRAM_POINT_DRAW_STICK&&$.push({name:"a_is_stick",size:1,type:I0.UNSIGNED_BYTE,normalized:!0},{name:"a_stick_height",size:1,type:I0.FLOAT,normalized:!1}),this.vertex_layout=new Fx($),($=$.map(function(_r){return Object.assign({},_r)})).forEach(function(_r){_r.name!=="a_outline_color"&&_r.name!=="a_outline_edge"||(_r.static=null)}),this.vertex_layout_shader_point=new Fx($)),j.shader_point?this.vertex_layout_shader_point:this.vertex_layout},computeVariantForDraw:function(j){var $=j.label_texture||j.texture||this.default_mesh_variant.key;return{key:$,shader_point:$===this.default_mesh_variant.key,order:j.label_texture?1:0}},makeMesh:function(j,$,_r){var _i=2<arguments.length&&_r!==void 0?_r:{},_i=Object.assign({},_i,{fade_in_time:this.fade_in_time});return N1.makeMesh.call(this,j,$,_i)}});var yA=[0,.33,.66,.99],QC=function(j,$,_r,_i,_s){for(var ga=[{type:"straight",tolerance:_s.no_curving?1.8:1.5},{type:"curved"},{type:"straight",tolerance:2.3}],_l=0;_l<ga.length;_l++){var _c=ga[_l],_p=void 0;if(_c.type==="straight"?_p=new aR($,_r,_i,_s,_c.tolerance):_c.type==="curved"&&!_s.no_curving&&2<_r.length&&(_p=new lR(j,_r,_i,_s)),_p&&!_p.throw_away)return _p}return!1},gA=function(){function j($,_r){F0(this,j),this.id=cA.nextLabelId(),this.layout=_r,this.position=[],this.angle=0,this.offset=_r.offset.slice(),this.unit_scale=this.layout.units_per_pixel,this.type="",this.throw_away=!1,this._is_flat=$,this._circles=void 0,this.placed=null}return H0(j,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,angle:this.angle,breach:this.breach,layout:t3(this.layout),circles:this.getBoundingCircles()}}},{key:"inTileBounds",value:function(){var $=this.getAABB(),_r=$.left,_i=$.top,_s=$.right,ga=$.bottom;return q0.pointInTile([_r,_i])&&q0.pointInTile([_s,ga])}},{key:"getAABBForSegment",value:function($,_r,_i,_s){var ga,_l=this.unit_scale,_c=_r/2,_p=_i/2,_f=C0($,2),ey=_f[0],iy=_f[1];this.offset[0]===0&&this.offset[1]===0||(ey+=(ga=x0.rot(this.offset,this.angle))[0]*_l,iy-=ga[1]*_l);var ly=[[Math.cos(_s),-Math.sin(_s)],[Math.sin(_s),Math.cos(_s)]],uy=x0.multMatrix(ly,[-_c,-_p]),cy=x0.multMatrix(ly,[_c,-_p]),yy=x0.multMatrix(ly,[_c,_p]),ay=x0.multMatrix(ly,[-_c,_p]);return{left:ey+Math.min(uy[0],cy[0],yy[0],ay[0]),top:iy+Math.max(uy[1],cy[1],yy[1],ay[1]),right:ey+Math.max(uy[0],cy[0],yy[0],ay[0]),bottom:iy+Math.min(uy[1],cy[1],yy[1],ay[1])}}},{key:"isFlat",value:function(){return this._is_flat}},{key:"getBoundingCircles",value:function(){}},{key:"getAABB",value:function(){}}],[{key:"splitLineByOrientation",value:function($){for(var _r=[$[0]],_i=0,_s=0,ga=0,_l=_r,_c=!1,_p=1;_p<$.length;_p++){var _f=$[_p],ey=$[_p-1],iy=x0.length(x0.sub(_f,ey));_f[0]>ey[0]?ga===1?(_r.push(_f),_s<(_i+=iy)&&(_l=_r,_s=_i,_c=!1)):(_r=[ey,_f],_s<(_i=iy)&&(_l=_r,_s=_i,_c=!1),ga=1):_f[0]<ey[0]?ga===-1?(_r.unshift(_f),_s<(_i+=iy)&&(_l=_r,_s=_i,_c=!0)):(_r=[_f,ey],_s<(_i=iy)&&(_l=_r,_s=_i,_c=!0),ga=-1):(ga===-1?_r.unshift(_f):(_r.push(_f),ga=1),_s<(_i+=iy)&&(_l=_r,_s=_i,_c=ga===-1))}return[_l,_c]}}]),j}(),aR=function(){Z1($,gA);var j=J1($);function $(_r,_i,_s,ga,_l){var _c;return F0(this,$),(_c=j.call(this,_s,ga)).type="straight",_c.size=_r,_c.throw_away=!_c.fit(_r,_i,ga,_l),_c}return H0($,[{key:"fit",value:function(_r,_i,_s,ga){var _l,_c=this.unit_scale,_p=C0(gA.splitLineByOrientation(_i),2);_i=_p[0],_l=_p[1],typeof _s.orientation=="number"&&(this.offset[1]+=1.2*(_r[1]-_s.vertical_buffer),_l&&(this.offset[1]*=-1),_s.orientation===-1&&(this.offset[1]*=-1));for(var _f=tM(_i),ey=_r[0]*_c,iy=0;iy<_i.length-1;iy++)for(var ly=_i[iy],uy=0,cy=0,yy=iy+1,ay=void 0;yy<_i.length;){var by=_i[yy-1],Ey=_i[yy],ky=o3(by,Ey);if(yy!==iy+1&&(uy+=function(Ty,Ly){var Ny,Uy;for(Uy=Ly<Ty?(Ny=Ly,Ty):(Ny=Ty,Ly);Uy-Ny>Math.PI;)Ny+=2*Math.PI;return Math.abs(Uy-Ny)}(ky,ay)),.1<Math.abs(uy))break;if(ey/(cy+=_f[yy-1])<ga){var Oy=x0.mult(x0.add(ly,Ey),.5);return this.angle=-ky,Math.abs(this.angle-Math.PI/2)<.01&&(this.angle=-Math.PI/2,typeof _s.orientation=="number"&&(this.offset[1]*=-1)),this.position=Oy,this.breach=!this.inTileBounds(),!0}ay=ky,yy++}return!1}},{key:"getBoundingCircles",value:function(){var _r,_i,_s,ga,_l,_c,_p,_f,ey,iy,ly,uy,cy,yy;return this._circles||(_r=this.unit_scale,_l=-(_s=(_i=this.size[0]/2*_r)*Math.cos(this.angle)),_c=-(ga=_i*Math.sin(this.angle)),_p=this.offset[0]*_r,_f=this.offset[1]*_r,iy=(ey=C0(this.position,2))[0],ly=ey[1],ly*=-1,_p&&(uy=[_s,ga],x0.normalize(uy),uy[0]*=_p,uy[1]*=_p,iy+=uy[0],ly+=uy[1]),_f&&(cy=[ga,-_s],x0.normalize(cy),cy[0]*=_f,cy[1]*=_f,iy-=cy[0],ly-=cy[1]),_s+=iy,ga+=ly,_l+=iy,_c+=ly,yy=this.size[1]/2*_r,this._circles=hA(_s,ga,_l,_c,yy)),this._circles}},{key:"getAABB",value:function(){var _r,_i,_s,ga,_l;return this._aabb||(_r=this.unit_scale,_i=this.size,_s=this.layout.buffer,ga=(_i[0]+2*_s[0])*_r,_l=(_i[1]+2*_s[1])*_r,this._aabb=this.getAABBForSegment(this.position,ga,_l,this.angle)),this._aabb}}]),$}(),lR=function(){Z1($,gA);var j=J1($);function $(_r,_i,_s,ga){var _l;return F0(this,$),(_l=j.call(this,_s,ga)).type="curved",_l.positions=[],_l.angles=[],_l._aabbs=[],_l.pre_angles=[],_l.offsets=[],_l.num_segments=_r.length,_l.sizes=_r,_l.alt_angles=[],_l.alt_pre_angles=[],_l.alt_offsets=[],_l.throw_away=!_l.fit(_l.sizes,_i,ga),_l}return H0($,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,breach:this.breach,layout:t3(this.layout),circles:this.getBoundingCircles()}}},{key:"fit",value:function(_r,_i,_s){var ga,_l=this.unit_scale,_c=Math.max.apply(Math,u1(_r.map(function(W1){return W1[1]}))),_p=_c*_l,_f=C0(gA.splitLineByOrientation(_i),2);_i=_f[0],ga=_f[1],typeof _s.orientation=="number"&&(this.offset[1]+=1.2*(_c-_s.vertical_buffer),ga&&(this.offset[1]*=-1),_s.orientation===-1&&(this.offset[1]*=-1));var ey=tM(_i),iy=_r.map(function(W1){return W1[0]*_l}),ly=ey.reduce(function(W1,y1){return W1+y1},0),uy=iy.reduce(function(W1,y1){return W1+y1},0);if(ly<uy)return!1;var cy=_i.length-1;if(cy<2)return!1;var yy=$.curvaturePlacement(_i,ly,ey,uy,0,cy),ay=_i[yy];if(yy===-1||cy-yy<2)return!1;this.position=ay;for(var by=0;by<iy.length;by++){this.positions[by]=[],this.offsets[by]=[],this.angles[by]=[],this.pre_angles[by]=[];for(var Ey=0;Ey<yA.length;Ey++){var ky=yA[Ey],Oy=C0($.scaleLine(ky,_i),2),Ty=Oy[0],Ly=Oy[1],ay=Ty[yy],Ny=$.placeAtIndex(yy,Ty,Ly,iy),Uy=Ny.positions,Xy=Ny.offsets,Yy=Ny.angles,Wy=Ny.pre_angles,_g=Xy.map(function(y1){return Math.sqrt(y1[0]*y1[0]+y1[1]*y1[1])/_l});if(ky===0){this.angle=1/Yy.length*Yy.reduce(function(y1,Y1){return y1+Y1});for(var y0=0;y0<Uy.length;y0++){var _m=Uy[y0],s0=Wy[y0],R0=iy[y0],Q0=s0+Yy[y0];this._aabbs.push(this.getAABBForSegment(_m,R0,_p,Q0))}}this.positions[by].push(Uy[by]),this.offsets[by].push(_g[by]),this.angles[by].push(Yy[by]),this.pre_angles[by].push(Wy[by])}}for(var iy=_r.slice().reverse().map(function(y1){return y1[0]*_l}),W0=0;W0<iy.length;W0++){this.alt_offsets[W0]=[],this.alt_angles[W0]=[],this.alt_pre_angles[W0]=[];for(var t1=0;t1<yA.length;t1++){var o1=yA[t1],A1=C0($.scaleLine(o1,_i),2),j1=A1[0],Z0=A1[1];ay=j1[yy];var F1=$.placeAtIndex(yy,j1,Z0,iy),B_=F1.offsets,e_=F1.angles,u_=F1.pre_angles,cx=B_.map(function(y1){return Math.sqrt(y1[0]*y1[0]+y1[1]*y1[1])/_l});o1===0&&(this.alt_angle=1/e_.length*e_.reduce(function(y1,Y1){return y1+Y1})),this.alt_offsets[W0].push(cx[W0]),this.alt_angles[W0].push(e_[W0]),this.alt_pre_angles[W0].push(u_[W0])}}return!0}},{key:"getBoundingCircles",value:function(){if(!this._circles){for(var _r=[],_i=this.unit_scale,_s=0;_s<this.positions.length;_s++){var ga=this.sizes[_s],_l=this.angles[_s][0],_c=this.positions[_s][0],_p=ga[0]/2*_i,_f=_p*Math.cos(_l),ey=_p*Math.sin(_l),iy=-_f,ly=-ey,uy=C0(_c,2),cy=uy[0],yy=uy[1],ay=hA(_f+=cy,ey+=yy*=-1,iy+=cy,ly+=yy,ga[1]/2*_i);Array.prototype.push.apply(_r,ay)}this._circles=_r}return this._circles}},{key:"getAABB",value:function(){if(!this._aabb){for(var _s=1/0,ga=-1/0,_l=-1/0,_c=1/0,_r=0;_r<this._aabbs.length;_r++)var _i=this._aabbs[_r],_s=Math.min(_s,_i.left),ga=Math.max(ga,_i.top),_l=Math.max(_l,_i.right),_c=Math.min(_c,_i.bottom);this._aabb={left:_s,top:ga,right:_l,bottom:_c}}return this._aabb}}],[{key:"curvaturePlacement",value:function(_r,_i,_s,ga,_l,_c){_l=_l||0,_c=_c||_r.length-1;for(var _p=[],_f=_l+1;_f<_c;_f++){var ey=_r[_f-1],iy=_r[_f],ly=_r[_f+1],uy=x0.perp(iy,ey),cy=x0.perp(ly,iy),yy=x0.angleBetween(uy,cy);1<yy&&(yy=1/0),_p.push(yy)}_p.push(1/0);for(var ay=[],by=[],Ey=_l,ky=0,Oy=0;Oy<_l;Oy++)ky+=_s[Oy];for(;ky+ga<_i;){for(var Ty=ky+ga,Ly=ky,Ny=Ey,Uy=0;Ny<_c&&Ly+_s[Ny]<Ty&&(Uy+=_p[Ny])!==1/0;)Ly+=_s[Ny],Ny++;if(Uy===0)return Ey;var Xy=Uy/(Ny-Ey);ay.push(Uy),by.push(Xy),ky+=_s[Ey],Ey++}if(ay.length===0)return-1;var Yy=Math.min.apply(null,ay),Wy=by[ay.indexOf(Yy)];return Yy<1.3&&Wy<.4?ay.indexOf(Yy):-1}},{key:"scaleLine",value:function(_r,_i){var _s=[_i[0]],ga=[];return _i.forEach(function(_l,_c){var _p,_f;_c!==_i.length-1&&(_p=x0.sub(_i[_c+1],_i[_c]),_f=x0.mult(_p,1+_r),_s.push(x0.add(_s[_c],_f)),ga.push(x0.length(_f)))}),[_s,ga]}},{key:"placeAtIndex",value:function(_r,_i,_s,ga){var _l=_i[_r],_c=C0($.getIndicesAndOffsets(_r,_s,ga),2),_p=_c[0],_f=_c[1],ey=$.getPositionsFromIndicesAndOffsets(_i,_p,_f),iy=C0($.getAnglesFromIndicesAndOffsets(_l,_p,_i,ey),3);return{positions:ey,offsets:iy[0],angles:iy[1],pre_angles:iy[2]}}},{key:"getIndicesAndOffsets",value:function(_r,_i,_s){for(var ga=_s.length,_l=[],_c=[],_p=0,_f=0,ey=0;_p<ga;){for(var iy=_s[_p];_p<ga&&_f+.5*iy<=ey+_i[_r];){var ly=_f-ey+.5*iy;_c.push(ly),_l.push(_r),_f+=iy,iy=_s[++_p]}ey+=_i[_r],_r++}return[_l,_c]}},{key:"getPositionsFromIndicesAndOffsets",value:function(_r,_i,_s){for(var ga=[],_l=0;_l<_i.length;_l++){var _c=_i[_l],_p=_s[_l],_f=o3(_r[_c],_r[_c+1]),ey=x0.rot([_p,0],_f),iy=x0.add(_r[_c],ey);ga.push(iy)}return ga}},{key:"getAnglesFromIndicesAndOffsets",value:function(_r,_i,_s,ga){for(var _l,_c,_p=[],_f=[],ey=[],iy=0;iy<ga.length;iy++){var ly,uy,cy=ga[iy],yy=_i[iy],ay=x0.sub(cy,_r),by=-x0.angle(ay),Ey=(_l=_s[yy],_c=_s[yy+1],-o3(_l,_c)-by);0<iy&&(ly=_p[iy-1],uy=_f[iy-1],Math.abs(by-ly)>Math.PI&&(by+=ly<by?-2*Math.PI:2*Math.PI),Math.abs(uy-Ey)>Math.PI&&(Ey+=uy<Ey?-2*Math.PI:2*Math.PI)),_p.push(by),_f.push(Ey),ey.push(ay)}return[ey,_p,_f]}}]),$}();function o3(j,$){var _r=x0.sub($,j);return x0.angle(_r)}function tM(j){for(var $=[],_r=0;_r<j.length-1;_r++){var _i=j[_r],_s=j[_r+1],ga=Math.hypot(_i[0]-_s[0],_i[1]-_s[1]);$.push(ga)}return $}var s3=Object.create(Vx);Object.assign(s3,{name:"text",super:Vx,built_in:!0,init:function(j){var $=0<arguments.length&&j!==void 0?j:{};N1.init.call(this,$),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!1,this.defines.TANGRAM_IS_TEXT_STYLE=!0,this.reset()},makeVertexTemplate:function(j,$){this.super.makeVertexTemplate.apply(this,arguments);var _r=$.vertex_data.vertex_layout;return this.fillVertexTemplate(_r,"a_pre_angles",0,{size:4}),this.fillVertexTemplate(_r,"a_offsets",0,{size:4}),this.fillVertexTemplate(_r,"a_angles",0,{size:4}),this.fillVertexTemplate(_r,"a_offsets_alt",0,{size:4}),this.fillVertexTemplate(_r,"a_pre_angles_alt",0,{size:4}),this.fillVertexTemplate(_r,"a_angles_alt",0,{size:4}),this.vertex_template},reset:function(){this.queues={},this.resetText()},addFeature:function(j,$,_r){var _i=this,_s=_r.tile,ga=j.geometry.type;$.can_articulate=ga==="LineString"||ga==="MultiLineString",$.supersample_text=ga==="LineString"||ga==="MultiLineString";var _l=this.parseTextFeature(j,$,_r,_s);_l&&(_l instanceof Array?_l.forEach(function(_c){_c.feature=j,_c.context=_r,_c.layout.vertex=!1,_i.queueFeature(_c,_s)}):(_l.feature=j,_l.context=_r,_l.layout.vertex=!1,this.queueFeature(_l,_s)),L_.addStyle(this.name,_s.id))},endData:function(j){var $=this,_r=this.queues[j.id];return delete this.queues[j.id],this.collideAndRenderTextLabels(j,this.name,_r).then(function(_i){var _s=_i.labels,ga=_i.texts;return _s&&ga&&($.texts[j.id]=ga,_s.forEach(function(_l){var _c=_l.text_settings_key,_p=$.texts[j.id][_c]&&$.texts[j.id][_c][_l.text],_f=$.feature_style;_f.label=_l.label,_l.label.text_data={text_info:_p,text_settings_key:_c,text:_l.text},_f.label_texture=$.textureManager.default,_p.text_settings.can_articulate?(_f.size={},_l.label.type==="straight"?_f.size.straight=_p.size.logical_size:_f.size.curved=_p.segment_sizes.map(function(ey){return ey.logical_size})):_f.size=_p.size.logical_size,N1.addFeature.call($,_l.feature,_l.draw,_l.context)})),$.freeText(j),N1.endData.call($,j).then(function(_l){if(_l){for(var _c in _l.meshes)_l.meshes[_c].uniforms.u_apply_color_blocks=!0;j.mesh_data[$.name]=_l}return _l})})},_preprocess:function(j){return this.preprocessText(j)},buildTextLabels:function(j,$){for(var _r=[],_i=0;_i<$.length;_i++){var _s,ga=$[_i],_l=this.texts[j.id][ga.text_settings_key][ga.text],_c=void 0;ga.layout.vertical_buffer=_l.vertical_buffer,_c=_l.text_settings.can_articulate?(_s=_l.segment_sizes.map(function(ey){return ey.collision_size}),ga.layout.no_curving=_l.no_curving,this.buildLabels(_s,ga.feature.geometry,ga.layout,_l.size.collision_size)):this.buildLabels(_l.size.collision_size,ga.feature.geometry,ga.layout);for(var _p=0;_p<_c.length;_p++){var _f=Object.create(ga);_f.label=_c[_p],_r.push(_f)}}return _r},buildLabels:function(j,$,_r,_i){var _s,ga,_l=$.type!=="Point",_c=[];if($.type==="LineString")Array.prototype.push.apply(_c,this.buildLineLabels($.coordinates,j,_l,_r,_i));else if($.type==="MultiLineString")for(var _p=$.coordinates,_f=0;_f<_p.length;++_f)Array.prototype.push.apply(_c,this.buildLineLabels(_p[_f],j,_l,_r,_i));else if($.type==="Point")_c.push(new v_($.coordinates,j,_l,_r));else if($.type==="MultiPoint")for(var ey=$.coordinates,iy=0;iy<ey.length;++iy)_c.push(new v_(ey[iy],j,_l,_r));else $.type==="Polygon"?(_s=Zy.centroid($.coordinates),_c.push(new v_(_s,j,_l,_r))):$.type==="MultiPolygon"&&(ga=Zy.multiCentroid($.coordinates),_c.push(new v_(ga,j,_l,_r)));return _c},buildLineLabels:function(j,$,_r,_i,_s){var ga,_l=[],_c=Math.min(_i.subdiv,j.length-1);if(1<_c)for(var _p=(j.length-1)/_c,_f=0;_f<_c;_f++){var ey=Math.floor(_f*_p),iy=Math.floor((_f+1)*_p)+1,ly=j.slice(ey,iy),uy=QC($,_s,ly,_r,_i);uy&&_l.push(uy)}return _l.length<_c&&(ga=QC($,_s,j,_r,_i))&&_l.push(ga),_l},vertexLayoutForMeshVariant:function(){var j;return this.vertex_layout||(j=[{name:"a_position",size:4,type:I0.SHORT,normalized:!1},{name:"a_shape",size:4,type:I0.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:I0.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:I0.SHORT,normalized:!1},{name:"a_color",size:4,type:I0.UNSIGNED_BYTE,normalized:!0},{name:"a_angles",size:4,type:I0.SHORT,normalized:!1},{name:"a_offsets",size:4,type:I0.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles",size:4,type:I0.BYTE,normalized:!1},{name:"a_selection_color",size:4,type:I0.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:I0.UNSIGNED_BYTE,normalized:!0},{name:"a_offsets_alt",size:4,type:I0.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles_alt",size:4,type:I0.BYTE,normalized:!1},{name:"a_angles_alt",size:4,type:I0.SHORT,normalized:!1}],this.vertex_layout=new Fx(j)),this.vertex_layout},getMeshVariantTypeForDraw:Vx.getMeshVariantTypeForDraw}),s3.texture_id=0;var eM=Object.create(fE);Object.assign(eM,{name:"raster",super:fE,built_in:!0,init:function(){this.raster=this.raster||"color",this.super.init.apply(this,arguments),this.selection=!1,this.defines.SNAP_TO_PIXEL_GRID=!0},_preprocess:function(j){return j.color=j.color||Gy.defaults.color,this.super._preprocess.apply(this,arguments)}});var rM=Object.create(Vx);Object.assign(rM,{name:"custom_icons",collision:!1,init:function(j){var $=0<arguments.length&&j!==void 0?j:{};Vx.init.call(this,$)},loadTexture:function(j,$,_r){var _i,_s=j.width,ga=j.height,_l=j.items,_c=document.createElement("canvas"),_p=q0.device_pixel_ratio,_f=this.sources[$],ey={sprites:{}};if(_c.width=_s*_p,_c.height=ga*_p,_f){var iy,ly=_l.length,uy=_c.getContext("2d");for(uy.scale(_p,_p);iy=_l[--ly];){var cy,yy=_f.getIconBitmapByObjectId(iy.meta.objectId,iy.meta.id);yy&&((cy=sC(yy))?o0("error",cy):(uy.drawImage(yy,iy.x,iy.y,iy.width,iy.height),ey.sprites[iy.meta.id]=[iy.x,iy.y,iy.width,iy.height]))}}return ey.element=_c,(_i=this.textureManager.create(this.gl,_r,ey)).retain(),_i.loading.then(function(ay){return ay.name})},buildRasterTextures:function(j,$){return S0.postMessage(this.main_thread_target+".loadTexture",j.rasters,j.source,j.texture_name).then(function(_r){return $.textures.push(_r),$})},addFeature:function(j,$,_r){var _i=_r.tile.rasters,_s={};_i.items.forEach(function(_c){_s[_c.meta.id]=[_c.x,_c.y,_c.width,_c.height]});var ga="".concat(_r.tile.source,"_dyn_").concat(_r.tile.coords.key,"_").concat(this.generation,"_").concat(_r.tile.id);$.texture=_r.tile.texture_name=ga;var _l=Object.assign({},uR,{name:ga,width:_i.width,height:_i.height,sprites:_s,manager:this.textureManager});dS.prototype.calculateSprites.apply(_l),this.textureManager.textures[ga]=_l,Vx.addFeature.apply(this,arguments),delete this.textureManager.textures[ga]}});var uR={filtering:"linear",density:1,valid:!0,power_of_2:!1,texcoords:{},sizes:{},css_sizes:{},aspects:{}},nM=Object.create(fE);Object.assign(nM,{name:"overlays",super:fE,init:function(j){var $=0<arguments.length&&j!==void 0?j:{};this.selection=$.selection||!0,this.raster=this.raster||"color",this.super.init.apply(this,arguments)},setupRasters:function(){if(!$1.is_main)return!1;if(this.super.setupRasters.call(this))return!0;var j=!1;for(var $ in this.sources)if(this.sources[$]instanceof lC){j=!0;break}return!!j&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",h4,"Raster"),!0)},loadTextures:function(j,$){var _r,_i,_s,ga=this.sources[$],_l=j.name;if(j.overlays_config.forEach(function(_f){var ey,iy=_f.texcoords,ly=_f.id,uy=ga.getMapObjectById(ly),cy=uy.getBitmap();cy&&((ey=sC(cy=aC(cy,cy.width,cy.height)))?o0("error",ey):(_r||((_r=document.createElement("canvas")).width=j.width,_r.height=j.height,_i=_r.getContext("2d")),_i.save(),_i.globalAlpha=uy.getOpacity(),iy.forEach(function(yy){return _i.drawImage(cy,yy[0],yy[1],yy[2],yy[3])}),_i.restore(),_s=!0))}),_s){j.element=_r;var _c={};return _c[_l]=j,this.super.loadTextures.call(this,_c)}var _p=this.textureManager.textures[this.textureManager.default];return Promise.resolve([{name:_p.name,width:_p.width,height:_p.height,loaded:_p.loaded}])},buildRasterTextures:function(j,$){var _r=this.sources[j.source].tileTexture(j);return _r?S0.postMessage(this.main_thread_target+".loadTextures",_r,j.source).then(function(_i){if(!_i||_i.length<1)return $;if(_i.some(function(ga){return!ga.loaded}))return null;var _s=_i[0].name;return $.uniforms=$.uniforms||{},$.textures=$.textures||[],$.uniforms.u_raster=_s,$.uniforms.u_raster_offset=[0,0,1],$.textures.push(_s),$}):Promise.resolve($)}});var iM=Object.create(N1),vA=[-1,0,1,0,-1,1,-1,1,1,0,1,1,-1,0,1,0,-1,1,-1,1,1,0,1,1];Object.assign(iM,{name:"skybox",built_in:!0,vertex_shader_src:"uniform float u_horizon;uniform float u_tilt;uniform float u_zoom;attribute vec2 a_position;attribute float a_is_sky;attribute float a_is_top;attribute vec4 a_color;varying vec4 v_color;const float SIN_THRESHOLD_ANGLE=0.96126069082;void main(){v_color=a_color;float sin_tilt=sin(u_tilt);float sky_bottom_alpha=1.-max(sin_tilt-SIN_THRESHOLD_ANGLE,0.)*3.;if((a_position.y==1.&&a_is_sky==0.)||(a_position.y==0.&&a_is_sky==1.)){v_color.w=sky_bottom_alpha;}float fog_height=max((22.-u_zoom)*0.04,0.)*(sin_tilt-.7);float position_z=u_zoom<17. ? .942 : .9418;gl_Position=vec4(a_position.x,a_is_sky*(a_position.y+a_is_top)+1.0-u_horizon-(1.0-a_is_sky)*(1.0-a_position.y)*fog_height,position_z,1.0);}",fragment_shader_src:"varying vec4 v_color;void main(void){gl_FragColor=v_color;}",selection:!1,blend:"inlay",blend_order:1,init:function(){N1.init.apply(this,arguments),this.selection=!1},_preprocess:function(j){return j.color={top:Gy.createColorPropertyCache(j.color.zenith),bottom:Gy.createColorPropertyCache(j.color.horizon),fog:Gy.createColorPropertyCache(j.color.fog)},j},vertexLayoutForMeshVariant:function(){var j;return this.vertex_layout||(j=[{name:"a_position",size:2,type:I0.FLOAT,normalized:!1},{name:"a_is_sky",size:1,type:I0.FLOAT,normalized:!0},{name:"a_color",size:4,type:I0.UNSIGNED_BYTE,normalized:!0},{name:"a_is_top",size:1,type:I0.FLOAT,normalized:!0}],this.vertex_layout=new Fx(j)),this.vertex_layout},makeVertexTemplate:function(){var j=0;return this.vertex_template[j++]=0,this.vertex_template[1]=0,this.vertex_template},parseFeature:function(j,$,_r){var _i=this.feature_style;return $.color&&$.color.top&&$.color.bottom&&(_i.color_top=this.parseColor($.color.top,_r),_i.color_bottom=this.parseColor($.color.bottom,_r),_i.color_fog=this.parseColor($.color.fog||"white",_r),Array.isArray(_i.color_fog)&&(_i.color_fog=_i.color_fog.slice(),_i.color_fog[3]=0)),_i},buildGeometry:function(j,$,_r){for(var _i=this.makeVertexTemplate($),_s=_r.vertex_data,ga=_r.vertex_data.vertex_layout,_l=_s.vertex_layout.index.a_position,_c={top:$.color_top,bottom:$.color_bottom},_p={top:$.color_bottom,bottom:$.color_fog},_f=0,ey=vA.length-1;_f<ey;_f+=2){_i[_l+0]=vA[_f],_i[_l+1]=vA[_f+1];var iy=_f<12,ly=0<vA[_f+1],uy=iy?_c:_p;this.fillVertexTemplate(ga,"a_is_sky",iy?1:0,{size:1}),this.fillVertexTemplate(ga,"a_is_top",ly?1:0,{size:1}),this.fillVertexTemplate(ga,"a_color",x0.mult(ly?uy.top:uy.bottom,255),{size:4}),_s.addVertex(_i)}return 4}});var oM=function(){function j(){F0(this,j),this.styles={},this.base_styles={},this.register(Object.create(fE)),this.register(Object.create(Z_)),this.register(Object.create(yE)),this.register(Object.create(Vx)),this.register(Object.create(s3)),this.register(Object.create(eM)),this.register(Object.create(rM)),this.register(Object.create(nM)),this.register(Object.create(iM))}return H0(j,[{key:"init",value:function(){M0.removeBlock("global"),M0.removeBlock("setup"),M0.addBlock("global",`#ifdef TANGRAM_VERTEX_SHADER
vec4 modelPosition(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE*exp2(u_tile_origin.z-u_tile_origin.w),1.)+vec4(0.,1.,0.,0.);}vec4 modelPositionBaseZoom(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE,1.)+vec4(0.,1.,0.,0.);}
#endif
vec4 worldPosition(){return v_world_position;}
#ifdef TANGRAM_VERTEX_SHADER
vec4 wrapWorldPosition(vec4 world_position){
#if defined(TANGRAM_WORLD_POSITION_WRAP)
vec2 anchor=u_tile_origin.xy-mod(u_tile_origin.xy,TANGRAM_WORLD_POSITION_WRAP);world_position.xy-=anchor;
#endif
return world_position;}
#endif
#if defined(TANGRAM_VERTEX_SHADER)
vec3 worldNormal(){return TANGRAM_NORMAL;}
#elif defined(TANGRAM_FRAGMENT_SHADER)
vec3 worldNormal(){return u_inverseNormalMatrix*TANGRAM_NORMAL;}
#endif
`),M0.addBlock("global","void applyLayerOrder(float layer,inout vec4 position){position.z-=layer*TANGRAM_LAYER_DELTA*position.w;}"),M0.addBlock("global",`
#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)
attribute vec4 a_selection_color;varying vec4 v_selection_color;uniform vec4 u_selection_discard0;uniform vec4 u_selection_discard1;uniform vec4 u_selection_discard2;uniform vec4 u_selection_discard3;uniform vec4 u_selection_discard4;uniform vec4 u_selection_discard5;uniform vec4 u_selection_discard6;uniform vec4 u_selection_discard7;uniform vec4 u_selection_discard8;uniform vec4 u_selection_discard9;
#endif
`),M0.addBlock("global",`uniform float u_view_pan_snap_timer;void snapToPixelGrid(inout vec4 position){vec2 position_fract=fract((((position.xy/position.w)+1.)*.5)*u_resolution);vec2 position_snap=position.xy+((step(0.5,position_fract)-position_fract)*position.w*2./u_resolution);
#ifdef TANGRAM_VIEW_PAN_SNAP_RATE
position.xy=mix(position.xy,position_snap,clamp(u_view_pan_snap_timer*TANGRAM_VIEW_PAN_SNAP_RATE,0.,1.));
#else
position.xy=position_snap;
#endif
}`),M0.replaceBlock("utils",`#ifndef UTILS
#define UTILS
bool isLocalSpacePixelOutsideTile(vec4 pixel_local_space_position,float tile_scale){return pixel_local_space_position.x<0.||pixel_local_space_position.x>=tile_scale||pixel_local_space_position.y>0.||pixel_local_space_position.y<=-tile_scale;}
#endif
`),M0.replaceBlock("setup",`
#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)
if(a_selection_color.rgb==vec3(0.)||a_selection_color==u_selection_discard0||a_selection_color==u_selection_discard1||a_selection_color==u_selection_discard2||a_selection_color==u_selection_discard3||a_selection_color==u_selection_discard4||a_selection_color==u_selection_discard5||a_selection_color==u_selection_discard6||a_selection_color==u_selection_discard7||a_selection_color==u_selection_discard8||a_selection_color==u_selection_discard9){gl_Position=vec4(0.,0.,0.,1.);return;}v_selection_color=a_selection_color;
#endif
`),M0.defines.TANGRAM_EPSILON=1e-5,M0.defines.TANGRAM_LAYER_DELTA=1/16384,M0.defines.TANGRAM_TILE_SCALE="vec3(".concat(Zy.tile_scale,"., ").concat(Zy.tile_scale,"., u_meters_per_pixel * ").concat(Zy.tile_size,".)"),M0.defines.TANGRAM_HEIGHT_SCALE=Zy.height_scale,M0.defines.TANGRAM_ALPHA_TEST=.1,Z_.dash_textures={}}},{key:"destroy",value:function($){var _r=this;Object.keys(this.styles).forEach(function(_i){var _s=_r.styles[_i];_s.gl===$&&(o0("trace","StyleManager.destroy: destroying render style ".concat(_s.name)),_s.base&&_r.remove(_s.name),_s.destroy())})}},{key:"register",value:function($){this.styles[$.name]=$,this.base_styles[$.name]=$}},{key:"remove",value:function($){delete this.styles[$]}},{key:"mix",value:function($,_r){if($.mixed)return $;$.mixed={};var _i=[];$.mix&&(Array.isArray($.mix)?_i.push.apply(_i,u1($.mix)):_i.push($.mix),(_i=_i.map(function(ga){return _r[ga]}).filter(function(ga){return ga&&ga!==$})).forEach(function(ga){return $.mixed[ga.name]=!0})),_i.push($),$.animated=_i.some(function(ga){return ga&&ga.animated}),$.texcoords=_i.some(function(ga){return ga&&ga.texcoords}),$.base=_i.map(function(ga){return ga.base}).filter(function(ga){return ga}).pop(),$.lighting=_i.map(function(ga){return ga.lighting}).filter(function(ga){return ga!=null}).pop(),$.texture=_i.map(function(ga){return ga.texture}).filter(function(ga){return ga}).pop(),$.raster=_i.map(function(ga){return ga.raster}).filter(function(ga){return ga!=null}).pop(),$.dash=_i.map(function(ga){return ga.dash}).filter(function(ga){return ga!=null}).pop(),$.dash_background_color=_i.map(function(ga){return ga.dash_background_color}).filter(function(ga){return ga!=null}).pop(),_i.some(function(ga){return ga.hasOwnProperty("blend")&&ga.blend})&&($.blend=_i.map(function(ga){return ga.hasOwnProperty("blend")&&ga.blend}).filter(function(ga){return ga}).pop()),$.blend_order=_i.map(function(ga){return ga.blend_order}).filter(function(ga){return ga!=null}).pop(),$.defines=Object.assign.apply(Object,[{}].concat(u1(_i.map(function(ga){return ga.defines}).filter(function(ga){return ga})))),$.material=Object.assign.apply(Object,[{}].concat(u1(_i.map(function(ga){return ga.material}).filter(function(ga){return ga}))));var _s=_i.map(function(ga){return ga.draw}).filter(function(ga){return ga});return 0<_s.length&&($.draw=zx.apply(void 0,[{}].concat(u1(_s)))),this.mixShaders($,_r,_i),$}},{key:"mixShaders",value:function($,_r,_i){var _s={},ga=_i.map(function(ey){return ey.shaders}).filter(function(ey){return ey});if(_s.defines=Object.assign.apply(Object,[{}].concat(u1(ga.map(function(ey){return ey.defines}).filter(function(ey){return ey})))),_s.uniforms={},_s._uniforms=$.shaders&&$.shaders.uniforms||{},_s._uniform_scopes={},_i.filter(function(ey){return ey.shaders&&ey.shaders.uniforms}).forEach(function(ey){for(var iy in ey.shaders.uniforms)(function(ly){_s._uniform_scopes[ly]=ey.name,Object.defineProperty(_s.uniforms,ly,{enumerable:!0,configurable:!0,get:function(){return _s._uniforms[ly]!==void 0?_s._uniforms[ly]:_r[_s._uniform_scopes[ly]].shaders.uniforms!==_s.uniforms?_r[_s._uniform_scopes[ly]].shaders.uniforms[ly]:void 0},set:function(uy){_s._uniforms[ly]=uy}})})(iy)}),_s.extensions=Object.keys(ga.map(function(ey){return ey.extensions}).filter(function(ey){return ey}).reduce(function(ey,iy){return typeof iy=="string"?ey[iy]=!0:iy.forEach(function(ly){return ey[ly]=!0}),ey},{})||{}),$.shaders&&$.shaders.blocks)for(var _l in $.shaders.block_scopes=$.shaders.block_scopes||{},$.shaders.blocks){var _c,_p=$.shaders.blocks[_l];$.shaders.block_scopes[_l]=$.shaders.block_scopes[_l]||[],Array.isArray(_p)?(_c=$.shaders.block_scopes[_l]).push.apply(_c,u1(_p.map(function(){return $.name}))):$.shaders.block_scopes[_l].push($.name)}var _f={};return ga.forEach(function(ey){if(ey.blocks){_s.blocks=_s.blocks||{},_s.block_scopes=_s.block_scopes||{};var iy={};for(var ly in ey.blocks){var uy=ey.blocks[ly],cy=ey.block_scopes[ly];_s.blocks[ly]=_s.blocks[ly]||[],_s.block_scopes[ly]=_s.block_scopes[ly]||[],uy=Array.isArray(uy)?uy:[uy],cy=Array.isArray(cy)?cy:[cy];for(var yy=0;yy<uy.length;yy++)_f[cy[yy]]||(iy[cy[yy]]=!0,_s.blocks[ly].push(uy[yy]),_s.block_scopes[ly].push(cy[yy]))}Object.assign(_f,iy)}}),Object.assign($.mixed,_f),$.shaders=_s,$}},{key:"create",value:function($,_r,_i){var _s=2<arguments.length&&_i!==void 0?_i:{},ga=zx({},_r);return ga.name=$,(ga=this.mix(ga,_s)).base&&this.base_styles[ga.base]?this.styles[$]=ga=Object.assign(Object.create(this.base_styles[ga.base]),ga):ga.base=null,ga}},{key:"build",value:function($){var _r=this,_i=Object.keys($).sort(function(_l,_c){return _r.inheritanceDepth(_l,$)-_r.inheritanceDepth(_c,$)});for(var _s in this.styles)this.base_styles[_s]?this.styles[_s].reset():delete this.styles[_s];var ga={};return _i.forEach(function(_l){ga[_l]=_r.create(_l,$[_l],ga)}),this.styles}},{key:"initStyles",value:function($){var _r=0<arguments.length&&$!==void 0?$:{};for(var _i in this.styles)this.styles[_i].init(_r)}},{key:"inheritanceDepth",value:function($,_r){for(var _i=this,_s=0;;){var ga=_r[$];if(!ga||!ga.mix)break;if(_s++,Array.isArray(ga.mix)){_s+=Math.max.apply(Math,u1(ga.mix.map(function(_l){if($!==_l)return _i.inheritanceDepth(_l,_r)})));break}if($===ga.mix)break;$=ga.mix}return _s}}]),j}();function sM(j){return j==null}var q1={isNothing:sM,isObject:function(j){return typeof j=="object"&&j!==null},toArray:function(j){return Array.isArray(j)?j:sM(j)?[]:[j]},repeat:function(j,$){for(var _r="",_i=0;_i<$;_i+=1)_r+=j;return _r},isNegativeZero:function(j){return j===0&&Number.NEGATIVE_INFINITY===1/j},extend:function(j,$){var _r,_i,_s,ga;if($)for(_r=0,_i=(ga=Object.keys($)).length;_r<_i;_r+=1)j[_s=ga[_r]]=$[_s];return j}};function a3(j,$){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name="YAMLException",this.reason=j,this.mark=$,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"")}((a3.prototype=Object.create(Error.prototype)).constructor=a3).prototype.toString=function(j){var $=this.name+": ";return $+=this.reason||"(unknown reason)",!j&&this.mark&&($+=" "+this.mark.toString()),$};var V_=a3;function l3(j,$,_r,_i,_s){this.name=j,this.buffer=$,this.position=_r,this.line=_i,this.column=_s}l3.prototype.getSnippet=function(j,$){var _r,_i,_s,ga,_l;if(!this.buffer)return null;for(j=j||4,$=$||75,_r="",_i=this.position;0<_i&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(_i-1))===-1;)if(--_i,this.position-_i>$/2-1){_r=" ... ",_i+=5;break}for(_s="",ga=this.position;ga<this.buffer.length&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(ga))===-1;)if((ga+=1)-this.position>$/2-1){_s=" ... ",ga-=5;break}return _l=this.buffer.slice(_i,ga),q1.repeat(" ",j)+_r+_l+_s+`
`+q1.repeat(" ",j+this.position-_i+_r.length)+"^"},l3.prototype.toString=function(j){var $,_r="";return this.name&&(_r+='in "'+this.name+'" '),_r+="at line "+(this.line+1)+", column "+(this.column+1),j||($=this.getSnippet())&&(_r+=`:
`+$),_r};var cR=l3,hR=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],pR=["scalar","sequence","mapping"],o_=function(j,$){var _r,_i;if($=$||{},Object.keys($).forEach(function(_s){if(hR.indexOf(_s)===-1)throw new V_('Unknown option "'+_s+'" is met in definition of "'+j+'" YAML type.')}),this.tag=j,this.kind=$.kind||null,this.resolve=$.resolve||function(){return!0},this.construct=$.construct||function(_s){return _s},this.instanceOf=$.instanceOf||null,this.predicate=$.predicate||null,this.represent=$.represent||null,this.defaultStyle=$.defaultStyle||null,this.styleAliases=(_r=$.styleAliases||null,_i={},_r!==null&&Object.keys(_r).forEach(function(_s){_r[_s].forEach(function(ga){_i[String(ga)]=_s})}),_i),pR.indexOf(this.kind)===-1)throw new V_('Unknown kind "'+this.kind+'" is specified for "'+j+'" YAML type.')};function u3(j,$,_r){var _i=[];return j.include.forEach(function(_s){_r=u3(_s,$,_r)}),j[$].forEach(function(_s){_r.forEach(function(ga,_l){ga.tag===_s.tag&&_i.push(_l)}),_r.push(_s)}),_r.filter(function(_s,ga){return _i.indexOf(ga)===-1})}function vE(j){this.include=j.include||[],this.implicit=j.implicit||[],this.explicit=j.explicit||[],this.implicit.forEach(function($){if($.loadKind&&$.loadKind!=="scalar")throw new V_("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=u3(this,"implicit",[]),this.compiledExplicit=u3(this,"explicit",[]),this.compiledTypeMap=function(){var $,_r,_i={};function _s(ga){_i[ga.tag]=ga}for($=0,_r=arguments.length;$<_r;$+=1)arguments[$].forEach(_s);return _i}(this.compiledImplicit,this.compiledExplicit)}vE.DEFAULT=null,vE.create=function(j,$){var _r,_i;switch(arguments.length){case 1:_r=vE.DEFAULT,_i=j;break;case 2:_r=j,_i=$;break;default:throw new V_("Wrong number of arguments for Schema.create function")}if(_r=q1.toArray(_r),_i=q1.toArray(_i),!_r.every(function(_s){return _s instanceof vE}))throw new V_("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!_i.every(function(_s){return _s instanceof o_}))throw new V_("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new vE({include:_r,explicit:_i})};var T2=vE,c3=new T2({explicit:[new o_("tag:yaml.org,2002:str",{kind:"scalar",construct:function(j){return j!==null?j:""}}),new o_("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(j){return j!==null?j:[]}}),new o_("tag:yaml.org,2002:map",{kind:"mapping",construct:function(j){return j!==null?j:{}}})]}),fR=new o_("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(j){if(j===null)return!0;var $=j.length;return $===1&&j==="~"||$===4&&(j==="null"||j==="Null"||j==="NULL")},construct:function(){return null},predicate:function(j){return j===null},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"}),dR=new o_("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(j){if(j===null)return!1;var $=j.length;return $===4&&(j==="true"||j==="True"||j==="TRUE")||$===5&&(j==="false"||j==="False"||j==="FALSE")},construct:function(j){return j==="true"||j==="True"||j==="TRUE"},predicate:function(j){return Object.prototype.toString.call(j)==="[object Boolean]"},represent:{lowercase:function(j){return j?"true":"false"},uppercase:function(j){return j?"TRUE":"FALSE"},camelcase:function(j){return j?"True":"False"}},defaultStyle:"lowercase"}),yR=new o_("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(j){if(j===null)return!1;var $,_r,_i,_s,ga=j.length,_l=0,_c=!1;if(!ga)return!1;if(($=j[_l])!=="-"&&$!=="+"||($=j[++_l]),$==="0"){if(_l+1===ga)return!0;if(($=j[++_l])==="b"){for(_l++;_l<ga;_l++)if(($=j[_l])!=="_"){if($!=="0"&&$!=="1")return!1;_c=!0}return _c}if($==="x"){for(_l++;_l<ga;_l++)if(($=j[_l])!=="_"){if(!(48<=(_i=j.charCodeAt(_l))&&_i<=57||65<=_i&&_i<=70||97<=_i&&_i<=102))return!1;_c=!0}return _c}for(;_l<ga;_l++)if(($=j[_l])!=="_"){if(!(48<=(_r=j.charCodeAt(_l))&&_r<=55))return!1;_c=!0}return _c}for(;_l<ga;_l++)if(($=j[_l])!=="_"){if($===":")break;if(!(48<=(_s=j.charCodeAt(_l))&&_s<=57))return!1;_c=!0}return!!_c&&($!==":"||/^(:[0-5]?[0-9])+$/.test(j.slice(_l)))},construct:function(j){var $,_r,_i=j,_s=1,ga=[];return _i.indexOf("_")!==-1&&(_i=_i.replace(/_/g,"")),($=_i[0])!=="-"&&$!=="+"||($==="-"&&(_s=-1),$=(_i=_i.slice(1))[0]),_i==="0"?0:$==="0"?_i[1]==="b"?_s*parseInt(_i.slice(2),2):_i[1]==="x"?_s*parseInt(_i,16):_s*parseInt(_i,8):_i.indexOf(":")!==-1?(_i.split(":").forEach(function(_l){ga.unshift(parseInt(_l,10))}),_i=0,_r=1,ga.forEach(function(_l){_i+=_l*_r,_r*=60}),_s*_i):_s*parseInt(_i,10)},predicate:function(j){return Object.prototype.toString.call(j)==="[object Number]"&&j%1==0&&!q1.isNegativeZero(j)},represent:{binary:function(j){return"0b"+j.toString(2)},octal:function(j){return"0"+j.toString(8)},decimal:function(j){return j.toString(10)},hexadecimal:function(j){return"0x"+j.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),gR=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),vR=/^[-+]?[0-9]+e/,aM=new T2({include:[c3],implicit:[fR,dR,yR,new o_("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(j){return j!==null&&!!gR.test(j)},construct:function(j){var $,_r=j.replace(/_/g,"").toLowerCase(),_i=_r[0]==="-"?-1:1,_s=[];return 0<="+-".indexOf(_r[0])&&(_r=_r.slice(1)),_r===".inf"?_i==1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:_r===".nan"?NaN:0<=_r.indexOf(":")?(_r.split(":").forEach(function(ga){_s.unshift(parseFloat(ga,10))}),_r=0,$=1,_s.forEach(function(ga){_r+=ga*$,$*=60}),_i*_r):_i*parseFloat(_r,10)},predicate:function(j){return Object.prototype.toString.call(j)==="[object Number]"&&(j%1!=0||q1.isNegativeZero(j))},represent:function(j,$){var _r;if(isNaN(j))switch($){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===j)switch($){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===j)switch($){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(q1.isNegativeZero(j))return"-0.0";return _r=j.toString(10),vR.test(_r)?_r.replace("e",".e"):_r},defaultStyle:"lowercase"})]}),lM=new T2({include:[aM]}),uM=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$"),mR=new o_("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(j){return j!==null&&uM.exec(j)!==null},construct:function(j){var $,_r,_i,_s,ga,_l,_c,_p=0,_f=null,ey=uM.exec(j);if(ey===null)throw new Error("Date resolve error");if($=+ey[1],_r=ey[2]-1,_i=+ey[3],!ey[4])return new Date(Date.UTC($,_r,_i));if(_s=+ey[4],ga=+ey[5],_l=+ey[6],ey[7]){for(_p=ey[7].slice(0,3);_p.length<3;)_p+="0";_p=+_p}return ey[9]&&(_f=6e4*(60*+ey[10]+ +(ey[11]||0)),ey[9]==="-"&&(_f=-_f)),_c=new Date(Date.UTC($,_r,_i,_s,ga,_l,_p)),_f&&_c.setTime(_c.getTime()-_f),_c},instanceOf:Date,represent:function(j){return j.toISOString()}}),_R=new o_("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(j){return j==="<<"||j===null}}),mA=tO.Buffer,h3=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`,bR=new o_("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(j){if(j===null)return!1;for(var $,_r=0,_i=j.length,_s=h3,ga=0;ga<_i;ga++)if(!(64<($=_s.indexOf(j.charAt(ga))))){if($<0)return!1;_r+=6}return _r%8==0},construct:function(j){for(var $,_r=j.replace(/[\r\n=]/g,""),_i=_r.length,_s=h3,ga=0,_l=[],_c=0;_c<_i;_c++)_c%4==0&&_c&&(_l.push(ga>>16&255),_l.push(ga>>8&255),_l.push(255&ga)),ga=ga<<6|_s.indexOf(_r.charAt(_c));return($=_i%4*6)==0?(_l.push(ga>>16&255),_l.push(ga>>8&255),_l.push(255&ga)):$==18?(_l.push(ga>>10&255),_l.push(ga>>2&255)):$==12&&_l.push(ga>>4&255),mA?new mA(_l):_l},predicate:function(j){return mA&&mA.isBuffer(j)},represent:function(j){for(var $,_r="",_i=0,_s=j.length,ga=h3,_l=0;_l<_s;_l++)_l%3==0&&_l&&(_r+=ga[_i>>18&63],_r+=ga[_i>>12&63],_r+=ga[_i>>6&63],_r+=ga[63&_i]),_i=(_i<<8)+j[_l];return($=_s%3)==0?(_r+=ga[_i>>18&63],_r+=ga[_i>>12&63],_r+=ga[_i>>6&63],_r+=ga[63&_i]):$==2?(_r+=ga[_i>>10&63],_r+=ga[_i>>4&63],_r+=ga[_i<<2&63],_r+=ga[64]):$==1&&(_r+=ga[_i>>2&63],_r+=ga[_i<<4&63],_r+=ga[64],_r+=ga[64]),_r}}),xR=Object.prototype.hasOwnProperty,wR=Object.prototype.toString,ER=new o_("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(j){if(j===null)return!0;for(var $,_r,_i,_s=[],ga=j,_l=0,_c=ga.length;_l<_c;_l+=1){if($=ga[_l],_i=!1,wR.call($)!=="[object Object]")return!1;for(_r in $)if(xR.call($,_r)){if(_i)return!1;_i=!0}if(!_i||_s.indexOf(_r)!==-1)return!1;_s.push(_r)}return!0},construct:function(j){return j!==null?j:[]}}),kR=Object.prototype.toString,TR=new o_("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(j){if(j===null)return!0;for(var $,_r,_i=j,_s=new Array(_i.length),ga=0,_l=_i.length;ga<_l;ga+=1){if($=_i[ga],kR.call($)!=="[object Object]"||(_r=Object.keys($)).length!==1)return!1;_s[ga]=[_r[0],$[_r[0]]]}return!0},construct:function(j){if(j===null)return[];for(var $,_r,_i=j,_s=new Array(_i.length),ga=0,_l=_i.length;ga<_l;ga+=1)$=_i[ga],_r=Object.keys($),_s[ga]=[_r[0],$[_r[0]]];return _s}}),AR=Object.prototype.hasOwnProperty,mE=new T2({include:[lM],implicit:[mR,_R],explicit:[bR,ER,TR,new o_("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(j){if(j===null)return!0;var $,_r=j;for($ in _r)if(AR.call(_r,$)&&_r[$]!==null)return!1;return!0},construct:function(j){return j!==null?j:{}}})]}),SR=new o_("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(j){return j===void 0},represent:function(){return""}}),CR=new o_("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(j){if(j===null||j.length===0)return!1;var $=j,_r=/\/([gim]*)$/.exec(j),_i="";return!($[0]==="/"&&(_r&&(_i=_r[1]),3<_i.length||$[$.length-_i.length-1]!=="/"))},construct:function(j){var $=j,_r=/\/([gim]*)$/.exec(j),_i="";return $[0]==="/"&&(_r&&(_i=_r[1]),$=$.slice(1,$.length-_i.length-1)),new RegExp($,_i)},predicate:function(j){return Object.prototype.toString.call(j)==="[object RegExp]"},represent:function(j){var $="/"+j.source+"/";return j.global&&($+="g"),j.multiline&&($+="m"),j.ignoreCase&&($+="i"),$}});try{var p3=function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}()}catch{typeof window<"u"&&(p3=window.esprima)}var MR=new o_("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(j){if(j===null)return!1;try{var $="("+j+")",_r=p3.parse($,{range:!0});return!(_r.type!=="Program"||_r.body.length!==1||_r.body[0].type!=="ExpressionStatement"||_r.body[0].expression.type!=="FunctionExpression")}catch{return!1}},construct:function(j){var $,_r="("+j+")",_i=p3.parse(_r,{range:!0}),_s=[];if(_i.type!=="Program"||_i.body.length!==1||_i.body[0].type!=="ExpressionStatement"||_i.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return _i.body[0].expression.params.forEach(function(ga){_s.push(ga.name)}),$=_i.body[0].expression.body.range,new Function(_s,_r.slice($[0]+1,$[1]-1))},predicate:function(j){return Object.prototype.toString.call(j)==="[object Function]"},represent:function(j){return j.toString()}}),_A=T2.DEFAULT=new T2({include:[mE],explicit:[SR,CR,MR]}),A2=Object.prototype.hasOwnProperty,bA=1,cM=2,hM=3,xA=4,f3=1,IR=2,pM=3,OR=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,RR=/[\x85\u2028\u2029]/,LR=/[,\[\]\{\}]/,fM=/^(?:!|!!|![a-z\-]+!)$/i,dM=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ex(j){return j===10||j===13}function S2(j){return j===9||j===32}function z_(j){return j===9||j===32||j===10||j===13}function _E(j){return j===44||j===91||j===93||j===123||j===125}function yM(j){return j===48?"\0":j===97?"\x07":j===98?"\b":j===116||j===9?"	":j===110?`
`:j===118?"\v":j===102?"\f":j===114?"\r":j===101?"\x1B":j===32?" ":j===34?'"':j===47?"/":j===92?"\\":j===78?"":j===95?" ":j===76?"\u2028":j===80?"\u2029":""}for(var gM=new Array(256),vM=new Array(256),bE=0;bE<256;bE++)gM[bE]=yM(bE)?1:0,vM[bE]=yM(bE);function PR(j,$){this.input=j,this.filename=$.filename||null,this.schema=$.schema||_A,this.onWarning=$.onWarning||null,this.legacy=$.legacy||!1,this.json=$.json||!1,this.listener=$.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=j.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function mM(j,$){return new V_($,new cR(j.filename,j.input,j.position,j.line,j.position-j.lineStart))}function X0(j,$){throw mM(j,$)}function wA(j,$){j.onWarning&&j.onWarning.call(null,mM(j,$))}var _M={YAML:function(j,$,_r){var _i,_s,ga;j.version!==null&&X0(j,"duplication of %YAML directive"),_r.length!==1&&X0(j,"YAML directive accepts exactly one argument"),(_i=/^([0-9]+)\.([0-9]+)$/.exec(_r[0]))===null&&X0(j,"ill-formed argument of the YAML directive"),_s=parseInt(_i[1],10),ga=parseInt(_i[2],10),_s!==1&&X0(j,"unacceptable YAML version of the document"),j.version=_r[0],j.checkLineBreaks=ga<2,ga!==1&&ga!==2&&wA(j,"unsupported YAML version of the document")},TAG:function(j,$,_r){var _i,_s;_r.length!==2&&X0(j,"TAG directive accepts exactly two arguments"),_i=_r[0],_s=_r[1],fM.test(_i)||X0(j,"ill-formed tag handle (first argument) of the TAG directive"),A2.call(j.tagMap,_i)&&X0(j,'there is a previously declared suffix for "'+_i+'" tag handle'),dM.test(_s)||X0(j,"ill-formed tag prefix (second argument) of the TAG directive"),j.tagMap[_i]=_s}};function Vw(j,$,_r,_i){var _s,ga,_l,_c;if($<_r){if(_c=j.input.slice($,_r),_i)for(_s=0,ga=_c.length;_s<ga;_s+=1)(_l=_c.charCodeAt(_s))===9||32<=_l&&_l<=1114111||X0(j,"expected valid JSON character");else OR.test(_c)&&X0(j,"the stream contains non-printable characters");j.result+=_c}}function bM(j,$,_r,_i){var _s,ga,_l,_c;for(q1.isObject(_r)||X0(j,"cannot merge mappings; the provided source object is unacceptable"),_l=0,_c=(_s=Object.keys(_r)).length;_l<_c;_l+=1)ga=_s[_l],A2.call($,ga)||($[ga]=_r[ga],_i[ga]=!0)}function xE(j,$,_r,_i,_s,ga){var _l,_c;if(_s=String(_s),$===null&&($={}),_i==="tag:yaml.org,2002:merge")if(Array.isArray(ga))for(_l=0,_c=ga.length;_l<_c;_l+=1)bM(j,$,ga[_l],_r);else bM(j,$,ga,_r);else j.json||A2.call(_r,_s)||!A2.call($,_s)||X0(j,"duplicated mapping key"),$[_s]=ga,delete _r[_s];return $}function d3(j){var $=j.input.charCodeAt(j.position);$===10?j.position++:$===13?(j.position++,j.input.charCodeAt(j.position)===10&&j.position++):X0(j,"a line break is expected"),j.line+=1,j.lineStart=j.position}function Q1(j,$,_r){for(var _i=0,_s=j.input.charCodeAt(j.position);_s!==0;){for(;S2(_s);)_s=j.input.charCodeAt(++j.position);if($&&_s===35)for(;(_s=j.input.charCodeAt(++j.position))!==10&&_s!==13&&_s!==0;);if(!Ex(_s))break;for(d3(j),_s=j.input.charCodeAt(j.position),_i++,j.lineIndent=0;_s===32;)j.lineIndent++,_s=j.input.charCodeAt(++j.position)}return _r!==-1&&_i!==0&&j.lineIndent<_r&&wA(j,"deficient indentation"),_i}function EA(j){var $=j.position,_r=j.input.charCodeAt($);return _r!==45&&_r!==46||_r!==j.input.charCodeAt($+1)||_r!==j.input.charCodeAt($+2)||($+=3,(_r=j.input.charCodeAt($))!==0&&!z_(_r))?void 0:1}function y3(j,$){$===1?j.result+=" ":1<$&&(j.result+=q1.repeat(`
`,$-1))}function NR(j,$){var _r,_i,_s,ga,_l,_c,_p,_f,ey,iy=j.input.charCodeAt(j.position);if(iy===34){for(j.kind="scalar",j.result="",j.position++,_r=_i=j.position;(iy=j.input.charCodeAt(j.position))!==0;){if(iy===34)return Vw(j,_r,j.position,!0),j.position++,1;if(iy===92){if(Vw(j,_r,j.position,!0),Ex(iy=j.input.charCodeAt(++j.position)))Q1(j,!1,$);else if(iy<256&&gM[iy])j.result+=vM[iy],j.position++;else if(0<(_l=(ey=iy)===120?2:ey===117?4:ey===85?8:0)){for(_s=_l,ga=0;0<_s;_s--)iy=j.input.charCodeAt(++j.position),_f=void 0,0<=(_l=48<=(_p=iy)&&_p<=57?_p-48:97<=(_f=32|_p)&&_f<=102?_f-97+10:-1)?ga=(ga<<4)+_l:X0(j,"expected hexadecimal character");j.result+=(_c=ga)<=65535?String.fromCharCode(_c):String.fromCharCode(55296+(_c-65536>>10),56320+(_c-65536&1023)),j.position++}else X0(j,"unknown escape sequence");_r=_i=j.position}else Ex(iy)?(Vw(j,_r,_i,!0),y3(j,Q1(j,!1,$)),_r=_i=j.position):j.position===j.lineStart&&EA(j)?X0(j,"unexpected end of the document within a double quoted scalar"):(j.position++,_i=j.position)}X0(j,"unexpected end of the stream within a double quoted scalar")}}function xM(j,$){var _r,_i,_s=j.tag,ga=j.anchor,_l=[],_c=!1;for(j.anchor!==null&&(j.anchorMap[j.anchor]=_l),_i=j.input.charCodeAt(j.position);_i!==0&&_i===45&&z_(j.input.charCodeAt(j.position+1));)if(_c=!0,j.position++,Q1(j,!0,-1)&&j.lineIndent<=$)_l.push(null),_i=j.input.charCodeAt(j.position);else if(_r=j.line,wE(j,$,hM,!1,!0),_l.push(j.result),Q1(j,!0,-1),_i=j.input.charCodeAt(j.position),(j.line===_r||j.lineIndent>$)&&_i!==0)X0(j,"bad indentation of a sequence entry");else if(j.lineIndent<$)break;return!!_c&&(j.tag=_s,j.anchor=ga,j.kind="sequence",j.result=_l,!0)}function wE(j,$,_r,_i,_s){var ga,_l,_c,_p,_f,ey,iy,ly,uy=1,cy=!1,yy=!1;if(j.listener!==null&&j.listener("open",j),j.tag=null,j.anchor=null,j.kind=null,j.result=null,ga=_l=_c=xA===_r||hM===_r,_i&&Q1(j,!0,-1)&&(cy=!0,j.lineIndent>$?uy=1:j.lineIndent===$?uy=0:j.lineIndent<$&&(uy=-1)),uy===1)for(;function(ay){var by,Ey,ky,Oy=!1,Ty=!1,Ly=ay.input.charCodeAt(ay.position);if(Ly===33){if(ay.tag!==null&&X0(ay,"duplication of a tag property"),(Ly=ay.input.charCodeAt(++ay.position))===60?(Oy=!0,Ly=ay.input.charCodeAt(++ay.position)):Ly===33?(Ty=!0,Ey="!!",Ly=ay.input.charCodeAt(++ay.position)):Ey="!",by=ay.position,Oy){for(;(Ly=ay.input.charCodeAt(++ay.position))!==0&&Ly!==62;);ay.position<ay.length?(ky=ay.input.slice(by,ay.position),Ly=ay.input.charCodeAt(++ay.position)):X0(ay,"unexpected end of the stream within a verbatim tag")}else{for(;Ly!==0&&!z_(Ly);)Ly===33&&(Ty?X0(ay,"tag suffix cannot contain exclamation marks"):(Ey=ay.input.slice(by-1,ay.position+1),fM.test(Ey)||X0(ay,"named tag handle cannot contain such characters"),Ty=!0,by=ay.position+1)),Ly=ay.input.charCodeAt(++ay.position);ky=ay.input.slice(by,ay.position),LR.test(ky)&&X0(ay,"tag suffix cannot contain flow indicator characters")}return ky&&!dM.test(ky)&&X0(ay,"tag name cannot contain such characters: "+ky),Oy?ay.tag=ky:A2.call(ay.tagMap,Ey)?ay.tag=ay.tagMap[Ey]+ky:Ey==="!"?ay.tag="!"+ky:Ey==="!!"?ay.tag="tag:yaml.org,2002:"+ky:X0(ay,'undeclared tag handle "'+Ey+'"'),1}}(j)||function(ay){var by,Ey=ay.input.charCodeAt(ay.position);if(Ey===38){for(ay.anchor!==null&&X0(ay,"duplication of an anchor property"),Ey=ay.input.charCodeAt(++ay.position),by=ay.position;Ey!==0&&!z_(Ey)&&!_E(Ey);)Ey=ay.input.charCodeAt(++ay.position);return ay.position===by&&X0(ay,"name of an anchor node must contain at least one character"),ay.anchor=ay.input.slice(by,ay.position),1}}(j);)Q1(j,!0,-1)?(cy=!0,_c=ga,j.lineIndent>$?uy=1:j.lineIndent===$?uy=0:j.lineIndent<$&&(uy=-1)):_c=!1;if(_c=_c&&(cy||_s),uy!==1&&xA!==_r||(iy=bA===_r||cM===_r?$:$+1,ly=j.position-j.lineStart,uy===1?_c&&(xM(j,ly)||function(ay,by,Ey){var ky,Oy,Ty,Ly,Ny=ay.tag,Uy=ay.anchor,Xy={},Yy={},Wy=null,_g=null,y0=null,_m=!1,s0=!1;for(ay.anchor!==null&&(ay.anchorMap[ay.anchor]=Xy),Ly=ay.input.charCodeAt(ay.position);Ly!==0;){if(ky=ay.input.charCodeAt(ay.position+1),Ty=ay.line,Ly!==63&&Ly!==58||!z_(ky)){if(!wE(ay,Ey,cM,!1,!0))break;if(ay.line===Ty){for(Ly=ay.input.charCodeAt(ay.position);S2(Ly);)Ly=ay.input.charCodeAt(++ay.position);if(Ly===58)z_(Ly=ay.input.charCodeAt(++ay.position))||X0(ay,"a whitespace character is expected after the key-value separator within a block mapping"),_m&&(xE(ay,Xy,Yy,Wy,_g,null),Wy=_g=y0=null),Oy=_m=!(s0=!0),Wy=ay.tag,_g=ay.result;else{if(!s0)return ay.tag=Ny,ay.anchor=Uy,1;X0(ay,"can not read an implicit mapping pair; a colon is missed")}}else{if(!s0)return ay.tag=Ny,ay.anchor=Uy,1;X0(ay,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else Ly===63?(_m&&(xE(ay,Xy,Yy,Wy,_g,null),Wy=_g=y0=null),Oy=_m=s0=!0):_m?Oy=!(_m=!1):X0(ay,"incomplete explicit mapping pair; a key node is missed"),ay.position+=1,Ly=ky;if((ay.line===Ty||ay.lineIndent>by)&&(wE(ay,by,xA,!0,Oy)&&(_m?_g=ay.result:y0=ay.result),_m||(xE(ay,Xy,Yy,Wy,_g,y0),Wy=_g=y0=null),Q1(ay,!0,-1),Ly=ay.input.charCodeAt(ay.position)),ay.lineIndent>by&&Ly!==0)X0(ay,"bad indentation of a mapping entry");else if(ay.lineIndent<by)break}return _m&&xE(ay,Xy,Yy,Wy,_g,null),s0&&(ay.tag=Ny,ay.anchor=Uy,ay.kind="mapping",ay.result=Xy),s0}(j,ly,iy))||function(ay,by){var Ey,ky,Oy,Ty,Ly,Ny,Uy,Xy,Yy,Wy=!0,_g=ay.tag,y0=ay.anchor,_m={},s0=ay.input.charCodeAt(ay.position);if(s0===91)Ny=!(Oy=93),ky=[];else{if(s0!==123)return;Oy=125,Ny=!0,ky={}}for(ay.anchor!==null&&(ay.anchorMap[ay.anchor]=ky),s0=ay.input.charCodeAt(++ay.position);s0!==0;){if(Q1(ay,!0,by),(s0=ay.input.charCodeAt(ay.position))===Oy)return ay.position++,ay.tag=_g,ay.anchor=y0,ay.kind=Ny?"mapping":"sequence",ay.result=ky,1;Wy||X0(ay,"missed comma between flow collection entries"),Yy=null,Ty=Ly=!1,s0===63&&z_(ay.input.charCodeAt(ay.position+1))&&(Ty=Ly=!0,ay.position++,Q1(ay,!0,by)),Ey=ay.line,wE(ay,by,bA,!1,!0),Xy=ay.tag,Uy=ay.result,Q1(ay,!0,by),s0=ay.input.charCodeAt(ay.position),!Ly&&ay.line!==Ey||s0!==58||(Ty=!0,s0=ay.input.charCodeAt(++ay.position),Q1(ay,!0,by),wE(ay,by,bA,!1,!0),Yy=ay.result),Ny?xE(ay,ky,_m,Xy,Uy,Yy):Ty?ky.push(xE(ay,null,_m,Xy,Uy,Yy)):ky.push(Uy),Q1(ay,!0,by),(s0=ay.input.charCodeAt(ay.position))===44?(Wy=!0,s0=ay.input.charCodeAt(++ay.position)):Wy=!1}X0(ay,"unexpected end of the stream within a flow collection")}(j,iy)?yy=!0:(_l&&function(ay,by){var Ey,ky,Oy,Ty,Ly=f3,Ny=!1,Uy=by,Xy=0,Yy=!1,Wy=ay.input.charCodeAt(ay.position);if(Wy===124)ky=!1;else{if(Wy!==62)return;ky=!0}for(ay.kind="scalar",ay.result="";Wy!==0;)if((Wy=ay.input.charCodeAt(++ay.position))===43||Wy===45)f3===Ly?Ly=Wy===43?pM:IR:X0(ay,"repeat of a chomping mode identifier");else{if(!(0<=(Oy=48<=(Ty=Wy)&&Ty<=57?Ty-48:-1)))break;Oy==0?X0(ay,"bad explicit indentation width of a block scalar; it cannot be less than one"):Ny?X0(ay,"repeat of an indentation width identifier"):(Uy=by+Oy-1,Ny=!0)}if(S2(Wy)){for(;S2(Wy=ay.input.charCodeAt(++ay.position)););if(Wy===35)for(;!Ex(Wy=ay.input.charCodeAt(++ay.position))&&Wy!==0;);}for(;Wy!==0;){for(d3(ay),ay.lineIndent=0,Wy=ay.input.charCodeAt(ay.position);(!Ny||ay.lineIndent<Uy)&&Wy===32;)ay.lineIndent++,Wy=ay.input.charCodeAt(++ay.position);if(!Ny&&ay.lineIndent>Uy&&(Uy=ay.lineIndent),Ex(Wy))Xy++;else{if(ay.lineIndent<Uy){Ly===pM?ay.result+=q1.repeat(`
`,Xy):Ly===f3&&Ny&&(ay.result+=`
`);break}for(ky?S2(Wy)?(Yy=!0,ay.result+=q1.repeat(`
`,Xy+1)):Yy?(Yy=!1,ay.result+=q1.repeat(`
`,Xy+1)):Xy===0?Ny&&(ay.result+=" "):ay.result+=q1.repeat(`
`,Xy):ay.result+=Ny?q1.repeat(`
`,Xy+1):q1.repeat(`
`,Xy),Ny=!0,Xy=0,Ey=ay.position;!Ex(Wy)&&Wy!==0;)Wy=ay.input.charCodeAt(++ay.position);Vw(ay,Ey,ay.position,!1)}}return 1}(j,iy)||function(ay,by){var Ey,ky,Oy=ay.input.charCodeAt(ay.position);if(Oy===39){for(ay.kind="scalar",ay.result="",ay.position++,Ey=ky=ay.position;(Oy=ay.input.charCodeAt(ay.position))!==0;)if(Oy===39){if(Vw(ay,Ey,ay.position,!0),(Oy=ay.input.charCodeAt(++ay.position))!==39)return 1;Ey=ky=ay.position,ay.position++}else Ex(Oy)?(Vw(ay,Ey,ky,!0),y3(ay,Q1(ay,!1,by)),Ey=ky=ay.position):ay.position===ay.lineStart&&EA(ay)?X0(ay,"unexpected end of the document within a single quoted scalar"):(ay.position++,ky=ay.position);X0(ay,"unexpected end of the stream within a single quoted scalar")}}(j,iy)||NR(j,iy)?yy=!0:function(ay){var by,Ey,ky=ay.input.charCodeAt(ay.position);if(ky===42){for(ky=ay.input.charCodeAt(++ay.position),by=ay.position;ky!==0&&!z_(ky)&&!_E(ky);)ky=ay.input.charCodeAt(++ay.position);return ay.position===by&&X0(ay,"name of an alias node must contain at least one character"),Ey=ay.input.slice(by,ay.position),ay.anchorMap.hasOwnProperty(Ey)||X0(ay,'unidentified alias "'+Ey+'"'),ay.result=ay.anchorMap[Ey],Q1(ay,!0,-1),1}}(j)?(yy=!0,j.tag===null&&j.anchor===null||X0(j,"alias node should not have any properties")):function(ay,by,Ey){var ky,Oy,Ty,Ly,Ny,Uy,Xy,Yy=ay.kind,Wy=ay.result,_g=ay.input.charCodeAt(ay.position);if(!z_(_g)&&!_E(_g)&&_g!==35&&_g!==38&&_g!==42&&_g!==33&&_g!==124&&_g!==62&&_g!==39&&_g!==34&&_g!==37&&_g!==64&&_g!==96&&(_g!==63&&_g!==45||!(z_(ky=ay.input.charCodeAt(ay.position+1))||Ey&&_E(ky)))){for(ay.kind="scalar",ay.result="",Oy=Ty=ay.position,Ly=!1;_g!==0;){if(_g===58){if(z_(ky=ay.input.charCodeAt(ay.position+1))||Ey&&_E(ky))break}else if(_g===35){if(z_(ay.input.charCodeAt(ay.position-1)))break}else{if(ay.position===ay.lineStart&&EA(ay)||Ey&&_E(_g))break;if(Ex(_g)){if(Ny=ay.line,Uy=ay.lineStart,Xy=ay.lineIndent,Q1(ay,!1,-1),ay.lineIndent>=by){Ly=!0,_g=ay.input.charCodeAt(ay.position);continue}ay.position=Ty,ay.line=Ny,ay.lineStart=Uy,ay.lineIndent=Xy;break}}Ly&&(Vw(ay,Oy,Ty,!1),y3(ay,ay.line-Ny),Oy=Ty=ay.position,Ly=!1),S2(_g)||(Ty=ay.position+1),_g=ay.input.charCodeAt(++ay.position)}if(Vw(ay,Oy,Ty,!1),ay.result)return 1;ay.kind=Yy,ay.result=Wy}}(j,iy,bA===_r)&&(yy=!0,j.tag===null&&(j.tag="?")),j.anchor!==null&&(j.anchorMap[j.anchor]=j.result)):uy===0&&(yy=_c&&xM(j,ly))),j.tag!==null&&j.tag!=="!")if(j.tag==="?"){for(_p=0,_f=j.implicitTypes.length;_p<_f;_p+=1)if((ey=j.implicitTypes[_p]).resolve(j.result)){j.result=ey.construct(j.result),j.tag=ey.tag,j.anchor!==null&&(j.anchorMap[j.anchor]=j.result);break}}else A2.call(j.typeMap,j.tag)?(ey=j.typeMap[j.tag],j.result!==null&&ey.kind!==j.kind&&X0(j,"unacceptable node kind for !<"+j.tag+'> tag; it should be "'+ey.kind+'", not "'+j.kind+'"'),ey.resolve(j.result)?(j.result=ey.construct(j.result),j.anchor!==null&&(j.anchorMap[j.anchor]=j.result)):X0(j,"cannot resolve a node with !<"+j.tag+"> explicit tag")):X0(j,"unknown tag !<"+j.tag+">");return j.listener!==null&&j.listener("close",j),j.tag!==null||j.anchor!==null||yy}function wM(j,$){$=$||{},(j=String(j)).length!==0&&(j.charCodeAt(j.length-1)!==10&&j.charCodeAt(j.length-1)!==13&&(j+=`
`),j.charCodeAt(0)===65279&&(j=j.slice(1)));var _r=new PR(j,$);for(_r.input+="\0";_r.input.charCodeAt(_r.position)===32;)_r.lineIndent+=1,_r.position+=1;for(;_r.position<_r.length-1;)(function(_i){var _s,ga,_l,_c,_p=_i.position,_f=!1;for(_i.version=null,_i.checkLineBreaks=_i.legacy,_i.tagMap={},_i.anchorMap={};(_c=_i.input.charCodeAt(_i.position))!==0&&(Q1(_i,!0,-1),_c=_i.input.charCodeAt(_i.position),!(0<_i.lineIndent||_c!==37));){for(_f=!0,_c=_i.input.charCodeAt(++_i.position),_s=_i.position;_c!==0&&!z_(_c);)_c=_i.input.charCodeAt(++_i.position);for(_l=[],(ga=_i.input.slice(_s,_i.position)).length<1&&X0(_i,"directive name must not be less than one character in length");_c!==0;){for(;S2(_c);)_c=_i.input.charCodeAt(++_i.position);if(_c===35){for(;(_c=_i.input.charCodeAt(++_i.position))!==0&&!Ex(_c););break}if(Ex(_c))break;for(_s=_i.position;_c!==0&&!z_(_c);)_c=_i.input.charCodeAt(++_i.position);_l.push(_i.input.slice(_s,_i.position))}_c!==0&&d3(_i),A2.call(_M,ga)?_M[ga](_i,ga,_l):wA(_i,'unknown document directive "'+ga+'"')}Q1(_i,!0,-1),_i.lineIndent===0&&_i.input.charCodeAt(_i.position)===45&&_i.input.charCodeAt(_i.position+1)===45&&_i.input.charCodeAt(_i.position+2)===45?(_i.position+=3,Q1(_i,!0,-1)):_f&&X0(_i,"directives end mark is expected"),wE(_i,_i.lineIndent-1,xA,!1,!0),Q1(_i,!0,-1),_i.checkLineBreaks&&RR.test(_i.input.slice(_p,_i.position))&&wA(_i,"non-ASCII line breaks are interpreted as content"),_i.documents.push(_i.result),_i.position===_i.lineStart&&EA(_i)?_i.input.charCodeAt(_i.position)===46&&(_i.position+=3,Q1(_i,!0,-1)):_i.position<_i.length-1&&X0(_i,"end of the stream or a document separator is expected")})(_r);return _r.documents}function EM(j,$,_r){for(var _i=wM(j,_r),_s=0,ga=_i.length;_s<ga;_s+=1)$(_i[_s])}function kM(j,$){var _r=wM(j,$);if(_r.length!==0){if(_r.length===1)return _r[0];throw new V_("expected a single document in the stream, but found more")}}var kA={loadAll:EM,load:kM,safeLoadAll:function(j,$,_r){EM(j,$,q1.extend({schema:mE},_r))},safeLoad:function(j,$){return kM(j,q1.extend({schema:mE},$))}},TM=Object.prototype.toString,AM=Object.prototype.hasOwnProperty,jR=9,C2=10,DR=13,g3=32,zR=33,v3=34,FR=35,BR=37,UR=38,m3=39,GR=42,VR=44,HR=45,qR=58,$R=62,WR=63,YR=64,KR=91,XR=93,ZR=96,JR=123,QR=124,tL=125,_3={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},eL=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function rL(j){this.schema=j.schema||_A,this.indent=Math.max(1,j.indent||2),this.skipInvalid=j.skipInvalid||!1,this.flowLevel=q1.isNothing(j.flowLevel)?-1:j.flowLevel,this.styleMap=function($,_r){var _i,_s,ga,_l,_c,_p,_f;if(_r===null)return{};for(_i={},ga=0,_l=(_s=Object.keys(_r)).length;ga<_l;ga+=1)_c=_s[ga],_p=String(_r[_c]),_c.slice(0,2)==="!!"&&(_c="tag:yaml.org,2002:"+_c.slice(2)),(_f=$.compiledTypeMap[_c])&&AM.call(_f.styleAliases,_p)&&(_p=_f.styleAliases[_p]),_i[_c]=_p;return _i}(this.schema,j.styles||null),this.sortKeys=j.sortKeys||!1,this.lineWidth=j.lineWidth||80,this.noRefs=j.noRefs||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function SM(j,$){for(var _r,_i=q1.repeat(" ",$),_s=0,ga=-1,_l="",_c=j.length;_s<_c;)_s=(ga=j.indexOf(`
`,_s))===-1?(_r=j.slice(_s),_c):(_r=j.slice(_s,ga+1),ga+1),_r.length&&_r!==`
`&&(_l+=_i),_l+=_r;return _l}function b3(j,$){return`
`+q1.repeat(" ",j.indent*$)}function TA(j){this.source=j,this.result="",this.checkpoint=0}function nL(j,$,_r,_i){var _s,ga,_l,_c,_p,_f,ey,iy,ly,uy,cy,yy,ay,by,Ey,ky,Oy,Ty,Ly,Ny,Uy;if($.length!==0)if(eL.indexOf($)===-1){for(_s=!0,ga=$.length?$.charCodeAt(0):0,_l=g3===ga||g3===$.charCodeAt($.length-1),HR!==ga&&WR!==ga&&YR!==ga&&ZR!==ga||(_s=!1),_p=_c=_l||-1<j.flowLevel&&j.flowLevel<=_r?(_l&&(_s=!1),!1):!_i,_f=!0,ey=new TA($),iy=!1,uy=ly=0,cy=j.indent*_r,(yy=j.lineWidth)===-1&&(yy=9007199254740991),cy<40?yy-=cy:yy=40,by=0;by<$.length;by++){if(ay=$.charCodeAt(by),_s){if(jR!==(Uy=ay)&&C2!==Uy&&DR!==Uy&&VR!==Uy&&KR!==Uy&&XR!==Uy&&JR!==Uy&&tL!==Uy&&FR!==Uy&&UR!==Uy&&GR!==Uy&&zR!==Uy&&QR!==Uy&&$R!==Uy&&m3!==Uy&&v3!==Uy&&BR!==Uy&&qR!==Uy&&!_3[Uy]&&!MM(Uy))continue;_s=!1}_f&&ay===m3&&(_f=!1),Ey=_3[ay],ky=MM(ay),(Ey||ky)&&(ay!==C2&&ay!==v3&&ay!==m3?_p=_c=!1:ay===C2&&(_f=!(iy=!0),0<by&&$.charCodeAt(by-1)===g3&&(_c=_p=!1),_c&&(Oy=by-ly,ly=by,uy<Oy&&(uy=Oy))),ay!==v3&&(_f=!1),ey.takeUpTo(by),ey.escapeChar())}if(_s&&function(Xy,Yy){for(var Wy=0,_g=Xy.implicitTypes.length;Wy<_g;Wy+=1)if(Xy.implicitTypes[Wy].resolve(Yy))return 1}(j,$)&&(_s=!1),Ty="",(_c||_p)&&(Ly=0,$.charCodeAt($.length-1)===C2&&(Ly+=1,$.charCodeAt($.length-2)===C2&&(Ly+=1)),Ly===0?Ty="-":Ly===2&&(Ty="+")),(_p&&uy<yy||j.tag!==null)&&(_c=!1),iy||(_p=!1),_s)j.dump=$;else if(_f)j.dump="'"+$+"'";else if(_c)Ny=function(Xy,Yy){var Wy,_g="",y0=0,_m=Xy.length,s0=/\n+$/.exec(Xy);for(s0&&(_m=s0.index+1);y0<_m;)Wy=Xy.indexOf(`
`,y0),y0=_m<Wy||Wy===-1?(_g&&(_g+=`

`),_g+=CM(Xy.slice(y0,_m),Yy),_m):(_g&&(_g+=`

`),_g+=CM(Xy.slice(y0,Wy),Yy),Wy+1);return s0&&s0[0]!==`
`&&(_g+=s0[0]),_g}($,yy),j.dump=">"+Ty+`
`+SM(Ny,cy);else if(_p)Ty||($=$.replace(/\n$/,"")),j.dump="|"+Ty+`
`+SM($,cy);else{if(!ey)throw new Error("Failed to dump scalar value");ey.finish(),j.dump='"'+ey.result+'"'}}else j.dump="'"+$+"'";else j.dump="''"}function CM(j,$){if(j==="")return j;for(var _r,_i,_s=/[^\s] [^\s]/g,ga="",_l=0,_c=0,_p=_s.exec(j);_p;)$<(_r=_p.index)-_c&&(_i=_l!==_c?_l:_r,ga&&(ga+=`
`),ga+=j.slice(_c,_i),_c=_i+1),_l=_r+1,_p=_s.exec(j);return ga&&(ga+=`
`),_c!==_l&&j.length-_c>$?ga+=j.slice(_c,_l)+`
`+j.slice(_l+1):ga+=j.slice(_c),ga}function MM(j){return!(32<=j&&j<=126||j===133||160<=j&&j<=55295||57344<=j&&j<=65533||65536<=j&&j<=1114111)}function IM(j,$,_r){for(var _i,_s,ga,_l=_r?j.explicitTypes:j.implicitTypes,_c=0,_p=_l.length;_c<_p;_c+=1)if(((_s=_l[_c]).instanceOf||_s.predicate)&&(!_s.instanceOf||typeof $=="object"&&$ instanceof _s.instanceOf)&&(!_s.predicate||_s.predicate($))){if(j.tag=_r?_s.tag:"?",_s.represent){if(ga=j.styleMap[_s.tag]||_s.defaultStyle,TM.call(_s.represent)==="[object Function]")_i=_s.represent($,ga);else{if(!AM.call(_s.represent,ga))throw new V_("!<"+_s.tag+'> tag resolver accepts not "'+ga+'" style');_i=_s.represent[ga]($,ga)}j.dump=_i}return 1}}function M2(j,$,_r,_i,_s,ga){j.tag=null,j.dump=_r,IM(j,_r,!1)||IM(j,_r,!0);var _l=TM.call(j.dump);_i=_i&&(j.flowLevel<0||j.flowLevel>$);var _c,_p,_f=_l==="[object Object]"||_l==="[object Array]";if(_f&&(_p=(_c=j.duplicates.indexOf(_r))!==-1),(j.tag!==null&&j.tag!=="?"||_p||j.indent!==2&&0<$)&&(_s=!1),_p&&j.usedDuplicates[_c])j.dump="*ref_"+_c;else{if(_f&&_p&&!j.usedDuplicates[_c]&&(j.usedDuplicates[_c]=!0),_l==="[object Object]")_i&&Object.keys(j.dump).length!==0?(function(ey,iy,ly,uy){var cy,yy,ay,by,Ey,ky,Oy="",Ty=ey.tag,Ly=Object.keys(ly);if(ey.sortKeys===!0)Ly.sort();else if(typeof ey.sortKeys=="function")Ly.sort(ey.sortKeys);else if(ey.sortKeys)throw new V_("sortKeys must be a boolean or a function");for(cy=0,yy=Ly.length;cy<yy;cy+=1)ky="",uy&&cy===0||(ky+=b3(ey,iy)),by=ly[ay=Ly[cy]],M2(ey,iy+1,ay,!0,!0,!0)&&((Ey=ey.tag!==null&&ey.tag!=="?"||ey.dump&&1024<ey.dump.length)&&(ey.dump&&C2===ey.dump.charCodeAt(0)?ky+="?":ky+="? "),ky+=ey.dump,Ey&&(ky+=b3(ey,iy)),M2(ey,iy+1,by,!0,Ey)&&(ey.dump&&C2===ey.dump.charCodeAt(0)?ky+=":":ky+=": ",Oy+=ky+=ey.dump));ey.tag=Ty,ey.dump=Oy||"{}"}(j,$,j.dump,_s),_p&&(j.dump="&ref_"+_c+j.dump)):(function(ey,iy,ly){for(var uy,cy,yy,ay="",by=ey.tag,Ey=Object.keys(ly),ky=0,Oy=Ey.length;ky<Oy;ky+=1)yy="",ky!==0&&(yy+=", "),cy=ly[uy=Ey[ky]],M2(ey,iy,uy,!1,!1)&&(1024<ey.dump.length&&(yy+="? "),yy+=ey.dump+": ",M2(ey,iy,cy,!1,!1)&&(ay+=yy+=ey.dump));ey.tag=by,ey.dump="{"+ay+"}"}(j,$,j.dump),_p&&(j.dump="&ref_"+_c+" "+j.dump));else if(_l==="[object Array]")_i&&j.dump.length!==0?(function(ey,iy,ly,uy){for(var cy="",yy=ey.tag,ay=0,by=ly.length;ay<by;ay+=1)M2(ey,iy+1,ly[ay],!0,!0)&&(uy&&ay===0||(cy+=b3(ey,iy)),cy+="- "+ey.dump);ey.tag=yy,ey.dump=cy||"[]"}(j,$,j.dump,_s),_p&&(j.dump="&ref_"+_c+j.dump)):(function(ey,iy,ly){for(var uy="",cy=ey.tag,yy=0,ay=ly.length;yy<ay;yy+=1)M2(ey,iy,ly[yy],!1,!1)&&(yy!==0&&(uy+=", "),uy+=ey.dump);ey.tag=cy,ey.dump="["+uy+"]"}(j,$,j.dump),_p&&(j.dump="&ref_"+_c+" "+j.dump));else{if(_l!=="[object String]"){if(j.skipInvalid)return;throw new V_("unacceptable kind of an object to dump "+_l)}j.tag!=="?"&&nL(j,j.dump,$,ga)}j.tag!==null&&j.tag!=="?"&&(j.dump="!<"+j.tag+"> "+j.dump)}return 1}function iL(j,$){var _r,_i,_s=[],ga=[];for(function _l(_c,_p,_f){var ey,iy,ly;if(_c!==null&&typeof _c=="object")if((iy=_p.indexOf(_c))!==-1)_f.indexOf(iy)===-1&&_f.push(iy);else if(_p.push(_c),Array.isArray(_c))for(iy=0,ly=_c.length;iy<ly;iy+=1)_l(_c[iy],_p,_f);else for(ey=Object.keys(_c),iy=0,ly=ey.length;iy<ly;iy+=1)_l(_c[ey[iy]],_p,_f)}(j,_s,ga),_r=0,_i=ga.length;_r<_i;_r+=1)$.duplicates.push(_s[ga[_r]]);$.usedDuplicates=new Array(_i)}function OM(j,$){var _r=new rL($=$||{});return _r.noRefs||iL(j,_r),M2(_r,0,j,!0,!0)?_r.dump+`
`:""}TA.prototype.takeUpTo=function(j){var $;if(j<this.checkpoint)throw($=new Error("position should be > checkpoint")).position=j,$.checkpoint=this.checkpoint,$;return this.result+=this.source.slice(this.checkpoint,j),this.checkpoint=j,this},TA.prototype.escapeChar=function(){var j=this.source.charCodeAt(this.checkpoint),$=_3[j]||function(_r){var _i,_s,ga=_r.toString(16).toUpperCase();if(_r<=255)_i="x",_s=2;else if(_r<=65535)_i="u",_s=4;else{if(!(_r<=4294967295))throw new V_("code point within a string may not be greater than 0xFFFFFFFF");_i="U",_s=8}return"\\"+_i+q1.repeat("0",_s-ga.length)+ga}(j);return this.result+=$,this.checkpoint+=1,this},TA.prototype.finish=function(){this.source.length>this.checkpoint&&this.takeUpTo(this.source.length)};var RM={dump:OM,safeDump:function(j,$){return OM(j,q1.extend({schema:mE},$))}};function AA(j){return function(){throw new Error("Function "+j+" is deprecated and cannot be used.")}}var LM={Type:o_,Schema:T2,FAILSAFE_SCHEMA:c3,JSON_SCHEMA:aM,CORE_SCHEMA:lM,DEFAULT_SAFE_SCHEMA:mE,DEFAULT_FULL_SCHEMA:_A,load:kA.load,loadAll:kA.loadAll,safeLoad:kA.safeLoad,safeLoadAll:kA.safeLoadAll,dump:RM.dump,safeDump:RM.safeDump,YAMLException:V_,MINIMAL_SCHEMA:c3,SAFE_SCHEMA:mE,DEFAULT_SCHEMA:_A,scan:AA("scan"),parse:AA("parse"),compose:AA("compose"),addConstructor:AA("addConstructor")},oL=function(){function j($,_r){var _i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;F0(this,j),this.url=$,!_r||jT(_r)&&!jT(this.url)?this.path=QE(this.url):this.path=_r,this.path_for_parent=_r||this.path,this.parent=_i,this.container=null,this.parent&&(this.parent.container?this.container=this.parent.container:this.parent.isContainer()&&(this.container=this.parent))}return H0(j,[{key:"load",value:function(){return $=this.url,new Promise(function(_r,_i){typeof $=="string"?q0.io($).then(function(_s){try{var ga=function(_l){var _c;try{_c=LM.safeLoad(_l,{json:!0})}catch(_p){throw _p}return _c}(_s);_r(ga)}catch(_l){_i(_l)}},_i):($=Object.assign({},$),_r($))});var $}},{key:"resourceFor",value:function($){return{url:this.urlFor($),path:this.pathFor($),type:this.typeFor($)}}},{key:"urlFor",value:function($){return x3($)?$:jT($)&&this.container?this.parent.urlFor(this.path_for_parent+$):function(_r,_i){if(!_r||!jT(_r))return _r;var _s,ga=_r[0]!=="/";return _i?(_s=document.createElement("a")).href=_i:_s=window.location,_r=ga?QE(_s.href)+_r:(_s.origin||_s.protocol+"//"+_s.host)+_r}($,this.path)}},{key:"pathFor",value:QE},{key:"typeFor",value:function($){var _r=($=$.split("/").pop()).lastIndexOf(".");if(-1<_r)return $.substring(_r+1)}},{key:"isContainer",value:function(){return!1}}]),j}();function x3(j){return!(!j||j.slice(0,7)!=="global.")}function sL(j){return j!=null}function kx(j){return"("+j+")"}function SA(j){return j[0]==="$"?"context['"+j.substring(1)+"']":"context.feature.properties['"+j+"']"}function PM(j,$){return kx((typeof(_r=$)=="string"?'"'+_r+'"':_r)+" === "+SA(j));var _r}function NM(j,$){return kx(j.filter(sL).map(function(_r){return kx(_r.join(" && "))}).join(" "+$+" "))}function w3(j,$,_r){return $&&0<$.length?NM($.map(function(_i){return CA(_i,_r)}),"||"):"true"}function CA(j,$){var _r=[];if(typeof j=="function")return[kx(j.toString()+"(context)")];if(Array.isArray(j))return[w3(0,j,$)];if(j==null)return["true"];for(var _i,_s,ga,_l,_c,_p,_f,ey,iy=Object.keys(j),ly=0;ly<iy.length;ly++){var uy=iy[ly],cy=j[uy],yy=x1(cy);if(yy==="string"||yy==="number")_r.push(PM(uy,cy));else if(yy==="boolean")_r.push((ey=cy,kx(SA(uy)+(ey?" != ":" == ")+"null")));else if(uy==="not")_r.push("!"+kx(CA(cy,$).join(" && ")));else if(uy==="any")_r.push(w3(0,cy,$));else if(uy==="all")_r.push(function(ay,by){return ay&&0<ay.length?NM(ay.map(function(Ey){return CA(Ey,by)}),"&&"):"true"}(cy,$));else if(uy==="none")_r.push("!"+kx(w3(0,cy,$)));else if(Array.isArray(cy))_r.push(function(ay,by){return kx(by.map(function(Ey){return PM(ay,Ey)}).join(" || "))}(uy,cy));else if(yy==="object"&&cy!=null)(cy.max||cy.min)&&_r.push((_i=uy,_s=cy,_f=_p=_c=_l=void 0,_p=[],_f=(ga=$)&&typeof ga.rangeTransform=="function"&&ga.rangeTransform,_s.max&&(_l=_f?_f(_s.max):_s.max,_p.push(SA(_i)+" < "+_l)),_s.min&&(_c=_f?_c=_f(_s.min):_s.min,_p.push(SA(_i)+" >= "+_c)),kx(_p.join(" && "))));else{if(cy!=null)throw new Error("Unknown Query syntax: "+cy);_r.push(" true ")}}return iy.length===0?["true"]:_r}function jM(j,$){return j==null?function(){return!0}:new Function("context","return "+kx(CA(j,$).join(" && "))+";")}var aL=["filter","draw","visible","enabled","data"],F_={},lL=["any","all","not","none"],E3=function(){function j($){var _r,_i=$.layer,_s=$.name,ga=$.parent,_l=$.draw,_c=$.visible,_p=$.enabled,_f=$.filter,ey=$.styles;if(F0(this,j),this.id=j.id++,this.config_data=_i.data,this.parent=ga,this.name=_s,this.full_name=this.parent?this.parent.full_name+":"+this.name:this.name,this.draw=_l,this.filter=_f,this.styles=ey,this.is_built=!1,_p=_p===void 0?_c:_p,this.parent&&this.parent.visible===!1?this.enabled=!1:this.enabled=_p!==!1,this.draw)for(var iy in this.draw)this.draw[iy]=this.draw[iy]==null?{}:this.draw[iy],x1(this.draw[iy])!=="object"?(_r="Draw group '".concat(iy,"' for layer ").concat(this.full_name," is invalid, must be an object, "),o0("warn",_r+="but was set to `".concat(iy,": ").concat(this.draw[iy],"` instead")),delete this.draw[iy]):this.draw[iy].layer_name=this.full_name}return H0(j,[{key:"build",value:function(){o0("trace","Building layer '".concat(this.full_name,"'")),this.buildFilter(),this.buildDraw(),this.is_built=!0}},{key:"buildDraw",value:function(){this.draw=q0.stringsToFunctions(this.draw,Gy.wrapFunction),this.calculatedDraw=function($){var _r=[];{var _i;$.parent&&(_i=$.parent.calculatedDraw||[],_r.push.apply(_r,u1(_i)))}return _r.push($.draw),_r}(this)}},{key:"buildFilter",value:function(){this.filter_original=this.filter,this.filter=q0.stringsToFunctions(this.filter,Gy.wrapFunction);var $=x1(this.filter);if(this.filter==null||$==="object"||$==="function")try{this.buildZooms(),this.buildPropMatches(),this.filter!=null&&(typeof this.filter=="function"||0<Object.keys(this.filter).length)?this.filter=jM(this.filter,zM):this.filter=null}catch(_s){var _r="Filter for layer ".concat(this.full_name," is invalid, `filter: ").concat(JSON.stringify(this.filter),"` ");o0("warn",_r+="failed with error '".concat(_s.message,"', stack trace: ").concat(_s.stack))}else{var _i="Filter for layer ".concat(this.full_name," is invalid, filter value must be an object or function, ");o0("warn",_i+="but was set to `filter: ".concat(this.filter,"` instead"))}}},{key:"buildZooms",value:function(){var $=this.filter&&this.filter.$zoom,_r=x1($);if($!=null&&_r!=="function"){if(this.zooms={},_r==="number")this.zooms[$]=!0;else if(Array.isArray($))for(var _i=0;_i<$.length;_i++)this.zooms[$[_i]]=!0;else if(_r==="object"&&($.min!=null||$.max!=null))for(var _s=$.min||0,ga=$.max||25,_l=_s;_l<ga;_l++)this.zooms[_l]=!0;delete this.filter.$zoom}}},{key:"buildPropMatches",value:function(){var $=this;this.filter&&!Array.isArray(this.filter)&&typeof this.filter!="function"&&Object.keys(this.filter).forEach(function(_r){if(lL.indexOf(_r)===-1){var _i=$.filter[_r],_s=x1(_i),ga=Array.isArray(_i);if(!ga&&_s!=="string"&&_s!=="number")return;_r[0]==="$"?($.context_prop_matches=$.context_prop_matches||[],$.context_prop_matches.push([_r.substring(1),ga?_i:[_i]])):($.feature_prop_matches=$.feature_prop_matches||[],$.feature_prop_matches.push([_r,ga?_i:[_i]])),delete $.filter[_r]}})}},{key:"doPropMatches",value:function($){if(this.feature_prop_matches)for(var _r=0;_r<this.feature_prop_matches.length;_r++){var _i=this.feature_prop_matches[_r],_s=$.feature.properties[_i[0]];if(_s==null||_i[1].indexOf(_s)===-1)return!1}if(this.context_prop_matches)for(var ga=0;ga<this.context_prop_matches.length;ga++){var _l=this.context_prop_matches[ga],_c=$[_l[0]];if(_c==null||_l[1].indexOf(_c)===-1)return!1}return!0}},{key:"doesMatch",value:function($){if(!this.enabled||(this.is_built||this.build(),this.zooms!=null&&!this.zooms[$.zoom])||!this.doPropMatches($))return!1;var _r;if(this.filter instanceof Function)try{_r=this.filter($)}catch(_s){var _i="Filter for this ".concat(this.full_name,": `filter: ").concat(this.filter_original,"` ");o0("error",_i+="failed with error '".concat(_s.message,"', stack trace: ").concat(_s.stack),$.feature)}else _r=this.filter==null;return!!_r&&(this.children_to_parse&&(function(_s,ga,_l){for(var _c in ga){var _p,_f=ga[_c];x1(_f)!=="object"||Array.isArray(_f)?(_p="Layer value must be an object: cannot create layer '".concat(_c,": ").concat(JSON.stringify(_f),"'"),_p+=", under parent layer '".concat(_s.full_name,"'."),_l[_s.name]&&(_p+=" The parent name '".concat(_s.name,"' is also the name of a style, did you mean to create a 'draw' group"),_s.parent&&(_p+=" under '".concat(_s.parent.name,"'")),_p+=" instead?"),o0("warn",_p)):BM(_c,_f,_s,_l)}}(this,this.children_to_parse,this.styles),delete this.children_to_parse),!0)}}]),j}();E3.id=0;var DM,uL=function(){Z1($,E3);var j=J1($);function $(_r){var _i;return F0(this,$),(_i=j.call(this,_r)).is_leaf=!0,_i}return $}(),cL=function(){Z1($,E3);var j=J1($);function $(_r){var _i;return F0(this,$),(_i=j.call(this,_r)).is_tree=!0,_i.layers=_r.layers||[],_i}return H0($,[{key:"addLayer",value:function(_r){this.layers.push(_r)}},{key:"buildDrawGroups",value:function(_r){var _i=[],_s=[];if(function cy(yy,ay,by,Ey){var ky=!1;if(ay.length!==0){for(var Oy=0;Oy<ay.length;Oy++){var Ty=ay[Oy];Ty.is_leaf?Ty.doesMatch(yy)&&(ky=!0,by.push(Ty),Ey.push(Ty.id)):Ty.is_tree&&Ty.doesMatch(yy)&&(ky=!0,cy(yy,Ty.layers,by,Ey)||(by.push(Ty),Ey.push(Ty.id)))}return ky}}(_r,[this],_i,_s),0<_i.length){var ga=function(cy){if(1<cy.length){for(var yy=cy[0],ay=1;ay<cy.length;ay++)yy+="/"+cy[ay];return yy}return cy[0]}(_s);if(F_[ga]===void 0){for(var _l=_i.map(function(cy){return cy&&cy.visible!==!1&&cy.calculatedDraw}),_c={},_p=0;_p<_l.length;_p++){var _f=_l[_p];if(_f)for(var ey=0;ey<_f.length;ey++){var iy=_f[ey];for(var ly in iy)_c[ly]=!0}}for(var uy in _c)F_[ga]=F_[ga]||{},F_[ga][uy]=function(cy,yy){for(var ay,by=0,Ey=0;Ey<cy.length;Ey++)cy[Ey].length>by&&(by=cy[Ey].length);if(by===0)return null;for(var ky={visible:!0},Oy=0;Oy<by;Oy++)(function(Ty){ay=[],cy.forEach(function(Ly){Ly[Ty]&&Ly[Ty][yy]&&ay.indexOf(Ly[Ty][yy])===-1&&ay.push(Ly[Ty][yy])}),ay.length!==0&&(ay.sort(function(Ly,Ny){return(Ly&&Ly.layer_name)>(Ny&&Ny.layer_name)?1:-1}),zx.apply(void 0,[ky].concat(u1(ay))),delete ky.layer_name)})(Oy);return ky.visible===!1?null:ky}(_l,uy),F_[ga][uy]?(F_[ga][uy].key=ga+"/"+uy,F_[ga][uy].layers=_i.map(function(cy){return cy&&cy.full_name}),F_[ga][uy].group=uy):delete F_[ga][uy];F_[ga]&&Object.keys(F_[ga]).length===0&&(F_[ga]=null)}return F_[ga]}}}]),$}(),zM={rangeTransform:function(j){return typeof j=="string"&&j.trim().slice(-3)==="px2"?"".concat(parseFloat(j)," * context.meters_per_pixel_sq"):j}};function FM(j){return-1<aL.indexOf(j)}function BM(j,$,_r,_i){var _s,ga={name:j,layer:$=$??{},parent:_r,styles:_i},_l=C0(function(ly){var uy={},cy={};for(var yy in ly)FM(yy)?uy[yy]=ly[yy]:cy[yy]=ly[yy];return[uy,cy]}($),2),_c=_l[0],_p=_l[1],_f=(_s=_p,Object.keys(_s).length===0),ey=_f&&_r!=null?uL:cL,iy=new ey(Object.assign(ga,_c));return iy.enabled&&(_r&&_r.addLayer(iy),iy.children_to_parse=_f?null:_p),iy}var UM=/^global\.(.+)$/,$w=DM={loadScene:function(j,$){var _r=this,_i=1<arguments.length&&$!==void 0?$:{},_s=_i.path,ga=_i.type,_l=[];return this.loadSceneRecursive({url:j,path:_s,type:ga},null,_l).then(function(_c){return _r.finalize(_c)}).then(function(_c){var _p=_c.config,_f=_c.bundle;return _p?(0<_l.length&&_l.forEach(function(ey){var iy="Failed to import scene: ".concat(ey.url);o0("error",iy,ey),_r.trigger("error",{type:"scene_import",message:iy,error:ey,url:ey.url})}),{config:_p,bundle:_f}):Promise.reject(_l[0])})},loadSceneRecursive:function(j,$,_r){var _i=this,_s=j.url,ga=j.path,_l=(j.type,2<arguments.length&&_r!==void 0?_r:[]);if(!_s)return Promise.resolve({});var _c=new oL(_s,ga,$);return _c.load().then(function(_p){if(_p.import==null)return _i.normalize(_p,_c),{config:_p,bundle:_c};Array.isArray(_p.import)||(_p.import=[_p.import]);var _f=[];return _p.import.forEach(function(ey){x1(ey)==="object"&&(ey=uS(new Blob([JSON.stringify(ey)]))),_f.push(_c.resourceFor(ey))}),delete _p.import,Promise.all(_f.map(function(ey){return _i.loadSceneRecursive(ey,_c,_l)})).then(function(ey){ey.forEach(function(ly){return _i.normalize(ly.config,ly.bundle)});var iy=ey.map(function(ly){return ly.config});return _p=zx.apply(void 0,u1(iy).concat([_p])),_i.normalize(_p,_c),{config:_p,bundle:_c}})}).catch(function(_p){return _p.url=_s,_l.push(_p),{}})},normalize:function(j,$){return this.normalizeDataSources(j,$),this.normalizeFonts(j,$),this.normalizeTextures(j,$),this.hoistTextures(j,$),{config:j,bundle:$}},normalizeDataSources:function(j,$){for(var _r in j.sources=j.sources||{},j.sources)this.normalizeDataSource(j.sources[_r],$);return j},normalizeDataSource:function(j,$){if(j.url&&(j.url=$.urlFor(j.url)),j.scripts)for(var _r in Array.isArray(j.scripts)&&(j.scripts=j.scripts.reduce(function(_i,_s){return _i[_s]=_s,_i},{})),j.scripts)j.scripts[_r]=$.urlFor(j.scripts[_r]);return j},normalizeFonts:function(j,$){for(var _r in j.fonts=j.fonts||{},j.fonts){var _i;Array.isArray(j.fonts[_r])?j.fonts[_r].forEach(function(_s){_s.url=_s.url&&$.urlFor(_s.url)}):(_i=j.fonts[_r]).url=_i.url&&$.urlFor(_i.url)}return j},normalizeTextures:function(j,$){if(j.textures=j.textures||{},j.textures)for(var _r in j.textures){var _i=j.textures[_r];_i.url&&(_i.url=$.urlFor(_i.url))}},hoistTextures:function(j,$){var _r=this;if(j.styles)for(var _i in j.styles)(function(iy){var ly=j.styles[iy],uy=ly.texture;typeof uy!="string"||j.textures[uy]||(ly.texture=_r.hoistTexture(uy,j,$)),ly.material&&["emission","ambient","diffuse","specular","normal"].forEach(function(cy){var yy=ly.material[cy]!=null&&ly.material[cy].texture;typeof yy!="string"||j.textures[yy]||(ly.material[cy].texture=_r.hoistTexture(yy,j,$))})})(_i);if(this.hoistStyleShaderUniformTextures(j,$,{include_globals:!1}),j.layers)for(var _s=[j.layers];0<_s.length;){var ga=_s.pop();if(x1(ga)==="object"&&!Array.isArray(ga))for(var _l in ga)if(_l==="draw"){var _c,_p,_f=ga[_l];for(var ey in _f)_f[ey].texture&&(typeof(_c=_f[ey].texture)!="string"||j.textures[_c]||(_f[ey].texture=this.hoistTexture(_c,j,$))),_f[ey].outline&&_f[ey].outline.texture&&(typeof(_p=_f[ey].outline.texture)!="string"||j.textures[_p]||(_f[ey].outline.texture=this.hoistTexture(_p,j,$)))}else{if(FM(_l))continue;_s.push(ga[_l])}}},hoistStyleShaderUniformTextures:function(j,$,_r){var _i=this,_s=_r.include_globals;if(j.styles)for(var ga in j.styles){var _l=j.styles[ga];_l.shaders&&_l.shaders.uniforms&&P_.parseUniforms(_l.shaders.uniforms).forEach(function(_c){var _p=_c.type,_f=_c.value,ey=_c.key,iy=_c.uniforms;_p!=="sampler2D"||typeof _f!="string"||j.textures[_f]||!_s&&x3(_f)||(iy[ey]=_i.hoistTexture(_f,j,$))})}},hoistTexture:function(j,$,_r){var _i=x3(j),_s=_i?j:_r.urlFor(j),ga=_i?"texture-".concat(_s):_s;return $.textures[ga]={url:_s},ga},applyGlobalProperties:function(j){if(!j.global||Object.keys(j.global).length===0)return j;var $=function _r(_i){var _s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:".",ga=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,_l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};ga=ga?ga+_s:"";for(var _c in _i){var _p=ga+_c,_f=_i[_c];x1(_l[_p]=_f)!=="object"||Array.isArray(_f)||_r(_f,_s,_p,_l)}return _l}(j.global);return function _r(_i){if(typeof _i=="string"){var _s=function _c(_p,_f,ey){var iy=2<arguments.length&&ey!==void 0?ey:[];if(-1<iy.indexOf(_p))o0({level:"warn",once:!0},"Global properties: cyclical reference detected",iy);else{iy.push(_p);var ly=UM.exec(_p);if(ly){var uy=ly[1];if(uy){var cy=_f[uy];if(cy!==void 0)return typeof cy=="string"&&UM.exec(cy)?_c(cy,_f,iy):cy;o0({level:"warn",once:!0},"Global property not found: "+_p)}else o0({level:"warn",once:!0},"Invalid global property reference: "+_p)}}}(_i,$);_s!==void 0&&(_i=_s)}else if(Array.isArray(_i))for(var ga=0;ga<_i.length;ga++)_i[ga]=_r(_i[ga]);else if(x1(_i)==="object")for(var _l in _i)_i[_l]=_r(_i[_l]);return _i}(j)},finalize:function(j){var $=j.config,_r=j.bundle;return $?($.global=$.global||{},$.scene=$.scene||{},$.cameras=$.cameras||{},$.lights=$.lights||{},$.styles=$.styles||{},$.layers=$.layers||{},$.camera&&($.cameras.default=$.camera),Object.keys($.cameras).length===0&&($.cameras.default={}),Object.keys($.lights).length!==0&&!Object.keys($.lights).every(function(_i){return $.lights[_i].visible===!1})||($.lights.default_light={type:"directional"}),{config:$,bundle:_r}):{}}};UT(DM);var hL=function(){function j(){F0(this,j),this.coords={},this.max_proxy_descendant_depth=6,this.max_proxy_ancestor_depth=10}return H0(j,[{key:"sourceTiles",value:function($,_r){return this.coords[$.key]&&this.coords[$.key].sources&&this.coords[$.key].sources[_r.name]}},{key:"addTile",value:function($){var _r=$.coords.key,_i=this.coords[_r];(_i=_i||(this.coords[_r]={descendants:0})).sources||(_i.sources={}),_i.sources[$.source.name]||(_i.sources[$.source.name]={});for(var _s=(_i.sources[$.source.name][$.style_zoom]=$).coords.z-1;0<=_s;_s--){var ga=z1.coordinateAtZoom($.coords,_s);this.coords[ga.key]||(this.coords[ga.key]={descendants:0}),this.coords[ga.key].descendants++}}},{key:"removeTile",value:function($){var _r=this.sourceTiles($.coords,$.source),_i=$.coords.key;_r&&(delete _r[$.style_zoom],Object.keys(_r).length===0&&(delete this.coords[_i].sources[$.source.name],Object.keys(this.coords[_i].sources).length===0&&(delete this.coords[_i].sources,this.coords[_i].descendants===0&&delete this.coords[_i])));for(var _s=$.coords.z-1;0<=_s;_s--){var ga=z1.coordinateAtZoom($.coords,_s);this.coords[ga.key]&&0<this.coords[ga.key].descendants&&(this.coords[ga.key].descendants--,this.coords[ga.key].descendants!==0||this.coords[ga.key].sources||delete this.coords[ga.key])}}},{key:"getAncestor",value:function($,_r){var _i=$.coords,_s=$.style_zoom,ga=$.source,_l=1<arguments.length&&_r!==void 0?_r:1;if(!(_l>this.max_proxy_ancestor_depth)){if(_s>ga.max_coord_zoom){var _c=this.sourceTiles(_i,ga);if(_c){for(var _p=_s-1;_p>=ga.max_coord_zoom;_p--)if(_c[_p]&&_c[_p].loaded)return _c[_p]}_s=ga.max_coord_zoom}_s--;var _f=z1.coordinateAtZoom(_i,_i.z-1),ey=this.sourceTiles(_f,ga);return ey&&ey[_s]&&ey[_s].loaded?ey[_s]:0<_f.z?this.getAncestor({coords:_f,style_zoom:_s,source:ga},_l+1):void 0}}},{key:"getDescendants",value:function($,_r){var _i=$.coords,_s=$.style_zoom,ga=$.source,_l=1<arguments.length&&_r!==void 0?_r:1,_c=[];if(_s>=ga.max_coord_zoom){var _p=this.sourceTiles(_i,ga);if(_p){for(var _f=Math.max(Zy.default_view_max_zoom,_s+this.max_proxy_descendant_depth),ey=_s+1;ey<=_f;ey++)if(_p[ey]&&_p[ey].loaded)return _c.push(_p[ey]),_c}return _c}if(this.coords[_i.key]&&0<this.coords[_i.key].descendants){_s++;for(var iy=z1.childrenForCoordinate(_i),ly=0;ly<iy.length;ly++){var uy=iy[ly],cy=this.sourceTiles(uy,ga);cy&&cy[_s]&&cy[_s].loaded?_c.push(cy[_s]):_l<=this.max_proxy_descendant_depth&&uy.z<=ga.max_coord_zoom&&_c.push.apply(_c,u1(this.getDescendants({coords:uy,source:ga,style_zoom:_s},_l+1)))}}return _c}}]),j}(),pL=function(){function j($,_r,_i,_s){F0(this,j),Object.assign(this,$),this.placed=null,this._tile=_s;var ga=Zy.unitsPerMeter(_s.coords.z)*Math.pow(2,_i-_s.style_zoom);this.layout=Object.assign({},$.layout),this.layout.repeat_scale=.75,this.layout.repeat_distance=this.layout.repeat_distance||0,this.layout.repeat_distance/=ga,this.position=Zy.tileSpaceToMeters(this.position,_s.coords.z,_s.min),this._worldToScreen=_r,this._screenSpaceBoundingBox=void 0,this._boundingCircles=void 0}return H0(j,[{key:"getTile",value:function(){return this._tile}},{key:"isFlat",value:function(){return this.is_flat}},{key:"getScreenSpaceBoundingBox",value:function(){var $,_r,_i,_s,ga,_l,_c;return this._screenSpaceBoundingBox||(($=this._worldToScreen(this.position,!0))[0]+=this.offset[0],$[1]+=this.offset[1],_r=this.size[0]/2+this.layout.buffer[0],_i=this.size[1]/2+this.layout.buffer[1],_s=$[0]-_r,ga=$[0]+_r,_l=$[1]-_i,_c=$[1]+_i,this._screenSpaceBoundingBox={left:_s,bottom:_c,right:ga,top:_l}),this._screenSpaceBoundingBox}},{key:"getBoundingCircles",value:function(){return this._boundingCircles||(this._boundingCircles=this.type==="point"?this._convertSidesToScreenSpaceCircles():this._convertCirclesToScreenSpace()),this._boundingCircles}},{key:"_convertSidesToScreenSpaceCircles",value:function(){var $=this._tile.coords.z,_r=this._tile.min,_i=Zy.tileSpaceToMeters([this.sides[0],this.sides[1]],$,_r),_s=Zy.tileSpaceToMeters([this.sides[2],this.sides[3]],$,_r),ga=C0(this._worldToScreen(_i,!0),2),_l=ga[0],_c=ga[1],_p=C0(this._worldToScreen(_s,!0),2);return hA(_l,_c,_p[0],_p[1],this.size[1]/2+this.layout.buffer[1])}},{key:"_convertCirclesToScreenSpace",value:function(){for(var $=[],_r=this.circles,_i=this._tile.coords.z,_s=this._tile.min,ga=0;ga<_r.length-2;ga+=3){var _l=Zy.tileSpaceToMeters([_r[ga],-_r[ga+1]],_i,_s),_c=_r[ga+2]/Zy.unitsPerMeter(_i),_p=[_l[0]+_c,_l[1]],_f=this._worldToScreen(_l,!0),ey=this._worldToScreen(_p,!0),iy=L1.getLineLength(_f[0],_f[1],ey[0],ey[1]);$.push(_f[0],_f[1],iy)}return $}}]),j}(),fL={mainThreadLabelCollisionPass:function(j,$,_r,_i,_s,ga){GM=k3,k3={};var _l={},_c={},_p=[],_f=_r.worldToScreen.bind(_r),ey=new dL(ga);for(var iy in j.forEach(function(ay){for(var by in ay.meshes)ay.meshes[by].forEach(function(Ey){if(Ey.labels){for(var ky in ey.trackMesh(Ey),Ey.labels["non-collision"]){var Oy=HM(Ey.labels["non-collision"][ky],Ey,_f,$,ay);Oy.label.text_data&&ey.insertLabel(Oy,ay)}for(var Ty in Ey.labels.collision){var Ly;_l[Ty]||(Ly=HM(Ey.labels.collision[Ty],Ey,_f,$,ay),_l[Ty]=Ly.label,_c[Ty]=Ly)}}})}),_c){var ly=_c[iy];ly.linked&&(ly.linked=_c[ly.linked]),_p.push(ly)}var uy=_r.getViewport(),cy=uy.width,yy=uy.height;return L_.startTile("main",{apply_repeat_groups:!0,return_hidden:!0,grid_index:new n4(cy,yy,30)}),L_.addStyle("main","main"),L_.collide(_p,"main","main").then(function(ay){return ay.forEach(function(by){var Ey,ky,Oy,Ty,Ly,Ny,Uy=by.mesh,Xy=by.label.getTile();Uy.valid&&(!(Ey=0)!==by.show||_i&&by.label.breach&&!GM[by.label.id]||(Ey=1),Ey&&(k3[by.label.id]=!0),by.label.text_data&&ey.insertLabel(by,Xy),ky=Uy.vertex_layout.offset.a_shape,Oy=Uy.vertex_layout.stride,Ly=(Ty=Uy.vertex_layout.attribs.find(function(Yy){return Yy.name==="a_shape"})).byte_size/Ty.size,ky+=3*Ly,Ny=!0,by.ranges.forEach(function(Yy){if(Ny){for(var Wy=0;Wy<Yy[1];Wy++){if(Uy.vertex_data[Yy[0]+Wy*Oy+ky]===Ey)return void(Ny=!1);Uy.vertex_data[Yy[0]+Wy*Oy+ky]=Ey}ey.trackMesh(Uy)}}))}),ey.createTextures(_s).then(function(){return ey.updateMeshes()})}).then(function(ay){ay.forEach(function(by){return by.valid&&by.upload()}),j.forEach(function(by){by.labeled=!0}),_p=[],_c={},_l={}})}},k3={},GM={},VM=new Uint8Array(new Uint32Array([305419896]).buffer)[0]===120;function HM(j,$,_r,_i,_s){var ga=j.container,_l=ga.label,_c=ga.linked,_p=j.ranges;return{label:new pL(_l,_r,_i,_s),linked:_c,ranges:_p,mesh:$}}var dL=function(){function j($){F0(this,j),this.textureManager=Dx($),this.tiles={},this.meshes=[],this.containers=[]}return H0(j,[{key:"insertLabel",value:function($,_r){var _i=$.label.text_data,_s=_i.text_settings_key,ga=_i.text,_l=_i.text_info;this.containers.push($);var _c=this._ensureTextSection(_r,_s);_c[ga]?$.label.text_data.text_info=_c[ga]:_c[ga]=_l}},{key:"trackMesh",value:function($){this.meshes.indexOf($)===-1&&this.meshes.push($)}},{key:"updateMeshes",value:function(){var $=this;return this.containers.forEach(function(_r){var _i,_s,ga,_l,_c,_p,_f,ey,iy,ly;_r.label.text_data&&(_i=_r.label.getTile(),(_s=_r.mesh).valid?(ga=_r.label.type,_l=_r.label.text_data.text_info,$.tiles[_i.id]&&$.tiles[_i.id].textures&&(_c=$.tiles[_i.id].textures[0],_s.uniforms.u_texture=_c,_s.textures.indexOf(_c)===-1&&_s.textures.push(_c),ga==="point"||ga==="straight"?(_p=ga==="point"?_l.align[_r.label.align].texcoords:_l.texcoords[ga].texcoord,$.setTexCoords(_s,_r,_p)):ga==="curved"&&(_f=_l.segments.length,ey=_l.texcoords_stroke,iy=_l.texcoords.curved,$.setTexCoords(_s,_r,function(uy){return uy<_f?ey[uy]:iy[uy-_f].texcoord})))):$.tiles[_i.id]&&$.tiles[_i.id].textures&&(ly=$.tiles[_i.id].textures[0],$.textureManager.release(ly)))}),this.meshes}},{key:"setTexCoords",value:function($,_r,_i){var _s,ga,_l,_c,_p,_f,ey=_i instanceof Function;ey||(ga=(_s=C0(_i,4))[0],_l=_s[1],_c=_s[2],_p=_s[3],_f=[[ga,_l],[_c,_l],[_c,_p],[ga,_p]]);var iy=$.vertex_layout.stride,ly=new DataView($.vertex_data.buffer),uy=$.vertex_layout.offset.a_texcoord;_r.ranges.forEach(function(cy,yy){var ay,by,Ey,ky,Oy,Ty=C0(cy,3),Ly=Ty[0],Ny=Ty[1],Uy=Ty[2];ey&&(by=(ay=C0(_i(yy),4))[0],Ey=ay[1],ky=ay[2],Oy=ay[3],_f=[[by,Ey],[ky,Ey],[ky,Oy],[by,Oy]]);for(var Xy=Uy?Ny/2:0;Xy<Ny;Xy++){var Yy=_f[Xy%4],Wy=Ly+Xy*iy;ly.setUint16(Wy+uy,65535*Yy[0],VM),ly.setUint16(Wy+uy+2,65535*Yy[1],VM)}})}},{key:"createTextures",value:function($){var _r=this;return Promise.all(Object.values(this.tiles).map(function(_i){var _s=_i.id,ga=_i.key,_l=_i.texts;return _r._createTexturesForTile($,_l,"labels-".concat(ga,"-").concat(_s),_s,_r.textureManager).then(function(_c){_c.length&&(_c.forEach(function(_p){_r.textureManager.retain(_p),1<_r.textureManager.getRetainCount(_p)&&_r.textureManager.release(_p)}),_r.tiles[_s].textures=_c)})}))}},{key:"_createTexturesForTile",value:function($,_r,_i,_s,ga){var _l=new D_,_c=_l.setTextureTextPositions(_r);return _l.rasterize(_r,_c,_s,_i,$,ga)}},{key:"_ensureTile",value:function($){var _r=$.id,_i=$.key;return this.tiles[_r]||(this.tiles[_r]={id:_r,key:_i,texts:{}}),this.tiles[_r]}},{key:"_ensureTextSection",value:function($,_r){var _i=this._ensureTile($).texts;return _i[_r]||(_i[_r]={}),_i[_r]}}]),j}(),yL=function(){function j($){var _r=this,_i=$.scene,_s=$.view;F0(this,j),this._scene=_i,this._view=_s,this._visible_tiles={},this._pyramid=new hL,this._visible_coords={},this._building_tiles=null,this._renderable_tiles=[],this._active_styles=[],this._tile_visibility_counters={},this._update_labels_on_queue_check=!1,this._all_visible_tiles_are_cached=!1,this._debouncedUpdateLabels=NT(this._updateLabels.bind(this),100,200),this._main_thread_target=["TileManager",this._scene.id].join("_"),S0.addTarget(this._main_thread_target,this),this._keepCoordinate=this._keepCoordinate.bind(this),this._removeTilesFilter=this._removeTilesFilter.bind(this),this._removeCachedTilesFilter=this._removeCachedTilesFilter.bind(this),this._is_labeled=!1,this._tile_cache=new H.util.Cache(function(){var ga=.1;return navigator&&navigator.deviceMemory?ga=5*navigator.deviceMemory/100:window&&window.screen&&(ga=window.screen.width/512*window.screen.height/512*.03*3,ga=Math.min(ga,1)),1024*ga*1024*1024}(),function(ga,_l,_c){_r._visible_tiles[ga]&&_r._visible_tiles[ga]===_l||_l.destroy()})}return H0(j,[{key:"destroy",value:function(){this._tile_cache.removeAll(),this.forEachVisibleTile(function($){return $.destroy()}),this._visible_tiles={},this._pyramid=null,this._visible_coords={},this._scene=null,this._view=null}},{key:"keepTile",value:function($){this._visible_tiles[$.key]=$,this._pyramid.addTile($)}},{key:"hasTile",value:function($){return this._visible_tiles[$]!==void 0}},{key:"_forgetTile",value:function($){var _r,_i;this.hasTile($)&&(_r=this._visible_tiles[$],this._pyramid.removeTile(_r),delete this._visible_tiles[$],_r.loaded?this._tile_cache.add(_r.key,_r,function(_s){var ga=0;for(var _l in _s.meshes)for(var _c=_s.meshes[_l],_p=0;_p<_c.length;_p++){var _f=_c[_p];ga+=_f.buffer_size;for(var ey=0;ey<_f.textures.length;ey++)ga+=_s.textureManager.getByteLength(_f.textures[ey])}return ga}(_r)):(_i=this._tile_cache.get(_r.key))?this._tile_cache.drop(_i.key):_r.destroy(),this._tileBuildStop(_r))}},{key:"removeTile",value:function($){this._forgetTile($),this._scene.requestRedraw()}},{key:"forEachVisibleTile",value:function($){for(var _r in this._visible_tiles)$(this._visible_tiles[_r])}},{key:"removeTiles",value:function($){for(var _r in this._visible_tiles)$(this._visible_tiles[_r])&&this.removeTile(_r)}},{key:"removeCachedTiles",value:function($){var _r=this;this._tile_cache.forEach(function(_i,_s){$(_s)&&_r._tile_cache.drop(_i)})}},{key:"updateTilesForView",value:function($){var _r=0<arguments.length&&$!==void 0&&$;this._visible_coords={};for(var _i=this._view.findVisibleTileCoordinates(),_s=0;_s<_i.length;_s++){var ga=_i[_s];this._visible_coords[ga.key]=ga}this.updateTileStates(_r)}},{key:"updateTileStates",value:function($){var _r=0<arguments.length&&$!==void 0&&$;for(var _i in this._all_visible_tiles_are_cached=!0,this._visible_coords)this._keepCoordinate(_i,_r);this._all_visible_tiles_are_cached&&(this._is_labeled=!1,this._debouncedUpdateLabels()),this._tile_cache.removeAll(this._removeCachedTilesFilter),this._updateProxyTiles(),this.removeTiles(this._removeTilesFilter),this._updateRenderableTiles(),this._updateActiveStyles()}},{key:"_removeTilesFilter",value:function($){if($.style_zoom===this._view.lookAtManipulator.getLookAtData().tile_level){if(this._visible_coords[$.coords.key])return!1;for(var _r in this._visible_coords)if(z1.isDescendant($.coords,this._visible_coords[_r]))return!1}return!$.isProxy()}},{key:"_updateLabels",value:function(){var $,_r=this;this._building_tiles&&Object.keys(this._building_tiles).length!==0||(D_.pruneTextCache(),$=this._renderable_tiles.sort(gL),fL.mainThreadLabelCollisionPass($,function(_i,_s){var ga=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2,_l=Math.pow(10,ga);return Math.round(Math.floor(_i*_s)/_s*_l)/_l}(this._view.lookAtManipulator.getLookAtData().zoom,2),this._view.lookAtManipulator,this.isLoadingVisibleTiles(),this._scene.gl,this._scene.id).then(function(){_r._is_labeled=!H1.hasPendingTasks(),_r._scene.immediateRedraw(),_r._update_labels_on_queue_check=!1}))}},{key:"_updateProxyTiles",value:function(){var $,_r=this,_i=this._view.lookAtManipulator.getZoomDirection();_i!==0&&($=!1,this.forEachVisibleTile(function(_s){var ga;if(_s.setProxyFor(null),_i===1)_s.built||(ga=_r._pyramid.getAncestor(_s))&&(ga.setProxyFor(_s),$=!0);else if(_i===-1&&!_s.built)for(var _l=_r._pyramid.getDescendants(_s),_c=0;_c<_l.length;_c++)_l[_c].setProxyFor(_s),$=!0}),$||this._view.lookAtManipulator.resetZoomDirection())}},{key:"getRenderableTiles",value:function(){return this._renderable_tiles}},{key:"_updateRenderableTiles",value:function(){for(var $ in this._renderable_tiles=[],this._visible_tiles){var _r=this._visible_tiles[$],_i=this._tile_cache.get($);_r.loaded?(this._renderable_tiles.push(_r),_i&&_i!==_r&&this._tile_cache.drop($)):_i&&(_i.generation===this._scene.generation?this._renderable_tiles.push(_i):this._tile_cache.drop($))}return this._renderable_tiles}},{key:"getWorkerForTile",value:function($,_r){var _i=_r.has_volatile_data?this._scene.getWorkers(fC)[0]:_r.tiled?this._scene.getWorkers(US)[Math.abs($.x+$.y+$.z)%this._scene.num_workers]:this._scene.getWorkers(US)[_r.id%this._scene.num_workers];return _i}},{key:"getActiveStyles",value:function(){return this._active_styles}},{key:"_updateActiveStyles",value:function(){for(var $=this._renderable_tiles,_r={},_i=0;_i<$.length;_i++){var _s=$[_i];Object.keys(_s.meshes).forEach(function(ga){return _r[ga]=!0})}return this._active_styles=Object.keys(_r),this._active_styles}},{key:"isLoadingVisibleTiles",value:function(){var $=!1;for(var _r in this._visible_tiles)if(!this._visible_tiles[_r].built){$=!0;break}return $}},{key:"updateTilesVisibilityCounters",value:function(){var $=this;Object.keys(this._visible_coords).forEach(function(_s){_s in $._tile_visibility_counters||($._tile_visibility_counters[_s]=0)});var _r=Object.keys(this._tile_visibility_counters),_i=[];_r.forEach(function(_s){_s in $._visible_coords?($._tile_visibility_counters[_s]++,30<=$._tile_visibility_counters[_s]&&_i.push($._visible_coords[_s])):($._tile_visibility_counters[_s]--,$._tile_visibility_counters[_s]<=0&&delete $._tile_visibility_counters[_s])}),_i.length&&this.loadCoordinates(_i)}},{key:"loadCoordinates",value:function($){var _r=this;$.sort(function(_i,_s){var ga=_r._view.lookAtManipulator.getLookAtData().position,_l=Zy.metersPerTile(_i.z)/2,_c=Zy.metersForTile(_i);_c.x+=_l,_c.y-=_l;var _p=Zy.metersForTile(_s);_p.x+=_l,_p.y-=_l;var _f=Math.abs(ga[0]-_c.x)+Math.abs(ga[1]-_c.y),ey=Math.abs(ga[0]-_p.x)+Math.abs(ga[1]-_p.y);return(_i.center_dist=_f)<(_s.center_dist=ey)?-1:ey===_f?0:1}),$.forEach(function(_i){return _r.loadCoordinate(_i)})}},{key:"_keepCoordinate",value:function($,_r){var _i=1<arguments.length&&_r!==void 0&&_r,_s=this._visible_coords[$];if(_s.z===this._view.center_tile.z)for(var ga in this._scene.sources){var _l,_c,_p,_f=this._scene.sources[ga];_f.builds_geometry_tiles&&_f.includesTile(_s,this._view.lookAtManipulator.getLookAtData().tile_level)&&(_l=z1.normalizedKey(_s,_f,this._view.lookAtManipulator.getLookAtData().tile_level))&&!this.hasTile(_l)&&((_c=_i&&this._tile_cache.get(_l))||(this._all_visible_tiles_are_cached=!1),_p=_c||new z1({source:_f,coords:_s,worker:this.getWorkerForTile(_s,_f),style_zoom:q0.zoomToTileLevel(_s.z),view:this._view,sceneId:this._scene.id}),_f.config.type==="ObjectSource"&&(_p.syncedAt=_f.getSyncedAt()),this.keepTile(_p))}}},{key:"loadCoordinate",value:function($){if($.z===this._view.center_tile.z)for(var _r in this._scene.sources){var _i,_s=this._scene.sources[_r];_s.builds_geometry_tiles&&_s.includesTile($,this._view.lookAtManipulator.getLookAtData().tile_level)&&(_i=z1.normalizedKey($,_s,this._view.lookAtManipulator.getLookAtData().tile_level),this.hasTile(_i)&&this.buildTile(this._visible_tiles[_i]))}}},{key:"buildTile",value:function($,_r){this._building_tiles&&this._building_tiles[$.key]||$.built&&$.generation===this._scene.generation||(this._tileBuildStart($.key),$.build(this._scene.generation,_r))}},{key:"buildTileStylesCompleted",value:function($){var _r=$.tile,_i=$.progress;if(this._visible_tiles[_r.key]==null)z1.abortBuild(_r,this._scene.id);else if(_r.generation!==this._scene.generation)z1.abortBuild(_r,this._scene.id);else{if(_r.id<this._visible_tiles[_r.key].id)return void z1.abortBuild(_r,this._scene.id);_r=this._visible_tiles[_r.key].merge(_r),_i.done&&(_r.built=!0),_r.buildMeshes(this._scene.styles,_i),this.updateTileStates(),this._scene.requestRedraw()}_i.done&&this._tileBuildStop(_r)}},{key:"buildTileError",value:function($){this._forgetTile($.key),z1.abortBuild($,this._scene.id)}},{key:"_tileBuildStart",value:function($){this._is_labeled=!1,this._building_tiles=this._building_tiles||{},this._building_tiles[$]=!0}},{key:"_tileBuildStop",value:function($){this._building_tiles&&($.source&&$.source.hasLabeledData()&&(this._update_labels_on_queue_check=!0),delete this._building_tiles[$.key],H1.removeForTile($.id),this.checkBuildQueue())}},{key:"isReady",value:function(){return this._is_labeled&&!this.isLoadingVisibleTiles()}},{key:"checkBuildQueue",value:function(){this._building_tiles&&Object.keys(this._building_tiles).length!==0||(this._building_tiles=null,this._update_labels_on_queue_check?this._updateLabels():(this._is_labeled=!H1.hasPendingTasks(),this._scene.immediateRedraw()))}},{key:"_removeCachedTilesFilter",value:function($,_r){var _i=_r.source;return!this._visible_tiles[$]&&(_r.generation!==this._scene.generation||_i.config.type==="ObjectSource"&&_i.getSyncedAt()>_r.syncedAt)}}]),j}();function gL(j,$){var _r=j.coords,_i=$.coords;return _r.z-_i.z||_r.x-_i.x||_r.y-_i.y}function qM(j){F0(this,qM),this.defaults={},this.defaults.culling=!0,this.defaults.culling_face=j.BACK,this.defaults.blending=!1,this.defaults.blending_src=j.ONE_MINUS_SRC_ALPHA,this.defaults.blending_dst=j.ONE_MINUS_SRC_ALPHA,this.defaults.blending_src_alpha=j.ONE,this.defaults.blending_dst_alpha=j.ONE_MINUS_SRC_ALPHA,this.defaults.depth_write=!0,this.defaults.depth_test=!0,j.depthFunc(j.LESS),this.culling=new MA({cull:this.defaults.culling,face:this.defaults.culling_face},function($){$.cull?(j.enable(j.CULL_FACE),j.cullFace($.face)):j.disable(j.CULL_FACE)}),this.blending=new MA({blend:this.defaults.blending,src:this.defaults.blending_src,dst:this.defaults.blending_dst,src_alpha:this.defaults.blending_src_alpha,dst_alpha:this.defaults.blending_dst_alpha},function($){$.blend?(j.enable(j.BLEND),$.src_alpha&&$.dst_alpha?j.blendFuncSeparate($.src,$.dst,$.src_alpha,$.dst_alpha):j.blendFunc($.src,$.dst)):j.disable(j.BLEND)}),this.depth_write=new MA({depth_write:this.defaults.depth_write},function($){j.depthMask($.depth_write)}),this.depth_test=new MA({depth_test:this.defaults.depth_test},function($){$.depth_test?j.enable(j.DEPTH_TEST):j.disable(j.DEPTH_TEST)})}var MA=function(){function j($,_r){F0(this,j),_r($),this.value=$,this.setup=_r}return H0(j,[{key:"get",value:function(){return this.value}},{key:"set",value:function($){JSON.stringify(this.value)!==JSON.stringify($)&&(this.setup($),this.value=$)}}]),j}(),vL=function(){function j(){F0(this,j),this.canvas=null,this.gl=null,this.screenshot_canvas=null,this.screenshot_context=null,this.queue_screenshot=null,this.video_capture=null}return H0(j,[{key:"setCanvas",value:function($,_r){this.canvas=$,this.gl=_r}},{key:"screenshot",value:function($){var _r=this,_i=(0<arguments.length&&$!==void 0?$:{}).background;return this.queue_screenshot!=null||(this.queue_screenshot={background:_i},this.queue_screenshot.promise=new Promise(function(_s,ga){_r.queue_screenshot.resolve=_s,_r.queue_screenshot.reject=ga})),this.queue_screenshot.promise}},{key:"completeScreenshot",value:function(){if(this.queue_screenshot!=null){var $=this.canvas.width,_r=this.canvas.height,_i=new Uint8Array($*_r*4);this.gl.readPixels(0,0,$,_r,this.gl.RGBA,this.gl.UNSIGNED_BYTE,_i);for(var _s=(_s=this.queue_screenshot.background)&&_s!=="transparent"?Gy.parseColor(_s).slice(0,3).map(function(ky){return 255*ky}):null,ga=new Uint8ClampedArray($*_r*4),_l=0;_l<_r;_l++)for(var _c=0;_c<$;_c++){var _p=4*((_r-_l-1)*$+_c),_f=4*(_l*$+_c),ey=_i[3+_p];ga[0+_f]=255*_i[0+_p]/ey,ga[1+_f]=255*_i[1+_p]/ey,ga[2+_f]=255*_i[2+_p]/ey,ga[3+_f]=ey,_s&&(ey/=255,ga[0+_f]=ga[0+_f]*ey+_s[0]*(1-ey),ga[1+_f]=ga[1+_f]*ey+_s[1]*(1-ey),ga[2+_f]=ga[2+_f]*ey+_s[2]*(1-ey),ga[3+_f]=255)}this.screenshot_canvas=this.screenshot_canvas||document.createElement("canvas");var iy=this.screenshot_canvas;iy.width=$,iy.height=_r,this.screenshot_context=this.screenshot_context||iy.getContext("2d");var ly=this.screenshot_context,uy=new ImageData(ga,$,_r);ly.putImageData(uy,0,0);for(var cy=iy.toDataURL("image/png"),yy=atob(cy.slice(22)),ay=new Uint8Array(yy.length),by=0;by<yy.length;++by)ay[by]=yy.charCodeAt(by);var Ey=new Blob([ay],{type:"image/png"});this.queue_screenshot.resolve({url:cy,blob:Ey,type:"png"}),this.queue_screenshot=null}}},{key:"startVideoCapture",value:function(){var $=this;if(typeof window.MediaRecorder!="function"||!this.canvas||typeof this.canvas.captureStream!="function")return o0("warn","Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser"),!1;if(this.video_capture)return o0("warn","Video capture already in progress, call Scene.stopVideoCapture() first"),!1;try{var _r=this.video_capture={};_r.chunks=[],_r.stream=this.canvas.captureStream(),_r.options={mimeType:"video/webm"},_r.media_recorder=new MediaRecorder(_r.stream,_r.options),_r.media_recorder.ondataavailable=function(_i){var _s,ga;0<_i.data.size&&_r.chunks.push(_i.data),_r.resolve&&(ga=uS(_s=new Blob(_r.chunks,{type:_r.options.mimeType})),_r.stream&&(_r.stream.getTracks()||[]).forEach(function(_l){_l.stop(),_r.stream.removeTrack(_l)}),_r.stream=null,_r.media_recorder=null,$.video_capture=null,_r.resolve({url:ga,blob:_s,type:"webm"}))},_r.media_recorder.start()}catch(_i){return this.video_capture=null,o0("error","Scene video capture failed",_i),!1}return!0}},{key:"stopVideoCapture",value:function(){var $=this;return this.video_capture?(this.video_capture.promise=new Promise(function(_r,_i){$.video_capture.resolve=_r,$.video_capture.reject=_i}),this.video_capture.media_recorder.stop(),this.video_capture.promise):(o0("warn","No scene video capture in progress, call Scene.startVideoCapture() first"),Promise.resolve({}))}}]),j}(),T3=function(){function j(){F0(this,j),this.sources={},this.styles={},this.layers={},this.tiles={},this._isConfigured=!1}return H0(j,[{key:"init",value:function($,_r,_i,_s,ga,_l,_c){return this.setMeshVariantMaxLife(_c),this.scene_id=$,this.textureManager=Dx($),this._worker_id=_r,o0.setLevel(_i),q0.device_pixel_ratio=_s,VS.setElementIndexUint(ga),lx.setPrefix(this._worker_id),this._style_manager=new oM,this._importExternalScripts(_l),cA.id_prefix=_r,this._isConfigured=!1,_r}},{key:"dispose",value:function(){this._last_config_sources=null,this._config_sources=null,this.sources=null,this._style_manager=null,this.styles=null,this.layers=null,this.tiles=null}},{key:"_importExternalScripts",value:function($){var _r;$.length!==0&&(o0("debug","loading custom data source scripts in worker:",$),_r=Object.getOwnPropertyNames(window),importScripts.apply(void 0,u1($)),Object.getOwnPropertyNames(window).forEach(function(_i){_r.indexOf(_i)===-1&&(self[_i]=window[_i])}))}},{key:"updateConfig",value:function($,_r){var _i,_l=$.config,_s=$.generation,ga=$.introspection,_l=JSON.parse(_l);for(var _c in _i=_r,Object.assign(pC,_i),this._generation=_s,this._isConfigured=!1,_l.layers)_l.layers[_c]&&(_l.layers[_c].data=q0.stringsToFunctions(_l.layers[_c].data));this.global=q0.stringsToFunctions(_l.global),this._createDataSources(_l),_l.styles=q0.stringsToFunctions(_l.styles,Gy.wrapFunction),this.styles=this._style_manager.build(_l.styles),self.is_fake_worker=$1.is_main,this._style_manager.initStyles({generation:this._generation,styles:this.styles,sources:this.sources,introspection:ga,id:this.scene_id}),delete self.is_fake_worker,this.layers=function(_p,_f){F_={};var ey={};for(var iy in _p){var ly=_p[iy];ly&&(ey[iy]=BM(iy,ly,null,_f))}return ey}(_l.layers,this._style_manager.styles),this._configuring=this._syncTextures(_l.textures)}},{key:"setMeshVariantMaxLife",value:function($){this.meshVariantMaxLife=$}},{key:"_createDataSources",value:function($){var _r=this;this._last_config_sources=this._config_sources||{},this._config_sources=$.sources;var _i=this.sources,_s=[];for(var ga in $.sources=q0.stringsToFunctions($.sources),this.sources={},self.is_fake_worker=$1.is_main,$.sources)if(JSON.stringify(this._last_config_sources[ga])!==JSON.stringify($.sources[ga])){var _l=void 0;try{_l=g_.create(Object.assign({},$.sources[ga],{name:ga}),this.sources)}catch(_c){o0("error","Error creating source.",_c.message,$.sources[ga]);continue}_l&&(this.sources[ga]=_l,_s.push(ga))}else this.sources[ga]=_i[ga];delete self.is_fake_worker,_s.forEach(function(_c){for(var _p in _r.tiles)_r.tiles[_p].source===_c&&delete _r.tiles[_p]})}},{key:"awaitConfiguration",value:function(){return this._configuring}},{key:"_onConfig",value:function($){var _r=this;if((this._isConfigured=!0)!==$.loaded)$.loading=!0,$.loaded=!1,$.error=null,this._loadTileSourceData($).then(function(){if(_r.getTile($.id)){$.loading=!1,$.loaded=!0;try{z1.buildGeometry($,_r)}catch(_i){$.error=_i.toString(),S0.postMessage("TileManager_".concat(_r.scene_id,".buildTileError"),z1.slice($))}}else o0("trace","stop tile build after data source load because tile was removed. Key: ".concat($.key,", id: ").concat($.id))},function(_i){$.loading=!1,$.loaded=!1,$.error=_i.stack,o0("error","tile load error for tile with key ".concat($.key," and id ").concat($.id,": ").concat($.error)),S0.postMessage("TileManager_".concat(_r.scene_id,".buildTileError"),z1.slice($))});else{o0("trace","used worker cache for tile with key ".concat($.key," and id ").concat($.id));try{z1.buildGeometry($,this)}catch(_i){$.error=_i.toString(),S0.postMessage("TileManager_".concat(this.scene_id,".buildTileError"),z1.slice($))}}}},{key:"buildTile",value:function($){var _r,_i=$.tile,_s=this.getTile(_i.id);_s&&_s.loading||(_i=this.tiles[_i.id]=Object.assign(_s||{},_i),this._isConfigured?this._onConfig(_i):(_r=this).awaitConfiguration().then(function(){return _r._onConfig(_i)}))}},{key:"_loadTileSourceData",value:function($){return this.sources[$.source]?this.sources[$.source].load($):($.source_data={},Promise.resolve($))}},{key:"getTile",value:function($){return this.tiles[$]}},{key:"removeTile",value:function($){var _r=this.tiles[$];_r!=null&&(_r.loading===!0&&(o0("trace","cancel tile load for tile id ".concat($)),_r.loading=!1,z1.cancel(_r)),delete this.tiles[$],o0("trace","remove tile from cache, tile id: ".concat($)))}},{key:"queryFeatures",value:function($){var _r=this,_i=$.filter,_s=$.visible,ga=$.geometry,_l=$.tile_ids,_c=[],_p=_l.map(function(_f){return _r.tiles[_f]}).filter(function(_f){return _f});return _i!=null&&(_i=-1<["{","["].indexOf(_i[0])?JSON.parse(_i):_i,_i=q0.stringsToFunctions(_i,Gy.wrapFunction)),_i=jM(_i,zM),_p.forEach(function(_f){for(var ey in _f.source_data.layers)(function(iy){_f.source_data.layers[iy].features.forEach(function(ly){var uy,cy;_s===!0&&ly.generation!==_r._generation||_s===!1&&ly.generation===_r._generation||((uy=Gy.getFeatureParseContext(ly,_f,_r.global)).source=_f.source,uy.layer=iy,_i(uy)&&(cy={type:ly.type,properties:ly.properties},ga===!0&&(cy.geometry=Zy.copyGeometry(ly.geometry),Zy.tileSpaceToLatlng(cy.geometry,_f.coords.z,_f.min)),_c.push(cy)))})})(ey)}),_c}},{key:"resetFeatureSelection",value:function(){lx.reset()}},{key:"_syncTextures",value:function($){var _r=[];return $&&_r.push.apply(_r,u1(Object.keys($))),o0("trace","sync textures to worker:",_r),0<_r.length?this.textureManager.syncTexturesToWorker(_r):Promise.resolve()}},{key:"profile",value:function($){console.profile("worker ".concat(this._worker_id,": ").concat($))}},{key:"profileEnd",value:function($){console.profileEnd("worker ".concat(this._worker_id,": ").concat($))}},{key:"terminate",value:function(){this.dispose()}}]),j}();($1.is_worker||self.H&&self.H.DEBUG)&&S0.addTarget("self",new T3);var A3=function(){function j($,_r){F0(this,j),_r=_r||{},UT(this),this.id=j.id++,this.textureManager=Dx(this.id),this.initialized=!1,this.initializing=null,this.sources={},this.view=new iR(this,_r),this.tile_manager=new yL({scene:this,view:this.view}),this.num_workers=_r.numWorkers||2,_r.disableVertexArrayObjects===!0&&(sE.disabled=!0),q0.device_pixel_ratio=_r.devicePixelRatio,this.config=null,this.config_source=$,this.config_bundle=null,this.last_valid_config_source=null,this.styles=null,this.style_manager=new oM,this.building=null,this.dirty=!0,_r.preUpdate&&this.subscribe({pre_update:_r.preUpdate}),_r.postUpdate&&this.subscribe({post_update:_r.postUpdate}),this.render_loop=!_r.disableRenderLoop,this.render_loop_active=!1,this.render_loop_stop=!1,this.render_count=0,this.last_render_count=0,this.render_count_changed=!1,this.frame=0,this.last_main_render=-1,this.last_selection_render=-1,this.media_capture=new vL,this.selection=null,this.introspection=_r.introspection===!0,this.viewport=_r.viewport,this.adjustMeshVariantMaxLife(),this.container=_r.container,this.canvas=null,this.contextOptions=_r.webGLContextOptions,this.lights=null,this.background=null,this.createListeners(),this.updating=0,this.generation=j.generation,this.last_complete_generation=j.generation,this.log_level=_r.logLevel||"warn",o0.setLevel(this.log_level),o0.reset()}return H0(j,[{key:"load",value:function($,_r){var _i=this,_s=0<arguments.length&&$!==void 0?$:null,ga=1<arguments.length&&_r!==void 0?_r:{};return this.initializing||(o0.reset(),this.updating++,this.initialized=!1,this.initial_build_time=null,(ga=typeof ga=="string"?{base_path:ga}:ga).blocking=ga.blocking===void 0||ga.blocking,this.render_loop!==!1&&this.setupRenderLoop(),this.createCanvas(),this.textureManager.destroy(this.gl),this.initializing=this.loadScene(_s,ga).then(function(){return _i.createWorkers()}).then(function(){_i.resetFeatureSelection();var _l=x1(_i.config_source)==="object"||_i.hasSubscribersFor("load"),_c=_i.updateConfig({serialize_funcs:_l,normalize:!1,load_event:!0,fade_in:!0});if(ga.blocking===!0)return _c}).then(function(){_i.updating--,_i.initializing=null,_i.initialized=!0,_i.last_valid_config_source=_i.config_source,_i.last_valid_options={base_path:ga.base_path,file_type:ga.file_type},_i.requestRedraw()}).catch(function(_l){var _c,_p;if(_i.initializing=null,_i.updating=0,_p=_l.name==="YAMLException"?(_c="yaml","Error parsing scene YAML"):"Error initializing scene",_i.trigger("error",{type:_c,message:_p,error:_l,url:_i.config_source}),_p="Scene.load() failed to load ".concat(_i.config_source,": ").concat(_l.message),_i.last_valid_config_source)return o0("warn",_p,_l),o0("info","Scene.load() reverting to last valid configuration"),_i.load(_i.last_valid_config_source,_i.last_valid_base_path);throw o0("error",_p,_l),_l})),this.initializing}},{key:"destroy",value:function(){var $;this.initialized=!1,this.render_loop_stop=!0,this.destroyListeners(),this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),this.container=null,this.selection&&this.selection.destroy(),this.gl&&(this.textureManager.destroy(this.gl),this.style_manager.destroy(this.gl),this.styles={},M0.reset(),($=this.gl.getExtension("WEBGL_lose_context"))&&$.loseContext(),this.gl=null),this.sources={},this.tile_manager.destroy(),this.tile_manager=null,this.destroyWorkers(),o0.reset()}},{key:"createCanvas",value:function(){if(!this.canvas){this.container=this.container||document.body,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.container.style.backgroundColor="transparent",this.container.appendChild(this.canvas);try{this.gl=yC.getContext(this.canvas,Object.assign({alpha:!0,premultipliedAlpha:!1,stencil:!0,device_pixel_ratio:q0.device_pixel_ratio},this.contextOptions)),navigator.appVersion.includes("iPhone")&&this.gl.depthRange(.994,1)}catch{throw new Error("Couldn't create WebGL context. Your browser may not support WebGL, or it's turned off? Visit http://webglreport.com/ for more info.")}this.handleViewportUpdate(),sE.init(this.gl),this.render_states=new qM(this.gl),this.media_capture.setCanvas(this.canvas,this.gl)}}},{key:"getWorkerUrl",value:function(){var $,_r;if(o!==void 0&&(_r="("+o+")()",_e&&s!==""&&(_r+=`
//# sourceMappingURL=`+_e.slice(0,_e.lastIndexOf("/")+1)+s),$=uS(new Blob([_r],{type:"application/javascript"}))),!$)throw new Error("Couldn't find internal Tangram source variable (may indicate the library did not build correctly)");return $}},{key:"updateExternalScripts",value:function(){var $=u1(this.external_scripts||[]),_r=[];if(this.config.scene.scripts)for(var _i in this.config.scene.scripts)_r.indexOf(this.config.scene.scripts[_i])===-1&&_r.push(this.config.scene.scripts[_i]);for(var _s in this.config.sources){var ga=this.config.sources[_s];if(ga.scripts)for(var _l in ga.scripts)_r.indexOf(ga.scripts[_l])===-1&&_r.push(ga.scripts[_l])}return this.external_scripts=_r,!(this.external_scripts.length===$.length&&this.external_scripts.every(function(_c,_p){return _c===$[_p]}))}},{key:"createWorkers",value:function(){return this.updateExternalScripts()&&this.destroyWorkers(),this._workers?Promise.resolve():this.makeWorkers(this.getWorkerUrl())}},{key:"makeWorkers",value:function($){var _r=this,_i=!!this.gl.getExtension("OES_element_index_uint"),_s=[];this._workers=[];for(var ga=0;ga<this.num_workers;ga++)(function(){var _c=new Worker($);_r._workers[ga]=_c,S0.addWorker(_c),o0("debug","Scene.makeWorkers: initializing worker ".concat(ga));var _p=ga;_s.push(S0.postMessage(_c,"self.init",_r.id,ga,_r.log_level,q0.device_pixel_ratio,_i,_r.external_scripts,_r.meshVariantMaxLife).then(function(_f){return o0("debug","Scene.makeWorkers: initialized worker ".concat(_f)),_f},function(_f){return o0("error","Scene.makeWorkers: failed to initialize worker ".concat(_p,":"),_f),Promise.reject(_f)}))})();var _l=new T3;return this._workers.push(_l),_s.push(_l.init(this.id,ga,this.log_level,q0.device_pixel_ratio,_i,[],this.meshVariantMaxLife)),this.next_worker=0,Promise.all(_s).then(function(){var _c;o0.setWorkers(_r._workers.slice(0,_r.num_workers)),_c=$,JE===void 0&&typeof(JE=window.URL&&window.URL.revokeObjectURL||window.webkitURL&&window.webkitURL.revokeObjectURL)!="function"&&(JE=null,o0("warn","window.URL.revokeObjectURL (or vendor prefix) not found, unable to create local blob URLs")),JE&&JE(_c)})}},{key:"getWorkers",value:function($){return this._workers.filter(function(_r){switch($){case US:return _r instanceof Worker;case fC:return _r instanceof T3;default:return!0}})}},{key:"destroyWorkers",value:function(){this.selection=null,Array.isArray(this._workers)&&(o0.setWorkers(null),this._workers.forEach(function($){$.terminate()}),this._workers=null)}},{key:"ready",value:function(){return!(!this.view.ready()||Object.keys(this.sources).length===0)}},{key:"handleViewportUpdate",value:function(){var $=this.viewport,_r=$.width,_i=$.height;0<_r&&0<_i&&(this.dirty=!0,this.view.handleViewportUpdate(),this.gl&&yC.resize(this.gl,_r,_i,q0.device_pixel_ratio)),this.adjustMeshVariantMaxLife()&&this.syncMeshVariantMaxLife()}},{key:"adjustMeshVariantMaxLife",value:function(){var $=this.viewport,_r=$.width,_i=$.height,_s=q0.device_pixel_ratio,ga=_r/_s/256*(_i/_s/256),_l=Math.max(Math.ceil(2*ga),8);if(this.meshVariantMaxLife!==_l)return this.meshVariantMaxLife=_l,!0}},{key:"syncMeshVariantMaxLife",value:function(){this._workers&&S0.postMessage(this._workers,"self.setMeshVariantMaxLife",this.meshVariantMaxLife)}},{key:"requestRedraw",value:function(){this.dirty=!0}},{key:"immediateRedraw",value:function(){this.dirty=!0,this.update()}},{key:"renderLoop",value:function(){this.render_loop_active=!0,this.initialized&&this.update(),H1.setState({user_moving_view:this.view.user_input_active}),H1.processAll(),this.render_loop_stop?(this.render_loop_stop=!1,this.render_loop_active=!1):window.requestAnimationFrame(this.renderLoop.bind(this))}},{key:"setupRenderLoop",value:function(){var $=this;this.render_loop_active||setTimeout(function(){$.renderLoop()},0)}},{key:"update",value:function(){var $=this.dirty,_r=!!this.selection&&this.selection.hasPendingRequests(),_i=!($===!1&&_r===!1||this.initialized===!1||0<this.updating||this.ready()===!1);return this.trigger("pre_update",_i),this.view.update(),_i&&(this.dirty=!1,this.render({main:$,selection:_r}),this.updateViewComplete(),this.media_capture.completeScreenshot(),this.trigger("post_update",_i),this.animated!==!0&&!this.view.isAnimating()||(this.dirty=!0),this.frame++,o0("trace","Scene.render()"),!0)}},{key:"render",value:function($){var _r=this,_i=$.main,_s=$.selection,ga=this.gl;if(Object.keys(this.lights).forEach(function(_l){return _r.lights[_l].update()}),_i&&(this.render_count=this.renderPass(),this.last_main_render=this.frame),_s){if(this.view.panning||this.view.user_input_active)return void this.selection.clearPendingRequests();(this.last_selection_render<this.last_main_render||this.selection.has_dirty_buffer)&&(this.selection.bind(),this.renderPass("selection_program",{allow_blend:!1}),ga.bindFramebuffer(ga.FRAMEBUFFER,null),ga.viewport(0,0,this.canvas.width,this.canvas.height),ga.clearColor.apply(ga,u1(this.background.color)),this.last_selection_render=this.frame,this.selection.has_dirty_buffer=!1),this.selection.read(this.tile_manager.getRenderableTiles()),this.selection.has_dirty_buffer&&this.render({main:!1,selection:_s})}return this.render_count_changed=!1,this.render_count!==this.last_render_count&&(this.render_count_changed=!0),this.last_render_count=this.render_count,!0}},{key:"renderPass",value:function($,_r){var _i=this,_s=0<arguments.length&&$!==void 0?$:"program",_l=(1<arguments.length&&_r!==void 0?_r:{}).allow_blend,ga=this.gl,_l=_l==null||_l;this.clearFrame();for(var _c,_p=N1.sortByBlendOrderWithinLayers(this.tile_manager.getActiveStyles().map(function(by){return _i.styles[by]}).filter(function(by){return by})),_f=0,ey=0,iy=0;iy<_p.length;iy++){var ly,uy,cy=_p[iy],yy=ey-(ly=parseInt(cy.name));(cy.clean_depth||yy)&&(this.render_states.depth_write.value.depth_write?ga.clear(ga.DEPTH_BUFFER_BIT):(ga.depthMask(!0),ga.clear(ga.DEPTH_BUFFER_BIT),ga.depthMask(!1)),yy&&(ey=ly)),cy.blend!==_c&&(uy=Object.assign({},N1.render_states[cy.blend],{blend:_l&&cy.blend}),this.setRenderState(uy));var ay=cy.blend==="translucent"&&_s==="program";ay&&(this.gl.colorMask(!1,!1,!1,!1),this.renderStyle(cy.name,_s),this.gl.colorMask(!0,!0,!0,!0),this.gl.depthFunc(this.gl.EQUAL),this.gl.enable(this.gl.STENCIL_TEST),this.gl.clear(this.gl.STENCIL_BUFFER_BIT),this.gl.stencilFunc(this.gl.EQUAL,this.gl.ZERO,255),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.INCR)),_f+=this.renderStyle(cy.name,_s),ay&&(this.gl.disable(this.gl.STENCIL_TEST),this.gl.depthFunc(this.gl.LESS)),_c=cy.blend}return _f}},{key:"renderStyle",value:function($,_r){for(var _i,_s=this,ga=this.styles[$],_l=!0,_c=0,_p=this.tile_manager.getRenderableTiles(),_f=Math.max.apply(Math,u1(_p.map(function(ly){return ly.meshes[$]?Math.max.apply(Math,u1(ly.meshes[$].map(function(uy){return uy.variant.order}))):-1}))),ey=0;ey<_f+1;ey++){var iy=function(ly){for(var uy=0;uy<_p.length;uy++){var cy=_p[uy];if(cy.meshes[$]!=null&&cy.shouldProxyForStyle($))for(var yy=cy.meshes[$].filter(function(ky){return ky.variant.order===ly}),ay=0,by=yy.length;ay<by;ay+=1){var Ey=yy[ay];if(_l===!0&&(_l=!1,!(_i=_s.setupStyle(ga,_r))))return{v:0};_s.view.setupTile(cy,_i),_s.selection.setupDiscards(_i),ga.render(Ey)&&_s.requestRedraw(),_c+=Ey.geometry_count}}}(ey);if(x1(iy)==="object")return iy.v}return _c}},{key:"setupStyle",value:function($,_r){var _i;try{if(!(_i=$.getProgram(_r)))return}catch{return void this.trigger("warning",{type:"styles",message:"Error compiling style ".concat($.name),style:$,shader_errors:$.program&&$.program.shader_errors})}for(var _s in _i.use(),$.setup(),this.view.setupProgram(_i),this.lights)this.lights[_s].setupProgram(_i);return _i}},{key:"clearFrame",value:function(){this.initialized&&(this.render_states.depth_write.set({depth_write:!0}),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT))}},{key:"setRenderState",value:function($){var _r,_i,_s=0<arguments.length&&$!==void 0?$:{},ga=_s.depth_test,_l=_s.depth_write,_c=_s.cull_face,_p=_s.blend;this.initialized&&(_r=this.render_states,ga=ga!==!1&&_r.defaults.depth_test,_l=_l!==!1&&_r.defaults.depth_write,_c=_c!==!1&&_r.defaults.culling,_p=_p??_r.defaults.blending,_i=this.gl,_r.depth_test.set({depth_test:ga}),_r.depth_write.set({depth_write:_l}),_r.culling.set({cull:_c,face:_r.defaults.culling_face}),!_p||_p==="opaque"?_r.blending.set({blend:!1}):_p==="overlay"||_p==="inlay"||_p==="translucent"?_r.blending.set({blend:!0,src:_i.SRC_ALPHA,dst:_i.ONE_MINUS_SRC_ALPHA,src_alpha:_i.ONE,dst_alpha:_i.ONE_MINUS_SRC_ALPHA}):_p==="add"?_r.blending.set({blend:!0,src:_i.ONE,dst:_i.ONE}):_p==="multiply"&&_r.blending.set({blend:!0,src:_i.ZERO,dst:_i.SRC_COLOR}))}},{key:"getFeatureAt",value:function($,_r,_i){var _s,ga=_r.radius,_l=_r.top_most_only;this.initialized?(_s={x:$.x/this.view.size.css.width,y:$.y/this.view.size.css.height},ga=0<ga?{x:ga/this.view.size.css.width,y:ga/this.view.size.css.height}:null,this.selection.getFeatureAt(_s,{radius:ga,top_most_only:_l},_i)):o0("debug","Scene.getFeatureAt() called before scene was initialized")}},{key:"queryFeatures",value:function($){var _r=0<arguments.length&&$!==void 0?$:{},iy=_r.filter,_i=_r.unique,_s=_i===void 0||_i,ga=_r.group_by,_l=ga===void 0?null:ga,_c=_r.visible,_p=_c===void 0?null:_c,_f=_r.geometry,ey=_f!==void 0&&_f,iy=q0.serializeWithFunctions(iy),ly=this.tile_manager.getRenderableTiles().map(function(uy){return uy.id});return S0.postMessage(this._workers,"self.queryFeatures",{filter:iy,visible:_p,geometry:ey,tile_ids:ly}).then(function(uy){var cy=[],yy={},ay={},by=(_s=typeof _s=="string"?[_s]:_s)&&function(ky){return JSON.stringify(Array.isArray(_s)?dC(ky,_s):ky)},Ey=(_l=(typeof _l=="string"||Array.isArray(_l))&&_l)&&function(ky){return Array.isArray(_l)?JSON.stringify(dC(ky,_l)):ky[_l]};return uy.forEach(function(ky){return ky.forEach(function(Oy){if(by){var Ty=by(Oy);if(yy[Ty])return;yy[Ty]=!0}var Ly;Ey?(Ly=Ey(Oy.properties),ay[Ly]=ay[Ly]||[],ay[Ly].push(Oy)):cy.push(Oy)})}),Ey?ay:cy})}},{key:"loadScene",value:function($,_r){var _i=this,_s=0<arguments.length&&$!==void 0?$:null,ga=1<arguments.length&&_r!==void 0?_r:{},_l=ga.base_path,_c=ga.file_type;return this.config_source=_s||this.config_source,typeof this.config_source=="string"?this.base_path=QE(_l||this.config_source):this.base_path=QE(_l),this.config_path=this.base_path,$w.loadScene(this.config_source,{path:this.base_path,type:_c}).then(function(_p){var _f=_p.config,ey=_p.bundle;return _i.config=_f,_i.config_bundle=ey,_i.config})}},{key:"createDataSources",value:function(){var $=this,_r=[],_i=Object.keys(this.sources),_s=0;for(var ga in this.config.sources){var _l=this.config.sources[ga],_c=this.sources[ga];try{var _p=Object.assign({},_l,{name:ga,id:_s++});if(this.sources[ga]=g_.create(_p,this.sources),!this.sources[ga])throw{}}catch(ly){delete this.sources[ga];var _f="Could not create data source: ".concat(ly.message);o0("warn","Scene: ".concat(_f),_l),this.trigger("warning",{type:"sources",source:_l,message:_f})}g_.sameConfig(this.sources[ga],_c)||_r.push(ga)}for(var ey in _i.forEach(function(ly){$.config.sources[ly]||(delete $.sources[ly],_r.push(ly))}),0<_r.length&&this.tile_manager.removeTiles(function(ly){return-1<_r.indexOf(ly.source.name)}),this.config.layers){var iy=this.config.layers[ey];iy.enabled!==!1&&iy.data&&this.sources[iy.data.source]&&(this.sources[iy.data.source].builds_geometry_tiles=!0)}}},{key:"loadTextures",value:function(){var $=this;return this.textureManager.createFromObject(this.gl,this.config.textures).then(function(){return $.textureManager.createDefault($.gl)})}},{key:"updateStyles",value:function(){if(!this.initialized&&!this.initializing)throw new Error("Scene.updateStyles() called before scene was initialized");for(var $ in this.styles=this.style_manager.build(this.config.styles),this.style_manager.initStyles(this),this.styles)this.styles[$].setGL(this.gl);this.dirty=!0}},{key:"createLights",value:function(){for(var $ in this.lights={},this.config.lights){var _r;this.config.lights[$]&&x1(this.config.lights[$])==="object"&&((_r=this.config.lights[$]).name=$.replace("-","_"),_r.visible=_r.visible!==!1,_r.visible&&(this.lights[_r.name]=l_.create(this.view,_r)))}l_.inject(this.lights)}},{key:"setBackground",value:function(){var $,_r=this.config.scene.background;this.background={},_r&&_r.color&&(this.background.color=Gy.parseColor(_r.color)),this.background.color||(this.background.color=[0,0,0,0]),this.background.color[3]===1?this.canvas.style.backgroundColor="rgba(".concat(this.background.color.map(function(_i){return Math.floor(255*_i)}).join(", "),")"):this.canvas.style.backgroundColor="transparent",($=this.gl).clearColor.apply($,u1(this.background.color))}},{key:"setIntrospection",value:function($){var _r=this;return $!==this.introspection?(this.introspection=$||!1,this.updating++,this.updateConfig({normalize:!1}).then(function(){return _r.updating--})):Promise.resolve()}},{key:"updateConfig",value:function($){var _r=0<arguments.length&&$!==void 0?$:{},_i=_r.load_event,_s=_i!==void 0&&_i,ga=_r.serialize_funcs,_l=_r.normalize,_c=_l===void 0||_l;_r.fade_in,this.generation=++j.generation,this.updating++,this.config=$w.applyGlobalProperties(this.config),_c?$w.normalize(this.config,this.config_bundle):($w.hoistStyleShaderUniformTextures(this.config,this.config_bundle,{include_globals:!0}),$w.normalizeTextures(this.config,this.config_bundle)),this.trigger(_s?"load":"update",{config:this.config}),this.style_manager.init(),this.createLights(),this.createDataSources(),this.loadTextures(),this.setBackground(),OC.loadFonts(this.config.fonts),this.updateStyles();var _p=this.syncConfigToWorker({serialize_funcs:ga});return this.updating--,this.view.updateBounds(),this.requestRedraw(),_p}},{key:"syncConfigToWorker",value:function($){var _r=(0<arguments.length&&$!==void 0?$:{}).serialize_funcs,_i=_r===void 0||_r?q0.serializeWithFunctions(this.config):JSON.stringify(this.config);return S0.postMessage(this._workers,"self.updateConfig",{config:_i,generation:this.generation,introspection:this.introspection},cE)}},{key:"createListeners",value:function(){var $=this;this.listeners={},this.listeners.view={move:function(){return $.trigger("move")}},this.view.subscribe(this.listeners.view),this.listeners.texture={update:function(){return $.dirty=!0},warning:function(_r){return $.trigger("warning",Object.assign({type:"textures"},_r))}},this.textureManager.subscribe(this.listeners.texture),this.listeners.scene_loader={error:function(_r){return $.trigger("error",Object.assign({type:"scene"},_r))}},$w.subscribe(this.listeners.scene_loader)}},{key:"destroyListeners",value:function(){this.unsubscribeAll(),this.view.unsubscribe(this.listeners.view),this.textureManager.unsubscribe(this.listeners.texture),$w.unsubscribe(this.listeners.scene_loader),this.listeners=null}},{key:"resetFeatureSelection",value:function(){this.selection?this._workers&&S0.postMessage(this._workers,"self.resetFeatureSelection"):this.selection=new lx(this.gl,this.id)}},{key:"updateViewComplete",value:function(){(this.render_count_changed||this.generation!==this.last_complete_generation)&&this.tile_manager.isReady()&&(this.last_complete_generation=this.generation,this.trigger("view_complete"))}},{key:"resetViewComplete",value:function(){this.last_complete_generation=null}},{key:"screenshot",value:function($){var _r=(0<arguments.length&&$!==void 0?$:{}).background,_i=_r===void 0?"white":_r;return this.requestRedraw(),this.media_capture.screenshot({background:_i})}},{key:"pixelRatio",value:function(){return q0.device_pixel_ratio}},{key:"startVideoCapture",value:function(){return this.requestRedraw(),this.media_capture.startVideoCapture()}},{key:"stopVideoCapture",value:function(){return this.media_capture.stopVideoCapture()}},{key:"_profile",value:function($){console.profile("main thread: ".concat($)),S0.postMessage(this._workers,"self.profile",$)}},{key:"_profileEnd",value:function($){console.profileEnd("main thread: ".concat($)),S0.postMessage(this._workers,"self.profileEnd",$)}},{key:"getCameraMatrix",value:function(){return this.view.lookAtManipulator.getCameraMatrix()}},{key:"animated",get:function(){var $=this;return this.config.scene.animated!==void 0?this.config.scene.animated:this.tile_manager.getActiveStyles().some(function(_r){return $.styles[_r]&&$.styles[_r].animated})}}],[{key:"create",value:function($,_r){return new j($,1<arguments.length&&_r!==void 0?_r:{})}}]),j}();A3.id=0,A3.generation=0;var mL=function(){Z1($,dS);var j=J1($);function $(_r,_i,_s){var ga=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};F0(this,$);var _l=Math.pow(2,ga.coords.z),_c=Math.abs(Math.floor(ga.coords.x/_l)),_p=Math.abs(_l*_c-Math.abs(ga.coords.x)),_f=ga.coords;return ga.coords={x:_p,y:_f.y,z:_f.z},j.call(this,_r,_i,_s,ga)}return H0($,[{key:"load",value:function(_r){var _i=this;if(!_r||!_r.uid)return sx(w_($.prototype),"load",this).call(this,_r);var _s=_r.coords,ga=new Uint8Array([0,0,0,0]);return this.loading=new Promise(function(_l,_c){var _p=H.map.DataModel.invoke(_r.uid,"requestTileAsPromise",[_s.x,_s.y,_s.z])||null;_p?_p.then(function(_f){var ey=_f.data;_i.loaded=!0,ey&&!(ey instanceof ArrayBuffer)&&(ey.tagName.toUpperCase()==="IMG"||ey.tagName.toUpperCase()==="CANVAS")?_i.setElement(ey,_r):_i.setData(1,1,ga,{filtering:"nearest"})},function(){_i.loaded=!1}).then(_l,function(_f){return _c(_f)}):_c(new Error("Unable to invoke on target "+_r.uid))}),this.loading}}]),$}();GT.register(mL,function(j){return j&&j.uid}),self.H=self.H||{},self.H.gl={DataSource:g_,Geo:Zy,MathUtils:L1,Scene:A3,Task:H1,Tile:z1,WorkerBroker:S0,log:o0,SceneLoader:$w,yaml:LM}}()};i()}(),this.H=this.H||{},this.H.venues=function(i){function o(gy,sy){var ry,ny,sy=(sy=sy===void 0?{}:sy).insertAt;gy&&typeof document<"u"&&(ry=document.head||document.getElementsByTagName("head")[0],(ny=document.createElement("style")).type="text/css",sy==="top"&&ry.firstChild?ry.insertBefore(ny,ry.firstChild):ry.appendChild(ny),ny.styleSheet?ny.styleSheet.cssText=gy:ny.appendChild(document.createTextNode(gy)))}function s(gy,_d){var ry,ny=Object.keys(gy);return Object.getOwnPropertySymbols&&(ry=Object.getOwnPropertySymbols(gy),_d&&(ry=ry.filter(function(sy){return Object.getOwnPropertyDescriptor(gy,sy).enumerable})),ny.push.apply(ny,ry)),ny}function _e(gy){for(var _d=1;_d<arguments.length;_d++){var ry=arguments[_d]!=null?arguments[_d]:{};_d%2?s(Object(ry),!0).forEach(function(ny){oy(gy,ny,ry[ny])}):Object.getOwnPropertyDescriptors?Object.defineProperties(gy,Object.getOwnPropertyDescriptors(ry)):s(Object(ry)).forEach(function(ny){Object.defineProperty(gy,ny,Object.getOwnPropertyDescriptor(ry,ny))})}return gy}function _n(){_n=function(){return gy};var gy={},_d=Object.prototype,ry=_d.hasOwnProperty,p0=typeof Symbol=="function"?Symbol:{},ny=p0.iterator||"@@iterator",sy=p0.asyncIterator||"@@asyncIterator",dy=p0.toStringTag||"@@toStringTag";function my(Qy,l0,m0){return Object.defineProperty(Qy,l0,{value:m0,enumerable:!0,configurable:!0,writable:!0}),Qy[l0]}try{my({},"")}catch{my=function(l0,m0,f0){return l0[m0]=f0}}function Cy(Qy,i1,m0,m1){var w0,P0,O0,f1,i1=i1&&i1.prototype instanceof Fy?i1:Fy,i1=Object.create(i1.prototype),m1=new t0(m1||[]);return i1._invoke=(w0=Qy,P0=m0,O0=m1,f1="suspendedStart",function(l1,b1){if(f1==="executing")throw new Error("Generator is already running");if(f1==="completed"){if(l1==="throw")throw b1;return A0()}for(O0.method=l1,O0.arg=b1;;){var n1=O0.delegate;if(n1&&(n1=function e1(R1,r1){var X1=R1.iterator[r1.method];if(X1===void 0){if(r1.delegate=null,r1.method==="throw"){if(R1.iterator.return&&(r1.method="return",r1.arg=void 0,e1(R1,r1),r1.method==="throw"))return Ry;r1.method="throw",r1.arg=new TypeError("The iterator does not provide a 'throw' method")}return Ry}return X1=My(X1,R1.iterator,r1.arg),X1.type==="throw"?(r1.method="throw",r1.arg=X1.arg,r1.delegate=null,Ry):(X1=X1.arg,X1?X1.done?(r1[R1.resultName]=X1.value,r1.next=R1.nextLoc,r1.method!=="return"&&(r1.method="next",r1.arg=void 0),r1.delegate=null,Ry):X1:(r1.method="throw",r1.arg=new TypeError("iterator result is not an object"),r1.delegate=null,Ry))}(n1,O0),n1)){if(n1===Ry)continue;return n1}if(O0.method==="next")O0.sent=O0._sent=O0.arg;else if(O0.method==="throw"){if(f1==="suspendedStart")throw f1="completed",O0.arg;O0.dispatchException(O0.arg)}else O0.method==="return"&&O0.abrupt("return",O0.arg);if(f1="executing",n1=My(w0,P0,O0),n1.type==="normal"){if(f1=O0.done?"completed":"suspendedYield",n1.arg===Ry)continue;return{value:n1.arg,done:O0.done}}n1.type==="throw"&&(f1="completed",O0.method="throw",O0.arg=n1.arg)}}),i1}function My(Qy,l0,m0){try{return{type:"normal",arg:Qy.call(l0,m0)}}catch(f0){return{type:"throw",arg:f0}}}gy.wrap=Cy;var Ry={};function Fy(){}function Vy(){}function Hy(){}var p0={},d0=(my(p0,ny,function(){return this}),Object.getPrototypeOf),d0=d0&&d0(d0(a0([]))),e0=(d0&&d0!==_d&&ry.call(d0,ny)&&(p0=d0),Hy.prototype=Fy.prototype=Object.create(p0));function v0(Qy){["next","throw","return"].forEach(function(l0){my(Qy,l0,function(m0){return this._invoke(l0,m0)})})}function h0(Qy,l0){var m0;this._invoke=function(f0,w0){function P0(){return new l0(function(O0,f1){(function i1(R1,l1,b1,n1){var e1,R1=My(Qy[R1],Qy,l1);if(R1.type!=="throw")return(l1=(e1=R1.arg).value)&&typeof l1=="object"&&ry.call(l1,"__await")?l0.resolve(l1.__await).then(function(r1){i1("next",r1,b1,n1)},function(r1){i1("throw",r1,b1,n1)}):l0.resolve(l1).then(function(r1){e1.value=r1,b1(e1)},function(r1){return i1("throw",r1,b1,n1)});n1(R1.arg)})(f0,w0,O0,f1)})}return m0=m0?m0.then(P0,P0):P0()}}function r0(Qy){var l0={tryLoc:Qy[0]};1 in Qy&&(l0.catchLoc=Qy[1]),2 in Qy&&(l0.finallyLoc=Qy[2],l0.afterLoc=Qy[3]),this.tryEntries.push(l0)}function _v(Qy){var l0=Qy.completion||{};l0.type="normal",delete l0.arg,Qy.completion=l0}function t0(Qy){this.tryEntries=[{tryLoc:"root"}],Qy.forEach(r0,this),this.reset(!0)}function a0(Qy){if(Qy){var l0,m0=Qy[ny];if(m0)return m0.call(Qy);if(typeof Qy.next=="function")return Qy;if(!isNaN(Qy.length))return l0=-1,(m0=function f0(){for(;++l0<Qy.length;)if(ry.call(Qy,l0))return f0.value=Qy[l0],f0.done=!1,f0;return f0.value=void 0,f0.done=!0,f0}).next=m0}return{next:A0}}function A0(){return{value:void 0,done:!0}}return my(e0,"constructor",Vy.prototype=Hy),my(Hy,"constructor",Vy),Vy.displayName=my(Hy,dy,"GeneratorFunction"),gy.isGeneratorFunction=function(Qy){return Qy=typeof Qy=="function"&&Qy.constructor,!!Qy&&(Qy===Vy||(Qy.displayName||Qy.name)==="GeneratorFunction")},gy.mark=function(Qy){return Object.setPrototypeOf?Object.setPrototypeOf(Qy,Hy):(Qy.__proto__=Hy,my(Qy,dy,"GeneratorFunction")),Qy.prototype=Object.create(e0),Qy},gy.awrap=function(Qy){return{__await:Qy}},v0(h0.prototype),my(h0.prototype,sy,function(){return this}),gy.AsyncIterator=h0,gy.async=function(Qy,l0,m0,f0,w0){w0===void 0&&(w0=Promise);var P0=new h0(Cy(Qy,l0,m0,f0),w0);return gy.isGeneratorFunction(l0)?P0:P0.next().then(function(O0){return O0.done?O0.value:P0.next()})},v0(e0),my(e0,dy,"Generator"),my(e0,ny,function(){return this}),my(e0,"toString",function(){return"[object Generator]"}),gy.keys=function(Qy){var l0,m0=[];for(l0 in Qy)m0.push(l0);return m0.reverse(),function f0(){for(;m0.length;){var w0=m0.pop();if(w0 in Qy)return f0.value=w0,f0.done=!1,f0}return f0.done=!0,f0}},gy.values=a0,t0.prototype={constructor:t0,reset:function(Qy){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_v),!Qy)for(var l0 in this)l0.charAt(0)==="t"&&ry.call(this,l0)&&!isNaN(+l0.slice(1))&&(this[l0]=void 0)},stop:function(){this.done=!0;var Qy=this.tryEntries[0].completion;if(Qy.type==="throw")throw Qy.arg;return this.rval},dispatchException:function(Qy){if(this.done)throw Qy;var l0=this;function m0(i1,m1){return P0.type="throw",P0.arg=Qy,l0.next=i1,m1&&(l0.method="next",l0.arg=void 0),!!m1}for(var f0=this.tryEntries.length-1;0<=f0;--f0){var w0=this.tryEntries[f0],P0=w0.completion;if(w0.tryLoc==="root")return m0("end");if(w0.tryLoc<=this.prev){var O0=ry.call(w0,"catchLoc"),f1=ry.call(w0,"finallyLoc");if(O0&&f1){if(this.prev<w0.catchLoc)return m0(w0.catchLoc,!0);if(this.prev<w0.finallyLoc)return m0(w0.finallyLoc)}else if(O0){if(this.prev<w0.catchLoc)return m0(w0.catchLoc,!0)}else{if(!f1)throw new Error("try statement without catch or finally");if(this.prev<w0.finallyLoc)return m0(w0.finallyLoc)}}}},abrupt:function(Qy,l0){for(var m0=this.tryEntries.length-1;0<=m0;--m0){var f0=this.tryEntries[m0];if(f0.tryLoc<=this.prev&&ry.call(f0,"finallyLoc")&&this.prev<f0.finallyLoc){var w0=f0;break}}var P0=(w0=w0&&(Qy==="break"||Qy==="continue")&&w0.tryLoc<=l0&&l0<=w0.finallyLoc?null:w0)?w0.completion:{};return P0.type=Qy,P0.arg=l0,w0?(this.method="next",this.next=w0.finallyLoc,Ry):this.complete(P0)},complete:function(Qy,l0){if(Qy.type==="throw")throw Qy.arg;return Qy.type==="break"||Qy.type==="continue"?this.next=Qy.arg:Qy.type==="return"?(this.rval=this.arg=Qy.arg,this.method="return",this.next="end"):Qy.type==="normal"&&l0&&(this.next=l0),Ry},finish:function(Qy){for(var l0=this.tryEntries.length-1;0<=l0;--l0){var m0=this.tryEntries[l0];if(m0.finallyLoc===Qy)return this.complete(m0.completion,m0.afterLoc),_v(m0),Ry}},catch:function(Qy){for(var l0=this.tryEntries.length-1;0<=l0;--l0){var m0,f0,w0=this.tryEntries[l0];if(w0.tryLoc===Qy)return(m0=w0.completion).type==="throw"&&(f0=m0.arg,_v(w0)),f0}throw new Error("illegal catch attempt")},delegateYield:function(Qy,l0,m0){return this.delegate={iterator:a0(Qy),resultName:l0,nextLoc:m0},this.method==="next"&&(this.arg=void 0),Ry}},gy}function _o(gy){return(_o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_d){return typeof _d}:function(_d){return _d&&typeof Symbol=="function"&&_d.constructor===Symbol&&_d!==Symbol.prototype?"symbol":typeof _d})(gy)}function _a(gy,_d,ry,ny,sy,dy,my){try{var Cy=gy[dy](my),My=Cy.value}catch(Ry){return void ry(Ry)}Cy.done?_d(My):Promise.resolve(My).then(ny,sy)}function _u(gy,_d){if(!(gy instanceof _d))throw new TypeError("Cannot call a class as a function")}function _h(gy,_d){for(var ry=0;ry<_d.length;ry++){var ny=_d[ry];ny.enumerable=ny.enumerable||!1,ny.configurable=!0,"value"in ny&&(ny.writable=!0),Object.defineProperty(gy,ny.key,ny)}}function ty(gy,_d,ry){return _d&&_h(gy.prototype,_d),ry&&_h(gy,ry),Object.defineProperty(gy,"prototype",{writable:!1}),gy}function oy(gy,_d,ry){return _d in gy?Object.defineProperty(gy,_d,{value:ry,enumerable:!0,configurable:!0,writable:!0}):gy[_d]=ry,gy}function hy(gy,_d){if(typeof _d!="function"&&_d!==null)throw new TypeError("Super expression must either be null or a function");gy.prototype=Object.create(_d&&_d.prototype,{constructor:{value:gy,writable:!0,configurable:!0}}),Object.defineProperty(gy,"prototype",{writable:!1}),_d&&vy(gy,_d)}function fy(gy){return(fy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_d){return _d.__proto__||Object.getPrototypeOf(_d)})(gy)}function vy(gy,_d){return(vy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ry,ny){return ry.__proto__=ny,ry})(gy,_d)}function xy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wy(gy,_d,ry){return(wy=xy()?Reflect.construct.bind():function(ny,sy,dy){var my=[null];return my.push.apply(my,sy),sy=new(Function.bind.apply(ny,my)),dy&&vy(sy,dy.prototype),sy}).apply(null,arguments)}function By(gy,_d){if(gy==null)return{};var ry,ny=function(my,Cy){if(my==null)return{};for(var My,Ry={},Fy=Object.keys(my),Vy=0;Vy<Fy.length;Vy++)My=Fy[Vy],0<=Cy.indexOf(My)||(Ry[My]=my[My]);return Ry}(gy,_d);if(Object.getOwnPropertySymbols)for(var sy=Object.getOwnPropertySymbols(gy),dy=0;dy<sy.length;dy++)ry=sy[dy],0<=_d.indexOf(ry)||Object.prototype.propertyIsEnumerable.call(gy,ry)&&(ny[ry]=gy[ry]);return ny}function Sy(gy){if(gy===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return gy}function Ay(gy){var _d=xy();return function(){var ry,ny=fy(gy),ny=(ry=_d?(ry=fy(this).constructor,Reflect.construct(ny,arguments,ry)):ny.apply(this,arguments),this);if(ry&&(typeof ry=="object"||typeof ry=="function"))return ry;if(ry!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sy(ny)}}function Py(){return(Py=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(gy,_d,ry){var ny=function(sy,dy){for(;!Object.prototype.hasOwnProperty.call(sy,dy)&&(sy=fy(sy))!==null;);return sy}(gy,_d);if(ny)return ny=Object.getOwnPropertyDescriptor(ny,_d),ny.get?ny.get.call(arguments.length<3?gy:ry):ny.value}).apply(this,arguments)}function Iy(gy,_d){return function(ry){if(Array.isArray(ry))return ry}(gy)||function(ry,ny){var sy=ry==null?null:typeof Symbol<"u"&&ry[Symbol.iterator]||ry["@@iterator"];if(sy!=null){var dy,my,Cy=[],My=!0,Ry=!1;try{for(sy=sy.call(ry);!(My=(dy=sy.next()).done)&&(Cy.push(dy.value),!ny||Cy.length!==ny);My=!0);}catch(Fy){Ry=!0,my=Fy}finally{try{My||sy.return==null||sy.return()}finally{if(Ry)throw my}}return Cy}}(gy,_d)||Ky(gy,_d)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $y(gy){return function(_d){if(Array.isArray(_d))return Jy(_d)}(gy)||function(_d){if(typeof Symbol<"u"&&_d[Symbol.iterator]!=null||_d["@@iterator"]!=null)return Array.from(_d)}(gy)||Ky(gy)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ky(gy,_d){if(gy){if(typeof gy=="string")return Jy(gy,_d);var ry=Object.prototype.toString.call(gy).slice(8,-1);return(ry=ry==="Object"&&gy.constructor?gy.constructor.name:ry)==="Map"||ry==="Set"?Array.from(gy):ry==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ry)?Jy(gy,_d):void 0}}function Jy(gy,_d){(_d==null||_d>gy.length)&&(_d=gy.length);for(var ry=0,ny=new Array(_d);ry<_d;ry++)ny[ry]=gy[ry];return ny}o(`.H_l_right .venues-ui__drawings .trigger.button--active .arrow {
  transform: rotate(90deg);
}
.H_l_right .venues-ui__drawings .drawings {
  right: 45px;
  left: initial;
}`);var i0=function(){hy(_d,H.map.Feature);var gy=Ay(_d);function _d(ry){var ny;return _u(this,_d),(ny=gy.call(this)).id=ry.id,ny.model=ry,ny}return ty(_d,[{key:"getData",value:function(){return this.model}},{key:"getAddress",value:function(){return this.model.getInternalAddress()}},{key:"getCenter",value:function(){var ny=Iy(this.model.getCenter(),2),ry=ny[0],ny=ny[1];return new H.geo.Point(ny,ry)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"toGeoJSON",value:function(){return this.model.toJSON()}},{key:"getLevel",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getLevel().getDrawing().getParentEventTarget()}}]),_d}(),k0=function(){hy(_d,H.map.Feature);var gy=Ay(_d);function _d(ry){var ny;return _u(this,_d),(ny=gy.call(this)).id=ry.id,ny.model=ry,ny}return ty(_d,[{key:"getData",value:function(){return this.model}},{key:"getBoundingBox",value:function(){return wy(H.geo.Rect,$y(this.model.getBoundingBox()))}},{key:"getCenter",value:function(){var ny=Iy(this.model.getCenter(),2),ry=ny[0],ny=ny[1];return new H.geo.Point(ny,ry)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getLevel",value:function(ry){return this.getLevels().find(function(ny){return ny.getIdentifier()===ry})}},{key:"getLevels",value:function(){var ry=this.getData().getLevels().map(function(ny){return ny.getIdentifier()});return this.getVenue().getLevels().filter(function(ny){return ry.indexOf(ny.id)!==-1})}},{key:"getMainLevel",value:function(){return this.getLevel(this.model.getMainLevel().getIdentifier())}},{key:"getVenue",value:function(){return this.getParentEventTarget()}}]),_d}(),g0=function(){hy(_d,H.map.Feature);var gy=Ay(_d);function _d(ry){var ny;return _u(this,_d),(ny=gy.call(this)).id=ry.id,ny.model=ry,ny}return ty(_d,[{key:"getGeometry",value:function(ry){return this.getGeometries().find(function(ny){return ny.getIdentifier()===ry})}},{key:"getGeometries",value:function(){var ry=this.getData().getGeometries().map(function(ny){return ny.getIdentifier()});return this.getDrawing().getVenue().getGeometries().filter(function(ny){return ry.indexOf(ny.id)!==-1})}},{key:"getData",value:function(){return this.model}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getShortName",value:function(){return this.model.getShortName()}},{key:"getZIndex",value:function(){return this.model.getZIndex()}},{key:"isMain",value:function(){return this.model.isMain()}},{key:"getDrawing",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getDrawing().getParentEventTarget()}}]),_d}();function j0(gy,_d,ry,ny){for(var sy,dy=ny,my=ry-_d>>1,Cy=ry-_d,My=gy[_d],Ry=gy[_d+1],Fy=gy[ry],Vy=gy[ry+1],Hy=_d+3;Hy<ry;Hy+=3){var p0=function(d0,e0,v0,h0,r0,_v){var t0=r0-v0,a0=_v-h0;{var A0;t0===0&&a0===0||(1<(A0=((d0-v0)*t0+(e0-h0)*a0)/(t0*t0+a0*a0))?(v0=r0,h0=_v):0<A0&&(v0+=t0*A0,h0+=a0*A0))}return(t0=d0-v0)*t0+(a0=e0-h0)*a0}(gy[Hy],gy[Hy+1],My,Ry,Fy,Vy);dy<p0?(sy=Hy,dy=p0):p0===dy&&(p0=Math.abs(Hy-my))<Cy&&(sy=Hy,Cy=p0)}ny<dy&&(3<sy-_d&&j0(gy,_d,sy,ny),gy[sy+2]=dy,3<ry-sy&&j0(gy,sy,ry,ny))}function V0(sy,Cy,ry,ny){var sy={id:sy===void 0?null:sy,type:Cy,geometry:ry,tags:ny,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},dy=sy,my=dy.geometry,Cy=dy.type;if(Cy==="Point"||Cy==="MultiPoint"||Cy==="LineString")k1(dy,my);else if(Cy==="Polygon"||Cy==="MultiLineString")for(var My=0;My<my.length;My++)k1(dy,my[My]);else if(Cy==="MultiPolygon")for(My=0;My<my.length;My++)for(var Ry=0;Ry<my[My].length;Ry++)k1(dy,my[My][Ry]);return sy}function k1(gy,_d){for(var ry=0;ry<_d.length;ry+=3)gy.minX=Math.min(gy.minX,_d[ry]),gy.minY=Math.min(gy.minY,_d[ry+1]),gy.maxX=Math.max(gy.maxX,_d[ry]),gy.maxY=Math.max(gy.maxY,_d[ry+1])}function h1(gy,_d,ry,ny){if(_d.geometry){var sy=_d.geometry.coordinates,dy=_d.geometry.type,my=Math.pow(ry.tolerance/((1<<ry.maxZoom)*ry.extent),2),Cy=[],My=_d.id;if(ry.promoteId?My=_d.properties[ry.promoteId]:ry.generateId&&(My=ny||0),dy==="Point")r_(sy,Cy);else if(dy==="MultiPoint")for(var Ry=0;Ry<sy.length;Ry++)r_(sy[Ry],Cy);else if(dy==="LineString")K1(sy,Cy,my,!1);else if(dy==="MultiLineString"){if(ry.lineMetrics){for(Ry=0;Ry<sy.length;Ry++)K1(sy[Ry],Cy=[],my,!1),gy.push(V0(My,"LineString",Cy,_d.properties));return}h_(sy,Cy,my,!1)}else if(dy==="Polygon")h_(sy,Cy,my,!0);else{if(dy!=="MultiPolygon"){if(dy!=="GeometryCollection")throw new Error("Input data is not a valid GeoJSON object.");for(Ry=0;Ry<_d.geometry.geometries.length;Ry++)h1(gy,{id:My,geometry:_d.geometry.geometries[Ry],properties:_d.properties},ry,ny);return}for(Ry=0;Ry<sy.length;Ry++){var Fy=[];h_(sy[Ry],Fy,my,!0),Cy.push(Fy)}}gy.push(V0(My,dy,Cy,_d.properties))}}function r_(gy,_d){_d.push(_0(gy[0])),_d.push(Y0(gy[1])),_d.push(0)}function K1(gy,_d,ry,ny){for(var sy,dy,my=0,Cy=0;Cy<gy.length;Cy++){var My=_0(gy[Cy][0]),Ry=Y0(gy[Cy][1]);_d.push(My),_d.push(Ry),_d.push(0),0<Cy&&(my+=ny?(sy*Ry-My*dy)/2:Math.sqrt(Math.pow(My-sy,2)+Math.pow(Ry-dy,2))),sy=My,dy=Ry}var Fy=_d.length-3;_d[2]=1,j0(_d,0,Fy,ry),_d[2+Fy]=1,_d.size=Math.abs(my),_d.start=0,_d.end=_d.size}function h_(gy,_d,ry,ny){for(var sy=0;sy<gy.length;sy++){var dy=[];K1(gy[sy],dy,ry,ny),_d.push(dy)}}function _0(gy){return gy/360+.5}function Y0(gy){return gy=Math.sin(gy*Math.PI/180),gy=.5-.25*Math.log((1+gy)/(1-gy))/Math.PI,gy<0?0:1<gy?1:gy}function N0(gy,_d,ry,ny,sy,dy,my,Cy){if(ny/=_d,(ry/=_d)<=dy&&my<ny)return gy;if(my<ry||ny<=dy)return null;for(var My=[],Ry=0;Ry<gy.length;Ry++){var Fy=gy[Ry],Vy=Fy.geometry,Hy=Fy.type,p0=sy===0?Fy.minX:Fy.minY,d0=sy===0?Fy.maxX:Fy.maxY;if(ry<=p0&&d0<ny)My.push(Fy);else if(!(d0<ry||ny<=p0)){var e0=[];if(Hy==="Point"||Hy==="MultiPoint"){A0=a0=t0=_v=r0=h0=v0=void 0;for(var v0=Vy,h0=e0,r0=ry,_v=ny,t0=sy,a0=0;a0<v0.length;a0+=3){var A0=v0[a0+t0];r0<=A0&&A0<=_v&&(h0.push(v0[a0]),h0.push(v0[a0+1]),h0.push(v0[a0+2]))}}else if(Hy==="LineString")a1(Vy,e0,ry,ny,sy,!1,Cy.lineMetrics);else if(Hy==="MultiLineString")n_(Vy,e0,ry,ny,sy,!1);else if(Hy==="Polygon")n_(Vy,e0,ry,ny,sy,!0);else if(Hy==="MultiPolygon")for(var Qy=0;Qy<Vy.length;Qy++){var l0=[];n_(Vy[Qy],l0,ry,ny,sy,!0),l0.length&&e0.push(l0)}if(e0.length)if(Cy.lineMetrics&&Hy==="LineString")for(Qy=0;Qy<e0.length;Qy++)My.push(V0(Fy.id,Hy,e0[Qy],Fy.tags));else Hy!=="LineString"&&Hy!=="MultiLineString"||(e0.length===1?(Hy="LineString",e0=e0[0]):Hy="MultiLineString"),Hy!=="Point"&&Hy!=="MultiPoint"||(Hy=e0.length===3?"Point":"MultiPoint"),My.push(V0(Fy.id,Hy,e0,Fy.tags))}}return My.length?My:null}function a1(gy,_d,ry,ny,sy,dy,my){for(var Cy,My,Ry=C1(gy),Fy=sy===0?G_:p_,Vy=gy.start,Hy=0;Hy<gy.length-3;Hy+=3){var _v=gy[Hy],t0=gy[Hy+1],a0=gy[Hy+2],p0=gy[Hy+3],d0=gy[Hy+4],e0=sy===0?_v:t0,v0=sy===0?p0:d0,h0=!1;my&&(Cy=Math.sqrt(Math.pow(_v-p0,2)+Math.pow(t0-d0,2))),e0<ry?ry<v0&&(My=Fy(Ry,_v,t0,p0,d0,ry),my&&(Ry.start=Vy+Cy*My)):ny<e0?v0<ny&&(My=Fy(Ry,_v,t0,p0,d0,ny),my&&(Ry.start=Vy+Cy*My)):G1(Ry,_v,t0,a0),v0<ry&&ry<=e0&&(My=Fy(Ry,_v,t0,p0,d0,ry),h0=!0),ny<v0&&e0<=ny&&(My=Fy(Ry,_v,t0,p0,d0,ny),h0=!0),!dy&&h0&&(my&&(Ry.end=Vy+Cy*My),_d.push(Ry),Ry=C1(gy)),my&&(Vy+=Cy)}var r0=gy.length-3,_v=gy[r0],t0=gy[1+r0],a0=gy[2+r0];ry<=(e0=sy===0?_v:t0)&&e0<=ny&&G1(Ry,_v,t0,a0),r0=Ry.length-3,dy&&3<=r0&&(Ry[r0]!==Ry[0]||Ry[1+r0]!==Ry[1])&&G1(Ry,Ry[0],Ry[1],Ry[2]),Ry.length&&_d.push(Ry)}function C1(gy){var _d=[];return _d.size=gy.size,_d.start=gy.start,_d.end=gy.end,_d}function n_(gy,_d,ry,ny,sy,dy){for(var my=0;my<gy.length;my++)a1(gy[my],_d,ry,ny,sy,dy,!1)}function G1(gy,_d,ry,ny){gy.push(_d),gy.push(ry),gy.push(ny)}function G_(gy,_d,ry,ny,sy,dy){return ny=(dy-_d)/(ny-_d),gy.push(dy),gy.push(ry+(sy-ry)*ny),gy.push(1),ny}function p_(gy,_d,ry,ny,sy,dy){return sy=(dy-ry)/(sy-ry),gy.push(_d+(ny-_d)*sy),gy.push(dy),gy.push(1),sy}function M_(gy,_d){for(var ry=[],ny=0;ny<gy.length;ny++){var sy=gy[ny],dy=sy.type;if(dy==="Point"||dy==="MultiPoint"||dy==="LineString")my=ex(sy.geometry,_d);else if(dy==="MultiLineString"||dy==="Polygon")for(var my=[],Cy=0;Cy<sy.geometry.length;Cy++)my.push(ex(sy.geometry[Cy],_d));else if(dy==="MultiPolygon")for(my=[],Cy=0;Cy<sy.geometry.length;Cy++){for(var My=[],Ry=0;Ry<sy.geometry[Cy].length;Ry++)My.push(ex(sy.geometry[Cy][Ry],_d));my.push(My)}ry.push(V0(sy.id,dy,my,sy.tags))}return ry}function ex(gy,_d){var ry=[];ry.size=gy.size,gy.start!==void 0&&(ry.start=gy.start,ry.end=gy.end);for(var ny=0;ny<gy.length;ny+=3)ry.push(gy[ny]+_d,gy[ny+1],gy[ny+2]);return ry}function f_(gy,_d){if(!gy.transformed){for(var ry,ny=1<<gy.z,sy=gy.x,dy=gy.y,my=0;my<gy.features.length;my++){var Cy=gy.features[my],My=Cy.geometry,Ry=Cy.type;if(Cy.geometry=[],Ry===1)for(ry=0;ry<My.length;ry+=2)Cy.geometry.push(rx(My[ry],My[ry+1],_d,ny,sy,dy));else for(ry=0;ry<My.length;ry++){for(var Fy=[],Vy=0;Vy<My[ry].length;Vy+=2)Fy.push(rx(My[ry][Vy],My[ry][Vy+1],_d,ny,sy,dy));Cy.geometry.push(Fy)}}gy.transformed=!0}return gy}function rx(gy,_d,ry,ny,sy,dy){return[Math.round(ry*(gy*ny-sy)),Math.round(ry*(_d*ny-dy))]}function N2(gy,_d,ry,ny,sy){for(var dy=_d===sy.maxZoom?0:sy.tolerance/((1<<_d)*sy.extent),my={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ry,y:ny,z:_d,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Cy=0;Cy<gy.length;Cy++){my.numFeatures++,_v=r0=h0=v0=e0=d0=p0=Hy=Vy=_v=Fy=Ry=My=void 0;var My=my,Ry=gy[Cy],Fy=dy,_v=sy,Vy=Ry.geometry,Hy=Ry.type,p0=[];if(Hy==="Point"||Hy==="MultiPoint")for(var d0=0;d0<Vy.length;d0+=3)p0.push(Vy[d0]),p0.push(Vy[d0+1]),My.numPoints++,My.numSimplified++;else if(Hy==="LineString")t2(p0,Vy,My,Fy,!1,!1);else if(Hy==="MultiLineString"||Hy==="Polygon")for(d0=0;d0<Vy.length;d0++)t2(p0,Vy[d0],My,Fy,Hy==="Polygon",d0===0);else if(Hy==="MultiPolygon")for(var e0=0;e0<Vy.length;e0++){var v0=Vy[e0];for(d0=0;d0<v0.length;d0++)t2(p0,v0[d0],My,Fy,!0,d0===0)}if(p0.length){var h0=Ry.tags||null;if(Hy==="LineString"&&_v.lineMetrics){for(var r0 in h0={},Ry.tags)h0[r0]=Ry.tags[r0];h0.mapbox_clip_start=Vy.start/Vy.size,h0.mapbox_clip_end=Vy.end/Vy.size}_v={geometry:p0,type:Hy==="Polygon"||Hy==="MultiPolygon"?3:Hy==="LineString"||Hy==="MultiLineString"?2:1,tags:h0},Ry.id!==null&&(_v.id=Ry.id),My.features.push(_v)}var _v=gy[Cy].minX,t0=gy[Cy].minY,a0=gy[Cy].maxX,A0=gy[Cy].maxY;_v<my.minX&&(my.minX=_v),t0<my.minY&&(my.minY=t0),a0>my.maxX&&(my.maxX=a0),A0>my.maxY&&(my.maxY=A0)}return my}function t2(gy,_d,ry,ny,sy,dy){var my=ny*ny;if(0<ny&&_d.size<(sy?my:ny))ry.numPoints+=_d.length/3;else{for(var Cy=[],My=0;My<_d.length;My+=3)(ny===0||_d[My+2]>my)&&(ry.numSimplified++,Cy.push(_d[My]),Cy.push(_d[My+1])),ry.numPoints++;if(sy){for(var Ry=Cy,sy=dy,Fy=0,Vy=0,Hy=Ry.length,p0=Hy-2;Vy<Hy;p0=Vy,Vy+=2)Fy+=(Ry[Vy]-Ry[p0])*(Ry[Vy+1]+Ry[p0+1]);if(0<Fy===sy)for(Vy=0,Hy=Ry.length;Vy<Hy/2;Vy+=2){var d0=Ry[Vy],e0=Ry[Vy+1];Ry[Vy]=Ry[Hy-2-Vy],Ry[Vy+1]=Ry[Hy-1-Vy],Ry[Hy-2-Vy]=d0,Ry[Hy-1-Vy]=e0}}gy.push(Cy)}}function nx(My,_d){var ry=(_d=this.options=function(Ry,Fy){for(var Vy in Fy)Ry[Vy]=Fy[Vy];return Ry}(Object.create(this.options),_d)).debug;if(ry&&console.time("preprocess data"),_d.maxZoom<0||24<_d.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(_d.promoteId&&_d.generateId)throw new Error("promoteId and generateId cannot be used together.");var ny,sy,dy,my,Cy,My=function(Ry,Fy){var Vy=[];if(Ry.type==="FeatureCollection")for(var Hy=0;Hy<Ry.features.length;Hy++)h1(Vy,Ry.features[Hy],Fy,Hy);else Ry.type==="Feature"?h1(Vy,Ry,Fy):h1(Vy,{geometry:Ry},Fy);return Vy}(My,_d);this.tiles={},this.tileCoords=[],ry&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",_d.indexMaxZoom,_d.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ny=My,sy=(_d=_d).buffer/_d.extent,my=N0(dy=ny,1,-1-sy,sy,0,-1,2,_d),Cy=N0(ny,1,1-sy,2+sy,0,-1,2,_d),(my||Cy)&&(dy=N0(ny,1,-sy,1+sy,0,-1,2,_d)||[],my&&(dy=M_(my,1).concat(dy)),Cy&&(dy=dy.concat(M_(Cy,-1)))),(My=dy).length&&this.splitTile(My,0,0,0),ry&&(My.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function qx(gy,_d,ry){return 32*((1<<gy)*ry+_d)+gy}nx.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},nx.prototype.splitTile=function(gy,_d,ry,ny,sy,dy,my){for(var Cy=[gy,_d,ry,ny],My=this.options,Ry=My.debug;Cy.length;){ny=Cy.pop(),ry=Cy.pop(),_d=Cy.pop(),gy=Cy.pop();var Fy,Vy,Hy,p0,d0,e0,v0,h0,r0,_v=1<<_d,t0=qx(_d,ry,ny),a0=this.tiles[t0];if(a0||(1<Ry&&console.time("creation"),a0=this.tiles[t0]=N2(gy,_d,ry,ny,My),this.tileCoords.push({z:_d,x:ry,y:ny}),Ry&&(1<Ry&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",_d,ry,ny,a0.numFeatures,a0.numPoints,a0.numSimplified),console.timeEnd("creation")),this.stats[t0="z"+_d]=(this.stats[t0]||0)+1,this.total++)),a0.source=gy,sy){if(_d===My.maxZoom||_d===sy)continue;var t0=1<<sy-_d;if(ry!==Math.floor(dy/t0)||ny!==Math.floor(my/t0))continue}else if(_d===My.indexMaxZoom||a0.numPoints<=My.indexMaxPoints)continue;a0.source=null,gy.length!==0&&(1<Ry&&console.time("clipping"),Fy=.5-(t0=.5*My.buffer/My.extent),Hy=1+t0,v0=p0=d0=e0=null,h0=N0(gy,_v,ry-t0,ry+(Vy=.5+t0),0,a0.minX,a0.maxX,My),r0=N0(gy,_v,ry+Fy,ry+Hy,0,a0.minX,a0.maxX,My),gy=null,h0&&(v0=N0(h0,_v,ny-t0,ny+Vy,1,a0.minY,a0.maxY,My),p0=N0(h0,_v,ny+Fy,ny+Hy,1,a0.minY,a0.maxY,My),h0=null),r0&&(d0=N0(r0,_v,ny-t0,ny+Vy,1,a0.minY,a0.maxY,My),e0=N0(r0,_v,ny+Fy,ny+Hy,1,a0.minY,a0.maxY,My),r0=null),1<Ry&&console.timeEnd("clipping"),Cy.push(v0||[],_d+1,2*ry,2*ny),Cy.push(p0||[],_d+1,2*ry,2*ny+1),Cy.push(d0||[],_d+1,2*ry+1,2*ny),Cy.push(e0||[],_d+1,2*ry+1,2*ny+1))}},nx.prototype.getTile=function(gy,_d,ry){var sy=this.options,ny=sy.extent,sy=sy.debug;if(gy<0||24<gy)return null;var dy=1<<gy,dy=qx(gy,_d=(_d%dy+dy)%dy,ry);if(this.tiles[dy])return f_(this.tiles[dy],ny);1<sy&&console.log("drilling down to z%d-%d-%d",gy,_d,ry);for(var my,Cy=gy,My=_d,Ry=ry;!my&&0<Cy;)Cy--,My=Math.floor(My/2),Ry=Math.floor(Ry/2),my=this.tiles[qx(Cy,My,Ry)];return my&&my.source?(1<sy&&console.log("found parent tile z%d-%d-%d",Cy,My,Ry),1<sy&&console.time("drilling down"),this.splitTile(my.source,Cy,My,Ry,gy,_d,ry),1<sy&&console.timeEnd("drilling down"),this.tiles[dy]?f_(this.tiles[dy],ny):null):null};function kE(gy){var _d=[],ry=gy&&gy.features;if(ry)for(var ny=0,sy=ry.length;ny<sy;ny+=1){var dy=ry[ny],my=dy.type,Cy=void 0,My=!1;switch(my){case j2:Cy={type:a_.MULTI_POINT,coordinates:dy.geometry.map(function(Ry){return Ry.slice()})};break;case fx:case W_:Cy={type:a_.MULTI_LINESTRING,coordinates:dy.geometry.map(function(Ry){return Ry.map(function(Fy){return Fy.slice()})})},my===W_&&(Cy=function(Ry){for(var Fy,Vy=[],Hy=[],p0=0,d0=Ry.coordinates.length;p0<d0;p0+=1){var e0=Ry.coordinates[p0],v0=D2(e0);v0!==null&&(v0===(Fy=Fy||v0)&&Hy.length&&(Vy.push(Hy),Hy=[]),Hy.push(e0))}return 0<Hy.length&&Vy.push(Hy),Vy.length===1?(Ry.type=a_.POLYGON,Ry.coordinates=Vy[0]):1<Vy.length?(Ry.type=a_.MULTI_POLYGON,Ry.coordinates=Vy):Ry=null,Ry}(Cy))==null&&(My=!0);break;default:My=!0}My||_d.push({geometry:Cy,id:dy.id,properties:dy.tags,type:"Feature"})}return{type:"FeatureCollection",features:_d}}function e2(gy,_d,my,ny,sy){ny=ny,sy=sy,_d=1<<(_d=_d),(dy=[])[0]=((gy=gy)[0]/sy+my)/_d,dy[1]=(gy[1]/sy+ny)/_d;var dy,my={x:dy[0],y:dy[1]};return sy=(gy=my).x,gy=gy.y,sy=360*(sy-.5),ny=Math.exp(Math.PI*(.5-gy)/.25)-1,gy=Math.exp(Math.PI*(.5-gy)/.25)+1,[sy,180*Math.asin(ny/gy)/Math.PI]}var a_={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINESTRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection"},TE={fillColor:"#e0e0e0",outlineColor:"#829DB4",outlineWidth:1},I_={fill:"#333333",size:13},hx={fillColor:"#F2F285",outlineColor:"#0088BF",outlineWidth:1.2},Ix=16,r2=18,n2=24,v1={FOOTPRINT:"FOOTPRINT",ICON:"ICON",TEXT:"TEXT",VECTOR:"VECTOR"},px=Object.freeze({v1:1,v2:2}),j2=1,fx=2,W_=3,K0="CW",ix="CCW",D2=function(gy){return gy=function(_d){for(var ry=0,ny=_d.length,sy=0;sy<ny-1;sy+=1){var dy=_d[sy],my=_d[sy+1];ry+=dy[0]*my[1]-my[0]*dy[1]}return ry+=_d[ny-1][0]*_d[0][1]-_d[0][0]*_d[ny-1][1]}(gy),0<gy?K0:gy<0?ix:void 0};(function(gy){function _d(sy){if(ny[sy])return ny[sy].exports;var dy=ny[sy]={i:sy,l:!1,exports:{}};return ry[sy].call(dy.exports,dy,dy.exports,_d),dy.l=!0,dy.exports}var ry,ny;gy.exports=(ry=[function(sy,dy,Vy){function Cy(Hy){return(Cy=typeof Symbol=="function"&&_o(Symbol.iterator)=="symbol"?function(p0){return _o(p0)}:function(p0){return p0&&typeof Symbol=="function"&&p0.constructor===Symbol&&p0!==Symbol.prototype?"symbol":_o(p0)})(Hy)}var My=Vy(1),Vy=Vy(7),Ry=Vy.get,Fy=(Vy.deepValue,Vy.isArray),Vy=function(){function Hy(h0,e1){var _v=e1.location,_v=_v===void 0?0:_v,t0=e1.distance,t0=t0===void 0?100:t0,a0=e1.threshold,a0=a0===void 0?.6:a0,A0=e1.maxPatternLength,A0=A0===void 0?32:A0,Qy=e1.caseSensitive,Qy=Qy!==void 0&&Qy,l0=e1.tokenSeparator,l0=l0===void 0?/ +/g:l0,m0=e1.findAllMatches,m0=m0!==void 0&&m0,f0=e1.minMatchCharLength,f0=f0===void 0?1:f0,w0=e1.id,w0=w0===void 0?null:w0,P0=e1.keys,P0=P0===void 0?[]:P0,O0=e1.shouldSort,O0=O0===void 0||O0,f1=e1.getFn,f1=f1===void 0?Ry:f1,i1=e1.sortFn,i1=i1===void 0?function(R1,r1){return R1.score-r1.score}:i1,m1=e1.tokenize,m1=m1!==void 0&&m1,l1=e1.matchAllTokens,l1=l1!==void 0&&l1,b1=e1.includeMatches,b1=b1!==void 0&&b1,n1=e1.includeScore,n1=n1!==void 0&&n1,e1=e1.verbose,e1=e1!==void 0&&e1;if(!(this instanceof Hy))throw new TypeError("Cannot call a class as a function");this.options={location:_v,distance:t0,threshold:a0,maxPatternLength:A0,isCaseSensitive:Qy,tokenSeparator:l0,findAllMatches:m0,minMatchCharLength:f0,id:w0,keys:P0,includeMatches:b1,includeScore:n1,shouldSort:O0,getFn:f1,sortFn:i1,verbose:e1,tokenize:m1,matchAllTokens:l1},this.setCollection(h0),this._processKeys(P0)}for(var p0=Hy.prototype,d0=[{key:"setCollection",value:function(h0){return this.list=h0}},{key:"_processKeys",value:function(h0){if(this._keyWeights={},this._keyNames=[],h0.length&&typeof h0[0]=="string")for(var r0=0,_v=h0.length;r0<_v;r0+=1){var t0=h0[r0];this._keyWeights[t0]=1,this._keyNames.push(t0)}else{for(var a0=null,A0=null,Qy=0,l0=0,m0=h0.length;l0<m0;l0+=1){var f0=h0[l0];if(!f0.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var w0=f0.name;if(this._keyNames.push(w0),!f0.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');if(f0=f0.weight,f0<0||1<f0)throw new Error('"weight" property in key must bein the range of [0, 1)');A0=A0==null?f0:Math.max(A0,f0),a0=a0==null?f0:Math.min(a0,f0),Qy+=this._keyWeights[w0]=f0}if(1<Qy)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(_v){var r0=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{limit:!1},_v=(this._log(`---------
Search pattern: "`.concat(_v,'"')),this._prepareSearchers(_v)),t0=_v.tokenSearchers,_v=_v.fullSearcher,t0=this._search(t0,_v);return this._computeScore(t0),this.options.shouldSort&&this._sort(t0),r0.limit&&typeof r0.limit=="number"&&(t0=t0.slice(0,r0.limit)),this._format(t0)}},{key:"_prepareSearchers",value:function(){var h0=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",r0=[];if(this.options.tokenize)for(var _v=h0.split(this.options.tokenSeparator),t0=0,a0=_v.length;t0<a0;t0+=1)r0.push(new My(_v[t0],this.options));return{tokenSearchers:r0,fullSearcher:new My(h0,this.options)}}},{key:"_search",value:function(){var h0=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],r0=1<arguments.length?arguments[1]:void 0,_v=this.list,t0={},a0=[];if(typeof _v[0]=="string")for(var A0=0,Qy=_v.length;A0<Qy;A0+=1)this._analyze({key:"",value:_v[A0],record:A0,index:A0},{resultMap:t0,results:a0,tokenSearchers:h0,fullSearcher:r0});else for(var l0=0,m0=_v.length;l0<m0;l0+=1)for(var f0=_v[l0],w0=0,P0=this._keyNames.length;w0<P0;w0+=1){var O0=this._keyNames[w0];this._analyze({key:O0,value:this.options.getFn(f0,O0),record:f0,index:l0},{resultMap:t0,results:a0,tokenSearchers:h0,fullSearcher:r0})}return a0}},{key:"_analyze",value:function(l0,r0){var _v=this,t0=l0.key,a0=l0.arrayIndex,A0=l0.value,Qy=l0.record,l0=l0.index,P0=r0.tokenSearchers,m0=P0===void 0?[]:P0,f0=r0.fullSearcher,P0=r0.resultMap,w0=P0===void 0?{}:P0,P0=r0.results,O0=P0===void 0?[]:P0;(function f1(i1,m1,l1,b1){if(m1!=null){if(typeof m1=="string"){var n1=!1,e1=-1,R1=0,r1=(_v._log(`
Key: `.concat(t0===""?"--":t0)),f0.search(m1));if(_v._log('Full text: "'.concat(m1,'", score: ').concat(r1.score)),_v.options.tokenize){for(var X1=m1.split(_v.options.tokenSeparator),vx=X1.length,y_=[],h2=0,OT=m0.length;h2<OT;h2+=1){var qE=m0[h2];_v._log(`
Pattern: "`.concat(qE.pattern,'"'));for(var p2=!1,K2=0;K2<vx;K2+=1){var Zx=X1[K2],f2=qE.search(Zx),Px={};f2.isMatch?(Px[Zx]=f2.score,p2=n1=!0,y_.push(f2.score)):(Px[Zx]=1,_v.options.matchAllTokens||y_.push(1)),_v._log('Token: "'.concat(Zx,'", score: ').concat(Px[Zx]))}p2&&(R1+=1)}for(var e1=y_[0],$E=y_.length,x_=1;x_<$E;x_+=1)e1+=y_[x_];_v._log("Token score average:",e1/=$E)}var d2=r1.score,Jx=(_v._log("Score average:",d2=-1<e1?(d2+e1)/2:d2),!_v.options.tokenize||!_v.options.matchAllTokens||R1>=m0.length);_v._log(`
Check Matches: `.concat(Jx)),(n1||r1.isMatch)&&Jx&&(Jx={key:t0,arrayIndex:i1,value:m1,score:d2},_v.options.includeMatches&&(Jx.matchedIndices=r1.matchedIndices),(i1=w0[b1])?i1.output.push(Jx):(w0[b1]={item:l1,output:[Jx]},O0.push(w0[b1])))}else if(Fy(m1))for(var y2=0,HA=m1.length;y2<HA;y2+=1)f1(y2,m1[y2],l1,b1)}})(a0===void 0?-1:a0,A0,Qy,l0)}},{key:"_computeScore",value:function(h0){this._log(`

Computing score:
`);for(var r0=this._keyWeights,_v=!!Object.keys(r0).length,t0=0,a0=h0.length;t0<a0;t0+=1){for(var A0=h0[t0],Qy=A0.output,l0=Qy.length,m0=1,f0=0;f0<l0;f0+=1){var w0=Qy[f0],O0=w0.key,P0=_v?r0[O0]:1,O0=w0.score===0&&r0&&0<r0[O0]?Number.EPSILON:w0.score;m0*=Math.pow(O0,P0)}A0.score=m0,this._log(A0)}}},{key:"_sort",value:function(h0){this._log(`

Sorting....`),h0.sort(this.options.sortFn)}},{key:"_format",value:function(h0){var r0,_v=[],t0=(this.options.verbose&&(r0=[],this._log(`

Output:

`,JSON.stringify(h0,function(w0,P0){if(Cy(P0)==="object"&&P0!==null){if(r0.indexOf(P0)!==-1)return;r0.push(P0)}return P0},2)),r0=null),[]);this.options.includeMatches&&t0.push(function(w0,P0){var O0=w0.output;P0.matches=[];for(var f1=0,i1=O0.length;f1<i1;f1+=1){var m1,l1=O0[f1];l1.matchedIndices.length!==0&&(m1={indices:l1.matchedIndices,value:l1.value},l1.key&&(m1.key=l1.key),l1.hasOwnProperty("arrayIndex")&&-1<l1.arrayIndex&&(m1.arrayIndex=l1.arrayIndex),P0.matches.push(m1))}}),this.options.includeScore&&t0.push(function(w0,P0){P0.score=w0.score});for(var a0=0,A0=h0.length;a0<A0;a0+=1){var Qy=h0[a0];if(this.options.id&&(Qy.item=this.options.getFn(Qy.item,this.options.id)[0]),t0.length){for(var l0={item:Qy.item},m0=0,f0=t0.length;m0<f0;m0+=1)t0[m0](Qy,l0);_v.push(l0)}else _v.push(Qy.item)}return _v}},{key:"_log",value:function(){var h0;this.options.verbose&&(h0=console).log.apply(h0,arguments)}}],e0=0;e0<d0.length;e0++){var v0=d0[e0];v0.enumerable=v0.enumerable||!1,v0.configurable=!0,"value"in v0&&(v0.writable=!0),Object.defineProperty(p0,v0.key,v0)}return Hy}();sy.exports=Vy},function(sy,dy,Fy){var Cy=Fy(2),My=Fy(3),Ry=Fy(6),Fy=function(){function Vy(v0,f0){var r0=f0.location,r0=r0===void 0?0:r0,_v=f0.distance,_v=_v===void 0?100:_v,t0=f0.threshold,t0=t0===void 0?.6:t0,a0=f0.maxPatternLength,a0=a0===void 0?32:a0,A0=f0.isCaseSensitive,A0=A0!==void 0&&A0,Qy=f0.tokenSeparator,Qy=Qy===void 0?/ +/g:Qy,l0=f0.findAllMatches,l0=l0!==void 0&&l0,m0=f0.minMatchCharLength,m0=m0===void 0?1:m0,f0=f0.includeMatches,f0=f0!==void 0&&f0;if(!(this instanceof Vy))throw new TypeError("Cannot call a class as a function");this.options={location:r0,distance:_v,threshold:t0,maxPatternLength:a0,isCaseSensitive:A0,tokenSeparator:Qy,findAllMatches:l0,includeMatches:f0,minMatchCharLength:m0},this.pattern=A0?v0:v0.toLowerCase(),this.pattern.length<=a0&&(this.patternAlphabet=Ry(this.pattern))}for(var Hy=Vy.prototype,p0=[{key:"search",value:function(v0){var h0=this.options,r0=h0.isCaseSensitive,h0=h0.includeMatches;if(r0||(v0=v0.toLowerCase()),this.pattern===v0)return r0={isMatch:!0,score:0},h0&&(r0.matchedIndices=[[0,v0.length-1]]),r0;var r0=this.options,A0=r0.maxPatternLength,r0=r0.tokenSeparator;if(this.pattern.length>A0)return Cy(v0,this.pattern,r0);var A0=this.options,r0=A0.location,_v=A0.distance,t0=A0.threshold,a0=A0.findAllMatches,A0=A0.minMatchCharLength;return My(v0,this.pattern,this.patternAlphabet,{location:r0,distance:_v,threshold:t0,findAllMatches:a0,minMatchCharLength:A0,includeMatches:h0})}}],d0=0;d0<p0.length;d0++){var e0=p0[d0];e0.enumerable=e0.enumerable||!1,e0.configurable=!0,"value"in e0&&(e0.writable=!0),Object.defineProperty(Hy,e0.key,e0)}return Vy}();sy.exports=Fy},function(sy,dy){var my=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;sy.exports=function(Cy,Ry){var Vy=2<arguments.length&&arguments[2]!==void 0?arguments[2]:/ +/g,Ry=new RegExp(Ry.replace(my,"\\$&").replace(Vy,"|")),Fy=Cy.match(Ry),Vy=!!Fy,Hy=[];if(Vy)for(var p0=0,d0=Fy.length;p0<d0;p0+=1){var e0=Fy[p0];Hy.push([Cy.indexOf(e0),e0.length-1])}return{score:Vy?.5:1,isMatch:Vy,matchedIndices:Hy}}},function(sy,dy,my){var Cy=my(4),My=my(5);sy.exports=function(Ry,Fy,Vy,Hy){for(var p0=Hy.location,e0=Hy.distance,d0=e0===void 0?100:e0,e0=Hy.threshold,h0=Hy.findAllMatches,v0=h0!==void 0&&h0,h0=Hy.minMatchCharLength,h0=h0===void 0?1:h0,Hy=Hy.includeMatches,Hy=Hy!==void 0&&Hy,r0=p0===void 0?0:p0,_v=Ry.length,t0=e0===void 0?.6:e0,a0=Ry.indexOf(Fy,r0),A0=Fy.length,Qy=[],l0=0;l0<_v;l0+=1)Qy[l0]=0;a0!==-1&&(p0=Cy(Fy,{errors:0,currentLocation:a0,expectedLocation:r0,distance:d0}),t0=Math.min(p0,t0),(a0=Ry.lastIndexOf(Fy,r0+A0))!==-1&&(e0=Cy(Fy,{errors:0,currentLocation:a0,expectedLocation:r0,distance:d0}),t0=Math.min(e0,t0)));for(var a0=-1,m0=[],f0=1,w0=A0+_v,P0=1<<(A0<=31?A0-1:30),O0=0;O0<A0;O0+=1){for(var f1=0,i1=w0;f1<i1;)Cy(Fy,{errors:O0,currentLocation:r0+i1,expectedLocation:r0,distance:d0})<=t0?f1=i1:w0=i1,i1=Math.floor((w0-f1)/2+f1);var w0=i1,m1=Math.max(1,r0-i1+1),l1=v0?_v:Math.min(r0+i1,_v)+A0,b1=Array(l1+2);b1[l1+1]=(1<<O0)-1;for(var n1=l1;m1<=n1;--n1){var e1=n1-1,R1=Vy[Ry.charAt(e1)];if(R1&&(Qy[e1]=1),b1[n1]=(b1[n1+1]<<1|1)&R1,O0!==0&&(b1[n1]|=(m0[n1+1]|m0[n1])<<1|1|m0[n1+1]),b1[n1]&P0&&(f0=Cy(Fy,{errors:O0,currentLocation:e1,expectedLocation:r0,distance:d0}))<=t0){if(t0=f0,(a0=e1)<=r0)break;m1=Math.max(1,2*r0-a0)}}if(Cy(Fy,{errors:O0+1,currentLocation:r0,expectedLocation:r0,distance:d0})>t0)break;m0=b1}return p0={isMatch:0<=a0,score:f0===0?.001:f0},Hy&&(p0.matchedIndices=My(Qy,h0)),p0}},function(sy,dy){sy.exports=function(Hy,Fy){var Vy=Fy.errors,My=Fy.currentLocation,Ry=Fy.expectedLocation,Fy=Fy.distance,Fy=Fy===void 0?100:Fy,Vy=(Vy===void 0?0:Vy)/Hy.length,Hy=Math.abs((Ry===void 0?0:Ry)-(My===void 0?0:My));return Fy?Vy+Hy/Fy:Hy?1:Vy}},function(sy,dy){sy.exports=function(){for(var my=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],Cy=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,My=[],Ry=-1,Fy=0,Vy=my.length;Fy<Vy;Fy+=1){var Hy=my[Fy];Hy&&Ry===-1?Ry=Fy:Hy||Ry===-1||((Hy=Fy-1)-Ry+1>=Cy&&My.push([Ry,Hy]),Ry=-1)}return my[Fy-1]&&Cy<=Fy-Ry&&My.push([Ry,Fy-1]),My}},function(sy,dy){sy.exports=function(my){for(var Cy={},My=my.length,Ry=0;Ry<My;Ry+=1)Cy[my.charAt(Ry)]=0;for(var Fy=0;Fy<My;Fy+=1)Cy[my.charAt(Fy)]|=1<<My-Fy-1;return Cy}},function(sy,dy){function my(Fy){return Array.isArray?Array.isArray(Fy):Object.prototype.toString.call(Fy)==="[object Array]"}function Cy(Fy){if(Fy==null)return"";if(typeof Fy=="string")return Fy;var Vy=Fy+"";return Vy=="0"&&1/Fy==-1/0?"-0":Vy}function My(Fy){return typeof Fy=="string"}function Ry(Fy){return typeof Fy=="number"}sy.exports={get:function(Fy,Vy){var Hy=[];return function p0(d0,e0){if(e0){var v0=e0.indexOf("."),h0=e0,r0=null,_v=(v0!==-1&&(h0=e0.slice(0,v0),r0=e0.slice(v0+1)),d0[h0]);if(_v!=null)if(r0||!My(_v)&&!Ry(_v))if(my(_v))for(var t0=0,a0=_v.length;t0<a0;t0+=1)p0(_v[t0],r0);else r0&&p0(_v,r0);else Hy.push(Cy(_v))}else Hy.push(d0)}(Fy,Vy),Hy},isArray:my,isString:My,isNum:Ry,toString:Cy}}],ny={},_d.m=ry,_d.c=ny,_d.d=function(sy,dy,my){_d.o(sy,dy)||Object.defineProperty(sy,dy,{enumerable:!0,get:my})},_d.r=function(sy){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(sy,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(sy,"__esModule",{value:!0})},_d.t=function(sy,dy){if(1&dy&&(sy=_d(sy)),8&dy||4&dy&&_o(sy)=="object"&&sy&&sy.__esModule)return sy;var my=Object.create(null);if(_d.r(my),Object.defineProperty(my,"default",{enumerable:!0,value:sy}),2&dy&&typeof sy!="string")for(var Cy in sy)_d.d(my,Cy,(function(My){return sy[My]}).bind(null,Cy));return my},_d.n=function(sy){var dy=sy&&sy.__esModule?function(){return sy.default}:function(){return sy};return _d.d(dy,"a",dy),dy},_d.o=function(sy,dy){return Object.prototype.hasOwnProperty.call(sy,dy)},_d.p="",_d(_d.s=0))})(z0={exports:{}});var z0=z0.exports,i2=(D0=z0)&&D0.__esModule&&Object.prototype.hasOwnProperty.call(D0,"default")?D0.default:D0,AE=(z0.Fuse,ty(function gy(my){var ry=my.addressList,ry=ry===void 0?[]:ry,ny=my.geometries,ny=ny===void 0?[]:ny,sy=my.entity,sy=sy===void 0?null:sy,dy=my.name,dy=dy===void 0?"":dy,my=my.icon,my=my===void 0?"":my;_u(this,gy),this.addressList=ry,this.geometries=ny,this.icon=my,this.entity=sy,this.name=dy})),PA={keys:[{name:"name",weight:.6},{name:"addressList",weight:.4}],threshold:.2},hT=function(){function gy(_d){_u(this,gy),this.fuseSearch=null,this.levels_=null,this.searchListEntities_=[],this.searchListIcons_=[],this.searchList_=[],this.venueModel=_d,this.init()}return ty(gy,[{key:"init",value:function(){var _d=this.venueModel.getGeometries().reduce(function(ry,ny){return ry[ny.getId()]=ny,ry},{}),_d=(this.initEntityList(this.venueModel.getOccupant()),this.initIconList(_d),this.levels_=this.venueModel.getLevels().map(function(ry){return{levelId:ry.getId(),levelName:ry.getName(),drawingId:ry.getDrawing().getId(),drawingName:ry.getDrawing().getName()}}),[].concat($y(this.searchListEntities_),$y(this.searchListIcons_)));this.searchList_=_d.sort(function(ry,ny){return ry.name.localeCompare(ny.name)}),this.fuseSearch_=new i2(this.searchList_,PA)}},{key:"initEntityList",value:function(){var _d=(0<arguments.length&&arguments[0]!==void 0?arguments[0]:[]).map(function(ry){return ry.spaceIds?new AE({geometries:ry.space,addressList:ry.spaceIds||[],name:ry.properties.name||"",entity:ry}):null}).filter(function(ry){return ry!==null});this.searchListEntities_=_d}},{key:"initIconList",value:function(){this.searchListIcons_=Object.values(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{}).filter(function(_d){return _d.isIcon()}).map(function(_d){var ry=_d.getIcon();return new AE({geometries:[_d],icon:ry,name:_d.properties.name||""})})}},{key:"all",value:function(){return this.searchList_}},{key:"allIconTypes",value:function(){var _d=this.searchListIcons_.reduce(function(ry,ny){return ry[ny.name]=ny.name,ry},{});return Object.keys(_d)}},{key:"find",value:function(){var _d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"";return _d===""?this.searchList_:this.fuseSearch_.search(_d)}}]),gy}(),dx=Object.freeze({SITE:"SITE",IMAGES:"IMAGES",THEME:"THEME"}),SE="indoor.Site",NA="indoor.Structure",pT="indoor.Occupant",CE="indoor.Space",ME="indoor.SpaceGroups",fT="Address",dT="indoor.Level",yT="indoor.Entrance",jA="OCCUPANT_NAMES",z2="SPACE_NAME",DA="INTERNAL_ADDRESS_SHORT",zA="INTERNAL_ADDRESS",FA="INTERNAL_ADDRESS_LONG",F2="SPACE_TYPE_NAME",gT="SPACE_CATEGORY_NAME",IE="Point",OE="LineString",RE="Polygon",LE="MultiPoint",PE="MultiLineString",B2="MultiPolygon",o2=Object.freeze({STANDARD:"STANDARD",FLATTEN:"FLATTEN",OUTDOOR_MAIN:"OUTDOOR_MAIN",INDOOR_MAIN:"INDOOR_MAIN",NO_OUTDOORS:"NO_OUTDOORS",FLATTEN_INDOOR_MAIN:"FLATTEN_INDOOR_MAIN",FLATTEN_OUTDOOR_COPY:"FLATTEN_OUTDOOR_COPY"}),vT="9999999999999",mT="icons",BA="config",$x="https://interactive.data.api.platform.here.com/interactive/v1/catalogs",D0=Object.freeze({THEME:"THEME",THEME_MAP:"THEME_MAP",PRESETS:"PRESETS",SDK_STRINGS:"SDK_STRINGS",ICON_FILE:"ICON_FILE",INPUT_COLORS:"INPUT_COLORS",BASE_MAP_INFO:"BASE_MAP_INFO",CONFIG_PROFILE:"CONFIG_PROFILE",NAV_THEME:"NAV_THEME",NAV_NAME_THEME:"NAV_NAME_THEME",NAV_PROP_MAP:"NAV_PROP_MAP",NAV_STRINGS:"NAV_STRINGS",NAV_THEME_MAP:"NAV_THEME_MAP",NAV_NAME_THEME_MAP:"NAV_NAME_THEME_MAP",V4_THEME_FAMILY:"V4_THEME_FAMILY",V4_MAPTYPE_THEME:"V4_MAPTYPE_THEME",ICON:"ICON",MARKER:"MARKER",PERMISSIONS:"PERMISSIONS",NAICS_ARRAY:"NAICS_ARRAY",NAICS_MAP:"NAICS_MAP"}),D0=(Object.freeze((oy(z0={},D0.THEME,"themeUrls"),oy(z0,D0.THEME_MAP,"themeMapUrl"),oy(z0,D0.PRESETS,"presetsUrl"),oy(z0,D0.SDK_STRINGS,"stringsUrl"),z0)),Object.freeze((oy(z0={},D0.THEME,"themeOverrides"),oy(z0,D0.THEME_MAP,"themeMapOverrides"),oy(z0,D0.PRESETS,"presetOverrides"),oy(z0,D0.SDK_STRINGS,"stringsOverrides"),oy(z0,D0.INPUT_COLORS,"inputColorOverrides"),z0)),Object.freeze((oy(z0={},D0.THEME,["Modern","Standard","Factory","Navteq","TheBase","Westfield_noLabels","Westfield","TDM_noLabel"]),oy(z0,D0.SDK_STRINGS,["Standard","SDK","sdk/standard"]),oy(z0,D0.V4_THEME_FAMILY,["modern","standard"]),oy(z0,D0.V4_MAPTYPE_THEME,["Airport Terminal","Airport","Casino","College Building","College Campus","Convention","General","Hospital","Outdoor","Retail","School Building","School Campus","Shopping Mall","Traffic","Train Station"]),oy(z0,D0.NAV_THEME,["Factory","MapEditor"]),oy(z0,D0.ICON,["Multicolor","Standard","TheBase","Factory"]),z0)),Object.freeze((oy(z0={},D0.THEME,"Modern"),oy(z0,D0.THEME_MAP,"Standard"),oy(z0,D0.PRESETS,"Standard"),oy(z0,D0.SDK_STRINGS,"Standard"),oy(z0,D0.ICON_FILE,"Standard"),oy(z0,D0.INPUT_COLORS,"Standard"),oy(z0,D0.BASE_MAP_INFO,"Standard"),oy(z0,D0.CONFIG_PROFILE,"factory"),oy(z0,D0.NAV_THEME,"Factory"),oy(z0,D0.NAV_NAME_THEME,"FactoryName"),oy(z0,D0.NAV_PROP_MAP,"Standard"),oy(z0,D0.NAV_STRINGS,"Standard"),oy(z0,D0.NAV_THEME_MAP,"Standard"),oy(z0,D0.NAV_NAME_THEME_MAP,"StandardName"),oy(z0,D0.V4_THEME_FAMILY,"Standard"),oy(z0,D0.V4_MAPTYPE_THEME,"Standard"),oy(z0,D0.ICON,"Multicolor"),oy(z0,D0.MARKER,"Standard"),z0)),Object.freeze({GEO_JSON:"GEO_JSON",V5_MAP:"V5_MAP",V5_NAV:"V5_NAV",V5_INFO:"V5_INFO",KML:"KML",SVG:"SVG",PNG:"PNG"})),Ox=(Object.freeze(oy({},D0.GEO_JSON,{COMMUNITY_MAP:"COMMUNITY_MAP",COMMUNITY_ENTITY:"COMMUNITY_ENTITY",PATH_LEVEL_GEOMETRY:"PATH_LEVEL_GEOMETRY",GEOJSON_LEVEL_GEOMETRY:"GEOJSON_LEVEL_GEOMETRY"})),Object.freeze({ACCOUNT_API:"ACCOUNT_API",DEFAULT_COLLECTION:"DEFAULT_COLLECTION",CATALOG_LAYER:"CATALOG_LAYER"})),U2=Object.freeze((oy(z0={},Ox.ACCOUNT_API,{BASE_URL:"https://account.api.here.com/authorization/v1.1/projects/me"}),oy(z0,Ox.DEFAULT_COLLECTION,{BASE_URL:"https://config.data.api.platform.here.com/config/v1/catalogs",PARAMS:{CREATED_BY:"created",COLLECTION:"-collection"}}),oy(z0,Ox.CATALOG_LAYER,{BASE_URL:"https://interactive.data.api.platform.here.com/interactive/v1/catalogs",MOMDATA_LAYER:"9999999999999",ICON_LAYER:"icons",THEMERULE_LAYER:"config",COLLECTION_LAYER:"layers/9999999999999/search",PARAMS:{FEATURE_TYPE:{KEY:"p.featureType",VALUE:"indoor.Site"}}}),z0)),NE=Object.freeze({isIconsEnabled:!0,isMetaEnabled:!0,metaOptions:{},iconOptions:{}}),G2=Object.freeze({GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH",OPTIONS:"OPTIONS",HEAD:"HEAD"});function yx(){}function M1(){M1.init.call(this)}function jE(gy){return gy._maxListeners===void 0?M1.defaultMaxListeners:gy._maxListeners}function V2(gy,_d,ry,ny){var sy,dy;if(typeof ry!="function")throw new TypeError('"listener" argument must be a function');return(sy=gy._events)?(sy.newListener&&(gy.emit("newListener",_d,ry.listener||ry),sy=gy._events),dy=sy[_d]):(sy=gy._events=new yx,gy._eventsCount=0),dy?(typeof dy=="function"?dy=sy[_d]=ny?[ry,dy]:[dy,ry]:ny?dy.unshift(ry):dy.push(ry),dy.warned||(ny=jE(gy))&&0<ny&&dy.length>ny&&(dy.warned=!0,(ny=new Error("Possible EventEmitter memory leak detected. "+dy.length+" "+_d+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",ny.emitter=gy,ny.type=_d,ny.count=dy.length,ny=ny,typeof console.warn=="function"?console.warn(ny):console.log(ny))):(dy=sy[_d]=ry,++gy._eventsCount),gy}function DE(gy,_d,ry){var ny=!1;function sy(){gy.removeListener(_d,sy),ny||(ny=!0,ry.apply(gy,arguments))}return sy.listener=ry,sy}function H2(gy){var _d=this._events;if(_d){if(_d=_d[gy],typeof _d=="function")return 1;if(_d)return _d.length}return 0}function gx(gy,_d){for(var ry=new Array(_d);_d--;)ry[_d]=gy[_d];return ry}yx.prototype=Object.create(null),(M1.EventEmitter=M1).usingDomains=!1,M1.prototype.domain=void 0,M1.prototype._events=void 0,M1.prototype._maxListeners=void 0,M1.defaultMaxListeners=10,M1.init=function(){this.domain=null,M1.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new yx,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},M1.prototype.setMaxListeners=function(gy){if(typeof gy!="number"||gy<0||isNaN(gy))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=gy,this},M1.prototype.getMaxListeners=function(){return jE(this)},M1.prototype.emit=function(gy){var _d,ry,ny,sy=gy==="error",dy=this._events;if(dy)sy=sy&&dy.error==null;else if(!sy)return!1;if(my=this.domain,sy){var my,sy=arguments[1];if(my)return(sy=sy||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,sy.domain=my,sy.domainThrown=!1,my.emit("error",sy),!1;throw sy instanceof Error?sy:((my=new Error('Uncaught, unspecified "error" event. ('+sy+")")).context=sy,my)}if(!(_d=dy[gy]))return!1;var Cy,My=typeof _d=="function";switch(Cy=arguments.length){case 1:var d0=_d,p0=My,Ry=this;if(p0)d0.call(Ry);else for(var Fy=d0.length,Vy=gx(d0,Fy),Hy=0;Hy<Fy;++Hy)Vy[Hy].call(Ry);break;case 2:var p0=_d,d0=My,e0=this,v0=arguments[1];if(d0)p0.call(e0,v0);else for(var h0=p0.length,r0=gx(p0,h0),_v=0;_v<h0;++_v)r0[_v].call(e0,v0);break;case 3:var w0=_d,f0=My,t0=this,a0=arguments[1],A0=arguments[2];if(f0)w0.call(t0,a0,A0);else for(var Qy=w0.length,l0=gx(w0,Qy),m0=0;m0<Qy;++m0)l0[m0].call(t0,a0,A0);break;case 4:var f0=_d,w0=My,P0=this,O0=arguments[1],f1=arguments[2],i1=arguments[3];if(w0)f0.call(P0,O0,f1,i1);else for(var m1=f0.length,l1=gx(f0,m1),b1=0;b1<m1;++b1)l1[b1].call(P0,O0,f1,i1);break;default:for(ry=new Array(Cy-1),ny=1;ny<Cy;ny++)ry[ny-1]=arguments[ny];var n1=_d,e1=My,R1=this,r1=ry;if(e1)n1.apply(R1,r1);else for(var X1=n1.length,vx=gx(n1,X1),y_=0;y_<X1;++y_)vx[y_].apply(R1,r1)}return!0},M1.prototype.on=M1.prototype.addListener=function(gy,_d){return V2(this,gy,_d,!1)},M1.prototype.prependListener=function(gy,_d){return V2(this,gy,_d,!0)},M1.prototype.once=function(gy,_d){if(typeof _d!="function")throw new TypeError('"listener" argument must be a function');return this.on(gy,DE(this,gy,_d)),this},M1.prototype.prependOnceListener=function(gy,_d){if(typeof _d!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(gy,DE(this,gy,_d)),this},M1.prototype.removeListener=function(gy,_d){var ry,ny,sy,dy,my;if(typeof _d!="function")throw new TypeError('"listener" argument must be a function');if((ny=this._events)&&(ry=ny[gy])){if(ry===_d||ry.listener&&ry.listener===_d)--this._eventsCount==0?this._events=new yx:(delete ny[gy],ny.removeListener&&this.emit("removeListener",gy,ry.listener||_d));else if(typeof ry!="function"){for(sy=-1,dy=ry.length;0<dy--;)if(ry[dy]===_d||ry[dy].listener&&ry[dy].listener===_d){my=ry[dy].listener,sy=dy;break}if(sy<0)return this;if(ry.length===1){if(ry[0]=void 0,--this._eventsCount==0)return this._events=new yx,this;delete ny[gy]}else{for(var Cy=ry,My=sy,Ry=My+1,Fy=Cy.length;Ry<Fy;My+=1,Ry+=1)Cy[My]=Cy[Ry];Cy.pop()}ny.removeListener&&this.emit("removeListener",gy,my||_d)}}return this},M1.prototype.removeAllListeners=function(gy){var _d,ry=this._events;if(ry){if(!ry.removeListener)return arguments.length===0?(this._events=new yx,this._eventsCount=0):ry[gy]&&(--this._eventsCount==0?this._events=new yx:delete ry[gy]),this;if(arguments.length===0){for(var ny,sy=Object.keys(ry),dy=0;dy<sy.length;++dy)(ny=sy[dy])!=="removeListener"&&this.removeAllListeners(ny);return this.removeAllListeners("removeListener"),this._events=new yx,this._eventsCount=0,this}if(typeof(_d=ry[gy])=="function")this.removeListener(gy,_d);else if(_d)for(;this.removeListener(gy,_d[_d.length-1]),_d[0];);}return this},M1.prototype.listeners=function(ry){var _d=this._events,ry=_d&&(_d=_d[ry])?typeof _d=="function"?[_d.listener||_d]:function(ny){for(var sy=new Array(ny.length),dy=0;dy<sy.length;++dy)sy[dy]=ny[dy].listener||ny[dy];return sy}(_d):[];return ry},M1.listenerCount=function(gy,_d){return typeof gy.listenerCount=="function"?gy.listenerCount(_d):H2.call(gy,_d)},M1.prototype.listenerCount=H2,M1.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};function _T(gy,_d,ry){return ry===$2.ObjectType.SEGMENT_START_MARKER?gy===0?MT:null:ry===$2.ObjectType.SEGMENT_FINISH_MARKER?_d.length===1||gy===_d.length-1?IT:null:_d[gy].departure.place.type==="indoor"?VA:CT}var Wx="venues-ui-button--active",s2="venues-ui-button",bT="venues-ui__drawings",zE="data-drawing",UA=function(){function gy(_d,ry,my){var sy=this,dy=(_u(this,gy),this.clickHandler=my,this.containerDiv=document.createElement("div"),this.containerDiv.setAttribute("class",bT),document.createElement("div")),my=(dy.setAttribute("class","trigger ".concat(s2)),document.createElement("div"));my.setAttribute("class","arrow arrow--down"),dy.appendChild(my),dy.addEventListener("click",function(){dy.classList.toggle(Wx),sy.containerButtons.classList.toggle("drawings--open")}),this.containerDiv.appendChild(dy),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","drawings"),this.containerDiv.appendChild(this.containerButtons),ry&&this.update(ry),_d.appendChild(this.containerDiv)}return ty(gy,[{key:"drawButton",value:function(_d,ry,my){var sy=this,dy=document.createElement("div"),my=Number(my)===Number(_d);dy.setAttribute("class",my?"".concat(s2," ").concat(Wx):s2),dy.innerHTML=ry,dy.setAttribute(zE,_d),dy.addEventListener("click",function(){sy.switch(_d),sy.clickHandler(_d)}),this.containerButtons.appendChild(dy)}},{key:"switch",value:function(_d){this.containerButtons.querySelectorAll(".".concat(bT," .").concat(Wx)).forEach(function(ry){return ry.setAttribute("class",s2)}),_d=this.containerButtons.querySelector("[".concat(zE,"='").concat(_d,"']")),_d&&_d.setAttribute("class","".concat(s2," ").concat(Wx))}},{key:"update",value:function(_d){var ry=this,ny=(this.containerButtons.innerHTML="",function(sy){return sy=sy.getDrawings(),new Map(sy.map(function(dy){var my=dy.getDisplayName()||dy.getName();return[dy.getId(),my]}))}(_d));0<ny.size&&ny.forEach(function(sy,dy){return ry.drawButton(dy,sy,_d.getRootDrawing().getId())})}}]),gy}(),FE="venues-ui-button--active",d_="venues-ui-button",xT="data-level",BE="venues-ui__levels",a2=function(){function gy(_d,ry,ny,sy){var dy=4<arguments.length&&arguments[4]!==void 0?arguments[4]:4;_u(this,gy),this.clickHandler=sy,this.levelButtonCount=dy,this.currentScrollIndex=0,this.containerUI=document.createElement("div"),this.containerUI.setAttribute("class","".concat(BE)),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","levels"),this.containerUI.appendChild(this.containerButtons),ry&&this.update(ry,ny),_d.appendChild(this.containerUI)}return ty(gy,[{key:"clear",value:function(){this.containerButtons.innerHTML="",this.buttonScrollUp&&(this.containerUI.removeChild(this.buttonScrollUp),this.buttonScrollUp=null),this.buttonScrollDown&&(this.containerUI.removeChild(this.buttonScrollDown),this.buttonScrollDown=null)}},{key:"drawLevelButton",value:function(_d,ry){var ny=this,sy=document.createElement("div");sy.innerHTML=ry,sy.style.fontSize="".concat(Math.max(Math.min(28.8/ry.length,11.52),10),"px"),sy.style.display="block",sy.setAttribute("class",d_),sy.setAttribute(xT,_d),sy.addEventListener("click",function(){ny.switch(_d),ny.clickHandler(_d)}),this.containerButtons.appendChild(sy)}},{key:"drawScrollButtons",value:function(){var _d=this,ry=(this.buttonScrollUp=document.createElement("div"),this.buttonScrollUp.setAttribute("class","".concat(d_," ").concat(d_,"--up")),document.createElement("div")),ry=(ry.setAttribute("class","arrow arrow--up"),this.buttonScrollUp.appendChild(ry),this.buttonScrollUp.addEventListener("click",function(){return _d.scroll(1)}),this.containerUI.insertBefore(this.buttonScrollUp,this.containerButtons),this.buttonScrollDown=document.createElement("div"),this.buttonScrollDown.setAttribute("class","".concat(d_," ").concat(d_,"--down")),document.createElement("div"));ry.setAttribute("class","arrow arrow--down"),this.buttonScrollDown.appendChild(ry),this.buttonScrollDown.addEventListener("click",function(){return _d.scroll(-1)}),this.containerUI.appendChild(this.buttonScrollDown)}},{key:"scroll",value:function(){var _d,ry,ny=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,sy=Array.from(this.containerButtons.querySelectorAll(".".concat(d_))).reverse(),dy=[];0<=ny?(this.currentScrollIndex=Math.min(this.currentScrollIndex+ny,sy.length-this.levelButtonCount),_d=Math.min(this.currentScrollIndex,sy.length-this.levelButtonCount),ry=Math.min(this.currentScrollIndex+this.levelButtonCount,sy.length),dy=sy.slice(_d,ry)):ny<0&&(this.currentScrollIndex=Math.max(this.currentScrollIndex+ny,0),_d=Math.max(0,this.currentScrollIndex),ry=Math.min(sy.length,this.currentScrollIndex+this.levelButtonCount),dy=sy.slice(_d,ry)),sy.forEach(function(my){dy.indexOf(my)!==-1?my.style.display="block":my.style.display="none"}),this.buttonScrollDown&&(this.currentScrollIndex===0?this.buttonScrollDown.setAttribute("disabled","disabled"):this.buttonScrollDown.removeAttribute("disabled")),this.buttonScrollUp&&(this.currentScrollIndex===sy.length-this.levelButtonCount?this.buttonScrollUp.setAttribute("disabled","disabled"):this.buttonScrollUp.removeAttribute("disabled"))}},{key:"switch",value:function(ny){this.containerButtons.querySelectorAll(".".concat(FE)).forEach(function(sy){return sy.setAttribute("class",d_)});var ry,ny=this.containerButtons.querySelector(".".concat(BE," [").concat(xT,"='").concat(ny,"']"));ny&&(ry=Array.from(this.containerButtons.querySelectorAll(".".concat(d_))).reverse(),ny.setAttribute("class","".concat(d_," ").concat(FE)),((ry=ry.indexOf(ny))<this.currentScrollIndex||ry>=this.currentScrollIndex+4)&&this.scroll(ry-this.currentScrollIndex))}},{key:"update",value:function(_d,dy){var ny,sy=this,dy=function(){return new Map((0<arguments.length&&arguments[0]!==void 0?arguments[0]:[]).map(function(Cy){return[Cy.getZIndex(),Cy.getShortName()||Cy.getDisplayName()||Cy.getName()]}))}((ny=_d,((dy=dy)===o2.FLATTEN?(dy=ny.getVenueModel().getLevelMapFlattenedByZIndex_(),Object.values(dy).map(function(Cy){return Cy[0]})):ny.getLevels()).sort(function(Cy,My){return My.getZIndex()-Cy.getZIndex()}))),my=_d.getMainLevel().getZIndex();this.clear(),dy.forEach(function(Cy,My){return sy.drawLevelButton(My,Cy)}),dy.size>this.levelButtonCount&&(dy.size>this.levelButtonCount+1?this.currentScrollIndex=Math.min(Array.from(dy).reverse().findIndex(function(Cy){return Cy[0]===my}),dy.size-this.levelButtonCount):this.currentScrollIndex=0,this.drawScrollButtons(),this.scroll(0)),this.switch(my)}}]),gy}(),l2=function(){function gy(_d,ry){_u(this,gy),this.baseTheme=_d,this.metaInformation=ry,this.labelStyleMap={},this.styleMap={},this.setStyleMap()}return ty(gy,[{key:"setStyleMap",value:function(){this.styleMap.ENTRANCE=this.baseTheme.entranceRules.default.styleProperties,this.labelStyleMap.ENTRANCE=this.baseTheme.entranceRules.default.textLabelStyleProperties;for(var _d=0,ry=Object.entries(this.baseTheme.spaceRules);_d<ry.length;_d++){var sy=Iy(ry[_d],2),ny=sy[0],sy=sy[1],dy=sy.properties.behavioralAppearance.default.styleProperties,my=sy.properties.behavioralAppearance.default.textLabelStyleProperties;if(this.styleMap[ny]=dy,this.labelStyleMap[ny]=my,sy.spaceTypes)for(var Cy=0,My=Object.entries(sy.spaceTypes);Cy<My.length;Cy++){var Vy=Iy(My[Cy],2),Ry=Vy[0],Vy=Vy[1],Fy=Vy.behavioralAppearance.default.styleProperties,Vy=Vy.behavioralAppearance.default.textLabelStyleProperties;this.styleMap["".concat(ny,"_").concat(Ry)]=Fy&&Object.keys(Fy)!==0?Fy:dy,this.labelStyleMap["".concat(ny,"_").concat(Ry)]=Vy&&Object.keys(Vy)!==0?Vy:my}}}},{key:"getBaseTheme",value:function(){return this.baseTheme}},{key:"getStyleMap",value:function(){return this.styleMap}},{key:"getGeometryStyle",value:function(_d){return this.styleMap&&Object.getOwnPropertyNames(this.styleMap)?this.styleMap[_d]:null}},{key:"getLabelStyle",value:function(_d){return this.labelStyleMap&&Object.getOwnPropertyNames(this.labelStyleMap)?this.labelStyleMap[_d]:null}}],[{key:"getGeometryDefaultStyle",value:function(){return{fill:"#e5e5e5",fillOpacity:1,stroke:"#6c7a89",strokeOpacity:1,strokeWidth:2}}},{key:"getLabelDefaultStyle",value:function(){return{stroke:"#6c7a89",zmin:15}}}]),gy}(),u2=function(){function gy(){_u(this,gy),this.config=Object.seal({emitEventOnOverrideUpdate:!0}),this.imageCache={},this.releaseSettings_={displayOptions:{},mom:[]},this.theme={}}return ty(gy,[{key:"getMomData",value:function(){return this.releaseSettings_.mom}},{key:"getTheme",value:function(){return this.theme||{}}},{key:"getStyle",value:function(my){var ry=1<arguments.length&&arguments[1]!==void 0&&arguments[1],ny=this.getTheme(),sy=l2.getGeometryDefaultStyle(),dy=my.properties.spaceType,my=my.properties.spaceCategory,Cy=my;return dy&&(Cy="".concat(my,"_").concat(dy)),{m:(my=(my=ny.getGeometryStyle(Cy))&&!ry?my:sy).fill&&my.fill.toLowerCase()||"#fff",w:my.strokeWidth/10||.1,o:my.stroke&&my.stroke.toLowerCase()||"#fff",l:"Dark"}}},{key:"getLabelStyle",value:function(_d){this.getTheme();var ry=l2.getLabelDefaultStyle();return{fill:ry.stroke,zmin:ry.zmin}}}]),gy}(),ox=Math.PI/180,wT=180/Math.PI,O_=function(){function gy(){_u(this,gy)}return ty(gy,null,[{key:"toRadians",value:function(_d){return _d*ox}},{key:"toDegrees",value:function(_d){return _d*wT}},{key:"getBoundingBox",value:function(_d,ry){var ny=[];switch(_d){case IE:ny=[ry,ry];break;case LE:case OE:ny=ry;break;case PE:case RE:ny=ry.reduce(function(sy,dy){return sy.concat(dy)},[]);break;case B2:ny=ry.reduce(function(sy,dy){return sy.concat(dy)},[]).reduce(function(sy,dy){return sy.concat(dy)},[])}return gy.getBoundingBoxVertices(ny)}},{key:"getInverseTransform",value:function(_d){var ry=_d[0]*_d[3]-_d[1]*_d[2],ry=[_d[3]/ry,-_d[1]/ry,-_d[2]/ry,_d[0]/ry,0,0];return ry[4]=-(ry[0]*_d[4]+ry[2]*_d[5]),ry[5]=-(ry[1]*_d[4]+ry[3]*_d[5]),ry}},{key:"applyTransformToPoint",value:function(_d,ry){return[ry[0]*_d[0]+ry[1]*_d[2]+_d[4],ry[0]*_d[1]+ry[1]*_d[3]+_d[5]]}},{key:"transformProduct",value:function(_d,ry){var ny=[0,0,0,0,0,0];return ny[0]=ry[0]*_d[0]+ry[2]*_d[1],ny[1]=ry[1]*_d[0]+ry[3]*_d[1],ny[2]=ry[0]*_d[2]+ry[2]*_d[3],ny[3]=ry[1]*_d[2]+ry[3]*_d[3],ny[4]=ry[0]*_d[4]+ry[2]*_d[5]+ry[4],ny[5]=ry[1]*_d[4]+ry[3]*_d[5]+ry[5],ny}},{key:"convertLonLatToMerc",value:function(ny){var ry=ny[0]*ox,ny=ny[1]*ox,ny=Math.sin(ny);return[.5+ry/(2*Math.PI),.5-Math.log((1+ny)/(1-ny))/(4*Math.PI)]}},{key:"convertMercToLatLon",value:function(ny){var ry=2*Math.PI*(ny[0]-.5),ny=Math.atan(Math.sinh(2*Math.PI*(.5-ny[1])));return[ry/ox,ny/ox]}},{key:"getTransformScale",value:function(_d){return Math.sqrt(_d[0]*_d[3]-_d[1]*_d[2])}},{key:"getLonLatToMercTransform",value:function(sy){var ry=[.002777777777777778,0,0,-1/(360*Math.cos(sy[1]*ox)),0,0],ny=gy.applyTransformToPoint(ry,sy),sy=gy.convertLonLatToMerc(sy);return ry[4]=sy[0]-ny[0],ry[5]=sy[1]-ny[1],ry}},{key:"getNatToMercTransform",value:function(_d){var ry=[_d[4],_d[5]],ry=gy.getLonLatToMercTransform(ry);return gy.transformProduct(_d,ry)}},{key:"convertMxMy2LonLat",value:function(_d,ry){return _d.length&&ry.length?gy.applyTransformToPoint(_d,ry):[]}},{key:"convertLonLat2MxMy",value:function(_d,ry){return!_d.length||!ry.length?[]:(_d=gy.getInverseTransform(_d),gy.applyTransformToPoint(_d,ry))}},{key:"getFlattenedQuadraticBezierCurve",value:function(_d,ry,ny){var sy=[],dy=3<arguments.length&&arguments[3]!==void 0?arguments[3]:10;dy<1&&(dy=6);for(var my=0;my<=dy;my+=1){var My=my/dy,Fy=(1-My)*(1-My),Cy=2*My*(1-My),My=My*My,Ry=Fy*_d[0]+Cy*ry[0]+My*ny[0],Fy=Fy*_d[1]+Cy*ry[1]+My*ny[1];sy.push([Ry,Fy])}return sy}},{key:"getFlattenedCubicBezierCurve",value:function(_d,ry,ny,sy){var dy=[],my=4<arguments.length&&arguments[4]!==void 0?arguments[4]:10;my<1&&(my=6);for(var Cy=0;Cy<=my;Cy+=1){var Fy=Cy/my,Hy=(1-Fy)*(1-Fy)*(1-Fy),My=3*Fy*(1-Fy)*(1-Fy),Ry=3*Fy*Fy*(1-Fy),Fy=Fy*Fy*Fy,Vy=Hy*_d[0]+My*ry[0]+Ry*ny[0]+Fy*sy[0],Hy=Hy*_d[1]+My*ry[1]+Ry*ny[1]+Fy*sy[1];dy.push([Vy,Hy])}return dy}},{key:"getRectangularCoordinatesOfLabelArea",value:function(Fy,ry){var ny=!(2<arguments.length&&arguments[2]!==void 0)||arguments[2],My=Iy(Fy,6),sy=My[0],dy=My[1],my=My[2],Cy=My[3],My=My[5],Ry=gy.getDeltaLonLatForMeterAtGivenLonLat(sy,dy),Fy=Fy[4];return ny?(My&&(Fy*=-1),ry!=null&&(Fy=(Fy+=ry<0?2*Math.PI+ry:ry)<0?2*Math.PI+Fy:Fy)):Fy=0,gy.getRectVerticesFromSignatureRectRepresentation([sy,dy],{xLength:my,yLength:Cy},Fy,Ry)}},{key:"getRotatedPoint",value:function(My,my){var ny=!(2<arguments.length&&arguments[2]!==void 0)||arguments[2],sy=3<arguments.length&&arguments[3]!==void 0?arguments[3]:[0,0],dy=Math.cos(my),my=Math.sin(my),Cy=My[0]-sy[0],My=My[1]-sy[1],Ry=[];return[(Ry=ny?[Cy*dy+My*my,My*dy-Cy*my]:[Cy*dy-My*my,My*dy+Cy*my])[0]+sy[0],Ry[1]+sy[1]]}},{key:"getRectVerticesFromSignatureRectRepresentation",value:function(Hy,my,ny,sy){var dy=my.xLength,my=my.yLength,Cy=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],Hy=Iy(Hy,2),My=Hy[0],Ry=Hy[1],Fy=dy/2,Vy=my/2,Hy=Iy(sy,2),p0=Hy[0],d0=Hy[1];return[[1,1],[-1,1],[-1,-1],[1,-1]].map(function(e0){return[e0[0]*Fy,e0[1]*Vy]}).map(function(e0){return gy.getRotatedPoint(e0,ny,Cy)}).map(function(e0){return[e0[0]*p0,e0[1]*d0]}).map(function(e0){return[e0[0]+My,e0[1]+Ry]})}},{key:"getScaleFactorForRectInSpace",value:function(_d,ry,ny,sy){return _d/=ny,ny=ry/sy,ny<_d?ny:_d}},{key:"getDeltaLonLatForMeterAtGivenLonLat",value:function(_d,ry){return[1/6371e3*(180/Math.PI)/Math.cos(ry*Math.PI/180),1/6371e3*(180/Math.PI)]}},{key:"getBoundingBoxVertices",value:function(){var _d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],ry=[[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]];return _d.reduce(function(ny,sy){return[[Math.min(sy[0],ny[0][0]),Math.min(sy[1],ny[0][1])],[Math.max(sy[0],ny[1][0]),Math.max(sy[1],ny[1][1])]]},ry)}},{key:"isPointInBoundingBox",value:function(_d,ry){var ny,sy,dy,my;if(_d&&ry)return _d=Iy(_d,2),ny=_d[0],_d=_d[1],ry=Iy(ry,2),dy=Iy(ry[0],2),sy=dy[0],dy=dy[1],ry=Iy(ry[1],2),my=ry[0],ry=ry[1],ny<=my&&sy<=ny&&_d<=ry&&dy<=_d}},{key:"isPointOnLineSegment",value:function(dy,Cy,Ry){var dy=Iy(dy,2),sy=dy[0],dy=dy[1],Cy=Iy(Cy,2),my=Cy[0],Cy=Cy[1],Ry=Iy(Ry,2),My=Ry[0],Ry=Ry[1],Fy=(Cy-dy)*(Ry-dy)<=0;return my===My?my===sy&&Fy:dy-Ry==(Ry-Cy)/(My-my)*(sy-My)&&Fy}},{key:"rayIntersectLineSegment",value:function(dy,Cy,Ry){var dy=Iy(dy,2),sy=dy[0],dy=dy[1],Cy=Iy(Cy,2),my=Cy[0],Cy=Cy[1],Ry=Iy(Ry,2),My=Ry[0],Ry=Ry[1];return my===My?!1:(sy=(sy-my)/(My-my),0<=sy&&sy<1&&dy<(Ry-Cy)*sy+Cy)}},{key:"isPointInPolygon",value:function(dy,ry){var dy=Iy(dy,2),ny=dy[0],sy=dy[1],dy=ry.length;if(dy<3)return!1;var my=0,Cy=ry[dy-1];return ry.forEach(function(My){gy.rayIntersectLineSegment([ny,sy],Cy,My)&&(my+=1),Cy=My}),my%2!=0}},{key:"isPointOnLineString",value:function(ny,ry){var ny=Iy(ny,2),sy=ny[0],dy=ny[1],my=ry.length;if(!(my<2))for(var Cy=ry[my-1],My=0;My<my;My+=1){var Ry=ry[My];if(gy.isPointOnLineSegment([sy,dy],Cy,Ry))return!0;Cy=ry[My]}return!1}},{key:"getAreaOfPolygon",value:function(_d){var ry=_d.length;if(ry<3)return null;var ny=0,sy=_d[ry-1];return _d.forEach(function(dy){var my,Cy,My,Ry;ny+=.5*(Cy=dy,my=Iy(my=sy,2),My=my[0],my=my[1],Cy=Iy(Cy,2),Ry=Cy[0],My*Cy[1]-my*Ry),sy=dy}),ny}},{key:"getDistanceBetweenPoints",value:function(dy,ny){var dy=Iy(dy,2),sy=dy[0],dy=dy[1],ny=Iy(ny,2),sy=sy-ny[0],dy=dy-ny[1];return Math.sqrt(sy*sy+dy*dy)}}]),gy}(),ET=function(){function gy(){_u(this,gy),this.spaceRules={}}return ty(gy,null,[{key:"getDataEntriesOne",value:function(sy,ry){var ny,sy=[sy,""];return ry!==null&&Array.isArray(ry)?sy[1]=ry.toString():ry!==null&&_o(ry)==="object"?0<(ny=Object.entries(ry)).length&&(ny=this.getDataEntriesOne(ny[0][0],ny[0][1]),sy[0]="".concat(sy[0],".").concat(ny[0]),sy[1]=ny[1]):sy[1]=ry,sy}},{key:"getDataEntriesAll",value:function(_d){for(var ry=[],ny=0,sy=Object.entries(_d);ny<sy.length;ny++){var dy=Iy(sy[ny],2),my=dy[0],dy=dy[1],my=this.getDataEntriesOne(my,dy);ry.push(my)}return ry}},{key:"doFindComboMatch",value:function(_d,ry){var ny="";if(_d&&_d.configuration&&_d.configuration.combinations)for(var sy=this.getDataEntriesAll(ry),ry=Object.entries(_d.configuration.combinations),dy=0,my=0,Cy=ry;my<Cy.length;my++)(function(){var Ry=Cy[my],Fy=Object.keys(Ry[1]).filter(function(Vy){return sy.some(function(Hy){return Vy===Hy[0]&&Ry[1][Vy]===Hy[1]})});Fy.length===Object.keys(Ry[1]).length&&Fy.length>dy&&(ny=Ry[0],dy=Fy.length)})();return ny}},{key:"getIconFromCombinations",value:function(_d,ry){if(_d&&_d.configuration.combinations&&ry&&0<Object.keys(ry).length&&_d.behavioralAppearance.combinations&&0<Object.keys(_d.behavioralAppearance.combinations).length){if(ry=this.doFindComboMatch(_d,ry),ry===""||!_d.behavioralAppearance.combinations[ry].labelIcon)return"";if(_d.behavioralAppearance.combinations&&_d.behavioralAppearance.combinations[ry]&&_d.behavioralAppearance.combinations[ry].labelIcon)return _d.behavioralAppearance.combinations[ry].labelIcon.referenceUri}return""}},{key:"findSpace",value:function(_d,ry){if(ry.spaceTypes&&ry.spaceTypes[_d])return ry.spaceTypes[_d]}},{key:"findCategory",value:function(_d){if(this.spaceRules[_d])return this.spaceRules[_d]}},{key:"setSpaceRules",value:function(_d){this.spaceRules=_d}},{key:"getSpaceIcon",value:function(_d,my,ny){var sy,dy="",my=this.findCategory(my);return my&&(_d=this.findSpace(_d,my))&&(sy="",(sy=ny?this.getIconFromCombinations(_d,ny):sy)&&sy!==""?dy=sy:_d.behavioralAppearance.default.labelIcon?dy=_d.behavioralAppearance.default.labelIcon.referenceUri:my.properties.behavioralAppearance.default.labelIcon&&(dy=my.properties.behavioralAppearance.default.labelIcon.referenceUri)),dy}}]),gy}(),__=function(){function gy(){_u(this,gy),this.themeRule={},this.svgList={},this.defaultLang="ENG"}return ty(gy,null,[{key:"getNumberFromAlphaNumeric",value:function(_d){try{var ry=_d.split("").reverse().join("").replace(/[^0-9]/g,"").substr(0,6);return parseInt(ry,10)}catch{return null}}},{key:"extractNumFromSting",value:function(_d){try{var ry=_d.replace(/[^0-9]/g,"");return parseInt(ry,10)}catch{return console.warn("Exception in converting string to Id"),this.getNumberFromAlphaNumeric(_d)}}},{key:"getVenueId",value:function(_d){var ry;return typeof _d!="number"?(ry=_d.substr(_d.length-6),parseInt(ry,10)):_d}},{key:"getStringFormatIdentifier",value:function(_d){return typeof _d=="number"||_d.length<13?"indoormap-00000000-0000-4000-a000-".concat(_d.toString().padStart(12,"0")):_d}},{key:"setSite",value:function(sy,ry){var ny=this.getName(sy),sy={id:this.getStringFormatIdentifier(ry),location:sy.referencePoint,properties:sy.properties,geometry:sy.geometry,map_version:sy.properties.indoorSiteMetadata.legacyVersion.mapVersion,identifier:this.getVenueId(ry),obj_type:"CommunityMap"};return sy.properties.name=ny,sy.properties.display_name=ny,sy}},{key:"setEntrance",value:function(_d){var ry=this.themeRule.entranceRules.default.labelIcon.referenceUri,ny=this.extractNumFromSting(_d.id),sy=this.getName(_d),dy=_d.properties;return dy.icon=!0,dy.svg=this.svgList[ry.toLowerCase()],dy.name=sy||"entrance",dy.display_name=sy||"entrance",dy.level={id:_d.properties.level.id},{id:_d.id,levelId:_d.properties.level.id,momType:yT,geometry:_d.geometry,location:_d.geometry,properties:dy,identifier:ny,label_area:[_d.referencePoint.coordinates[0],_d.referencePoint.coordinates[1],50,50,180]}}},{key:"setStructure",value:function(_d){var ry=this.extractNumFromSting(_d.id),ny=this.getName(_d),sy=_d.properties;return sy.is_root=_d.properties.drawOrder===0,sy.display_name=ny,sy.map_type=_d.properties.structureType,sy.name=ny,{id:_d.id,obj_type:"Drawing",identifier:ry,properties:sy}}},{key:"getNameByPriority",value:function(_d,ry){for(var ny,sy=this,dy="",my=0;my<_d.length;my++){var Cy=_d[my];if(((ny=Cy).nameType==="OFFICIAL"&&ny.languageCode&&ny.languageCode===sy.defaultLang||ny.nameType==="OFFICIAL")&&(ry&&ry===Cy.nameType||!ry)){dy=Cy.name;break}if(Cy.nameType==="ABBREVIATION"&&(ry&&ry===Cy.nameType||!ry)){dy=Cy.name;break}if(Cy.nameType==="UNCLASSIFIED"&&(ry&&ry===Cy.nameType||!ry)){dy=Cy.name;break}if(!Cy.nameType&&Cy.name){dy=Cy.name;break}}return dy}},{key:"getName",value:function(_d,ry){return _d.properties&&_d.properties.names?this.getNameByPriority(_d.properties.names,ry):_d.properties.placeProperties&&_d.properties.placeProperties&&_d.properties.placeProperties.names?this.getNameByPriority(_d.properties.placeProperties.names,ry):_d.properties.locationDetails&&_d.properties.locationDetails[0]&&_d.properties.locationDetails[0].names?this.getNameByPriority(_d.properties.locationDetails[0].names,ry):""}},{key:"setLevel",value:function(_d){var ry=this.extractNumFromSting(_d.id),ny=_d.properties.names,sy=_d.properties;return sy["short name"]=this.getNameByPriority(ny,ny&&ny.length!==1?"ABBREVIATION":""),sy.name=this.getNameByPriority(ny,ny&&ny.length!==1?"ABBREVIATION":""),{id:_d.id,obj_type:"Level",identifier:ry,properties:sy}}},{key:"setLevelConnector",value:function(_d){var ry=this.extractNumFromSting(_d.id);return{id:_d.id,obj_type:"LevelConnector",properties:_d.properties,geometry:_d.geometry,identifier:ry,location:_d.geometry}}},{key:"setOccupant",value:function(_d){var ry=this.getName(_d),ny=this.extractNumFromSting(_d.id),sy=_d.properties;return sy.occupantName=ry,sy.email=_d.properties.placeProperties&&_d.properties.placeProperties.contacts&&_d.properties.placeProperties.contacts.find(function(dy){return dy.contactType==="EMAIL"})&&_d.properties.placeProperties.contacts.find(function(dy){return dy.contactType==="EMAIL"}).value,sy.name=ry,sy.tags=_d.properties.attributes&&_d.properties.attributes.tags,{geometry:_d.geometry,id:_d.id,obj_type:"Geometry",properties:sy,identifier:ny,spaceIds:_d.properties.spaces||[],type:"Feature",momType:pT}}},{key:"getIcon",value:function(_d){var ry=!1,ny="";return this.svgList[_d]&&(ry=!0,ny=this.svgList[_d]),{icon:ry,svg:ny}}},{key:"setSpace",value:function(_d){var ny=ET.getSpaceIcon(_d.properties.spaceType,_d.properties.spaceCategory,_d.properties.spaceTypeProperties),Cy=this.getName(_d),ny=this.getIcon(ny),ry=ny.icon,ny=ny.svg,sy=this.extractNumFromSting(_d.id),dy=(_d.properties.level.id.includes("out"),_d.properties.level.id),my=_d.properties,Cy=(my.spaceName=Cy,my[_d.properties.spaceCategory]=_d.properties.spaceType,my.spaceType=_d.properties.spaceType,my.spaceCategory=_d.properties.spaceCategory,my.icon=ry,my.svg=ny,{geometry:_d.geometry,id:_d.id,levelId:dy,label_area:[_d.referencePoint.coordinates[0],_d.referencePoint.coordinates[1],50,50,180],location:_d.referencePoint,obj_type:"Geometry",identifier:sy,properties:my,momType:CE,type:"Feature"});return _d.properties.spaceAddress&&_d.properties.spaceAddress.id&&(Cy.addressId=_d.properties.spaceAddress.id),Cy}},{key:"setSpaceGroups",value:function(_d){var ry=this.extractNumFromSting(_d.id);return{id:_d.id,obj_type:"SpaceGroups",properties:_d.properties,geometry:_d.geometry,location:_d.referencePoint,identifier:ry}}},{key:"setTopology",value:function(_d){var ry=this.extractNumFromSting(_d.id);return{id:_d.id,obj_type:"Topology",properties:_d.properties,geometry:_d.geometry,identifier:ry}}},{key:"setAddress",value:function(_d){var ry=this.extractNumFromSting(_d.id),ny=this.getName(_d),sy=_d.properties;return sy.addressName=ny,sy.name=ny,{id:_d.id,properties:sy,obj_type:"Address",identifier:ry}}},{key:"manageSvgDimensions",value:function(_d){for(var ry={},ny=0,sy=Object.entries(_d);ny<sy.length;ny++){var dy,my,My=Iy(sy[ny],2),Cy=My[0],My=My[1];typeof My=="string"&&(dy=My.indexOf("<g")!==-1&&My.indexOf("<g")||My.indexOf("<p"),my=My.indexOf("</s"),dy&&my&&(My=My.substring(dy-1,my-1),ry[Cy]="<svg width='64' height='64' viewBox='0 0 24 32' fill='none' xmlns='http://www.w3.org/2000/svg'>".concat(My,"</svg>")))}return ry}},{key:"getSiteBoundingBox",value:function(_d){if(_d){var _d=Iy(O_.getBoundingBox(_d.geometry.type,_d.geometry.coordinates),2),ry=_d[0],_d=_d[1];if(ry)return"".concat(ry[0],",").concat(ry[1],",").concat(_d[0],",").concat(_d[1])}return"null, null, null, null"}}]),gy}(),Yx=function(){function gy(){_u(this,gy)}return ty(gy,null,[{key:"get",value:function(_d){return fetch(_d,1<arguments.length&&arguments[1]!==void 0?arguments[1]:{method:"GET"}).then(function(ry){return ry.ok?ry.json():Promise.reject(new Error("Call failed for ".concat(_d," : ").concat(ry.status," ").concat(ry.statusText)))})}},{key:"getFormattedIndoorMapId",value:function(_d){return typeof _d=="number"?"indoormap-00000000-0000-4000-a000-".concat(_d.toString().padStart(12,"0")):_d.includes("indoormap")?_d:"indoormap-00000000-0000-4000-a000-".concat(_d.padStart(12,"0"))}},{key:"getConfigUrl",value:function(_d,ry,My){var sy=My.apiKey,Cy=My.url,dy=My.token,My=My.hrn,my={method:"GET",mode:"cors",cache:"default"},Cy="".concat(Cy||$x,"/").concat(My),My="";return ry===dx.SITE&&(My="".concat(Cy,"/layers/").concat(vT,"/search?p.featureType=indoor.Site&p.indoorMapId='").concat(this.getFormattedIndoorMapId(_d),"'")),ry===dx.IMAGES&&(My="".concat(Cy,"/layers/").concat(mT,"/features/svg")),ry===dx.Theme&&(My="".concat(Cy,"/layers/").concat(BA,"/features/indoorMapRules")),dy?my.headers={Authorization:"Bearer ".concat(dy)}:My=My.concat("".concat(ry===dx.SITE?"&":"?","apiKey=").concat(sy)),this.get(My,my)}},{key:"getMomData",value:function(Cy,my){var ny=my.apiKey,My=my.url,sy=my.token,my=my.hrn,dy={method:"GET",mode:"cors",cache:"default"},My="".concat(My||$x,"/").concat(my),my=Cy&&Cy.features&&Cy.features.find(function(Ry){return Ry.momType===SE}),Cy=__.getSiteBoundingBox(my),My="".concat(My,"/layers/").concat(vT,"/bbox?bbox=").concat(Cy,"&f.momType=indoor.Level,indoor.Space,indoor.Site,indoor.Structure,indoor.Occupant,indoor.SpaceGroups,Address,indoor.Entrance");return sy?dy.headers={Authorization:"Bearer ".concat(sy)}:My=My.concat("&apiKey=".concat(ny)),{mom:this.get(My,dy),site:my}}},{key:"getDefaultCollection",value:function(ry){var ry=ry.token,sy=U2[Ox.DEFAULT_COLLECTION],ny=sy.PARAMS,sy=sy.BASE_URL,sy=encodeURI("".concat(sy,"?sortBy=").concat(ny.CREATED_BY,"&q=").concat(ny.COLLECTION));return ry?(ny={method:"GET",headers:{Authorization:"Bearer ".concat(ry)}},this.get(sy,ny)):Promise.reject(new Error("Please provide valid token"))}},{key:"getProjectAccountDetails",value:function(ry){var ry=ry.token,ny=U2[Ox.ACCOUNT_API].BASE_URL;return ry?(ry={method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(ry)}},this.get(ny,ry)):Promise.reject(new Error("Please provide valid token"))}},{key:"fetchIndoorMapList",value:function(){var _d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},ry=_d.hrn,dy=_d.url,sy=U2[Ox.CATALOG_LAYER],ny=sy.PARAMS,sy=sy.COLLECTION_LAYER,dy=dy||$x;return ry?(dy=encodeURI("".concat(dy,"/").concat(ry,"/").concat(sy,"?").concat(ny.FEATURE_TYPE.KEY,"=").concat(ny.FEATURE_TYPE.VALUE)),sy=(ry=this.createBaseUrl(dy,G2.GET,{},_d)).URL,ny=ry.options,this.get(sy,ny)):Promise.reject(new Error("Please provide valid hrn"))}},{key:"createBaseUrl",value:function(){var _d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",my=1<arguments.length&&arguments[1]!==void 0?arguments[1]:G2.GET,ry=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},sy=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},ny=sy.token,sy=sy.apiKey,dy=_d,my={method:my,mode:"cors"};return ny?my.headers=_e({Authorization:"Bearer ".concat(ny)},ry):dy=_d.concat("&apiKey=".concat(sy)),{URL:dy,options:my}}}]),gy}(),Rx=function(){function gy(){_u(this,gy)}return ty(gy,null,[{key:"isPointOnGeoJSONLineString",value:function(_d,ry){var ny=!1;if(ry&&1<ry.length){for(var sy,dy,my=1;my<ry.length;my+=1)if(sy=ry[my-1],dy=ry[my],O_.isPointOnLineSegment(_d,sy,dy)){ny=!0;break}}return ny}},{key:"isPointOnGeoJSONMultiLineString",value:function(_d,ry){for(var ny=!1,sy=0;sy<ry.length;sy+=1)if(gy.isPointOnGeoJSONLineString(_d,ry[sy])){ny=!0;break}return ny}},{key:"isPointInsideGeoJSONPolygon",value:function(_d,ry){var ny=!1;if(ny=O_.isPointInPolygon(_d,ry[0])?!0:ny){for(var sy=1;sy<ry.length;sy+=1)if(O_.isPointInPolygon(_d,ry[sy])){ny=!1;break}}return ny}},{key:"isPointInsideGeoJSONMultiPolygon",value:function(_d,ry){for(var ny=ry.length,sy=0;sy<ny;sy+=1)if(gy.isPointInsideGeoJSONPolygon(_d,ry[sy]))return!0;return!1}},{key:"getGeometriesByLonLat",value:function(_d,ry){for(var ny=2<arguments.length&&arguments[2]!==void 0&&arguments[2],sy=[],dy=ry.filter(function(My){return O_.isPointInBoundingBox(_d,My.getBoundingBox())}),my=0;my<dy.length;my+=1){var Cy=dy[my];if(Cy.isPointInsideGeometry(_d,!0)&&(sy.push(Cy),!ny))break}return sy.sort(function(My,Ry){return Ry.getZIndex()-My.getZIndex()})}}]),gy}(),UE=function(){function gy(){var _d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},ry=1<arguments.length?arguments[1]:void 0,ny=2<arguments.length?arguments[2]:void 0;_u(this,gy),this.id=_d.id,this.properties=_d.properties||{},this.labelArea=_d.label_area||[],this.geometry=_d.geometry||{},this.location=_d.location||{},this.address=_d.address||{},this.level=ry,this.zIndex=ny,this.spaceId=_d.spaceId,this.state_={isHighlighted:!1,highlightedStyle:{}},this.geometryData=_d}return ty(gy,[{key:"getId",value:function(){return this.geometryData&&this.geometryData.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getInternalAddress",value:function(){return this.address?this.address.properties&&this.address.properties.name:null}},{key:"getCenter",value:function(){return this.location.coordinates||[]}},{key:"getCoordinates",value:function(){return this.geometry.coordinates||[]}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getStyle",value:function(){return this.getMetaInformation_().getStyle(this)}},{key:"getIcon",value:function(){return this.properties.svg}},{key:"getLabelArea",value:function(){return this.labelArea||[]}},{key:"getLabelStyle",value:function(){return this.getMetaInformation_().getLabelStyle(this)||null}},{key:"getLevel",value:function(){return this.level}},{key:"getType",value:function(){return this.geometry.type}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"getBoundingBox",value:function(){var _d=this.getType(),ry=this.getCoordinates(),ny=[];switch(_d){case IE:ny=[ry,ry];break;case LE:case OE:ny=ry;break;case PE:case RE:ny=ry.reduce(function(sy,dy){return sy.concat(dy)},[]);break;case B2:ny=ry.reduce(function(sy,dy){return sy.concat(dy)},[]).reduce(function(sy,dy){return sy.concat(dy)},[])}return O_.getBoundingBoxVertices(ny)}},{key:"isIcon",value:function(){return!!this.properties.icon}},{key:"isPointInsideGeometry",value:function(_d){var ry,ny=1<arguments.length&&arguments[1]!==void 0&&arguments[1],sy=!1;switch(this.getType()){case IE:ry=this.getLabelArea()&&O_.getRectangularCoordinatesOfLabelArea(this.getLabelArea()),sy=O_.isPointInPolygon(_d,ry);break;case LE:break;case OE:sy=ny&&Rx.isPointOnGeoJSONLineString(_d,this.getCoordinates());break;case PE:sy=ny&&Rx.isPointOnGeoJSONMultiLineString(_d,this.getCoordinates());break;case RE:sy=Rx.isPointInsideGeoJSONPolygon(_d,this.getCoordinates());break;case B2:sy=Rx.isPointInsideGeoJSONMultiPolygon(_d,this.getCoordinates())}return sy}},{key:"highlight",value:function(){var _d=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],ry=1<arguments.length?arguments[1]:void 0;this.state_.isHighlighted=_d,this.state_.highlightedStyle=_d?ry:{}}},{key:"isHighlighted",value:function(){return!!this.state_.isHighlighted}},{key:"getHighlightedStyle",value:function(){return this.state_.highlightedStyle||{}}},{key:"toJSON",value:function(){return _e({},this.geometry)}},{key:"getMetaInformation_",value:function(){return this.getLevel()?this.getLevel().getDrawing().getVenueModel().metaInformation_:null}}]),gy}(),GE=function(){function gy(_d,ry){var ny=this;_u(this,gy),this.id=_d&&_d.id,this.properties=_d&&_d.properties,this.zIndexCount=0,this.geometries=_d&&_d.features&&Object.values(_d.features).reduce(function(sy,dy){return sy[[dy.id]]=new UE(dy,ny,dy.properties.drawOrder),sy},{}),this.drawing=ry,this.levelData=_d}return ty(gy,[{key:"getId",value:function(){return this.levelData&&this.levelData.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getName",value:function(){return this.properties&&this.properties.name||""}},{key:"getDisplayName",value:function(){return this.properties&&this.properties.display_name||""}},{key:"getDrawing",value:function(){return this.drawing}},{key:"getShortName",value:function(){return this.properties&&this.properties["short name"]||""}},{key:"getZIndex",value:function(){return this.properties&&this.properties.zLevel}},{key:"getFeatureCollectionArray",value:function(){return this.getGeometries().map(function(_d){return _d.toJSON()})}},{key:"getGeometryById",value:function(_d){return this.geometries[_d]}},{key:"getGeometries",value:function(){return 0<arguments.length&&arguments[0]!==void 0&&arguments[0]?this.geometries&&Object.values(this.geometries).sort(function(_d,ry){return ry.getZIndex()-_d.getZIndex()}):this.geometries&&Object.values(this.geometries).sort(function(_d,ry){return _d.getZIndex()-ry.getZIndex()})}},{key:"getGeometriesByAddress",value:function(_d){return Object.values(this.geometries).filter(function(ry){return ry.address&&ry.address.properties&&ry.address.properties.name&&ry.address.properties.name===_d})}},{key:"isMain",value:function(){return!!this.properties.isMain}}]),gy}(),kT=function(){function gy(_d){var ry=this,ny=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},sy=2<arguments.length&&arguments[2]!==void 0?arguments[2]:[],dy=3<arguments.length?arguments[3]:void 0;_u(this,gy),this.venueModel=dy,this.levels=sy.map(function(my){return new GE(my,ry)}),this.structure=_d,this.id=_d&&_d.id,this.properties=ny}return ty(gy,[{key:"getId",value:function(){return this.structure&&this.structure&&this.structure.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"isRoot",value:function(){return!!this.properties.is_root}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getBoundingBox",value:function(){if(this.structure&&this.structure.geometry){var ry=Iy(O_.getBoundingBox(this.structure.geometry.type,this.structure.geometry.coordinates),2),_d=ry[0],ry=ry[1];if(_d)return[ry[1],_d[0],_d[1],ry[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.structure&&this.structure.location&&this.structure.location.coordinates}},{key:"getGeometryById",value:function(_d){return this.getGeometries().find(function(ry){return ry.getId()===_d||ry.getIdentifier()===_d})}},{key:"getGeometries",value:function(){return this.levels.flatMap(function(_d){return _d.getGeometries()})}},{key:"getLevelById",value:function(_d){return this.levels.find(function(ry){return ry.getId()===_d||ry.getIdentifier()===_d})}},{key:"getLevelByZIndex",value:function(_d){return this.levels.find(function(ry){return ry.getZIndex()===_d})}},{key:"getLevels",value:function(){return this.levels}},{key:"getMainLevel",value:function(){return this.levels.find(function(_d){return _d.isMain()})}},{key:"getVenueModel",value:function(){return this.venueModel}}]),gy}(),GA=o2.STANDARD,TT=function(){function gy(_d){var ry=this,ny=1<arguments.length&&arguments[1]!==void 0?arguments[1]:new u2;_u(this,gy),this.metaInformation_=ny,this.momStructure=_d,this.id=_d&&_d.site&&_d.site.id,this.location=_d&&_d.site&&_d.site.location||{},this.properties=_d&&_d.site&&_e({},_d.site.properties),this.drawings=_d&&_d.structure&&Object.values(_d.structure).map(function(sy){var dy=_d.getStructureWiseGeometry(sy.id);return new kT(sy,sy.properties,Object.values(dy),ry)})}return ty(gy,[{key:"getDisplaySettings",value:function(){return(this.metaInformation_.releaseSettings_?this.metaInformation_.releaseSettings_.displayOptions:"").display||GA}},{key:"getId",value:function(){return this.momStructure&&this.momStructure.site&&this.momStructure.site.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getName",value:function(){return this.properties.name}},{key:"getBoundingBox",value:function(){if(this.momStructure){var ry=Iy(O_.getBoundingBox(this.momStructure.site.geometry.type,this.momStructure.site.geometry.coordinates),2),_d=ry[0],ry=ry[1];if(_d)return[ry[1],_d[0],_d[1],ry[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.location.coordinates}},{key:"getGeometryById",value:function(_d){return this.getGeometries().find(function(ry){return ry.getId()===_d||ry.getIdentifier()===_d})}},{key:"getGeometries",value:function(){return this.getLevels().sort(function(_d,ry){return _d.getZIndex()-ry.getZIndex()}).flatMap(function(_d){return _d.getGeometries()})}},{key:"getGeometriesByLonLat",value:function(_d){var ry=this,sy=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],ny=!(2<arguments.length&&arguments[2]!==void 0)||arguments[2],sy=sy.map(function(dy){return ry.getLevelById(dy)});return sy.length===0&&(sy=this.drawings.filter(function(dy){return dy=dy.getBoundingBox(),O_.isPointInBoundingBox(_d,dy)}).flatMap(function(dy){return dy.getLevels()})),Rx.getGeometriesByLonLat(_d,sy.flatMap(function(dy){return dy.getGeometries(!0)}),ny)}},{key:"getDrawingById",value:function(_d){return this.drawings.find(function(ry){return ry.getId()===_d||ry.getIdentifier()===_d})}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getRootDrawing",value:function(){return this.drawings.find(function(_d){return _d.isRoot()})}},{key:"getLevelById",value:function(_d){return this.getLevels().find(function(ry){return ry.getId()===_d||ry.getIdentifier()===_d})}},{key:"getLevelsByZIndex",value:function(){var _d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0;return this.getLevels().filter(function(ry){return Number(ry.getZIndex())===Number(_d)})}},{key:"getLevels",value:function(){return this.drawings.flatMap(function(_d){return _d.getLevels()})}},{key:"getMomStructure",value:function(){return this.momStructure}},{key:"getLevelMapFlattenedByZIndex_",value:function(){return this.getLevels().reduce(function(_d,ry){var ny=ry.getZIndex();return _d[ny]||(_d[ny]=[]),_d[ny].push(ry),_d},{})}},{key:"getOccupant",value:function(){var _d=this.momStructure.occupant;return Object.values(_d)}}]),gy}(),c2=function(){function gy(_d){_u(this,gy),this.theme=_d&&_d.theme,this.level=_d&&_d.level,this.site=_d&&_d.site,this.spaces=_d&&_d.spaces,this.address=_d&&_d.address,this.levelConnector=_d&&_d.levelConnector,this.topology=_d&&_d.topology,this.entrance=_d&&_d.entrance,this.occupant=_d&&_d.occupant,this.structure=_d&&_d.structure,this.spaceGroups=_d&&_d.spaceGroups,this.levelWiseGeometry={},this.levelStructureMapping=_d&&_d.levelStructureMapping,this.outdoorLevelMapping=_d&&_d.outdoorLevelMapping||{},this.labelTextPreference=_d&&_d.labelTextPreference||null}return ty(gy,[{key:"setSpaceWithLevel",value:function(){var _d=this;this.spaces&&Object.values(this.spaces).forEach(function(ry){var ny="",sy=(ry.addressId&&(ny=_d.address&&_d.address[ry.addressId]&&_d.address[ry.addressId].properties.addressName),ry.properties),ny=(sy.addressName=ny,_d.getLabelAsPerPreference(_e(_e({},ry),{},{properties:sy}))),sy=ry.properties,ny=(sy.name=ny,sy.display_name=ny,ry.properties.icon&&(sy.name=ry.id,sy.display_name=ry.id),ry),sy=(ny.properties=sy,ny.address=_d.address[ry.addressId],(_d.spaces[ry.id]=ry).levelId);_d.outdoorLevelMapping[sy]&&(sy=_d.outdoorLevelMapping[sy]),_d.levelWiseGeometry[sy]||(_d.levelWiseGeometry[sy]={}),_d.levelWiseGeometry[sy][ny.id]=ny})}},{key:"setOccupantWithLevel",value:function(){var _d=this;this.occupant&&Object.values(this.occupant).forEach(function(ry){var ny,sy;ry.spaceIds&&ry.properties.occupantName&&(ny=[],sy=[],ry.spaceIds.forEach(function(dy){function my(Ry){var Hy=!1,Hy=(_d.labelTextPreference&&_d.labelTextPreference.length&&(Hy=_d.labelTextPreference.indexOf("OCCUPANT_NAMES")!==-1),_d.labelTextPreference===null||Hy),Fy=Ry,Vy=Ry.properties,Hy=(Vy.name=Ry.properties.icon||!Hy?Ry.properties.name:ry.properties.occupantName,Vy.display_name=Ry.properties.icon||!Hy?Ry.properties.display_name:ry.properties.occupantName,Vy.address=Ry.address,Vy.occupantName=ry.properties.occupantName,Ry.levelId);_d.outdoorLevelMapping[Hy]&&(Hy=_d.outdoorLevelMapping[Hy]),_d.levelWiseGeometry[Hy]||(_d.levelWiseGeometry[Hy]={}),_d.levelWiseGeometry[Hy][Ry.id]=Fy,ny.push(Fy),sy.push(Ry.id)}var Cy=dy.id,Cy=_d.spaces[Cy],My=null;_d.spaceGroups&&Object.values(_d.spaceGroups).forEach(function(Ry){Ry.properties.spaceGroups&&Ry.properties.spaceGroups&&Ry.properties.spaceGroups.forEach(function(Fy){Fy.mainSpace&&Fy.mainSpace.id===dy.id&&(My=Fy.spaces.map(function(Vy){return Vy.id}))})}),My&&0<My.length&&My.forEach(function(Ry){my(_d.spaces[Ry])}),Cy&&my(Cy)}),_d.occupant[ry.id]=ry,_d.occupant[ry.id].space=ny,_d.occupant[ry.id].spaceIds=sy)})}},{key:"setEntrance",value:function(){var _d=this;this.entrance&&Object.values(this.entrance).forEach(function(ry){var ny=ry.properties.level.id;_d.levelWiseGeometry[ny]||(_d.levelWiseGeometry[ry.properties.level.id]={}),_d.outdoorLevelMapping[ny]&&(ny=_d.outdoorLevelMapping[ny]),_d.levelWiseGeometry[ny][ry.id]=ry})}},{key:"setLevelWiseGeometry",value:function(){var _d=this;this.level&&Object.keys(this.level).forEach(function(ry){_d.levelWiseGeometry[ry]={}}),this.setSpaceWithLevel(),this.setOccupantWithLevel(),this.setEntrance()}},{key:"getStructureWiseGeometry",value:function(_d){for(var ry={},ny=0,sy=Object.entries(this.levelWiseGeometry);ny<sy.length;ny++){var my=Iy(sy[ny],2),dy=my[0],my=my[1];_d===this.levelStructureMapping[dy]&&(ry[dy]=this.level[dy],ry[dy].features=my)}return ry}},{key:"getLabelAsPerPreference",value:function(sy){var sy=sy.properties,ry=sy.spaceType,my=sy.occupantName,My=sy.spaceName,ny=sy.addressName,sy=sy.spaceCategory,dy=(oy(Ry={},jA,my),oy(Ry,z2,My),oy(Ry,F2,ry?ry.charAt(0).toUpperCase()+ry.slice(1).toLowerCase():""),oy(Ry,gT,sy?sy.charAt(0).toUpperCase()+sy.slice(1).toLowerCase():""),oy(Ry,DA,ny),oy(Ry,zA,ny),oy(Ry,FA,ny),Ry),my=this.theme.spaceRules,Cy="",My=sy&&ry&&my[sy]&&my[sy].spaceTypes&&my[sy].spaceTypes[ry].behavioralAppearance.default.labelType;if(My==="NONE"){if(!this.labelTextPreference)return"";dy[F2]=""}if(ny=sy&&ry&&my[sy]&&my[sy].properties&&my[sy].properties.behavioralAppearance&&my[sy].properties.behavioralAppearance.default&&my[sy].properties.behavioralAppearance.default.labelType,(ny==="NONE"||ny===void 0)&&My===void 0){if(!this.labelTextPreference)return"";dy[F2]="",dy[gT]=""}var Ry=sy&&ry&&my[sy]&&my[sy].properties&&my[sy].properties.behavioralAppearance&&my[sy].properties.behavioralAppearance.default&&my[sy].properties.behavioralAppearance.default.labelTextPreference,Fy=Ry&&this.labelTextPreference?this.labelTextPreference:Ry;if(Fy){for(var Vy=0;Vy<Fy.length;Vy++)if(dy[Fy[Vy]]){Cy=dy[Fy[Vy]];break}}return Cy}}]),gy}(),q2=function(){function gy(Cy){var sy=Cy.apiKey,dy=Cy.baseUrl,my=Cy.token,Cy=Cy.hrn;_u(this,gy),this.hostOptions_={apiKey:sy,url:dy,token:my,hrn:Cy},this.momData=[],this.theme={},this.loadOptions={}}var _d,ry;return ty(gy,[{key:"setHostOptions",value:function(ny){Object.keys(ny).length!==0&&(this.hostOptions_=_e(_e({},this.hostOptions_),ny))}},{key:"getToken",value:function(){return this.hostOptions_.token}},{key:"getHrn",value:function(){return this.hostOptions_.hrn}},{key:"load",value:function(ny){var sy=this,dy=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return this.loadOptions=_e(_e(_e({},NE),dy),{},{venueId:ny}),this.hostOptions_.mapData=dy.mapData,this.hostOptions_.themeRule=dy.themeRule,this.hostOptions_.svgList=dy.svgList,this.hostOptions_.labelTextPreference=dy.labelTextPreferenceOverride,this.getHrn()?this.getVenueModalInstance():this.getToken()?this.getDefaultCollectionWithToken().then(function(){return sy.getVenueModalInstance()}).catch(function(){return Promise.reject(new Error("Unable to find indoor map collection. Please contact your administrator"))}):Promise.reject(new Error("In order to load indoor map, Please provide either hrn or token"))}},{key:"getVenueModalInstance",value:function(){var ny=this;return Promise.resolve().then(function(){return ny.loadOptions.isMetaEnabled?ny.getMeta_(ny.loadOptions.isIconsEnabled).catch(function(sy){return console.warn(sy),Promise.resolve()}):Promise.reject()}).then(function(sy){return ny.getVenue_(sy)}).then(function(sy){return sy}).catch(function(sy){console.debug("Captured event VENUE_ERROR_STATE",sy)})}},{key:"createMomStructure",value:function(){var ny=this,sy={site:{},structure:{},level:{},levelConnector:{},occupant:{},spaces:{},spaceGroups:{},topology:{},address:{},outdoorLevelMapping:{},entrance:{},levelStructureMapping:{}};return this.momData.forEach(function(dy){var my="indoormap-00000000-0000-4000-a000-".concat(ny.loadOptions.venueId.toString().padStart(12,"0")),Cy=dy.id;dy.momType!==fT&&!ny.hostOptions_.mapData&&dy.properties.indoorMapId!=ny.loadOptions.venueId&&dy.properties.indoorMapId!==my||(dy.momType===SE?sy.site=__.setSite(dy,ny.loadOptions.venueId):dy.momType===NA?sy.structure[Cy]=__.setStructure(dy):dy.momType!==dT||dy.properties.isOutdoor&&(!dy.properties.isOutdoor||dy.properties.parentIndoorLevel)?dy.momType===dT&&dy.properties.isOutdoor&&dy.properties.parentIndoorLevel?sy.outdoorLevelMapping[dy.id]=dy.properties.parentIndoorLevel.id:dy.momType===yT?sy.entrance[Cy]=__.setEntrance(dy):dy.momType===pT?sy.occupant[Cy]=__.setOccupant(dy):dy.momType===CE?sy.spaces[Cy]=__.setSpace(dy):dy.momType===ME?sy.spaceGroups[Cy]=__.setSpaceGroups(dy):dy.momType===fT&&(sy.address[Cy]=__.setAddress(dy)):(sy.level[Cy]=__.setLevel(dy),sy.levelStructureMapping[Cy]=dy.properties.structure.id))}),sy.theme=this.theme,sy.labelTextPreference=this.hostOptions_.labelTextPreference,new c2(sy)}},{key:"getVenue_",value:function(ny){this.momData=ny.getMomData();var sy=this.createMomStructure();return sy.setLevelWiseGeometry(),new TT(sy,ny)}},{key:"setConfigData",value:function(my){var sy=my.themeRule,dy=my.svgList,my=my.defaultLang;ET.setSpaceRules(sy.spaceRules),__.svgList=dy,__.themeRule=sy,__.defaultLang=my,this.theme=sy}},{key:"getMeta_",value:function(){var ny=this,sy=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],dy=new u2,my=this.hostOptions_.mapData?{}:this.getMetaConfig_(this.loadOptions.venueId,dx.SITE),Cy=this.hostOptions_.themeRule||this.getMetaConfig_(this.loadOptions.venueId,dx.Theme),My=[];return sy&&(My=this.hostOptions_.svgList||this.getMetaConfig_(this.loadOptions.venueId,dx.IMAGES)),new Promise(function(Ry){Promise.all([my,Cy,My]).then(function(Vy){var Vy=Iy(Vy,3),Hy=Vy[0],p0=Vy[1],d0=Vy[2],e0=ny.hostOptions_.mapData?{mom:new Promise(function(v0){return v0(ny.hostOptions_.mapData)}),site:ny.hostOptions_.mapData.features.find(function(v0){return v0.momType===SE})}:Yx.getMomData(Hy,ny.hostOptions_);e0.mom.then(function(v0){var h0=p0.properties;dy.imageCache=sy?__.manageSvgDimensions(d0.properties):[],ny.setConfigData({themeRule:h0,svgList:dy.imageCache,defaultLang:e0&&e0.site&&e0.site.properties.defaultLanguageCode}),dy.releaseSettings_={displayOptions:{display:h0.entranceRules.default.displayName||o2.STANDARD},mom:v0.features},dy.theme=new l2(h0,dy),Ry(dy)})})})}},{key:"getMetaConfig_",value:function(ny,sy){return Yx.getConfigUrl(ny,sy,this.hostOptions_)}},{key:"fetchCollections",value:function(){return Yx.getDefaultCollection(this.hostOptions_)}},{key:"fetchUserProjects",value:function(){return Yx.getProjectAccountDetails(this.hostOptions_)}},{key:"getDefaultCollectionWithToken",value:(_d=_n().mark(function ny(){var sy=this;return _n().wrap(function(dy){for(;;)switch(dy.prev=dy.next){case 0:return dy.abrupt("return",Promise.all([this.fetchCollections(),this.fetchUserProjects()]).then(function(Cy){var Cy=Iy(Cy,2),My=Cy[0],Cy=Cy[1],My=sy.getHrnFromDefaultCollection(My,Cy);return My.hrn?(Cy={hrn:My.hrn},sy.setHostOptions(Cy),Promise.resolve()):Promise.reject()}).catch(function(my){return Promise.reject(my)}));case 1:case"end":return dy.stop()}},ny,this)}),ry=function(){var ny=this,sy=arguments;return new Promise(function(dy,my){var Cy=_d.apply(ny,sy);function My(Fy){_a(Cy,dy,my,My,Ry,"next",Fy)}function Ry(Fy){_a(Cy,dy,my,My,Ry,"throw",Fy)}My(void 0)})},function(){return ry.apply(this,arguments)})},{key:"getHrnFromDefaultCollection",value:function(my,sy){var dy,my=my.results.items;return Array.isArray(my)&&my.length?(dy=this.getProjectRealm(sy),my.find(function(Cy){return Cy.hrn.includes(dy)})):Promise.reject(new Error("Error while accessing default collection"))}},{key:"getProjectRealm",value:function(ny){return Array.isArray(ny.items)&&ny.items.length&&ny.items[0].id.includes("indoor-")?(ny=ny.items[0].hrn,this.getRealmNameFromHrn(ny)):""}},{key:"getRealmNameFromHrn",value:function(ny){return ny?(ny=ny.split(":")).length&&ny[4]:""}},{key:"getSupportedMapList",value:function(){var ny=this,dy=this.hostOptions_,sy=dy.hrn,dy=dy.token;return sy?this.fetchMapInfoList():dy?this.getDefaultCollectionWithToken().then(function(){return ny.fetchMapInfoList()}).catch(function(){return Promise.reject(new Error("Unable to find indoor map collection. Please contact your administrator"))}):Promise.reject(new Error("In order to load map list, Please provide either hrn or token"))}},{key:"fetchMapInfoList",value:function(){var ny=this;return Yx.fetchIndoorMapList(this.hostOptions_).then(function(sy){return sy=sy.features,0<sy.length?sy.map(function(Cy){var Cy=Cy.properties,my=Cy.placeProperties,Cy=Cy.indoorMapId,My=Cy.split("-").pop(),My=My.substring(My.length-5);return{mapIdentifier:Cy,mapName:ny.getMapName(my.names).name,mapId:My}}):[]}).catch(function(sy){Promise.reject(new Error("".concat(sy,": Error while fetching map list")))})}},{key:"getMapName",value:function(ny){return Array.isArray(ny)&&0<ny.length?ny.find(function(sy){return sy.nameType==="OFFICIAL"}):{}}}]),gy}(),AT=["origin","destination"],VE=function(){function gy(){var _d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(_u(this,gy),!_d.apiKey&&!_d.token)throw new Error("API key or Token is missing");this.config_=_e({baseUrl:"https://meta-indoor-routing.api-gateway.ls.hereapi.com"},_d)}return ty(gy,[{key:"calculateRoute",value:function(sy){var ry=sy.origin,ry=ry===void 0?{}:ry,ny=sy.destination,ny=ny===void 0?{}:ny,sy=By(sy,AT);if(!ry.coordinates||!ny.coordinates)throw new Error("Waypoint coordinates are missing");function dy(Fy){var Vy=Fy.coordinates,Ry=Fy.venueId,Fy=Fy.levelId,Vy=Vy.join(",");return Ry&&Fy?Vy.concat(";indoorMapId=",Ry,";levelId=",Fy):Vy}var my=new URL("".concat(this.config_.baseUrl,"/v1/routes")),Cy=new URLSearchParams({origin:dy(ry),destination:dy(ny),apiKey:this.config_.apiKey});return Object.entries(sy).forEach(function(Fy){var Fy=Iy(Fy,2),Ry=Fy[0],Fy=Fy[1];Cy.append(Ry,_o(Fy)==="object"?JSON.stringify(Fy):Fy)}),my.search=Cy,fetch(my,{headers:{"X-Api-Key":this.config_.apiKey}}).then(function(My){return My.json()})}}]),gy}(),b_={VENUE_DATA_LOADED:"VENUE_DATA_LOADED",VENUE_THEME_LOADED:"VENUE_THEME_LOADED",VENUE_ICONS_LOADED:"VENUE_ICONS_LOADED",VENUE_MOM_DATA_LOADED:"VENUE_MOM_DATA_LOADED",VENUE_ERROR_STATE:"VENUE_ERROR_STATE",VENUE_MAP_DATA_LOADED:"VENUE_MAP_DATA_LOADED",VENUE_ENTITY_DATA_LOADED:"VENUE_ENTITY_DATA_LOADED",VENUE_DATA_MODEL_LOADED:"VENUE_DATA_MODEL_LOADED",VENUE_NAV_DATA_LOADED:"VENUE_NAV_DATA_LOADED",META_DATA_LOADED:"META_DATA_LOADED",META_DATA_MODEL_LOADED:"META_DATA_MODEL_LOADED",META_DATA_MODEL_UPDATED:"META_DATA_MODEL_UPDATED"},z0=(Object.freeze((oy(D0={},b_.VENUE_DATA_LOADED,{description:"event fired when all requested files along with metadata & overrides are loaded",emitTemplate:{}}),oy(D0,b_.VENUE_MAP_DATA_LOADED,{description:"event fired when requested levels, drawings & community files are loaded",emitTemplate:{}}),oy(D0,b_.VENUE_ENTITY_DATA_LOADED,{description:"event fired when requested entity data is loaded",emitTemplate:{}}),oy(D0,b_.VENUE_DATA_MODEL_LOADED,{description:"event fired when a map file is loaded",emitTemplate:{}}),oy(D0,b_.VENUE_NAV_DATA_LOADED,{description:"event fired when requested navigation product is loaded",emitTemplate:{}}),oy(D0,b_.META_DATA_LOADED,{description:"event fired when all requested meta files are loaded except icon & marker",emitTemplate:{}}),oy(D0,b_.META_DATA_MODEL_LOADED,{description:"event fired when a specific model is loaded except icon & marker",emitTemplate:{}}),oy(D0,b_.META_DATA_MODEL_UPDATED,{description:"event fired when a specific meta override is added or removed",emitTemplate:{}}),oy(D0,b_.VENUE_ICONS_LOADED,{description:"event fired when all icons of venue are loaded",emitTemplate:{}}),D0)),new M1),E1=(z0.EVENT_NAME=b_,z0.on("newListener",function(gy){b_[gy]||console.warn("subscribing for un-registered/documented event")}),function(){hy(_d,H.map.Feature);var gy=Ay(_d);function _d(ry){var ny;if(_u(this,_d),ny=gy.call(this),ry instanceof TT)return ny.venueModel=ry,ny.search_=new hT(ry),ny.status_={activeDrawingId:ry.getRootDrawing().getIdentifier(),activeLevelIndex:ry.getRootDrawing().getMainLevel().getZIndex()},ny.mapObjectStore_=ny.getDefaultMapObjectsStore_(),ny.drawings=ry.getDrawings().map(function(sy){return sy=new k0(sy),sy.setParentEventTarget(Sy(ny)),sy}),ny.levels=ry.getLevels().map(function(sy){var dy=new g0(sy);return dy.setParentEventTarget(ny.drawings.find(function(my){return my.getIdentifier()===dy.getData().getDrawing().getIdentifier()})),dy}),ny.geometries=ry.getGeometries().map(function(sy){var dy=new i0(sy);return dy.setParentEventTarget(ny.levels.find(function(my){return my.getIdentifier()===dy.getData().getLevel().getIdentifier()})),dy}),ny.mutualExclusiveHighlight_=!1,ny;throw new Error("It is mandatory to provide valid instance of venueModel")}return ty(_d,[{key:"getData",value:function(){return this.venueModel}},{key:"getBoundingBox",value:function(){return wy(H.geo.Rect,$y(this.venueModel.getBoundingBox()))}},{key:"getCenter",value:function(){var ny=Iy(this.venueModel.getCenter(),2),ry=ny[0],ny=ny[1];return new H.geo.Point(ny,ry)}},{key:"getId",value:function(){return this.venueModel.getId()}},{key:"getIdentifier",value:function(){return this.venueModel.getIdentifier()}},{key:"getName",value:function(){return this.venueModel.getName()}},{key:"getDrawing",value:function(ry){return this.drawings.find(function(ny){return ny.getIdentifier()===ry})}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getLevel",value:function(ry){return this.levels.find(function(ny){return ny.getIdentifier()===ry})}},{key:"getLevels",value:function(){return this.levels}},{key:"getGeometry",value:function(ry){return this.getGeometries().find(function(ny){return ny.getIdentifier()===ry})}},{key:"getGeometries",value:function(){return this.geometries}},{key:"getActiveLevels",value:function(){var ry=this;return this.getData().getDisplaySettings()===o2.FLATTEN?this.venueModel.getLevelsByZIndex(this.status_.activeLevelIndex).map(function(ny){return ry.getLevel(ny.getIdentifier())}):[this.venueModel.getDrawingById(this.status_.activeDrawingId).getLevelByZIndex(this.status_.activeLevelIndex)].map(function(ny){return ry.getLevel(ny.getIdentifier())})}},{key:"getActiveDrawing",value:function(){return this.getDrawing(this.status_.activeDrawingId)}},{key:"setActiveDrawing",value:function(ry){if(this.status_.activeDrawingId!==ry){var ny=this.venueModel.getDrawingById(ry);if(!ny)throw new Error("Drawing ".concat(ry," was not found"));var sy=this.status_.activeDrawingId;this.status_.activeDrawingId=ny.id,this.setActiveLevelIndex(ny.getMainLevel().getZIndex()),this.dispatchEvent(new H.util.ChangeEvent(_d.EVENTS.DRAWING_CHANGE,ry,sy))}}},{key:"getActiveLevelIndex",value:function(){return this.status_.activeLevelIndex}},{key:"setActiveLevelIndex",value:function(ry){var ny;this.venueModel.getLevelsByZIndex(ry)&&(ny=this.status_.activeLevelIndex,this.status_.activeLevelIndex=ry,this.dispatchEvent(new H.util.ChangeEvent(_d.EVENTS.LEVEL_CHANGE,ry,ny)))}},{key:"isActive",value:function(){var ry=this.getParentEventTarget();return!!ry&&this===ry.activeVenue}},{key:"getHighlightedGeometries",value:function(){var ry=this;return this.venueModel.getGeometries().filter(function(ny){return ny.isHighlighted()}).map(function(ny){return ry.getGeometry(ny.getIdentifier())})}},{key:"setHighlightedGeometries",value:function(){var ry=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],ny=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],dy=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},sy=3<arguments.length&&arguments[3]!==void 0&&arguments[3],dy=_e(_e({},hx),dy),my=dy.fillColor,Cy=dy.outlineColor,My=dy.outlineWidth;this.mutualExclusiveHighlight_=!!sy,this.mutualExclusiveHighlight_&&this.getHighlightedGeometries().forEach(function(Ry){Ry.getData().highlight(!1)}),ny.forEach(function(Ry){Ry.getData().highlight(ry,{m:my,o:Cy,w:My})}),this.dispatchEvent(_d.EVENTS.GEOMETRY_HIGHLIGHT)}},{key:"getMapObjects",value:function(){var ry=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.getActiveLevelIndex(),ny=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.getActiveDrawing();return this.mapObjectStore_[ry][ny.getIdentifier()]}},{key:"setMapObjects",value:function(){var ry=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],ny=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.getActiveLevelIndex(),sy=2<arguments.length&&arguments[2]!==void 0?arguments[2]:this.getActiveDrawing();this.mapObjectStore_[ny]&&this.mapObjectStore_[ny][sy.getIdentifier()]&&(this.mapObjectStore_[ny][sy.getIdentifier()]=$y(ry)),this.updateMapObjectsVisibility_()}},{key:"search",value:function(){var ry=this;return this.search_.find(0<arguments.length&&arguments[0]!==void 0?arguments[0]:"").flatMap(function(ny){return ny.geometries.map(function(sy){return ry.getGeometry(sy.id)})})}},{key:"updateMapObjectsVisibility_",value:function(){Object.values(this.mapObjectStore_).forEach(function(ry){Object.values(ry).forEach(function(ny){return ny.forEach(function(sy){return sy.setVisibility(!1)})})}),this.isActive()&&this.mapObjectStore_[this.getActiveLevelIndex()][this.getActiveDrawing().getIdentifier()].forEach(function(ry){return ry.setVisibility(!0)})}},{key:"getDefaultMapObjectsStore_",value:function(){var ry=this,ny=this.getData().getDisplaySettings()===o2.FLATTEN;return this.venueModel.getLevels().reduce(function(Cy,dy){var my=dy.getZIndex(),Cy=_e({},Cy);return Cy[my]||(Cy[my]={}),Cy[my][dy.getDrawing().getIdentifier()]=[],ny&&(Cy[my][ry.venueModel.getRootDrawing().getIdentifier()]=[]),Cy},{})}}]),_d}()),R_=(E1.EVENTS={ACTIVE_VENUE_CHANGE:"activevenuechange",DRAWING_CHANGE:"drawingchange",LEVEL_CHANGE:"levelchange",GEOMETRY_HIGHLIGHT:"geometryhighlight"},function(){function gy(){_u(this,gy)}return ty(gy,null,[{key:"getIconLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&arguments[0]!==void 0?arguments[0]:[]).flatMap(function(_d){return _d.getData().getGeometries()}).filter(function(_d){return _d.isIcon()&&_d.getIcon()}).map(function(_d){var ny=Iy(_d.getLabelArea(),2),ry=ny[0],ny=ny[1],sy=_d.getLevel(),dy=_d.getIcon(),my=_d.properties.spaceType||_d.properties.spaceCategory||_d.getDisplayName();return{type:"Feature",properties:{id:_d.getIdentifier(),geometryId:_d.getIdentifier(),levelId:sy.getIdentifier(),name:my,venueId:sy.getDrawing().getVenueModel().getIdentifier(),url:dy?"data:image/svg+xml;utf8,".concat(encodeURIComponent(dy)):""},geometry:{type:a_.POINT,coordinates:[ry,ny]}}})}}},{key:"getLabelLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&arguments[0]!==void 0?arguments[0]:[]).flatMap(function(_d){return _d.getData().getGeometries()}).filter(function(_d){return _d.getDisplayName()&&!_d.isIcon()}).map(function(_d){var ny=Iy(_d.getLabelArea(),2),ry=ny[0],ny=ny[1],dy=_d.getLabelStyle(),sy=dy.fill,dy=dy.zmin,my=_d.getLevel();return{type:"Feature",properties:{id:_d.getIdentifier(),geometryId:_d.getIdentifier(),levelId:my.getIdentifier(),venueId:my.getDrawing().getVenueModel().getIdentifier(),name:_d.getDisplayName(),minZoom:dy||15,textFillColor:sy.toLowerCase()},geometry:{type:a_.POINT,coordinates:[ry,ny]}}})}}},{key:"getGeometryLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&arguments[0]!==void 0?arguments[0]:[]).flatMap(function(_d){return _d.getData().getGeometries()}).filter(function(_d){return _d.getType()!==a_.POINT}).map(function(_d){var sy=_d.getHighlightedStyle()||{},ry=sy.m,ny=sy.o,sy=sy.w,Cy=_e({},_d.getStyle()),dy=Cy.m,my=Cy.o,Cy=Cy.w,Fy=TE,My=Fy.fillColor,Ry=Fy.outlineColor,Fy=Fy.outlineWidth,Vy=_d.getLevel();return{type:"Feature",properties:{id:_d.getIdentifier(),fillColor:(ry||dy||My).toLowerCase(),geometryId:_d.getIdentifier(),levelId:Vy.getIdentifier(),venueId:Vy.getDrawing().getVenueModel().getIdentifier(),outlineColor:(ny||my||Ry).toLowerCase(),outlineWidth:Number(((sy||Cy||Fy)/3).toFixed(2)),zIndex:_d.getZIndex()},geometry:{type:_d.getType(),coordinates:_d.getCoordinates()}}})}}},{key:"getFootprintLayer",value:function(_d){return{type:"FeatureCollection",features:_d.flatMap(function(ry){var ny=ry.getData().getRootDrawing().getMainLevel().getIdentifier(),sy=ry.getLevel(ny).getData().getGeometries().filter(function(dy){return dy.getType()===a_.POLYGON});return[{type:"Feature",properties:{isFootprint:!0,levelId:ny,venueId:ry.getIdentifier(),zIndex:1},geometry:{type:"MultiPolygon",coordinates:sy.map(function(dy){return dy.getCoordinates()})}},{type:"Feature",properties:{isFootprint:!0,levelId:ny,venueId:ry.getIdentifier(),zIndex:2,venueName:ry.getName()},geometry:{type:"Point",coordinates:ry.getCenter().toGeoJSON().coordinates.slice(0,2)}}]})}}}]),gy}()),Kx=function(){function gy(){_u(this,gy)}return ty(gy,null,[{key:"getStyle",value:function(){var _d=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],ry=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],ny={styles:[{layer:v1.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#613F8E",lineWidth:"2px",renderOrder:1},{layer:v1.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#AF91B4",renderOrder:2},{layer:v1.FOOTPRINT,when:["==",["geometry-type"],"Point"],technique:"text",color:"black",size:16,text:["get","venueName"],priority:61},{layer:v1.VECTOR,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:["get","fillColor"],renderOrder:["get","zIndex"]},{layer:v1.VECTOR,technique:"solid-line",color:["get","outlineColor"],lineWidth:["get","outlineWidth"],renderOrder:["get","zIndex"]},{layer:v1.TEXT,minZoomLevel:["get","minZoom"],technique:"text",color:["get","textFillColor"],size:I_.size,text:["get","name"],priority:60},{layer:v1.ICON,minZoomLevel:Ix,when:["==",["geometry-type"],"Point"],technique:"labeled-icon",textIsOptional:!0,size:0,imageTexture:["concat","texture",["get","name"]],screenWidth:["interpolate",["linear"],["zoom"],15,3,21,70],screenHeight:["interpolate",["linear"],["zoom"],15,3,21,70],priority:61}],images:{},imageTextures:[]};return _d.forEach(function(sy){var dy="texture"+sy.properties.name;ny.images[dy]||(ny.images[dy]={url:sy.properties.url,preload:!0},ny.imageTextures.push({name:dy,image:dy}))}),ry.forEach(function(sy){var dy,My=sy.getData().getHighlightedStyle(),my=My.m,Cy=My.o,My=My.w;(dy=ny.styles).push.apply(dy,[{layer:v1.VECTOR,when:["==",["get","id"],sy.id],technique:"fill",color:my,renderOrder:["get","zIndex"]},{layer:v1.VECTOR,when:["==",["get","id"],sy.id],technique:"solid-line",color:Cy,lineWidth:My,renderOrder:["get","zIndex"]}])}),new H.map.render.harp.Style(ny)}}]),gy}(),Lx=function(){function gy(){_u(this,gy)}return ty(gy,null,[{key:"getIconsTextures",value:function(){var _d={},ry={},ny=(0<arguments.length&&arguments[0]!==void 0?arguments[0]:[]).reduce(function(sy,dy){var my=dy.properties.name;return sy[my]||(sy[my]=[]),sy[my].push(dy),sy},{});return Object.keys(ny).forEach(function(sy){var dy="texture".concat(sy),my="sprite".concat(sy),Cy=ny[sy][0].properties.url;_d[dy]={url:Cy,sprites:oy({},my,[0,0,50,50])},ny[sy].forEach(function(My){My=My.properties,ry["icon".concat(My.name)]={filter:{name:My.name,$zoom:{min:Ix}},draw:{points:{interactive:!0,priority:1,size:[[15,"50%"],[16,"55%"],[17,"60%"],[18,"65%"],[19,"75%"],[20,"80%"],[21,"100%"]],texture:dy,sprite:my}}}})}),{textures:_d,iconLayers:ry}}},{key:"getFootprintLayer",value:function(){return{data:{source:"venues",layer:v1.FOOTPRINT},draw:{polygons:{interactive:!0,color:"#AF91B4",order:2},lines:{color:"#613F8E",width:"2px",order:1},points:{color:"[0, 0, 0, 0]",size:"0px",order:3,priority:1,text:{anchor:"center",collide:!1,font:{fill:"black",size:"16px"},text_source:"function() { return feature.venueName }"}}}}}},{key:"getGeometryLayer",value:function(){var _d,ry,ny,sy=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],dy={};return sy.length&&(_d=(ny=sy[0].getData().getHighlightedStyle()).m,ry=ny.o,ny=ny.w,dy={filter:{id:sy.map(function(my){return my.id})},draw:{polygons:{interactive:!0,color:_d},lines:{color:ry,width:ny}}}),{data:{source:"venues",layer:v1.VECTOR},draw:{polygons:{interactive:!0,color:"function() { return feature.fillColor }",order:"function() { return feature.zIndex }"},lines:{color:"function() { return feature.outlineColor }",order:"function() { return feature.zIndex }",width:"function() { return feature.outlineWidth }"}},highlighted:dy}}},{key:"getTextLayer",value:function(){return{filter:{$zoom:{min:r2}},data:{source:"venues",layer:v1.TEXT},draw:{points:{filter:"function() { return $zoom > feature.minZoom }",color:"[0, 0, 0, 0]",size:"0px",offset:["0px","-10px"],priority:2,text:{font:{fill:"function() { return feature.textFillColor }",size:I_.size},text_source:"function() { return feature.name }"}}}}}},{key:"getIconLayer",value:function(_d){return _e({data:{source:"venues",layer:v1.ICON}},_d)}},{key:"getStyle",value:function(){var ny=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],ry=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],ny=gy.getIconsTextures(ny),_d=ny.textures,ny=ny.iconLayers,ry={venue_footprints:gy.getFootprintLayer(),venue_geometries:gy.getGeometryLayer(ry),venue_labels:gy.getTextLayer(),venue_icons:gy.getIconLayer(ny)},ny=H.gl.yaml.safeDump({sources:{venues:{max_zoom:n2,type:"GeoJSONTileSource"}},layers:ry,textures:_d});return new H.map.render.webgl.Style(ny)}}]),gy}(),ST={type:"FeatureCollection",features:[]},HE={extent:4096,indexMaxZoom:0,maxZoom:24,tolerance:3},D0=function(){hy(_d,H.map.provider.RemoteTileProvider);var gy=Ay(_d);function _d(ry){return _u(this,_d),(ry=gy.call(this,ry)).venues=[],ry.activeVenue=null,ry.dataLayers_={},ry.tileIndexes_={},ry.addEventListener(E1.EVENTS.ACTIVE_VENUE_CHANGE,ry.activeVenueChangeHandler_,void 0,Sy(ry)),ry}return ty(_d,[{key:"setStyle",value:function(ry){return this.setStyleInternal(ry)}},{key:"getStyle",value:function(){return this.getStyleInternal()}},{key:"isFeatureVisible_",value:function(ry,ny){var sy=ry.properties;return this.activeVenue&&sy.venueId===this.activeVenue.getIdentifier()?ny!==v1.FOOTPRINT&&this.activeVenue.getActiveLevels().some(function(dy){return dy.id===sy.levelId}):sy.isFootprint===!0&&ny===v1.FOOTPRINT}},{key:"requestInternal",value:function(ry,ny,sy,dy){function my(Ry){for(var Fy=0;Fy<Ry.length;Fy+=1)Ry[Fy]=Ry[Fy].map(function(Vy){return e2(Vy,sy,ry,ny,HE.extent)})}var Cy=this,My={};return Object.keys(this.tileIndexes_).forEach(function(Ry){var Fy=Cy.tileIndexes_[Ry].getTile(sy,ry,ny);My[Ry]=Fy?kE(Fy):ST,My[Ry].features=My[Ry].features.filter(function(v0){return Cy.isFeatureVisible_(v0,Ry)});for(var Vy=0;Vy<My[Ry].features.length;Vy+=1){var Hy=My[Ry].features[Vy],p0=Hy.geometry.type;if(p0===a_.POLYGON||p0===a_.MULTI_LINESTRING)my(Hy.geometry.coordinates);else if(p0===a_.MULTI_POLYGON)Hy.geometry.coordinates.map(my);else for(var d0=Hy.geometry.coordinates,e0=0;e0<d0.length;e0+=1)d0[e0]=e2(d0[e0],sy,ry,ny,HE.extent)}}),dy(My),{cancel:function(){}}}},{key:"getActiveVenue",value:function(){return this.activeVenue}},{key:"getVenue",value:function(ry){return ry?this.venues.find(function(ny){return ny.getIdentifier()===ry}):this.activeVenue}},{key:"setActiveVenue",value:function(ry){var ny=this.activeVenue;this.activeVenue=ry,this.dispatchEvent(new H.util.ChangeEvent(E1.EVENTS.ACTIVE_VENUE_CHANGE,ry,ny)),this.reload()}},{key:"addVenue",value:function(ry){var ny=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(!(ry instanceof E1))throw new Error("Invalid argument");var sy=ry.getIdentifier();if(this.getVenue(sy))throw new Error("Please invoke provider.removeVenue to remove old instance of venue ".concat(sy," before adding new"));ry.setParentEventTarget(this),this.venues.push(ry),ny||(this.reloadData_(),this.reloadStyle_())}},{key:"addVenues",value:function(){var ry=this,ny=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[];0<ny.length&&(ny.forEach(function(sy){sy instanceof E1&&ry.addVenue(sy,!0)}),this.reloadData_(),this.reloadStyle_())}},{key:"removeVenue",value:function(ry){var ny;ry instanceof E1&&-1<this.venues.indexOf(ry)&&(ny=ry.getIdentifier(),this.activeVenue&&this.activeVenue.getIdentifier()===ny&&this.setActiveVenue(null),this.venues.splice(this.venues.indexOf(ry),1),this.reloadData_(),this.reloadStyle_(),this.reload())}},{key:"getFeatureProxy",value:function(my,ny,sy){var dy=my.geometryId,my=my.venueId,my=this.getVenue(my);return dy?sy(my.getGeometries().find(function(Cy){return Cy.id===dy})):my&&sy(my),!0}},{key:"addVenueEventListeners_",value:function(ry){ry&&(ry.addEventListener(E1.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),ry.addEventListener(E1.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),ry.addEventListener(E1.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"removeVenueEventListeners_",value:function(ry){ry&&(ry.removeEventListener(E1.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),ry.removeEventListener(E1.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),ry.removeEventListener(E1.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"activeVenueChangeHandler_",value:function(sy){var ny=sy.oldValue,sy=sy.newValue;ny&&(this.removeVenueEventListeners_(ny),ny.updateMapObjectsVisibility_()),sy&&(this.addVenueEventListeners_(sy),sy.updateMapObjectsVisibility_())}},{key:"drawingChangeHandler_",value:function(){this.reload()}},{key:"levelChangeHandler_",value:function(){this.activeVenue&&(this.activeVenue.updateMapObjectsVisibility_(),this.reload())}},{key:"geometryHighlightHandler_",value:function(){this.reloadStyle_(this.activeVenue.getHighlightedGeometries())}},{key:"createDataLayers_",value:function(){var ry=this,ny=0<arguments.length&&arguments[0]!==void 0?arguments[0]:Object.keys(v1),sy=v1.FOOTPRINT,dy=v1.ICON,my=v1.TEXT,Cy=v1.VECTOR;ny.forEach(function(My){switch(My){case Cy:ry.dataLayers_[Cy]=R_.getGeometryLayer(ry.venues);break;case sy:ry.dataLayers_[sy]=R_.getFootprintLayer(ry.venues);break;case dy:ry.dataLayers_[dy]=R_.getIconLayer(ry.venues);break;case my:ry.dataLayers_[my]=R_.getLabelLayer(ry.venues);break;default:throw new Error("Unsupported Layer ".concat(My))}})}},{key:"createTileIndexes_",value:function(){var ry=this;(0<arguments.length&&arguments[0]!==void 0?arguments[0]:Object.keys(v1)).forEach(function(ny){ry.tileIndexes_[ny]=new nx(ry.dataLayers_[ny],HE)})}},{key:"reloadData_",value:function(){var ry=0<arguments.length&&arguments[0]!==void 0?arguments[0]:Object.keys(v1);this.createDataLayers_(ry),this.createTileIndexes_(ry)}},{key:"reloadStyle_",value:function(ry){var ny=this.dataLayers_[v1.ICON]?this.dataLayers_[v1.ICON].features:[];this.getEngineType()===H.Map.EngineType.WEBGL?this.setStyle(Lx.getStyle(ny,ry)):this.getEngineType()===H.Map.EngineType.HARP&&this.setStyle(Kx.getStyle(ny,ry))}},{key:"providesGeoJSON",value:function(){return!0}}]),_d}(),VA=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),CT=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),MT=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImIiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PG1hc2sgaWQ9ImMiIHdpZHRoPSIzOCIgaGVpZ2h0PSI0NiIgeD0iMCIgeT0iMCIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZWxsaXBzZSBjeD0iMjAiIGN5PSI0NS4xNiIgZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjOTc5Nzk3IiBzdHJva2Utd2lkdGg9Ii4yNSIgcng9IjMuNSIgcnk9IjMuNSIvPjx1c2UgZmlsbD0iIzAxQjZCMiIgeGxpbms6aHJlZj0iI2IiLz48cGF0aCBmaWxsPSIjMzIzMjMyIiBmaWxsLW9wYWNpdHk9Ii41IiBkPSJNMTEuODEgMzcuNjZoMTYuMzhsLTguMiA4eiIvPjx1c2Ugc3Ryb2tlPSIjNDE2QTg2IiBzdHJva2Utd2lkdGg9Ii41IiBtYXNrPSJ1cmwoI2MpIiB4bGluazpocmVmPSIjYSIvPjxlbGxpcHNlIGN4PSIxOS44MSIgY3k9IjE5LjE5IiBmaWxsPSIjRkZGIiByeD0iNC44MSIgcnk9IjQuODEiLz48L2c+PC9zdmc+"),IT=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzMi44MyAzMy4xMDRjLjQwNy0uMzc0IDEuNDE5LTEuNDUyIDEuNDE5LTEuNDUyeiIvPjxtYXNrIGlkPSJjIiB3aWR0aD0iMzgiIGhlaWdodD0iNDYiIHg9IjAiIHk9IjAiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PGVsbGlwc2UgaWQ9ImIiIGN4PSIxOS44MDciIGN5PSIxOS4xNjgiIHJ4PSIxMi4zNjMiIHJ5PSIxMi4xOTciLz48bWFzayBpZD0iZCIgd2lkdGg9IjI1LjcyNSIgaGVpZ2h0PSIyNS4zOTQiIHg9Ii0uNSIgeT0iLS41Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNi45NDQgNi40NzFoMjUuNzI1djI1LjM5NEg2Ljk0NHoiLz48dXNlIHhsaW5rOmhyZWY9IiNiIi8+PC9tYXNrPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxlbGxpcHNlIGN4PSIyMCIgY3k9IjQ1LjE2IiBmaWxsPSIjRkZGIiBzdHJva2U9IiM5Nzk3OTciIHN0cm9rZS13aWR0aD0iLjI1IiByeD0iMy41IiByeT0iMy41Ii8+PHVzZSBmaWxsPSIjMzIzMjMyIiB4bGluazpocmVmPSIjYSIvPjxwYXRoIGZpbGw9IiM3RDdEN0QiIGQ9Ik0xMi4wMTEgMzcuODA1aDE1Ljk3OGwtNy45MTYgOHoiLz48dXNlIHN0cm9rZT0iIzdDN0M3QyIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNlKSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNjKSIgeGxpbms6aHJlZj0iI2EiLz48ZWxsaXBzZSBmaWxsPSIjRkZGIiBjeD0iMTkuODA3IiBjeT0iMTkuMTY4IiByeD0iMTIuMzYzIiByeT0iMTIuMTk3Ii8+PHBhdGggZmlsbD0iIzMyMzIzMiIgZD0iTTYuODEyIDYuOTQ4aDYuNDV2Ni4zNjRoLTYuNDV6bTAgMTIuNzI3aDYuNDV2Ni4zNjRoLTYuNDV6bTYuNDUtNi4zNjNoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS0xOS4wOTFoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS02LjM2M2g2LjQ1djYuMzY0aC02LjQ1em0wIDEyLjcyN2g2LjQ1djYuMzY0aC02LjQ1eiIvPjx1c2Ugc3Ryb2tlPSIjRkZGIiBtYXNrPSJ1cmwoI2QpIiB4bGluazpocmVmPSIjYiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPjwvZz48L3N2Zz4="),$2=function(){function gy(_d,ry){_u(this,gy),this.indoorMapObjects_=null,this.outdoorMapObjects_=null,this.createRouteObjects_(_d,ry)}return ty(gy,[{key:"createRouteObjects_",value:function(_d){for(var ry=this,_d=_d.sections,ny=_d===void 0?[]:_d,sy=1<arguments.length&&arguments[1]!==void 0?arguments[1]:_T,dy=(this.indoorMapObjects_={},this.outdoorMapObjects_=new H.map.Group,function(My){var Ry,Fy=ny[My],Hy=Fy.departure.place,Vy=Hy.id,Hy=Hy.type,p0=H.util.flexiblePolyline.decode(Fy.polyline).polyline,d0=void 0,e0=void 0,v0=sy(My,ny,gy.ObjectType.SEGMENT_START_MARKER),v0=(v0&&(d0=new H.map.Marker(Fy.departure.place.location,{icon:v0})),sy(My,ny,gy.ObjectType.SEGMENT_FINISH_MARKER)),h0=(v0&&(e0=new H.map.Marker(Fy.arrival.place.location,{icon:v0})),sy(My,ny,gy.ObjectType.SEGMENT_POLYLINE));Hy==="indoor"?(v0=function(){var r0=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],_v=new Map,t0=new H.geo.LineString,a0=Iy(r0[0],3)[2];return _v.set(a0,[t0]),r0.forEach(function(A0){A0[2]!==a0&&(a0=A0[2],t0=new H.geo.LineString,_v.has(a0)?_v.get(a0).push(t0):_v.set(a0,[t0])),t0.pushLatLngAlt.apply(t0,$y(A0))}),_v}(p0),Ry=Array.from(v0.keys()).reduce(function(r0,_v){return r0[_v]||(r0[_v]=new H.map.Group),r0},{}),h0&&v0.forEach(function(r0,_v){r0.forEach(function(t0){1<t0.getPointCount()&&(t0=new H.map.Polyline(t0,{style:h0}),Ry[_v].addObject(t0))})}),d0&&Ry[Fy.departure.place.location.lvl].addObject(d0),e0&&Ry[Fy.arrival.place.location.lvl].addObject(e0),ry.indoorMapObjects_[Vy]=_e(_e({},ry.indoorMapObjects_[Vy]||{}),Ry)):(h0&&(My=new H.geo.LineString(p0.flatMap(function(r0){return[r0[0],r0[1],0]})),Hy=new H.map.Polyline(My,{style:h0}),ry.outdoorMapObjects_.addObject(Hy)),d0&&ry.outdoorMapObjects_.addObject(d0),e0&&ry.outdoorMapObjects_.addObject(e0))}),my=0;my<ny.length;my++)dy(my)}},{key:"getIndoorObjects",value:function(){return this.indoorMapObjects_}},{key:"getOutdoorObjects",value:function(){return this.outdoorMapObjects_}}]),gy}(),W2=($2.ObjectType={SEGMENT_START_MARKER:1,SEGMENT_FINISH_MARKER:2,SEGMENT_POLYLINE:3},function(){hy(_d,H.service.Service);var gy=Ay(_d);function _d(ry){_u(this,_d),ny=gy.call(this,_d,_e(_e({},ry),{},{baseUrl:void 0}));var ny,sy={apiKey:ry.apikey,baseUrl:ry.baseUrl,token:ry.token},dy={apiKey:sy.apiKey,token:sy.token},my=(sy.apiKey||(sy.apiKey=ny.getUrl().getQuery().apikey),ry.useLegacy||!1);return ny.venueService_=new q2(sy,my),dy.apiKey||(dy.apiKey=ny.getUrl().getQuery().apikey),ry.routingBaseUrl&&(dy.baseUrl=ry.routingBaseUrl),ny.routingService_=new VE(dy),ny}return ty(_d,[{key:"loadVenue",value:function(ry){return console.warn("Venue service version 1 is no longer supported hence "+ry+" could not be loaded"),Promise.resolve()}},{key:"calculateRoute",value:function(ry){return console.warn("HERE Indoor Routing is deprecated and will be removed soon."),this.routingService_.calculateRoute(ry)}}]),_d}()),Xx=(W2.CONFIG_KEY="venues",function(){hy(_d,H.service.Service);var gy=Ay(_d);function _d(dy){_u(this,_d),ny=gy.call(this,_d,_e(_e({},dy),{},{baseUrl:void 0}));var ny,sy={apiKey:dy.apikey,baseUrl:dy.baseUrl,token:dy.token,hrn:dy.hrn},dy=(sy.apiKey||(sy.apiKey=ny.getUrl().getQuery().apikey),dy.useLegacy||!1);return ny.venueService_=new q2(sy,dy),ny}return ty(_d,[{key:"loadVenue",value:function(ry){return this.venueService_.load(ry,1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).then(function(ny){return new E1(ny)})}},{key:"getMapInfoList",value:function(){return this.venueService_.getSupportedMapList()}}]),_d}()),z0=(Xx.CONFIG_KEY="indoorMaps",H.service.Platform.prototype.getVenuesService=function(gy,_d){var ry=Xx;return _d!==1&&_d?_d!==px.v2||gy.token||(gy.hrn?gy.apikey||console.error("Venue Service version 2 requires either apikey or token"):console.error("Token is mandatory when Hrn is not provided in Venue Service version 2")):(console.warn("Venue service version 1 is no longer supported"),ry=W2),this.createService(ry,gy)},Xx.LABEL_TEXT_PREFERENCE_OVERRIDE={OCCUPANT_NAMES:"OCCUPANT_NAMES",SPACE_NAME:"SPACE_NAME",SPACE_TYPE_NAME:"SPACE_TYPE_NAME",SPACE_CATEGORY_NAME:"SPACE_CATEGORY_NAME",INTERNAL_ADDRESS:"INTERNAL_ADDRESS"},function(){hy(_d,H.ui.Control);var gy=Ay(_d);function _d(ry){var ny,sy=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return _u(this,_d),(ny=gy.call(this)).provider_=null,ny.levelSelectorUI_=null,ny.setAlignment(sy&&sy.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),ny.addClass("venues-ui"),ry instanceof E1&&ny.setVenue(ry),ny}return ty(_d,[{key:"renderInternal",value:function(ry,ny){Py(fy(_d.prototype),"renderInternal",this).call(this,ry,ny),this.createLevelSelectorUI_(ry),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(ry){ry instanceof E1&&(this.removeEventListeners_(),this.venue=ry,this.provider_=ry.getParentEventTarget(),this.update_(),this.addEventListeners_())}},{key:"createLevelSelectorUI_",value:function(ry){var ny=this;ry.innerHTML="",this.levelSelectorUI_=null,this.levelSelectorUI_=new a2(ry,null,null,function(sy){return ny.venue.setActiveLevelIndex(sy)})}},{key:"update_",value:function(){var ry,ny;this.levelSelectorUI_&&(ry=this.venue.getActiveDrawing().getData(),ny=this.venue.getData().getDisplaySettings(),this.levelSelectorUI_.update(ry,ny),this.levelChangeHandler_())}},{key:"addEventListeners_",value:function(){this.venue&&(this.venue.addEventListener(E1.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.addEventListener(E1.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.addEventListener(E1.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&(this.venue.removeEventListener(E1.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.removeEventListener(E1.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.removeEventListener(E1.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"levelChangeHandler_",value:function(){this.levelSelectorUI_.switch(this.venue.getActiveLevelIndex())}},{key:"drawingChangeHandler_",value:function(){this.update_()}},{key:"activeVenueChangeHandler_",value:function(ry){this.setVenue(ry.newValue)}}]),_d}()),Y2=function(){hy(_d,H.ui.Control);var gy=Ay(_d);function _d(ry){var ny,sy=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return _u(this,_d),(ny=gy.call(this)).provider_=null,ny.drawingSelectorUI_=null,ny.addClass("venues-ui"),ny.setAlignment(sy&&sy.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),ry instanceof E1&&ny.setVenue(ry),ny}return ty(_d,[{key:"renderInternal",value:function(ry,ny){Py(fy(_d.prototype),"renderInternal",this).call(this,ry,ny),this.createDrawingSelectorUI_(ry),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(ry){ry instanceof E1&&(this.removeEventListeners_(),this.venue=ry,this.provider_=ry.getParentEventTarget(),this.drawingSelectorUI_&&this.drawingSelectorUI_.update(ry.getData()),this.addEventListeners_())}},{key:"createDrawingSelectorUI_",value:function(ry){var ny=this;ry.innerHTML="",this.drawingSelectorUI_=null,this.drawingSelectorUI_=new UA(ry,null,function(sy){return ny.venue.setActiveDrawing(sy)})}},{key:"addEventListeners_",value:function(){this.venue&&this.venue.addEventListener(E1.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.addEventListener(E1.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&this.venue.removeEventListener(E1.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.removeEventListener(E1.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"drawingChangeHandler_",value:function(){this.drawingSelectorUI_.switch(this.venue.getActiveDrawing().id)}},{key:"activeVenueChangeHandler_",value:function(ry){this.setVenue(ry.newValue)}}]),_d}(),Y2=Object.freeze({__proto__:null,DrawingControl:Y2,LevelControl:z0});return o(`.venues-ui * {
  font-family: "Fira Sans", "Helvetica Neue", Helvetica, sans-serif;
  color: #0F1621;
}
.venues-ui .arrow {
  display: block;
  width: 100%;
  height: 100%;
  background-repeat: no-repeat;
  background-position: center;
}
.venues-ui .arrow--up {
  background-image: url("data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-426.000000, -584.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls-Copy' transform='translate(417.753906, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(15.000000, 16.499023) rotate(-180.000000) translate(-15.000000, -16.499023) translate(9.000000, 12.749023)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}
.venues-ui .arrow--down {
  background-image: url("data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-347.000000, -704.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls' transform='translate(338.251953, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(9.000000, 132.746094)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}
.venues-ui .venues-ui-button {
  display: block;
  width: 40px;
  height: 40px;
  line-height: 40px;
  font-size: 16px;
  font-weight: 600;
  background-color: #fff;
  border: none;
  border-bottom: 1px solid #9FA2A6;
  cursor: pointer;
  overflow: hidden;
  color: #6e737a;
  text-align: center;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.venues-ui .venues-ui-button:hover, .venues-ui .venues-ui-button--active {
  background-color: #f0f0f0;
  color: #0F1621;
}
@keyframes fade {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}
.venues-ui__drawings .drawings {
  position: absolute;
  top: 0;
  right: 45px;
  display: none;
  opacity: 0;
  border-radius: 5px;
  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);
}
.venues-ui__drawings .drawings--open {
  display: block;
  opacity: 1;
  animation: fade 1s;
}
.venues-ui__drawings .drawings .venues-ui-button {
  width: auto;
  padding: 0 10px;
}
.venues-ui__drawings .drawings .venues-ui-button:first-of-type {
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;
}
.venues-ui__drawings .drawings .venues-ui-button:last-of-type {
  border-bottom-left-radius: 5px;
  border-bottom-right-radius: 5px;
}
.venues-ui__drawings .trigger {
  border-radius: 5px;
  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);
}
.venues-ui__drawings .trigger .arrow {
  transform: rotate(0);
  transition: 0.4s;
}
.venues-ui__drawings .trigger.venues-ui-button--active .arrow {
  transform: rotate(90deg);
  transition: 0.4s;
}
.venues-ui__levels {
  border-radius: 5px;
  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);
}
.venues-ui__levels .levels {
  overflow: hidden;
}
.venues-ui__levels .venues-ui-button--up + .levels .venues-ui-button {
  border-radius: 0;
}
.venues-ui__levels .venues-ui-button:first-of-type {
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;
}
.venues-ui__levels .venues-ui-button:last-of-type {
  border-bottom-left-radius: 5px;
  border-bottom-right-radius: 5px;
}
.venues-ui__levels .venues-ui-button[disabled=disabled] .arrow {
  opacity: 0.5;
}
.venues-ui__directory {
  position: absolute;
  top: 10px;
  right: 60px;
  bottom: calc(100% - 45px);
  width: 350px;
  overflow: hidden;
  background: white;
  border-radius: 5px;
  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);
}
.venues-ui__directory.active {
  bottom: 10px;
}
.venues-ui__directory .directory__list {
  top: 80px;
  bottom: 20px;
  position: absolute;
  overflow-y: scroll;
  right: 10px;
  left: 10px;
  font-size: 12px;
}
.venues-ui__directory .directory__list svg {
  width: 25px;
  height: 25px;
}
.venues-ui__directory .directory__heading {
  margin: 8px;
  font-size: 15px;
  font-weight: normal;
  cursor: pointer;
}
.venues-ui__directory .directory__input {
  margin: 10px;
}
.venues-ui__directory .directory__input input {
  width: 100%;
  padding: 5px 0;
}
.venues-ui__directory .directory__trigger {
  position: absolute;
  right: 10px;
  top: 15px;
  width: 10px;
  height: 10px;
}
.venues-ui__directory .directory__trigger .arrow {
  transform: rotate(0);
  transition: 0.4s;
}
.venues-ui__directory .directory__trigger--active .arrow {
  transform: rotate(-180deg);
  transition: 0.4s;
}`),i.Drawing=k0,i.Geometry=i0,i.Level=g0,i.Provider=D0,i.Route=$2,i.Service=W2,i.Service2=Xx,i.Venue=E1,i.ui=Y2,Object.defineProperty(i,"__esModule",{value:!0}),i}({})}).call(self);const H$1=H;var define_process_env_default$1={};function Map$1({shopsList:i}){const o=reactExports.useRef(null),s=reactExports.useRef(null),_e=reactExports.useRef(null),_n=_o=>{const _u=new H$1.service.Platform({apikey:define_process_env_default$1.REACT_APP_HERE_KEY}).createDefaultLayers(),_h=new H$1.Map(_o,_u.vector.normal.map,{pixelRatio:window.devicePixelRatio,center:{lat:0,lng:0},zoom:2});s.current=_h;const ty='<svg id="Calque_1" width="1.6em" data-name="Calque 1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 167.42 131.24"><defs><style>.cls-1,.cls-3{fill:#003a96;}.cls-1,.cls-2{fill-rule:evenodd;}.cls-2{fill:url(#Dégradé_sans_nom_8);}</style><linearGradient id="Dégradé_sans_nom_8" x1="50.27" y1="65.11" x2="131.31" y2="65.11" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ff0"/><stop offset="0.19" stop-color="#fff500"/><stop offset="0.52" stop-color="#ffdb00"/><stop offset="0.94" stop-color="#ffb100"/><stop offset="1" stop-color="#fa0"/></linearGradient></defs><path class="cls-1" d="M56.42,19h53.15l25.09,43.48L54.94,21.62Z"/><path class="cls-2" d="M53,24.92l78.28,40.17L53.06,105.3l-2.79-4.84L85.45,65.09,50.27,29.69,53,24.92Z"/><path class="cls-1" d="M48.3,33.12l31.77,32L48.29,97,29.85,65.08l18.45-32Z"/><path class="cls-1" d="M134.67,67.65l-25.1,43.47H56.43L55,108.61Z"/><path class="cls-3" d="M116.27,122.86H49.89L16.7,65.37,49.89,7.88h66.38l33.19,57.49Zm-64.83-2.69h63.28l31.63-54.8L114.72,10.58H51.44L19.81,65.37Z"/></svg>',oy=new H$1.map.Icon(ty),hy=new H$1.map.Group;_h.addObject(hy),i.forEach(vy=>{const xy={lat:vy.GeoLoc.Latitude,lng:vy.GeoLoc.Longitude};let wy=new H$1.map.Marker(xy,{icon:oy});wy.setData(`<div style="background-color:white">${vy.Title}<br/>${vy.Street}<br/>${vy.City}</div>`),hy.addObject(wy)}),_h.setCenter({lat:i[0].GeoLoc.Latitude,lng:i[0].GeoLoc.Longitude}),_h.setZoom(8,!0);const fy=new H$1.mapevents.Behavior(new H$1.mapevents.MapEvents(_h));_e.current=fy,H$1.ui.UI.createDefault(_h,_u)};return reactExports.useEffect(()=>{if(o.current)return _n(o.current),()=>{_e.current&&_e.current.dispose(),s.current&&s.current.dispose()}},[i]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Box$1,{sx:{padding:"50px",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:jsxRuntimeExports.jsx(Box$1,{ref:o,sx:{width:{xs:"100%",md:"800px"},height:{xs:"300px",md:"500px"},backgroundColor:"#e0e0e0",borderRadius:"10px"}})})})}var define_process_env_default={};const shopsToKeep=["MS SUPPORT","MS SAFETY","MS TOOLS","MS HEAVY","BOLT AND LADDER KOUROU","MS INDUSTRY","PRESTATIONS ET SERVICES","MS LOCATION","MS SUPPORT","BOLT AND LADDER COLLERY","BOLT AND LADDER SUZINI"];function App(){const[i,o]=reactExports.useState(null),[s,_e]=reactExports.useState(null);reactExports.useEffect(()=>{i===null&&fetch(define_process_env_default.REACT_APP_HERE_URL,{method:"POST"}).then(_a=>_a.json()).then(_a=>{let _u=_a.d.results.filter(_h=>shopsToKeep.find(ty=>ty===_h.Title));o(_u)})});const _n=reactExports.useRef(null),_o=(_a,_u)=>{_a.stopPropagation(),_e(i[_u]),_n.current.scrollIntoView({behavior:"smooth"})};return i===null?jsxRuntimeExports.jsx("p",{children:"En chargement"}):jsxRuntimeExports.jsxs("div",{className:"App",children:[jsxRuntimeExports.jsx(Header,{id:"pageHeader"}),jsxRuntimeExports.jsx(LogoGallery,{id:"shopSelectorGallery",updateShopInfo:_o,shops:i}),jsxRuntimeExports.jsx("div",{ref:_n,children:jsxRuntimeExports.jsx(ShopTabs,{id:"shopInfoViz",shop:s})}),jsxRuntimeExports.jsx(Map$1,{id:"shopMaps",shop:s,shopsList:i})]})}const scriptRel="modulepreload",assetsURL=function(i){return"/"+i},seen={},__vitePreload=function i(o,s,_e){let _n=Promise.resolve();if(s&&s.length>0){const _o=document.getElementsByTagName("link");_n=Promise.all(s.map(_a=>{if(_a=assetsURL(_a),_a in seen)return;seen[_a]=!0;const _u=_a.endsWith(".css"),_h=_u?'[rel="stylesheet"]':"";if(!!_e)for(let hy=_o.length-1;hy>=0;hy--){const fy=_o[hy];if(fy.href===_a&&(!_u||fy.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${_a}"]${_h}`))return;const oy=document.createElement("link");if(oy.rel=_u?"stylesheet":scriptRel,_u||(oy.as="script",oy.crossOrigin=""),oy.href=_a,document.head.appendChild(oy),_u)return new Promise((hy,fy)=>{oy.addEventListener("load",hy),oy.addEventListener("error",()=>fy(new Error(`Unable to preload CSS for ${_a}`)))})}))}return _n.then(()=>o()).catch(_o=>{const _a=new Event("vite:preloadError",{cancelable:!0});if(_a.payload=_o,window.dispatchEvent(_a),!_a.defaultPrevented)throw _o})},reportWebVitals=i=>{i&&i instanceof Function&&__vitePreload(()=>import("./web-vitals-h7xukfVX.js"),__vite__mapDeps([])).then(({getCLS:o,getFID:s,getFCP:_e,getLCP:_n,getTTFB:_o})=>{o(i),s(i),_e(i),_n(i),_o(i)})},root=client.createRoot(document.getElementById("root"));root.render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));reportWebVitals()});export default wL();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
